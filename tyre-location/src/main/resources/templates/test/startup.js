define("ai/common.tpl",[],function(){return'\x3c!-- target: ai_base_layout --\x3e\n<div class="ai-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        \x3c!-- block: breadcrumb--\x3e\n            \x3c!-- import: ai_breadcrumb --\x3e\n        \x3c!-- /block --\x3e\n\n        \x3c!-- block: content --\x3e\n            this is default content\n        \x3c!-- /block --\x3e\n    </div>\n</div>\n\n\x3c!-- target: ai_breadcrumb --\x3e\n<p class="breadcrumb">\n    <span>产品服务</span>\n\n    \x3c!-- for: ${breadcrumb} as ${item}, ${index} --\x3e\n    <span class="divider">/</span>\n    \x3c!-- if: ${item.url} --\x3e\n    <a href="${item.url}">\x3c!-- if: ${index} === 0 --\x3e${aiAppType.text} - \x3c!-- /if --\x3e${item.title}</a>\n    \x3c!-- else --\x3e\n    <span class="active">\x3c!-- if: ${index} === 0 --\x3e${aiAppType.text} - \x3c!-- /if --\x3e${item.title}</span>\n    \x3c!-- /if --\x3e\n    \x3c!-- /for --\x3e\n</p>\n'}),define("ai/common/action/action",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/create-decorated-class","babel-runtime/helpers/class-call-check","babel-runtime/core-js/symbol","inf-ria/mvc/ListAction","babel-runtime/helpers/interop-require-default","inf-ria/mvc/FormAction","inf-ria/mvc/BaseAction","inf-ria/decorators","ai/common/enums","inf-ria/sidebar/Sidebar","ai/config/sidebar"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){module.exports=function(){var n=arguments.length<=0||arguments[0]===undefined?"base":arguments[0];return function(n){function r(){a["default"](this,r),n.apply(this,arguments)}return e["default"](r,n),r.prototype.initBehavior=function(){n.prototype.initBehavior.call(this),this.model.get("userInfo").agreement?this.model.get("aiAppType").value===u.AppType.ar&&this.model.get("userInfo").type===u.UserType.UC&&this.view.showUCDialog():this.view.showAgreement(),new h["default"](g["default"]())},t["default"](r,[{key:i["default"](),decorators:[l.viewOn("agree")],value:function(){this.model.agree()}}]),r}("form"===n?f["default"]:"list"===n?p["default"]:m["default"])};var p=r["default"](n),f=r["default"](s),m=r["default"](o),h=r["default"](d),g=r["default"](c)}),define("ai/common/action/Base",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./action","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=function(a){function i(){t["default"](this,i),a.apply(this,arguments)}return e["default"](i,a),i}(i["default"](a)["default"]());module.exports=n}),define("ai/common/action/Form",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./action","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=function(a){function i(){t["default"](this,i),a.apply(this,arguments)}return e["default"](i,a),i}(i["default"](a)["default"]("form"));module.exports=n}),define("ai/common/action/List",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./action","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=function(a){function i(){t["default"](this,i),a.apply(this,arguments)}return e["default"](i,a),i}(i["default"](a)["default"]("list"));module.exports=n}),define("ai/common/agreement",["exports","module"],function(exports,module){module.exports='\n<div class="agreement">\n    <h1>百度AI开放平台服务协议</h1>\n    <p>欢迎您使用百度AI开放平台（以下简称“本平台”）！</p>\n    <h2>一、特别提示</h2>\n    <p>1.<strong>在您（及您的用户）开始使用本平台提供的相关服务（“本服务”或“本平台服务”）之前，请您务必（并促使您的用户务必）认真阅读并充分理解本《AI开放平台服务协议》的每一条款、您（及您的用户）开通或使用某项服务时的附加条款以及百度不时发布或修订的相关协议（统称为“本协议”）。同时，您（及您的用户）还应仔细阅读并充分理解百度的知识产权声明、免责声明、权利声明、隐私权保护声明、网民权益保障声明等系列声明（地址：<a href="https://www.baidu.com/duty/" target="_blank">https://www.baidu.com/duty/</a> ）。 在本协议中，请您务必（并应促使您的用户务必）特别注意及重点阅读与您（及您的用户）的权利及义务密切相关的条款，此类条款可能以粗体的方式标识，包括但不限于免除或者限制责任的条款。</strong></p>\n    <p>2.<strong>如果您（及您的用户）使用本服务，您应当（并促使您的用户应当）完全接受本协议的全部约定或规定。如您（或您的用户）不同意本协议及/或随时对其的修改，请勿访问本平台或使用本平台服务，您（及您的用户）可通过从产品中终止使用本平台所提供的相关服务来取消“服务”。一旦您（及您的用户）开始使用本服务，就视为您（及您的用户）已经了解并完全同意本协议及百度系列声明的各项内容及百度对其随时作出的修改，同时还表明您（及您的用户）已经完全同意百度已经完全履行了相关的提示义务和说明义务。您应确保您（并应促使您的用户确保其自身）有充分的权利、权力、权限及能力以同意及履行本协议。</strong></p>\n    <p>3.<strong>百度有权不时对本协议进行修订，且无需事先及单独通知您（或您的用户）。如果本协议发生变动，百度将在其网站上公布修订后的协议。您充分理解并同意（并应促使您的用户充分理解并同意），如果您（及您的用户）在修订后的协议公布后继续使用本服务，即视为您（及您的用户）同意修订后的协议。</strong></p>\n    <h2>二、使用本平台服务</h2>\n    <p><strong>1.服务介绍</strong></p>\n    <p>本服务包括由百度（和/或其关联公司、附属公司）通过互联网提供的语音技术、图像技术、自然语言、数据智能、深度学习、AR增强现实、智能视频分析等服务，以及duerOS、Apollo、人脸会员识别等行业方案或者专项解决方案，以及百度不时开发的新型服务类型。具体的服务形式和内容由百度按照“现状”向您（及您的用户）提供。</p>\n    <p><strong>2.权利声明</strong></p><p>本协议未明示向您（及您的用户）授权的其他一切权利仍由百度保留，本协议未授予您（及您的用户）任何其他未明示的权利。如您（及您的用户）使用其他权利，您（及您的用户）需要及时联系百度，事先获得百度的书面许可，并与百度签订书面协议。百度如果未行使前述任何权利，并不构成对该权利的放弃。</p>\n    <p><strong>3.终止服务</strong></p><p><strong>除非您（或您的用户）与百度达成的书面协议中另有约定，百度有权随时修改、暂停或终止本服务或其中任何一部分，也有权随时修改、暂停或终止您（及您的用户）对本服务的使用而无须事先声明，包括但不限于百度可以随时自行决定限制您（或您的用户）使用服务的次数、数据量等。</strong></p>\n    <h2>三、使用规则及限制</h2>\n    <p><strong>1. 您需保证（并应促使您的用户保证）您（及您的用户）对本服务的使用不违反国家各项法律法规的规定，且不侵害任何第三方权益，该如因此造成任何后果及损失，由您（及您的用户）自行承担全部责任。</strong></p>\n    <p><strong>2.禁止行为</strong></p>\n    <p>您充分理解并同意（并应促使您的用户充分理解并同意），您（及您的用户）在使用本服务时，应当遵守所有中华人民共和国的法律、法规、规章制度、规范、政策、行政命令、强制标准及行业标准等（统称为“法律法规”）。<strong>除非法律法规允许且百度事先书面许可，您（及您的用户）不得从事以下活动，也不得同意、授权或指示任何第三人从事包括但不限于以下内容的活动：</strong></p>\n    <p>(1)\t删除本平台服务中包含的任何版权声明、商标声明或其他所有权声明；包括但不限于任何有损本平台一切相关知识产权的行为。</p>\n    <p>(2)\t向任何第三方提交错误地明示或暗示向您提供的服务为百度所属、赞助或认可的内容等；</p>\n    <p>(3)\t宣扬或提供关于非法行为的说明信息、宣扬针对任何团体或个人的人身伤害或传播任何病毒、蠕虫、缺陷、特洛伊木马或其他具有破坏性的内容等；</p>\n    <p>(4)\t对本服务进行逆向工程、反编辑或试图从本服务或本服务相关内容的任何部分提取源代码，或获取原始数据和其他数据等；</p>\n    <p>(5)\t对本服务或者本服务运行过程中释放出的任何数据或其他数据及本服务运行过程中的交互数据进行复制、更改、修改等操作，包括但不限于使用插件、外挂或非经授权的第三方工具或服务接入本服务和相关系统；</p>\n    <p>(6)\t创造任何网站或应用程序以重现或复制本服务或本平台。</p>\n    <p><strong>3.遵守法律规范</strong></p>\n    <p><strong>您不得（并应促使您的用户保证不会）利用本服务上传、上载、发布、发表、传播任何违法内容，包括但不限于以下内容和行为：</strong></p>\n    <p>(1)\t反对宪法所确定的基本原则的；</p>\n    <p>(2)\t危害国家安全，泄露国家秘密，颠覆国家政权，破坏国家统一的；</p>\n    <p>(3)\t损害国家荣誉和利益的；</p>\n    <p>(4)\t煽动民族仇恨、民族歧视、破坏民族团结的；</p>\n    <p>(5)\t破坏国家宗教政策，宣扬邪教和封建迷信的；</p>\n    <p>(6)\t散布谣言，扰乱社会秩序，破坏社会稳定的；</p>\n    <p>(7)\t散布淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪的；</p>\n    <p>(8)\t侮辱或者诽谤他人，侵害他人合法权利的；</p>\n    <p>(9)\t含有虚假、有害、胁迫、侵害他人隐私、骚扰、侵害、中伤、粗俗、猥亵或其他道德上令人反感的内容；</p>\n    <p>(10) 含有中国法律、法规、规章、条例以及任何具有法律效力之规范所限制或禁止的其他内容的；</p>\n    <p>(11) 为任何非法目的而使用网络服务系统。</p>\n    <p><strong>4.保障网络信息安全</strong></p>\n    <p><strong>您不得（并应促使您的用户保证不会）利用本服务从事以下危害计算机网络信息安全的活动：</strong></p>\n    <p>(1)\t未经允许，进入计算机信息网络或者使用计算机信息网络资源的；</p>\n    <p>(2)\t未经允许，对计算机信息网络功能进行删除、修改或者增加的；</p>\n    <p>(3)\t未经允许，对进入计算机信息网络中存储、处理或者传输的数据和应用程序进行删除、修改或者增加的；</p>\n    <p>(4)\t故意制作、传播计算机病毒等破坏性程序的；</p>\n    <p>(5)\t其他危害计算机信息网络安全的行为。</p>\n    <p><strong>5.服务的限制</strong></p>\n    <p>本平台对每位用户每天发起的服务请求次数及并发请求量具有一定的限制。相关服务达到限制后，我们将可能暂时中断您（或您的用户）的服务正常使用。</p>\n    <p>在双方协商一致的前提下，您（及您的用户）应在应用中正确、完整、醒目地标注“百度”或“技术由百度提供”的字样。</p>\n    <p><strong>6.您充分理解并同意（并应促使您的用户充分理解并同意），您（及您的用户）对自己使用本服务的一切行为及由此产生的一切结果负责，包括但不限于您（及您的用户）所发表的任何内容、提供的任何服务以及由此产生的任何后果。</strong> 您（及您的用户）应对本服务的内容应自行判断并决定是否使用，并承担因使用本服务及其相关内容而引起的所有风险，包括因对本服务及其内容的真实性、完整性、准确性、及时性及实用性的依赖而产生的风险。<strong>百度不对此提供任何担保和保证，不对因前述风险而导致的任何后果或损失对您（或您的用户）承担责任。</strong></p>\n    <p>如果您（或您的用户）违反了法律法规或本协议，百度有权依据合理判断对违反法律法规或本协议的行为作出处理，并保留对该违反行为采取法律所能提供的所有补救手段的权利。百度有权对违反法律法规及本协议的任何用户调查并采取适当的法律行动，包括但不限于民事诉讼等。百度有权根据违法违规行为的严重程度，将上述违法违规行为的线索和您（或您的用户）的个人信息报告司法机关或其他执法机关，并配合司法机关或其他执法机关进行的调查、听证、起诉等。您（或您的用户）应当自行承担由此产生的任何法律责任。</p>\n    <h2>四、知识产权与数据</h2>\n    <p>1. 百度是本服务及其呈现内容以及任何其他相关内容的知识产权的完整和全部的合法权利人。您充分理解并同意（并应促使您的用户充分理解并同意），您（及您的用户）仅拥有依照本协议约定合法使用本服务的权利，与本服务相关的一切著作权、商标权、专利权、商业秘密等知识产权均受中华人民共和国法律法规和相应的国际条约保护，百度享有上述知识产权。</p>\n    <p>2. 未经百度或相关权利人书面同意，您不得（并应促使您的用户保证不会）为任何商业或非商业目的自行或许可任何第三方实施、利用、转让上述知识产权。</p>\n    <p>3. 您充分理解并同意（并应促使您的用户充分理解并同意），本服务的呈现内容中可能百度、其关联公司及其合作伙伴的任何版权标识、商标、服务标记、标识、商号、企业名称、域名及其他明显的标志，您不得（并应促使您的用户保证不会）以任何方式进行删除、掩藏、修改或替换该等信息或者标志。</p>\n    <p>4. 您不得（并应促使您的用户保证不会）以任何方式删除、掩藏、修改或替换本服务及呈现内容中所附的或包含的任何专有权利声明（包含但不限于著作权、商标权、专利权、所有权声明等）、其他任何链接或公告等。</p>\n    <p>5. <strong>您同意（并应取得您的用户事先同意）在此授予百度免费的、永久性的、不可撤销的、非独家的和不可转让的权利和许可，在本协议期限内使用您（及您的用户）的标志或行为来宣传您（及您的用户）对本服务的使用。</strong></p>\n    <p>6. 平台运营数据是指您（及您的用户）在本平台使用服务、您（及您的用户）基于本平台服务而开发的产品或与本平台服务相关的产品中产生的全部或任何数据，包括但不限于您（及您的用户）向本平台提交的数据、您（及您的用户）的使用或操作行为生成的数据及各类交互数据等。“平台运营数据”的所有权及其他相关权利均属于百度，且是百度的商业秘密，除非相关法律法规明确规定属于您（或您的用户）的合法相关权利。</p>\n    <p>7. 用户数据：是指用户在开放平台、应用等中产生的与用户相关的数据，包括但不限于用户提交的语音数据、图像数据、用户操作行为形成的数据等。"用户数据"的所有权及其他相关权利属于百度，且是百度的商业秘密，依法属于用户享有的相关权利除外。您的应用或服务对于用户数据的收集、保存、使用等必须满足以下要求：</p>\n    <p>• 您的应用或服务需要收集用户任何数据的，必须事先获得用户的明确同意，且仅应当收集为应用程序运行及功能实现目的而必要的用户数据，同时应当告知用户相关数据收集的目的、范围及使用方式等，保障用户知情权。</p><p>• 您采集的用户数据，应采取合理、安全的技术措施，确保其安全性，并对自己的行为（包括但不限于自行安装软件、采取加密措施或进行其他安全措施等）所引起的结果承担全部责任。</p>\n    <p>• 您在特定应用中收集的用户数据仅可以在该特定应用中使用，不得将其使用在该特定应用之外或为其他任何目的进行使用，也不得以任何方式将其提供给他人。</p><p>• 您应当向用户提供修改、删除用户数据的方式，确保用户要求删除其用户数据时可通过该方式自行操作完成，并确保相关数据被完全删除。</p>\n    <p>• 未经百度同意，您不得通过本服务收集、存储、抓取、获得或要求用户提供包括但不限于人工智能开放平台或其服务平台的信息内容、用户数据等百度认为属于敏感信息范畴的数据，也不得将所合法获得的前述数据自行或提供给其用户、客户用于创建、补充或维护自身关系链。</p>\n    <p>• 未经百度允许，您不得利用本服务所获得的数据实施或变相实施任何形式的推广、营销、广告行为。</p>\n    <p>• 如果百度认为开发者收集、使用用户数据的方式，可能损害用户体验，百度有权要求您删除相关数据并不得再以该方式收集、使用用户数据。</p>\n    <p>• 百度有权限制或阻止您获取用户数据及开放平台数据。</p>\n    <p>• 一旦您停止使用开放平台，或百度基于任何原因终止您使用本服务，您必须立即删除全部从开放平台中获得的数据（包括各种备份），且不得再以任何方式进行使用</p>\n    <h2>五、隐私政策</h2>\n    <p><strong>1.概述</strong></p>\n    <p>百度十分重视用户信息的保护，百度将会采取合理措施保护您（及您的用户）的隐私权。<strong>为了向您（及您的用户）提供更好的服务，您同意（并应取得您的用户事先同意）并授权本平台基于服务必要性获取相应的信息和数据，不论是您（及您的用户）主动提供的还是使用本服务过程中获取的信息和数据。</strong> 您（及您的用户）提供的信息和数据将用于改善百度的服务，向您（及您的用户）提供更好的用户体验以及满足您（及您的用户）的需求等。</p>\n    <p>如果您（或您的用户）不同意提供相关信息和数据，或您不保证在您的用户知情、并授权允许的情况下使用本服务，您（或您的用户）将无法使用本服务的部分或者全部。<strong>一旦您（及您的用户）选择使用本服务，即表示您认可（并已取得您的用户的事先认可）并接受本协议中隐私政策的内容以及百度可能随时更新并公布的新内容。</strong></p>\n    <p>百度会以高度的勤勉义务对待这些信息，除非事先获得您（或您的用户）的授权或本协议另有规定外，不会将这些信息对外公开或向第三方提供。百度可能会向百度的关联公司提供您（或您的用户）的个人信息，并要求其遵循百度的隐私权政策以及其他任何相应的保密和安全措施来处理和使用这些信息。</p>\n    <p><strong>如因用户数据、用户肖像信息等应用造成您的直接用户的投诉、主张、诉讼等纠纷，您应当负责自行处理并承担全部法律责任，同时应保证百度免于因此而遭受任何损失或损害。如百度因任何政府决定、法院判决等对包括您及您的用户在内的任何人承担单独或连带赔偿责任的，您应当对百度作出相应数额的补偿，以保证百度免于因此而遭受任何损失或损害。</strong></p>\n    <p><strong>2.信息披露</strong></p>\n    <p><strong>在如下情况下，百度可能会披露您（或您的用户）的信息</strong>：（1）事先获得您（或您的用户）的授权；（2）您（及您的用户）使用共享功能；（3）根据法律、法规、法律程序的要求或政府主管部门的强制性要求；（4）以学术研究或公共利益为目的；（5）为维护百度的合法权益，例如查找、预防、处理欺诈或安全方面的问题；（6）符合相关服务条款或使用协议的规定；（7）以无法合理被用于识别您（及您的用户）身份的汇总和/或匿名的形式分享您（及您的用户）的信息。</p>\n    <p><strong>3.信息保护</strong></p>\n    <p>百度非常重视信息安全，百度成立了专责团队，研发和应用多种安全技术和程序等，通过这些严格措施努力保护您的信息不被未经授权的访问、使用或泄漏。维护本服务的安全与正常使用是百度和您（及您的用户）的共同责任，百度将采取适当的安全措施和技术手段维护本服务，但是您充分理解并同意（并应促使您的用户充分理解并同意），<strong>百度并不能就此提供完全保证</strong>。</p>\n    <p>本服务同时遵循百度隐私权保护声明，您（及您的用户）可以访问以下地址查阅： <a href="//www.baidu.com/duty/yinsiquan.html" target="_blank">https://www.baidu.com/duty/yinsiquan.html</a>。</p>\n    <h2>六、免责及责任限制</h2>\n    <p>1. 如果百度发现或收到他人举报或投诉您（或您的用户）违反本协议约定的，百度有权根据您（或您的用户）的行为性质，采取包括但不限于暂停或终止本服务、追究法律责任等措施。</p>\n    <p>2. 您充分理解并同意（并应促使您的用户充分理解并同意），百度有权依合理判断对违反有关法律法规或本协议规定的行为进行处理，对您（或您的用户）的违法违规行为采取适当的法律行动，并依据法律法规保存有关信息向有关部门报告等，您应独自承担由此而产生的一切法律责任。</p>\n    <p>3. <strong>您充分理解并同意（并应促使您的用户充分理解并同意），因您（或您的用户）违反本协议或相关法律法规的规定，导致或产生第三方主张的任何索赔、要求或损失，您应当独立承担责任，并保证百度免于因此遭受任何损失；百度因此遭受损失的，您应当向百度承担全部赔偿责任</strong>。您同意<string>（并应取得您的用户的事先同意）</string>百度及其分支机构、联属机构、管理人员、代理机构、员工、广告客户、许可证颁发机构、供应商或合作伙伴免受任何第三方由于您（及您的用户）使用本服务、违反本协议或任何其他相关行为而导致或在任何方面与之相关的索赔，<strong>您（及您的用户）承担全部的责任并赔偿百度一切种类与性质的费用，包括所有索赔、损失、损害（实际和继发损害）、诉讼、判决、诉讼费和律师费</strong>。在此情况下，百度会向您（或您的用户）提供有关此类索赔要求或诉讼的书面通知。<strong>在所有情况下，百度对于任何不能合理预见的损失或损害不承担责任。</strong></p>\n    <p>4. 您承认（并应促使您的用户承认），您（或您的用户）若违反法律法规或本协议，将会给百度造成无法弥补的损害且损害程度将难以确定。您充分理解并同意（并应促使您的用户充分理解并同意），如果因为您（或您的用户）违反法律法规或本协议而导致百度、其他用户或任何第三方造成损害，引起任何和全部索赔、请求、损失、责任和费用，<strong>您（及您的用户）应当自行承担因此产生的全部后果和损失，包括但不限于罚款、赔偿金、诉讼费、律师费等，百度对此不承担任何责任</strong>。</p>\n    <p>5. <strong>您了解并同意（并应促使您的用户了解并同意）您（及您的用户）将自行承担使用本服务的所有风险。本平台明确声明，不提供任何明示或默示的担保和保证，包括但不限于：</strong></p>\n    <p>(1) 本服 务将符合您（或您的用户）的实际或特定需求或目的；</p>\n    <p>(2) 本服务的准确性、完整性或及时性；</p>\n    <p>(3) 本服务将不受干扰、无中断、持续稳定或没有错误；</p>\n    <p>(4) 使用本服务获得的任何结果或资料的正确性或可靠性；</p>\n    <p>(5) 本服务中的任何错误、问题、故障都将得到更正或解决；</p>\n    <p>(6) 经本服务购买或获得的任何产品、服务或其他内容符合您的期望；</p>\n    <p>(7) 本服务中第三方服务或外部链接及其指向的内容的准确性、稳定性和完整性；</p>\n    <p>(8) 您（及您的用户）提供给百度的信息不受任何侵害。</p>\n    <p>6. 任何通过本服务下载或以其他方方式获得的资料均属您（及您的用户）个人所为，<strong>您（或您的用户）单方承担下载这类资料可能会损坏您（或您的用户）计算机系统或丢失数据的风险。您（及您的用户）从本平台或通过本服务得到的任何建议或信息，无论是口头还是书面信息，均不得作为本协议中未明确声明事项的担保和保证。</strong></p>\n    <p>7. 您明确理解并同意（并应促使您的用户理解并同意）<strong>百度将不对由以下原因导致的直接、间接、偶然、特殊、继发性或惩罚性损失负责</strong>，包括但不仅限于利润、声誉、使用、数据方面的损失或其他无形损失（即使已向百度告知了发生此类损害的可能性）：</p>\n    <p>(1) 您（或您的用户）使用或无法使用本服务；</p>\n    <p>(2) 由于通过本服务购买或获得任何商品、数据、信息或服务、接收讯息或参与交易而导致购买替代商品和服务的费用；</p>\n    <p>(3) 未经授权的访问或修改传输内容或数据；</p>\n    <p>(4) 任何第三方有关本服务的声明或行为；或者与本服务有关的其他事宜。</p>\n    <p>8. 您充分理解并同意（并应促使您的用户充分理解并同意），本服务可能会受到多种因素影响，包括但不限于您（或您的用户）的原因、网络设备维护、网络连接故障、网络信号未覆盖、网络传输延时或中断、电子终端、通讯或其他系统的故障或误差、电力故障、罢工、劳动争议、暴乱、骚乱、火灾、洪水、风暴、爆炸、战争、政府行为、司法行政机关的命令、其他不可抗力或第三方的不作为等不可抗力；本服务也可能受到各种安全问题的侵扰，例如您（或您的用户）下载安装的其他软件或访问的其他网站中含有病毒、木马或其他恶意程序，威胁到您（或您的用户）的设备和数据安全，进而影响本服务的使用等。除法律法规明确规定要求百度承担责任之外，因本款所述原因给您（或您的用户）造成的任何损失由您（或您的用户）本人自行承担，百度对此不承担责任。</p>\n    <p>9. 您充分理解并同意（并应促使您的用户充分理解并同意），您（或您的用户）使用本服务进行的任何相关行为所产生的任何义务、责任和后果应由您（及您的用户）自行承当，您（及您的用户）的任何管理人员、雇员或其他代理人的行为，视为您（或您的用户）的行为，由此产生的所有义务、责任和后果同样由您（及您的用户）自行承担。如果您（或您的用户）代表其他主体使用本服务进行网站或应用程序开发，而您（或您的用户）未告知其他主体本协议的存在并获得其书面同意的，您（及您的用户）对该等主体使用本服务进行的任何相关行为所产生的任何义务、责任和后果承担连带责任。</p>\n    <h2>七、服务的变更、中断和终止</h2>\n    <p>1. 百度有权随时自行选择发出或者不发出通知，以变更、中断或终止提供本服务，也有权自行选择变更、中断或终止您（或您的用户）对本服务的使用。如因服务器或系统的维护、升级需要或其他原因需要暂停或终止本服务的全部或者部分内容，百度将尽可能事先公告。如果百度永久终止提供本服务，百度将在本服务终止前提前在相关软件或网站上公告，您同意（并应取得您的用户的事先同意）百度无需单独通知您（或您的用户）。除法律法规明确要求百度承担责任之外，百度无需因本服务的任何变更、中断和终止向您或者任何第三方承担任何责任。</p>\n    <p>2. 如您（或您的用户）停止访问本平台或使用本平台服务，或本平台终止向您（或您的用户）提供服务，您必须（并应促使您的用户必须）立即删除全部从平台中获得的数据（包括各种备份），且不得再以任何方式进行使用。</p>\n    <p>3. 您应（并应促使您的用户应当）自行对因使用本服务而存储在百度服务器的各类数据等信息，在本服务之外，采取合理、安全的技术措施，确保其安全性，并对自己的行为（包括但不限于自行安装软件、采取加密措施或进行其他安全措施等）所引起的结果承担全部责任。</p>\n    <h2>八、期限和终止</h2>\n    <p>1. 本协议的生效日期应为您（及您的用户）同意本协议或使用本服务之日中的较早日期，并且无固定期限，除非根据以下情形而终止</p>\n    <p>(1) 您（或您的用户）丧失民事权利能力或民事行为能力，或丧失其他主体的法律授权；</p>\n    <p>(2) 百度因为任何原因终止提供本服务；</p>\n    <p>(3) 您（或您的用户）不再使用本服务；</p>\n    <p>(4) 其他导致本协议终止的原因。</p>\n    <p>2. 您（及您的用户）和百度都可以不需任何理由终止本协议。如果您（或您的用户）需要终止本协议，您（或您的用户）必须先将本服务从网站或应用中移除，并删除本平台提供的一切数据（包括但不限于所有图片、语音等以及本平台标志）。</p>\n    <p>3. 本协议由于任何原因终止时，您（及您的用户）根据本协议所获得的一切权利及许可全部同时终止。届时，您（及您的用户）将无法继续使用本服务的任何部分。</p>\n    <p>4. 您充分理解并同意（并应促使您的用户充分理解并同意），本协议终止后，百度将继续保存通过本服务收集的所有信息和数据，并根据本协议使用。</p>\n    <p>5. 在本协议终止后，百度仍然可以依据相关法律法规及本协议向您（或您的用户）追究违反法律法规或违反本协议行为的责任，本协议中关于个人信息保护、知识产权、担保与保证、责任承担、免责及责任限制、法律适用和争议解决的条款始终有效。</p>\n    <p>6. 除法律法规明确规定要求百度承担责任之外，百度无需因本协议或本服务的终止而需向您（或您的用户）或任何第三方承担责任。</p>\n    <h2>九、争议解决</h2>\n    <p>1. 本协议的订立、效力、解释、履行、修改和终止，访问和使用本服务以及争议的解决均适用中华人民共和国（仅为本协议之目的，不包括香港、澳门和台湾）法律。</p>\n    <p>2. 因访问和使用本服务而发生的任何争议，各方应首先通过友好协商的方式加以解决。协商不成时，任何一方均可向北京市海淀区人民法院提起诉讼。因访问和使用本服务而发生任何争议或任何争议正在进行诉讼时，除争议的事项外，各方仍应继续行使各自的其他权利并履行各自的其他义务。</p>\n    <h2>十、其他</h2>\n    <p>1. <strong>通知及送达</strong></p>\n    <p>您充分理解并同意（并应促使您的用户充分理解并同意），百度就有关本服务的任何通知可通过如下任一途径向您（或您的用户）发送：在软件及网站张贴一般通知；向您（或您的用户）提供的电子邮件地址发送电子邮件；向您（或您的用户）提供的移动通讯号码发送短信通知；向您（或您的用户）提供的通讯地址以平信形式寄送书面通知。前述通知自发布或发送之日即视为已经对您（或您的用户）送达，您（及您的用户）有义务查收任何上述通知。</p>\n    <p>2. <strong>可分割性</strong></p>\n    <p>如果本协议的任何约定与适用的法律法规冲突的，以适用的法律法规的规定为准。如本协议中的任何约定无论因何种原因无效或不可执行，其在不影响其他约定的情况下从本协议中被移除，各方应以具有相同效果的有效、可执行的且最能体现本协议内容和意图的条款（或部分）予以替换。本协议中的其余约定仍应保持有效并且具有完全的法律拘束力。</p>\n    <p>3. <strong>转让</strong></p>\n    <p>未经百度的事先书面同意，您（及您的用户）不得向任何第三方转让本协议及其项下的任何权利和义务。百度有权随时在未取得您（及您的用户）同意的情况下向以下各方全部或部分地转让本协议：（1）百度的子公司或者关联方；（2）百度的公司股权、业务或资产的收购方；或者（3）并购交易中的继承人。任何违反本协议的转让行为均是无效的。</p>\n    <p>4. <strong>完整性</strong></p>\n    <p>本协议（包括补充协议、附加条款及其他相关条款）构成您（及您的用户）与百度之间就访问和使用本服务的全部协议和理解，并取代您（及您的用户）与百度先前存在的关于前述问题的任何及全部的协议或理解。</p>\n    <p>5. <strong>弃权</strong></p>\n    <p>除非百度以书面方式确认并同意，百度未履行本协议中任何权利或条款的行为不构成百度对相关权利或条款的放弃。</p>\n    <p>6. <strong>标题</strong></p>\n    <p>本协议中的所有标题仅为阅读方便，本身并无实际涵义，不能作为本协议涵义解释的依据。</p>\n    <p>7. <strong>联系我们</strong></p>\n    <p>关于本协议的问题，您（及您的用户）可以通过如下联络方式同百度联系： 中国北京市海淀区上地十街10号 北京百度网讯科技有限公司法务部 邮政编码：100085</p>\n    <p>8. <strong>解释权</strong></p>\n    <p>百度在法律法规许可的范围内对协议条款享有最终解释权。</p>\n    <p>2017年1月9日</p>\n</div>\n'}),define("ai/common/basePage",["exports","module","babel-runtime/core-js/promise","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/variable","ai/config/sidebar","inf-ui/appui","ai/components/BreadCrumb","ai/components/Agreement/index","ai/components/subUser/index","ai/common/enums","ai/common/util","ai/common/Sidebar"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){var f=i["default"](a),m=i["default"](n),h=i["default"](r),g=i["default"](o),v=i["default"](l),x=i["default"](u),b=i["default"](c),y=i["default"](p);module.exports=function(a){return b["default"].mixin(a,{components:{"app-view":s.AppView,"app-content":s.AppContent,"app-breadcrumb":s.AppBreadcrumb,"app-sidebar":s.AppSidebar,breadcrumb:g["default"]},compiled:function(){},inited:function(){this.sidebar=new y["default"](h["default"]()),this.handleUserInfo()},attached:function(){b["default"].sendPvlog(this.$get("url").getPath())},getSubUserInfo:function(){return null!=m["default"].subUserInfo?e["default"].resolve(m["default"].subUserInfo):this.ajax.subUserInfo()},getUserInfo:function(){return null!=m["default"].userInfo?e["default"].resolve(m["default"].userInfo):this.ajax.userInfo()},handleUserInfo:function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.getSubUserInfo());case 2:if(e=i.sent,this.$set("subUserInfo",e),m["default"].subUserInfo=e,!e.isSubUser||e.isBindPassport){i.next=8;break}return this.showSubUserDialog(),i.abrupt("return");case 8:return i.next=10,t["default"].awrap(this.getUserInfo());case 10:a=i.sent,this.$set("userInfo",a),m["default"].userInfo=a,this.fire("getUserInfo",a),a.agreement||"market"===this.$get("aiAppType")?this.$get("aiAppType")===d.AppType.ar&&a.type===d.UserType.UC&&this.showArLoginDialog():this.showAgreement();case 15:case"end":return i.stop()}},null,this)},showSubUserDialog:function(){(new x["default"]).attach(document.body)},showArLoginDialog:function(){this.$confirm({title:"登录提示",width:400,content:"<p>尊敬的用户您好，AR服务目前暂不支持推广账号，请您切换百度账号登录使用</p>",needFoot:!0,okText:"百度账号登录",cancelText:"我知道了"}).then(function(){window.location.href="//login.bce.baidu.com/?redirect="+encodeURIComponent(window.location.href)},function(){window.location.href="/#/index/overview"})},showAgreement:function(){var e=new v["default"];e.attach(document.body),e.on("agree",function(){return m["default"].userInfo&&(m["default"].userInfo.agreement=!0)})}}),f["default"](a)}}),define("ai/common/component",["exports","module","inf-ui/san","inf-ui/uiFactory","inf-ria/ui/ToastLabel","babel-runtime/helpers/interop-require-default","inf-ui/x/components/CheckBox","inf-ui/x/components/Loading","inf-ui/x/components/Icon","ai/common/util","ai/config","lodash","moment","ai/common/enums","san-xui"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){var f=i["default"](a),m=i["default"](n),h=i["default"](r),g=i["default"](s),v=i["default"](o),x=i["default"](u),b=i["default"](d);module.exports=function(a){return v["default"].mixin(a,{ajax:l.api,components:{"xui-button":p.Button,"xui-checkbox":m["default"],"xui-icon":g["default"],"xui-loading":h["default"],"xui-toastlabel":p.ToastLabel,"xui-form":p.Form,"xui-item":p.FormItem,"xui-textbox":p.TextBox,"xui-table":p.Table,"xui-pager":p.Pager,"xui-viewstep":p.ViewStep,"xui-select":p.Select,"xui-numbertextline":p.NumberTextline,"xui-tip":p.Tip,"xui-dialog":p.Dialog,"xui-boxgroup":p.BoxGroup,"xui-webuploader":p.WebUploader},filters:{dateFormat:function(e,t){var a=arguments.length<=2||arguments[2]===undefined?"-":arguments[2];return e?-1===e?"永久":b["default"](e).format(t):a},url:function(e){var t=l.Url[e];return t instanceof Function?t():t},currency:function(e){var t=arguments.length<=1||arguments[1]===undefined?2:arguments[1];+t<0&&(t=0);var a="",i=Number(e).toFixed(+t).split("."),n=i[0],r=i[1];r&&(a="."+r);var s=n.length-1;return x["default"].reduceRight(n.split(""),function(e,t,a){var i=a-s;return i%3==0&&0!==i&&(e=","+e),e=t+e},a)}},computed:{isEasydl:function(){return~[c.AppType.easydlLite,c.AppType.easydlPro,c.AppType.easydlRetail].indexOf(this.data.get("aiAppType"))}},compiled:function(){this.aiAppType=v["default"].getType()},inited:function(){var e=this,t=this.watchHook||{};x["default"].keys(t).forEach(function(a){return e.watch(a,t[a].bind(e))});var a=this.methodHook||{};x["default"].keys(a).forEach(function(t){e[t]=a[t].bind(e)}),this.$set("aiAppType",this.aiAppType),this.$set("Url",l.Url)},$toastLabel:function(e){var a=arguments.length<=1||arguments[1]===undefined?{messageType:"alert"}:arguments[1],i=new(t.createUi(f["default"],{template:'<div class="toast-label">'+e+"</div>",defaultProperties:a}));return i.attach(this.el),i},$aiRedirect:function(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],a=arguments.length<=2||arguments[2]===undefined?this.aiAppType:arguments[2],i=[];if(!x["default"].isObject(t))throw new Error("暂不支持不是object的参数");for(var n in t)t.hasOwnProperty(n)&&i.push(n+"="+t[n]);this.$redirect("#/ai/"+a+"/"+e+(i.length?"~"+i.join("&"):""))},$$set:function(e){var t=this;x["default"].keys(e).forEach(function(a){return t.$set(a,e[a])})}}),e.defineComponent(a)}}),define("ai/common/enums",["exports","inf-ria/EnumX","babel-runtime/helpers/interop-require-default"],function(exports,e,t){exports.__esModule=!0;var a=t["default"](e),i=new a["default"]({alias:"speech",text:"语音技术",value:"speech",name:"Speech",sdk:"#asr",docs:"#/ASR-Android-SDK/top"},{alias:"ocr",text:"文字识别",value:"ocr",name:"OCR",calculator:"ocr",sdk:"#ocr",docs:"#/OCR-API/top"},{alias:"face",text:"人脸识别",value:"face",name:"Face",sdk:"#bfr",docs:"#/Face-Guide/top"},{alias:"nlp",text:"自然语言处理",value:"nlp",name:"NLP",sdk:"#nlp",docs:"#/NLP-API/top"},{alias:"antiporn",text:"内容审核",value:"antiporn",name:"Antiporn",chargeServiceType:"ICR",calculator:"imagecensoring",sdk:"#anti",docs:"#/ImageCensoring-API/top"},{alias:"unit",text:"智能对话UNIT",value:"unit",name:"Unit",sdk:"#unit",docs:"bk38ghux1"},{alias:"kg",text:"知识图谱",value:"kg",name:"KG",sdk:"#pie",docs:"#/PIE-API/top"},{alias:"bicc",text:"智能呼叫中心",value:"bicc",name:"BICC",sdk:"#itma",docs:"#/BICC-ASR-Cpp-SDK/top",docsCloud:"ITMA"},{alias:"imagerecognition",text:"图像识别",value:"imagerecognition",name:"ImageClassify",chargeServiceType:"IMAGE_RECOGNITION",sdk:"#vis",docs:"#/ImageClassify-API/top"},{alias:"imageprocess",text:"图像效果增强",value:"imageprocess",sdk:"#process",docs:"#/ImageProcessing-API/top"},{alias:"ar",text:"百度 AR",value:"ar",name:"AR",sdk:"#ar",docs:"#/DuMixAR-Android-SDK/top"},{alias:"imagesearch",text:"图像搜索",value:"imagesearch",name:"ImageSearch",chargeServiceType:"IMAGE_SEARCH",sdk:"#search",docs:"#/IMAGESEARCH-API/top"},{alias:"roboticvision",text:"机器人视觉",value:"roboticvision",name:"Roboticvision",sdk:"#roboticvision",docs:"#/Roboticvision-Introduction/top"},{alias:"body",text:"人体分析",value:"body",name:"Body",sdk:"#body",docs:"#/Body-API/top"},{alias:"easyedge",text:"EasyEdge端计算平台",value:"easyedge"},{alias:"intelligentwriting",text:"智能创作平台",value:"intelligentwriting",docs:"ik3hbjj0v"},{alias:"easydl",text:"EasyDL定制训练平台",value:"easydl",name:"Easydl",docs:"#/EasyDL_Intro/top"},{alias:"easydlLite",text:"EasyDL定制训练平台",value:"easydlLite",name:"EasydlLite",docs:"Pk38n3xo0"},{alias:"easydlPro",text:"EasyDL定制训练平台",value:"easydlPro",name:"EasydlPro",docs:"Pk38n3xo0"},{alias:"easydlRetail",text:"EasyDL定制训练平台",value:"easydlRetail",name:"EasydlRetail",docs:"ek38n3hpq"});exports.AppType=i;var n=new a["default"]({alias:"sdk",text:"SDK",value:1},{alias:"api",text:"API",value:2},{alias:"bin",text:"bin文件",value:3});exports.ServiceType=n;var r=new a["default"]({alias:"success",text:"调用成功",value:"success"},{alias:"failed",text:"调用失败",value:"failed"});exports.ReportStatus=r;var s=new a["default"]({alias:"maxConcurrency",text:"最高并发通数",value:"maxConcurrency"},{alias:"callCnt",text:"调用通数",value:"callCnt"},{alias:"callDuration",text:"调用通时",value:"callDuration"});exports.HtReportStatus=s;var o=new a["default"]({alias:"HOUR",text:"按时",value:"0"},{alias:"DAY",text:"按日",value:"1"},{alias:"MONTH",text:"按月 ",value:"2"});exports.ReportDimension=o;var l=new a["default"]({alias:"need",text:"需要",value:"-1"},{alias:"noNeed",text:"不需要",value:"0"},{alias:"ios",text:"iOS",value:"1"},{alias:"android",text:"Android",value:"2"});exports.BundleType=l;var u=new a["default"]({alias:"android",text:"Android",value:"1"},{alias:"ios",text:"iOS",value:"2"},{alias:"linux",text:"Linux",value:"3"},{alias:"windows",text:"Windows",value:"4"},{alias:"edgeboard",text:"EdgeBoard(FZ)专用",value:"5"},{alias:"xeye",text:"十目专用",value:"6"},{alias:"acceleration",text:"加速版",value:"7"},{alias:"ebvpu",text:"EdgeBoard(VMX)专用",value:"8"});exports.EasydlBundleType=u;var d=new a["default"]({alias:"ios",text:"iOS",type:"MOBILE",value:1},{alias:"android",text:"Android",type:"MOBILE",value:2},{alias:"windows",text:"Windows",type:"DESKTOP",value:3},{alias:"linux",text:"Linux",type:"DESKTOP",value:4});exports.ClientBundleType=d;var c=new a["default"]({alias:"ONLINE",text:"产品线",value:1},{alias:"OFFLINE",text:"单机测试",value:2});exports.ClientAuthType=c;var p=new a["default"]({alias:"MOBILE",text:"iOS & Android",value:1},{alias:"DESKTOP",text:"Windows & Linux",value:2});exports.ClientPlatform=p;var f=new a["default"]({alias:"unpaid",text:"未付费",value:0,colorStatus:"unavailable"},{alias:"paid",text:"付费使用",value:1,colorStatus:"normal"},{alias:"paying",text:"付费开通中",value:2,colorStatus:"warning"},{alias:"arrear",text:"欠费",value:3,colorStatus:"error"},{alias:"free",text:"免费使用",value:4,colorStatus:""},{alias:"configing",text:"资源配置中",value:5,colorStatus:"warning"},{alias:"configFailed",text:"资源配置失败",value:6,colorStatus:"error"});exports.ChargeStatus=f;var m=new a["default"]({alias:"hasFree",text:"有免费额度",value:0},{alias:"noFree",text:"无免费额度",value:1});exports.ChargeType=m;var h=new a["default"]({alias:"NOT_CERTIFIED",text:"未认证",value:0},{alias:"CERTIFYING",text:"认证中",value:1},{alias:"CERTIFIED",text:"认证成功",value:2},{alias:"FAILED",text:"认证失败",value:3});exports.AuthStatus=h;var g=new a["default"]({alias:"INDIVIDUAL",text:"个人",value:"individual"},{alias:"ENTERPRISE",text:"企业",value:"enterprise"});exports.AuthType=g;var v=new a["default"]({alias:"INDIVIDUAL_UNCERTIFIED",text:"个人未认证",value:1,match:""+g.INDIVIDUAL+h.NOT_CERTIFIED},{alias:"INDIVIDUAL_CERTIFYING",text:"个人认证中",value:2,match:""+g.INDIVIDUAL+h.CERTIFYING},{alias:"INDIVIDUAL_CERTIFIED",text:"个人认证成功",value:3,match:""+g.INDIVIDUAL+h.CERTIFIED},{alias:"INDIVIDUAL_FAILED",text:"个人认证失败",value:4,match:""+g.INDIVIDUAL+h.FAILED},{alias:"ENTERPRISE_UNCERTIFIED",text:"企业未认证",value:5,match:""+g.ENTERPRISE+h.NOT_CERTIFIED},{alias:"ENTERPRISE_CERTIFYING",text:"企业认证中",value:6,match:""+g.ENTERPRISE+h.CERTIFYING},{alias:"ENTERPRISE_CERTIFIED",text:"企业认证成功",value:7,match:""+g.ENTERPRISE+h.CERTIFIED},{alias:"ENTERPRISE_FAILED",text:"企业认证失败",value:8,match:""+g.ENTERPRISE+h.FAILED});exports.QualificationStatus=v;var x=new a["default"]({alias:"UNDER_REVIEW",text:"审核中",value:1,color:"#ffcd33"},{alias:"NOT_APPLIED",text:"默认配额",value:2,color:"#ccc"},{alias:"APPLIED",text:"已通过",value:3,color:"#67cc33"},{alias:"DENIED",text:"未通过",value:4,color:"red"},{alias:"EXPIRED",text:"已过期",value:5,color:"red"},{alias:"UNSUED",text:"未使用",value:6,color:"red"});exports.ApplyStatus=x;var b=new a["default"]({alias:"EMPTY",text:"未填写",value:"0"},{alias:"FILLED",text:"已填写",value:"1"});exports.SdkStatus=b;var y=new a["default"]({alias:"PASSPORT",text:"Passport",value:"passport"},{alias:"UC",text:"UC",value:"uc"});exports.UserType=y;var k=new a["default"]({alias:"sdk",text:"SDK",value:"SDK"},{alias:"rest_api",text:"REST_API",value:"REST_API"});exports.AccessMode=k;var T=new a["default"]({alias:"ANDROID_SDK",text:"安卓SDK",value:1},{alias:"IOS_SDK",text:"iOSSDK",value:2},{alias:"LINUX_CPP_SDK",text:"LinuxC++SDK",value:3},{alias:"API_OTHER",text:"API及其他SDK调用",value:4});exports.SdkType=T;var w=new a["default"]({alias:"PCM",text:"PCM",value:1},{alias:"WAV",text:"wav",value:2},{alias:"AMR",text:"amr",value:3});exports.AudioExt=w;var I=new a["default"]({alias:"android",text:"Android",value:"ANDROID"},{alias:"ios",text:"iOS",value:"IOS"},{alias:"windows_phone",text:"Windows Phone",value:"WINDOWS_PHONE"},{alias:"html5",text:"HTML5",value:"HTML5"},{alias:"windows",text:"Windows",value:"WINDOWS"},{alias:"linux",text:"Linux",value:"LINUX"},{alias:"java",text:"Java",value:"JAVA"},{alias:"flash",text:"Flash",value:"FLASH"},{alias:"other",text:"其他",value:"OTHER"});exports.SpeechPlatform=I;var D=new a["default"]({alias:"success",text:"建库成功",value:"0"},{alias:"none",text:"待建库",value:"1"},{alias:"no_need",text:"不需要建库",value:"2"},{alias:"default",text:"建库成功后方可使用",value:"3"});exports.UsableStatus=D;var S=new a["default"]({alias:"1w",text:"1w",value:"1"},{alias:"5w",text:"5w",value:"2"},{alias:"10w",text:"10w",value:"3"},{alias:"20w",text:"20w",value:"4"},{alias:"50w",text:"50w",value:"5"});exports.TukuLimit=S;var A=new a["default"]({alias:"effected",text:"已生效",value:0},{alias:"modified",text:"修改过词表未生效",value:1},{alias:"effecting",text:"生效中",value:2},{alias:"fail",text:"生效失败",value:3},{alias:"init",text:"初始状态",value:4});exports.DictStatus=A;var $=new a["default"]({alias:"OPENED",text:"已生效",value:0},{alias:"PART",text:"部分生效",value:1},{alias:"CLOSED",text:"已关闭",value:2});exports.DictClosedStatus=$;var E=new a["default"]({alias:"UNTRAINED",text:"模型尚未开启训练",value:0},{alias:"TRAINING",text:"模型训练中…",value:1},{alias:"TRAIN_SUCCESS",text:"模型训练成功，暂未生效",value:2},{alias:"TRAIN_FAILED",text:"模型训练失败,请稍后重试",value:3},{alias:"EFFECTING",text:"模型已训练成功，生效中...",value:4},{alias:"EFFECT_SUCCESS",value:5},{alias:"EFFECT_FAILED",text:"模型生效失败,请重试或联系我们",value:6});exports.ModelStatus=E;var L=new a["default"]({alias:"UNABLE",text:"不能买",value:0},{alias:"INDIRECT",text:"间接才可买",value:1},{alias:"DIRECT",text:"直接可买",value:2});exports.CanBuyQps=L;var C=new a["default"]({alias:"NO_CREATE_TUKU",text:"未建库",value:0},{alias:"CREATE_TUKU_SUCCESS",text:"建库成功",value:1},{alias:"CREATE_TUKU_FAILED",text:"建库失败",value:2},{alias:"ENLARGE_TUKU_ING",text:"扩容申请中",value:4},{alias:"ENLARGE_TUKU_SUCCESS",text:"扩容申请成功",value:5},{alias:"ENLARGE_TUKU_FAILED",text:"扩容申请失败",value:6});exports.TukuStatus=C;var P=new a["default"]({alias:"HIGH_RISK",text:"高危",value:1},{alias:"SUSPICION",text:"嫌疑",value:2},{alias:"LOW_RISK",text:"低风险",value:3},{alias:"NORMAL",text:"正常",value:4});exports.RiskLevelStatus=P;var N=new a["default"]({alias:"API",text:"API接口",value:"API"},{alias:"SDK",text:"SDK集成包",value:"SDK"},{alias:"HARDWARE",text:"硬件设备",value:"HARDWARE"},{alias:"SOLUTION",text:"解决方案",value:"SOLUTION"},{alias:"DATA",text:"数据服务",value:"DATA"});exports.StoreProductType=N;var U=new a["default"]({alias:"HARDWARE",text:"硬件交付",value:"HARDWARE"},{alias:"API",text:"API交付",value:"API"},{alias:"SDK",text:"SDK交付",value:"SDK"},{alias:"APPLICATION",text:"应用软件交付",value:"APPLICATION"},{alias:"COURSE",text:"课程交付",value:"COURSE"},{alias:"DATA",text:"数据交付",value:"DATA"},{alias:"HUMAN",text:"人工交付",value:"HUMAN"});exports.StoreDeliveryType=U;var _=new a["default"]({alias:"LINEAR",text:"线性定价",value:"LINEAR",tipWidth:"120px",tip:"例如：100元/件"},{alias:"STEP",text:"阶梯定价",value:"STEP",tipWidth:"230px",tip:"例如：<br>1-100件 100元/件； 大于100件 90元/件"},{alias:"ENUM",text:"枚举定价",value:"ENUM",tipWidth:"180px",tip:"例如：<br>7天 100元；365天 1000元"},{alias:"RANGE",text:"区间定价",value:"RANGE",tipWidth:"160px",tip:"例如：300~1200元/件"});exports.MarketPackageMode=_;var M=new a["default"]({alias:"件",text:"件",value:1},{alias:"次",text:"次",value:2},{alias:"次/日",text:"次/日",value:3},{alias:"次/月",text:"次/月",value:4},{alias:"QPS",text:"QPS",value:5},{alias:"日/QPS",text:"日/QPS",value:6},{alias:"月/QPS",text:"月/QPS",value:7},{alias:"张/日",text:"张/日",value:8},{alias:"千张",text:"千张",value:9});exports.StoreUnit=M;var F=new a["default"]({alias:"NEW",text:"未发布",value:-1},{alias:"DRAFT",text:"草稿",value:0,color:"error"},{alias:"REVIEWING",text:"审核中",value:1,colorStatus:"warning"},{alias:"OFFLINE",text:"已通过",value:2,colorStatus:"normal"},{alias:"FAILED",text:"未通过",value:3,colorStatus:"error"},{alias:"ONLINE",text:"已发布",value:4,colorStatus:"normal"});exports.StoreProductStatus=F;var q=new a["default"]({alias:"ONLINE",text:"已上架",value:1},{alias:"OFFLINE",text:"未上架",value:0});exports.MarketOnlineStatus=q;var R=new a["default"]({alias:"UNSETTLED",text:"未入驻",value:0,color:"unavailable"},{alias:"SETTLED",text:"已入驻",value:1,color:"success"});exports.StoreStatus=R;var B=new a["default"]({alias:"NONE",text:"未知",value:0,color:"unavailable"},{alias:"REVIEWING",text:"审核中",value:1,color:"warning"},{alias:"SUCCESS",text:"审核完成",value:2,color:"success"},{alias:"FAILED",text:"未通过",value:3,color:"error"});exports.StoreProviderStatus=B;var O=new a["default"]({alias:"DRAFT",text:"草稿",value:0,color:"unavailable"},{alias:"REVIEW",text:"入驻审核中",value:1,color:"warning"},{alias:"SUCCESS",text:"入驻成功",value:2,color:"success"},{alias:"FAILED",text:"审核失败",value:3,color:"error"},{alias:"UPDATE_DRAFT",text:"更新草稿中",value:4,color:"warning"},{alias:"UPDATE_REVIEW",text:"更新审核中",value:5,color:"warning"},{alias:"UPDATE_SUCCESS",text:"更新成功",value:6,color:"success"},{alias:"UPDATE_FAILED",text:"更新失败",value:7,color:"error"});exports.MarketProviderFinalStatus=O;var j=new a["default"]({alias:"DRAFT",text:"草稿",value:0,color:"unavailable"},{alias:"REVIEW",text:"入驻审核中",value:1,color:"warning"},{alias:"SUCCESS",text:"入驻成功",value:2,color:"success"},{alias:"FAILED",text:"审核失败",value:3,color:"error"},{alias:"UPDATE_DRAFT",text:"更新草稿中",value:4,color:"warning"},{alias:"UPDATE_REVIEW",text:"更新审核中",value:5,color:"warning"},{alias:"UPDATE_SUCCESS",text:"更新成功",value:6,color:"success"},{alias:"UPDATE_FAILED",text:"更新失败",value:7,color:"error"});exports.MarketShopFinalStatus=j;var V=new a["default"]({alias:"COMPANY",text:"企业",value:1},{alias:"ORGANIZATION",text:"组织机构",value:2});exports.StoreProviderType=V;var Y=new a["default"]({alias:"wan",text:"万小时",value:1e4},{alias:"qian",text:"千小时",value:1e3},{alias:"ge",text:"小时",value:1});exports.AudiofileUnit=Y;var z=new a["default"]({alias:"unpaid",text:"未支付",value:-1},{alias:"other",text:"其他",value:0});exports.OrderStatus=z;var H=new a["default"]({alias:"new",text:"付费",value:0},{alias:"renew",text:"续费",value:1},{alias:"resize",text:"升级",value:2});exports.OrderType=H;var K=new a["default"]({alias:"Reviewing",text:"审核中",value:0},{alias:"Success",text:"审核通过",value:1},{alias:"Failed",text:"审核失败",value:2},{alias:"NotApply",text:"未审核",value:3});exports.ResizeApplyStatus=K;var Q=new a["default"]({alias:"Reviewing",text:"审核中",value:1},{alias:"Success",text:"已通过",value:2},{alias:"Failed",text:"未通过",value:3},{alias:"NotApply",text:"未申请",value:4},{alias:"Expired",text:"已过期",value:5});exports.BaseInfoStatus=Q;var G=new a["default"]({alias:"PROBATION",text:"试用中",value:0},{alias:"RELEASE",text:"正式版",value:1},{alias:"EXPIRED",text:"已过期",value:2},{alias:"TEST",text:"测试版",value:3},{alias:"AI_MARKET",text:"AI市场专版",value:4});exports.FaceSdkTypeStatus=G;var W=new a["default"]({alias:"NOT_ACTIVED",text:"未激活",value:1},{alias:"ACTIVED",text:"已激活",value:2},{alias:"ACTIVE_FAILED",text:"激活失败",value:3});exports.FaceSdkActiveStatus=W;var X=new a["default"]({alias:"VERSION_TWO",text:"2.0",value:2},{alias:"VERSION_THREE",text:"3.0",value:3});exports.FaceSdkUserStatus=X;var J=new a["default"]({alias:"Reviewing",text:"审核中",value:0,color:"warning"},{alias:"SuccessOne",text:["审核通过","","延期通过","审核通过"],value:1,color:"normal",tips:["点击查看详情发起授权延期申请","","点击查看详情再次发起延期申请","点击查看详情发起授权延期申请"]},{alias:"SuccessTwo",text:"合同信息有误",value:2,color:"error",tips:"点击查看详情重新填写合同信息"},{alias:"Completed",text:"流程关闭，重新申请",value:3,color:"normal"},{alias:"Failed",text:["已退回","","延期不通过","已退回"],value:4,color:"error",tips:["点击查看详情重新发起申请","","点击查看详情发起授权延期申请","点击查看详情重新发起申请"]});exports.PackageApplyStatus=J;var Z=new a["default"]({alias:"Reviewing",text:"审核中",value:0,color:"warning"},{alias:"SuccessOne",text:"审核通过",value:1,color:"normal"},{alias:"SuccessTwo",text:"审核通过",value:2,color:"normal",tips:"点击查看详情可以变更指纹文件重新发起申请或发起延期申请"},{alias:"Completed",text:"流程关闭，重新申请",value:3,color:"normal"},{alias:"Failed",text:"已退回",value:4,color:"error",tips:"点击查看详情可重新发起申请"});exports.PackageApplyStatusTest=Z;var ee=new a["default"]({alias:"self",text:"自用",value:0},{alias:"customer",text:"集成为客户提供服务",value:1});exports.PackageUse=ee;var te=new a["default"]({alias:"test",text:"测试版",value:0},{alias:"formal",text:"正式版",value:1});exports.PackageType=te;var ae=new a["default"]({alias:"PREPAY",text:"按通路预付费",value:0},{alias:"POSTPAY",text:"按时长后付费",value:1});exports.BiccPayType=ae;var ie=new a["default"]({alias:"WeekDay",text:"工作日",value:0},{alias:"AllYear",text:"全年无休",value:1});exports.ServiceTime=ie;var ne=new a["default"]({alias:"NORMAL",text:"已开通",value:0},{alias:"RUN_OUT",text:"已用完",value:1},{alias:"EXPIRED",text:"已过期",value:2});exports.StoreServiceStatus=ne;var re=new a["default"]({alias:"UNPAID",text:"未支付",value:1},{alias:"CANCELLED",text:"已取消",value:2},{alias:"PAID",text:"已支付",value:3},{alias:"EXPIRED",text:"已过期",value:4},{alias:"REFUND",text:"已退款",value:5});exports.MarketBuyerOrderStatus=re;var se=new a["default"]({alias:"IMAGE_CLASSIFICATION",text:"图像分类",value:1,sdk:!0,api:!0},{alias:"IMAGE_DETECTION",text:"物体检测",value:2,sdk:!0,api:!0},{alias:"SOUND_CLASSIFICATION",text:"声音分类",value:3,sdk:!0},{alias:"TEXT_CLASSIFICATION",text:"文本分类",value:4},{alias:"VIDEO_CLASSIFICATION",text:"视频分类",value:5},{alias:"IMAGE_SEGMENT",text:"图像分割",value:6,sdk:!0,api:!0});exports.EasydlModelType=se;var oe=new a["default"]({alias:"IMAGE_CLASSIFICATION",text:"图像分类",value:1,sdk:!0,api:!0},{alias:"IMAGE_DETECTION",text:"物体检测",value:2,sdk:!0,api:!0},{alias:"TEXT_CLASSIFICATION",text:"文本分类",value:4},{alias:"TEXT_SIM",text:"短文本匹配",value:7},{alias:"SEQUENCE_LABEL",text:"序列标注",value:8});exports.EasydlProjectType=oe;var le=new a["default"]({alias:"GOODS_DETECTION",text:"商品检测",value:1001});exports.EasydlRetailType=le;var ue=new a["default"]({alias:"PROBATION",text:"试用版",value:0},{alias:"RELEASE",text:"正式版",value:1});exports.EasydlLicenseType=ue;var de=new a["default"]({alias:"NOT_ACTIVED",text:"未激活",value:0},{alias:"ACTIVED",text:"已激活",value:1},{alias:"ACTIVE_FAILED",text:"激活失败",value:2},{alias:"EXPIRED",text:"已过期",value:3});exports.EasydlSDKActiveStatus=de;var ce=new a["default"]({alias:"Reviewing",text:"审核中",value:0,color:"warning"},{alias:"SuccessOne",text:"审核通过",value:1,color:"normal"},{alias:"SuccessTwo",text:"审核通过",value:2,color:"normal",tips:"点击查看详情可以变更指纹文件重新发起申请或发起延期申请"},{alias:"Completed",text:"流程关闭，重新申请",value:3,color:"normal"},{alias:"Failed",text:"已退回",value:4,color:"error",tips:"点击查看详情可重新发起申请"},{alias:"GENERATING",text:"生成中",value:5},{alias:"GENERATE_FAILED",text:"生成失败",value:6},{alias:"APPROVED",text:"已完成",value:7});exports.EasydlSDKApplyStatus=ce;var pe=new a["default"]({alias:"CLOUD",text:"云服务",value:1},{alias:"MOBILE",text:"离线SDK",value:2});exports.EasydlDeployType=pe;var fe=new a["default"]({alias:"CREATING",text:"创建中",value:"CREATING",color:"green"},{alias:"CREATED",text:"创建完成",value:"CREATED",color:"green"},{alias:"COMPLETED",text:"交付完成",value:"COMPLETED",color:"green"},{alias:"NEED_PURCHASE",text:"待付款",value:"NEED_PURCHASE",color:"yellow"},{alias:"EXPIRED",text:"已过期",value:"EXPIRED",color:"red"},{alias:"CANCELLED",text:"已取消",value:"CANCELLED",color:"gray"},{alias:"CLOSED",text:"已作废",value:"CLOSED",color:"gray"},{alias:"DELIVERED",text:"服务商已交付",value:"DELIVERED",color:"green"},{alias:"REFUND_SUCC",text:"退款成功",value:"REFUND_SUCC",color:"green"},{alias:"READY_FOR_CREATE",text:"已付款",value:"READY_FOR_CREATE",color:"green"},{alias:"NEED_DELIVER",text:"待交付",value:"NEED_DELIVER",color:"yellow"},{alias:"CREATE_FAILED",text:"创建失败",value:"CREATE_FAILED",color:"yellow"},{alias:"REFUNDING",text:"退款中",value:"REFUNDING",color:"yellow"},{alias:"REFUND_FAILED",text:"退款失败",value:"REFUND_FAILED",color:"red"});exports.MarketProductOrderStatus=fe;var me=new a["default"]({alias:"ONE",text:"1-10人",value:1},{alias:"TEN",text:"10-100人",value:2},{alias:"HUNDRED",text:"100-1000人",value:3},{alias:"THOUSAND",text:"1000-10000人",value:4},{alias:"TEN_THOUSAND",text:"10000人以上",value:5});exports.MarketProviderScale=me;var he=new a["default"]({alias:"SELLER",value:"SELLER",text:"卖家承担运费"},{alias:"BUYER",value:"BUYER",text:"买家承担：到付"},{alias:"CUSTOM",value:"CUSTOM",text:"自定义运费"});exports.FreightType=he;var ge=new a["default"]({alias:"TAX_DEDUCTIBLE",value:"TAX_DEDUCTIBLE",text:"仅支持开具增值税专用发票(可抵扣)"},{alias:"NON_TAX_DEDUCTIBLE",value:"NON_TAX_DEDUCTIBLE",text:"仅支持开具增值税普通发票(不可抵扣)"},{alias:"BOTH",value:"BOTH",text:"前两项都支持"});exports.InvoiceType=ge;var ve=new a["default"]({alias:"PERIOD",value:0,text:"质保期"},{alias:"NON",value:1,text:"无质保"},{alias:"LIFE_TIME",value:2,text:"终身质保"});exports.QualityAssurance=ve;var xe=new a["default"]({alias:"YEAR",value:"year",text:"年"},{alias:"MONTH",value:"month",text:"月"},{alias:"DAY",value:"day",text:"日"});exports.TimeUnit=xe;var be=new a["default"]({alias:"TAX_DEDUCTIBLE",value:"TAX_DEDUCTIBLE",text:"增值税专用发票(可抵扣)"},{alias:"NON_TAX_DEDUCTIBLE",value:"NON_TAX_DEDUCTIBLE",text:"增值税普通发票(不可抵扣)"});exports.InvoiceTypeForInfo=be;var ye=new a["default"]({alias:"COMPANY",value:"COMPANY",text:"企业"},{alias:"PERSON",value:"PERSON",text:"个人"});exports.InvoiceTitleType=ye;var ke=new a["default"]({alias:"ORIGINAL",value:"ORIGINAL",text:"同收货信息"},{alias:"OTHER",value:"OTHER",text:"其他收取人"});exports.InvoiceAddressType=ke;var Te=new a["default"]({alias:"NOT_APPLY",text:"未申请",value:"NOT_APPLY",color:"gray"},{alias:"APPLY",text:"待开具",value:"APPLY",color:"yellow"},{alias:"DELAY_INVOICE",text:"待开具(已延迟)",value:"DELAY_INVOICE",color:"yellow"},{alias:"HAS_INVOICED",text:"已开票",value:"HAS_INVOICED",color:"green"},{alias:"COMPLETE",text:"已收票",value:"COMPLETE",color:"green"});exports.MarketInvoiceStatus=Te;var we=new a["default"]({alias:"ACTIVATE",text:"已激活",value:0},{alias:"CHECKING",text:"已激活",value:1},{alias:"OUTTIME",text:"已过期",value:2});exports.SerialNumberStatus=we;var Ie=new a["default"]({alias:"directional",text:"定向需求",value:"directional"},{alias:"non_directional",text:"泛需求",value:"non_directional"},{alias:"recommend",text:"AI市场推荐",value:"recommend"},{alias:"demand",text:"自主认领",value:"demand"});exports.BusinessOrigin=Ie;var De=new a["default"]({alias:"undefined",text:"未标识",value:"undefined"},{alias:"normal",text:"普通",value:"normal"},{alias:"great",text:"优质",value:"great"},{alias:"other",text:"可忽略",value:"other"});exports.BusinessLevel=De;var Se=new a["default"]({alias:"not_docked",text:"未对接",color:"red",value:"not_docked"},{alias:"docking",text:"对接中",color:"yellow",value:"docking"},{alias:"complete",text:"已转化",color:"green",value:"complete"},{alias:"close",text:"已关闭",color:"dark_gray",value:"close"});exports.BusinessDockingStatus=Se;var Ae=new a["default"]({alias:"not_docked",text:"未对接",color:"red",value:"not_docked"},{alias:"docking",text:"对接中",color:"yellow",value:"docking"},{alias:"complete",text:"对接成功",color:"green",value:"complete"},{alias:"close",text:"已终止",color:"dark_gray",value:"close"});exports.BuyerBusinessDockedStatus=Ae;var $e=new a["default"]({alias:"unreachable",text:"无法联系到客户",value:"unreachable"},{alias:"mismatch",text:"买卖不匹配（服务商反馈）",value:"mismatch"},{alias:"low_quality",text:"商机质量低",value:"low_quality"});exports.BusinessDockingFailureReason=$e;var Ee=new a["default"]({alias:"mismatch",text:"买卖不匹配（客户反馈）",value:"mismatch"},{alias:"non_contact",text:"服务商长时间未联系客户",value:"non_contact"},{alias:"has_complete",text:"其他服务商已对接成功",value:"has_complete"},{alias:"undefined",text:"其他",value:"undefined"});exports.BuyerBusinessDockingFailureReason=Ee;var Le=new a["default"]({alias:"ONLINE",text:"线上交易",value:"ONLINE"},{alias:"OFFLINE",text:"线下交易",value:"OFFLINE"});exports.PackageInfoTradeType=Le;var Ce=new a["default"]({alias:"ONLINE",text:"AI市场线上交易",value:"ONLINE"},{alias:"OFFLINE",text:"线下交易",value:"OFFLINE"});exports.BusinessTradeType=Ce;var Pe=new a["default"]({alias:"on_the_way",text:"在途中",value:"on_the_way",color:"yellow"},{alias:"dispatching",text:"派件中",value:"dispatching",color:"yellow"},{alias:"received",text:"已签收",value:"received",color:"green"},{alias:"failed",text:"派件失败",value:"failed",color:"red"});exports.OrderExpressStatus=Pe;var Ne=new a["default"]({alias:"normal",text:"普通商品",value:"normal",url:[]},{alias:"face",text:"人脸license",value:"face",url:["#/ai/face/offline/index"]},{alias:"speech",text:"语音赋权",value:"speech",url:["#/ai/speech/overview/index"]},{alias:"easyDl",text:"EasyDL",value:"easyDl",url:["#/ai/easydlLite/serial/list","#/ai/easydlPro/serial/list"]});exports.ShowApply=Ne;var Ue=new a["default"]({alias:"SOFTWARE",text:"软件服务",value:"SOFTWARE"},{alias:"HARDWARE",text:"硬件产品",value:"HARDWARE"},{alias:"SOLUTION",text:"解决方案",value:"SOLUTION"},{alias:"DATA",text:"数据服务",value:"DATA"});exports.MarketProductType=Ue;var _e=new a["default"]({alias:"NOT_OPEN",text:"--",value:0},{alias:"BUY",text:"购买",value:1},{alias:"BOUGHT",text:"再次购买",value:2},{alias:"CAN_NOT_BUY",text:"购买",value:3});exports.NumPackageType=_e;var Me=new a["default"]({alias:"UNUSED",text:"未使用",value:0},{alias:"USEING",text:"使用中",value:1},{alias:"RUN_OUT",text:"已用尽",value:2},{alias:"EXPIRED",text:"已过期",value:3},{alias:"RUN_OUT_SOON",text:"即将用尽",value:4},{alias:"EXPIRED_SOON",text:"即将失效",value:5});exports.NumPackageStatus=Me;var Fe=new a["default"]({alias:"NOSDK",text:"没有SDK，不能申请",value:0},{alias:"CANAPPLY",text:"可以申请",value:1},{alias:"APPLYING",text:"申请中",value:2});exports.EasyApplyStatus=Fe;var qe=new a["default"]({alias:"TXT",text:"文本",value:"txt"},{alias:"DOC",text:"文件",value:"doc"});exports.CaseDetailType=qe;var Re=new a["default"]({alias:"Basic",text:"基础音库",value:1},{alias:"Advanced",text:"精品音库",value:2});exports.SoundLibraryType=Re;var Be=new a["default"]({alias:"度小宇",type:Re.Basic,text:"度小宇",value:1},{alias:"度小美",type:Re.Basic,text:"度小美",value:2},{alias:"度逍遥",type:Re.Basic,text:"度逍遥",value:3},{alias:"度丫丫",type:Re.Basic,text:"度丫丫",value:4},{alias:"度小童",type:Re.Advanced,text:"度小童",value:5},{alias:"度小萌",type:Re.Advanced,text:"度小萌",value:6},{alias:"度小娇",type:Re.Advanced,text:"度小娇",value:7},{alias:"度米朵",type:Re.Advanced,text:"度米朵",value:8},{alias:"度博文",type:Re.Advanced,text:"度博文",value:9},{alias:"度小译",type:Re.Advanced,text:"度小译",value:10},{alias:"度小乔",type:Re.Advanced,text:"度小乔",value:11},{alias:"度小鹿",type:Re.Advanced,text:"度小鹿",value:12},{alias:"度小台",type:Re.Advanced,text:"度小台",value:13},{alias:"度小粤",type:Re.Advanced,text:"度小粤",value:14});exports.SoundLibrary=Be;var Oe=new a["default"]({alias:"REVIEW",text:"入驻审核中",value:1,level:"alert"},{alias:"SUCCESS",text:"入驻成功",value:2,level:"normal"},{alias:"FAILED",text:"审核失败",value:3,level:"error"});exports.MarketSettlementBankStatus=Oe;var je=new a["default"]({alias:"SUCCESS",text:"已付款",value:"SUCCESS",color:"#5FB333"},{alias:"FAILED",text:"付款失败",value:"FAILED",color:"#EA2E2E"});exports.MarketSettlementRecordStatus=je;var Ve=new a["default"]({alias:"TOTOAL",text:"完整部署包",value:1},{alias:"UPDATE",text:"更新包",value:2});exports.EasyPackageUpdateType=Ve;var Ye=new a["default"]({alias:"NOT_APPLY",text:"未申请",value:0},{alias:"APPLYING",text:"申请审核中",value:1},{alias:"SUCCESS",text:"通过",value:2},{alias:"FAILED",text:"审核失败",value:3});exports.PackagePurchaseApplyStatus=Ye;var ze=new a["default"]({alias:"PUBLICCLOUD",text:"公有云服务",value:1},{alias:"LOCAL",text:"私有部署服务",value:2,hasSub:!0},{alias:"DEVICE",text:"设备端服务",value:3});exports.EasydlAvailableTabs=ze;var He=new a["default"]({alias:"LOCAL_API",text:"私有API集成",value:4},{alias:"LOCAL_SDK",text:"服务器端SDK集成",value:5});exports.EasydlAvailableSubTabs=He;var Ke=new a["default"]({alias:"GPU",text:"英伟达GPU",value:"gpu"},{alias:"CPU",text:"X86 CPU",value:"cpu"},{alias:"ATLAS",text:"华为Atlas",value:"atlas"});exports.EasydlSDKPrcessorType=Ke;var Qe=new a["default"]({alias:"DEVICE",text:"按单台设备",value:"device"},{alias:"BUNDLE",text:"按产品线",value:"bundle"},{alias:"BATCH",text:"按多台设备",value:"batch"});exports.EasyEdgeActiveType=Qe;var Ge=new a["default"]({alias:"SDK",text:"设备端SDK",value:"sdk"},{alias:"INTEGRATION",text:"软硬一体方案",value:"integration"});exports.EasydlSDKDeployType=Ge;var We=new a["default"]({alias:"register",text:"入驻",value:"register"},{alias:"product",text:"商品",value:"product"},{alias:"service",text:"服务",value:"service"},{alias:"partner",text:"合作关系",value:"partner"});exports.EScoreType=We;var Xe=new a["default"]({alias:"settled",text:"已入驻",value:!0,color:"success"},{alias:"settling",text:"入驻中",value:!1,color:"warning"});exports.ESettleStatus=Xe;var Je=new a["default"]({alias:"immediate",text:"立即提供",value:"immediate"},{alias:"later",text:"稍后提供",value:"later"});exports.EInvoiceGetTime=Je;var Ze=new a["default"]({alias:"acceleration",text:"加速版",value:"acceleration"},{alias:"basic",text:"基础版",value:"basic"});exports.SDKTypes=Ze;var et=new a["default"]({alias:"low",text:"P4/GTX系列",value:1},{alias:"middle",text:"T4/V100",value:2},{alias:"high",text:"RTX系列",value:3});exports.PrivateGraphicsType=et;var tt=new a["default"]({alias:"low",text:"基础版(上限20QPS)",value:20},{alias:"middle",text:"标准版(上限50QPS)",value:50},{alias:"high",text:"高性能版(上限80QPS)",value:80});exports.PrivatePerfomance=tt;var at=new a["default"]({alias:"draft",text:"草稿",value:0,color:"dark_gray"},{alias:"to_be_paid",text:"待支付",value:1,color:"dark_gray"},{alias:"generating",text:"部署包生成中",value:2,tips:"预计需要1min,请刷新页面后重试",color:"yellow"},{alias:"failed",text:"部署包生成失败",value:3,color:"red"},{alias:"apply_success",text:"申请成功",value:4,tips:"点击查看详情可以发起延期申请",color:"green"},{alias:"bought",text:"购买成功",value:5,color:"green"},{alias:"under_review",text:"审核中",value:6,color:"yellow"},{alias:"review_failed",text:"审核失败",value:7},{alias:"review_success",text:"审核成功",value:8,color:"green"},{alias:"expired",text:"已过期",value:9,color:"red",tips:"点击查看详情可以发起延期申请"});exports.PrivateApplyStatus=at;var it=new a["default"]({alias:"draft",text:"草稿",value:0,color:"dark_gray"},{alias:"to_be_paid",text:"待支付",value:1,color:"dark_gray"},{alias:"generating",text:"审核中",value:2,color:"yellow"},{alias:"failed",text:"审核失败",value:3,color:"red"},{alias:"apply_success",text:"申请成功",value:4,tips:"点击查看详情可以发起延期申请",color:"green"},{alias:"bought",text:"购买成功",value:5,color:"green"},{alias:"under_review",text:"审核中",value:6,color:"yellow"},{alias:"review_failed",text:"审核失败",value:7},{alias:"review_success",text:"审核成功",value:8,color:"green"},{alias:"expired",text:"已过期",value:9,color:"red",tips:"点击查看详情可以发起延期申请"});exports.PrivateTestApplyStatus=it;var nt=new a["default"]({alias:"AI_MARKET_ORDER_DATA_CACHE",text:"下单页缓存",value:"AI_MARKET_ORDER_DATA_CACHE"},{alias:"AI_MARKET_BUYER_BUSINESS_LIST_STATUS",text:"买家需求挂你列表展开状态",value:"AI_MARKET_BUYER_BUSINESS_LIST_STATUS"});exports.LocalstorageKeys=nt;var rt=new a["default"]({alias:"package",text:"次数包",value:"package"},{alias:"qps",text:"QPS",value:"qps"},{alias:"qpsPackage",text:"QPS叠加包",value:"qpsPackage"},{alias:"calls",text:"后付费",value:"calls"},{alias:"private",text:"私有化",value:"private"},{alias:"sdks",text:"sdk",value:"sdks"},{alias:"channels",text:"channels",value:"channels"},{alias:"hours",text:"hours",value:"hours"},{alias:"minutes",text:"minutes",value:"minutes"});exports.ResourceType=rt;var st=new a["default"]({alias:"NONE",text:"未认证",result:"您还未进行企业账号认证",value:"NONE",tip:"请准备好营业执照或组织机构代码证（原件照片或彩色扫描件正副本均可）到用户中心进行企业实名认证~",color:""},{alias:"AUDIT",text:"审核中",result:"企业账号认证审核中",value:"AUDIT",tip:"请完善以下信息，并进入下一步",color:"yellow"},{alias:"PASS",text:"已完成",result:"已完成企业账号认证",value:"PASS",tip:"请完善以下信息，并进入下一步",color:"green"},{alias:"RETURN",text:"审核失败",result:"企业账号认证审核失败",value:"RETURN",tip:"非常抱歉，您暂未通过企业账号认证，请您前往认证结果中心查看并重新认证，重新认证后才可继续入驻。",color:""});exports.ProviderQualificationStatus=st;var ot=new a["default"]({alias:"SELF",text:"自营",value:"SELF"},{alias:"PARTNER",text:"伙伴",value:"PARTNER"});exports.ProviderType=ot;var lt=new a["default"]({alias:"all",text:"全部评分",value:""},{alias:"system",text:"系统评分",value:"system"},{alias:"user",text:"买方评分",value:"user"});exports.CommentScoreType=lt}),define("ai/common/page",["exports","module","promise","babel-runtime/helpers/interop-require-default","ai/common/basePage","ai/common/variable","ai/common/enums","ai/common/util"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](i),u=t["default"](r);module.exports=function(e){return e.mixin&&(Array.isArray(e.mixin)?e.mixin.forEach(function(t){u["default"].mixin(e,t)}):u["default"].mixin(e,e.mixin)),u["default"].mixin(e,{inited:function(){var e=this;this.handleQualificationStatus().then(function(){e.handlePromoteQuota()}),this.handleAccountState(),this.$get("aiAppType")===n.AppType.unit&&this.handleUnitUserState()},computed:{disableCreateButton:function(){return this.data.get("cheatingUser")},cheatingUser:function(){var e=this.data.get("qualification"),t=this.data.get("riskLevel");return!!e&&(~[n.AuthStatus.NOT_CERTIFIED,n.AuthStatus.CERTIFYING,n.AuthStatus.FAILED].indexOf(e.status)&&~[n.RiskLevelStatus.HIGH_RISK,n.RiskLevelStatus.SUSPICION].indexOf(t))}},getQualificationStatus:function(){return null!=l["default"].qualification?s["default"].resolve(l["default"].qualification):this.ajax.qualification({type:this.aiAppType})},handleQualificationStatus:function(){var e=this;return this.getQualificationStatus().then(function(t){e.reflectQualificationStatus(t),e.$set("qualification",t),l["default"].qualification=t,e.fire("getQulificationStatus",t)})},reflectQualificationStatus:function(e){var t=n.QualificationStatus.toArray(),a=""+e.type+e.status;e.state=t.filter(function(e){return e.match===a}).map(function(e){return e.value}),e.certified&&e.type===n.AuthType.ENTERPRISE&&e.state.push(n.QualificationStatus.INDIVIDUAL_CERTIFIED)},handlePromoteQuota:function(){var e=this.$get("aiAppType");l["default"].promoteQuota[e]||(l["default"].promoteQuota[e]=1,this.ajax.promoteQuota({type:this.aiAppType}).then(null,function(){l["default"].promoteQuota[e]=0}))},getAccountState:function(){return null!=l["default"].riskLevel?s["default"].resolve({riskLevel:l["default"].riskLevel}):this.ajax.accountState()},handleAccountState:function(){var e=this;return this.getAccountState().then(function(t){e.$set("riskLevel",t.riskLevel),l["default"].riskLevel=t.riskLevel})},getUnitUserState:function(){return null!=l["default"].unitUserState?s["default"].resolve(l["default"].unitUserState):this.ajax.unitUserState()},handleUnitUserState:function(){var e=this;return this.getUnitUserState().then(function(t){e.$set("unitUserState",t)})}}),o["default"](e)}}),define("ai/common/Sidebar",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","jquery","babel-runtime/helpers/interop-require-default","inf-ria/sidebar/Sidebar"],function(exports,module,e,t,a,i,n){var r=i["default"](a),s=function(a){function i(e){t["default"](this,i),a.call(this,e),this.aiJumpHook=null,this.aiAddLinkHook()}return e["default"](i,a),i.prototype.aiAddLinkHook=function(){var e=this;this.allLinks.filter(function(){return!r["default"](this).attr("action-type")&&r["default"](this).attr("href")}).on("click",function(){var t=this;if("function"==typeof e.aiJumpHook)return e.aiJumpHook(function(){window.location.href=r["default"](t).attr("href")}),!1})},i}(i["default"](n)["default"]);module.exports=s}),define("ai/common/util",["exports","babel-runtime/helpers/extends","babel-runtime/core-js/promise","babel-runtime/regenerator","babel-runtime/core-js/object/keys","./enums","lodash","babel-runtime/helpers/interop-require-default","jquery","moment","common/flags","ai/config/package","ai/config/qpsOverlay","er/URL","ai/config/charge"],function(exports,e,t,a,i,n,r,s,o,l,u,d,c,p,f){function m(e){return e<10?"0"+e:""+e}function h(e,t){return 0===e?"":""+e+t}exports.__esModule=!0,exports.mixin=function(e,t){var a=["compiled","inited","created","attached","detached","disposed","updated"],i=["components","filters","computed","messages"],n=["data","initData","template","el"],r=e.initData;return e.initData=function(){var e={};return"function"==typeof t.initData&&g["default"].assign(e,t.initData.call(this,e)),"function"==typeof r&&g["default"].assign(e,r.call(this,e)),e},n.forEach(function(a){return e[a]=e[a]||t[a]}),i.forEach(function(a){return e[a]=g["default"].assign({},e[a],t[a])}),a.forEach(function(a){"function"==typeof t[a]&&function(){var i=e[a];e[a]=function(){t[a].call(this),"function"==typeof i&&i.call(this)}}()}),g["default"].forEach(t,function(t,r){g["default"].includes(i,r)||g["default"].includes(a,r)||g["default"].includes(n,r)||e[r]!==undefined||(e[r]=t)}),e},exports.isPromise=function(e){return e&&"function"==typeof e.then},exports.sendPvlog=function(e){b["default"].is_online&&v["default"].ajax({method:"GET",url:"/ai/stat/1.gif",data:{p:1000001,url:e}})},exports.checkBundleName=function(e){return!(!e||"string"!=typeof e||e.length>T)&&/^([\w\$-]+\.)*[\w\$-]+$/.test(e)},exports.checkBundleMD5=function(e){return!(!e||"string"!=typeof e)&&/^([0-9A-Fa-f]{2}:?){15}[0-9A-Fa-f]{2}$/.test(e)},exports.getApiStatus=function(e){var t=g["default"].get(e,"order.type"),a=n.OrderType.fromValue(t).text,i=n.ChargeStatus.fromValue(e.chargeStatus);switch(e.chargeStatus){case n.ChargeStatus.unpaid:return e.chargeType===n.ChargeType.hasFree?'<span class="status unavailable">免费使用</span>':'<span class="status unreachable">待开通付费</span>';case n.ChargeStatus.free:return e.isExhausted?'<span class="status unavailable">免费使用已用尽</span>':'<span class="status unavailable">免费使用</span>';case n.ChargeStatus.configing:return'<span class="status '+i.colorStatus+'">'+a+"资源配置中</span>";case n.ChargeStatus.configFailed:return'<span class="status '+i.colorStatus+'">'+a+"资源配置失败</span>";default:return'<span class="status '+i.colorStatus+'">'+i.text+"</span>"}},exports.sleep=function(){var e=arguments.length<=0||arguments[0]===undefined?0:arguments[0];return new t["default"](function(t){return setTimeout(t,e)})},exports.getAsyncTuple=function(e){var t;return a["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,a["default"].awrap(e);case 3:return t=i.sent,i.abrupt("return",[null,t]);case 7:return i.prev=7,i.t0=i["catch"](0),i.abrupt("return",[i.t0]);case 10:case"end":return i.stop()}},null,this,[[0,7]])},exports.duration=function(e){var t=x["default"].duration(e,"seconds");return[h(t.years(),"年"),h(t.months(),"月"),h(t.days(),"天 "),m(t.hours())+":"+m(t.minutes())+":"+m(t.seconds())].join("")},exports.readImageFile=function(e){var i;return a["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a["default"].awrap(new t["default"](function(t){var a=new FileReader;a.onload=function(){t(this.result)},a.readAsDataURL(e)}));case 2:return i=n.sent,n.abrupt("return",new t["default"](function(e){var t=new Image;t.onload=function(){return e(t)},t.src=i}));case 4:case"end":return n.stop()}},null,this)},exports.readFileBase64=function(e){return new t["default"](function(t){var a=new FileReader;a.onload=function(){t(this.result)},a.readAsDataURL(e)})},exports.jumpToError=function(e){var t=g["default"].keys(e);if(!g["default"].isEmpty(t)){var a=t[0];v["default"]("html, body").animate({scrollTop:v["default"](".ui-form-item-"+a).offset().top-60},300)}},exports.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},exports.realLength=function(e){for(var t=0,a=0,i=e.length;a<i;a++){var n=e.charCodeAt(a);n>=0&&n<=128?t++:t+=2}return t},exports.openFileDialog=function(){var e=(arguments.length<=0||arguments[0]===undefined?{}:arguments[0]).accept;return new t["default"](function(t){var a=document.createElement("input");a.type="file",e&&(a.accept=e),a.onchange=function(){var e=a.files[0];t(e)},a.style.display="none",document.body.appendChild(a),setTimeout(function(){a.click()},0)})},exports.getChargeField=function(t){var a='<a class="calc-icon" target="_blank" href="https://cloud.baidu.com/calculator.html#/'+n.AppType.aliasIndex[k()].calculator+'/price"></a>';return e["default"]({title:"开通按量后付费"+(~[].indexOf(t)?a:""),width:180,stable:!0,content:function(e){var a="错误了！~";if(e.canBuyQps!==n.CanBuyQps.DIRECT||~c.hasQPSOverlay.indexOf(t)?e.chargeStatus===n.ChargeStatus.unpaid?a=e.canOpen?'<a href="#/ai/'+t+"/order/create~apiId="+e.id+'"\n                        data-track-id="overview_pay_service"\n                        data-track-name="概览-开通付费">\n                        '+(~d.hasNumPackage.indexOf(t)?"开通":"开通付费")+"\n                        </a>":"免费试用":~[n.ChargeStatus.paid,n.ChargeStatus.arrear].indexOf(e.chargeStatus)?a='<a href="javascript:;"\n                        style="white-space: nowrap"\n                        data-command="orderDestroy"\n                        data-command-args="'+e.id+'">\n                        终止付费\n                    </a>':e.chargeStatus===n.ChargeStatus.paying&&(a="等待开通"):a='<a data-track-id="overview_buy_qps"\n                    data-track-name="概览-购买QPS"\n                    href="#/ai/'+t+"/buyQps/index~apiId="+e.id+'">\n                        购买QPS\n                    </a> | <a href="javascript:;"\n                        style="white-space: nowrap"\n                        data-command="qpsDetail"\n                        data-command-args="'+e.id+","+e.name+'">\n                            配额详情\n                    </a>',e.chargeTip){var i="error";e.chargeType===n.ChargeType.hasFree&&(i="warning"),a+='<span\n                data-ui-type="Tip"\n                data-ui-skin="'+i+'"\n                data-ui-arrow="true"\n                data-ui-position-opt=\'{"center":"top"}\'\n                data-ui-content=\''+g["default"].escape(e.chargeTip)+"'></span>"}return a}},~d.hasNumPackage.indexOf(t)?{title:"开通按量后付费",tip:"开通付费后，默认采用按量后付费形式，总调用量不受限制，QPS保证为"+d.qpsNum[t]+"，具体计费标准请查看\n                <a href="+d.numPackagePrice[t]+" target='_blank'>产品定价文档</a>"}:{},f.chargeTips[t]?{tip:f.chargeTips[t]}:{})},exports.formatGerData=function(e){var t=arguments.length<=1||arguments[1]===undefined||arguments[1];return e.forEach(function(e){e.children.forEach(function(e){var a=e.children;a||(a=[g["default"].extend({},e)]),e.children=t?[{}].concat(a):[].concat(a)})}),e},exports.calLadderPrcie=function(t,a,i){var n=(t=+t)+(a=+a),r={total:0,priceList:[]};if(i[0].min>n)return r;for(var s=g["default"].findIndex(i,function(e){return 0===a||e.min<=a&&(e.max>=a||-1===e.max)}),o=s;o<i.length;o++){var l=i[o],u=l.min,d=l.max,c=l.cost,p=l.costUnit;if(n<u)break;var f="",m=undefined,h=undefined,v=undefined;-1!==d?(h=Math.min(n,d),o===s?(v=h-(m=a),f=a?c+"元/"+p+"*("+h+" - "+m+")":c+"元/"+p+"*"+v):f=c+"元/"+p+"*"+(v=h-(m=u)+1)):o===s?(v=t,f=a?c+"元/"+p+"*("+n+" - "+a+")":c+"元/"+p+"*"+v):f=c+"元/"+p+"*"+(v=n-u+1),r.total+=v*c,r.priceList.push(e["default"]({buyNum:v,showString:f},i[o]))}return r},exports.changeHash=function(t){var a=y["default"].parse(window.location.href).getQuery();window.history.replaceState(null,null,window.location.hash.split("~")[0]+"~"+y["default"].serialize(e["default"]({},a,t)))},exports.getOrInitStorage=function(e,t){try{var a=function(){var a=JSON.parse(localStorage.getItem(e));if(!g["default"].isEmpty(a)&&i["default"](t).every(function(e){return e in a}))return{v:a};throw new Error("获取数据失败")}();if("object"==typeof a)return a.v}catch(n){return localStorage.setItem(e,JSON.stringify(t)),t}},exports.iframeDownload=function(e){if(e){var t=document.getElementById("iframe-download");if(t)t.setAttribute("src",e);else{var a=document.createElement("iframe");a.setAttribute("id","iframe-download"),a.style.display="none",document.body.appendChild(a),a.src=e}}},exports.handleQpsTips=function(e,t){var a=e,i=t;return i&&(g["default"].isArray(t)&&(i=t.map(function(e){return"<div>"+e+"</div>"}).join("")),a+='<span\n            data-ui-type="Tip"\n            data-ui-arrow="true"\n            data-ui-content=\''+g["default"].escape(i)+"'></span>"),a},exports.loadImage=function(e){return new t["default"](function(t,a){var i=new Image;i.onload=function(){return t(i)},i.onerror=a,i.src=e})};var g=s["default"](r),v=s["default"](o),x=s["default"](l),b=s["default"](u),y=s["default"](p),k=function(){var e=/^#\/ai\/([^\/]+)\/([^\/]+)\/.*/.exec(window.location.hash);return e&&e[1]||n.AppType.toArray()[0].value};exports.getType=k;exports.getTypeName=function(){var e=k();return n.AppType.getTextFromValue(e)};var T=100;exports.BUNDLE_NAME_MAX_LENGTH=T;var w=function(){var e=this,t={};return function(i,n){return a["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasOwnProperty(i)){e.next=4;break}return e.next=3,a["default"].awrap(n());case 3:t[i]=e.sent;case 4:return e.abrupt("return",t[i]);case 5:case"end":return e.stop()}},null,e)}}();exports.cacheValue=w}),define("ai/common/variable",["exports","module"],function(exports,module){module.exports={sidebar:null,subUserInfo:null,qualification:null,userInfo:null,riskLevel:null,promoteQuota:{}}}),define("ai/common/view/Base",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./view","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=function(a){function i(){t["default"](this,i),a.apply(this,arguments)}return e["default"](i,a),i}(i["default"](a)["default"]());module.exports=n}),define("ai/common/view/Form",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./view","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=function(a){function i(){t["default"](this,i),a.apply(this,arguments)}return e["default"](i,a),i}(i["default"](a)["default"]("form"));module.exports=n}),define("ai/common/view/List",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","./view","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=function(a){function i(){t["default"](this,i),a.apply(this,arguments)}return e["default"](i,a),i}(i["default"](a)["default"]("list"));module.exports=n}),define("ai/common/view/view",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","inf-ria/mvc/ListView","babel-runtime/helpers/interop-require-default","inf-ria/mvc/FormView","inf-ria/mvc/BaseView","ai/common/agreement"],function(exports,module,e,t,a,i,n,r,s){module.exports=function(){var a=arguments.length<=0||arguments[0]===undefined?"base":arguments[0];return function(a){function i(){t["default"](this,i),a.apply(this,arguments)}return e["default"](i,a),i.prototype.showUCDialog=function(){var e=this.popDialog({title:"登录提示",width:400,content:"<p>尊敬的用户您好，AR服务目前暂不支持推广账号，请您切换百度账号登录使用</p>",needFoot:!0,okText:"百度账号登录",cancelText:"我知道了"});e.getFoot().getChild("btnOk").on("click",function(){window.location.href="//login.bce.baidu.com/?redirect="+encodeURIComponent(window.location.href)}),e.getFoot().getChild("btnCancel").on("click",function(){e.hide(),window.location.href="/#/index/overview"}),e.on("close",function(){window.location.href="/#/index/overview"})},i.prototype.showAgreement=function(){var e=this,t=this.popDialog({width:800,content:d["default"],closeButton:!1,draggable:!1,title:"",okText:"我已阅读并同意",cancelText:""});t.getHead().hide(),t.getFoot().getChild("btnOk").on("click",function(){e.fire("agree"),t.hide()}),t.getFoot().getChild("btnCancel").hide()},i}("form"===a?l["default"]:"list"===a?o["default"]:u["default"])};var o=i["default"](a),l=i["default"](n),u=i["default"](r),d=i["default"](s)}),define("ai/common/vod",["exports","module","babel-runtime/core-js/promise","babel-runtime/regenerator","bat-ria/util","babel-runtime/helpers/interop-require-default","ai/common/util"],function(exports,module,e,t,a,i,n){function r(){return new e["default"](function(e){require(["bce-sdk"],function(t){return e(t)})})}function s(e){var a,i,n,r,s,o=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return t["default"].async(function(u){for(;;)switch(u.prev=u.next){case 0:return a=l["default"].genRequesters({fetch:e}),u.next=3,t["default"].awrap(a.fetch(o));case 3:return i=u.sent,n=i.accessKeyId,r=i.secretAccessKey,s=i.sessionToken,u.abrupt("return",{ak:n,sk:r,sessionToken:s});case 8:case"end":return u.stop()}},null,this)}function o(e){var a,i,n,o,l,u;return t["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t["default"].awrap(s(e));case 2:return a=d.sent,i=a.ak,n=a.sk,o=a.sessionToken,d.next=8,t["default"].awrap(r());case 8:return l=d.sent,u=new l.VodClient({endpoint:"https://vod.bj.baidubce.com",sessionToken:o,credentials:{ak:i,sk:n}}),d.abrupt("return",u);case 11:case"end":return d.stop()}},null,this)}var l=i["default"](a);module.exports={getSDK:r,uploadMediaResource:function(e){var a,i,r=e.stsUrl,s=e.onProgress,l=e.file;return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,t["default"].awrap(n.openFileDialog({accept:"video/*"}));case 3:l=e.sent;case 4:return e.next=6,t["default"].awrap(o(r));case 6:return a=e.sent,s&&a.on("progress",s),e.next=10,t["default"].awrap(a.createMediaResource(l.name,"AI-MARKET-VIDEO",l).then(function(e){return e.body.mediaId}));case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}},null,this)},getPlayableUrl:function(e,a){var i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(o(a));case 2:return i=n.sent,n.abrupt("return",i.getPlayableUrl(e));case 4:case"end":return n.stop()}},null,this)}}}),define("ai/components/Agreement/Agreement",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./Agreement.tpl","ai/common/agreement"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i),o=a["default"](n);module.exports=r["default"]({template:s["default"],initData:function(){return{open:!0,content:o["default"]}},agree:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$set("open",!1),t.prev=1,t.next=4,e["default"].awrap(this.ajax.userAgree(null,{"x-silent":!0}));case 4:this.fire("agree"),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](1);case 9:case"end":return t.stop()}},null,this,[[1,7]])}})}),define("ai/components/Agreement/Agreement.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="{{800}}" head="{{false}}" s-ref="dialog">\n        <div>\n            {{content | raw}}\n        </div>\n        <div slot="foot">\n            <xui-button on-click="agree" skin="primary">我已阅读并同意</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/components/Agreement/index",["exports","module","./Agreement","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/BosUploader",["exports","module","babel-runtime/helpers/class-call-check","babel-runtime/regenerator","jquery","babel-runtime/helpers/interop-require-default","lodash","ai/config"],function(exports,module,e,t,a,i,n,r){var s=i["default"](a),o=i["default"](n);window.$=s["default"];var l=365611,u={stsApiKey:"",bosEndpoint:"",bucket:"",autoStart:!1,multiple:!1,maxFileSize:"50Gb",accept:null,onFilesAdded:null,onProgress:null,onComplete:null,excludeWindowsAllFile:!0,postInit:null},d=function(){function a(t){e["default"](this,a),this.files=[],this.opt=o["default"].extend({},u,t),this._init()}return a.prototype._init=function(){var e=this,t=this,a=this.opt,i=a.bosEndpoint,n=a.autoStart,r=a.multiple,u=a.accept,d=a.bucket,c=a.maxFileSize,p=a.excludeWindowsAllFile;if(!i||!d)throw Error("初始化失败，缺少参数");this.wrapId="bos_uploader_"+l++;var f=s["default"]('<div id="'+this.wrapId+'" style="display:none"><div></div></div>');s["default"]("body").append(f);var m=(u||"").split(",").filter(function(e){return/^\..+$/.test(e)}).map(function(e){return e.replace(".","")});window.require(["baidubce"],function(a){e.baidubce=a;var s={bos_ak:"",bos_sk:"",bos_bucket:d,browse_button:f.children()[0],auto_start:n,multi_selection:r,bos_endpoint:i,bos_multipart_parallel:5,bos_multipart_auto_continue:!0,chunk_size:"8mb",max_retries:2,bos_task_parallel:3,max_file_size:c,accept:u,init:{PostInit:function(){e.opt.postInit&&e.opt.postInit(e.wrapId)},FilesAdded:function(i,n){e.files=[];for(var r=0;r<n.length;r++){var s=n[r],o={uuid:s.uuid,name:s.name,size:s.size,progress:"0%"};o.deferred=s.deferred=a.sdk.Q.defer(),e.files.push(o)}"function"==typeof e.opt.onFilesAdded&&e.opt.onFilesAdded(e.files),t._getSts(n)},FilesFilter:function(t,a){return"function"==typeof e.opt.onFilesFilter&&(a=e.opt.onFilesFilter(a)),m.length&&p&&function(){var e=new RegExp("(."+m.join("|\\.")+")$","i");a=a.filter(function(t){return e.test(t.name)})}(),a},UploadProgress:function(t,a,i,n){o["default"].find(e.files,function(e){return e.uuid==a.uuid}).progress=(100*i).toFixed(2)+"%","function"==typeof e.opt.onProgress&&e.opt.onProgress(e.files)},FileUploaded:function(t,a,i){o["default"].find(e.files,function(e){return e.uuid==a.uuid}).url=i&&i.body&&i.body.location},UploadComplete:function(){"function"==typeof e.opt.onComplete&&e.opt.onComplete(e.files)},Key:function(t,a){return a.deferred.promise.then(function(t){var i=t.key,n=o["default"].find(e.files,function(e){return e.uuid===a.uuid});n&&(n.key=i)}),a.deferred.promise},Error:function(t,a,i){e.setError&&e.setError(t,a,i)}}};e.uploader=new a.bos.Uploader(s)})},a.prototype._getSts=function(e){var a,i,n,s,o,l,u,d;return t["default"].async(function(c){for(;;)switch(c.prev=c.next){case 0:return a=this.opt.bucket,i=this.baidubce.utils.getDefaultACL(a),n=e.map(function(e){return e.name}),c.next=5,t["default"].awrap(r.api[this.opt.stsApiKey]({sts:i,filenames:n}));case 5:s=c.sent,o=s.bosAk,l=s.bosSk,u=s.uptoken,d=s.filenames,this.uploader.setOptions({bos_ak:o,bos_sk:l,uptoken:u,bos_endpoint:this.opt.bosEndpoint}),e.forEach(function(e,t){return e.deferred.resolve({key:d[t],bucket:a})});case 12:case"end":return c.stop()}},null,this)},a.prototype.open=function(){s["default"]("#"+this.wrapId).find('input[type="file"]').val("").click()},a.prototype.start=function(){this.uploader.start()},a.prototype.stop=function(){this.uploader.stop()},a}();module.exports=d}),define("ai/components/BreadCrumb",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/enums","lodash"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](i),s=n["default"]({template:'\n        <span>\n            <span class="divider">/</span>\n            <a s-if="item.url" href="{{item.url}}">{{item.title}}</a>\n            <span class="active" s-else>{{item.title}}</span>\n        </span>\n    ',initData:function(){return{item:{title:""}}}});module.exports=n["default"]({template:'\n        <div class="breadcrumb">\n            <span>{{title}}</span>\n            <template s-for="item in breadcrumbItems">\n                <breadcrumb-item item="{{item}}"></breadcrumb-item>\n            </template>\n        </div>\n    ',components:{"breadcrumb-item":s},initData:function(){return{items:[]}},computed:{typeName:function(){return a.AppType.getTextFromValue(this.data.get("aiAppType"))},isMarket:function(){return"market"===this.data.get("aiAppType")},isMarketBuyer:function(){return"market-buyer"===this.data.get("aiAppType")},title:function(){var e="产品服务";return(this.data.get("isMarket")||this.data.get("isMarketBuyer"))&&(e="AI 市场"),e},breadcrumbItems:function(){var e=this,t=this.data.get("isMarket")||this.data.get("isMarketBuyer");return this.data.get("items").map(function(a,i){return r["default"].assign({},a,{title:(t||0!==i?"":e.data.get("typeName")+" - ")+a.title})})}}})}),define("ai/components/BuyQpsBucket",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./BuyQpsBucket.tpl","ai/components/FormRow","ai/components/FormGroup","ai/components/Form"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](i),u=t["default"](n),d=t["default"](r);module.exports=s["default"]({template:o["default"],components:{"ai-form":d["default"],"ai-form-group":u["default"],"ai-form-row":l["default"]},initData:function(){return{item:{apiName:"",time:"",qps:"",price:""}}},"delete":function(){this.dispatch("buyQpsBucket:delete",this.$get("item"))}})}),define("ai/components/BuyQpsBucket.tpl",[],function(){return'<div>\n    <a class="bucket-del" href="javascript:;" on-click="delete">清除</a>\n    <ai-form-group title="{{item.apiName}}">\n        <ai-form-row label="购买期限">\n            {{item.time}}\n        </ai-form-row>\n        <ai-form-row label="购买数量">\n            {{item.qps}} QPS\n        </ai-form-row>\n        <ai-form-row label="购买费用">\n            ￥{{item.price}}\n        </ai-form-row>\n    </ai-form-group>\n</div>\n'}),define("ai/components/CascadingMenu/CascadingMenu",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s){var o=i["default"](a),l=i["default"](s),u={};module.exports=o["default"]({components:{"xui-select":n.Select},template:'\n    <template>\n        <xui-select\n            style="margin-right:{{space}}px;"\n            value="{=value[index]=}"\n            default-label="{{labels[index]}}"\n            datasource="{{ datasource[index] }}"\n            on-change="handleChange(index)"\n            s-for="item,index in labels" />\n    </template>\n    ',initData:function(){return{labels:[],value:[],space:10,datasource:[],initializing:!1}},loadSource:function(a){var i,n,r,s;return e["default"].async(function(o){for(var d=this;;)switch(o.prev=o.next){case 0:return i=this.$get("value"),n=i.slice(0,a).map(function(e,t){return l["default"].find(d.$get("datasource["+t+"]"),function(t){return t.value===e})}),r=JSON.stringify(n),u[r]=u[r]||new t["default"](function(e){d.fire("loader",[e,n])}),o.next=6,e["default"].awrap(u[r]);case 6:s=o.sent,this.data.splice("datasource",[a,1,s]);case 8:case"end":return o.stop()}},null,this)},handleChange:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.$get("initializing")){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,e["default"].awrap(r.sleep());case 4:if(!(t<this.$get("labels").length-1)){a.next=9;break}return this.data.splice("value",[t+1]),this.data.splice("datasource",[t+1,1,[]]),a.next=9,e["default"].awrap(this.loadSource(t+1));case 9:this.notifyChange();case 10:case"end":return a.stop()}},null,this)},initializeData:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return this.$set("initializing",!0),t=this.$get("value").slice(),i.next=4,e["default"].awrap(this.loadSource(0));case 4:a=1;case 5:if(!(a<t.length)){i.next=11;break}return i.next=8,e["default"].awrap(this.loadSource(a));case 8:a++,i.next=5;break;case 11:this.$set("initializing",!1);case 12:case"end":return i.stop()}},null,this)},notifyChange:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(r.sleep());case 2:return this.fire("change",this.$get("value")),t.next=5,e["default"].awrap(r.sleep());case 5:this.dispatch("input-comp-value-changed",{value:this.$get("value")});case 6:case"end":return t.stop()}},null,this)},created:function(){var e=this;this.initializeData(),this.watch("value",function(){return e.initializeData()})}})}),define("ai/components/CascadingMenu/index",["exports","module","./CascadingMenu","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/ComplexBoxGroup/ComplexBoxGroup",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ComplexBoxGroup.tpl","san-xui","san","lodash"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](r);module.exports=s["default"]({template:o["default"],components:{"xui-checkbox":i.CheckBox,"xui-radiobox":i.RadioBox},dataTypes:{disabled:n.DataTypes.bool,datasource:n.DataTypes.array,orientation:n.DataTypes.string,value:n.DataTypes.any,colCount:n.DataTypes.number,itemWidth:n.DataTypes.number,boxType:n.DataTypes.string},initData:function(){return{datasource:[],disabled:!1,orientation:"horizontal",value:null,colCount:0,itemWidth:0,name:l["default"].uniqueId("complex-box-group-"),boxType:"radio"}},computed:{itemStyle:function(){var e={},t=this.data.get("itemWidth");return t>0&&(e.width=t+"px"),e},checkedStatus:function(){var e={},t=this.data.get("datasource"),a=this.data.get("boxType"),i=this.data.get("value");if(null!=i){"radio"!==a||l["default"].isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)for(var r=0;r<t.length;r++)if(t[r].value===i[n]){e[""+r]=1;break}}return e},groupedDatasource:function(){var e=this.data.get("datasource"),t=this.data.get("colCount");if(!t)return[l["default"].map(e,function(e,t){return{text:e.text,value:e.value,title:e.title,disabled:e.disabled,__index:t}})];for(var a=e.length,i=[],n=Math.ceil(a/t),r=0;r<n;r++){for(var s=[],o=r*t,u=Math.min(a,(r+1)*t),d=o;d<u;d++){var c=e[d],p=c.text,f=c.value,m=c.title,h=c.disabled;s.push({text:p,value:f,title:m,disabled:h,__index:d})}i.push(s)}return i},mainClass:function(){var e=["complex-box-group"],t=this.data.get("orientation");return t&&(e.push("complex-box-group-"+t),e.push("state-"+t)),e.join(" ")}},filters:{title:function(e){return e.text||e.title}},inited:function(){var e=this,t=this.data.get(),a=t.boxType,i=t.value;""===t.disabled&&this.data.set("disabled",!0),"radio"===a&&l["default"].isArray(i)&&this.data.set("value",i[0]),"checkbox"!==a||i||this.data.set("value",[]),this.watch("value",function(t){return e.fire("change",{value:t})})},onChange:function(e,t){var a=this.data.get("boxType"),i=this.data.get("datasource")[t].value;if("radio"===a)e.value&&this.data.set("value",i);else if(e.value)this.data.push("value",i);else{var n=l["default"].findIndex(this.data.get("value"),function(e){return e===i});-1!==n&&this.data.removeAt("value",n)}}})}),define("ai/components/ComplexBoxGroup/ComplexBoxGroup.tpl",[],function(){return'<template>\n    <div class="{{mainClass}}">\n        <div class="complex-box-group-sub" s-for="ds, index in groupedDatasource">\n            <label class="complex-box-group-item" style="{{itemStyle}}" s-for="item in ds">\n                <xui-checkbox\n                    s-if="boxType == \'checkbox\'"\n                    on-change="onChange($event, item.__index)"\n                    name="{{name}}"\n                    title="{{item.text}}"\n                    disabled="{{item.disabled || disabled}}"\n                    checked="{{checkedStatus[item.__index]}}"\n                />\n    \n                <xui-radiobox\n                    s-if="boxType == \'radio\'"\n                    on-change="onChange($event, item.__index)"\n                    name="{{name}}"\n                    title="{{item.text}}"\n                    disabled="{{item.disabled || disabled}}"\n                    checked="{{checkedStatus[item.__index]}}"\n                />\n    \n                <slot\n                    name="com"\n                    var-itemData="item"\n                    var-itemIndex="item.__index"\n                />\n            </label>\n        </div>\n    </div>\n</template>\n'}),define("ai/components/ComplexBoxGroup/index",["exports","module","./ComplexBoxGroup","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/EmptyLayer",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:"<div class=\"ai-empty-layer{{fixed ? ' fixed' : ''}}\"><div class=\"ai-empty-layer-content\"><slot></slot></div></div>",name:"empty-layer",initData:function(){return{fixed:!0}},attached:function(){this.refresh()},refresh:function(){this.$set("fixed",document.documentElement.scrollHeight>document.documentElement.clientHeight)}})}),define("ai/components/FileErrorDetailDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/Dialog"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="error-detail-dialog" foot="{{false}}">\n                <div slot="head">{{title}}<span style="color:#999">（系统筛选出编码错误信息，请自行检查后重新上传）</span></div>\n                <div class="error-container">\n                    <div class="error-line" s-for="item in detail">\n                        <div class="line-no">\n                            {{item.lineNo}}\n                        </div>\n                        <div class="error-msg">\n                            {{item.errorMsg}}\n                        </div>\n                        <div class="content">\n                            {{item.content}}\n                        </div>\n                    </div>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":n["default"]},initData:function(){return{open:!0,detail:[],title:"正则表达式校验结果"}}})}),define("ai/components/FilePreview",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n        <div s-if="fileId" class="file-preview">\n            <div class="main-wrap">\n                <div class="txt-wrap">\n                    <div class="clear"><span on-click="clearFile"></span></div>\n                </div>\n                <a class="file-name" href="{{fileUrl}}" target="_blank">{{fileName}}</a>\n            </div>\n        </div>\n    ',initData:function(){return{}},clearFile:function(){this.fire("clearFile",{fileId:"",fileName:"",fileUrl:""})}})}),define("ai/components/FileUploadList/FileUploadList",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","ai/components/ImagePreview","jquery","ai/components/MemoryUploader","lodash"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](n),d=a["default"](r),c=a["default"](s),p=a["default"](o);module.exports=l["default"]({template:'\n<template>\n    <div class="ai-file-upload-list">\n        <div class="upload-area-wrap">\n            <div s-if="loading" class="loading-wrap">\n                <xui-loading size="middle" />\n            </div>\n            <div s-else on-click="addFile" class="file-selector">\n                <xui-icon name="plus" />\n            </div>\n\n            <div class="cropper-des">\n                <div s-for="item in des" s-html="item"></div>\n            </div>\n        </div>\n\n        <div s-ref="itemWrap" class="upload-item-wrap">\n            <div s-for="item,index in list" class="upload-item">\n                <a class="item-name" href="{{item.fileLink}}" target="_blank">{{item.fileName}}</a>\n                <a on-click="delete(index)" class="item-ctl" href="javascript:void(0)">删除</a>\n            </div>\n        </div>\n\n    </div>\n</template>',components:{"xui-button":i.Button,"xui-loading":i.Loading,"image-preview":u["default"]},initData:function(){return{options:{},list:[],des:[],max:5,loading:!1}},methodHook:{addFile:function(){var t=this;if(!this.$get("loading")){var a=this.data.get(),i=a.list,n=a.max;if(i.length>=n)this.$toast("最多只能选择"+n+"个文件",{messageType:"error"});else{new c["default"](e["default"]({url:"",options:{compress:!1},sizeLimit:10485760,errors:{F_EXCEED_SIZE:"请选择10M以内的文件"},before:function(){t.$set("loading",!0)},success:function(e){var a=t.$get("list");a.push(e),t.$$set({loading:!1,list:a.slice()}),t.onChange()},events:{uploadBeforeSend:function(e,t,a){p["default"].extend(t,{fileType:e.file.ext})}}},this.$get("options"))).showDialog()}}},"delete":function(e){var t=this,a=d["default"](this.ref("itemWrap")).find(".upload-item").eq(e);a.fadeOut(function(){var i=t.$get("list");i.splice(e,1),t.$set("list",i.slice()),t.onChange(),a.show()})},onChange:function(){var e=this,t=this.$get("list");this.fire("change",t),this.nextTick(function(){e.dispatch("input-comp-value-changed",{value:t})})}}})}),define("ai/components/FileUploadList/FileUploadList.tpl",[],function(){return'<template>\n    <xui-dialog on-confirm="handleConfirm" class="ai-img-cropper-dialog" open="{=open=}" width="{{dialogWidth}}" title="图片编辑">\n        <div s-if="image" class="cropper-main">\n            <div style="{{imgCoverStyle}}" class="cover-wrap">\n                \x3c!-- 裁剪的容器 --\x3e\n                <div s-ref="wrap" style="{{imgWrapStyle}}" class="img-wrap">\n                    \x3c!-- 半透明背景 --\x3e\n                    <div class="img-wrap-cover"></div>\n                    \x3c!-- 裁剪框 --\x3e\n                    <div s-ref="rect" style="{{rectStyle}}" class="rect">\n                        \x3c!-- 监听drag的元素 --\x3e\n                        <div s-ref="rectDrag" class="rect-drag">\n                            \x3c!-- 裁剪区域显示原图，跟暗色蒙层做区别 --\x3e\n                            \x3c!-- 用 img 相比容器的 backgrond-image 更流畅 --\x3e\n                            <img style="{{rectImgStyle}}" src="{{image.src}}">\n                            \x3c!-- 裁剪区域有个高亮蒙层 --\x3e\n                            <div class="rect-img-cover"></div>\n                        </div>\n                        \x3c!-- 四个角，用于拉伸 --\x3e\n                        <div s-ref="rectLeftTop" class="left-top"></div>\n                        <div s-ref="rectRightTop" class="right-top"></div>\n                        <div s-ref="rectLeftBottom" class="left-bottom"></div>\n                        <div s-ref="rectRightBottom" class="right-bottom"></div>\n                    </div>\n                </div>\n\n            </div>\n            <div class="preview-wrap">\n                <div class="preview-tip">图片预览</div>\n                <div style="{{prewWrapStyle}}" class="preview-wrap-rect">\n                    <img src="{{image.src}}" class="preview-img" style="{{previewImgStyle}}">\n                </div>\n                <div class="preview-des">{{ previewDes }}</div>\n            </div>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/components/FileUploadList/index",["exports","module","./FileUploadList","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/Form",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n    <div>\n        <form class="ai-form">\n            <slot/>\n        </form>\n    </div>\n',name:"ai-form",initData:function(){return{labelWidth:90,labelPosition:"left"}}})}),define("ai/components/FormGroup",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n    <dl class="ai-form-group">\n        <dt><h4>{{title}}</h4></dt>\n        <slot/>\n    </dl>\n'})}),define("ai/components/FormRow",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n        <dd class="ai-form-row">\n            <label class="{{required ? \'ai-required-label\' : \'\'}} ai-form-row-key"\n                style="width:{{labelWidth}}px;text-align:{{labelPosition}}">{{label}}</label>\n            <div class="ai-form-row-value" style="margin-left:{{labelWidth}}px"><slot/></div>\n        </dd>\n    ',initData:function(){return{required:!1,label:""}},inited:function(){""===this.$get("required")&&this.$set("required",!0)},created:function(){var e=this.data.get("labelWidth")||this.parentComponent.data.get("labelWidth");this.$set("labelWidth",e);var t=this.data.get("labelPosition")||this.parentComponent.data.get("labelPosition");this.$set("labelPosition",t)}})}),define("ai/components/ImageCropper/ImageCropper",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ImageCropper.tpl","san-xui","lodash","ai/common/util","./utils"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](r);module.exports=l["default"]({template:u["default"],components:{"xui-dialog":n.Dialog},initData:function(){return{open:!1,cutScale:2,sizeLimit:{min:81920,minLabel:"80Kb",max:10485760,maxLabel:"10Mb"},lengthLimit:{width:224,height:168},coverSize:400,rect:{x:0,y:0,width:224,height:168},image:null}},computed:{dialogWidth:function(){var e=this.data.get("lengthLimit.width");return e<224?700:700+e-224},canvasWrapStyle:function(){var e=this.data.get("lengthLimit");return["width:"+e.width+"px","height:"+e.height+"px","overflow:hidden"].join(";")},previewImgStyle:function(){var e=this.data.get("lengthLimit"),t=e.width,a=e.height,i=this.data.get("cutScale");return["width:"+t*i+"px","height:"+a*i+"px","transform:scale("+1/i+")","transform-origin:top left"].join(";")},imgCoverStyle:function(){var e=this.data.get("coverSize");return["width:"+e+"px","height:"+e+"px"].join(";")},imgWrapSize:function(){var e=this.data.get("image");if(!e)return"";var t=this.data.get("coverSize"),a=e.width,i=e.height;return a>=i?(i/=a/t,a=t):(a/=i/t,i=t),{width:a,height:i}},imgWrapStyle:function(){var e=this.data.get("imgWrapSize"),t=e.width,a=e.height,i=this.data.get("image.src");return i?["width:"+t+"px","height:"+a+"px","background-image:url("+i+")","background-size:"+t+"px "+a+"px"].join(";"):""},previewDes:function(){var e=this.data.get("lengthLimit");return e.width+"*"+e.height+"px"},rectStyle:function(){var e=this.data.get("rect");return["width:"+e.width+"px","height:"+e.height+"px","left:"+e.x+"px","top:"+e.y+"px"].join(";")},rectImgStyle:function(){var e=this.data.get("rect"),t=e.x,a=e.y,i=this.data.get("imgWrapSize");return["width:"+i.width+"px","height:"+i.height+"px","transform:translateX("+(-t-1)+"px) translateY("+(-a-1)+"px)","transform:translate3d("+(-t-1)+"px,"+(-a-1)+"px,0)"].join(";")}},detached:function(){this.removeListeners()},methodHook:{showFileDialog:function(){this.ref("input").click()},clear:function(){var e=d["default"].assign({},this.initData(),{sizeLimit:this.$get("sizeLimit"),lengthLimit:this.$get("lengthLimit")});this.$$set(e),this.ref("input").value=null},readNewFile:function(){var t,a,i,n,r,o,l,u,d,c,p,f,m,h;return e["default"].async(function(g){for(;;)switch(g.prev=g.next){case 0:if(t=this.ref("input"),!(a=t.files[0])){g.next=21;break}return g.next=5,e["default"].awrap(s.readImageFile(a));case 5:if(i=g.sent,n=this.$get("lengthLimit"),r=n.width,o=n.height,l=i.width>=r&&i.height>=o,u=this.$get("sizeLimit"),d=u.min,c=u.max,p=u.minLabel,f=u.maxLabel,m=a.size>=d&&a.size<=c,l&&m){g.next=20;break}return h=d<=0?"":"大于"+p,this.$alert({title:"提示",content:"所选图片长度不得小于"+r+"*"+o+"px,且图片文件大小须"+h+"小于"+f+"，图片格式为jpg或png"}),g.abrupt("return");case 20:this.$$set({open:!0,image:i});case 21:case"end":return g.stop()}},null,this)},initialize:function(){this.dispossibles=this.dispossibles||[],this.adjustRectSize(),this.bindRectDrag(),this.bindRectBorder()},removeListeners:function(){(this.dispossibles||[]).forEach(function(e){return e.dispose()}),this.dispossibles=[]},bindRectDrag:function(){var e=this,t=o.dragRect(this.ref("rectDrag"),function(){return e.$get("rect")},this.$get("imgWrapSize"),function(t){e.$set("rect",t)});this.dispossibles.push(t)},bindRectBorder:function(){var e=this;["rectLeftTop","rectRightTop","rectLeftBottom","rectRightBottom"].forEach(function(t,a){var i=o.dragRectBorder(e.ref(t),function(){return e.$get("rect")},e.$get("imgWrapSize"),e.$get("lengthLimit"),function(t){e.$set("rect",t)},a+1);e.dispossibles.push(i)})},drawPreview:function(){var e=this.ref("canvas"),t=this.$get("cutScale"),a=this.$get("lengthLimit");if(e){e.width=a.width*t,e.height=a.height*t;var i=e.getContext("2d");i.imageSmoothingEnabled=!0;var n=this.$get("rect"),r=this.$get("image"),s=this.$get("imgWrapSize"),o=r.width/s.width,l=n.x*o,u=n.y*o,d=n.width*o,c=n.height*o;i.drawImage(r,l,u,d,c,0,0,a.width*t,a.height*t)}},handleConfirm:function(){this.fire("confirm",{image:this.ref("canvas").toDataURL("image/png"),scale:this.$get("cutScale")})},adjustRectSize:function(){var e=this.$get("lengthLimit"),t=e.width,a=e.height;this.$$set({"rect.width":t,"rect.height":a});var i=this.$get("rect"),n=i.width,r=i.height,s=this.$get("imgWrapSize"),o=s.width,l=s.height;if(n>o){var u=o/n;n=o,r*=u}if(r>l){u=l/r;r=l,n*=u}this.$$set({"rect.width":n,"rect.height":r})}},watchHook:{open:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(s.sleep(0));case 2:if(!t){a.next=10;break}if(!s.isSafari()){a.next=6;break}return a.next=6,e["default"].awrap(s.sleep(500));case 6:this.initialize(),this.drawPreview(),a.next=12;break;case 10:this.clear(),this.removeListeners();case 12:case"end":return a.stop()}},null,this)},rect:function(){this.data.get("open")&&this.drawPreview()}}})}),define("ai/components/ImageCropper/ImageCropper.tpl",[],function(){return'<template>\n    <input\n        s-ref="input"\n        on-change="readNewFile"\n        style="display: none;"\n        type="file"\n        accept="image/jpeg,image/jpg,image/png"\n    />\n    <xui-dialog on-confirm="handleConfirm" class="ai-image-cropper-dialog" open="{=open=}" width="{{dialogWidth}}" title="图片编辑">\n        <div s-if="image" class="cropper-main">\n            <div style="{{imgCoverStyle}}" class="cover-wrap">\n                \x3c!-- 裁剪的容器 --\x3e\n                <div s-ref="wrap" style="{{imgWrapStyle}}" class="img-wrap">\n                    \x3c!-- 半透明背景 --\x3e\n                    <div class="img-wrap-cover"></div>\n                    \x3c!-- 裁剪框 --\x3e\n                    <div s-ref="rect" style="{{rectStyle}}" class="rect">\n                        \x3c!-- 监听drag的元素 --\x3e\n                        <div s-ref="rectDrag" class="rect-drag">\n                            \x3c!-- 裁剪区域显示原图，跟暗色蒙层做区别 --\x3e\n                            \x3c!-- 用 img 相比容器的 backgrond-image 更流畅 --\x3e\n                            <img style="{{rectImgStyle}}" src="{{image.src}}">\n                            \x3c!-- 裁剪区域有个高亮蒙层 --\x3e\n                            <div class="rect-img-cover"></div>\n                        </div>\n                        \x3c!-- 四个角，用于拉伸 --\x3e\n                        <div s-ref="rectLeftTop" class="left-top"></div>\n                        <div s-ref="rectRightTop" class="right-top"></div>\n                        <div s-ref="rectLeftBottom" class="left-bottom"></div>\n                        <div s-ref="rectRightBottom" class="right-bottom"></div>\n                    </div>\n                </div>\n\n            </div>\n            <div class="preview-wrap">\n                <div class="preview-tip">图片预览</div>\n                <div class="canvas-wrap" style="{{canvasWrapStyle}}">\n                    <canvas s-ref="canvas" class="preview-img" style="{{previewImgStyle}}"></canvas>\n                </div>\n                <div class="preview-des">{{ previewDes }}</div>\n            </div>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/components/ImageCropper/index",["exports","module","./wrapper","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/ImageCropper/utils",["exports","lodash","babel-runtime/helpers/interop-require-default"],function(exports,e,t){function a(e){return{x:e.clientX,y:e.clientY}}function i(e,t,i){var n=!1,r={x:0,y:0},s=function(e){n=!0,r=a(e),t()};e.addEventListener("mousedown",s);var o=function(){n=!1};document.addEventListener("mouseup",o);var l=function(e){if(n){var t=a(e),s=t.x-r.x,o=t.y-r.y;i(s,o)}};return document.addEventListener("mousemove",l),{dispose:function(){e.removeEventListener("mousedown",s),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",l)}}}function n(e,t){e.width=~~e.width,e.height=~~e.height,e.width/e.height<t?e.height=~~(e.width/t):e.width=~~(e.height*t)}exports.__esModule=!0,exports.subscribeDrag=i,exports.dragRect=function(e,t,a,n){var s=r["default"].assign({},t());return i(e,function(){s=r["default"].assign({},t())},function(e,t){var i=r["default"].assign({},s);i.x+=e,i.y+=t,i=function(e,t){return(e=r["default"].assign({},e)).x<0&&(e.x=0),e.y<0&&(e.y=0),e.x+e.width>t.width&&(e.x=t.width-e.width),e.y+e.height>t.height&&(e.y=t.height-e.height),e}(i,a),n(i)})},exports.dragRectBorder=function(e,t,a,s,o,l){var u=r["default"].assign({},t());return i(e,function(){u=r["default"].assign({},t())},function(e,t){var i=s.width/s.height,d=r["default"].assign({},u);if(1===l){var c=a.width-d.x-d.width,p=a.height-d.y-d.height;d.x+=e,d.y+=t,d.x<0&&(d.x=0),d.y<0&&(d.y=0),d.width=a.width-c-d.x,d.height=a.height-p-d.y,n(d,i),d.x=a.width-c-d.width,d.y=a.height-p-d.height}else 2===l?(p=a.height-d.y-d.height,d.y+=t,d.y<0&&(d.y=0),d.width+=e,d.x+d.width>a.width&&(d.width=a.width-d.x),d.height=a.height-d.y-p,n(d,i),d.y=a.height-d.height-p):3===l?(c=a.width-d.x-d.width,d.x+=e,d.x<0&&(d.x=0),d.width=a.width-c-d.x,d.height+=t,d.y+d.height>a.height&&(d.height=a.height-d.y),n(d,i),d.x=a.width-d.width-c):(d.width+=e,d.height+=t,n(d,i),d.x+d.width>a.width&&(d.width=a.width-d.x),d.y+d.height>a.height&&(d.height=a.height-d.y),n(d,i));d.width<20||d.height<20||o(d)})};var r=t["default"](e)}),define("ai/components/ImageCropper/wrapper",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","./ImageCropper","ai/common/util","bat-ria/util","inf-ui/x/esui/page"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](r),c=i["default"](o);module.exports=u["default"]({template:'\n<template>\n    <div class="ai-image-cropper-wrap">\n        <div s-if="loading" class="loading-wrap">\n            <xui-loading size="middle" />\n        </div>\n        <div s-else-if="!loading && image==null" on-click="showDialog" class="file-selector">\n            <xui-icon name="plus" />\n        </div>\n        <div s-else class="cropper-preview-wrap" >\n            <img src="{{image.url}}" >\n            <div class="item-ctl-wrap">\n                <div on-click="preview" class="item-ctl">\n                    <xui-icon name="eye" />\n                    <span class="item-ctl-label">预览</span>\n                </div>\n                <div on-click="reupload" class="item-ctl">\n                    <xui-icon name="bcmrefresh" />\n                    <span class="item-ctl-label">重新上传</span>\n                </div>\n                <div on-click="clear" class="item-ctl">\n                    <xui-icon name="close" />\n                    <span class="item-ctl-label">删除</span>\n                </div>\n            </div>\n        </div>\n        <div class="cropper-des">\n            <div s-for="item in des">{{item}}</div>\n        </div>\n        <image-cropper s-ref="cropper" on-confirm="upload" sizeLimit="{{sizeLimit}}" lengthLimit="{{lengthLimit}}" />\n    </div>\n    <xui-dialog s-ref="previewDialog" open="{=preview=}" close-on-click-mask="{{true}}" foot="{{false}}" head="{{false}}" mask="{{true}}" width="{{previewImageSize.width}}" height="{{previewImageSize.height}}">\n        <div class="ai-image-uploader-preview">\n            <img src="{{image.url}}" on-load="previewImageLoad" />\n            <a class="ai-image-uploader-preview-close" href="javascript:void(0)" on-click="closePreview"><xui-icon name="x" /></a>\n        </div>\n    </xui-dialog>\n</template>',components:{"xui-button":n.Button,"xui-loading":n.Loading,"image-cropper":d["default"],"xui-dialog":n.Dialog},initData:function(){return{url:"",extData:{},image:null,des:[],sizeLimit:{min:81920,minLabel:"80Kb",max:10485760,maxLabel:"10Mb"},lengthLimit:{width:224,height:168},loading:!1,preview:!1,previewImageSize:{width:"auto",height:"auto"},previewRadio:.8}},methodHook:{showDialog:function(){this.ref("cropper").showFileDialog()},upload:function(a){var i,n,r,o,l=a.image,u=a.scale;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.$set("loading",!0),i=c["default"].genRequesters({uploadBase64:this.$get("url")}),a.next=4,t["default"].awrap(s.getAsyncTuple(i.uploadBase64(e["default"]({},this.$get("extData"),{image:l,scale:u}),{"x-silent":!0})));case 4:if(n=a.sent,r=n[0],o=n[1],!r){a.next=12;break}return this.$toast(r.global,{messageType:"error"}),this.$set("loading",!1),this.onChange(),a.abrupt("return");case 12:this.$$set({image:{id:o.picId,url:o.picUrl},loading:!1}),this.onChange();case 14:case"end":return a.stop()}},null,this)},preview:function(){this.$set("preview",!0)},reupload:function(){this.clear(),this.showDialog()},clear:function(){this.$set("image",null),this.onChange()},onChange:function(){var e=this,t=this.$get("image");this.fire("change",t),this.nextTick(function(){e.dispatch("input-comp-value-changed",{value:t})})},closePreview:function(){this.$set("preview",!1)},previewImageLoad:function(e){var t=this,a=l.getViewWidth(),i=l.getViewHeight(),n=this.$get("previewRadio"),r=a*n,s=i*n,o=e.target.naturalWidth,u=e.target.naturalHeight,d=o/u;o>r&&(u=(o=r)/d),u>s&&(o=(u=s)*d),u-=60,this.$set("previewImageSize.width",o),this.$set("previewImageSize.height",u),this.nextTick(function(){return t.ref("previewDialog").__resize()})}}})}),define("ai/components/ImagePreview",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","inf-ui/x/esui/page"],function(exports,module,e,t,a,i){var n=t["default"](e);module.exports=n["default"]({template:'\n<template>\n    <xui-dialog s-ref="previewDialog" open="{=open=}"\n        close-on-click-mask="{{true}}" foot="{{false}}" head="{{false}}"\n        mask="{{true}}" width="{{previewImageSize.width}}" height="{{previewImageSize.height}}"\n    >\n        <div class="ai-image-uploader-preview">\n            <img src="{{url}}" on-load="previewImageLoad" />\n            <a class="ai-image-uploader-preview-close" href="javascript:void(0)" on-click="close">\n                <xui-icon name="x" />\n            </a>\n        </div>\n    </xui-dialog>\n</template>',components:{"xui-dialog":a.Dialog},initData:function(){return{url:"",open:!1,previewImageSize:{width:"auto",height:"auto"},previewRadio:.8}},methodHook:{show:function(){this.$set("open",!0)},close:function(){this.$set("open",!1)},previewImageLoad:function(e){var t=this,a=i.getViewWidth(),n=i.getViewHeight(),r=this.$get("previewRadio"),s=a*r,o=n*r,l=e.target.naturalWidth,u=e.target.naturalHeight,d=l/u;l>s&&(u=(l=s)/d),u>o&&(l=(u=o)*d),u-=60,this.$set("previewImageSize.width",l),this.$set("previewImageSize.height",u),this.nextTick(function(){return t.ref("previewDialog").__resize()})}}})}),define("ai/components/ImageUploader",["exports","module","babel-runtime/regenerator","san","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","inf-ui/x/esui/page","saber-cookie","lodash","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](s),c=i["default"](o);module.exports=u["default"]({template:'\n        <div class="ai-image-uploader">\n            <table class="ai-image-uploader-table">\n                <tbody>\n                    <tr>\n                        <td class="ai-image-uploader-title"><slot></slot></td>\n                        <td>\n                            <div class="ai-image-uploader-image-list">\n                                <div class="ai-image-uploader-image" s-for="image, index in images">\n                                    <img src="{{image.url}}" />\n                                    <div class="ai-image-uploader-image-toolbar">\n                                        <a href="javascript:void(0)" on-click="previewImage(index)"><xui-icon name="eye" /></a>\n                                        <a href="javascript:void(0)" on-click="removeImage(index)"><xui-icon name="trash-alt" /></a>\n                                    </div>\n                                </div>\n                                <div class="ai-image-uploader-placeholder" s-if="showPlaceholder">暂无图片</div>\n                                <div class="ai-image-uploader-selector{{uploading ? \' ai-image-uploader-loading\' : \'\'}}{{showUploader ? \'\' : \' ai-image-uploader-hidden\'}}">\n                                    <xui-webuploader s-ref="uploader" url="{{url}}" on-uploader-event="uploaderEvent"></xui-webuploader>\n                                    <xui-icon name="plus" />\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <xui-dialog s-ref="previewDialog" open="{=preview=}" close-on-click-mask="{{true}}" foot="{{false}}" head="{{false}}" mask="{{true}}" width="{{previewImageSize.width}}" height="{{previewImageSize.height}}">\n                <div class="ai-image-uploader-preview">\n                    <img src="{{previewImage.url}}" on-load="previewImageLoad" />\n                    <a class="ai-image-uploader-preview-close" href="javascript:void(0)" on-click="closePreview"><xui-icon name="x" /></a>\n                </div>\n            </xui-dialog>\n        </div>\n    ',name:"image-uploader",components:{"xui-webuploader":n.WebUploader,"xui-dialog":n.Dialog},initData:function(){return{uploading:!1,preview:!1,previewRadio:.8,previewIndex:null,previewImageSize:{width:"auto",height:"auto"},max:1,images:[],url:"",data:{}}},dataTypes:{url:t.DataTypes.string,max:t.DataTypes.number,images:t.DataTypes.array},computed:{showUploader:function(){return this.data.get("images").length<this.data.get("max")},showPlaceholder:function(){return 0===this.data.get("images").length},previewImage:function(){var e=this.data.get("previewIndex"),t={url:"",id:""};if(null==e)return t;var a=this.data.get("images["+e+"]");return a||t}},attached:function(){var e=this;this.ref("uploader").watch("uploading",function(t){return e.$set("uploading",t)}),this.ref("uploader").watch("error",function(t){return t&&e.$toast(t,{messageType:"error"})})},uploaderEvent:function(e){"function"==typeof this[e.eventType]&&this[e.eventType].apply(this,e.args)},uploadBeforeSend:function(e,t,a){c["default"].assign(t,this.$get("data"));var i=d["default"].get("bce-user-info")||"";a.csrftoken=i.replace(/"/g,"")},uploadSuccess:function(t,a){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(l.sleep(500));case 2:a&&a.success?(this.data.push("images",{url:a.result.picUrl,id:a.result.picId}),this.onChange()):a&&a.message&&a.message.global&&this.$toast(a.message.global,{messageType:"error"});case 3:case"end":return t.stop()}},null,this)},removeImage:function(e){this.data.removeAt("images",e),this.onChange()},onChange:function(){var e=this,t=this.$get("images");this.fire("change",t),this.nextTick(function(){e.dispatch("input-comp-value-changed",{value:t})})},previewImage:function(e){this.$set("previewIndex",e),this.$set("preview",!0)},closePreview:function(){this.$set("preview",!1)},previewImageLoad:function(e){var t=this,a=r.getViewWidth(),i=r.getViewHeight(),n=this.$get("previewRadio"),s=a*n,o=i*n,l=e.target.naturalWidth,u=e.target.naturalHeight,d=l/u;l>s&&(u=(l=s)/d),u>o&&(l=(u=o)*d),u-=60,this.$set("previewImageSize.width",l),this.$set("previewImageSize.height",u),this.nextTick(function(){return t.ref("previewDialog").__resize()})}})}),define("ai/components/ImageUploader2",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","./MemoryUploader","san-xui","inf-ui/x/esui/page","lodash"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](r);module.exports=s["default"]({template:'\n        <div class="ai-image-uploader2">\n            <div class="btn-wrap" s-if="!imgUrl" >\n                <xui-button on-click="openFileDialog" icon="plus" skin="primary" size="large">上传文件</xui-button>\n                <span s-if="loading">上传中...</span>\n                <span s-if="error" class="error">{{error}}</span>\n            </div>\n            <div s-else class="preview-wrap" >\n                <img src="{{imgUrl}}" >\n                <div class="item-ctl-wrap">\n                    <div on-click="preview" class="item-ctl">\n                        <xui-icon name="eye" />\n                        <span class="item-ctl-label">预览</span>\n                    </div>\n                    <div on-click="reupload" class="item-ctl">\n                        <xui-icon name="bcmrefresh" />\n                        <span class="item-ctl-label">重新上传</span>\n                    </div>\n                    <div on-click="clear" class="item-ctl">\n                        <xui-icon name="close" />\n                        <span class="item-ctl-label">删除</span>\n                    </div>\n                </div>\n            </div>\n            <xui-dialog s-ref="previewDialog" open="{=preview=}" close-on-click-mask="{{true}}" foot="{{false}}" head="{{false}}" mask="{{true}}" width="{{previewImageSize.width}}" height="{{previewImageSize.height}}">\n                <div class="ai-image-uploader-preview">\n                    <img src="{{imgUrl}}" on-load="previewImageLoad" />\n                    <a class="ai-image-uploader-preview-close" href="javascript:void(0)" on-click="closePreview"><xui-icon name="x" /></a>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":i.Dialog,"xui-button":i.Button},initData:function(){return{url:"",imgUrl:"",loading:!1,sizeLimit:3145728,extData:{},success:function(){},before:function(){},error:"",preview:!1,previewImageSize:{width:"auto",height:"auto"},previewRadio:.8}},methodHook:{openFileDialog:function(){var e=this,t=new o["default"]({url:this.$get("url"),success:this.$get("success"),before:function(t,a,i){e.$set("loading",!0),e.$set("error",""),l["default"].assign(a,e.$get("extData")),e.$get("before")(t,a,i)},fail:function(t){e.$set("error",t)},sizeLimit:this.$get("sizeLimit"),always:function(){e.$set("loading",!1),e.onChange(),t.dispose()}});t.showDialog()},preview:function(){this.$set("preview",!0)},reupload:function(){this.clear(),this.openFileDialog()},clear:function(){this.$set("imgUrl",""),this.onChange()},onChange:function(){var e=this;this.nextTick(function(){var t=e.$get("imgUrl");e.fire("change",t),e.dispatch("input-comp-value-changed",{value:t})})},closePreview:function(){this.$set("preview",!1)},previewImageLoad:function(e){var t=this,a=n.getViewWidth(),i=n.getViewHeight(),r=this.$get("previewRadio"),s=a*r,o=i*r,l=e.target.naturalWidth,u=e.target.naturalHeight,d=l/u;l>s&&(u=(l=s)/d),u>o&&(l=(u=o)*d),u-=60,this.$set("previewImageSize.width",l),this.$set("previewImageSize.height",u),this.nextTick(function(){return t.ref("previewDialog").__resize()})}}})}),define("ai/components/ImageUploadList/ImageCropper",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ImageCropper.tpl","san-xui","lodash","ai/common/util","./utils"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](r);module.exports=l["default"]({template:u["default"],components:{"xui-dialog":n.Dialog},initData:function(){return{open:!1,lengthLimit:{width:224,height:168},coverSize:400,rect:{x:0,y:0,width:224,height:168},previewRect:{width:224,height:168},image:null}},computed:{dialogWidth:function(){return this.data.get("coverSize")+this.data.get("previewRect.width")+84},prewWrapStyle:function(){var e=this.data.get("previewRect");return["width:"+e.width+"px","height:"+e.height+"px"].join(";")},previewImgStyle:function(){var e=this.data.get("rect"),t=this.data.get("previewRect"),a=this.data.get("imgWrapSize"),i=e.width/t.width;return["width:"+a.width/i+"px","height:"+a.height/i+"px","left:"+-e.x/i+"px","top:"+-e.y/i+"px"].join(";")},imgCoverStyle:function(){var e=this.data.get("coverSize");return["width:"+e+"px","height:"+e+"px"].join(";")},imgWrapSize:function(){var e=this.data.get("image");if(!e)return"";var t=this.data.get("coverSize"),a=e.width,i=e.height;return a>=i?(i/=a/t,a=t):(a/=i/t,i=t),{width:a,height:i}},imgWrapStyle:function(){var e=this.data.get("imgWrapSize"),t=e.width,a=e.height,i=this.data.get("image.src");return i?["width:"+t+"px","height:"+a+"px","background-image:url("+i+")","background-size:"+t+"px "+a+"px"].join(";"):""},previewDes:function(){var e=this.data.get("lengthLimit");return e.width+"*"+e.height+"px"},rectStyle:function(){var e=this.data.get("rect");return["width:"+e.width+"px","height:"+e.height+"px","left:"+e.x+"px","top:"+e.y+"px"].join(";")},rectImgStyle:function(){var e=this.data.get("rect"),t=e.x,a=e.y,i=this.data.get("imgWrapSize");return["position:absolute","width:"+i.width+"px","height:"+i.height+"px","left:"+(-t-1)+"px","top:"+(-a-1)+"px"].join(";")}},detached:function(){this.removeListeners()},methodHook:{show:function(){this.$set("open",!0)},clear:function(){var e=d["default"].assign({},this.initData(),{lengthLimit:this.$get("lengthLimit")});this.$$set(e)},initialize:function(){this.dispossibles=this.dispossibles||[],this.adjustRectSize(),this.bindRectDrag(),this.bindRectBorder()},removeListeners:function(){(this.dispossibles||[]).forEach(function(e){return e.dispose()}),this.dispossibles=[]},bindRectDrag:function(){var e=this,t=o.dragRect(this.ref("rectDrag"),function(){return e.$get("rect")},this.$get("imgWrapSize"),function(t){e.$set("rect",t)});this.dispossibles.push(t)},bindRectBorder:function(){var e=this;["rectLeftTop","rectRightTop","rectLeftBottom","rectRightBottom"].forEach(function(t,a){var i=o.dragRectBorder(e.ref(t),function(){return e.$get("rect")},e.$get("imgWrapSize"),e.$get("lengthLimit"),function(t){e.$set("rect",t)},a+1);e.dispossibles.push(i)})},drawPreview:function(){var e=this.ref("canvas"),t=this.$get("cutScale"),a=this.$get("lengthLimit");if(e){e.width=a.width*t,e.height=a.height*t;var i=e.getContext("2d");i.imageSmoothingEnabled=!0;var n=this.$get("rect"),r=this.$get("image"),s=this.$get("imgWrapSize"),o=r.width/s.width,l=n.x*o,u=n.y*o,d=n.width*o,c=n.height*o;i.drawImage(r,l,u,d,c,0,0,a.width*t,a.height*t)}},handleConfirm:function(){var e=this.$get("imgWrapSize"),t=this.$get("rect"),a=t.x,i=t.y,n=t.width,r=t.height,s=this.$get("image").width/e.width;this.fire("confirm",{x:a*s,y:i*s,width:n*s,height:r*s})},adjustRectSize:function(){var e=this.$get("lengthLimit"),t=e.width,a=e.height;this.$$set({"rect.width":t,"rect.height":a});var i=this.$get("rect"),n=i.width,r=i.height,s=this.$get("imgWrapSize"),o=s.width,l=s.height;if(n>o){var u=o/n;n=o,r*=u}if(r>l){u=l/r;r=l,n*=u}this.$$set({"rect.width":n,"rect.height":r})}},watchHook:{open:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(s.sleep(0));case 2:t?this.initialize():(this.clear(),this.removeListeners());case 3:case"end":return a.stop()}},null,this)}}})}),define("ai/components/ImageUploadList/ImageCropper.tpl",[],function(){return'<template>\n    <xui-dialog on-confirm="handleConfirm" class="ai-img-cropper-dialog" open="{=open=}" width="{{dialogWidth}}" title="图片编辑">\n        <div s-if="image" class="cropper-main">\n            <div style="{{imgCoverStyle}}" class="cover-wrap">\n                \x3c!-- 裁剪的容器 --\x3e\n                <div s-ref="wrap" style="{{imgWrapStyle}}" class="img-wrap">\n                    \x3c!-- 半透明背景 --\x3e\n                    <div class="img-wrap-cover"></div>\n                    \x3c!-- 裁剪框 --\x3e\n                    <div s-ref="rect" style="{{rectStyle}}" class="rect">\n                        \x3c!-- 监听drag的元素 --\x3e\n                        <div s-ref="rectDrag" class="rect-drag">\n                            \x3c!-- 裁剪区域显示原图，跟暗色蒙层做区别 --\x3e\n                            \x3c!-- 用 img 相比容器的 backgrond-image 更流畅 --\x3e\n                            <img style="{{rectImgStyle}}" src="{{image.src}}">\n                            \x3c!-- 裁剪区域有个高亮蒙层 --\x3e\n                            <div class="rect-img-cover"></div>\n                        </div>\n                        \x3c!-- 四个角，用于拉伸 --\x3e\n                        <div s-ref="rectLeftTop" class="left-top"></div>\n                        <div s-ref="rectRightTop" class="right-top"></div>\n                        <div s-ref="rectLeftBottom" class="left-bottom"></div>\n                        <div s-ref="rectRightBottom" class="right-bottom"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="preview-wrap">\n                <div class="preview-tip">图片预览</div>\n                <div style="{{prewWrapStyle}}" class="preview-wrap-rect">\n                    <img src="{{image.src}}" class="preview-img" style="{{previewImgStyle}}">\n                </div>\n                <div class="preview-des">{{ previewDes }}</div>\n            </div>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/components/ImageUploadList/ImageUploadList",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","./ImageCropper","ai/common/util","bat-ria/util","ai/components/ImagePreview","jquery"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](r),p=i["default"](o),f=i["default"](l),m=i["default"](u),h=["jpg","jpeg","png","image/jpg","image/jpeg","image/png"].join(",");module.exports=d["default"]({template:'\n<template>\n    <div class="ai-img-cropper-wrap">\n        <slot name="uploadArea">\n            <div class="upload-area-wrap">\n                <div s-if="loading" class="loading-wrap">\n                    <xui-loading size="middle" />\n                </div>\n                <div s-else on-click="addImage" class="file-selector">\n                    <xui-icon name="plus" />\n                </div>\n                <div class="cropper-des">\n                    <div s-for="item in des">{{item}}</div>\n                </div>\n            </div>\n        </slot>\n        <image-cropper s-ref="cropper" on-confirm="handleUpload"\n            image="{{image}}" sizeLimit="{{sizeLimit}}" lengthLimit="{{lengthLimit}}" previewRect="{{previewRect}}"\n        />\n        <div class="img-upload-list" s-ref="uploadList">\n            <div s-for="item,index in list" class="img-upload-item">\n                <img src="{{item.fileLink}}" >\n                <div class="item-ctl-rect">\n                    <div class="item-ctl-wrap">\n                        <div on-click="preview(index)" class="item-ctl">\n                            <xui-icon name="eye" />\n                            <span class="item-ctl-label">预览</span>\n                        </div>\n                        <div on-click="reupload(index)" class="item-ctl">\n                            <xui-icon name="bcmrefresh" />\n                            <span class="item-ctl-label">重新上传</span>\n                        </div>\n                        <div on-click="delete(index)" class="item-ctl">\n                            <xui-icon name="close" />\n                            <span class="item-ctl-label">删除</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="item-label">{{labels[index]}}</div>\n            </div>\n        </div>\n    </div>\n    <image-preview open="{{preview.open}}" url="{{preview.url}}" />\n</template>',components:{"xui-button":n.Button,"xui-loading":n.Loading,"image-cropper":c["default"],"xui-dialog":n.Dialog,"image-preview":f["default"]},initData:function(){return{url:"",extData:{},list:[],labels:["默认主图","图片2","图片3","图片4","图片5"],des:[],editIndex:-1,sizeLimit:{min:0,minLabel:"0Kb",max:10485760,maxLabel:"10Mb"},max:5,file:null,image:null,lengthLimit:{width:720,height:540},previewRect:{width:224,height:168},loading:!1,preview:{open:!1,url:""}}},methodHook:{addImage:function(){var e=this.data.get(),t=e.list,a=e.max;t.length>=a?this.$toast("最多只能选择"+a+"个图片",{messageType:"error"}):this.editImage(-1)},editImage:function(e){this.$set("editIndex",e),this.showDialog()},showDialog:function(){var e,a,i,n,r,o,l,u,d,c,p,f,m;return t["default"].async(function(g){for(;;)switch(g.prev=g.next){case 0:return e=this.$get("sizeLimit"),a=e.min,i=e.max,n=e.minLabel,r=e.maxLabel,o=this.$get("lengthLimit"),l=o.width,u=o.height,g.next=10,t["default"].awrap(s.openFileDialog({accept:h}));case 10:return d=g.sent,g.next=13,t["default"].awrap(s.readImageFile(d));case 13:if(c=g.sent,p=c.width>=l&&c.height>=u,f=d.size>=a&&d.size<=i,p&&f){g.next=20;break}return m=a<=0?"":"大于"+n,this.$alert({title:"提示",content:"所选图片长度不得小于"+l+"*"+u+"px,且图片文件大小须"+m+"小于"+r+"，图片格式为jpg或png"}),g.abrupt("return");case 20:this.$set("file",d),this.$set("image",c),this.ref("cropper").show();case 23:case"end":return g.stop()}},null,this)},handleUpload:function(a){var i,n,r,o,l,u,d,c;return t["default"].async(function(f){for(;;)switch(f.prev=f.next){case 0:return this.$set("loading",!0),i=p["default"].genRequesters({upload:this.$get("url")}),f.next=4,t["default"].awrap(s.readFileBase64(this.$get("file")));case 4:return n=f.sent,f.next=7,t["default"].awrap(s.getAsyncTuple(i.upload(e["default"]({},this.$get("extData"),a,{image:n}),{"x-silent":!0})));case 7:if(r=f.sent,o=r[0],l=r[1],!o){f.next=15;break}return this.$toast(o.global,{messageType:"error"}),this.$set("loading",!1),this.onChange(),f.abrupt("return");case 15:u=this.data.get(),d=u.list,(c=u.editIndex)<0?d.push(l):d[c]=l,this.$$set({list:d.slice(),loading:!1}),this.onChange();case 21:case"end":return f.stop()}},null,this)},preview:function(e){this.$set("preview",{open:!0,url:this.$get("list")[e].fileLink})},reupload:function(e){this.editImage(e)},"delete":function(e){var t=this,a=m["default"](this.ref("uploadList")).find(".img-upload-item").eq(e);a.fadeOut(function(){var i=t.$get("list");i.splice(e,1),t.$set("list",i.slice()),t.onChange(),a.show()})},onChange:function(){var e=this,t=this.$get("list");this.fire("change",t),this.nextTick(function(){e.dispatch("input-comp-value-changed",{value:t})})}}})}),define("ai/components/ImageUploadList/index",["exports","module","./ImageUploadList","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/ImageUploadList/utils",["exports","lodash","babel-runtime/helpers/interop-require-default"],function(exports,e,t){function a(e){return{x:e.clientX,y:e.clientY}}function i(e,t,i){var n=!1,r={x:0,y:0},s=function(e){n=!0,r=a(e),t()};e.addEventListener("mousedown",s);var o=function(){n=!1};document.addEventListener("mouseup",o);var l=function(e){if(n){var t=a(e),s=t.x-r.x,o=t.y-r.y;i(s,o)}};return document.addEventListener("mousemove",l),{dispose:function(){e.removeEventListener("mousedown",s),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",l)}}}function n(e,t){e.width=~~e.width,e.height=~~e.height,e.width/e.height<t?e.height=~~(e.width/t):e.width=~~(e.height*t)}exports.__esModule=!0,exports.subscribeDrag=i,exports.dragRect=function(e,t,a,n){var s=r["default"].assign({},t());return i(e,function(){s=r["default"].assign({},t())},function(e,t){var i=r["default"].assign({},s);i.x+=e,i.y+=t,i=function(e,t){return(e=r["default"].assign({},e)).x<0&&(e.x=0),e.y<0&&(e.y=0),e.x+e.width>t.width&&(e.x=t.width-e.width),e.y+e.height>t.height&&(e.y=t.height-e.height),e}(i,a),n(i)})},exports.dragRectBorder=function(e,t,a,s,o,l){var u=r["default"].assign({},t());return i(e,function(){u=r["default"].assign({},t())},function(e,t){var i=s.width/s.height,d=r["default"].assign({},u);if(1===l){var c=a.width-d.x-d.width,p=a.height-d.y-d.height;d.x+=e,d.y+=t,d.x<0&&(d.x=0),d.y<0&&(d.y=0),d.width=a.width-c-d.x,d.height=a.height-p-d.y,n(d,i),d.x=a.width-c-d.width,d.y=a.height-p-d.height}else 2===l?(p=a.height-d.y-d.height,d.y+=t,d.y<0&&(d.y=0),d.width+=e,d.x+d.width>a.width&&(d.width=a.width-d.x),d.height=a.height-d.y-p,n(d,i),d.y=a.height-d.height-p):3===l?(c=a.width-d.x-d.width,d.x+=e,d.x<0&&(d.x=0),d.width=a.width-c-d.x,d.height+=t,d.y+d.height>a.height&&(d.height=a.height-d.y),n(d,i),d.x=a.width-d.width-c):(d.width+=e,d.height+=t,n(d,i),d.x+d.width>a.width&&(d.width=a.width-d.x),d.y+d.height>a.height&&(d.height=a.height-d.y),n(d,i));d.width<20||d.height<20||o(d)})};var r=t["default"](e)}),define("ai/components/index",["exports","module","./BreadCrumb","babel-runtime/helpers/interop-require-default","./BuyQpsBucket","./Form","./FormGroup","./FormRow","./Slider","./UploadItem","./FilePreview","./UploadAndPreview","./QpsCalculator/index","./NoSideHead/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=t["default"](e),f=t["default"](a),m=t["default"](i),h=t["default"](n),g=t["default"](r),v=t["default"](s),x=t["default"](o),b=t["default"](l),y=t["default"](u),k=t["default"](d),T=t["default"](c),w={BreadCrumb:p["default"],BuyQpsBucket:f["default"],Form:m["default"],FormGroup:h["default"],FormRow:g["default"],Slider:v["default"],UploadItem:x["default"],FilePreview:b["default"],UploadAndPreview:y["default"],QpsCalculator:k["default"],NoSideHead:T["default"]};module.exports=w}),define("ai/components/InputAddonUnit/index",["exports","module","./InputAddonUnit","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/InputAddonUnit/InputAddonUnit",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","san","san-xui","san-xui/x/components/util"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=n.create("ai-input-addon-unit");module.exports=r["default"]({template:'\n    <div class="{{mainClass}}">\n        <xui-textbox\n            value="{=value=}"\n            disabled="{{disabled}}"\n            type="{{type}}"\n            skin="{{skin}}"\n            placeholder="{{placeholder}}"\n            width="{{width}}"\n            height="{{height}}"\n            min="{{min}}"\n            max="{{max}}"\n            step="{{step}}"\n            on-click="onClick"\n            on-focus="onFocus"\n            on-blur="onBlur"\n            on-input="onInput"\n            />\n        <xui-select\n            s-if="datasource.length"\n            disabled="{{disabled}}"\n            on-change="onSelectChanged"\n            datasource="{{datasource}}"\n            layer-offset-top="{{1}}"\n            layer-offset-left="{{-1}}"\n            layer-width="{{layerWidth}}"\n            value="{=unit=}"\n            />\n    </div>\n',components:{"xui-textbox":i.TextBox,"xui-select":i.Select},computed:{mainClass:function(){var e=s.mainClass(this);return this.data.get("active")&&(e.push("state-active"),e.push(s("active")),e.push(s("x-active"))),e}},initData:function(){return{active:!1,disabled:!1,type:"text",skin:"",placeholder:"",layerWidth:null,width:null,height:null}},dataTypes:{datasource:a.DataTypes.array,unit:a.DataTypes.any,layerWidth:a.DataTypes.number,disabled:a.DataTypes.bool,type:a.DataTypes.string,value:a.DataTypes.string,skin:a.DataTypes.string,placeholder:a.DataTypes.string,width:a.DataTypes.number,height:a.DataTypes.number,min:a.DataTypes.number,max:a.DataTypes.number,step:a.DataTypes.number},onSelectChanged:function(e){var t=e.value;this.fire("change",{value:t})},onFocus:function(e){this.data.set("active",!0),this.fire("focus",e)},onBlur:function(e){this.data.set("active",!1),this.fire("blur",e)},onInput:function(e){var t=e.value;this.data.set("value",t),this.fire("input",{value:t})}})}),define("ai/components/market/ExpressDetail/ExpressDetail",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ExpressDetail.tpl","san-xui","ai/common/enums","moment"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](s);module.exports=o["default"]({template:l["default"],components:{"xui-dialog":n.Dialog,"xui-button":n.Button},filters:{getTextFromVal:function(e,t){var a=t.fromValue(e);return a?a.text:""},getNodeDate:function(e){return u["default"](new Date(e)).format("MM.DD")},getNodeTime:function(e){return u["default"](new Date(e)).format("hh:mm")},getStatusColor:function(e,t){var a=t.fromValue(e);return a?a.color:""}},initData:function(){return{OrderExpressStatus:r.OrderExpressStatus,type:"",orderId:"",expressNum:"",receiptAddress:"",data:{status:"",list:[]},open:!1}},created:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t={list:[]},a={orderId:this.$get("orderId"),expressNum:this.$get("expressNum")},"seller"!==this.$get("type")){i.next=8;break}return i.next=5,e["default"].awrap(this.ajax.getMarketTransactionLogisticsInfo(a));case 5:t=i.sent,i.next=11;break;case 8:return i.next=10,e["default"].awrap(this.ajax.getMarketOrderLogisticsInfo(a));case 10:t=i.sent;case 11:this.$set("data",t);case 12:case"end":return i.stop()}},null,this)},computed:{ifReceived:function(){return this.data.get("data.status")===r.OrderExpressStatus.received}}})}),define("ai/components/market/ExpressDetail/ExpressDetail.tpl",[],function(){return'<template>\n    <xui-dialog title="物流详情" open="{=open=}" width="500" height="199">\n        <div class="ai-market-express-status">\n            <div class="line"></div>\n            <div class="receive-address {{ ifReceived ? \'green\' : \'\' }}">\n                <span class="receive-icon">收</span><span class="receive-address-text">【收货地址】{{receiptAddress}}</span>\n            </div>\n            <div class="node {{index === 0 ? \'current\' : \'normal\'}}" s-for="item, index in data.list">\n                <div class="node-time-wrapper">\n                    <span class="node-date">{{ item.time | getNodeDate }}</span>\n                    <span class="node-time">{{ item.time | getNodeTime }}</span>\n                </div>\n                <span s-if="index === 0" class="node-status {{ data.status | getStatusColor(OrderExpressStatus) }}">{{ data.status | getTextFromVal(OrderExpressStatus) }}</span>\n                <div class="node-detail">\n                    {{ item.detail }}\n                </div>\n            </div>\n        </div>\n    </xui-dialog>\n</template>'}),define("ai/components/market/ExpressDetail/index",["exports","module","./ExpressDetail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/MemoryUploader",["exports","module","babel-runtime/helpers/class-call-check","san-xui","jquery","babel-runtime/helpers/interop-require-default","ai/common/component","lodash","saber-cookie"],function(exports,module,e,t,a,i,n,r,s){var o=i["default"](a),l=i["default"](n),u=i["default"](r),d=i["default"](s),c=365611,p=l["default"]({components:{"xui-webuploader":t.WebUploader},template:'<div>\n                <xui-webuploader\n                    url="{{url}}"\n                    auto-start="{{true}}"\n                    options="{{options}}"\n                    on-uploader-event="uploaderEvent"\n                    on-accept="handleAccept($event)"\n                    on-error="error"\n                    size-limit="{{sizeLimit}}"\n                />\n            </div>',initData:function(){return{url:"",sizeLimit:3145728,events:{},errors:{},before:function(){},success:function(){},fail:function(){},always:function(){},optins:{}}},uploaderEvent:function(e){var t=this.$get("events");"function"==typeof t[e.eventType]&&t[e.eventType].apply(t,e.args),"function"==typeof this[e.eventType]&&this[e.eventType].apply(this,e.args)},uploadBeforeSend:function(e,t,a){u["default"].assign(t,this.$get("data"));var i=d["default"].get("bce-user-info")||"";a.csrftoken=i.replace(/"/g,"");var n=this.$get("before");"function"==typeof n&&n(e,t,a)},handleAccept:function(e){var t=e.ret,a=t.result,i=t.success,n=t.message;if(i){"function"==typeof(r=this.$get("success"))&&r(a)}else{var r;"function"==typeof(r=this.$get("fail"))&&r(n.global)}var s=this.$get("always");"function"==typeof s&&s()},error:function(e){var t=e.type,a=this.$get("errors");a[t]&&this.$toast(a[t],{messageType:"error"})}}),f=function(){function t(a){e["default"](this,t);this.data=u["default"].extend({},{url:"",options:{compress:!1,accept:{title:"Files",extensions:"jpg,jpeg,gif,png",mimeTypes:"image/jpeg,image/gif,image/png"}},sizeLimit:3145728,error:{},before:function(){},success:function(){},fail:function(){},always:function(){}},a),this._initComponent()}return t.prototype._initComponent=function(){this._wrap=o["default"]('<div id="ai-memory-uploader-'+c+++'"></div>'),this.app=new p({data:this.data}),this.app.attach(this._wrap[0]),o["default"]("body").append(this._wrap)},t.prototype.dispose=function(){this._wrap.remove()},t.prototype.showDialog=function(){var e=this;setTimeout(function(){e._wrap.find('input[type="file"]').click()},50)},t}();module.exports=f;var m=new f({});setTimeout(function(){m.dispose()},1e3)}),define("ai/components/NoSideHead/index",["exports","module","./NoSideHead","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/NoSideHead/NoSideHead",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./NoSideHead.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{steps:[],stepIndex:0,backgroundColor:"#f6f7fb"}},backToManage:function(){this.fire("backToManage")}})}),define("ai/components/NoSideHead/NoSideHead.tpl",[],function(){return'<div class="no-side-buy-header" style="background: {{backgroundColor}}">\n    <div on-click="backToManage" class="back-to-manage">\n        <xui-icon name="arrow-left" />\n        <span class="btm-text">\n            <slot name="back-title"></slot>\n        </span>\n    </div>\n    <h4><slot name="title"></slot></h4>\n    <xui-viewstep s-if="steps.length" step-index="{{stepIndex}}" steps="{{steps}}" />\n</div>'}),define("ai/components/NoValueChangeWrapper",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e),i=Math.random();module.exports=a["default"]({template:"\n        <template>\n            <slot/>\n        </template>\n    ",initData:function(){return{value:i}},messages:{"input-comp-value-changed":function(){var e=this.data.get("value");e!==i&&this.dispatch("input-comp-value-changed",{value:e})}}})}),define("ai/components/PagerHeader/index",["exports","module","./PagerHeader","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/PagerHeader/PagerHeader",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n<template>\n    <div class="pager-header">\n        <div on-click="fire(\'back\')" s-if="!noBack" class="back-wrap">\n            <xui-icon name="arrow-left" />\n            <span>{{ back }}</span>\n        </div>\n        <div class="pager-title">{{ title }}</div>\n    </div>\n</template>\n',initData:function(){return{noBack:!1,back:"返回",title:"标题"}},methodHook:{handleBackClick:function(){this.fire("back")}}})}),define("ai/components/QpsCalculator/index",["exports","module","./QpsCalculator","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/QpsCalculator/QpsCalculator",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./QpsCalculator.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{maxEstimatedCall:1e9,qpsDayCount:"",qpsDayHour:"",qpsNeeded:0}},computed:{qpsNeeded:function(){try{var e=~~this.data.get("qpsDayCount"),t=+this.data.get("qpsDayHour");if(e<1||t<1)return 0;var a=~~(e/(60*t*60));return a<0?0:a}catch(i){return 0}}},attached:function(){this.watchRangeInput()},watchRangeInput:function(){var e=this,t=function(t,a,i,n){return function(r){r.length&&(n||(r=~~r),r>a&&(r=a),r<i&&(r=i),e.$set(t,r+""))}};this.watch("qpsDayCount",t("qpsDayCount",this.data.get("maxEstimatedCall"),1)),this.watch("qpsDayHour",t("qpsDayHour",24,1,!0))}})}),define("ai/components/QpsCalculator/QpsCalculator.tpl",[],function(){return'<template>\n    <div>\n        <span>QPS计算公式</span>\n        <xui-tip position="tc">\n            <div style="width:400px;">\n                <p>QPS（query per second）指每秒向服务器发送的请求数量峰值，相当于每个API接口每秒可以允许请求的并发上限量。</p>\n                <p>计算公式：预计日调用量/预计处理时长（单位：秒）= 需求QPS</p>\n                <p style="color:#f00;">请填入日调用量和每天处理小时数，计算您需要的QPS</p>\n            </div>\n        </xui-tip>\n        <span>日调用量</span>\n        <xui-textbox value="{=qpsDayCount=}" min="{{1}}" max="{{maxEstimatedCall}}" width="120" type="number" />\n        <span style="margin-left: 10px;">每天处理</span>\n        <xui-textbox value="{=qpsDayHour=}" min="{{1}}" max="{{24}}" width="120" type="number" />\n        <span>小时</span>\n        <span style="margin-left: 10px;">需求QPS量：</span>\n        <span>{{qpsNeeded}}</span>\n    </div>\n</template>\n'}),define("ai/components/SimpleImgUploadList/index",["exports","module","./SimpleImgUploadList","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/SimpleImgUploadList/SimpleImgUploadList",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./SimpleImgUploadList.tpl","san-xui","jquery","lodash","ai/components/ImagePreview","saber-cookie"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](n),c=t["default"](r),p=t["default"](s),f=t["default"](o);module.exports=l["default"]({template:u["default"],components:{"xui-webuploader":i.WebUploader,"image-preview":p["default"],"xui-loading":i.Loading},computed:{isFull:function(){return this.data.get("list").length>=this.data.get("max")}},initData:function(){return{list:[],loading:!1,url:"/api/ai/s/packageApply/fileUpload",options:{accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/gif,image/jpeg,image/bmp,image/png"}},sizeLimit:10485760,preview:{open:!1,url:""},max:5,error:""}},addImage:function(){this.data.get("isFull")?this.$toast("最多只能选择"+this.$get("max")+"个图片",{messageType:"error"}):this.editImage(-1)},editImage:function(e){this.$set("editIndex",e),this.$set("error",""),this.uploadImg()},uploadImg:function(){var e=this.ref("uploader").el;d["default"](e).find(".webuploader-element-invisible").val("")[0].click()},handleAccept:function(e){var t=e.ret,a=t.result,i=t.success,n=t.message;if(i){var r=this.$get(),s=r.list,o=r.editIndex,l=o;o<0&&(l=s.length),s.splice(l,1,a),this.$set("list",s.slice()),this.onChange()}else this.$set("error",n.global);this.$set("loading",!1)},uploaderEvent:function(e){var t=e.eventType;"function"==typeof this.$get("events."+t)&&this.$get("events."+t).apply(undefined,e.args),"function"==typeof this[t]&&this[t].apply(this,e.args)},uploadBeforeSend:function(e,t,a){this.$set("loading",!0);var i=f["default"].get("bce-user-info")||"";a.csrftoken=i.replace(/"/g,""),c["default"].extend(t,this.$get("extraData"))},onChange:function(){var e=this,t=this.$get("list");this.fire("change",t),this.nextTick(function(){e.dispatch("input-comp-value-changed",{value:t})})},preview:function(e){this.$set("preview",{open:!0,url:this.$get("list")[e].url})},reupload:function(e){this.editImage(e)},"delete":function(e){var t=this,a=d["default"](this.ref("uploadList")).find(".img-upload-item").eq(e);a.fadeOut(function(){var i=t.$get("list");i.splice(e,1),t.$set("list",i.slice()),t.onChange(),a.show()})}})}),define("ai/components/SimpleImgUploadList/SimpleImgUploadList.tpl",[],function(){return'<template>\n    <div class="ai-simple-img-upload-list">\n\n        <div class="img-upload-list" s-ref="uploadList">\n            <div s-for="item,index in list" class="img-upload-item">\n                <img src="{{item.url}}" >\n                <div class="item-ctl-rect">\n                    <div class="item-ctl-wrap">\n                        <div on-click="preview(index)" class="item-ctl">\n                            <xui-icon name="eye" />\n                            <span class="item-ctl-label">预览</span>\n                        </div>\n                        <div on-click="reupload(index)" class="item-ctl">\n                            <xui-icon name="bcmrefresh" />\n                            <span class="item-ctl-label">重新上传</span>\n                        </div>\n                        <div on-click="delete(index)" class="item-ctl">\n                            <xui-icon name="close" />\n                            <span class="item-ctl-label">删除</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="img-upload-item upload-area-wrap" s-if="{{!isFull}}">\n                <div s-if="loading" class="loading-wrap">\n                    <xui-loading size="middle" />\n                </div>\n                <div s-else on-click="addImage" class="file-selector">\n                    <xui-icon name="plus" />\n                </div>\n            </div>\n            <div class="error" s-if="{{error}}">{{error}}</div>\n        </div>\n    </div>\n    <xui-webuploader s-ref="uploader"\n        url="{{url}}"\n        on-accept="handleAccept($event)"\n        error="{=error=}"\n        sizeLimit="{{sizeLimit}}"\n        on-uploader-event="uploaderEvent"\n        options="{{options}}"\n        style="display:none"\n    >\n    </xui-webuploader>\n    <image-preview open="{{preview.open}}" url="{{preview.url}}" />\n</template>'}),define("ai/components/Slider",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","jquery"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:'\n        <div class="ai-slider">\n            <div class="bar-container" style="width:{{width + 18}}px">\n                <div class="bar" on-click="onBarClick($event)">\n                    <div class="selected-bar {{_ctrlClass}}" style="left:{{selectedBarLeft}}px;width:{{selectedBarWidth}}px"></div>\n                </div>\n\n                <div class="controller s-ctrl {{_ctrlClass}}"\n                s-if="{{type == \'range\'}}"\n                on-mousedown="ctrlMousedownHandler($event, \'start\')"\n                style="left:{{startLength}}px"></div>\n\n                <div class="controller e-ctrl {{_ctrlClass}}"\n                s-if="{{type == \'range\'}}"\n                on-mousedown="ctrlMousedownHandler($event, \'end\')"\n                style="left:{{endLength}}px"></div>\n\n                <div class="controller single-ctrl {{_ctrlClass}}"\n                s-if="{{type == \'single\'}}"\n                on-mousedown="ctrlMousedownHandler($event, \'single\')"\n                style="left:{{singleLength}}px"></div>\n\n                <div class="start-label">{{startLabel}}</div>\n                <div class="end-label">{{endLabel}}</div>\n\n                <div class="mark" s-for="item in mark" style="left:{{(item.value - min) * width / (max - min)}}px">\n                    <div class="mark-line" s-if="{{item.showBar}}"></div>\n                    <div class="mark-text">{{item.text}}</div>\n                </div>\n            </div>\n            <div class="text-container" s-if="showInput">\n                <div s-if="{{type == \'range\'}}">\n                    <ui-textbox width="50" value="{{minValue}}" on-blur="onBlur($event, \'min\')"></ui-textbox>\n                    <span> - </span>\n                    <ui-textbox width="50" value="{{maxValue}}" on-blur="onBlur($event, \'max\')"></ui-textbox>\n                </div>\n                <div s-if="{{type == \'single\'}}">\n                    <ui-textbox width="50" value="{{single}}" on-blur="onBlur($event, \'single\')"></ui-textbox>\n                </div>\n            </div>\n        </div>\n    ',computed:{singleLength:function(){return this.data.get("width")*(this.data.get("single")-this.data.get("min"))/(this.data.get("max")-this.data.get("min"))},startLength:function(){return this.data.get("width")*(this.data.get("start")-this.data.get("min"))/(this.data.get("max")-this.data.get("min"))},endLength:function(){return this.data.get("width")*(this.data.get("end")-this.data.get("min"))/(this.data.get("max")-this.data.get("min"))},selectedBarLeft:function(){return"range"==this.data.get("type")?Math.min(this.data.get("startLength"),this.data.get("endLength")):0},selectedBarWidth:function(){return"range"==this.data.get("type")?Math.abs(this.data.get("startLength")-this.data.get("endLength")):this.data.get("singleLength")},minValue:function(){return Math.min(this.data.get("start"),this.data.get("end"))},maxValue:function(){return Math.max(this.data.get("start"),this.data.get("end"))}},initData:function(){return{type:"single",min:0,max:1,step:.01,showInput:!0,start:.3,end:.9,single:.66,width:640,startLabel:"疑似(0.33)",endLabel:"色情(1)",mark:[],_ctrlClass:""}},reviseValue:function(e){var t=this.$get("step"),a=Math.round(e/t);if(0!==e%t&&(e=a*t),t<1&&t>0){var i=t.toString().split(".")[1].length;e=Math.round(e*Math.pow(10,i))/Math.pow(10,i)}return e},fireChange:function(){"range"==this.$get("type")?this.fire("change",[this.$get("start"),this.$get("end")]):this.fire("change",this.$get("single"))},ctrlMousedownHandler:function(e,t){this.setEase0(),this.tempState={x:e.clientX,y:e.clientY,left:this.$get(t+"Length"),type:t},n["default"](document).on("mousemove.ai",this.ctrlMousemoveHandler.bind(this)),n["default"](document).on("mouseup.ai",this.ctrlMouseupHandler.bind(this)),e.preventDefault()},ctrlMousemoveHandler:function(e){var t=e.clientX-this.tempState.x,a=this.tempState.left+t;a<0?a=0:a>this.$get("width")&&(a=this.$get("width"));var i=a/this.$get("width")*(this.$get("max")-this.$get("min"))+this.$get("min");this.$set(this.tempState.type,this.reviseValue(i)),this.fireChange()},ctrlMouseupHandler:function(e){n["default"](document).off("mousemove.ai"),n["default"](document).off("mouseup.ai"),delete this.tempState},onBlur:function(e,t){this.setEase2();var a=undefined,i=this.$get("start"),n=this.$get("end");a="single"===t?"single":"min"===t?i<n?"start":"end":i<n?"end":"start";var r=e.target.getValue(),s=this.$get(a),o=new RegExp("^[0-9]*.{0,1}[0-9]+$"),l=undefined;l=o.test(r)?(l=parseFloat(r,10))<this.$get("min")||l>this.$get("max")?s:this.reviseValue(l):s,this.$set(a,l),e.target.setValue(l),this.fireChange()},onBarClick:function(e){this.setEase2();var t=e.offsetX,a=this.$get("type");n["default"](e.target).hasClass("selected-bar")&&"range"==a&&(t+=Math.min(this.$get("startLength"),this.$get("endLength")));var i=Math.min(t*(this.$get("max")-this.$get("min"))/this.$get("width")+this.$get("min"),this.$get("max")),r=undefined;r="range"==a?Math.abs(this.$get("startLength")-t)>Math.abs(this.$get("endLength")-t)?"end":"start":"single",this.$set(r,this.reviseValue(i)),this.fireChange()},setEase0:function(){this.$set("_ctrlClass","ease0")},setEase2:function(){this.$set("_ctrlClass","ease2")},adjustFirstTwoMarks:function(){if(!(this.$get("mark").length<2)){var e=n["default"](this.el).find(".bar-container>.mark").slice(0,2).children(".mark-text");e.css("margin-left",0);var t=e.eq(0),a=e.eq(1),i=a.offset().left-(t.offset().left+t.width());if(i<6){var r=(6-i)/2;t.css("margin-left",-r+"px"),a.css("margin-left",r+"px")}}}})}),define("ai/components/StarGroup/index",["exports","module","./StarGroup","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/StarGroup/StarGroup",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./StarGroup.tpl","lodash"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports=n["default"]({template:r["default"],initData:function(){return{mode:"show",activeIndex:-1,hoverIndex:-1}},created:function(){},computed:{ifShowMode:function(){return"show"===this.data.get("mode")},starClassList:function(){var e=this.data.get("activeIndex"),t=this.data.get("hoverIndex"),a=this.data.get("ifShowMode");return s["default"].fill(Array(5),"").map(function(i,n){return a&&n-.5<=e&&e<n?"active-half-star":n<=Math.max(e,t)?"active-star":void 0})}},methodHook:{onMouseEnterHandler:function(e){this.$set("hoverIndex",e)},onMouseLeaveHandler:function(){this.$set("hoverIndex",-1)},onClickHandler:function(e){this.$set("activeIndex",e)}}})}),define("ai/components/StarGroup/StarGroup.tpl",[],function(){return'<template>\n    <div class="star-group" on-mouseleave="onMouseLeaveHandler">\n        <template s-for="item,index in starClassList">\n            <span\n                s-if="ifShowMode"\n                class="star-item {{item}}">\n            </span>\n            <span\n                s-else\n                class="star-item star-edit-mode {{item}}"\n                on-mouseenter="onMouseEnterHandler(index)"\n                on-click="onClickHandler(index)">\n            </span>\n        </template>\n    </div>\n</template>'}),define("ai/components/subUser/index",["exports","module","./subUser","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/subUser/subUser",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./subUser.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{open:!0}}})}),define("ai/components/subUser/subUser.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="{{500}}" head="{{false}}" s-ref="sub-user-dialog">\n        <div>\n            抱歉，绑定百度账号的子用户才可使用AI控制台，建议您绑定百度账号后再使用，具体操作方案详见文档。\n        </div>\n        <div slot="foot">\n            <a\n                class="ui-button ui-button-x skin-primary skin-primary-button ui-button-with-label"\n                target="_blank"\n                href="//ai.baidu.com/ai-doc/REFERENCE/Gk3dwjguk"\n            >\n                查看文档\n            </a>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/components/table/table",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./table.tpl","underscore","inf-ui/esui"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i);module.exports=r["default"]({template:s["default"],components:{"esui-tip":n.XTip},initData:function(){return{emptyHtml:"没有数据",data:[],tableData:[],fields:[]}},inited:function(){var e=this;this.watch("data",function(){e.getComputedData()}),this.watch("fields",function(){e.getComputedData()})},getComputedData:function(){for(var e=[],t=this.$get("fields"),a=this.$get("data"),i=0,n=a.length;i<n;i++){var r=a[i];e[i]=[];for(var s=0,l=t.length;s<l;s++){var u=t[s].render(r,i);null==u.props&&(u.props={}),0!==u.props.colSpan&&0!==u.props.rowSpan&&e[i].push(o["default"].extend({content:u.content},u.props))}}this.$set("tableData",e)}})}),define("ai/components/table/table.tpl",[],function(){return'<template>\n    <table>\n        <thead>\n            <tr>\n                <th s-for="item in fields">{{ item.title }}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr s-for="row in tableData">\n                <td s-for="td in row" colSpan="{{td.colSpan ? td.colSpan : 1}}" rowSpan="{{td.rowSpan ? td.rowSpan : 1}}">\n                    {{td.content|raw}}\n                    <esui-tip\n                        class="skin-{{td.tipSkin}} skin-{{td.tipSkin}}-tip"\n                        position-opt=\'{"center":"top"}\'\n                        s-if="td.tip"\n                    >{{td.tip}}</esui-tip>\n                </td>\n\n            </tr>\n        </tbody>\n    </table>\n</template>\n'}),define("ai/components/TextArea",["exports","module","san","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","jquery"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](n);module.exports=r["default"]({template:'\n        <div class="ai-text-area{{overflowed ? \' ai-text-area-overflowed\' : \'\'}}">\n            <xui-textbox multiline placeholder="{{placeholder}}" value="{=value=}" disabled="{{disabled}}" height="{{height}}" width="{{width}}" on-input="onInput" />\n            <div class="ai-text-area-count{{hasScroll ? \' has-scroll\' : \'\'}}" >{{current}}/{{max}}</div>\n        </div>\n    ',name:"text-area",components:{"xui-textbox":i.TextBox},initData:function(){return{value:"",placeholder:"",disabled:!1,max:100,height:110,width:null,hasScroll:!1}},dataTypes:{value:e.DataTypes.string,placeholder:e.DataTypes.string,disabled:e.DataTypes.bool,max:e.DataTypes.number,height:e.DataTypes.number,width:e.DataTypes.number},computed:{current:function(){return this.data.get("value").length},overflowed:function(){return this.data.get("current")>this.data.get("max")}},onInput:function(){var e=this;this.nextTick(function(){var t=s["default"](e.el).find("textarea")[0];parseInt(t.scrollHeight)>parseInt(e.$get("height"))?e.$set("hasScroll",!0):e.$set("hasScroll",!1)}),this.fire("input",{value:this.$get("value")})}})}),define("ai/components/UploadAndPreview",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","jquery","lodash","./FilePreview","./FileErrorDetailDialog"],function(exports,module,e,t,a,i,n,r,s){var o=t["default"](e),l=t["default"](i),u=(t["default"](n),t["default"](r)),d=t["default"](s);module.exports=o["default"]({template:'\n<div class="er-like-file-upload-preview">\n    <xui-webuploader url="{{url}}"\n        on-accept="handleAccept($event)"\n        error="{=error=}"\n        sizeLimit="{{sizeLimit}}"\n        options="{{options}}"\n        disabled="{{!!data.fileId}}"\n        label="{{label}}"\n        s-ref="uploader"\n    >\n    </xui-webuploader>\n    <span s-if="{{!error}}" class="file-tips">\n        仅支持大小{{sizeLimit | sizeFormat}}M以内的{{options.accept.title | toUpper}}文件\n    </span>\n    <file-preview\n        fileName="{{data.fileName}}"\n        fileId="{{data.fileId}}"\n        fileUrl="{{data.fileUrl}}"\n        on-clearFile="clearFile"\n        on-uploader-event="uploaderEvent"\n        s-if="{{data.fileId && filePreview}}"\n    >\n    </file-preview>\n    <error-detail-dialog\n        open="{{fileErrorDialog.open}}"\n        detail="{{fileErrorDialog.detail}}"\n        title="文件校验结果">\n    </error-detail-dialog>\n</div>\n',components:{"xui-webuploader":a.WebUploader,"file-preview":u["default"],"error-detail-dialog":d["default"]},filters:{toUpper:function(e){return e.toUpperCase()},sizeFormat:function(e){return Math.floor(+e/1024/1024)}},initData:function(){return{url:"/ai/upload",error:null,data:{},sizeLimit:5248e3,options:{accept:{title:"TXT"}},events:{},resultHandler:null,filePreview:!0,label:"选择要上传的文件",fileErrorDialog:{open:!1,detail:[]}}},created:function(){var e=this;this.watch("data",function(t){e.fire("change",t)})},handleAccept:function(e){var t=this,a=e.ret,i=a.result,n=a.success,r=a.message;if(n){var s=this.$get("resultHandler");"function"==typeof s&&(i=s(i)),this.$set("data",i),this.fire("uploadFileSuccess",{value:i})}else{var o=r.global;r.detail?(o+=' <a href="javascript:;" class="error-see-detail">校验详情</a>',this.$set("error",o),this.nextTick(function(){l["default"](t.ref("uploader").el).find(".error-see-detail").on("click",function(){t.fire("seeErrorDetail",r.detail),t.$set("fileErrorDialog",{open:!0,detail:r.detail})})})):this.$set("error",o)}},clearFile:function(){var e=this;this.$set("data",{}),this.nextTick(function(){e.fire("clearFile",{value:e.$get("data")})})},uploaderEvent:function(e){var t=e.eventType;"function"==typeof this.$get("events."+t)&&this.$get("events."+t).apply(undefined,e.args),"function"==typeof this[t]&&this[t].apply(this,e.args)}})}),define("ai/components/UploadItem",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","jquery","saber-cookie","lodash"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](i),l=t["default"](n),u=t["default"](r),d={file:"file",button:"button"};module.exports=s["default"]({template:'\n<template>\n    <div class="upload-item">\n        <div s-if="uploadType === UPLOAD_TYPE.file" class="file-upload-item">\n            <div s-if="!data" on-click="invokeUpload" class="item-wrap">\n                <span class="item-title">{{title}}</span>\n            </div>\n            <div s-else class="item-uploaded{{uploadedClasses}}" on-click="onUploadClick">\n                <div s-if="!imgPreview" class="item-name">{{data.name}}</div>\n                <img s-else src="{{data.url}}">\n                <div class="item-ctl-wrap">\n                    <div on-click="download" class="item-ctl">\n                        <span class="item-ctl-label">下载</span>\n                    </div>\n                    <div on-click="invokeUpload" class="item-ctl">\n                        <span class="item-ctl-label">重新上传</span>\n                    </div>\n                    <div on-click="clearFile" class="item-ctl">\n                        <span class="item-ctl-label">删除</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div s-if="uploadType === UPLOAD_TYPE.button" class="button-upload-item">\n            <div s-if="data" class="ui-button ui-button-x ui-button-with-label has-name">\n                <div class="data-name" on-click="download">{{data.name}}</div>\n                <div on-click="clearFile" class="delete-file">\n                    <xui-icon name="close" />\n                </div>\n            </div>\n            <div s-else class="ui-button ui-button-x skin-primary skin-primary-button ui-button-with-label">\n                <div on-click="invokeUpload">{{title}}</div>\n            </div>\n        </div>\n        <xui-webuploader s-ref="uploader"\n            url="{{url}}"\n            on-accept="handleAccept($event)"\n            error="{=error=}"\n            sizeLimit="{{sizeLimit}}"\n            on-uploader-event="uploaderEvent"\n            options="{{options}}"\n        >\n        </xui-webuploader>\n    </div>\n</template>',components:{"xui-webuploader":a.WebUploader},initData:function(){return{url:"/ai/upload",UPLOAD_TYPE:d,uploadType:"file",error:null,data:null,title:"上传文件",sizeLimit:5248e3,extraData:{},options:{},events:{},show:!1,resultHandler:null,imgPreview:!1}},computed:{imgPreview:function(){return this.data.get("imgPreview")?" img-preview":""},uploadedClasses:function(){var e=this.data.get("show"),t=this.data.get("imgPreview");return(e?" show":"")+t}},created:function(){var e=this;this.watch("data",function(t){e.fire("change",t)})},invokeUpload:function(){this.clearFile().click()},onUploadClick:function(){this.$get("show")&&this.download()},clearFile:function(){var e=this;this.$set("data",null),this.nextTick(function(){e.dispatch("input-comp-value-changed",{value:e.$get("data")})});var t=this.ref("uploader").el;return o["default"](t).find(".webuploader-element-invisible").val("")[0]},download:function(){window.open(this.$get("data.url"))},handleAccept:function(e){var t=this,a=e.ret,i=a.result,n=a.success,r=a.message;if(n){var s=this.$get("resultHandler");"function"==typeof s&&(i=s(i)),this.$set("data",i),this.dispatch("input-comp-value-changed",{value:i}),this.dispatch("input-comp-success",i)}else{var l=r.global;r.detail?(l+=' <a href="javascript:;" class="error-see-detail">校验详情</a>',this.$set("error",l),this.nextTick(function(){o["default"](t.ref("uploader").el).find(".error-see-detail").on("click",function(){t.fire("seeErrorDetail",r.detail)})})):this.$set("error",l)}},uploaderEvent:function(e){var t=e.eventType;"function"==typeof this.$get("events."+t)&&this.$get("events."+t).apply(undefined,e.args),"function"==typeof this[t]&&this[t].apply(this,e.args)},uploadBeforeSend:function(e,t,a){var i=l["default"].get("bce-user-info")||"";a.csrftoken=i.replace(/"/g,""),u["default"].extend(t,this.$get("extraData"))}})}),define("ai/components/VodUploader/index",["exports","module","./VodUploader","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/components/VodUploader/VodUploader",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./VodUploader.tpl","san-xui","ai/common/vod","ai/common/util"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](r);module.exports=o["default"]({template:l["default"],components:{"xui-dialog":n.Dialog},initData:function(){return{mediaId:"",stsUrl:"",progress:"",uploading:!1,sizeLimit:125829120,sizeLimitLabel:"120Mb"}},methodHook:{uploadMedia:function(){var t,a,i,n,r,o,l;return e["default"].async(function(d){for(var c=this;;)switch(d.prev=d.next){case 0:return d.next=2,e["default"].awrap(s.openFileDialog({accept:"video/mp4,video/x-m4v,video/*"}));case 2:if(t=d.sent,a=this.data.get(),i=a.sizeLimit,n=a.sizeLimitLabel,!(t.size>i)){d.next=9;break}return this.$toast("视频大小不能超过"+n,{messageType:"error"}),d.abrupt("return");case 9:return this.$$set({uploading:!0,progress:"0%"}),d.next=12,e["default"].awrap(s.getAsyncTuple(u["default"].uploadMediaResource({stsUrl:this.$get("stsUrl"),file:t,onProgress:function(e){var t=e.loaded,a=e.total;if("progress"!==e.type){var i=~~(100*t/a)+"%";c.$$set({progress:i})}}})));case 12:if(r=d.sent,o=r[0],l=r[1],!o){d.next=19;break}return this.deleteFile(),this.$toast("上传失败",{messageType:"error"}),d.abrupt("return");case 19:this.$$set({uploading:!1,progress:"100%",mediaId:l});case 20:case"end":return d.stop()}},null,this)},deleteFile:function(){this.$$set({uploading:!1,progress:"0%",mediaId:""})},reUpload:function(){this.deleteFile(),this.uploadMedia()}}})}),define("ai/components/VodUploader/VodUploader.tpl",[],function(){return'<template>\n    <div class="vod-uploader">\n        <div>{{ hello }}</div>\n        \x3c!-- 如果视频为空 --\x3e\n        <div s-if="!mediaId && !uploading" class="vod-rect" on-click="uploadMedia">\n            <div class="upload-logo"></div>\n            <span class="rect-des">上传视频</span>\n        </div>\n        \x3c!-- 如果正在上传 --\x3e\n        <div s-else-if="uploading" class="vod-rect">\n            <div class="rect-progress-tip"> 进度：{{ progress }} </div>\n            <div class="rect-progress-wrap">\n                <div class="rect-progress" style="width:{{progress}}"></div>\n            </div>\n        </div>\n        \x3c!-- 如果已经上传完毕 --\x3e\n        <div s-else-if="mediaId && !uploading" class="vod-rect done">\n            <div class="vod-done-logo"></div>\n        </div>\n\n        \x3c!-- 右侧描述框 --\x3e\n        <div class="vod-des-wrap">\n            <div>视频大小：不超过{{sizeLimitLabel}}</div>\n            <div style="margin-top:6px;">视频格式：3gp、asf/wmv、flv、mkv、mov/mp3/mp4、mp2、mpeg/mpg、ts/ogg、mts、wma/wma、rm/rmvb、webm</div>\n            <div s-if="mediaId">\n                <a on-click="deleteFile" href="javascript:void(0)">删除</a>\n                <a on-click="reUpload" href="javascript:void(0)" style="margin-left: 10px;">重新上传</a>\n            </div>\n        </div>\n    </div>\n</template>\n'}),define("ai/config",["exports","underscore","babel-runtime/helpers/interop-require-default","er/controller","bat-ria/util","common/config","ai/common/enums","ai/config/api","ai/config/url","ai/config/pages","er/ajax"],function(exports,e,t,a,i,n,r,s,o,l,u){exports.__esModule=!0;var d=t["default"](e),c=t["default"](a),p=t["default"](i),f=t["default"](n),m=t["default"](s),h=t["default"](o),g=t["default"](l),v=t["default"](u),x=v["default"].hooks.beforeSend;v["default"].hooks.beforeSend=function(e,t){"function"==typeof x&&x(e,t),e.setRequestHeader("aip-timezone",(new Date).getTimezoneOffset()/-60)};var b=f["default"].getConfig();b.index="/ai/"+r.AppType.toArray()[0].value+"/overview/index",c["default"].registerAction(g["default"]),d["default"].extend(b.api,m["default"]);var y=p["default"].genRequesters(b.api);exports.api=y;var k=h["default"];exports.Url=k;var T=b;exports.config=T}),define("ai/config/api",["exports","module"],function(exports,module){var e="/api/ai";module.exports={chargeStatus:e+"/charge/status",chargeStop:e+"/charge/stop",runningResourceType:e+"/charge/runningResourceType",qualification:e+"/common/qualification",promoteQuota:e+"/common/promoteQuota",userInfo:e+"/user/info",subUserInfo:e+"/user/subUserInfo",userAgree:e+"/user/agree",settingList:e+"/common/settingList",accountState:e+"/common/accountState",unitUserState:e+"/common/unitUserState",getBosUploadKey:e+"/s/bos/auth",orderDestroy:e+"/order/destroy",usage:e+"/overview/usage",easydlUsage:e+"/easydl/overview/usage",appInfo:e+"/overview/appInfo",overviewApiList:e+"/overview/apiList",overviewEasydlApiList:e+"/easydl/overview/apiList",getQpsDetail:e+"/qps/detail",tipStatus:e+"/overview/tipStatus",tipClose:e+"/overview/tipClose",overviewApplyQuota:e+"/overview/applyQuota",apiQPSLimit:e+"/overview/apiQPSLimit",numPackageList:e+"/overview/packageList",numPackageTips:e+"/overview/packageTips",appList:e+"/app/list",appDelete:e+"/app/delete",appDetail:e+"/app/detail",appApiList:e+"/app/apiList",appSpeechConfig:e+"/speech/asrDetail",appAsrWordSave:e+"/speech/saveAsrWord",getQuota:e+"/speech/getQuota",applyQuota:e+"/speech/applyQuota",speechOfflineApplyStatus:e+"/speech/sdk/tts/applyStatus",speechOfflineAppList:e+"/speech/sdk/appList",speechOfflineApply:e+"/speech/sdk/tts/apply",speechOfflineSDKList:e+"/speech/sdk/tts/list",speechOffLineSdkDownStatus:e+"/speech/sdk/snstatus",speechOffLineSdkDownUrl:e+"/speech/sdk/sdkUrl",faceAuditStatus:e+"/faceAudit/status",faceAuditDetail:e+"/faceAudit/detail",saveFaceAudit:e+"/faceAudit/save",tukuDetail:e+"/tuku/detail",tukuCreate:e+"/tuku/create",tukuEnlarge:e+"/tuku/enlarge",getTukuManageSts:e+"/s/tuku/manage/bosToken",getTukuManageDetail:e+"/s/tuku/manage/detail",getTukuManageLeftVolume:e+"/s/tuku/manage/leftVolume",getTukuManageList:e+"/s/tuku/manage/list",saveTukuManageImg:e+"/s/tuku/manage/addImage",delTukuManageImg:e+"/s/tuku/manage/deleteImage",updateTukuClassAndBrief:e+"/s/tuku/manage/update",apiList:e+"/common/apiList",appSave:e+"/app/save",appTypeList:e+"/app/typeList",biccIndustryTag:e+"/bicc/industryTag",reportAppList:e+"/report/appList",reportData:e+"/report/data",reportApiList:e+"/report/apiList",paidApiList:e+"/charge/paidApiList",purchaseStatus:e+"/charge/purchaseStatus",canPaidApiList:e+"/charge/canPaidApiList",createOrder:e+"/charge/order",getNotice:e+"/charge/notice",apiPrice:e+"/charge/apiPrice",numPackagePrice:e+"/charge/packagePrice",payType:e+"/charge/payType",canBuyPackageApiList:e+"/charge/canBuyPackageApiList",packagePurchaseApply:e+"/charge/packagePurchaseApply",applyStatus:e+"/client/apply/status",applySubmit:e+"/client/apply/submit",applyDetail:e+"/client/apply/detail",applyExtend:e+"/client/apply/extend",applyAppCount:e+"/client/apply/appCount",applyOfficial:e+"/client/apply/official",clientAppList:e+"/client/app/list",clientAppSave:e+"/client/app/save",cilentSdkInfo:e+"/client/sdk/info",clientResourceUrl:e+"/client/resource/url",canBuyQpsApiList:e+"/charge/canBuyQpsApiList",qpsOrderList:e+"/qps/orderList",bosCheck:"/api/bos/order/check_create",bosCreate:"/api/bos/order/create",bosBucketCreate:"/api/bos/bucket/create",bosCdnCreate:"/api/bos/domain/create_official_cdn",imgCensorDetail:e+"/imgCensor/detail",imgCensorStatus:e+"/imgCensor/status",imgCensorSave:e+"/imgCensor/save",imgCensorDefaultDetail:e+"/imgCensor/default",getTextCensorStatus:e+"/textCensor/status",getTextCensorDetail:e+"/textCensor/detail",saveTextCensor:e+"/textCensor/save",resetTextCensor:e+"/textCensor/default",getLexerDictList:e+"/nlp/lexer/dict/list",getLexerDictDetail:e+"/nlp/lexer/dict/detail",getLexerWordsetList:e+"/nlp/lexer/wordset/list",saveLexerWordset:e+"/nlp/lexer/wordset/save",deleteLexerWordset:e+"/nlp/lexer/wordset/delete",effectLexerDict:e+"/nlp/lexer/dict/effect",closeLaxerWordset:e+"/nlp/lexer/wordset/close",openLaxerWordset:e+"/nlp/lexer/wordset/open",getSentimentAppList:e+"/nlp/sentiment/app/list",getSentimentModelList:e+"/nlp/sentiment/model/list",sentimentSaveModel:e+"/nlp/sentiment/model/save",sentimentModifyModel:e+"/nlp/sentiment/model/modify",sentimentTrainModel:e+"/nlp/sentiment/model/train",sentimentEffectModel:e+"/nlp/sentiment/model/effect",sentimentDeleteModel:e+"/nlp/sentiment/model/delete",sentimentVerifyFile:e+"/s/nlp/sentiment/fileupload",getCommentDictList:e+"/nlp/comment/dict/list",getCommentDictDetail:e+"/nlp/comment/dict/detail",getCommentWordsetList:e+"/nlp/comment/wordset/list",saveCommentWordset:e+"/nlp/comment/wordset/save",deleteCommentWordset:e+"/nlp/comment/wordset/delete",effectCommentDict:e+"/nlp/comment/dict/effect",facelibAppList:e+"/facelib/app/list",facelibAppDetail:e+"/facelib/app/detail",facelibGroupList:e+"/facelib/group/list",facelibGroupIdList:e+"/facelib/group/idList",facelibGroupCreate:e+"/facelib/group/create",facelibUserList:e+"/facelib/user/list",facelibUserCopy:e+"/facelib/user/copy",facelibUserMove:e+"/facelib/user/move",facelibUserGroupInfo:e+"/facelib/user/groupInfo",facelibUserDelete:e+"/facelib/user/delete",facelibUserCreate:e+"/facelib/user/create",facelibFaceList:e+"/facelib/face/list",facelibFaceCreate:e+"/facelib/face/create",getStoreUserInfo:e+"/market/common/userInfo",getStoreIndustryList:e+"/market/common/industryList",getMarketProductTypeList:e+"/market/common/productType",getMarketAbility:e+"/market/common/ability",getStoreTechnologyList:e+"/market/common/technologyList",getStorePriceUnitList:e+"/market/common/priceUnit",getMarketOperationStatus:e+"/market/overview/operationStatus",getMarketSettleStatus:e+"/market/overview/settleStatus",getStoreProviderInfo:e+"/market/provider/info",getStoreShopInfo:e+"/market/shop/info",getStoreShopReviewInfo:e+"/market/shop/review/info",getStoreShopDraftInfo:e+"/market/shop/draft/info",getStoreProductList:e+"/market/product/list",saveStoreShopDraft:e+"/market/shop/draft/save",saveStoreShop:e+"/market/shop/submit",releaseStoreProduct:e+"/market/product/release",cancelStoreProduct:e+"/market/product/unrelease",revertMarketProduct:e+"/market/product/revert",deleteStoreProduct:e+"/market/product/delete",getStoreProductReviewInfo:e+"/market/product/review/info",getStoreProductDraftInfo:e+"/market/product/draft/info",saveStoreProductDraft:e+"/market/product/draft/save",saveStoreProduct:e+"/market/product/submit",checkProductName:e+"/market/product/check",saveMarketProduct:e+"/market/product/save",submitMarketProduct:e+"/market/product/submit",getMarketProductParamType:e+"/market/common/paramType",getMarketProductTradeType:e+"/market/common/tradeType",getMarketProductDeliveryType:e+"/market/common/deliveryType",getMarketProductChargeType:e+"/market/common/chargeType",getMarketProductUnitList:e+"/market/common/unitList",getMarketProductStock:e+"/market/stock/list",saveMarketProductStock:e+"/market/stock/replenish",getMarketProductEasyDLList:e+"/market/product/easyDLList",saveFastMarketProductEasyDL:e+"/market/product/draft/fastSave",checkMarketApiSrcUrl:e+"/market/product/api/urlCheck",checkMarketOutUri:e+"/market/product/api/outUriCheck",getMarketOrderList:e+"/market/transaction/list",alterMarketOrder:e+"/market/order/alter",getMarketOrderStatusList:e+"/market/common/orderStatusList",getMarketOrderDetail:e+"/market/transaction/detail",saveMarketOrderDelivery:e+"/market/transaction/delivery",getMarketProductPreview:e+"/market/product/preview",getMarketProviderRegisterDraftInfo1:e+"/market/register/draft/info1",getMarketProviderRegisterDraftInfo2:e+"/market/register/draft/info2",getMarketProviderRegisterDraftInfo3:e+"/market/register/draft/info3",saveMarketProviderRegisterDraftStep1:e+"/market/register/draft/step1",saveMarketProviderRegisterDraftStep2:e+"/market/register/draft/step2",saveMarketProviderRegisterDraftStep3:e+"/market/register/draft/step3",getMarketProviderRegisterEditDraftInfo1:e+"/market/provider/draft/contactinfo",getMarketProviderRegisterEditDraftInfo2:e+"/market/provider/draft/info",getMarketProviderRegisterEditDraftInfo3:e+"/market/shop/draft/info",saveMarketProviderRegisterEditDraftInfo2:e+"/market/provider/draft/save",saveMarketProviderRegisterEditDraftInfo3:e+"/market/shop/draft/save",getMarketProviderRegisterStep1:e+"/market/register/step1",getMarketProviderRegisterStep2:e+"/market/register/step2",getMarketProviderRegisterStep3:e+"/market/register/step3",updateMarketProviderContact:e+"/market/provider/updateContact",updateMarketProviderInfo:e+"/market/provider/submit",updateMarketProviderShopInfo:e+"/market/shop/submit",getMarketProviderDraftInfo:e+"/market/provider/draft/info",saveMarketProviderInfo:e+"/market/provider/register",saveMarketShopRegister:e+"/market/shop/register",updateMarketProviderCompany:e+"/market/provider/updateCompanyInfo",saveMarketProviderDraft:e+"/market/provider/draft/save",sendMarketVefiryCode:e+"/market/common/verifyCode",revertMarketProviderStatus:e+"/market/provider/revert",revertMarketShopStatus:e+"/market/shop/revert",getMarketProviderReviewInfo:e+"/market/provider/review/info",getMarketProductDraftCount:e+"/market/product/draft/count",getMarketInvoiceList:e+"/market/transaction/invoice/list",getMarketInvoiceDetail:e+"/market/transaction/invoice/detail",saveMarketInvoiceDeliveryInfo:e+"/market/transaction/invoice/deliverySave",saveMarketInvoiceDelayInfo:e+"/market/transaction/invoice/delaySave",getMarketSellerBusinessList:e+"/market/business/seller/list",deleteMarketSellerBusiness:e+"/market/business/seller/delete",getMarketSellerBusinessDetail:e+"/market/business/seller/detail",getMarketSellerBusinessOverview:e+"/market/business/seller/overview",updateMarketSellerBusinessStatus:e+"/market/business/seller/updateStatus",getMarketShopHotline:e+"/market/shop/hotline",saveMarketShopHotline:e+"/market/shop/hotLine/save",getMarketExpressList:e+"/market/common/expressList",getMarketTransactionLogisticsInfo:e+"/market/transaction/logisticsInfo",getMarketCategoryList:e+"/market/common/categoryList",getMarketTemplateList:e+"/market/common/templateList",getMarketShopRelatedProduct:e+"/market/shop/productList",linkUploadMarketImage:e+"/market/common/linkUpload",getMarketSettlementBillList:e+"/market/settlement/bill/list",getMarketSettlementStatusList:e+"/market/common/settlementStatusList",getMarketsettlementPeriodList:e+"/market/common/settlementPeriodList",applyMarketSettlement:e+"/market/settlement/bill/apply",getMarketSettlementResultList:e+"/market/settlement/result/list",getMarketSettlementBankReview:e+"/market/settlement/bank/review",getMarketSettlementBankInfo:e+"/market/settlement/bank/info",saveMarketSettlementBankInfo:e+"/market/settlement/bank/submit",getMarketBankList:e+"/market/common/bankList",getMarketScoreDetail:e+"/market/score/detail",getMarketScoreHistory:e+"/market/score/history",getMarketQualificationInfo:e+"/market/provider/qualification",getMarketCommentDetail:e+"/market/comment/detail",getMarketCommentList:e+"/market/comment/list",addMarketComment:e+"/market/comment/add",replyMarketComment:e+"/market/comment/reply",getMarketCommentScore:e+"/market/comment/score",getMarketBuyerAppList:e+"/market/app/list",deleteMarketBuyerApp:e+"/market/app/delete",getMarketBuyerAppDetail:e+"/market/app/detail",getMarketBuyerAppTypeList:e+"/market/common/appTypeList",getMarketBuyerServiceList:e+"/market/service/list",getMarketBuyerServiceDetail:e+"/market/service/detail",getMarketBuyerApiList:e+"/market/app/apiList",saveMarketBuyerApp:e+"/market/app/save",checkMarketBuyerOrder:e+"/market/order/confirmation",getMarketBuyerOrderList:e+"/market/order/list",cancelMarketBuyerOrder:e+"/market/order/cancel",getMarketBuyerAddressInfo:e+"/market/address/info",saveMarketBuyerAddressInfo:e+"/market/address/save",getMarketBuyerAddressDatasource:e+"/market/common/areaList",getMarketBuyerOrderDetail:e+"/market/order/detail",sureMarketBuyerOrderConfirm:e+"/market/order/complete",applyMarketBuyerOrderRefund:e+"/market/order/refund",getMarketBuyerGetDeliveryType:e+"/market/product/getDeliveryType",getMarketBuyerInvoiceInfo:e+"/market/invoice/user/info",saveMarketBuyerInvoiceInfo:e+"/market/invoice/user/save",getMarketBuyerInvoiceAddressInfo:e+"/market/invoice/address/info",saveMarketBuyerInvoiceAddressInfo:e+"/market/invoice/address/save",getMarketBuyerInvoiceApplyList:e+"/market/invoice/applyList",getMarketBuyerInvoiceApplyInfo:e+"/market/invoice/applyInfo",applyMarketBuyerInvoice:e+"/market/invoice/user/apply",getMarketBuyerInvoiceList:e+"/market/invoice/list",getMarketBuyerInvoiceDetail:e+"/market/invoice/detail",cancelMarketBuyerInvoice:e+"/market/invoice/user/cancel",confirmMarketBuyerInvoice:e+"/market/invoice/user/confirm",getMarketOrderLogisticsInfo:e+"/market/order/logisticsInfo",checkMarketBuyerCoupon:e+"/market/order/checkCoupon",getMarketBuyerFunctaglist:e+"/market/common/functaglist",checkMarketBuyerBusinessRelated:e+"/market/business/buyer/related",closeMarketBuyerBusiness:e+"/market/business/buyer/close",getMarketBuyerBusinessList:e+"/market/business/buyer/list",getMarketBuyerBusinessDetail:e+"/market/business/buyer/detail",updateMarketBuyerBusinessStatus:e+"/market/business/buyer/updateStatus",applyResize:e+"/order/applyResize",resourceInfo:e+"/order/resourceInfo",resizeApplyInfo:e+"/order/resizeApplyInfo",resourceQuery:"/api/resource/query_v2",dilatationPrice:"/api/price/dilatation",offLineBaseStatus:e+"/face/apply/baseStatus",offLineBaseInfo:e+"/face/apply/baseInfo",offLineBaseSubmit:e+"/face/apply/baseSubmit",offLineTestStatus:e+"/face/apply/testStatus",offLineTestSubmit:e+"/face/apply/testSubmit",offLineSdkList:e+"/face/sdk/list",offLineUpdateLabel:e+"/face/sdk/updateLabel",offLineSdkStatus:e+"/face/sdk/status",offLineSdkBindDevice:e+"/face/sdk/bindDevice",offLineSdkApplyExtend:e+"/face/sdk/applyExtend",offLineSdkPrice:e+"/charge/apiPrice",offLineSdkBoughtApiCount:e+"/charge/boughtApiCount",offLineSdkDownUrl:e+"/face/sdk/sdkUrl",offLineUserStatus:e+"/face/user/status",offLineAuthList:e+"/face/appauth/list",offLineAuthBaseInfo:e+"/face/appauth/baseInfo",offLineAuthApply:e+"/face/appauth/applyAuthNum",offLineAuthExtend:e+"/face/appauth/applyExtend",offLineAuthCreate:e+"/face/appauth/create",offLineAuthUpdate:e+"/face/appauth/update",packageApplyList:e+"/package/apply/list",packageModelList:e+"/package/model/list",packageIndustryList:e+"/package/industry/list",packageApplyDetail:e+"/package/apply/detail",packageApplyUserInfo:e+"/package/apply/userInfo",packageApplySave:e+"/package/apply/save",packageApplyChange:e+"/package/apply/change",packageEasydlList:e+"/easydl/package/apply/list",packageEasydlCanApply:e+"/easydl/package/apply/canApply",packageEasydlModelUpdate:e+"/easydl/package/apply/updateModel",packageEasydlProjectUpdate:e+"/easydl/package/apply/updateProject",packageEasydlDetail:e+"/easydl/package/apply/detail",packageEasydlSave:e+"/easydl/package/apply/save",packageEasydlModelIdList:e+"/easydl/package/model/list",packageEasydlProjectIdList:e+"/easydl/package/project/list",packageEasydlModelVersionList:e+"/easydl/package/iteration/list",packageEasydlSDKList:e+"/easydl/privatization/apply/list",packageEasydlProjectDetail:e+"/easydl/privatization/apply/detail",packageEasydlProProjectIdList:e+"/easydl/privatization/project/list",packageEasydlProModelIdList:e+"/easydl/privatization/model/list",packageEasydlProjectVersionList:e+"/easydl/privatization/iteration/list",packageEasydlProjectSave:e+"/easydl/privatization/apply/save",easydlSdkProjectDownload:e+"/easydl/privatization/resourceList",easydlAppList:e+"/easydl/service/app/candidate",easydlAppApiList:e+"/easydl/app/apiList",easydlAppServiceList:e+"/easydl/app/serviceList",easydlServiceList:e+"/easydl/service/list",easydlServiceDetail:e+"/easydl/service/detail",easydlServiceAppList:e+"/easydl/service/app/list",easydlServiceAppDetail:e+"/easydl/service/app/detail",easydlServiceAppSave:e+"/easydl/service/app/save",easydlSdkLicenseList:e+"/easydl/sdk/license/list",easydlSdkLicenseUpdateLabel:e+"/easydl/sdk/license/updateLabel",easydlSdkApplyHistory:e+"/easydl/sdk/apply/history",easydlSdkLicenseStatus:e+"/easydl/sdk/license/status",easydlSdkLicenseCreate:e+"/easydl/sdk/license/apply",easydlSdkLicenseExtend:e+"/easydl/sdk/license/extend",easydlSdkDownload:e+"/easydl/sdk/download",easydlMarketList:e+"/easydl/market/list",easydlPackageApplyUserInfo:e+"/easydl/package/apply/userInfo",easydlOverviewApiList:e+"/easydl/overview/serviceList",easydlOverviewPackageList:e+"/easydl/overview/packageList",easydlOverviewPrivatizationList:e+"/easydl/overview/privatizationList",easydlOverviewLicenseList:e+"/edge/overview/licenseList",easydlLiteSdkList:e+"/easydl/sdk/list",easydlSDKOfficialList:e+"/edge/license/officialList",easydlOverviewDataList:e+"/easydl/overview/dataManageList",easydlAppDataList:e+"/easydl/app/dataManageList",easyEdgeSerialNumberList:e+"/edge/license/list",easyEdgeSerialNumberUpdateLabel:e+"/edge/license/updateLabel",easyEdgeSerialNumberApply:e+"/edge/license/generate",easyEdgeMutiSerialNumberApply:e+"/edge/license/apply",easyEdgeSerialNumberExtend:e+"/edge/license/extend",easyEdgeSerialNumberEnlarge:e+"/edge/license/enlarge",easyEdgeSerialNumberExtendUserInfo:e+"/edge/license/extendUserInfo",easyEdgeSerialNumberIndustryList:e+"/edge/industry/list",easyEdgeSerialNumberVerifyCode:e+"/edge/verifyCode",getUnpaidId:e+"/order/unpaidId",privateCanBuy:e+"/private/canBuy",privatePackageList:e+"/private/apply/list",privateModelList:e+"/private/model/list",privateSubmit:e+"/private/apply/submit",privateApplyInfo:e+"/private/apply/info",privateApplySaveModel:e+"/private/apply/save/model",privateApplySaveProject:e+"/private/apply/save/project",privateApplySaveFingerprint:e+"/private/apply/save/fingerprint",privateUserInfo:e+"/private/userInfo",privateIndustryList:e+"/private/industry/list",privateApplyDetail:e+"/private/apply/detail",privateApplyExtend:e+"/private/apply/extend",privateApplyComplete:e+"/private/apply/complete"}}),define("ai/config/charge",["exports","module","ai/common/enums"],function(exports,module,e){var t,a,i=(t={},t[e.AppType.body]="//ai.baidu.com/ai-doc/BODY/mk3cpyhfe",t[e.AppType.imageprocess]="//ai.baidu.com/ai-doc/IMAGEPROCESS/Fk3bclmxa",t[e.AppType.imagerecognition]="//ai.baidu.com/ai-doc/IMAGERECOGNITION/rk3bcxa9e",t);module.exports={chargeTypes:[e.AppType.ocr,e.AppType.antiporn,e.AppType.imagerecognition,e.AppType.imagesearch,e.AppType.speech,e.AppType.easydl,e.AppType.body,e.AppType.imageprocess,e.AppType.nlp],chargeTips:(a={},a[e.AppType.body]="付费开通后，您的使用量不受限制，按调用量后付费，QPS提升至10，具体计费标准请查看\n            <a href="+i[e.AppType.body]+" target='_blank'>产品定价文档</a>",a[e.AppType.imageprocess]="付费开通后，按成功调用次数付费，QPS限制为10。具体计费标准请查看\n            <a href="+i[e.AppType.imageprocess]+" target='_blank'>产品定价文档</a>",a[e.AppType.imagerecognition]="付费开通后，按成功调用次数付费，QPS限制为10。具体计费标准请查看\n            <a href="+i[e.AppType.imagerecognition]+" target='_blank'>产品定价文档</a>",a)}}),define("ai/config/constants",["exports"],function(exports){exports.__esModule=!0;exports.FACE_PACKAGE_TUTORIAL_HIDDEN="FACE_PACKAGE_TUTORIAL_HIDDEN";exports.FACE_PACKAGE_TEST_APPLY_NOTICE="FACE_PACKAGE_TEST_APPLY_NOTICE";exports.BODY_PACKAGE_TUTORIAL_HIDDEN="BODY_PACKAGE_TUTORIAL_HIDDEN";exports.IMAGERECOGNITION_PACKAGE_TUTORIAL_HIDDEN="IMAGERECOGNITION_PACKAGE_TUTORIAL_HIDDEN";exports.FACE_MERGE_QPS_ID=335;exports.INFINITE=-1;exports.SDK_FORMAL_END_TIME="2038.01.01";exports.IMAGE_SEARCH_TUKU_APIIDS_NAMES={ids:[98,103,115,518],names:["searchSame","searchSimilar","product","picbook"]}}),define("ai/config/package",["exports","module","ai/common/enums"],function(exports,module,e){var t,a;module.exports={hasNumPackage:[e.AppType.ocr,e.AppType.speech,e.AppType.face,e.AppType.kg,e.AppType.imagesearch,e.AppType.body,e.AppType.antiporn,e.AppType.nlp,e.AppType.imageprocess,e.AppType.imagerecognition],numPackagePrice:(t={},t[e.AppType.ocr]="//ai.baidu.com/ai-doc/OCR/9k3h7xuv6",t[e.AppType.speech]="//ai.baidu.com/docs#/ASR-Pricing/top",t[e.AppType.face]="//ai.baidu.com/ai-doc/FACE/Ck37c1lmj",t[e.AppType.imagesearch]="//cloud.baidu.com/doc/IMAGESEARCH/s/Ck3bczqk2",t[e.AppType.body]="//ai.baidu.com/ai-doc/BODY/mk3cpyhfe",t[e.AppType.antiporn]="//ai.baidu.com/docs#/contentcensoring/0a023669",t[e.AppType.kg]="//ai.baidu.com/ai-doc/KG/zk3hbfg55",t[e.AppType.nlp]="//ai.baidu.com/ai-doc/NLP/yk6z52dnl",t[e.AppType.imageprocess]="//ai.baidu.com/ai-doc/IMAGEPROCESS/Fk3bclmxa",t[e.AppType.imagerecognition]="//ai.baidu.com/ai-doc/IMAGERECOGNITION/rk3bcxa9e",t),qpsNum:(a={},a[e.AppType.ocr]="10",a[e.AppType.speech]="10",a[e.AppType.face]="10",a[e.AppType.imagesearch]="10",a[e.AppType.body]="10",a[e.AppType.antiporn]="10",a[e.AppType.kg]="10",a[e.AppType.nlp]="20",a[e.AppType.imageprocess]="10",a[e.AppType.imagerecognition]="10",a)}}),define("ai/config/pages",["exports","module","lodash","babel-runtime/helpers/interop-require-default","inf-ui/sanPage","ai/common/enums","ai/config/package"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=i.AppType.toArray().map(function(e){return e.value}),l=[i.AppType.ocr,i.AppType.antiporn,i.AppType.nlp,i.AppType.speech],u="market",d=[i.AppType.easydlLite,i.AppType.easydlPro],c=[].concat(d,[i.AppType.easydlRetail]),p=[i.AppType.easyedge,i.AppType.easydl],f=[{action:"ai/page/overview/index",path:"overview/index",appType:r["default"].xor(o,p)},{action:"ai/page/app/detail/index",path:"app/detail",appType:r["default"].xor(o,p)},{action:"ai/page/app/edit/index",path:"app/edit",appType:r["default"].xor(o,p)},{action:"ai/page/app/edit/index",path:"app/create",appType:r["default"].xor(o,p)},{action:"ai/page/app/detail/imgCensor/index",path:"app/imgCensor"},{action:"ai/page/app/detail/textCensor/index",path:"app/textCensor"},{action:"ai/page/buyQps/index",path:"buyQps/index"},{action:"ai/page/buyNumPackage/index",path:"buyPackage/index",appType:n.hasNumPackage},{action:"ai/page/applyQuota/index",path:"applyQuota/index"},{action:"ai/page/order/create",path:"order/create"},{action:"ai/page/app/list/index",path:"app/list",appType:r["default"].xor(o,p)},{action:"ai/app/detail/asrWord/Action",path:"app/detail/asrWord",legacy:!0},{action:"ai/page/app/created/index",path:"app/created"},{action:"ai/page/report/index",path:"report/index",appType:r["default"].xor(o,p)},{action:"ai/page/app/faceAudit/index",path:"app/faceAudit"},{action:"ai/page/app/success/index",path:"app/success"},{action:"ai/page/tuku/enlarge/index",path:"app/tuku/enlarge/index"},{action:"ai/page/tuku/enlarge/auditing",path:"app/tuku/enlarge/auditing"},{action:"ai/page/tuku/enlarge/failed",path:"app/tuku/enlarge/failed"},{action:"ai/page/tuku/create/index",path:"app/tuku/create/index"},{action:"ai/page/tuku/manage/index",path:"app/tuku/manage/index"},{action:"ai/page/face/facelib/appList/index",path:"facelib/appList"},{action:"ai/page/face/facelib/groupList/index",path:"facelib/groupList"},{action:"ai/page/face/facelib/faceList/index",path:"facelib/faceList"},{action:"ai/page/face/facelib/userList/index",path:"facelib/userList"},{action:"ai/page/offline/index",path:"client/index",appType:i.AppType.face},{action:"ai/page/package/face/index",path:"package/index",appType:i.AppType.face},{action:"ai/page/package/face/apply/index",path:"package/apply",appType:i.AppType.face},{action:"ai/page/package/face/apply/index",path:"package/buy",appType:i.AppType.face},{action:"ai/page/package/body/index",path:"package/index",appType:i.AppType.body},{action:"ai/page/package/body/apply/index",path:"package/apply",appType:i.AppType.body},{action:"ai/page/package/body/apply/index",path:"package/buy",appType:i.AppType.body},{action:"ai/page/package/imagerecognition/index",path:"package/index",appType:i.AppType.imagerecognition},{action:"ai/page/package/imagerecognition/apply/index",path:"package/apply",appType:i.AppType.imagerecognition},{action:"ai/page/package/imagerecognition/apply/index",path:"package/buy",appType:i.AppType.imagerecognition},{action:"ai/page/package/common/detail/index",path:"package/detail",appType:[i.AppType.face,i.AppType.body,i.AppType.imagerecognition]},{action:"ai/page/lexer/dict/list/index",path:"lexer/dict/list",appType:i.AppType.nlp},{action:"ai/page/lexer/dict/detail/index",path:"lexer/dict/detail",appType:i.AppType.nlp},{action:"ai/page/sentiment/dict/list/index",path:"sentiment/dict/list",appType:i.AppType.nlp},{action:"ai/page/sentiment/dict/detail/index",path:"sentiment/dict/detail",appType:i.AppType.nlp},{action:"ai/page/comment/dict/list/index",path:"comment/dict/list",appType:i.AppType.nlp},{action:"ai/page/comment/dict/detail/index",path:"comment/dict/detail",appType:i.AppType.nlp},{action:"ai/page/market/overview/index",path:"overview/index",appType:u},{action:"ai/page/market/shop/info/index",path:"shop/info",appType:u},{action:"ai/page/market/provider/edit/index",path:"shop/edit",appType:u},{action:"ai/page/market/comment/list/index",path:"comment/list",appType:u},{action:"ai/page/market/order/list/index",path:"order/list",appType:u},{action:"ai/page/market/order/detail/index",path:"order/detail",appType:u},{action:"ai/page/market/invoice/list/index",path:"invoice/list",appType:u},{action:"ai/page/market/product/list/index",path:"product/list",appType:u},{action:"ai/page/market/product/publish/publish",path:"product/publish",appType:u},{action:"ai/page/market/product/stock/index",path:"product/stock",appType:u},{action:"ai/page/market/provider/index",path:"provider/index",appType:u},{action:"ai/page/market/business/list/index",path:"business/list",appType:u},{action:"ai/page/market/business/detail/index",path:"business/detail",appType:u},{action:"ai/page/market/provider/edit/index",path:"provider/edit",appType:u},{action:"ai/page/market/provider/modify/index",path:"provider/modify",appType:u},{action:"ai/page/market/provider/register/index",path:"provider/register",appType:u},{action:"ai/page/market/settlement/bill/index",path:"settlement/bill",appType:u},{action:"ai/page/market/settlement/record/index",path:"settlement/record",appType:u},{action:"ai/page/market/settlement/bank/detail/index",path:"settlement/bank/detail",appType:u},{action:"ai/page/market/settlement/bank/edit/index",path:"settlement/bank/edit",appType:u},{action:"ai/page/market-buyer/business/list/index",path:"buyer/business/list",appType:u},{action:"ai/page/market-buyer/service/list/index",path:"buyer/service/list",appType:u},{action:"ai/page/market-buyer/service/detail/index",path:"buyer/service/detail",appType:u},{action:"ai/page/market-buyer/order/detail/index",path:"buyer/order/detail",appType:u},{action:"ai/page/market-buyer/app/manage/list/index",path:"buyer/app/manage/list",appType:u},{action:"ai/page/market-buyer/app/manage/create/index",path:"buyer/app/manage/create",appType:u},{action:"ai/page/market-buyer/app/manage/detail/index",path:"buyer/app/manage/detail",appType:u},{action:"ai/page/market-buyer/order/confirm/index",path:"buyer/order/confirm",appType:u},{action:"ai/page/market-buyer/order/list/index",path:"buyer/order/list",appType:u},{action:"ai/page/market-buyer/address/index",path:"buyer/address/index",appType:u},{action:"ai/page/market-buyer/invoice/applyList/list/index",path:"buyer/invoice/applyList",appType:u},{action:"ai/page/market-buyer/invoice/applyList/confirm/index",path:"buyer/invoice/apply/confirm",appType:u},{action:"ai/page/market-buyer/invoice/list/list/index",path:"buyer/invoice/list",appType:u},{action:"ai/page/market-buyer/invoice/list/detail/index",path:"buyer/invoice/list/detail",appType:u},{action:"ai/page/market-buyer/invoice/info/index",path:"buyer/invoice/info",appType:u},{action:"ai/page/market-buyer/invoice/address/index",path:"buyer/invoice/address",appType:u},{action:"ai/page/bicc/realtime/buy/index",path:"realtime/buy",appType:i.AppType.bicc},{action:"ai/page/bicc/audiofile/buy/index",path:"audiofile/buy",appType:i.AppType.bicc},{action:"ai/page/bicc/realtime/renew/index",path:"realtime/renew",appType:i.AppType.bicc},{action:"ai/page/bicc/audiofile/renew/index",path:"audiofile/renew",appType:i.AppType.bicc},{action:"ai/page/bicc/realtime/upgrade/index",path:"realtime/upgrade",appType:i.AppType.bicc},{action:"ai/page/bicc/audiofile/upgrade/index",path:"audiofile/upgrade",appType:i.AppType.bicc},{action:"ai/page/offline/index",path:"offline/index",appType:[i.AppType.face,i.AppType.speech]},{action:"ai/page/offline/SdkManage/ShopCart/ShopCart",path:"offline/shopCart",appType:i.AppType.face},{action:"ai/page/offline/SpeechAppList/SpeechShopCart/SpeechShopCart",path:"offline/shopCart",appType:i.AppType.speech},{action:"ai/page/package/buyOffical/ocr/index",path:"package/buy",appType:i.AppType.ocr},{action:"ai/page/package/appList/index",path:"package/index",appType:l},{action:"ai/page/package/qualification/index",path:"package/qualification/index",appType:[].concat(l,[i.AppType.face,i.AppType.body,i.AppType.imagerecognition])},{action:"ai/page/easydl/local/qualification/index",path:"package/qualification/index",appType:d},{action:"ai/page/package/apply/index",path:"package/apply/index",appType:l},{action:"ai/page/package/apply/detail/index",path:"package/apply/detail",appType:l},{action:"ai/page/asr/index",path:"speech/asr/index",appType:i.AppType.speech},{action:"ai/page/easydl/index",path:"overview/index",appType:i.AppType.easydl},{action:"ai/page/easydl/subOverview",path:"overview/index",appType:d},{action:"ai/page/easydl/serial/extend/index",path:"serial/extend",appType:d},{action:"ai/page/easydl/local/index",path:"package/index",appType:d},{action:"ai/page/easydl/local/detail/index",path:"package/detail",appType:d},{action:"ai/page/easydl/local/apply/index",path:"package/apply",appType:d},{action:"ai/page/easydl/local/success/index",path:"package/success",appType:d},{action:"ai/page/easydl/retailOverview",path:"overview/index",appType:i.AppType.easydlRetail},{action:"ai/page/easydl/usage/index",path:"usage/index",appType:c},{action:"ai/page/easydl/service/list/index",path:"service/list",appType:c},{action:"ai/page/easydl/service/detail/index",path:"service/detail",appType:c},{action:"ai/page/easydl/sell/list/index",path:"sell/list",appType:[i.AppType.easydlLite,i.AppType.easydlRetail]},{action:"ai/page/offlineSDK/serial/list/index",path:"serial/list",appType:[].concat(d,[i.AppType.easyedge])},{action:"ai/page/offlineSDK/serial/ShopCart/index",path:"serial/shopCart",appType:i.AppType.easydlLite}];module.exports=f.reduce(function(e,t){var a=null==t.appType?i.AppType.toArray().map(function(e){return e.value}):r["default"].isArray(t.appType)?t.appType:[t.appType];return Array.prototype.push.apply(e,a.map(function(e){return function(e){return{type:t.legacy?t.action:s["default"](t.action),path:"/ai/"+e+"/"+t.path}}(e)})),e},[])}),define("ai/config/qpsOverlay",["exports","module","ai/common/enums"],function(exports,module,e){module.exports={hasQPSOverlay:[e.AppType.ocr,e.AppType.nlp,e.AppType.imagerecognition,e.AppType.face]}}),define("ai/config/sidebar",["exports","module","lodash","babel-runtime/helpers/interop-require-default","../common/enums","../common/util","ai/config","../page/market/hooks"],function(exports,module,e,t,a,i,n,r){function s(e,t){return e.map(function(e){return{title:e.title,service:e.service,icon:"icon-cluster",url:e.navs?"javascript:;":"function"==typeof e.url?e.url():/^https?:\/\//i.test(e.url)||"#"===e.url.charAt(0)?e.url:"#/ai/"+t+"/"+e.url,navs:e.navs?s(e.navs,t):null,anchors:e.anchors||[],opened:e.navs&&e.navs.length&&e.opened}})}var o,l=t["default"](e),u=t["default"](i),d=a.AppType.toArray().map(function(e){return e.value}),c=[{title:"概览",service:"overview",url:"overview/index",anchors:["#/ai/speech/applyQuota/index"],appType:l["default"].xor(d,[a.AppType.easydl])},{title:"应用列表",service:"appList",url:"app/list",appType:l["default"].xor(d,[a.AppType.easydl])},{title:"人脸库管理",service:"facelib",url:"facelib/appList",appType:a.AppType.face},{title:"UNIT配置平台",service:"unit",url:n.Url.unitConfig,appType:a.AppType.unit},{title:"我的写作项目",service:"intelligentWriting",url:n.Url.writingProject,appType:a.AppType.intelligentwriting},{title:"监控报表",service:"report",url:"report/index",appType:l["default"].xor(d,[a.AppType.easydl])},{title:"个性化定制",service:"nlp",appType:a.AppType.nlp,opened:!0,navs:[{title:"词法分析定制",service:"lexer",url:"lexer/dict/list"},{title:"情感倾向分析定制",service:"sentiment",url:"sentiment/dict/list"},{title:"评论观点抽取定制",service:"comment",url:"comment/dict/list"}]},{title:"技术文档",service:"doc",url:n.Url.docs,appType:l["default"].xor(d,[a.AppType.easydl])},{title:"SDK下载",service:"sdk",url:n.Url.sdk,appType:l["default"].xor(d,[a.AppType.face,a.AppType.unit,a.AppType.kg,a.AppType.easydl,a.AppType.intelligentwriting])},{title:"离线词&语义设置",service:"asr",url:"speech/asr/index",appType:a.AppType.speech},{title:"服务端SDK下载",service:"sdk",url:n.Url.sdk,appType:a.AppType.face},{title:"离线采集SDK管理",service:"client",url:"client/index",appType:a.AppType.face},{title:"离线识别SDK管理",service:"offline",url:"offline/index",appType:a.AppType.face},{title:"定制化图像识别",service:"easydl",url:"#/ai/easydlLite/service/list",appType:a.AppType.imagerecognition},{title:"离线合成SDK管理",service:"speech",url:"offline/index",appType:a.AppType.speech},{title:"私有部署服务管理",service:"package",url:"package/index",appType:[a.AppType.ocr,a.AppType.face,a.AppType.body,a.AppType.imagerecognition,a.AppType.antiporn,a.AppType.nlp,a.AppType.speech]},{title:"EasyDL总览",service:"easydl",url:"overview/index",appType:a.AppType.easydl},{title:"经典版",service:"base",url:"#/ai/easydlLite/overview/index",appType:a.AppType.easydl},{title:"专业版",service:"pro",url:"#/ai/easydlPro/overview/index",appType:a.AppType.easydl},{title:"零售版",service:"industry",url:"#/ai/easydlRetail/overview/index",appType:a.AppType.easydl}],p=[{title:"概览",service:"overview",url:"overview/index"},{title:"商品管理",service:"product",navs:[{title:"商品列表",service:"productList",url:"product/list"},{title:"商品发布",service:"productPublish",url:"product/publish"},{title:"商品库存",service:"productStock",url:"product/stock"}]},{title:"商机管理",service:"business",url:"business/list"},{title:"订单管理",service:"orderManage",url:"order/list"},{title:"评价管理",service:"commentManage",url:"comment/list"},{title:"结算管理",service:"settlement",navs:[{title:"申请结算",service:"settlementBill",url:"settlement/bill"},{title:"结算记录",service:"settlementRecord",url:"settlement/record"},{title:"收款信息",service:"settlementBank",url:"settlement/bank/detail"}]},{title:"店铺管理",service:"shop",url:"shop/info"},{title:"服务商信息",service:"provider",url:"provider/index"}],f=[{title:"需求管理",service:"business",url:"buyer/business/list"},{title:"已购服务",service:"service",url:"buyer/service/list"},{title:"应用管理",service:"app",url:"buyer/app/manage/list"},{title:"订单列表",service:"order",url:"buyer/order/list"},{title:"发票管理",service:"invoice",navs:[{title:"开具发票",service:"invoicApplyList",url:"buyer/invoice/applyList"},{title:"发票列表",service:"invoiceList",url:"buyer/invoice/list"},{title:"发票信息管理",service:"invoiceInfo",url:"buyer/invoice/info"},{title:"发票寄送地址",service:"invoiceAddress",url:"buyer/invoice/address"}]},{title:"收货地址",service:"address",url:"buyer/address/index"}],m=[{title:"服务商入驻",service:"provider-register",url:"provider/register"},{title:"商品管理",service:"register-product",navs:[{title:"商品列表",service:"productList",url:"product/list"},{title:"商品发布",service:"productPublish",url:"product/publish"},{title:"商品库存",service:"productStock",url:"product/stock"}]}],h=[{title:"序列号管理",service:"serial",url:"serial/list",appType:a.AppType.easyedge}],g=[a.AppType.easydlLite,a.AppType.easydlPro],v=(o={},o[a.AppType.easydlLite]="经典版",o[a.AppType.easydlPro]="专业版",o[a.AppType.easydlRetail]="零售版",o);module.exports=function(e){var t=u["default"].getType();if("market"===t){var i=/market\/([^\/]+)/i.exec(window.location.hash);if(i&&"buyer"===i[1])return{hideActions:["#/ai/"+t+"/buyer/order/confirm","#/ai/market/buyer/order/detail"],config:[{title:"AI 市场买家版"}].concat(s(e||f,t))};return/market\/provider\/register/.test(window.location.hash)||!r.getCacheProviderAvailable()?{hideActions:["#/ai/market/provider/register"],config:[{title:"AI 市场"}].concat(s(e||m,t))}:{hideActions:["#/ai/market/product/publish","#/ai/market/order/detail","#/ai/market/provider/modify"],config:[{title:"AI 市场"}].concat(s(e||p,t))}}return"easyedge"===t?{hideActions:[],config:[{title:"EasyEdge端计算平台"}].concat(s(e||h,t))}:~[].concat(g,[a.AppType.easydlRetail]).indexOf(t)?{hideActions:[].concat([].concat(g,[a.AppType.easydlRetail]).reduce(function(e,t){return e.push("#/ai/"+t+"/buyQps/index"),e.push("#/ai/"+t+"/order/create"),e.push("#/ai/"+t+"/buyPackage/index"),e.push("#/ai/"+t+"/app/success"),e.push("#/ai/"+t+"/app/tuku/enlarge/auditing"),e.push("#/ai/"+t+"/app/tuku/enlarge/failed"),e},[]),["#/ai/easydlLite/serial/shopCart"]),config:[{title:'<div action-url="/ai/easydl/overview/index" action-type="back">\n                            <i class="iconfont icon-arrow-left" style="color:#666;font-size:14px"/>\n                            返回EasyDL总览\n                        </div>'}].concat(s(e||function(e){return[{title:v[e],service:e,url:"overview/index",appType:[].concat(g,[a.AppType.easydlRetail])},{title:"公有云服务管理",service:"publicCloud",appType:g,navs:[{title:"应用列表",service:"appList",url:"app/list"},{title:"权限管理",service:"easydlAuth",url:"service/list"},{title:"用量统计",service:"easydlUsage",url:"usage/index"},{title:"监控报表",service:"report",url:"report/index"},{title:"技术文档",service:"doc",url:n.Url.docs}].concat(e===a.AppType.easydlLite?[{title:"售卖服务",service:"sell",url:"sell/list"}]:[])},{title:"私有服务器部署管理",service:"package",url:"package/index",appType:g},{title:"设备端服务管理",service:"serial",url:"serial/list",appType:g},{title:"应用列表",service:"appList",url:"app/list",appType:a.AppType.easydlRetail},{title:"用量统计",service:"easydlUsage",url:"usage/index",appType:a.AppType.easydlRetail},{title:"监控报表",service:"report",url:"report/index",appType:a.AppType.easydlRetail},{title:"定制商品检测服务",service:"customMade",appType:a.AppType.easydlRetail,navs:[{title:"权限管理",service:"easydlAuth",url:"service/list"},{title:"技术文档",service:"doc",url:n.Url.docs},{title:"售卖服务",service:"sell",url:"sell/list"}]},{title:"标准商品检测服务",service:"normalTest",appType:a.AppType.easydlRetail,navs:[{title:"技术文档",service:"doc",url:"https://"+n.Url[e].retailNormal}]},{title:"货架拼接",service:"shelf",appType:a.AppType.easydlRetail,navs:[{title:"技术文档",service:"doc",url:"https://"+n.Url[e].retailShelf}]}]}(t).reduce(function(e,a){return(null==a.appType||t===a.appType||~a.appType.indexOf(t))&&e.push(a),e},[]),t))}:{hideActions:[].concat(d.reduce(function(e,t){return e.push("#/ai/"+t+"/buyQps/index"),e.push("#/ai/"+t+"/order/create"),e.push("#/ai/"+t+"/buyPackage/index"),e.push("#/ai/"+t+"/app/success"),e.push("#/ai/"+t+"/app/tuku/enlarge/auditing"),e.push("#/ai/"+t+"/app/tuku/enlarge/failed"),e.push("#/ai/"+t+"/package/buy"),e},[]),["#/region/404","#/error/404","#/ai/bicc/realtime/buy","#/ai/bicc/realtime/renew","#/ai/bicc/realtime/upgrade","#/ai/bicc/audiofile/buy","#/ai/bicc/audiofile/renew","#/ai/bicc/audiofile/upgrade","#/ai/face/offline/shopCart","#/ai/speech/offline/shopCart"]),config:[{title:a.AppType.getTextFromValue(t)}].concat(s(e||c.reduce(function(e,a){return(null==a.appType||t===a.appType||~a.appType.indexOf(t))&&e.push(a),e},[]),t))}}}),define("ai/config/upload",["exports","module"],function(exports,module){module.exports={formData:{},swf:require.toUrl("webuploader/Uploader.swf"),server:"/ai/upload",chunked:!1,threads:1,auto:!0,disableGlobalDnd:!0,fileNumLimit:1,sendAsBinary:!0,fileSingleSizeLimit:5242880,accept:{title:"Files",extensions:"txt",mimeTypes:"image/jpeg,image/pjpeg,image/bmp,image/x-windows-bmp,image/png,image/gif,text/plain,application/x-rar-compressed,application/octet-stream,application/zip,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"}}}),define("ai/config/url",["exports","module","ai/common/enums","ai/common/util","common/flags","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=i["default"](a),r={sdk:function(){var a=e.AppType.aliasIndex[t.getType()].sdk||"";return"https://ai.baidu.com/sdk"+a},docs:function(){var a=undefined,i=t.getType(),n=e.AppType.aliasIndex[i];if(~[e.AppType.easydlLite,e.AppType.easydlPro,e.AppType.unit,e.AppType.intelligentwriting,e.AppType.easydlRetail].indexOf(i)){var r=n.docs||"";i===e.AppType.intelligentwriting&&(i="NLP"),~[e.AppType.easydlLite,e.AppType.easydlPro,e.AppType.easydlRetail].indexOf(i)&&(i="easydl"),a="https://ai.baidu.com/ai-doc/"+i.toUpperCase()+"/"+r}else{a="https://cloud.baidu.com/doc/"+(n.docsCloud||i.toUpperCase())+"/index.html"}return a},video:"https://ai.baidu.com/support/video",download:"/ai/download",unitConfig:"https://unit.baidu.com",imgCensor:"https://ai.baidu.com/docs#/ImageCensoring-API/top",asrAnalysis:"//ai.baidu.com/docs#/ASR-Query-Protocol/top",asrWord:"//ai.baidu.com/docs#/ASR-API/top",writingProject:"https://ai.baidu.com/article/external/projectlist",cloudCalculator:function(){return"https://cloud.baidu.com/calculator.html#/"+e.AppType.aliasIndex[t.getType()].calculator+"/price"},qualifyResult:"/qualify/#/qualify/result",personalQualify:"/qualify/#/qualify/index",enterpriseQualify:"/qualify/#/qualify/company",individualQualify:"/qualify/#/qualify/person",ticket:"//ticket.bce.baidu.com/#/ticket/create",recharge:"/finance/#/finance/account/recharge",imageTextDemo:"https://ai.baidu.com/file/062847A43EA24418B17F18740E57917E",politicianDemo:"https://ai.baidu.com/file/DB4236F8D8FC4F22AF91255EB280BC34",htApply:"https://cloud.baidu.com/survey/ITMAApply.html",arContent:"https://dumix.baidu.com/content/",store:{home:n["default"].is_online?"https://aim.baidu.com":"http://cp01-sys-rath4-c32-qa283.cp01.baidu.com:8012",snapshot:n["default"].is_online?"https://aim.baidu.com/snapshot":"http://cp01-sys-rath4-c32-qa283.cp01.baidu.com:8012/snapshot",provider:n["default"].is_online?"https://aim.baidu.com/provider":"http://cp01-sys-rath4-c32-qa283.cp01.baidu.com:8012/provider",product:n["default"].is_online?"https://aim.baidu.com/product":"http://cp01-sys-rath4-c32-qa283.cp01.baidu.com:8012/product",enterContract:"https://ai.baidu.com/docs#/AI_Market_ContractProcess",operateMethod:"http://ai.baidu.com/docs#/AI_Marketing_methods/top",registerHandbook:"https://ai.baidu.com/support/news?action=detail&id=1095",providerEnterContract:"https://ai.baidu.com/ai-doc/AIMARKET/Kk3e52psy",scoreRules:"https://ai.baidu.com/support/news?action=detail&id=1659",cloudMarketProviderEnterContract:"https://cloud.baidu.com/doc/Market/s/ojy8o3peq"},bicc:{price:"https://cloud.baidu.com/doc/ITMA/BICC-ASR-Pricing.html#.E4.BB.B7.E7.9B.AE.E8.A1.A8",upgrade:"https://cloud.baidu.com/doc/ITMA/BICC-ASR-Pricing.html#.E5.8D.87.E7.BA.A7",renew:"https://cloud.baidu.com/doc/ITMA/BICC-ASR-Pricing.html#.E7.BB.AD.E8.B4.B9",apiDoc:"https://ai.baidu.com/docs#/BICC-ASR-API/top"},smartApp:{doc:"https://smartprogram.baidu.com/docs/introduction/register/index.html",console:"https://smartprogram.baidu.com/mappconsole/main/admin?appId=${appId}"},face:{facekit:"https://ai.baidu.com/facekit/home",price:"//ai.baidu.com/docs#/Face-Pricing/top","private":"//cloud.baidu.com/doc/FACE/s/Yk2lol1rc","package":{install:"//cloud.baidu.com/doc/FACE/s/bk25rd1ur",device:"//cloud.baidu.com/doc/FACE/s/9k25rd16a"}},faceOfflineSdk:{doc:{dev:"https://ai.baidu.com/docs#/Face-Offline-SDK/",active:"https://ai.baidu.com/docs#/Face-Offline-SDK-Activation/top",windows:"https://ai.baidu.com/docs#/Face-Offline-SDK-Windows",csharp:"https://ai.baidu.com/docs#/Face-Offline-SDK-Csharp/top",linux:"https://ai.baidu.com/docs#/Face-Offline-SDK-Linux",android:"https://ai.baidu.com/docs#/Face-Offline-SDK-Android",windowsCpp:"//ai.baidu.com/docs#/Face-Offline-SDK-Windows-Cpp/top",windowsCsharp:"//ai.baidu.com/docs#/Face-Offline-SDK-Windows-Csharp/top",windowsJava:"//ai.baidu.com/docs#/Face-Offline-SDK-Windows-Java/top",linuxCpp:"//ai.baidu.com/docs#/Face-Offline-SDK-Linux-Cpp/top",androidOld:"//ai.baidu.com/docs#/Face-Offline-SDK-Android-Old/top",passageDemo:"//ai.baidu.com/docs#/Face-Offline-SDK-Android-FacePassage-Demo",printDemo:"//ai.baidu.com/docs#/Face-Offline-SDK-Android-FacePrint-Demo/top",adDemo:"//ai.baidu.com/docs#/Face-Offline-SDK-Android-FaceAD-Demo/top"},qa:"https://ai.baidu.com/docs#/Face-Offline-SDK-QA",sdkPrice:"https://cloud.baidu.com/doc/FACE/index.html"},easypack:{deviceTool:"//private-ai-online.bj.bcebos.com/finger-tool/baidu_finger_tools_v2.1.1.zip?authorization=bce-auth-v1/60aed5ed84e54cbf8b3908159305f0e6/2019-12-18T07:30:32Z/-1/host/d319020b234c837134a1e096b8ae152b2c51fbb96ba9d1a71d39669006130a4f",doc:"//ai.baidu.com/docs#/PrivateAI_FingerprintExtractionTool/top"},easyedge:{activation:"//ai.baidu.com/docs#/EasyEdge_INTRO/72efd34d",create:"//ai.baidu.com/easyedge/app/models",sdks:"//ai.baidu.com/easyedge/app/sdks"},ocr:{price:"//ai.baidu.com/ai-doc/OCR/9k3h7xuv6"},smartAsr:"//ai.baidu.com/smartasr/model",getMd5:"//client-sdk.bj.bcebos.com/doc/face/%E5%AE%89%E5%8D%93%E7%AD%BE%E5%90%8DMD5%E6%96%87%E6%A1%A3.pdf?authorization=bce-auth-v1%2F529dc59c70314dbeabf86d3972c66238%2F2017-10-19T11%3A36%3A18Z%2F-1%2Fhost%2F6d75b25bc8ddfd3de745efadf25b6f2504d6cafe5aada6fcffad6bc8e651ab29",speech:{price:"//ai.baidu.com/docs#/ASR-Pricing/top",contact:"//ai.baidu.com/consultation/cooperation?referrerUrl=/tech/speech/tts",offline:{doc:"//private-ai-online.bj.bcebos.com/百度离线语音合成SDK开发文档.zip?authorization=bce-auth-v1/60aed5ed84e54cbf8b3908159305f0e6/2019-09-19T09:18:49Z/-1/host/661611335b9c73c3d1a7bb2372ff7e20358f0606d0a75cc94901b0e54f3bc607",activeDoc:"//ai.baidu.com/support/news?action=detail&id=1598",android:"//ai.baidu.com/docs#/TTS-Offline-Android-SDK/top",ios:"//ai.baidu.com/docs#/TTS-Offline-iOS-SDK/top"}},antiporn:{price:"//ai.baidu.com/ai-doc/ANTIPORN/lk3h6x7if",platform:"//ai.baidu.com/censoring",easydl:"//console.bce.baidu.com/ai/#/ai/easydl/overview/index",combinPrice:"//ai.baidu.com/ai-doc/ANTIPORN/vk42xu6un"},easydlRetail:{retail:"//ai.baidu.com/easydl/retail",retailModel:"//ai.baidu.com/easydl/app/1001/models",retailModelDoc:"//ai.baidu.com/ai-doc/EASYDL/Gk38n3icn",retailNormal:"//ai.baidu.com/ai-doc/EASYDL/nk38n3hhu",retailShelf:"//ai.baidu.com/ai-doc/EASYDL/Vk38n3h23",retailData:"//ai.baidu.com/ai-doc/EASYDL/Fk38n3lij",activation:"//ai.baidu.com/docs#/EasyDL-VIS-Classification-SDK/8539c0fd",create:"//ai.baidu.com/easydl/app/1/models/deploy",doc:"//ai.baidu.com/docs#/EasyDL-VIS-Classification-SDK/top"},easydlPro:{activation:"//cloud.baidu.com/doc/EASYDL/s/4k204t4p8/#%E6%BF%80%E6%B4%BB%E4%BD%BF%E7%94%A8sdk",create:"//ai.baidu.com/easydl/app/1/models/deploy",doc:"//cloud.baidu.com/doc/EASYDL/s/4k204t4p8",api:{localDoc:"//cloud.baidu.com/doc/EASYDL/s/uk204t480"},sdk:{localDoc:"//cloud.baidu.com/doc/EASYDL/s/uk204t480",activate:"//cloud.baidu.com/doc/EASYDL/s/uk204t480"},official:"//ai.baidu.com/easydl/pro"},easydlLite:{activation:"//ai.baidu.com/docs#/EasyDL-VIS-Classification-SDK/8539c0fd",create:"//ai.baidu.com/easydl/app/1/models/deploy",doc:"//ai.baidu.com/docs#/EasyDL-VIS-Classification-SDK/top",api:{localDoc:"//ai.baidu.com/docs#/EasyDL_VIS_Classification_EasyPack/top"},sdk:{localDoc:"//ai.baidu.com/ai-doc/EASYDL/Vk3qy992h",activate:"//ai.baidu.com/ai-doc/EASYDL/Vk3qy992h"},official:"//ai.baidu.com/easydl/lite"},easydl:{doc:"//ai.baidu.com/ai-doc/EASYDL/pk38n3odv"},easydlSDKPrice:{sdkPrice:"//ai.baidu.com/ai-doc/EASYDL/8k38n2v77"},noPriceApi:{antiporn:"//ai.baidu.com/ai-doc/ANTIPORN/lk3h6x7if",ocr:"//ai.baidu.com/ai-doc/OCR/gk3h7xvar#iocr财会版"},tuku:{doc:"//ai.baidu.com/ai-doc/IMAGESEARCH/Uk3bczr77"},body:{"package":{intro:"//ai.baidu.com/tech/body/private",install:"//cloud.baidu.com/doc/BODY/s/Ek2lhdqxl",productIntro:"//cloud.baidu.com/doc/BODY/s/1k2lh5owm",deploy:"//cloud.baidu.com/doc/BODY/s/Ek2lhdqxl",api:"//cloud.baidu.com/doc/BODY/s/Ok2lhi5cm"}},imagerecognition:{"package":{productIntro:"//ai.baidu.com/tech/vehicle",fingerprint:"//ai.baidu.com/ai-doc/PRIVATEAI/sk3d6jccg",install:"//ai.baidu.com/ai-doc/VEHICLE/6k3hb3mk3",anchorproductIntro:"//ai.baidu.com/ai-doc/VEHICLE/5k3hb3mcg",deploy:"//ai.baidu.com/ai-doc/VEHICLE/6k3hb3mk3",api:"//ai.baidu.com/ai-doc/VEHICLE/hk3hb3m4i"}}};module.exports=r}),define("ai/models/market/apiInfoLanguages",["exports","module"],function(exports,module){module.exports=[{title:"Bash",content:"curl -i -k 'https://aip.baidubce.com/rest/2.0/aimarket/general?access_token=[token]' --data '{\"image\": \"xxx\"}' -H 'Content-Type:application/json; charset=UTF-8'"},{title:"PHP",content:"class Example\n{\n\n    /**\n     * 通用物体识别 advanced_general api url\n     * @var string\n     */\n    private $advancedGeneralUrl = 'https://aip.baidubce.com/rest/2.0/aimarket/general';\n\n    public function advancedGeneral($image, $options=array())\n    {\n\n        $data = array();\n\n        $data['image'] = base64_encode($image);\n\n        $data = array_merge($data, $options);\n\n        return $this->request_post($this->advancedGeneralUrl, $data);\n    }\n\n    /**\n     * 发起http post请求(REST API), 并获取REST请求的结果\n     * @param string $url\n     * @param string $param\n     * @return - http response body if succeeds, else false.\n     */\n    public function request_post($url = '', $param = '')\n    {\n        if (empty($url) || empty($param)) {\n            return false;\n        }\n\n        $postUrl = $url . \"?access_token=【token】\";\n        $curlPost = $param;\n        // 初始化curl\n        $curl = curl_init();\n        curl_setopt($curl, CURLOPT_URL, $postUrl);\n        curl_setopt($curl, CURLOPT_HEADER, 0);\n        // 要求结果为字符串且输出到屏幕上\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\n        // post提交方式\n        curl_setopt($curl, CURLOPT_POST, 1);\n        curl_setopt($curl, CURLOPT_POSTFIELDS, $curlPost);\n        // 运行curl\n        $data = curl_exec($curl);\n        curl_close($curl);\n\n        return $data;\n    }\n}"},{title:"Python",content:"import urllib2, json, base64\n\nclass Example(object):\n\n    '''\n    语言处理基础技术\n    '''\n\n    __lexerUrl = \"https://aip.baidubce.com/rest/2.0/aimarket/general\"\n\n    def lexer(self, image, options=None):\n        \"\"\"\n            词法分析\n        \"\"\"\n        options = options or {}\n        data = {}\n        data[\"image\"] = base64.b64encode(image).decode()\n        data.update(options)\n        return self._request(data)\n\n    def _request(self, data):\n        '''\n        发送请求\n        :param url:\n        :param data:\n        :return dict\n        '''\n        access_token = \"\"\n        request_url = self.__lexerUrl + \"?access_token=\" + access_token\n        request = urllib2.Request(url=request_url, data=json.dumps(data))\n        request.add_header('Content-Type', 'application/json')\n        response = urllib2.urlopen(request)\n        content = response.read()\n\n        return content or {}"},{title:"Java",content:'package com.baidu.ai.aip;\n\nimport com.baidu.ai.aip.utils.HttpUtil;\nimport com.baidu.ai.aip.utils.GsonUtils;\n\nimport java.util.*;\n\n/**\n* 人脸检测与属性分析\n*/\npublic class FaceDetect {\n\n    /**\n    * 重要提示代码中所需工具类\n    * FileUtil,Base64Util,HttpUtil,GsonUtils请从\n    * https://ai.baidu.com/file/658A35ABAB2D404FBF903F64D47C1F72\n    * https://ai.baidu.com/file/C8D81F3301E24D2892968F09AE1AD6E2\n    * https://ai.baidu.com/file/544D677F5D4E4F17B4122FBD60DB82B3\n    * https://ai.baidu.com/file/470B3ACCA3FE43788B5A963BF0B625F3\n    * 下载\n    */\n    public static String detect() {\n        // 请求url\n        String url = "https://aip.baidubce.com/rest/2.0/aimarket/general";\n        try {\n            Map<String, Object> map = new HashMap<>();\n            map.put("image", "xxx");\n\n            String param = GsonUtils.toJson(map);\n\n            // 注意这里仅为了简化编码每一次请求都去获取access_token，线上环境access_token有过期时间， 客户端可自行缓存，过期后重新获取。\n            String accessToken = "[调用鉴权接口获取的token]";\n\n            String result = HttpUtil.post(url, accessToken, "application/json", param);\n            System.out.println(result);\n            return result;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    public static void main(String[] args) {\n        FaceDetect.detect();\n    }\n}'},{title:"C++",content:'#include <iostream>\n#include <curl/curl.h>\n\n// libcurl库下载链接：https://curl.haxx.se/download.html\n// jsoncpp库下载链接：https://github.com/open-source-parsers/jsoncpp/\nconst static std::string request_url = "https://aip.baidubce.com/rest/2.0/aimarket/general";\nstatic std::string detect_result;\n/**\n * curl发送http请求调用的回调函数，回调函数中对返回的json格式的body进行了解析，解析结果储存在全局的静态变量当中\n * @param 参数定义见libcurl文档\n * @return 返回值定义见libcurl文档\n */\nstatic size_t callback(void *ptr, size_t size, size_t nmemb, void *stream) {\n    // 获取到的body存放在ptr中，先将其转换为string格式\n    detect_result = std::string((char *) ptr, size * nmemb);\n    return size * nmemb;\n}\n/**\n * 人脸检测与属性分析\n * @return 调用成功返回0，发生错误返回其他错误码\n */\nint detect(std::string &json_result, const std::string &access_token) {\n    std::string url = request_url + "?access_token=" + access_token;\n    CURL *curl = NULL;\n    CURLcode result_code;\n    int is_success;\n    curl = curl_easy_init();\n    if (curl) {\n        curl_easy_setopt(curl, CURLOPT_URL, url.data());\n        curl_easy_setopt(curl, CURLOPT_POST, 1);\n        curl_slist *headers = NULL;\n        headers = curl_slist_append(headers, "Content-Type:application/json;charset=UTF-8");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);\n        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "{"image": "xxx"}");\n        result_code = curl_easy_perform(curl);\n        if (result_code != CURLE_OK) {\n            fprintf(stderr, "curl_easy_perform() failed: %s\n",\n                    curl_easy_strerror(result_code));\n            is_success = 1;\n            return is_success;\n        }\n        json_result = detect_result;\n        curl_easy_cleanup(curl);\n        is_success = 0;\n    } else {\n        fprintf(stderr, "curl_easy_init() failed.");\n        is_success = 1;\n    }\n    return is_success;\n}'},{title:"C#",content:'using System;\nusing System.IO;\nusing System.Net;\nusing System.Text;\nusing System.Web;\n\nnamespace com.baidu.ai\n{\n    public class FaceDetect\n    {\n        // 人脸检测与属性分析\n        public static string detect()\n        {\n            string token = "[调用鉴权接口获取的token]";\n            string host = "https://aip.baidubce.com/rest/2.0/aimarket/general?access_token=" + token;\n            Encoding encoding = Encoding.Default;\n            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(host);\n            request.Method = "post";\n            request.KeepAlive = true;\n            String str = "{"image": "xxx"}";\n            byte[] buffer = encoding.GetBytes(str);\n            request.ContentLength = buffer.Length;\n            request.GetRequestStream().Write(buffer, 0, buffer.Length);\n            HttpWebResponse response = (HttpWebResponse)request.GetResponse();\n            StreamReader reader = new StreamReader(response.GetResponseStream(), Encoding.Default);\n            string result = reader.ReadToEnd();\n            Console.WriteLine(result);\n            return result;\n        }\n    }\n}'},{title:"Node",content:"var https = require('https');\nvar qs = require('querystring');\nvar fs = require('fs');\n\nvar image = fs.readFileSync(\"assets/example.jpg\").toString(\"base64\");\n\nvar param = qs.stringify({\n    'access_token': '您的access_token'\n});\n\nvar options = {\n    hostname: 'aip.baidubce.com',\n    path: 'rest/2.0/aimarket/general?' + param,\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n    }\n};\n\nvar req = https.request(\n    options,\n    function (res) {\n        // 在标准输出中查看运行结果\n        res.pipe(process.stdout);\n    }\n);\n\n// 如果有可选参数\nvar postData = {};\npostData[\"image\"] = \"xxxx\";\n\n// 携带数据发送https请求\nreq.write(JSON.stringify(postData));\nreq.end();"}]}),define("ai/models/market/ProductInfo",["exports","babel-runtime/helpers/class-call-check","lodash","babel-runtime/helpers/interop-require-default","ai/common/enums","./apiInfoLanguages"],function(exports,e,t,a,i,n){exports.__esModule=!0,exports.packageItemFactory=function(){return{rndTag:"",packageId:0,packageName:"",tradeType:i.PackageInfoTradeType.OFFLINE,deliveryType:[],deliveryDays:-1,deliveryDaysType:1,packageMode:i.MarketPackageMode.LINEAR,packagePrice:0,priceContent:[],packageUnit:"",packageUnitName:"",packageLimit:-1,packageLimitType:!1,packageLow:-1,packageLowType:!1,packageStock:0,freightType:i.FreightType.SELLER,freightInstruction:""}},exports.productInfoFactory=function(){return{autoRelease:!0,status:0,hasReleased:!1,providerId:"",productId:0,productName:"",productType:i.MarketProductType.SOFTWARE,productTechnology:[],productIndustry:[],productLink:"",productSummary:"",productVideo:"",productAlbum:[],productDocs:[],productDetail:{highlight:"",description:"",scene:"",other:{title:"其它",content:""}},productLicense:"",productLicenseLink:"",apiInfo:{apiSrcUrl:"",apiUsrUri:"/v1/test",requestType:"GET",responseType:"JSON",requestHeader:[],requestQuery:[],requestBody:[],requestSample:JSON.parse(JSON.stringify(s["default"])),responseSuccSample:'{\n    "success": true,\n    "result": "request success"\n}',responseFailSample:'{\n    "success": false,\n    "message": "request failed",\n    "errorCode": 1001\n}',errorCode:[]},packageInfo:[],invoiceType:i.InvoiceType.BOTH,qualityAssurance:{time:1,unit:i.TimeUnit.YEAR},qualityIntroduction:"",productCategory:[],productProperty:[]}};var r=a["default"](t),s=a["default"](n);exports.PackageItem=function o(){e["default"](this,o);r["default"].extend(this,{packageName:"",packageMode:"UNIT",packagePrice:1,packageCount:1,packageUnit:2,packageUnitName:"",packageTime:-1,packageTimeUnit:"YEAR",packageStart:!1,packageLimit:-1,packageLow:2,packageStock:1,packageStep:[{start:"",startEditable:!0,end:"",endEditable:!0,price:""}]})};exports.ProductInfo=function l(){e["default"](this,l);var t={autoRelease:!0,status:0,hasReleased:!1,providerId:"",productId:0,productName:"",productType:i.MarketProductType.SOFTWARE,productTechnology:[],productIndustry:[],productLink:"",productSummary:"",productVideo:"",productAlbum:[],productDocs:[],productDetail:{highlight:"",description:"",scene:"",other:{title:"其它",content:""}},productLicense:"",productLicenseLink:"",deliveryDaysType:0,deliveryDays:1,tradeType:i.BusinessTradeType.ONLINE,deliveryType:"",chargeType:"COUNT",freightType:i.FreightType.SELLER,freightInstruction:"",apiInfo:{apiSrcUrl:"",apiUsrUri:"/v1/test",requestType:"GET",responseType:"JSON",requestHeader:[],requestQuery:[],requestBody:[],requestSample:JSON.parse(JSON.stringify(s["default"])),responseSuccSample:'{\n    "success": true,\n    "result": "request success"\n}',responseFailSample:'{\n    "success": false,\n    "message": "request failed",\n    "errorCode": 1001\n}',errorCode:[]},packageInfo:[],invoiceType:i.InvoiceType.BOTH,qualityAssurance:{time:1,unit:i.TimeUnit.YEAR},qualityIntroduction:"",productCategory:[],productProperty:[]};r["default"].extend(this,t)}}),define("ai/page/app/created/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a);module.exports=n["default"]({template:r["default"],computed:{breadItem:function(){return[{title:"应用列表",url:"#/ai/"+this.data.get("aiAppType")+"/app/list"},{title:"创建完毕"}]},showSentimentBack:function(){return this.data.get("aiAppType")===i.AppType.nlp&&"sentiment"===this.data.get("service")}}})}),define("ai/page/app/created/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content app-created-content">\n                <div class="app-created-center">\n                    <h3>创建完毕</h3>\n                    <p s-if="aiAppType == \'ar\'">\n                        您已成功创建应用！请前往开始制作您的AR作品吧&#8195;<a href="{{Url.arContent}}" target="_blank">DuMix内容制作平台&#8194;&gt;</a>\n                    </p>\n                    <p s-if="showSentimentBack">\n                        <a href="#/ai/{{aiAppType}}/sentiment/dict/list">返回情感倾向分析定制化></a>\n                    </p>\n                    <a href="#/ai/{{aiAppType}}/app/list" class="ui-button skin-ok-button">返回应用列表</a>\n                    <a href="#/ai/{{aiAppType}}/app/detail~appId={{appId}}" class="ui-button skin-ok-button">查看应用详情</a>\n                    <a target="_blank" href="{{\'docs\' | url}}" class="ui-button skin-ok-button">查看文档</a>\n                    <a target="_blank" href="{{\'sdk\' | url}}" class="ui-button skin-ok-button">下载SDK</a>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/app/detail/apiListFields",["exports","module","ai/common/enums","ai/common/util","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=i["default"](a);module.exports=function(a){return[{title:"API",content:function(e){var t=undefined,a=e.name;return+e.version&&e.addVersionFlag&&(a+="V"+e.version),t=e.apiSrc?'<a href="'+e.apiSrc+'" target="_blank">'+n["default"].escape(a)+"</a>":n["default"].escape(a),e.apiTip&&(t+='<span\n                        data-ui-type="Tip"\n                        data-ui-arrow="true"\n                        data-ui-content=\''+e.apiTip+"'></span>"),t}},{title:"状态",content:function(a){return a.useableStatus===e.UsableStatus.none?'<span class="status unavailable">待建库</span>':a.useableStatus===e.UsableStatus["default"]?'<span class="status unavailable">建库成功后方可使用</span>':t.getApiStatus(a)}},{title:"请求地址",content:function(t){return t.useableStatus===e.UsableStatus.none?"--":n["default"].escape(t.url)}},{title:"调用量限制",content:function(e){return n["default"].escape(e.limit)}},{title:"QPS限制",content:function(e){return t.handleQpsTips(e.maxQps,e.qpsTip)}}]}}),define("ai/page/app/detail/AsrWord/AsrWord",["exports","module","babel-runtime/helpers/extends","moment","babel-runtime/helpers/interop-require-default","san-xui","ai/common/component","bat-ria/tpl!./AsrWord.tpl","ai/components/index"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](n),u=a["default"](r);module.exports=l["default"]({template:u["default"],initData:function(){return{open:!1,appId:"",configData:{},btnDisabled:!0,upload:{sizeLimit:5242880,url:"/api/ai/upload",options:{accept:{title:"Txt",extensions:"txt",mimeTypes:"text/plain"}}},error:"",fileErrorDialog:{open:!1,detail:[]}}},components:{"file-upload-preview":s.UploadAndPreview},computed:{asrUploadUrl:function(){return"/ai/upload?kind=asrWord&appId="+this.data.get("appId")}},filters:{dateFormat:function(e,t){return o["default"](e).format(t)}},created:function(){var e=this,t=this.$get("configData.fileId");this.watch("configData.fileId",function(a){a&&a!==t?e.$set("btnDisabled",!1):e.$set("btnDisabled",!0)})},clearFile:function(){this.$set("configData",e["default"]({},this.$get("configData"),{fileId:"",fileName:"",fileUrl:""}))},handleAccept:function(t){var a=t.value;this.$set("configData",e["default"]({},this.$get("configData"),a)),i.Toast.success((a.fileName||"")+"保存成功")},save:function(){var e=this,t=this.$get(),a=t.configData,n=t.appId;this.ajax.appAsrWordSave({appId:n,fileId:a.fileId,isUserAsr:!!a.isUserAsr}).then(function(){i.Toast.success("保存成功"),e.fire("finish")})}})}),define("ai/page/app/detail/AsrWord/AsrWord.tpl",[],function(){return'<template>\n    <div>\n        <xui-dialog open="{=open=}" class="asr-word-dialog" width="800">\n            <div slot="head">语音识别词库设置</div>\n            <div>\n                <div s-if="configData.status === 1" class="status-tip status-processing-tip">\n                    处理中，预计2小时内生效，请耐心等候\n                </div>\n                <div s-elif="configData.status === 2" class="status-tip status-applicated-tip">\n                    已生效，生效时间：{{configData.effectTime | dateFormat(\'YYYY年MM月DD日 HH时mm分\')}}，生效文件：\n                    <a href="{{configData.fileUrl}}">{{configData.fileName}}</a>\n                </div>\n                <div class="desc">\n                    <p>\n                        我们会根据您提供的语料进行语音识别准确率的优化，提交的语料越多、越全，语音识别的效果提升也会越明显。\n                    </p>\n                    <p>\n                        <span>请将需要进行语音训练的特定语句写入一个文本中，并上传。文本示例及说明，</span>\n                        <a href="https://speech-doc.gz.bcebos.com/demo/asrWord/baidu_voice_demo.zip">点此下载</a>\n                    </p>\n                </div>\n                <file-upload-preview\n                    url="{{asrUploadUrl}}"\n                    on-uploadFileSuccess="handleAccept"\n                    options="{{upload.options}}"\n                    data="{{configData}}"\n                    on-clearFile="clearFile"\n                >\n                </file-upload-preview>\n            </div>\n            <div slot="foot">\n                <xui-button on-click="save" skin="primary" disabled="{{btnDisabled}}">保存设置</xui-button>\n            </div>\n        </xui-dialog>\n    </create-model-dialog>\n    </div>\n</template>\n'}),define("ai/page/app/detail/AsrWord/index",["exports","module","./AsrWord","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/app/detail/BiccApiListTable/index",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./schema"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i),o=a["default"](n);module.exports=r["default"]({template:s["default"],computed:{tableList:function(){var t=this.data.get("list").map(function(t){return e["default"]({datasource:[t]},o["default"][t.key])});return t}},initData:function(){return{tableList:[]}}})}),define("ai/page/app/detail/BiccApiListTable/index.tpl",[],function(){return'<div class="bicc-api-list-table">\n    <xui-table\n        s-for="item in tableList"\n        datasource="{{item.datasource}}"\n        schema="{{item.schema}}"\n        cell-builder="{{item.cellRenderer}}"\n    >\n    </xui-table>\n</div>\n'}),define("ai/page/app/detail/BiccApiListTable/schema",["exports","module","ai/common/util","ai/common/enums","ai/config/url"],function(exports,module,e,t,a){var i=function(i,n,r,s){if("status"===n)return e.getApiStatus(i);if("audiofile"===i.key){if("invokeType"===n)return"异步调用";if("requestAddress"===n)return'<a href="'+a.bicc.apiDoc+'" target="_blank">查看文档</a>'}if("realtime"===i.key&&"payType"===n)return null==i[n]?"--":t.BiccPayType.getTextFromValue(i[n]);if(~["realtime","audiofile"].indexOf(i.key)){if("name"===n)return"呼叫中心-"+i[n];if("action"===n)return'<a href="#/ai/bicc/overview/index">立即购买</a>'}return i[n]};module.exports={itma:{schema:[{label:"API",name:"name"},{label:"状态",name:"status"},{label:"并发通数",name:"concurrency"},{label:"调用通数",name:"callCnt"},{label:"调用通时",name:"callDuration"}],cellRenderer:i},audiofile:{schema:[{label:"API",name:"name"},{label:"状态",name:"status"},{label:"调用方式",name:"invokeType"},{label:"请求地址",name:"requestAddress"},{label:"转写时长限制",name:"arDuration"},{label:"操作",name:"action"}],cellRenderer:i},realtime:{schema:[{label:"API",name:"name"},{label:"状态",name:"status"},{label:"并发通路数限制",name:"concurrency"},{label:"计费方式",name:"payType"},{label:"操作",name:"action"}],cellRenderer:i}}}),define("ai/page/app/detail/DetailTable/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","underscore","lodash"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](n),u=t["default"](r);module.exports=s["default"]({template:o["default"],computed:{fields:function(){var e=this,t=[{title:"应用名称",content:function(e){return l["default"].escape(e.name)}},{title:"AppID",content:function(e){return l["default"].escape(e.devAppId)}},{title:"API Key",content:function(e){return l["default"].escape(e.apiKey)}},{title:"Secret Key",content:function(t){var a=e.data.get("tokenVisible");return(a?l["default"].escape(t.token):new Array(8).join("*"))+'<a\n                            href="javascript:void(0)" class="toggle-sk"\n                            data-command="ToggleKey">'+(a?"隐藏":"显示")+"</a>"}}];return this.data.get("detail").bundle&&t.push({title:"包名",content:function(t){var a=[];return t.bundle&&(t.bundle.aip&&(e.data.get("aiAppType")!==i.AppType.ar&&a.push("<b>"+i.AppType.getTextFromAlias("ocr")+"</b>"),u["default"].isEmpty(t.bundle.aip)?a.push(i.BundleType.getTextFromAlias("noNeed")):(t.bundle.aip.iosBundleName&&a.push("iOS: "+l["default"].escape(t.bundle.aip.iosBundleName)),t.bundle.aip.androidBundleName&&a.push("Android: "+l["default"].escape(t.bundle.aip.androidBundleName)))),t.bundle.speech&&(a.push("<b>"+i.AppType.getTextFromAlias("speech")+"</b>"),""+t.bundle.speech.bundleType===i.BundleType.noNeed?a.push('<span>无</span> <span data-ui-type="Tip" data-ui-arrow="true"\n                                        data-ui-content="如需在安卓/iOS语音识别SDK中使用离线功能，则须填写包名"></span>'):a.push(i.BundleType.getTextFromValue(t.bundle.speech.bundleType)+(t.bundle.speech.bundleName?": "+l["default"].escape(t.bundle.speech.bundleName):"")))),a.join("<br>")}}),t},datasource:function(){return[this.data.get("detail")]}},initData:function(){return{tokenVisible:!1}},onCommand:function(e){switch(e.name){case"ToggleKey":this.$set("tokenVisible",!this.$get("tokenVisible"))}}})}),define("ai/page/app/detail/DetailTable/index.tpl",[],function(){return'<div class="detail-table">\n    <ui-table\n        datasource="{{datasource}}"\n        fields="{{fields}}"\n        extensions="Command"\n        on-command="onCommand($event)"\n    >\n\n    </ui-table>\n</div>\n'}),define("ai/page/app/detail/easydlApiFields",["exports","module","lodash","babel-runtime/helpers/interop-require-default","ai/common/util","ai/common/enums"],function(exports,module,e,t,a,i){var n=t["default"](e);module.exports=function(e){return[{title:e.name,width:340,stable:!0,content:function(e,t){if(0===t)return"API";var a=undefined,i=e.name;return+e.version&&e.addVersionFlag&&(i+="V"+e.version),a=e.apiSrc?'<a href="'+e.apiSrc+'" target="_blank">'+n["default"].escape(i)+"</a>":n["default"].escape(i),e.apiTip&&(a+='<span\n                    data-ui-type="Tip"\n                    data-ui-arrow="true"\n                    data-ui-content=\''+e.apiTip+"'></span>"),a}},{title:"",stable:!0,width:120,content:function(e,t){return 0===t?"状态":e.useableStatus===i.UsableStatus.none?'<span class="status unavailable">待建库</span>':e.useableStatus===i.UsableStatus["default"]?'<span class="status unavailable">建库成功后方可使用</span>':a.getApiStatus(e)}},{title:"",width:240,content:function(e,t){return 0===t?"请求地址":e.useableStatus===i.UsableStatus.none?"--":n["default"].escape(e.url)}},{title:"",width:120,content:function(e,t){return t?n["default"].escape(e.limit):"调用量限制"}},{title:"",width:120,content:function(e,t){return 0===t?"QPS限制":a.handleQpsTips(e.maxQps,e.qpsTip)}}]}}),define("ai/page/app/detail/easydlFields",["exports","module","lodash","babel-runtime/helpers/interop-require-default","ai/common/enums","ai/common/util"],function(exports,module,e,t,a,i){var n,r=t["default"](e),s=(n={},n[a.AppType.easydlLite]={text:"模型",type:a.EasydlModelType},n[a.AppType.easydlPro]={text:"项目",type:a.EasydlProjectType},n[a.AppType.easydlRetail]={text:"模型",type:a.EasydlRetailType},n);module.exports=function(e){var t=e.isHead,a=e.aiAppType;if(!s[a])return[];var n=s[a].text,o=s[a].type;return[{title:t?"已上线定制接口":n+"ID",stable:!0,width:160,content:function(e){return t?n+"ID":e.modelId||e.projectId}},{title:t?"":n+"类型",stable:!0,width:100,content:function(e){return t?n+"类型":o.getTextFromValue(e.modelType||e.projectType)}},{title:t?"":"服务名称",stable:!0,width:160,content:function(e){return t?"服务名称":r["default"].escape(e.name)}},{title:t?"":"状态",stable:!0,width:160,content:function(e){return t?"状态":i.getApiStatus(e)}},{title:t?"":"请求地址",content:function(e){return t?"请求地址":e.url?r["default"].escape(e.url):"--"}},{title:t?"":"调用量限制",stable:!0,width:180,content:function(e){return t?"调用量限制":r["default"].escape(e.limit)}},{title:t?"":"QPS限制",stable:!0,width:180,content:function(e){return t?"调用量限制":r["default"].escape(e.maxQps)}}]}}),define("ai/page/app/detail/imgCensor/index",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/page","bat-ria/tpl!./index.tpl","ai/components/index","ai/config","inf-ui/uiFactory","inf-ria/ui/WebUploader","inf-ria/ui/FilePreview","ai/config/upload","lodash","san-transition","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=a["default"](t),h=a["default"](i),g=a["default"](n),v=a["default"](l),x=a["default"](u),b=a["default"](d),y=a["default"](c),k=m["default"]({template:"<div>\n        <slot></slot>\n    </div>"});module.exports=h["default"]({template:g["default"],components:{"ai-form":r.Form,"ai-form-group":r.FormGroup,"ai-form-row":r.FormRow,slider:r.Slider,webuploader:o.createUi(v["default"]),filepreview:o.createUi(x["default"]),"transition-group":p.transition("fade")(k)},inited:function(){this.$set("breadItem",[{title:"应用列表",url:"#/ai/"+this.$get("aiAppType")+"/app/list"},{title:"应用详情",url:"#/ai/"+this.$get("aiAppType")+"/app/detail~appId="+this.$get("appId")},{title:"图像审核设置"}])},computed:{politicianUploaderOptions:function(){return y["default"].extend({},b["default"],{formData:{appId:this.data.get("appId"),kind:"celebrity"}})},spamUploaderOptions:function(){return y["default"].extend({},b["default"],{formData:{appId:this.data.get("appId"),kind:"spamText"}})}},attached:function(){var e=this;this.ref("politicianFilePreview").__getESUI().attachTo(this.ref("politicianWebUploader").__getESUI()),this.ref("spamFilePreview").__getESUI().attachTo(this.ref("spamWebUploader").__getESUI()),this.getData(),this.watch("form.politician.isChecked",function(){e.ajustUploaderSize("politician")}),this.watch("form.politician.exCustom",function(){e.ajustUploaderSize("politician")}),this.watch("form.spam.isChecked",function(){e.ajustUploaderSize("spam")}),this.watch("form.spam.exCustom",function(){e.ajustUploaderSize("spam")})},ajustUploaderSize:function(e){if(this.$get("form."+e+".isChecked")&&this.$get("form."+e+".exCustom")){var t=this.ref(e+"WebUploader").__getESUI().main.querySelector('input[type="file"]').parentNode;t.style.width="106px",t.style.height="30px"}},initData:function(){return{breadItem:[],form:{},adTypes:[{name:"水印",value:"watermark"},{name:"二维码",value:"qrCode"},{name:"条形码",value:"barCode"}],uploaderOptions:{},politicianDatasource:[],spamDatasource:[]}},getData:function(t){var a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=undefined,t){i.next=7;break}return i.next=4,e["default"].awrap(s.api.imgCensorDetail({appId:this.$get("appId")}));case 4:a=i.sent,i.next=10;break;case 7:return i.next=9,e["default"].awrap(this.ajax.imgCensorDefaultDetail());case 9:a=i.sent;case 10:return a=this.formatData(a),this.$set("form",{}),i.next=14,e["default"].awrap(f.sleep());case 14:this.$set("form",a),a.politician.fileId&&(this.ref("politicianWebUploader").__getESUI().disable(),this.$set("politicianDatasource",[{id:a.politician.fileId,name:a.politician.fileName,url:a.politician.fileUrl}])),a.spam.fileId&&(this.ref("spamWebUploader").__getESUI().disable(),this.$set("spamDatasource",[{id:a.spam.fileId,name:a.spam.fileName,url:a.spam.fileUrl}]));case 17:case"end":return i.stop()}},null,this)},submit:function(){var e=this;if(!this.validateForm())return!1;var t=this.getParams();s.api.imgCensorSave(t).then(function(t){e.$redirect("/ai/"+e.$get("aiAppType")+"/app/success~appId="+e.$get("appId"))})},getParams:function(){var e=y["default"].extend({appId:this.$get("appId")},this.$get("form"));return e.disgust.value.sort(function(e,t){return e>t}),e.terror.value.sort(function(e,t){return e>t}),e},cancel:function(){this.$redirect("/ai/"+this.$get("aiAppType")+"/app/detail~appId="+this.$get("appId"))},validateForm:function(){var e=!0;return this.$get("form.politician.isChecked")&&this.$get("form.politician.exCustom")&&!this.$get("form.politician.fileId")&&(this.ref("politicianWebUploader").__getESUI().showValidationMessage("invalid","请上传有效的文件"),e=!1),this.$get("form.spam.isChecked")&&this.$get("form.spam.exCustom")&&!this.$get("form.spam.fileId")&&(this.ref("spamWebUploader").__getESUI().showValidationMessage("invalid","请上传有效的文件"),e=!1),e},formatData:function(e){return e.antiporn.porn.mark=[{value:e.antiporn.porn.suspected[1],text:e.antiporn.porn.suspected[1]+"",showBar:!0},{value:(e.antiporn.porn.suspected[0]+e.antiporn.porn.suspected[1])/2,text:"疑似区间"}],e.antiporn.sexy.mark=[{value:e.antiporn.sexy.suspected[1],text:e.antiporn.sexy.suspected[1]+"",showBar:!0},{value:(e.antiporn.sexy.suspected[0]+e.antiporn.sexy.suspected[1])/2,text:"疑似区间"}],e.terror.mark=[].concat(e.terror.suspected.map(function(e){return{value:e,text:e+"",showBar:!0}}),[{value:(e.terror.suspected[0]+e.terror.suspected[1])/2,text:"疑似区间"}]),e.disgust.mark=[].concat(e.disgust.suspected.map(function(e){return{value:e,text:e+"",showBar:!0}}),[{value:(e.disgust.suspected[0]+e.disgust.suspected[1])/2,text:"疑似区间"}]),e},onChange:function(e,t){this.$set(t,e.target.checked)},filePreviewDelHandler:function(e,t){var a=this.ref(t+"WebUploader").__getESUI(),i=a.getNative();/^WU_FILE/.test(e.id)&&(i.removeFile(e.id,!0),a.hideValidity()),a.enable(),this.$set("form."+t+".fileId",""),this.$set("form."+t+".fileName",""),this.$set("form."+t+".fileUrl","")},sliderChangeHandler:function(e,t){this.$set(t+".value",e)},uploadAcceptHandler:function(e,t){var a=e.originalEvent,i=a.object,n=a.ret;if(this.ref(t+"WebUploader").__getESUI().disable(),n.success){var r=i.file.name+"上传成功";this.$toast(r),this.$set("form."+t+".fileId",n.result.fileId),this.$set("form."+t+".fileName",n.result.fileName),this.$set("form."+t+".fileUrl",n.result.fileUrl)}else{var s=(i.file.name?"“ "+i.file.name+" ”":"")+(n&&n.message&&n.message.global?n.message.global:"上传失败")+"，请重新上传！";e.target.showValidationMessage("invalid",s)}},reset:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.$confirm({title:"恢复默认设置",width:600,content:"<p>确定要恢复到系统默认设置吗？<br>（恢复默认后自定义模型阈值与黑名单均会被清空，仅使用系统默认能力）</p>"}));case 2:return t.next=4,e["default"].awrap(this.getData(!0));case 4:case"end":return t.stop()}},null,this)}})}),define("ai/page/app/detail/imgCensor/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content img-censor-page">\n                <h2>图像审核高级设置</h2>\n                <ai-form>\n                    <div class="section">\n                        <div class="section-head1">\n                            <label>\n                                <ui-checkbox title="色情识别"\n                                    on-change="onChange($event, \'form.antiporn.isChecked\')"\n                                    checked="{{form.antiporn.isChecked}}"/>\n                            </label>\n                        </div>\n                        <transition-group s-if="{{form.antiporn.isChecked}}">\n                            <div class="section-head2" style="margin-top:15px">\n                                <label>\n                                    <ui-checkbox title="是否过滤性感内容"\n                                        on-change="onChange($event, \'form.antiporn.isFilterSexy\')"\n                                        checked="{{form.antiporn.isFilterSexy}}"\n                                    />\n                                </label>\n                                <p style="color:#999;margin:8px 0;">\n                                    注：色情识别中当且仅当具体某个分类为“色情”“性感”中的最高值时，该分类的疑似阈值才起作用\n                                </p>\n                                <ai-form-row label="色情">\n                                    <slider\n                                        type="single"\n                                        min="{{form.antiporn.porn.min}}"\n                                        max="{{form.antiporn.porn.max}}"\n                                        startLabel="疑似({{form.antiporn.porn.min}})"\n                                        endLabel="色情({{form.antiporn.porn.max}})"\n                                        single="{{form.antiporn.porn.value}}"\n                                        mark="{{form.antiporn.porn.mark}}"\n                                        on-change="sliderChangeHandler($event, \'form.antiporn.porn\')"\n                                    />\n\n                                </ai-form-row>\n                                <transition-group s-if="{{form.antiporn.isFilterSexy}}">\n                                    <ai-form-row label="性感">\n                                        <slider\n                                            type="single"\n                                            min="{{form.antiporn.sexy.min}}"\n                                            max="{{form.antiporn.sexy.max}}"\n                                            startLabel="疑似({{form.antiporn.sexy.min}})"\n                                            endLabel="性感({{form.antiporn.sexy.max}})"\n                                            single="{{form.antiporn.sexy.value}}"\n                                            mark="{{form.antiporn.sexy.mark}}"\n                                            on-change="sliderChangeHandler($event, \'form.antiporn.sexy\')"\n                                            />\n                                    </ai-form-row>\n                                </transition-group>\n\n                            </div>\n                        </transition-group>\n                    </div>\n                    <div class="section">\n                        <div class="section-head1">\n                            <label>\n                                <ui-checkbox title="暴恐识别"\n                                    on-change="onChange($event, \'form.terror.isChecked\')"\n                                    checked="{{form.terror.isChecked}}"/>\n                            </label>\n                        </div>\n                        <transition-group s-if="{{form.terror.isChecked}}">\n                            <div class="section-head3">\n                                <slider\n                                    style="margin-top:15px;"\n                                    type="range"\n                                    min="{{form.terror.min}}"\n                                    max="{{form.terror.max}}"\n                                    startLabel="正常({{form.terror.min}})"\n                                    endLabel="暴恐({{form.terror.max}})"\n                                    start="{{form.terror.value[0]}}"\n                                    end="{{form.terror.value[1]}}"\n                                    mark="{{form.terror.mark}}"\n                                    on-change="sliderChangeHandler($event, \'form.terror\')"\n                                    />\n                            </div>\n                        </transition-group>\n                </div>\n                    <div class="section">\n                        <div class="section-head1">\n                            <label>\n                                <ui-checkbox title="恶心识别"\n                                    on-change="onChange($event, \'form.disgust.isChecked\')"\n                                    checked="{{form.disgust.isChecked}}"/>\n                            </label>\n                        </div>\n                        <transition-group s-if="{{form.disgust.isChecked}}">\n                            <div class="section-head3">\n                                <slider\n                                    style="margin-top:15px;"\n                                    type="range"\n                                    min="{{form.disgust.min}}"\n                                    max="{{form.disgust.max}}"\n                                    startLabel="正常({{form.disgust.min}})"\n                                    endLabel="暴恐({{form.disgust.max}})"\n                                    start="{{form.disgust.value[0]}}"\n                                    end="{{form.disgust.value[1]}}"\n                                    mark="{{form.disgust.mark}}"\n                                    on-change="sliderChangeHandler($event, \'form.disgust\')"\n                                    />\n                            </div>\n                        </transition-group>\n                    </div>\n                    <div class="section">\n                        <div class="section-head1">\n                            <label>\n                                <ui-checkbox title="广告检测"\n                                    on-change="onChange($event, \'form.ad.isChecked\')"\n                                    checked="{{form.ad.isChecked}}"/>\n                            </label>\n                        </div>\n                        <transition-group s-if="{{form.ad.isChecked}}">\n                            <div class="section-head2">\n                                <div style="margin:10px 0;">需要检测的广告类别</div>\n                                <div>\n                                    <ui-boxgroup\n                                        boxType="checkbox"\n                                        datasource="{{adTypes}}"\n                                        value="{=form.ad.value=}"/>\n                                </div>\n                            </div>\n                        </transition-group>\n                    </div>\n                    <div class="section">\n                        <div class="section-head1">\n                            <label>\n                                <ui-checkbox title="政治敏感识别"\n                                    on-change="onChange($event, \'form.politician.isChecked\')"\n                                    checked="{{form.politician.isChecked}}"/>\n                            </label>\n                        </div>\n                        <div style="display:{{form.politician.isChecked ? \'block\' : \'none\'}}">\n                            <div class="section-head2">\n                                <div style="margin: 10px 0;">\n                                    <label>\n                                        <ui-checkbox title="政治敏感人物以外，额外过滤包含明星、公众人物的图片"\n                                            on-change="onChange($event, \'form.politician.exStar\')"\n                                            checked="{{form.politician.exStar}}"\n                                        />\n                                    </label>\n                                </div>\n                                <div style="margin: 10px 0;">\n                                    <label>\n                                        <ui-checkbox title="政治敏感人物以外，额外过滤用户自定义人物名单"\n                                            on-change="onChange($event, \'form.politician.exCustom\')"\n                                            checked="{{form.politician.exCustom}}"\n                                        />\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="section-head3" style="display:{{form.politician.exCustom ? \'block\' : \'none\'}}">\n                                <div style="height:30px;margin:0 0 10px 0">\n                                    <webuploader s-ref="politicianWebUploader" uploaderOptions="{{politicianUploaderOptions}}"\n                                        hint="仅支持大小5M以内的TXT文件"\n                                        minFileSize="1"\n                                        on-uploadAccept="uploadAcceptHandler($event, \'politician\')"\n                                    >\n                                        选择要上传的文件\n                                    </webuploader>\n                                </div>\n                                <div>\n                                    <filepreview s-ref="politicianFilePreview" on-delete="filePreviewDelHandler($event, \'politician\')"\n                                        datasource="{{politicianDatasource}}"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="section">\n                        <div class="section-head1">\n                            <label>\n                                <ui-checkbox title="图像垃圾文本识别"\n                                    on-change="onChange($event, \'form.spam.isChecked\')"\n                                    checked="{{form.spam.isChecked}}"/>\n                            </label>\n                        </div>\n                        <div style="display:{{form.spam.isChecked ? \'block\' : \'none\'}}">\n                            <div class="section-head2">\n                                <div style="margin: 10px 0;">\n                                    <label>\n                                        <ui-checkbox title="在百度自有文本黑库以外，额外过滤用户自定义文本黑库"\n                                            on-change="onChange($event, \'form.spam.exCustom\')"\n                                            checked="{{form.spam.exCustom}}"\n                                        />\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="section-head3" style="display:{{form.spam.exCustom ? \'block\' : \'none\'}}">\n                                <div style="height:30px;margin:0 0 10px 0">\n                                    <webuploader s-ref="spamWebUploader" uploaderOptions="{{spamUploaderOptions}}"\n                                        hint="仅支持大小5M以内的TXT文件"\n                                        minFileSize="1"\n                                        on-uploadAccept="uploadAcceptHandler($event, \'spam\')"\n                                    >\n                                        选择要上传的文件\n                                    </webuploader>\n                                </div>\n                                <div>\n                                    <filepreview s-ref="spamFilePreview" on-delete="filePreviewDelHandler($event, \'spam\')"\n                                        datasource="{{spamDatasource}}"\n                                    />\n                                </div>\n                                <div>\n                                    <label>\n                                        <ui-checkbox title="对用户自建黑库文本开启模糊匹配"\n                                            on-change="onChange($event, \'form.spam.isVague\')"\n                                            checked="{{form.spam.isVague}}"\n                                            disabled="{{!form.spam.fileId}}"\n                                        />\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="section">\n                        <div class="section-head3">\n                            <ui-button skin="ok" on-click="submit">\n                                保存\n                            </ui-button>\n\n                            <ui-button on-click="cancel" style="margin-left:20px">\n                                取消\n                            </ui-button>\n\n                            <ui-button on-click="reset" style="margin-left:20px">\n                                恢复默认\n                            </ui-button>\n                        </div>\n                    </div>\n                </ai-form>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/app/detail/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./apiListFields","./easydlFields","./AsrWord/index","./TukuSetting","./BiccApiListTable/index","./DetailTable/index","underscore","lodash","promise","ai/common/enums","ai/config","./Setting","jquery","san-xui","./easydlApiFields","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g,v,x,b,y){var k=i["default"](a),T=i["default"](n),w=i["default"](r),I=i["default"](s),D=i["default"](o),S=i["default"](l),A=i["default"](u),$=i["default"](d),E=i["default"](c),L=i["default"](p),C=i["default"](f),P=i["default"](g),N=i["default"](v),U=i["default"](b),_={faceAudit:{key:"faceAudit",title:"头像审核高级设置",desc:"自定义设置头像审核规则，包括过滤的维度、阈值及黑词库、黑名单等设置项",type:m.AppType.antiporn,components:"setting"},imgCensor:{key:"imgCensor",title:"图像审核高级设置",desc:"自定义图像审核的各项阈值、审核纬度、文本黑库、黑名单等",type:m.AppType.antiporn,components:"setting"},textCensor:{key:"textCensor",title:"文本审核高级设置",desc:"自定义文本审核的各项阈值、审核纬度、文本黑库、黑名单等",type:m.AppType.antiporn,components:"setting"},searchSame:{key:"searchSame",title:"相同图图库管理",desc:"在正式使用相同图以图搜图功能前需要申请建库，建库后方可使用",type:m.AppType.imagesearch,components:"gallery"},searchSimilar:{key:"searchSimilar",title:"相似图图库管理",desc:"在正式使用相似图以图搜图功能前需要申请建库，建库后方可使用",type:m.AppType.imagesearch,components:"gallery"},logo:{key:"logo",title:"logo识别-自定义图库管理",desc:"若直接使用logo识别-检索服务效果欠佳时，可建立自定义logo子库，通过调用logo识别-入库接口完成自定义logo图片入库，再调用logo识别-检索接口，选择在自定义logo子库内检索，提高识别效果",type:m.AppType.imagerecognition,components:"gallery"},product:{key:"product",title:"商品图图库管理",desc:"在正式使用商品图以图搜图功能前需要申请建库，建库后方可使用",type:m.AppType.imagesearch,components:"gallery"},picbook:{key:"picbook",title:"绘本图图库管理",desc:"在正式使用绘本图以图搜图功能前需要申请建库，建库后方可使用",type:m.AppType.imagesearch,components:"gallery"},dishes:{key:"dishes",title:"自定义菜品识别图库管理",desc:"在正式使用自定义菜品识别-检索服务前需要申请建库，建库后方可使用",type:m.AppType.imagerecognition,components:"gallery"},poi:{key:"poi",title:"门脸检索图库管理",desc:"在正式使用门脸私库检索功能前需要申请建库，建库后方可使用",type:m.AppType.imagerecognition,components:"gallery"}};module.exports=k["default"]({template:T["default"],components:{setting:P["default"],"detail-table":$["default"],"gallery-setting":S["default"],"bicc-api-list-table":A["default"],"xui-radioselect":x.RadioSelect},filters:{handleApiFild:function(e){var t,a=this.data.get("aiAppType");return(t={},t[m.AppType.easydlRetail]=U["default"],t)[a](e)}},computed:{canEdit:function(){return this.data.get("aiAppType")!==m.AppType.roboticvision&&!this.data.get("detail.smartApp")},cateGories:function(){return{value:0,datasource:this.data.get("easydlTable.datasource").map(function(e,t){e.labelId=t;return{text:L["default"].escape(e.label),value:t}})}},cateGoriesApiTableData:function(){return function(e,t){return(L["default"].filter(e,function(e){return e.labelId===t})[0]||{}).children||[]}(this.data.get("easydlTable.datasource"),this.data.get("cateGories.value"))},settingDataList:function(){var a=this,i=this.data.get("aiAppType");return t["default"](_).map(function(t){var i=e["default"]({},_[t]),n=t+"Config",r=a.data.get(n),s=a.data.get("ui.show."+n);return i.config=r,i.show=s,i}).sort(function(e,t){return e.type!==i&&t.type===i?1:-1})},mainTableText:function(){return this.data.get("showMainTable")?"收起":"展开"}},messages:{"command:setting":function(e){switch(e.value){case"asrWord":this.showAsrWordDialog();break;case"faceAudit":this.$redirect("#/ai/"+this.$get("aiAppType")+"/app/faceAudit~appId="+this.$get("appId"));break;case"imgCensor":this.$redirect("#/ai/"+this.$get("aiAppType")+"/app/imgCensor~appId="+this.$get("appId"));break;case"textCensor":this.$redirect("#/ai/"+this.$get("aiAppType")+"/app/textCensor~appId="+this.$get("appId"))}}},attached:function(){var e=this,t=[this.getDetail(),this.getAppApiList(),this.getSettingList()];this.$get("isEasydl")&&(t.push(this.getAppEasydlServiceList()),t.push(this.ajax.easydlAppDataList({type:this.$get("aiAppType")})),this.$get("aiAppType")===m.AppType.easydlRetail&&t.push(this.getAppEasydlApiList())),C["default"].all(t).then(function(t){var a=t[0],i=t[1],n=(t[2],t[3]),r=t[4],s=t[5];e.hanldeData(a,i),e.handleEasydlData(n,r,s)})},initData:function(){var e=L["default"].template(h.Url.smartApp.console);return{showMainTable:!1,AppType:m.AppType,apiList:[],htApiList:[],detail:{},biccApiListTable:{list:[]},apiListTable:{datasource:[],fields:w["default"](),noDataHtml:'<div class="ai-no-data">'+(this.aiAppType===m.AppType.kg?"敬请期待":"暂无数据")+"</div>"},easydlTable:{datasource:[],fields:w["default"]()},easydlServiceTable:{datasource:[],fields:I["default"]({aiAppType:this.aiAppType}),headFields:I["default"]({isHead:!0,aiAppType:this.aiAppType})},smartApp:{datasource:[],fields:[{title:"小程序名称",content:function(e){return E["default"].escape(e.smartAppName)}},{title:"小程序ID",content:function(e){return E["default"].escape(e.devAppId)}},{title:"操作",content:function(t){return'<a href="'+e({appId:t.devAppId})+'" target="_blank">管理</a>'}}]},breadItem:[{title:"应用列表",url:"#/ai/"+this.aiAppType+"/app/list"},{title:"应用详情"}],ui:{show:{license:!1,licenseIos:!1,licenseAndroid:!1,smartApp:!1,ar:{bos:!1,cdn:!1},speechConfig:!1,faceAuditConfig:!1,imgCensorConfig:!1,searchSameConfig:!1,searchSimilarConfig:!1,productConfig:!1},licenseLabel:m.AppType.getTextFromAlias("ocr")},easydlDataTable:{datasource:[],fields:U["default"]({name:"数据管理接口"})}}},getDetail:function(){return h.api.appDetail({appId:this.$get("appId")})},getAppApiList:function(){return h.api.appApiList({appId:this.$get("appId")})},getAppEasydlServiceList:function(){return h.api.easydlAppServiceList({appId:this.$get("appId"),type:this.$get("aiAppType")})},getAppEasydlApiList:function(){return h.api.easydlAppApiList({appId:this.$get("appId")})},getSettingList:function(){var e=this;return h.api.settingList().then(function(t){return e.$set("settingList",t),t})},hanldeData:function(e,t){var a=this;this.$set("detail",e),this.$set("apiList",t),this.$set("apiListTable.datasource",t),e.tokenVisible=!1;e.isFromSpeech||this.hasAbility("speech")||this.hasAbility("ocr")||this.hasAbility("ar")?(e.bundle=e.bundle||{},e.isFromSpeech||this.hasAbility("speech")?e.bundle.speech=e.bundle.speech||{bundleType:m.BundleType.noNeed}:e.bundle.speech&&delete e.bundle.speech,this.hasAbility("ocr")||this.hasAbility("ar")?e.bundle.aip=e.bundle.aip||{}:e.bundle.aip&&delete e.bundle.aip):e.bundle&&delete e.bundle;var i=(this.hasAbility("ocr")||this.hasAbility("ar"))&&e.bundle&&!L["default"].isEmpty(e.bundle.aip);this.$set("ui.show.license",i),i&&(this.$set("ui.show.licenseIos",!!e.bundle.aip.iosBundleName),this.$set("ui.show.licenseAndroid",!!e.bundle.aip.androidBundleName),this.$get("aiAppType")===m.AppType.ar&&this.$set("ui.licenseLabel",""));var n=this.$get("apiList").filter(function(e){return"bicc"===e.type});this.$set("biccApiListTable.list",n);var r=this.$get("apiList").filter(function(e){return"bicc"!==e.type});this.$set("apiListTable.datasource",r);var s=this.$get("settingList");~e.apiList.split(",").indexOf(s.textCensor+"")&&this.getTextCensorConfig().then(function(t){a.$set("textCensorConfig",a.handleTextCensorData(t)),a.$set("ui.show.textCensorConfig",!e.smartApp)}),~e.apiList.split(",").indexOf(s.speech+"")&&this.getSpeechConfig().then(function(t){a.$set("speechConfig",a.handleSpeechData(t)),a.$set("ui.show.speechConfig",!e.smartApp)}),~e.apiList.split(",").indexOf(s.faceAudit+"")&&this.getFaceAuditStatus().then(function(t){a.$set("faceAuditConfig",a.handleFaceAuditData(t)),a.$set("ui.show.faceAuditConfig",!e.smartApp)}),~e.apiList.split(",").indexOf(s.imgCensor+"")&&this.getImgCensorStatus().then(function(t){a.$set("imgCensorConfig",a.handleImgCensorData(t)),a.$set("ui.show.imgCensorConfig",!e.smartApp)}),["searchSame","searchSimilar","product","logo","dishes","poi","picbook"].forEach(function(t){~e.apiList.split(",").indexOf(s[t]+"")&&C["default"].all([a.getTukuDetail(s[t]),a.getQualificationStatus()]).then(function(i){var n=i[0],r=i[1];a.$set(t+"Config",a.handleTukuData(t,s[t],n,r)),a.$set("ui.show."+t+"Config",!e.smartApp)})}),e.smartApp&&(this.$set("ui.show.smartApp",!0),this.$set("smartApp.datasource",[e])),this.$set("ui.show.ar.bos",this.hasAbility("ar")&&!(!e.ar||!e.ar.bos)),this.$set("ui.show.ar.cdn",this.hasAbility("ar")&&!(!e.ar||!e.ar.cdn)),this.$set("apiListTable.fields",w["default"](this.$get("apiList")))},handleEasydlData:function(e,t,a){var i=t.filter(function(e){return e.url});this.$set("easydlDataTable.datasource",[{}].concat(i)),a?this.$set("easydlTable.datasource",[{label:"已上线的定制接口",children:e}].concat(y.formatGerData(a))):this.$set("easydlServiceTable.datasource",e)},handleSpeechData:function(e){var a=[];return t["default"](e).forEach(function(t){var i=undefined;"asrAnalysis"===t&&(i={key:"asrAnalysis",title:"语义解析设置",desc:'语义解析帮助应用理解用户意图。在返回语音识别结果时，同步返回语义理解结果。可理解查天气、打电话、订机票等多个场景。 <br>\n                        <p style="color:#ffcd33">注：2018年11月语义引擎和协议全面优化升级，升级之前的语义协议在2019年1月31日后不再继续支持。请尽快参考使用文档进行更新。</p>\n                        '},a.push(L["default"].extend({},i))),"asrWord"===t&&(i={key:"asrWord",title:"语音识别词库设置",desc:'上传识别自定义词条，训练语言模型，提交的语料越多、越全，语音识别的效果提升也会越明显。\n                        支持搜索、输入法模型。<br /><p>更好的模型训练效果,长句文本等更多训练方式选择，推荐使用\n                        <a href="'+h.Url.smartAsr+'" target="_blank">语音自训练平台</a>，训练专属语音识别模型</p>'},a.push(L["default"].extend({},e[t],i)))}),a},handleFaceAuditData:function(e){return[L["default"].extend({},{key:"faceAudit",title:"头像审核高级设置",desc:"自定义设置头像审核规则，包括过滤的维度、阈值及黑词库、黑名单等设置项"},e)]},handleImgCensorData:function(e){return[L["default"].extend({},{key:"imgCensor",title:"图像审核高级设置",desc:"自定义图像审核的各项阈值、审核纬度、文本黑库、黑名单等"},e)]},handleTextCensorData:function(e){return[L["default"].extend({},{key:"textCensor",title:"文本审核高级设置",desc:"自定义文本审核的各项阈值、审核纬度、文本黑库、黑名单等"},e)]},handleTukuData:function(e,a,i,n){for(var r=n.state,s="INIT",o="logo"!==e,l={CERTIFIED:[m.QualificationStatus.ENTERPRISE_CERTIFIED].concat(o&&[m.QualificationStatus.INDIVIDUAL_CERTIFIED]),CERTIFYING:[m.QualificationStatus.ENTERPRISE_CERTIFYING].concat(o&&[m.QualificationStatus.INDIVIDUAL_CERTIFYING]),FAILED:[m.QualificationStatus.ENTERPRISE_FAILED].concat(o&&[m.QualificationStatus.INDIVIDUAL_FAILED])},u=t["default"](l),d=0,c=u.length;d<c;d++){var p=u[d];if(L["default"].intersection(l[p],r).length){s=p;break}}return L["default"].extend({qualificationStatus:s,apiId:a,apiName:L["default"].get(L["default"].find(this.$get("apiList"),{id:a+""}),"name",""),appId:this.$get("appId"),apiKey:e},_[e],i)},hasAbility:function(e){return E["default"].some(this.$get("apiList"),function(t){return t.type===e})},clickLicenseHandler:function(e){var t=this.$get("aiAppType")===m.AppType.ar?m.AppType.ar:m.AppType.ocr;window.open(h.Url.download+"/license?appId="+this.$get("appId")+"&bundleType="+m.BundleType[e]+"&type="+t)},getSpeechConfig:function(){return h.api.appSpeechConfig({appId:this.$get("appId")})},getFaceAuditStatus:function(){return h.api.faceAuditStatus({appId:this.$get("appId")})},getImgCensorStatus:function(){return h.api.imgCensorStatus({appId:this.$get("appId")})},getTextCensorConfig:function(){return this.ajax.getTextCensorStatus({appId:this.$get("appId")})},getTukuDetail:function(e){return h.api.tukuDetail({appId:this.$get("appId"),apiId:e})},showAsrWordDialog:function(){var e=this,t=new D["default"]({data:{open:!0,appId:this.$get("appId"),configData:E["default"].find(this.$get("speechConfig"),{key:"asrWord"})}});t.attach(document.body),t.on("finish",function(){e.$reload(),t.dispose()}),t.on("cancel",function(){t.dispose()})},onDialogOpen:function(){N["default"]("body").addClass("ai-overflow-hidden")},onDialogHide:function(){N["default"]("body").removeClass("ai-overflow-hidden")},toggleTable:function(){this.$set("showMainTable",!this.$get("showMainTable"))}})}),define("ai/page/app/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content app-detail-content">\n                <h2>应用详情</h2>\n                <div class="buttons-wrap">\n                    <a s-if="canEdit" skin="ok" href="#/ai/{{aiAppType}}/app/edit~appId={{appId}}" class="ui-ctrl ui-button skin-ok skin-ok-button">编辑</a>\n                    <a href="{{\'docs\' | url}}" target="_blank" class="ui-ctrl ui-button">查看文档</a>\n                    <a s-if="{{aiAppType !== AppType.unit && aiAppType !== AppType.kg && !isEasydl && aiAppType !== AppType.intelligentwriting}}" href="{{\'sdk\' | url}}" target="_blank" class="ui-ctrl ui-button">下载SDK</a>\n                    <a s-if="{{aiAppType !== AppType.ar && !isEasydl}}" href="{{Url.video}}" target="_blank" class="ui-ctrl ui-button">查看教学视频</a>\n                    <a s-if="aiAppType === AppType.ar" href="{{Url.arContent}}" target="_blank" class="ui-ctrl ui-button">内容制作</a>\n                </div>\n                <detail-table detail="{{detail}}" />\n\n                <div class="section" s-if="ui.show.smartApp">\n                    <h3 class="section-title">应用渠道 - 百度小程序</h3>\n                    <div class="section-desc">您创建的百度小程序可灵活使用本应用下的AI能力，具体操作请查看<a href="{{Url.smartApp.doc}}" target="_blank">百度小程序文档</a></div>\n                    <ui-table datasource="{{smartApp.datasource}}" fields="{{smartApp.fields}}"></ui-table>\n                </div>\n\n                <div class="section" s-if="ui.show.license">\n                    <h3 class="section-title">安全模式设置：</h3>\n                    <div class="section-desc">\n                        <template s-if="ui.licenseLabel">提示：下载License文件，并将其集成到{{ui.licenseLabel}}下的SDK中，即可使用安全模式，保护密钥在移动客户端的安全。</template>\n                        <template s-else>提示：下载License文件，并将其集成到SDK中，即可使用安全模式，保护密钥在移动客户端的安全。</template>\n                    </div>\n                    <div>\n                        <ui-button\n                            s-if="ui.show.licenseIos"\n                            skin="ok"\n                            on-click="clickLicenseHandler(\'ios\')"\n                            class="section-btn">\n                            <template s-if="ui.licenseLabel">下载License文件-iOS（{{ui.licenseLabel}}）</template>\n                            <template s-else>下载License文件-iOS</template>\n                        </ui-button>\n                        <ui-button\n                            s-if="ui.show.licenseAndroid"\n                            skin="ok"\n                            on-click="clickLicenseHandler(\'android\')"\n                            class="section-btn">\n                            <template s-if="ui.licenseLabel">下载License文件-Android（{{ui.licenseLabel}}）</template>\n                            <template s-else>下载License文件-Android</template>\n                        </ui-button>\n                    </div>\n                </div>\n\n                <div class="section" s-if="biccApiListTable.list.length || apiListTable.datasource.length">\n                    <h3 s-if="{{!isEasydl}" class="section-title">API列表：</h3>\n                    <h3 s-else class="section-title">通用服务列表：</h3>\n                    <bicc-api-list-table\n                        style="margin-bottom:10px;"\n                        s-if="biccApiListTable.list.length != 0"\n                        list="{{biccApiListTable.list}}"\n                    ></bicc-api-list-table>\n                    <template s-if="biccApiListTable.list.length == 0 || apiListTable.datasource.length != 0">\n                        <div class="extend-section">\n                            <div class="toggle-table" on-click="toggleTable">\n                                {{mainTableText}}\n                                <xui-icon name="thin-arrow-top" class="{{showMainTable ? \'\' : \'down\'}}" />\n                            </div>\n                            <ui-table\n                                fields="{{apiListTable.fields}}"\n                                class="show-head"\n                                datasource="{{[[]]}}"\n                            />\n                            <ui-table\n                                datasource="{{apiListTable.datasource}}"\n                                extensions="Command"\n                                fields="{{apiListTable.fields}}"\n                                noDataHtml="{{apiListTable.noDataHtml}}"\n                                on-command="onCommand($event)"\n                                class="show-body"\n                                s-if="{{showMainTable}}"\n                            />\n                        </div>\n                    </template>\n\n                    <p class="section-tip" s-if="aiAppType == AppType.antiporn">\n                        图像审核提供一个API接口，支持多种模型服务的灵活组合调用，详情参考\n                        <a href="{{Url.imgCensor}}" target="_blank">文档链接</a>\n                        。同时，部分模型服务也提供单独的服务请求API，详见上述表格。\n                    </p>\n                </div>\n                \x3c!-- easydl --\x3e\n                <div class="section" s-if="{{isEasydl}}">\n                    <template s-if="{{aiAppType === AppType.easydlRetail}}">\n                        <h3 class="section-title">可用接口列表：</h3>\n                        <div class="category-tabs" s-if="{{cateGories.datasource.length > 1}}">\n                            <xui-radioselect value="{=cateGories.value=}" datasource="{{cateGories.datasource}}"></xui-radioselect>\n                        </div>\n                        <template s-if="{{!cateGories.value}}">\n                            <ui-table\n                                datasource="{{[[]]}}"\n                                fields="{{easydlServiceTable.headFields}}"\n                            >\n                            </ui-table>\n                            <ui-table\n                                class="show-body easydl-table"\n                                datasource="{{cateGoriesApiTableData}}"\n                                fields="{{easydlServiceTable.fields}}"\n                                on-command="onCommand($event)"\n                                noDataHtml="{{apiListTable.noDataHtml}}"\n                                extensions="Command">\n                            </ui-table>\n                            <ui-table\n                                datasource="{{easydlDataTable.datasource}}"\n                                fields="{{easydlDataTable.fields}}"\n                                on-command="onCommand($event)"\n                                extensions="Command">\n                            </ui-table>\n                        </template>\n                        <ui-table\n                            s-else\n                            s-for="item,index in cateGoriesApiTableData"\n                            datasource="{{item.children}}"\n                            fields="{{item|handleApiFild}}"\n                            extensions="Command"\n                            class="easydl-table"\n                            on-command="onCommand($event)">\n                        </ui-table>\n                    </template>\n                    <template s-else>\n                        <h3 class="section-title">定制服务列表：</h3>\n                        <ui-table\n                            datasource="{{easydlServiceTable.datasource}}"\n                            fields="{{easydlServiceTable.fields}}"\n                        />\n                        <h3 class="section-title">数据管理接口：</h3>\n                        <ui-table\n                            datasource="{{easydlDataTable.datasource}}"\n                            fields="{{easydlDataTable.fields}}"\n                            on-command="onCommand($event)"\n                            extensions="Command">\n                        </ui-table>\n                    </template>\n                </div>\n\n                <div class="section">\n                    <h3 class="section-title">应用描述：</h3>\n                    <div class="app-desc">{{detail.desc}}</div>\n                </div>\n\n                <setting title="语音识别高级设置：" itemList="{{speechConfig}}" s-if="{{ui.show.speechConfig && aiAppType === AppType.speech}}" />\n                <template s-for="data in settingDataList">\n                    <template s-if="data.components === \'setting\'">\n                        <setting title="{{data.title}}" itemList="{{data.config}}" s-if="{{data.show}}" />\n                    </template>\n                    <template s-if="data.components === \'gallery\'">\n                        <gallery-setting item="{{data.config}}" s-if="{{data.show}}" />\n                    </template>\n                </template>\n                <setting title="语音识别高级设置：" itemList="{{speechConfig}}" s-if="{{ui.show.speechConfig && aiAppType !== AppType.speech}}" />\n\n                <div class="section" s-if="ui.show.ar.bos">\n                    <h3 class="section-title">对象存储BOS：</h3>\n                    <p>Bucket名称：<a href="/bos/#/bos/object~bucketName={{detail.ar.bos.bucketName}}&location=bj" target="_blank">{{detail.ar.bos.bucketName}}</a></p>\n                    <p>地域：华北-北京</p>\n                </div>\n                <div class="section" s-if="ui.show.ar.cdn">\n                    <h3 class="section-title">内容分发网络CDN：</h3>\n                    <p>域名地址：<a href="/cdn/#/cdn/detail/domain~domain={{detail.ar.cdn.domain}}" target="_blank">{{detail.ar.cdn.domain}}</a></p>\n                    <p>计费方式：按流量计费</p>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/app/detail/Setting",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","moment"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:'\n    <div class="section custom-config-section">\n        <h3 class="section-title">{{title}}</h3>\n        <div class="section-body">\n            <div class="config-item" s-for="item in itemList">\n                <div class="item-desc item-col {{item.key === \'asrAnalysis\' ? \'item-asrAnalysis-desc\' : \'\'}}">\n                    <div class="label" s-if="itemList.length > 1">{{item.title}}</div>\n                    <div class="desc">{{item.desc|raw}}</div>\n                </div>\n                <slot name="status" s-if="item.status != null">\n                    <div class="item-status item-status item-status-error item-col" s-if="item.status == -1">\n                        <div class="item-status-inner">\n                            <i></i><span>生效失败</span>\n                        </div>\n                    </div>\n                    <div class="item-status item-status item-col" s-if="item.status == 0">\n                        <div class="item-status-inner">\n                            <i></i><span>未设置</span>\n                        </div>\n                    </div>\n                    <div class="item-status item-status-warning item-col" s-if="item.status == 1">\n                        <div class="item-status-inner">\n                            <i></i><span>{{item.key | toProcessingLabel}}</span>\n                        </div>\n                        <div class="item-set-time">\n                            设置时间：{{item.setTime | dateFormat(\'YYYY年MM月DD日\')}}\n                        </div>\n                    </div>\n                    <div class="item-status item-status-success item-col" s-if="item.status == 2">\n                        <div class="item-status-inner">\n                            <i></i><span>已生效</span>\n                        </div>\n                        <div class="item-effect-time">\n                            生效时间：{{item.effectTime | dateFormat(\'YYYY年MM月DD日\')}}\n                        </div>\n                        <div>{{item.extraContent | raw}}</div>\n                    </div>\n                </slot>\n                <div class="item-operation item-col">\n                    <a s-if="item.key === \'asrAnalysis\'" href="{{Url.asrAnalysis}}" target="_blank">查看使用文档</a>\n                    <a s-elif="!(item.key ===\'textCensor\' && item.status == 1)"\n                        href="javascript:void(0)"\n                        on-click="onCommand(item.key)">\n                        进行设置\n                    </a>\n                    <a s-if="item.key === \'asrWord\'" href="{{Url.asrWord}}" target="_blank" style="margin-left: 5px;">\n                        点击查看技术文档\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n    ',initData:function(){return{itemList:[]}},filters:{dateFormat:function(e,t){return n["default"](e).format(t)},toProcessingLabel:function(e){return"textCensor"===e?"生效中":"处理中"}},onCommand:function(e){this.dispatch("command:setting",e)}})}),define("ai/page/app/detail/textCensor/index",["exports","module","./textCensor","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/app/detail/textCensor/textCensor",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/page","bat-ria/tpl!./textCensor.tpl","ai/components/index","lodash","san-transition","./UploadItem","inf-ui/x/biz/helper"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](s),m=a["default"](l),h=d["default"]({template:"<div>\n        <slot></slot>\n    </div>"}),g={smartAntiPorn:{title:"智能鉴黄",label:"色情"},maliciousPromotion:{title:"恶意推广",label:"推广"},vulgarAbuse:{title:"低俗辱骂",label:"辱骂"},politicallySensitive:{title:"政治敏感",label:"敏感"},terroristBanned:{title:"暴恐违禁",label:"违禁"},lowQualityBump:{title:"低质灌水",label:"低质"}};module.exports=c["default"]({template:p["default"],components:{slider:r.Slider,"transition-group":o.transition("fade")(h),"upload-item":m["default"]},initData:function(){return{successed:!1,keys:f["default"].keys(g),info:null,promotionTypes:[{title:"联系方式型&nbsp;&nbsp;&nbsp;&nbsp;",value:"contactInfo",hover:"<span>与利益相关的联系方式以及各类号码变体，</span>例：加&middot;威&middot;∨&middot;信：【 W855～329 】 为您解--答"},{title:"软文推广型",value:"advertorial",hover:"<span>有售卖倾向的文本，以推广营销公司或产品为主要目的，</span>\n                        例：新的渠道 货价更低 我们主要做的是线下大贸，\n                        现开始推出T-C  T-B。价格绝对适合 如果有需要的宝妈们可以联系"}]}},computed:{breadItem:function(){return[{title:"应用列表",url:"#/ai/"+this.data.get("aiAppType")+"/app/list"},{title:"应用详情",url:"#/ai/"+this.data.get("aiAppType")+"/app/detail~appId="+this.data.get("appId")},{title:"文本审核高级设置"}]},checkedNum:function(){var e=this.data.get("info");return e?f["default"].keys(g).filter(function(t){return e[t].isChecked}).length:0},hasChanged:function(){var e=this.data.get("info"),t=this.data.get("defaultInfo");return!!t&&!f["default"].isEqual(e,t)}},filters:{toTitle:function(e){return g[e].title},toSliderLabel:function(e){return g[e].label},toSliderMark:function(e){var t=this,a=this.data.get("info")[e].suspected,i=a[0],n=a[1];return this.nextTick(function(){t.ref("slider_"+e).adjustFirstTwoMarks()}),[{value:i,text:i,showBar:!0},{value:n,text:n,showBar:!0},{value:(i+n)/2,text:"疑似区间"}]}},setDefaultInfo:function(e){this.$$set({defaultInfo:JSON.parse(JSON.stringify(e)),info:e})},created:function(){return e["default"].async(function(t){for(var a=this;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.fetchDetail());case 2:this.watch("info.maliciousPromotion.promotionType",function(e){a.$set("info.maliciousPromotion.isChecked",!!e.length)});case 3:case"end":return t.stop()}},null,this)},fetchDetail:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getTextCensorDetail({appId:this.$get("appId")}));case 2:t=a.sent,this.setDefaultInfo(t);case 4:case"end":return a.stop()}},null,this)},saveDetail:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this.data.get(),a=t.appId,i=t.info,!(t.checkedNum<=0)){n.next=6;break}return n.abrupt("return");case 6:return f["default"].keys(g).forEach(function(e){return i[e].value.sort()}),(i=f["default"].extend({},f["default"].cloneDeep(i),{appId:a})).maliciousPromotion.promotionType.length||(i.maliciousPromotion.isChecked=!1),n.next=11,e["default"].awrap(this.ajax.saveTextCensor(i));case 11:this.$set("successed",!0);case 12:case"end":return n.stop()}},null,this)},cancel:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$get("hasChanged")){t.next=4;break}return t.next=4,e["default"].awrap(u.confirm("确认要放弃本次操作？"));case 4:this.toDetail();case 5:case"end":return t.stop()}},null,this)},toDetail:function(){var e=this.$get("appId");this.$aiRedirect("app/detail",{appId:e})},reset:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.$confirm({title:"恢复默认设置",width:600,content:"<p>确定要恢复到系统默认设置吗？<br>（恢复默认后自定义模型阈值与黑名单均会被清空，仅使用系统默认能力）</p>"}));case 2:return a.next=4,e["default"].awrap(this.ajax.resetTextCensor());case 4:t=a.sent,this.$set("info",t);case 6:case"end":return a.stop()}},null,this)}})}),define("ai/page/app/detail/textCensor/textCensor.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content s-if="successed">\n            <div class="text-censor-success">\n                <div class="box-wrap">\n                    <div class="box-icon"></div>\n                    <div class="box-content">\n                        <h2 class="box-title">设置成功</h2>\n                        <p class="box-des">您的设置正在处理中，预计半小时内生效，请耐心等候。</p>\n                        <a on-click="toDetail" class="back-link" href="javascript:void(0)">返回应用详情</a>\n                    </div>\n                </div>\n                <p class="tip-line">温馨提示：</p>\n                <p class="tip-line">1、如您后续操作遇到困难，您可以点击导航栏的“工单”提交问题。</p>\n            </div>\n        </app-content>\n        <app-content s-if="!successed&&info">\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content text-censor-page">\n                <h2>文本审核高级设置</h2>\n                <div s-for="key in keys" class="censor-item">\n                    <div class="item-title">\n                        <xui-checkbox checked="{=info[key].isChecked=}" title="{{key | toTitle}}" />\n                    </div>\n                    <transition-group s-if="info[key].isChecked" class="item-content">\n                        <template s-if="info[key].promotionType">\n                            <div class="item-content-title">需要检测的推广类型</div>\n                            <div class="text-censor-promotion-type-wrap">\n                                <xui-boxgroup box-type="checkbox" datasource="{{promotionTypes}}" value="{=info[key].promotionType=}" />\n                                <xui-tip s-for="item in promotionTypes" layer-width="400" position="tc">\n                                    <p class="text-censor-promotion-type-tip">{{item.hover | raw}}</p>\n                                </xui-tip>\n                            </div>\n                        </template>\n                        <div class="item-content-title">自定义黑白名单</div>\n                        \x3c!-- 黑白名单 --\x3e\n                        <div class="upload-item-wrap">\n                            <upload-item data="{=info[key].blackList=}" list="black" kind="{{key}}" />\n                            <upload-item class="sec-item" data="{=info[key].whiteList=}" list="white" kind="{{key}}" />\n                        </div>\n                        \x3c!-- 提示语 --\x3e\n                        <div class="tip-wrap">\n                            <div class="tip-item">注：</div>\n                            <div class="tip-item">\n                                文本示例及黑白名单设置说明， <strong><a target="_blank" href="//textcensor.bj.bcebos.com/demo/baidu_textcensor_demo.zip">点此下载</a></strong>， 请按照要求填写词典后再上传<br>\n                                \x3c!-- 请先<strong><a href="https://textcensor.bj.bcebos.com/demo/sample_word.txt">下载模板</a></strong>，按照要求填写词典后再上传<br> --\x3e\n                                仅支持大小5M以内的TXT格式文件，且文件名仅支持中文、英文、数字、下划线、中划线的组合\n                            </div>\n                        </div>\n                        \x3c!-- 进度条 --\x3e\n                        <div class="item-content-title">自定义标准值</div>\n                        <slider\n                            s-ref="slider_{{key}}"\n                            type="range"\n                            min="{{info[key].min}}"\n                            max="{{info[key].max}}"\n                            start="{=info[key].value[0]=}"\n                            end="{=info[key].value[1]=}"\n                            startLabel="正常({{info[key].min}})"\n                            endLabel="{{key | toSliderLabel}}({{info[key].max}})"\n                            mark="{{key | toSliderMark}}"\n                        />\n                    </transition-group>\n                </div>\n                <div s-if="checkedNum <= 0" class="error-tip">请至少勾选一项审核服务</div>\n                <div class="btn-wrap">\n                    <xui-button on-click="saveDetail" skin="primary">生效</xui-button>\n                    <xui-button on-click="cancel">取消</xui-button>\n                    <xui-button on-click="reset">恢复默认</xui-button>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/app/detail/textCensor/UploadItem",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui","jquery","saber-cookie","lodash"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](i),l=t["default"](n),u=t["default"](r);module.exports=s["default"]({template:'\n<template>\n    <div class="upload-item">\n        <div s-if="!data" on-click="invokeUpload" class="item-wrap">\n            <span class="item-title">上传{{title}}</span>\n        </div>\n        <div s-else class="item-uploaded">\n            <div class="item-name">{{data.name}}</div>\n            <div>{{title}}</div>\n            <div class="item-ctl-wrap">\n                <div on-click="download" class="item-ctl">\n                    <span class="item-ctl-label">下载</span>\n                </div>\n                <div on-click="invokeUpload" class="item-ctl">\n                    <span class="item-ctl-label">重新上传</span>\n                </div>\n                <div on-click="clearFile" class="item-ctl">\n                    <span class="item-ctl-label">删除</span>\n                </div>\n            </div>\n        </div>\n        <xui-webuploader s-ref="uploader"\n            url="/api/ai/s/textCensor/fileUpload"\n            on-accept="handleAccept($event)"\n            error="{=error=}"\n            sizeLimit="{{5 * 1024 * 1024}}"\n            on-uploader-event="uploaderEvent"\n        />\n    </div>\n</template>',components:{"xui-webuploader":a.WebUploader},initData:function(){return{error:null,list:"white",kind:"",data:null}},computed:{title:function(){return{white:"白名单",black:"黑名单"}[this.data.get("list")]}},invokeUpload:function(){this.clearFile().click()},clearFile:function(){this.$set("data",null);var e=this.ref("uploader").el;return o["default"](e).find(".webuploader-element-invisible").val("")[0]},download:function(){window.open(this.$get("Url").download+"/file?fileId="+encodeURIComponent(this.$get("data.id"))+"&fileType="+this.$get("kind")+u["default"].capitalize(this.$get("list")))},handleAccept:function(e){var t=e.ret,a=t.result,i=t.success,n=t.message;i?this.$set("data",a):this.$set("error",n.global)},uploaderEvent:function(e){"function"==typeof this[e.eventType]&&this[e.eventType].apply(this,e.args)},uploadBeforeSend:function(e,t,a){var i=l["default"].get("bce-user-info")||"";a.csrftoken=i.replace(/"/g,"");var n=this.$route().query.appId,r=this.data.get(),s=r.kind,o=r.list;u["default"].extend(t,{appId:n,kind:s,list:o})}})}),define("ai/page/app/detail/TukuSetting",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./TukuSetting.tpl","ai/common/enums","ai/config/constants"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a);module.exports=r["default"]({template:s["default"],initData:function(){return{item:{},TukuStatus:i.TukuStatus}},computed:{canManage:function(){return!!~n.IMAGE_SEARCH_TUKU_APIIDS_NAMES.names.indexOf(this.data.get("item.apiKey"))},canEnlarge:function(){return!~["poi"].indexOf(this.data.get("item.apiKey"))},qualifyTitle:function(){return"logo"===this.data.get("item.apiKey")?"企业":"实名"}},filters:{capacityFilter:function(e,t){return+e<1e4?e:e/1e4+"w"}},onCreate:function(){this.$aiRedirect("app/tuku/create/index",{appId:this.$get("item.appId"),apiId:this.$get("item.apiId"),apiName:this.$get("item.apiName")})},onEnlarge:function(){this.$aiRedirect("app/tuku/enlarge/index",{appId:this.$get("item.appId"),apiId:this.$get("item.apiId"),apiName:this.$get("item.apiName")})},toAuditing:function(){this.$aiRedirect("app/tuku/enlarge/auditing",{appId:this.$get("item.appId")})},toFailed:function(){this.$aiRedirect("app/tuku/enlarge/failed",{appId:this.$get("item.appId")})},toTukuManage:function(){this.$aiRedirect("app/tuku/manage/index",{appId:this.$get("item.appId"),apiId:this.$get("item.apiId")})}})}),define("ai/page/app/detail/TukuSetting.tpl",[],function(){return'<div class="section custom-config-section">\n    <h3 class="section-title">{{item.title}}：</h3>\n    <div class="section-body">\n        <div class="config-item">\n            <div class="item-desc item-col">\n                <div class="desc">{{item.desc}}</div>\n            </div>\n            <div class="dib" s-if="item.status == TukuStatus.NO_CREATE_TUKU && item.qualificationStatus == \'CERTIFYING\'">\n                <div class="item-status item-status-warning item-col">\n                    <div class="item-status-inner">\n                        <i></i><span>未建库，{{qualifyTitle}}认证审核中</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <a class="ui-ctrl ui-button skin-stringfy skin-stringfy-button" href="{{Url.qualifyResult}}" target="_blank">查看详情</a>\n                </div>\n            </div>\n            <div class="dib" s-elif="item.status == TukuStatus.NO_CREATE_TUKU && item.qualificationStatus == \'CERTIFIED\'">\n                <div class="item-status item-status-success item-col">\n                    <div class="item-status-inner">\n                        <i></i>\n                        <span>未建库，{{qualifyTitle}}认证成功</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <ui-button skin="stringfy" on-click="onCreate">申请建库</ui-button>\n                </div>\n            </div>\n            <div class="dib" s-elif="item.status == TukuStatus.NO_CREATE_TUKU && item.qualificationStatus == \'FAILED\'">\n                <div class="item-status item-status-error item-col">\n                    <div class="item-status-inner">\n                        <i></i>\n                        <span>未建库，{{qualifyTitle}}认证失败</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <a class="ui-ctrl ui-button skin-stringfy skin-stringfy-button" href="{{Url.qualifyResult}}" target="_blank">查看详情</a>\n                </div>\n            </div>\n            <div class="dib" s-elif="item.status == TukuStatus.NO_CREATE_TUKU && item.qualificationStatus == \'INIT\'">\n                <div class="item-status item-status item-col">\n                    <div class="item-status-inner">\n                        <i></i>\n                        <span>未建库</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <ui-button skin="stringfy" on-click="onCreate">申请建库</ui-button>\n                </div>\n            </div>\n            <div class="dib" s-elif="item.status == TukuStatus.CREATE_TUKU_FAILED">\n                <div class="item-status item-status-error item-col">\n                    <div class="item-status-inner">\n                        <i></i><span>建库失败</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <ui-button skin="stringfy" on-click="onCreate">查看详情</ui-button>\n                </div>\n            </div>\n            <div class="dib" s-elif="item.status == TukuStatus.ENLARGE_TUKU_ING">\n                <div class="item-status item-status-warning item-col">\n                    <div class="item-status-inner">\n                        <i></i>\n                        <span>已建库 容量：{{item.capacity | capacityFilter}}张，扩容审核中</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <ui-button skin="stringfy" on-click="toAuditing">查看详情</ui-button>\n                    <ui-button s-if="canManage" skin="stringfy" on-click="toTukuManage">管理图库</ui-button>\n                </div>\n            </div>\n            <div class="dib" s-elif="item.status == TukuStatus.ENLARGE_TUKU_SUCCESS || item.status == TukuStatus.CREATE_TUKU_SUCCESS">\n                <div class="item-status item-status-success item-col">\n                    <div class="item-status-inner">\n                        <i></i>\n                        <span>已建库 容量：{{item.capacity | capacityFilter}}张</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <ui-button s-if="canEnlarge" skin="stringfy" on-click="onEnlarge">申请扩容</ui-button>\n                    <span s-if="!canEnlarge">暂不支持扩容</span>\n                    <ui-button s-if="canManage" skin="stringfy" on-click="toTukuManage">管理图库</ui-button>\n                </div>\n            </div>\n            <div class="dib" s-elif="item.status == TukuStatus.ENLARGE_TUKU_FAILED">\n                <div class="item-status item-status-error item-col">\n                    <div class="item-status-inner">\n                        <i></i><span>已建库 容量：{{item.capacity | capacityFilter}}张，扩容失败</span>\n                    </div>\n                </div>\n                <div class="item-operation item-col">\n                    <ui-button skin="stringfy" on-click="toFailed">查看详情</ui-button>\n                    <ui-button s-if="canManage" skin="stringfy" on-click="toTukuManage">管理图库</ui-button>\n                </div>\n            </div>\n            <div s-else>\n                <div class="item-status item-status-error item-col">\n                    <div class="item-status-inner">\n                        <i></i><span>出错了</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("ai/page/app/edit/ApiDetail",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","jquery","ai/common/util"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i);module.exports=r["default"]({template:'\n<div class="api-service-checkbox-api {{api.classname}}">\n    <xui-checkbox\n        title="{{api.name}}"\n        data-order-url="{{api.orderUrl ? api.orderUrl + \'~apiId=\' + api.id : \'\'}}"\n        checked="{=isChecked=}"\n        disabled="{{!!shouldDisabled[api.id]}}"\n        class="{{!!shouldDisabled[api.id] ? \'tooltipped tooltipped-e\' : \'\'}}"\n        id="{{api.id}}"\n    />\n    <xui-tip\n        s-if="{{api.tip}}"\n        message="{{api.tip}}"\n        skin="warning"\n    />\n    <xui-tip\n        s-elif="{{api.uncheckable}}"\n        message="{{api.name}}为付费接口，您无法免费试用。若想使用该接口服务，请先到\n            <a href=\'{{api.orderUrl}}~apiId={{api.id}}\'>开通付费页面</a>对其进行开通。"\n        skin="warning"\n    />\n</div>\n',initData:function(){return{}},computed:{isChecked:function(){return!!~(this.data.get("appApiList")||"").split(",").indexOf(this.data.get("api").id+"")}},attached:function(){var t=this;this.nextTick(function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(n.sleep(0));case 2:this.setModelCurrentTypeTip();case 3:case"end":return t.stop()}},null,t)}),this.watch("isChecked",function(e){t.dispatch("changeApiList",{id:t.$get("api").id,value:e})})},setModelCurrentTypeTip:function(){for(var e=s["default"](".tooltipped.tooltipped-e"),t=0;t<e.length;t++)e[t].setAttribute("aria-label","本接口服务已默认勾选并不可取消。")}})}),define("ai/page/app/edit/edit",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./edit.tpl","ai/config","ai/common/enums","promise","lodash","ai/common/util","./rules","jquery","./ApiDetail"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=a["default"](t),f=a["default"](i),m=a["default"](s),h=a["default"](o),g=a["default"](u),v=a["default"](d),x=a["default"](c),b=function(e,t,a){return h["default"].intersection(h["default"].map(h["default"].get(h["default"].find(t,{type:r.AppType[e]}),"children",[]),"id"),a.split(",")).length>0},y=[r.AppType.face,r.AppType.easydl];module.exports=p["default"]({template:f["default"],components:{"api-detail":x["default"]},initData:function(){return{speechBundleType:r.BundleType.noNeed,ocrBundleType:r.BundleType.noNeed,speechBundleName:"",ocrBundleNameIos:"",ocrBundleNameAndroid:"",arBundleNameIos:"",arBundleNameAndroid:"",appType:"0",desc:"",name:"",apiList:"",errors:null,appName:"",appApiList:"",initAppApiList:"",speechBundleTypeCheck:h["default"].sortBy(h["default"].reject(r.BundleType.toArray(),function(e){return e.value===r.BundleType.need}),function(e){return e.value===r.BundleType.noNeed?Infinity:~~e.value}),ocrBundleTypeCheck:h["default"].sortBy(h["default"].filter(r.BundleType.toArray(),function(e){return e.value===r.BundleType.need||e.value===r.BundleType.noNeed}),function(e){return e.value===r.BundleType.noNeed?Infinity:~~e.value}),showTip:!1,submitState:!1}},computed:{breadItem:function(){return[{title:"应用列表",url:"#/ai/"+this.data.get("aiAppType")+"/app/list"},{title:this.data.get("appId")?"编辑应用":"创建应用"}]},rules:function(){return g["default"]({AppType:r.AppType,aiAppType:this.data.get("isEasydl")?r.AppType.easydl:this.data.get("aiAppType"),needSpeechBundleName:this.data.get("needSpeechBundleName"),needOcrBundleName:this.data.get("needOcrBundleName"),speechBundleName:this.data.get("speechBundleName"),ocrBundleNameIos:this.data.get("ocrBundleNameIos"),ocrBundleNameAndroid:this.data.get("ocrBundleNameAndroid"),needArBundleName:this.data.get("needArBundleName"),arBundleNameIos:this.data.get("arBundleNameIos"),arBundleNameAndroid:this.data.get("arBundleNameAndroid"),desc:this.data.get("desc"),equipInfo:this.data.get("equipInfo"),appName:this.data.get("appName")})},appTypeText:function(){return r.AppType.getTextFromAlias(this.data.get("aiAppType"))},checkSpeech:function(){return b("speech",this.data.get("apiList"),this.data.get("appApiList"))},checkOCR:function(){return b("ocr",this.data.get("apiList"),this.data.get("appApiList"))},checkAR:function(){return b("ar",this.data.get("apiList"),this.data.get("appApiList"))},checkBicc:function(){return b("bicc",this.data.get("apiList"),this.data.get("appApiList"))},needSpeechBundleName:function(){return this.data.get("checkSpeech")&&this.data.get("speechBundleType")!==r.BundleType.noNeed},needOcrBundleName:function(){return this.data.get("checkOCR")&&this.data.get("ocrBundleType")!==r.BundleType.noNeed},needArBundleName:function(){return this.data.get("checkAR")},needBundleName:function(){return this.data.get("needSpeechBundleName")||this.data.get("needOcrBundleName")||this.data.get("needArBundleName")},ocrBundleNameVisibility:function(){return this.data.get("ocrBundleType")!==r.BundleType.noNeed},speechBundleNameVisibility:function(){return this.data.get("speechBundleType")!==r.BundleType.noNeed},tipText:function(){if((this.data.get("isEasydl")?r.AppType.easydl:this.data.get("aiAppType"))!==r.AppType.face)return"";var e=this.data.get("qualification"),t=e?+e.status:r.AuthStatus.CERTIFYING,a="";return((e?e.type:"")===r.AuthType.INDIVIDUAL||t!==r.AuthStatus.CERTIFYING&&t!==r.AuthStatus.CERTIFIED)&&(a="完成企业认证，即可获得公安验证接口、身份证与名字比对接口、H5视频活体接口的权限，并获赠免费调用量。"),a}},messages:{changeApiList:function(e){var t=e.value;this.handleChangeApiList(t)}},attached:function(){var t,a,i,s;return e["default"].async(function(o){for(var u=this;;)switch(o.prev=o.next){case 0:return o.next=2,e["default"].awrap(l.getAsyncTuple(n.api.paidApiList({})));case 2:return t=o.sent,t[0],a=t[1],o.next=7,e["default"].awrap(l.getAsyncTuple(n.api.appTypeList({})));case 7:if(i=o.sent,i[0],s=i[1],s=s.map(function(e){return{text:e.name,value:e.id}}),this.$$set({isEdit:this.isEdit(),paidApiListString:h["default"].map(a,"name").join("、"),paidApiList:a,appTypeList:s,initAppType:s[0].value}),!this.$get("isEdit")){o.next=17;break}return o.next=15,e["default"].awrap(m["default"].all([this.getAppDetail(),this.getApiList(),this.getIndustryTag()]).then(function(e){var t=e[0],a=e[1],i=e[2];return u.setData(h["default"].assign(t,{commonApiList:a,commonIndustryTag:i}))}));case 15:o.next=19;break;case 17:return o.next=19,e["default"].awrap(m["default"].all([this.getApiList(),this.getIndustryTag()]).then(function(e){var t=e[0],a=e[1],i=u.$get("isEasydl")?r.AppType.easydl:u.$get("aiAppType"),n=h["default"].get(h["default"].find(t,function(e){return e.type===i}),"children"),s=undefined;s=~y.indexOf(i)?n.reduce(function(e,t){return e=[].concat(e,t.children.map(function(e){return e.id}))},[]).join():h["default"].map(n,"id").join(),u.setData({commonIndustryTag:a,apiList:s,commonApiList:t})}));case 19:this.$set("disabledApi",this.shouldDisabled()),this.watchs(),this.nextTick(function(){u.bindApiListEvent()});case 22:case"end":return o.stop()}},null,this)},detached:function(){this.unbindApiListEvent()},handleBundle:function(e,t){e.bundle&&(e.bundle.speech&&(null==r.BundleType.getTextFromValue(""+e.bundle.speech.bundleType)?t.speechBundleType=r.BundleType.noNeed:t.speechBundleType=""+e.bundle.speech.bundleType||t.speechBundleName,t.speechBundleName=e.bundle.speech.bundleName),e.bundle.aip&&(t.ocrBundleType=h["default"].isEmpty(e.bundle.aip)?r.BundleType.noNeed:r.BundleType.need,e.bundle.aip.iosBundleName&&(t.ocrBundleNameIos=e.bundle.aip.iosBundleName,t.arBundleNameIos=e.bundle.aip.iosBundleName),e.bundle.aip.androidBundleName&&(t.ocrBundleNameAndroid=e.bundle.aip.androidBundleName,t.arBundleNameAndroid=e.bundle.aip.androidBundleName)))},getAppApiList:function(e,t){undefined;return t===r.AppType.roboticvision?h["default"].chain(e.commonApiList).find({type:r.AppType.roboticvision}).get("children",[]).map("id").value():e.apiList.split(",")},handleCommonApiList:function(e,t,a,i,n){var s=this;e.commonApiList.forEach(function(e){e.type===r.AppType.unit?(e.name="UNIT",e.tip='UNIT为开发者提供了定制对话和指令的能力，请前往<a href="'+n.unitConfig+'" target="_blank">UNIT配置平台</a>中完成定制'):e.type===r.AppType.antiporn&&(e.tip='图像审核提供一个API接口，支持多种模型服务的灵活组合调用，详情参考<a href="'+n.imgCensor+'" target="_blank">文档链接</a>'),e.type===i?e.expand=!0:h["default"].intersection(h["default"].map(e.children,"id"),t).length>0?e.expand=!0:e.expand=!1,e.children&&e.children.forEach(function(t){var n=[];e.type===i&&n.push("api-service-checkbox-api-current-type"),~y.indexOf(e.type)?t.children.forEach(function(e){a.push(e.id),e.addVersionFlag&&+e.version&&(e.name+="V"+e.version),e.classname=s.getClassName(e.name,n).join(" ")}):(a.push(t.id),t.classname=s.getClassName(t.name,n).join(" ")),t.chargeType===r.ChargeType.noFree&&t.canOpen&&!h["default"].contains(h["default"].map(s.$get("paidApiList"),"id"),t.id)&&(t.uncheckable=!0,t.orderUrl="#/ai/"+e.type+"/order/create")})})},handleIndustryTag:function(e,t){var a=e.commonIndustryTag,i=e.industryTag;this.$$set({industryTag:a,firstIndustryTagDatasource:a.map(function(e){return{text:e.name,value:e.id}})});var n=undefined;t&&i?(this.$set("firstIndustryTag",+i.split(",")[0]),n=h["default"].find(a,"id",this.$get("firstIndustryTag"))):(this.$set("firstIndustryTag",a[0].id),n=a[0]),n.children&&n.children.length?this.$$set({secondIndustryTagDatasource:n.children.map(function(e){return{text:e.name,value:e.id}}),secondIndustryTag:t&&i?i.split(",")[1]:n.children[0].id}):this.$$set({secondIndustryTagDatasource:[],secondIndustryTag:""})},setData:function(e){var t=this.$get(),a=t.Url,i=t.speechBundleType,n=t.ocrBundleType,s=t.speechBundleName,o=t.ocrBundleNameIos,l=t.ocrBundleNameAndroid,u=t.arBundleNameIos,d=t.arBundleNameAndroid,c=t.appType,p=t.desc,f=t.name,m=t.apiList,g=t.isEdit,v=this.$get("isEasydl")?r.AppType.easydl:this.$get("aiAppType"),x=h["default"].assign({},{speechBundleType:i,ocrBundleType:n,speechBundleName:s,ocrBundleNameIos:o,ocrBundleNameAndroid:l,arBundleNameIos:u,arBundleNameAndroid:d,appType:c,desc:p,name:f,apiList:m},{appType:this.$get("initAppType")},h["default"].omit(e,"bundle"));this.handleBundle(e,x);var b=this.getAppApiList(x,v),y=[];this.handleCommonApiList(x,b,y,v,a),this.handleIndustryTag(x,g);var k=h["default"].intersection(b,y);x.apiList=k.join();var T=h["default"].findIndex(x.commonApiList,{type:v});if(T>=0){var w=x.commonApiList.splice(T,1);x.commonApiList=w.concat(x.commonApiList)}this.$$set({apiList:x.commonApiList,appName:x.name,appType:x.appType,appApiList:x.apiList,initAppApiList:x.apiList,speechBundleType:x.speechBundleType,speechBundleName:x.speechBundleName,ocrBundleType:x.ocrBundleType,ocrBundleNameIos:x.ocrBundleNameIos,ocrBundleNameAndroid:x.ocrBundleNameAndroid,arBundleNameIos:x.arBundleNameIos,arBundleNameAndroid:x.arBundleNameAndroid,desc:x.desc}),v!==r.AppType.roboticvision&&v!==r.AppType.ar&&(x.speechBundleType!==r.BundleType.noNeed&&this.$set("speechBundleTypeCheck",[r.BundleType.fromValue(x.speechBundleType)]),x.ocrBundleType!==r.BundleType.noNeed&&this.$set("ocrBundleTypeCheck",[r.BundleType.fromValue(x.ocrBundleType)])),g?this.$$set({equipInfo:x.equipInfo,arPublic:h["default"].get(x,"ar.public",!1)}):this.$$set({equipInfo:"",arPublic:!1})},submit:function(){var t,a,i,n,s,o,u,d,c,p,f,m,h,g,v,x,b,y,k,T,w,I,D,S,A,$,E,L;return e["default"].async(function(C){for(;;)switch(C.prev=C.next){case 0:return t={},C.next=3,e["default"].awrap(this.ref("form").validateForm());case 3:return this.$set("submitState",!0),a=this.$get(),i=a.checkSpeech,n=a.speechBundleType,s=a.speechBundleName,o=a.checkAR,u=a.arBundleNameIos,d=a.arBundleNameAndroid,c=a.checkOCR,p=a.ocrBundleName,f=a.ocrBundleNameIos,m=a.ocrBundleNameAndroid,h=a.appName,g=a.appType,v=a.appApiList,x=a.desc,b=a.aiAppType,y=a.isEdit,k=a.appId,T=a.arPublic,w=a.checkBicc,I=a.equipInfo,D=a.firstIndustryTag,S=a.secondIndustryTag,i&&(t.speech={bundleType:n},t.speech.bundleType!==r.BundleType.noNeed&&(t.speech.bundleName=s)),o?(t.aip={},u&&(t.aip.iosBundleName=u),d&&(t.aip.androidBundleName=d)):c&&(t.aip={},p!==r.BundleType.noNeed&&(f&&(t.aip.iosBundleName=f),m&&(t.aip.androidBundleName=m))),A={name:h,appType:g,apiList:v,bundle:t,desc:x,type:b},y&&(A.appId=k),o&&(A.arPublic=!!T),w&&(A.equipInfo=I,A.industryTag=D,S&&(A.industryTag+=","+S)),C.next=35,e["default"].awrap(l.getAsyncTuple(this.save(A)));case 35:$=C.sent,E=$[0],L=$[1],this.$set("submitState",!1),E&&(E.field&&(this.$toast(E.field,{messageType:"error"}),this.$set("errors",E.field)),this.$toast(E.global||y?"保存失败":"创建失败",{messageType:"error"})),this.$set("savedAppId",L.appId),this.back();case 42:case"end":return C.stop()}},null,this)},save:function(e){return this.ajax.appSave(e)},back:function(){var e=this.$get(),t=e.isEdit,a=e.savedAppId,i=e.service,n=t?"detail":"created";this.$aiRedirect("app/"+n+"~appId="+a+(i?"&service="+i:""))},watchs:function(){var e=this;this.watch("firstIndustryTag",function(t){var a=e.$get("industryTag").filter(function(e){return+e.id==+t});a[0]&&a[0].children&&a[0].children.length?e.$$set({secondIndustryTagDatasource:a[0].children.map(function(e){return{text:e.name,value:e.id}}),secondIndustryTag:a[0].children[0].id}):e.$$set({secondIndustryTagDatasource:[],secondIndustryTag:""})})},isEdit:function(){return!!this.$get("appId")},getAppDetail:function(){return n.api.appDetail({appId:this.$get("appId")})},getApiList:function(){return this.ajax.apiList({type:this.$get("aiAppType")})},getIndustryTag:function(){var e=this.$get("isEasydl")?r.AppType.easydl:this.$get("aiAppType");return n.api.biccIndustryTag({type:e})},bindApiListEvent:function(){v["default"](".api-service-expand").on("click",function(){v["default"](this).parents(".api-service").find(".api-service-checkbox").toggle(),v["default"](this).toggleClass("collapse")})},unbindApiListEvent:function(){v["default"](".api-service-expand").off("click")},handleChangeApiList:function(e){var t=e.id,a=e.value,i=this.$get("appApiList");if(a)i+=","+t;else{var n=i.split(",");n.splice(n.indexOf(t),1),i=n.join(",")}this.$set("appApiList",i)},shouldDisabled:function(){var e=this.$get("appApiList")||"",t=this.$get("apiList"),a=this.$get("isEasydl")?r.AppType.easydl:this.$get("aiAppType"),i={};return[].concat(h["default"].intersection(h["default"].map(function(e,t){return h["default"].reduce(h["default"].get(h["default"].find(e,{type:t}),"children",[]),function(e,t){return[].concat(e,t.name?[t]:t.children||[])},[])}(t,a),"id"),e.split(",")),h["default"].map(h["default"].get(h["default"].find(t,{type:r.AppType.roboticvision}),"children",[]),"id")).forEach(function(e){i[e]=!0}),i},goToList:function(){this.$aiRedirect("app/list")},getClassName:function(e,t){var a=l.realLength(e),i=[].concat(t);return a>32?i.push("api-service-checkbox-api-long-long"):a>15&&i.push("api-service-checkbox-api-long"),i}})}),define("ai/page/app/edit/edit.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content edit-content-new">\n                <h2>{{appId ? \'修改应用信息\' : \'创建新应用\'}}</h2>\n                <div class="form-content">\n                    <xui-form s-ref="form" errors="{=errors=}" rules="{{rules}}" labelWidth="85" class="edit-form">\n                        <xui-item label="应用名称：" name="name" required>\n                            <xui-textbox width="490" value="{=appName=}" placeholder="请输入应用名称"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="应用类型：" name="appType" required>\n                            <xui-select\n                                width="490"\n                                datasource="{{appTypeList}}"\n                                value="{=appType=}"\n                                disabled="{{isEdit}}"\n                            />\n                        </xui-item>\n                        <xui-item label="接口选择：" required>\n                            <div class="ui-form-value">\n                                <div class="api-tip">\n                                    勾选以下接口，使此应用可以请求已勾选的接口服务，注意{{appTypeText}}服务已默认勾选并不可取消。\n                                </div>\n                                <div s-if="{{paidApiListString}}" class="api-paid">\n                                    <span class="api-paid-tip">您已开通付费的接口为：</span>{{paidApiListString}}\n                                </div>\n                                <div class="tip-content" s-if="{{tipText}}">\n                                    {{tipText}}<a href="{{Url.enterpriseQualify}}" target="_blank">立即认证</a>\n                                </div>\n                                <div class="api-content">\n                                    <template s-for="service in apiList">\n                                        <div class="api-service {{service.type}}-api-service">\n                                            <div class="api-service-name">\n                                                <div\n                                                    class="api-service-expand {{service.expand ? \'\' : \'collapse\'}}"\n                                                >\n                                                </div>\n                                                <span class="api-service-name-label">{{service.name}}</span>\n                                                <xui-tip\n                                                    s-if="{{service.tip}}"\n                                                    message="{{service.tip}}"\n                                                    skin="warning"\n                                                    arrow="true"\n                                                    position="tc"\n                                                />\n                                            </div>\n                                            <div class="api-service-checkbox"\n                                                style="display: {{service.expand ? \'block\' : \'none\'}}">\n                                                \x3c!-- 服务类型下没有API --\x3e\n                                                <div s-if="{{service.children.length === 0}}" class="api-service-checkbox-text">\n                                                    敬请期待\n                                                </div>\n                                                <template s-else>\n                                                    <template s-for="api in service.children">\n                                                        \x3c!-- 没有name说明还有分类 --\x3e\n                                                        <template s-if="{{!api.name}}">\n                                                            <div class="api-service-checkbox-text">\n                                                                {{api.label}}\n                                                            </div>\n                                                            \x3c!-- 分类下没有API --\x3e\n                                                            <p s-if="{{api.children.length === 0}}" class="api-service-checkbox-tip">\n                                                                <template s-if="{{isEdit}}">\n                                                                    您还没有已上线的 EasyDL 服务\n                                                                </template>\n                                                                <template s-else>\n                                                                    敬请期待\n                                                                </template>\n                                                            </p>\n                                                            <template s-else>\n                                                                <template s-for="vApi in api.children">\n                                                                    <api-detail san-ref="apiDetail" api="{{vApi}}" apiList="{{apiList}}" appApiList="{{initAppApiList}}" shouldDisabled="{{disabledApi}}"></api-detail>\n                                                                </template>\n                                                            </template>\n                                                        </template>\n                                                        <template s-else>\n                                                            <div class="api-service-checkbox-api {{api.classname}}">\n                                                                <api-detail san-ref="apiDetailOne" api="{{api}}" apiList="{{apiList}}" appApiList="{{initAppApiList}}" shouldDisabled="{{disabledApi}}"></api-detail>\n                                                            </div>\n                                                        </template>\n                                                    </template>\n                                                </template>\n                                            </div>\n                                            <div class="api-error {{service.type}}-api-error"></div>\n                                        </div>\n                                    </template>\n                                </div>\n                            </div>\n                        </xui-item>\n                        <xui-item label="行业标签：" name="industry" required class="industry-tag-row" s-if="{{checkBicc}}">\n                            <div class="ui-form-value">\n                                <p>请准确选择目前所属行业标签，以提供更好的识别服务</p>\n                                <div class="first-industry-tag-wrap">\n                                    <xui-boxgroup\n                                        box-type="radio"\n                                        col-count="{{6}}"\n                                        datasource="{{firstIndustryTagDatasource}}"\n                                        value="{=firstIndustryTag=}"\n                                    />\n                                </div>\n                                <div class="second-industry-tag-wrap" s-if="{{secondIndustryTag}}">\n                                    <div class="split"></div>\n                                    <p>下一步，请继续选择细分行业标签</p>\n                                    <xui-boxgroup\n                                        box-type="radio"\n                                        col-count="{{6}}"\n                                        datasource="{{secondIndustryTagDatasource}}"\n                                        value="{=secondIndustryTag=}"\n                                    />\n                                </div>\n                            </div>\n                        </xui-item>\n                        <xui-item label="设备信息：" class="equip-info-row" name="equipInfo" s-if="{{checkBicc}}">\n                            <xui-textbox multiline\n                                placeholder="请填写呼叫中心设备型号，如 华为UAP2100、华为UAP6600"\n                                value="{=equipInfo=}"\n                                width="490"\n                                class="ui-form-value"\n                            />\n                        </xui-item>\n                        <xui-item\n                            label="包名："\n                            s-if="{{aiAppType !== \'roboticvision\' && checkAR}}"\n                            required\n                            width="490"\n                            name="arBundlePanel"\n                        >\n                            <div class="ui-form-value">\n                                <div class="app-bundle-details">\n                                    <div class="app-bundle-details-item">\n                                        <span class="app-bundle-details-item-key">iOS: </span>\n                                        <xui-textbox\n                                            type="text"\n                                            value="{=arBundleNameIos=}"\n                                            width="430"\n                                            disabled="{=!needArBundleName=}"\n                                        />\n                                    </div>\n                                    <div class="app-bundle-details-item">\n                                        <span class="app-bundle-details-item-key">Android: </span>\n                                        <xui-textbox\n                                            type="text"\n                                            value="{=arBundleNameAndroid=}"\n                                            width="430"\n                                            disabled="{=!needArBundleName=}"\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </xui-item>\n                        <xui-item\n                            label="文字识别包名："\n                            s-if="{{aiAppType !== \'roboticvision\' && aiAppType !== \'ar\' && checkOCR}}"\n                            required\n                            width="490"\n                            name="ocrBundlePanel"\n                        >\n                            <div class="ui-form-value">\n                                <xui-boxgroup\n                                    box-type="radio"\n                                    col-count="{{6}}"\n                                    datasource="{{ocrBundleTypeCheck}}"\n                                    value="{=ocrBundleType=}"\n                                    class="app-bundle-type"\n                                />\n                                <div class="app-bundle-details" s-if="{{ocrBundleNameVisibility}}">\n                                    <div class="app-bundle-details-item">\n                                        <span class="app-bundle-details-item-key">iOS: </span>\n                                        <xui-textbox\n                                            type="text"\n                                            value="{=ocrBundleNameIos=}"\n                                            width="430"\n                                            disabled="{=!needOcrBundleName=}"\n                                        />\n                                    </div>\n                                    <div class="app-bundle-details-item">\n                                        <span class="app-bundle-details-item-key">Android: </span>\n                                        <xui-textbox\n                                            type="text"\n                                            value="{=ocrBundleNameAndroid=}"\n                                            width="430"\n                                            disabled="{=!needOcrBundleName=}"\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </xui-item>\n                        <xui-item class="ui-form-value"\n                            s-if="{{aiAppType !== \'roboticvision\' && aiAppType !== \'ar\' && checkOCR && ocrBundleNameVisibility}}"\n                        >\n                            <div class="app-bundle-tip">\n                                <span>安全升级提示：</span>文字识别SDK现已安全升级，您不仅可直接使用API Key/Secret Key进行授权，还可使用License文件授权的安全模式，保护密钥在移动客户端的安全。使用安全模式，请您到应用详情页面下载License文件。<span>若更新包名，需重新下载。</span>\n                            </div>\n                        </xui-item>\n                        <xui-item\n                            label="语音包名："\n                            s-if="{{aiAppType !== \'roboticvision\' && aiAppType !== \'ar\' && checkSpeech}}"\n                            required\n                            width="490"\n                            name="speechBundlePanel"\n                        >\n                            <div class="ui-form-value">\n                                <xui-boxgroup\n                                    box-type="radio"\n                                    col-count="{{6}}"\n                                    datasource="{{speechBundleTypeCheck}}"\n                                    value="{=speechBundleType=}"\n                                    class="app-bundle-type"\n                                />\n                                <div class="app-bundle-details" s-if="{{speechBundleNameVisibility}}">\n                                    <div class="app-bundle-details-item">\n                                        <xui-textbox\n                                            type="text"\n                                            value="{=speechBundleName=}"\n                                            width="490"\n                                            disabled="{=!needSpeechBundleName=}"\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </xui-item>\n                        <xui-item label="应用描述：" name="desc" required>\n                            <xui-textbox multiline\n                                placeholder="简单描述一下您使用人工智能服务的应用场景，如开发一款美颜相机，需要检测人脸关键点，请控制在500字以内"\n                                value="{=desc=}"\n                                width="490"\n                                class="ui-form-value"\n                            />\n                        </xui-item>\n                        <xui-item s-if="{{checkAR}}" class="app-ar-agreement">\n                            <label class="app-ar-public-check">\n                                <xui-checkbox\n                                    class="ui-checkbox-custom"\n                                    checked="{=arPublic=}"\n                                    disabled="{{isEdit}}"\n                                />\n                                <div class="check-tip">同意授权将我的AR内容推荐至百度各APP渠道发布</div>\n                            </label>\n                        </xui-item>\n                        <xui-item>\n                            <div class="ui-form-buttons">\n                                <xui-button s-if="{{isEdit}}" skin="ok" on-click="submit" disabled="{{submitState}}">保存修改</xui-button>\n                                <xui-button s-if="{{!isEdit}}" data-track-id="create_app" skin="ok"\n                                    data-track-name="创建应用-立即创建"\n                                    on-click="submit"\n                                    disabled="{{submitState}}"\n                                >\n                                    立即创建\n                                </xui-button>\n                                <xui-button on-click="goToList">取消</xui-button>\n                        </xui-item>\n                    </xui-form>\n                    <div class="edit-tips"\n                        data-ui-type="Panel" data-ui-id="bundleAboutPanel"\n                        data-ui-hidden="true" s-if="{{needBundleName}}"\n                    >\n                        <h3>关于包名</h3>\n                        <h4>请提供您的应用包名值：</h4>\n                        <p>您提供的信息被作为验证密钥使用，请认真填写。提交后如果发现信息有误，可在应用编辑中进行包名更新。提示：选定的包名使用平台（iOS/Android）一经保存，在后续应用编辑中不可修改。</p>\n                        <h4>包名是什么？</h4>\n                        <p>安卓包名（Package Name）作为应用的唯一标识。有的软件在使用中会建立包名的文件夹，然后在里面存放数据。比如应用为“百度abc”，包名就是com.baidu.abc。iOS端的包名称为Bundle identifier，同样指代应用的标识符。</p>\n                        <h4>必须填写包名么？</h4>\n                        <p>如果您仅使用REST API的话，则可以省略此步骤，选择「不需要」即可。后续可以随时根据需要，在应用编辑中添加包名。</p>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/app/edit/index",["exports","module","./edit","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/app/edit/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default","ai/common/util"],function(exports,module,e,t,a,i){var n=a["default"](t);module.exports=function(t){var a=t.AppType,r=t.aiAppType,s=t.needSpeechBundleName,o=t.needOcrBundleName,l=t.speechBundleName,u=t.ocrBundleNameIos,d=t.ocrBundleNameAndroid,c=t.needArBundleName,p=t.arBundleNameIos,f=t.arBundleNameAndroid,m=t.desc,h=t.equipInfo,g=t.appName,v=/^([\w\$-]+\.)*[\w\$-]+$/,x={name:[{validator:function(e,t,a,n){if(g){i.realLength(g)>20?a("不能超过20个字节"):/^[A-Za-z0-9_\\\-\u4e00-\u9fa5]+$/.test(g)?a():a("格式不符合要求")}else a("请填写应用名称")}}],equipInfo:[{validator:function(e,t,a,i){h&&h.length>200?a("不能超过200个字符"):a()}}],desc:[{validator:function(e,t,a,n){if(m){i.realLength(m)>500?a("不能超过500个字符"):a()}else a("请填写应用描述")}}],speechBundlePanel:[{validator:function(e,t,i,o){r===a.ar||!s||n["default"].trim(l)?r!==a.ar&&s&&n["default"].trim(l)&&!v.test(l)?i("格式不符合要求"):i():i("请填写语音包名")}}],ocrBundlePanel:[{validator:function(e,t,a,i){!o||n["default"].trim(u)||n["default"].trim(d)?o&&n["default"].trim(u)&&!v.test(u)?a("iOS包名格式不符合要求"):o&&n["default"].trim(d)&&!v.test(d)?a("Android包名格式不符合要求"):a():a("iOS 和 Android 包名至少填写一项")}}],arBundlePanel:[{validator:function(e,t,a,i){!c||n["default"].trim(p)||n["default"].trim(f)?c&&n["default"].trim(p)&&!v.test(p)?a("iOS包名格式不符合要求"):c&&n["default"].trim(f)&&!v.test(f)?a("Android包名格式不符合要求"):a():a("iOS 和 Android 包名至少填写一项")}}]};return new e["default"](x)}}),define("ai/page/app/faceAudit/faceAudit",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./faceAudit.tpl","ai/common/component","san-xui","ai/config","lodash","ai/common/util","ai/components/index","san-transition"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=i["default"](a),f=i["default"](n),m=i["default"](r),h=i["default"](l),g=m["default"]({template:"<div>\n        <slot></slot>\n    </div>"});module.exports=p["default"]({template:f["default"],components:{slider:d.Slider,"transition-group":c.transition("fade")(g),"file-upload-preview":d.UploadAndPreview},initData:function(){return{breadcrumb:[],upload:{sizeLimit:5242880,options:{accept:{title:"Txt",extensions:"txt",mimeTypes:"text/plain"}}},detail:{},antiporn:[],antipornDatasurce:[{text:"需要",value:!0},{text:"不需要",value:!1}],imageText:{},face:{limitFaceNum:[]},faceFileInfo:{}}},computed:{breadItem:function(){return[{title:"应用列表",url:"#/ai/"+this.data.get("aiAppType")+"/app/list"},{title:"应用详情",url:"#/ai/"+this.data.get("aiAppType")+"/app/detail~appId="+this.data.get("appId")},{title:"头像审核设置"}]},limitNumErrStatus:function(){var e=this.data.get("face"),t=e.limitFaceNum,a=t[0],i=t[1],n=/^\d+$/;return!!e.isLimitFaceNum&&(!n.test(a)||!n.test(i)||Number(i)<Number(a))},imgUploadUrl:function(){return"/ai/upload?kind=imageText&appId="+this.data.get("appId")},politicianUploadUrl:function(){return"/ai/upload?kind=politician&appId="+this.data.get("appId")}},attached:function(){var e,a;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(u.getAsyncTuple(o.api.faceAuditDetail({appId:this.$get("appId")})));case 2:e=i.sent,e[0],a=e[1],this.$set("detail",a),this.setAntipornData(a),this.setImageTextData(a),this.setFaceData(a),this.watch("faceFileInfo",function(e){n.$set("face",h["default"].extend({},n.$get("face"),{politicianFileId:e.fileId,politicianFileName:e.fileName,politicianFileUrl:e.fileUrl}))});case 10:case"end":return i.stop()}},null,this)},setAntipornData:function(e){e.antiporn&&(e.antiporn.forEach(function(e){e.mark=[{value:e.recommend,text:e.recommend+"（推荐值）",showBar:!0}]}),this.$set("antiporn",e.antiporn))},setImageTextData:function(e){this.$set("imageText",e.imageText)},setFaceData:function(e){var t=e.face,a=t.politicianFileId,i=t.politicianFileName,n=t.politicianFileUrl;this.$$set({face:e.face,faceFileInfo:{fileId:a,fileName:i,fileUrl:n}})},handleAcceptSuccessImg:function(e){var t=e.value;this.handleAcceptSuccess(t,"imageText")},handleAcceptSuccessFace:function(e){var t=e.value;this.handleAcceptSuccess(t,"faceFileInfo")},handleAcceptSuccess:function(t,a){this.$set(""+a,e["default"]({},this.$get(""+a),t)),s.Toast.success((t.fileName||"")+"保存成功")},clearImgFile:function(){this.$$set({"imageText.fileId":"","imageText.fileName":"","imageText.fileUrl":"","imageText.isVague":!1})},clearFaceFile:function(){this.$$set({faceFileInfo:{fileId:"",fileName:"",fileUrl:""},"face.exPoliticianByCustom":!1})},submit:function(){var e=this,t=this.$get(),a=t.limitNumErrStatus,i=t.imageText,n=t.face,r=t.antiporn,s=t.appId,l=r.map(function(e){return{id:e.id,name:e.name,needed:e.needed,recommend:e.recommend,value:e.value}});a||o.api.saveFaceAudit(h["default"].extend({},{appId:s,imageText:i,face:n,antiporn:l})).then(function(){e.$aiRedirect("app/success~appId="+s)})},cancel:function(){this.$aiRedirect("app/detail~appId="+this.$get("appId"))}})}),define("ai/page/app/faceAudit/faceAudit.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content face-audit">\n                <h2>用户头像审核高级设置</h2>\n                <div class="setting-content">\n                    <div class="content-desc">\n                        设置您的过滤规则，为您的业务定制专属模型。 <br>\n                        当您首次进入该页面时，页面展示内容是系统默认的审核规则。若您未做任何修改，系统将使用默认规则。\n                    </div>\n                    <div class="section">\n                        <div class="section-title">黄反过滤设置</div>\n                        <div class="section-body">\n                            <p class="section-desc">\n                                默认规则：过滤色情、性感、暴恐图片，对分值超过推荐阈值的图片，接口返回审核不通过。 <br>\n                                您可以根据需要修改过滤维度，并调整审核不通过的阈值。\n                            </p>\n                            <div s-for="item, index in detail.antiporn" class="antiporn-item">\n                                <div class="antiporn-title">\n                                    过滤{{item.name}}图片：\n                                </div>\n                                <div class="antiporn-body">\n                                    <div class="form-item">\n                                        <div class="form-item-value">\n                                            <xui-boxgroup\n                                                box-type="radio"\n                                                col-count="{{2}}"\n                                                datasource="{{antipornDatasurce}}"\n                                                value="{=antiporn[index].needed=}"\n                                            />\n                                        </div>\n                                    </div>\n                                    <transition-group s-if="{{antiporn[index].needed}}">\n                                        <div class="antiporn-setting" >\n                                            <div class="form-item">\n                                                <p class="antiporn-desc">请设置{{item.name}}阈值，若图片{{item.name}}分值超过阈值，则认为审核不通过，需对其过滤</p>\n                                                <slider\n                                                    type="single"\n                                                    min="{{0}}"\n                                                    max="{{1}}"\n                                                    single="{=antiporn[index].value=}"\n                                                    startLabel="0"\n                                                    endLabel="1"\n                                                    mark="{{antiporn[index].mark}}"\n                                                    width="{{400}}"\n                                                />\n                                            </div>\n                                            <div class="tip-content" s-if="{{antiporn[index].value === 0}}">温馨提示：阈值为0，表示所有图片都将识别为{{item.name}}图片</div>\n                                            <div class="tip-content" s-if="{{antiporn[index].value === 1}}">温馨提示：阈值为1，表示所有图片都将识别为非{{item.name}}图片</div>\n                                        </div>\n                                    </transition-group>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="section">\n                        <div class="section-title">图文过滤设置</div>\n                        <div class="section-body">\n                            <p class="section-desc">\n                                对图片中的违规文字进行识别和过滤。 <br>\n                                通过上传自定义词条，开启此功能，对于包含相应文字的图片，接口返回审核不通过。若您未上传词条，则系统默认不进行图文过滤。\n                            </p>\n                            <div class="center-block">\n                                <p>\n                                    请将需要进行过滤的特定词句写入一个文本中，并上传。文本示例及说明， <a href="{{Url.imageTextDemo}}" target="_blank">点此下载</a>\n                                </p>\n                                <file-upload-preview\n                                    url="{{imgUploadUrl}}"\n                                    on-uploadFileSuccess="handleAcceptSuccessImg"\n                                    options="{{upload.options}}"\n                                    data="{{imageText}}"\n                                    on-clearFile="clearImgFile"\n                                >\n                                </file-upload-preview>\n                                <div>\n                                    <xui-checkbox checked="{=imageText.isVague=}" title="是否开通模糊匹配处理" class="checkbox-span" disabled="{{!imageText.fileId}}"/>\n                                    <xui-tip position="tc" class="tip-border-color">\n                                        <p style="width:150px">\n                                            在特定词条中间任意加入混淆字符 （字符数不超过8个）， 仍然可以被检测和过滤。如“爆炸”被设定为需要过滤的词条，则开通此功能后，“爆xxx我%**&炸”也可以被识别和过滤。\n                                        </p>\n                                    </xui-tip>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="section">\n                        <div class="section-title">人脸检测和过滤设置</div>\n                        <div class="section-body">\n                            <p class="section-desc">\n                                默认规则：图片中仅包含一张人脸，且不能包含明星、公众人物、政治人物。 <br>\n                                您可以根据需要，修改过滤规则。\n                            </p>\n                            <div class="center-block">\n                                <div>\n                                    <xui-checkbox checked="{=face.exStar=}" title="过滤包含明星、公众人物的图片" class="checkbox-span"/>\n                                </div>\n                                <div>\n                                    <xui-checkbox checked="{=face.exPolitician=}" title="过滤包含政治人物的图片" class="checkbox-span"/>\n                                    <transition-group  s-if="{{face.exPolitician}}" class="exPolitician-block ml20">\n                                        <p>系统默认支持通用政治人物的识别和过滤，只要您勾选该功能即生效。</p>\n                                        <p>\n                                            您也可以设置自定义的人物名单：请将需要进行过滤的政治人物姓名写入一个文本中并上传。文本示例及说明，\n                                            <a href="{{Url.politicianDemo}}" target="_blank">点此下载</a>\n                                        </p>\n                                        <file-upload-preview\n                                            url="{{politicianUploadUrl}}"\n                                            on-uploadFileSuccess="handleAcceptSuccessFace"\n                                            options="{{upload.options}}"\n                                            data="{{faceFileInfo}}"\n                                            on-clearFile="clearFaceFile"\n                                        >\n                                        </file-upload-preview>\n                                        <div>\n                                            <xui-checkbox checked="{=face.exPoliticianByCustom=}" title="仅过滤上传文本中的政治人物" class="checkbox-span" disabled="{{!face.politicianFileId}}"/>\n                                            <xui-tip message="系统默认支持通用政治人物的识别和过滤，若选中则仅识别您自定义的人物。" position="tc"  class="tip-border-color"/>\n                                        </div>\n                                    </transition-group >\n                                </div>\n                                <div class="limitFaceNum-form-item">\n                                    <xui-checkbox checked="{=face.isLimitFaceNum=}" title="限定图片中包含的人脸数量" class="checkbox-span"/>\n                                    <transition-group s-if="{{face.isLimitFaceNum}}" class="faceLimit-block ml20">\n                                        图片中允许出现的人脸数量范围：\n                                        <xui-textbox type="number" width="30" value="{=face.limitFaceNum[0]=}"/> 个 -\n                                        <xui-textbox type="number" width="30" value="{=face.limitFaceNum[1]=}"/> 个\n                                        <xui-tip message="若设置为1-1，则代表只有包含1个人脸的图片才能通过审核；若设置为0-3，则代表图片中可以没有人脸或可包含1或2或3个人脸。" position="tc"  class="tip-border-color"/>\n                                        <div s-if="{{limitNumErrStatus}}" class="error-msg">填写的人脸数量范围不正确，请重新填写！</div>\n                                    </transition-group>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div>\n                        <xui-button skin="primary" style="margin-left:100px" on-click="submit">确认</xui-button>\n                        <xui-button style="margin-left:20px" on-click="cancel">取消</xui-button>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/app/faceAudit/index",["exports","module","./faceAudit","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/app/list/fields",["exports","module","underscore","babel-runtime/helpers/interop-require-default","moment","ai/common/enums","ai/config"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a);module.exports=function(e){return[{title:"",content:function(e,t){return t+1},stable:!0,width:60},{title:"应用名称",content:function(t){return'\n                <a href="#/ai/'+e+"/app/detail~appId="+r["default"].escape(t.appId)+'">'+r["default"].escape(t.name)+"</a>\n            "}},{title:"AppID",stable:!0,width:100,content:function(e){return r["default"].escape(e.devAppId)}},{title:"API Key",content:function(e){return r["default"].escape(e.apiKey)}},{title:"Secret Key",content:function(e,t){var a=e.showSk,i=e.token;return(a?r["default"].escape(i):new Array(8).join("*"))+'<a\n                class="toggle-sk"\n                href="javascript:void(0);"\n                data-command="TOGGLESK"\n                data-command-args="'+t+'">\n                '+(a?"隐藏":"显示")+"\n            </a>"}},{title:"创建时间",stable:!0,width:165,content:function(e){return s["default"](e.createTime).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",content:function(t,a){return['<a href="#/ai/'+e+"/report/index~appId="+r["default"].escape(t.appId)+'">报表</a>','<a href="#/ai/'+e+"/app/detail~appId="+r["default"].escape(t.appId)+'">管理</a>'].concat(e===i.AppType.face?['<a href="#/ai/'+e+"/facelib/groupList~appId="+t.appId+'">查看人脸库</a>']:[],e===i.AppType.ar?['<a href="'+n.Url.arContent+'" target="_blank">内容制作</a>']:[],['<a href="javascript:void(0)"\n                    style="color:red" data-command="DELETE" data-command-args="'+a+'">删除</a>']).join("&nbsp;&nbsp;&nbsp;")}}]}}),define("ai/page/app/list/index",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./fields"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i),o=a["default"](n);module.exports=r["default"]({template:s["default"],initData:function(){return{pager:{pageSize:20,pageNo:1,total:0},breadItem:[{title:"应用列表"}],fields:o["default"](this.aiAppType),datasource:[]}},computed:{noDataHtml:function(){return'<div class="app-list-no-data">\n                <div class="no-data-helper">您还没有创建任何应用！</div>\n                '+(this.data.get("disableCreateButton")?"":'<a href="#/ai/'+this.data.get("aiAppType")+'/app/create">马上创建></a>')+"\n            </div>"}},created:function(){this.loadData()},loadData:function(){var e=this,t=this.$get("pager"),a=t.pageSize,i=t.pageNo;this.ajax.appList({type:this.aiAppType,pageSize:a,pageNo:i}).then(function(t){var a=t.pageNo,i=t.totalCount,n=t.result;if(!n.length&&1!==a)return e.$set("pager.pageNo",Math.max(a-1,1)),void e.loadData();e.$$set({"pager.pageNo":a,"pager.total":i,datasource:n})})},getEasydlAppApiList:function(e){return this.ajax.easydlAppServiceList({appId:e,type:this.$get("aiAppType")})},createApp:function(){this.$redirect("#/ai/"+this.$get("aiAppType")+"/app/create")},onPagerChange:function(e){var t=e.pageNo;this.data.set("pager.pageNo",t),this.loadData()},onCommand:function(e){var t=e.name,a=e.args,i={TOGGLESK:"toggleSk",DELETE:"deleteApp"}[t];i&&this[i](+a,this.$get("datasource")[a])},deleteApp:function(t,a){var i,n,r=a.name,s=a.appId;return e["default"].async(function(t){for(var a=this;;)switch(t.prev=t.next){case 0:return i='确认要删除应用"'+r+'"吗？',t.next=3,e["default"].awrap(this.getEasydlAppApiList(s));case 3:return(n=t.sent)&&n.length&&(i='应用"'+r+'"已被 EasyDL 定制化服务授权，确定要删除吗？'),t.next=7,e["default"].awrap(this.$confirm({title:"提示",width:600,content:i}));case 7:this.ajax.appDelete({appId:s}).then(function(){var e=a.$get("pager"),t=e.total,i=e.pageNo;t%e.pageSize==1&&a.$set("pager.pageNo",Math.max(i-1,1)),a.loadData()});case 8:case"end":return t.stop()}},null,this)},toggleSk:function(e,t){t.showSk=!t.showSk,this.$set("datasource["+e+"]",t),this.ref("table").__getESUI().updateRowAt(e,t)}})}),define("ai/page/app/list/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content app-list-content">\n                <h2>应用列表</h2>\n                <div s-if="cheatingUser" class="toast-label-risk ui-ctrl ui-toastlabel ui-toastlabel-alert">\n                    <span class="ui-toastlabel-content">\n                        <i class="iconfont icon-warning-new"></i>\n                        <span>抱歉，您的账户存在异常，需要实名认证才可创建应用，</span>\n                        <a target="_blank" href="/qualify/">立即认证</a>\n                    </span>\n                </div>\n                <div class="button-wrap">\n                    <xui-button data-track-id="app_list_create_app"\n                        data-track-name="应用列表-创建应用"\n                        on-click="createApp"\n                        icon="plus"\n                        skin="primary"\n                        disabled="{{disableCreateButton}}"\n                        tipPosition="lt"\n                        tip="<p style=\'width: 250px\'>抱歉，您的账户存在异常，需要实名认证才可创建应用，<a target=\'_blank\' href=\'/qualify/\'>立即认证</a></p>"\n                    >\n                        创建应用\n                    </xui-button>\n                </div>\n                <div class="table-full-wrap">\n                    <ui-table\n                        s-ref="table"\n                        datasource="{{datasource}}"\n                        fields="{{fields}}"\n                        on-command="onCommand($event)"\n                        extensions="Command"\n                        columnResizable="{{true}}"\n                        noDataHtml="{{noDataHtml}}"/>\n                    <xui-pager on-change="onPagerChange($event)"\n                        size="{{pager.pageSize}}"\n                        page="{=pager.pageNo=}"\n                        count="{{pager.total}}" />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/app/success/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{title:"",desc:"",timer:null}},attached:function(){var e=this;this.$$set({title:this.$get("title")||"设置成功",desc:this.$get("desc")||"您的设置正在处理中，预计5分钟内生效，请耐心等候。"});var t=this.$get("timer");t?(clearTimeout(t),this.$set("timer",null)):this.$set("timer",setTimeout(function(){e.$aiRedirect("app/detail~appId="+e.$get("appId"))},3e3))},disposed:function(){clearTimeout(this.$get("timer")),this.$set("timer",null)}})}),define("ai/page/app/success/index.tpl",[],function(){return'<div class="ai-success">\n    <div class="content-wrap">\n        <div class="content-panel">\n            <div class="success-tip">\n                <h2>{{title}}</h2>\n                <p>{{desc}}<p>\n                <p>\n                    <a href="#/ai/{{aiAppType}}/app/detail~appId={{appId}}">返回应用详情</a>\n                </p>\n            </div>\n            <div class="additional-tips">\n                <h3>温馨提示：</h3>\n                <p>1、如您后续操作遇到困难，您可以点击导航栏的“工单”提交问题。</p>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("ai/page/applyQuota/applyQuota",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./applyQuota.tpl","san-xui","ai/common/enums","./validator","ai/common/util","ai/components/UploadItem"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=n["default"](i),p=n["default"](r),f=n["default"](l),m=n["default"](d);module.exports=c["default"]({template:p["default"],components:{"xui-form":s.Form,"xui-item":s.FormItem,"xui-textbox":s.TextBox,"xui-boxgroup":s.BoxGroup,"upload-item":m["default"]},initData:function(){return{audioExtDatasource:o.AudioExt.toArray(),maxQpsDatasource:[].concat([30,50,100,150,200].map(function(e){return{text:e,value:e}}),[{text:"其他",value:-1}]),reasonDatasource:[{title:"短期调研测试或活动运营",value:1},{title:"长期稳定使用",value:2}],formData:{apiName:"",sdkTypeList:[],sdkType:"",maxQps:"",maxQpsInput:"",estimatedCall:"",qpsDayCount:"",qpsDayHour:"",isTts:!0,audioExt:"",areaPercent:"",company:"",phone:"",email:"",desc:"",reason:1,productImages:[],productImage:null},errors:null,uploadConfig:{title:"上传截图",url:"/api/ai/s/speech/quota/fileUpload",show:!1,sizeLimit:4194304,options:{accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/gif,image/jpeg,image/bmp,image/png"}},imgPreview:!0},limit:{maxQps:1e5,maxEstimatedCall:1e9}}},computed:{rules:function(){return f["default"]({pageLoaded:this.data.get("pageLoaded"),isTts:this.data.get("formData.isTts")})},breadItem:function(){return[{title:"概览",url:"#/ai/"+this.data.get("aiAppType")+"/overview/index"},{title:"更高QPS申请"}]},sdkDatasource:function(){return o.SdkType.toArray()},qpsTbDisabled:function(){return-1!==this.data.get("formData.maxQps")},qpsNeeded:function(){try{var e=this.data.get("formData"),t=e.qpsDayCount,a=e.qpsDayHour;if(t=~~t,a=+a,t<1||a<1)return 0;var i=~~(t/(60*a*60));return i<0?0:i}catch(n){return 0}}},attached:function(){return t["default"].async(function(e){for(var a=this;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.getHistoryInfo());case 2:this.watchRangeInput(),this.watch("formData.maxQps",function(e){-1!==e&&a.nextTick(function(){return a.ref("form").validateFormItem("maxQpsInput")})});case 4:case"end":return e.stop()}},null,this)},watchRangeInput:function(){var e=this,t=function(t,a,i,n){return function(r){r.length&&(n||(r=~~r),r>a&&(r=a),r<i&&(r=i),e.$set("formData."+t,r+""))}};this.watch("formData.maxQpsInput",t("maxQpsInput",this.data.get("limit.maxQps"),1)),this.watch("formData.estimatedCall",t("estimatedCall",this.data.get("limit.maxEstimatedCall"),1)),this.watch("formData.qpsDayCount",t("qpsDayCount",this.data.get("limit.maxEstimatedCall"),1)),this.watch("formData.qpsDayHour",t("qpsDayHour",24,1,!0))},getHistoryInfo:function(){var e;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.getQuota({apiId:this.$get("apiId")}));case 2:return e=i.sent,e.sdkTypeList=e.sdkType.split(",").filter(function(e){return e.length}).map(function(e){return+e}),e.maxQps=0===e.maxQps?this.$get("maxQpsDatasource")[0].value:+e.maxQps,e.isTts||(e.audioExt=0===e.audioExt?this.$get("audioExtDatasource")[0].value:+e.audioExt),e.reason=0===e.reason?this.$get("reasonDatasource")[0].value:+e.reason,~this.$get("maxQpsDatasource").map(function(e){return e.value}).indexOf(e.maxQps)||(e.maxQpsInput=e.maxQps,e.maxQps=-1),e.productImage=e.productImages&&e.productImages.length?e.productImages[0]:null,this.$set("formData",e),i.abrupt("return",new a["default"](function(e){n.nextTick(function(){n.$set("pageLoaded",!0),e()})}));case 11:case"end":return i.stop()}},null,this)},back:function(){this.$aiRedirect("overview/index")},getSubmitData:function(){var t=this.$get("apiId"),a=this.$get("formData"),i=e["default"]({apiId:t},a);return i.sdkType=i.sdkTypeList.join(","),i.productImageIds=i.productImage&&i.productImage.id?[i.productImage.id]:[],-1===i.maxQps&&(i.maxQps=+i.maxQpsInput),this.$get("formData.isTts")&&delete i.audioExt,["isTts","apiName","sdkTypeList","qpsDayCount","qpsDayHour","productImages","productImage","maxQpsInput"].forEach(function(e){delete i[e]}),i},submit:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(u.getAsyncTuple(this.ref("form").validateForm()));case 2:if(e=a.sent,!e[0]){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,t["default"].awrap(this.ajax.applyQuota(this.getSubmitData()));case 8:this.$toast("提交成功"),this.back();case 10:case"end":return a.stop()}},null,this)}})}),define("ai/page/applyQuota/applyQuota.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content apply-quota-page">\n                <h2>更高QPS申请</h2>\n                <xui-form s-ref="form" rules="{{rules}}" formData="{=formData=}" labelWidth="120" errors="{=errors=}">\n                    <xui-item label="申请接口">\n                        <span class="lbl-txt">{{formData.apiName}}</span>\n                    </xui-item>\n                    <xui-item label="接入方式" required name="sdkTypeList">\n                        <xui-boxgroup box-type="checkbox" datasource="{{sdkDatasource}}" value="{=formData.sdkTypeList=}" />\n                    </xui-item>\n                    <xui-item label="预估最高QPS" required name="maxQps" class="maxqps-wrap">\n                        <xui-boxgroup style="display: inline-block;" box-type="radio" datasource="{{maxQpsDatasource}}" value="{=formData.maxQps=}" />\n                    </xui-item>\n                    <xui-item name="maxQpsInput" class="maxQpsInput-item">\n                        <xui-textbox value="{=formData.maxQpsInput=}" type="number" min="{{1}}" max="{{limit.maxQps}}" disabled="{{qpsTbDisabled}}" />\n                    </xui-item>\n                    <xui-item label="预估每日调用量" required name="estimatedCall">\n                        <xui-textbox value="{=formData.estimatedCall=}" type="text" />\n                    </xui-item>\n                    <xui-item label=" ">\n                        <div slot="label">\n                            <span>QPS计算公式</span>\n                            <xui-tip position="tc">\n                                <div  style="width:400px;">\n                                    <p>QPS（query per second）指每秒向服务器发送的请求数量峰值，相当于每个API接口每秒可以允许请求的并发上限量。</p>\n                                    <p>计算公式：预计日调用量/预计处理时长（单位：秒）= 需求QPS</p>\n                                    <p style="color:#f00;">请填入日调用量和每天处理小时数，计算您需要的QPS</p>\n                                </div>\n                            </xui-tip>\n                        </div>\n                        <span>日调用量</span>\n                        <xui-textbox value="{=formData.qpsDayCount=}" min="{{1}}" max="{{limit.maxEstimatedCall}}" width="120" type="number" />\n                        <span style="margin-left: 10px;">每天处理</span>\n                        <xui-textbox value="{=formData.qpsDayHour=}" min="{{1}}" max="{{24}}" width="120" type="number" />\n                        <span>小时</span>\n                        <span style="margin-left: 10px;">需求QPS量：</span>\n                        <span>{{ qpsNeeded }}</span>\n                    </xui-item>\n                    <xui-item s-if="!formData.isTts" label="音频格式" required name="audioExt">\n                        <xui-boxgroup box-type="radio" datasource="{{audioExtDatasource}}" value="{=formData.audioExt=}" />\n                    </xui-item>\n                    <xui-item label="接入地域比例">\n                        <xui-textbox width="400" value="{=formData.areaPercent=}" type="text" placeholder="填写以“；”隔开，如：北方 10%；南方 50%；其他 40%" />\n                    </xui-item>\n                    <xui-item label="公司名称" required name="company">\n                        <xui-textbox value="{=formData.company=}" placeholder="请输入公司名称" />\n                    </xui-item>\n                    <xui-item label="联系电话" required name="phone">\n                        <xui-textbox value="{=formData.phone=}" placeholder="请输入联系电话" />\n                    </xui-item>\n                    <xui-item label="联系邮箱" required name="email">\n                        <xui-textbox value="{=formData.email=}" placeholder="请输入联系邮箱" />\n                    </xui-item>\n                    <xui-item label="应用介绍" required name="desc">\n                        <xui-textbox multiline="{{true}}" value="{=formData.desc=}" placeholder="请描述使用场景，应用功能及特点，不超过1000字" />\n                    </xui-item>\n                    <xui-item label="提升配额原因" required name="reason">\n                        <xui-boxgroup box-type="radio"\n                            item-width="200"\n                            datasource="{{reasonDatasource}}"\n                            value="{=formData.reason=}"/>\n                    </xui-item>\n                    <xui-item label="应用产品截图：">\n                        <upload-item title="{{uploadConfig.title}}"\n                            url="{{uploadConfig.url}}"\n                            show="{{uploadConfig.show}}"\n                            sizeLimit="{{uploadConfig.sizeLimit}}"\n                            options="{{uploadConfig.options}}"\n                            imgPreview="{{uploadConfig.imgPreview}}"\n                            data="{=formData.productImage=}">\n                        </upload-item>\n                    </xui-item>\n                    <xui-item label=" ">\n                        <xui-button on-click="submit" skin="primary">提交申请</xui-button>\n                        <xui-button on-click="back">取消</xui-button>\n                    </xui-item>\n                </xui-form>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/applyQuota/index",["exports","module","./applyQuota","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/applyQuota/validator",["exports","module","babel-runtime/helpers/extends","async-validator"],function(exports,module,e,t){module.exports=function(a){return a.pageLoaded?new t["default"](e["default"]({sdkTypeList:{required:!0,message:"请选择接入方式"},maxQps:{required:!0,message:"请选择预估最高QPS"},maxQpsInput:function(e,t,a,i){if(-1==+i.maxQps){(t=+t)>0&&t<=1e5?a():a(t>1e5?"QPS 不能超过十万":"请输入正确数值")}else a()},estimatedCall:function(e,t,a){var i=undefined;t?+t>1e9&&(i="调用量不能超过十亿"):i="请输入预估每日调用量",a(i)}},!a.isTts&&{audioExt:{required:!0,message:"请选择音频格式"}},{company:[{required:!0,message:"请输入公司名称"},{max:100,message:"公司名称最长100个字"}],phone:[{required:!0,message:"请输入联系电话"},{pattern:/^\d{5,11}$/,message:"请输入正确格式的电话"}],email:[{required:!0,message:"请输入联系邮箱"},{type:"email",message:"请输入正确的联系邮箱"}],desc:[{required:!0,message:"请输入应用介绍"},{max:1e3,message:"应用介绍不能超过1000个字"}],reason:[{required:!0,message:"请选择提升配额原因"}]})):new t["default"]({})}}),define("ai/page/asr/asr",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./asr.tpl","san-xui","./AsrWord"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](n);module.exports=r["default"]({template:s["default"],components:{"xui-tip":i.Tip},initData:function(){return{breadItem:[{title:"离线词&语义设置"}],offlineCmd:{slot:"name       = 李四, 王五\nappname = 微信, 百度地图, 短信, 计算器\nmsgbody = 今天下午有空吗",rule:"telephone.call    = 打电话给<name>, 打给<name>, 呼叫<name>,给<name>打电话\ncontacts.view     = 查看<name>的电话号码, 查看<name>\ncontacts.create  = 新建联系人<name>\ncontacts.remove= 删除<name>的联系方式\nmessage.view     = 查看未读短信\nmessage.send    = 发短信给<name>, 发短信给<name>内容是<msgbody>\napp.open            = 打开<appname>, 启动<appname>\napp.search         = 搜索<appname>"},testWord:"打电话给李四"}},computed:{asrWord:function(){var e=this.data.get("offlineCmd.slot"),t=this.data.get("offlineCmd.rule"),a=this.data.get("testWord");return new o["default"](e,t,a)}},filters:{errJoin:function(e){return e.join("<br>")}},choseFile:function(){this.ref("fileInput").click()},handleFileChange:function(){var e=this,t=this.ref("fileInput"),a=new FileReader;a.onloadend=function(t){try{var a=JSON.parse(decodeURIComponent(t.target.result));e.$set("offlineCmd",{slot:a.origin_slots,rule:a.origin_rules})}catch(t){e.$toast("导入失败，请导入正确的格式",{messageType:"error"})}},a.readAsText(t.files.item(0),"utf-8")},handleMsDownload:function(){this.$get("asrWord").msDownload()}})}),define("ai/page/asr/asr.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        \x3c!-- 企业认证、基础信息认证、离线sdk管理页面 --\x3e\n        <app-content class="asr-content">\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content">\n                <h2>离线词&amp;语义设置</h2>\n                <div class="asr-wrapper">\n                    <h4 class="sec-title">简介</h4>\n                    <p class="asr-des">您可以在下方的[设置]部分编辑“词条”和“说法”并生成对应的语法文件，该文件可在Android SDK和iOS SDK中使用，且适用于离线命令词识别和本地语义解析这两个功能。</p>\n                    <p class="asr-des">离线命令词识别服务可以在断网环境下识别出预定义的固定短语（该功能只能在设备断网时使用）。离线命令词适用于断网时识别语音说出的通讯录好友、断网时识别特定的语音操作指令等场景。</p>\n                    <p class="asr-des">本地语义解析可以对识别出的文本进行解析，并自动将识别后文本转为结构化数据，方便您获得该文本的意图（该功能与设备的网络状态无关）。本地语义解析适用于联系通讯录好友、语音打开手机应用等场景。</p>\n                    <hr style="margin-top:25px;" class="split-line">\n                    <h4 class="sec-title">设置</h4>\n                    <p class="asr-des">您可以在这一部分完成特定指令的设置，并可以下载语法文件。“打开”按钮用于导入已有的语法文件，然后可以查看和编辑。“下载”按钮则会将配置信息导出为bsg文件，后续可以集成到SDK中。</p>\n                    <div class="setting-wrap">\n                        <div class="col-half">\n                            <div class="lbl-row">\n                                <span>词条</span>\n                                <xui-tip position="lt">\n                                    <div class="asr-xui-tip">\n                                        <h2>词条设置说明</h2>\n                                        <p>用"="分割词条名称和词条的值</p>\n                                        <p>左侧词条名称, 英文字母(区分大小写)</p>\n                                        <p>右侧值, 用英文逗号来分割多个中文词汇</p>\n                                    </div>\n                                </xui-tip>\n                            </div>\n                            <xui-textbox width="100%" height="300" multiline value="{=offlineCmd.slot=}" />\n                            <div class="setting-des">\n                                <p>词条是指一些说法的经常变动的内容，可以将它当成变量(词条可以在您程序中修改)</p>\n                                <p>词条是名称的集合，如app=计算器,相机,日历</p>\n                            </div>\n                            <div class="asr-err-row">\n                                <span>{{asrWord.slotErr | errJoin | raw}}</span>\n                            </div>\n                        </div>\n                        <div class="col-half pull-right">\n                            <div class="lbl-row">\n                                <span>说法</span>\n                                <xui-tip position="lt">\n                                    <div class="asr-xui-tip">\n                                        <h2>说法设置说明</h2>\n                                        <p>用"="分割说法名称和和具体说法</p>\n                                        <p>左侧说法名称可以被.号分割成2部分,用于本地语义解析，对应结果的domain字段和intent字段</p>\n                                        <p>右侧具体说法，英文逗号来分割多个离线识别短语</p>\n                                    </div>\n                                </xui-tip>\n                            </div>\n                            <xui-textbox width="100%" height="300" multiline value="{=offlineCmd.rule=}" />\n                            <div class="setting-des">\n                                <p>只有在这里定义过的说法才可以被离线引擎识别</p>\n                                <p>说法可以引用词条, 如: telephone.call = 打电话给&lt;name&gt;，name必须定义在左侧词条部分</p>\n                            </div>\n                            <div class="asr-err-row">\n                                <span>{{asrWord.ruleErr | errJoin | raw}}</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="btn-wrap">\n                        <xui-button on-click="choseFile">打开</xui-button>\n                        <input s-ref="fileInput" on-change="handleFileChange" style="display:none;" type="file">\n                        <a on-click="handleMsDownload" href="{{asrWord.downloadLink}}" download="baidu_speech_grammar.bsg">\n                            <xui-button skin="primary">下载</xui-button>\n                        </a>\n                    </div>\n                    <hr class="split-line" style="margin-top: 25px;">\n                    <h4 class="sec-title">测试</h4>\n                    <p class="asr-des">通过本工具，可以测试您设置的离线命令词是否生效，也可以判断测试文本是否能做本地语义解析；成功的话结果框中会给出语义解析结果</p>\n                    <p class="asr-des">您在测试窗口输入一些预期内容进行验证，如”打电话给李四”，本工具会输出结构化的语义数据；如果不能处理将会提示“没有匹配的说法，请修改词条规则或测试内容”</p>\n                    <p class="asr-test-title">测试</p>\n                    <div class="block-tb-wrap">\n                        <xui-textbox value="{=testWord=}" placeholder="请输入测试内容" width="100%"/>\n                    </div>\n                    <p class="asr-test-title">结果</p>\n                    <div class="block-tb-wrap">\n                        <xui-textbox value="{{asrWord.testResult}}" height="240" disabled="{{true}}" multiline width="100%"/>\n                    </div>\n                    <hr class="split-line" style="margin-top: 25px;">\n                    <h4 class="sec-title">使用说明</h4>\n                    <p>这一部分具体介绍如何利用上面生成的语法文件并实现相关功能。</p>\n                    <h4 class="readme-title">（1）离线命令词识别</h4>\n                    <p>您可以直接将语法文件集成到工程中，并进行开发。具体调用可参考：</p>\n                    <p>Android SDK: <a target="_blank" href="https://ai.baidu.com/docs#/ASR-Android-SDK/98d4e4f8">https://ai.baidu.com/docs#/ASR-Android-SDK/98d4e4f8</a></p>\n                    <p>iOS SDK：<a target="_blank" href="https://ai.baidu.com/docs#/ASR-iOS-SDK/f57cdfa0">https://ai.baidu.com/docs#/ASR-iOS-SDK/f57cdfa0</a></p>\n                    <h4 class="readme-title">（2）本地语义解析</h4>\n                    <p>您可以直接将语法文件集成到工程中，并进行开发。具体使用方式可参考：</p>\n                    <p>Android SDK: <a target="_blank" href="https://ai.baidu.com/docs#/ASR-Android-SDK/2c7dfe0e">https://ai.baidu.com/docs#/ASR-Android-SDK/2c7dfe0e</a></p>\n                    <p>iOS SDK：<a target="_blank" href="https://ai.baidu.com/docs#/ASR-iOS-SDK/bb43da3f">https://ai.baidu.com/docs#/ASR-iOS-SDK/bb43da3f</a></p>\n                    <hr class="split-line" style="margin-top: 25px;">\n                    <h4 class="sec-title">帮助反馈</h4>\n                    <p>工具使用问题可以通过以下路径反馈给我们：</p>\n                    <p><span class="asr-line-lbl">邮箱：</span>ai@baidu.com</p>\n                    <p><span class="asr-line-lbl">QQ群：</span>620715937</p>\n                    <p><span class="asr-line-lbl">社区：</span><a target="_blank" href="https://ai.baidu.com/forum/topic/list/166">https://ai.baidu.com/forum/topic/list/166</a></p>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/asr/AsrWord",["exports","module","babel-runtime/helpers/class-call-check"],function(exports,module,e){var t=function(){function t(a,i,n){e["default"](this,t),this.origin_slots=a,this.origin_rules=i,this.testContent=n,this.version="0.1",this.slots={},this.slotErr=[],this.rules={},this.ruleErr=[],this.grammar="",this.testResult="",this.downloadLink="",this.init()}return t.prototype.init=function(){this.validateSlots(this.origin_slots),this.validateRules(this.origin_rules),this.flushSlots(this.origin_slots),this.flushRules(this.origin_rules),this.flushGrammar(),this.testInput(this.testContent),this.createDownloadLink()},t.prototype.validateSlots=function(e){this.slotErr=this.validateContent(e,/([^\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_\s=,\.<>]+)/g)},t.prototype.validateRules=function(e){this.ruleErr=this.validateContent(e,/([^\u4E00-\u9FA5\uF900-\uFA2Da-zA-Z0-9_\s=,\.<>]+)/g)},t.prototype.validateContent=function(e,t){var a=e.split("\n"),i=[],n=undefined;return a.forEach(function(e){for(;n=t.exec(e);)i.push("非法符号："+n[1]+"; 所在行："+e)}),i},t.prototype.flushSlots=function(e){for(var t={},a=/<(.*?)>/g,i=undefined;i=a.exec(e);)t[i[1]]||(t[i[1]]=["词条默认值"]);e.split("\n").forEach(function(e){var a=/(\w+)\s*?=\s?(.*)/g.exec(e);if(a&&a.length>=3){var i=a[1],n=a[2].split(/[\s,]/g);if(n.length>0){t[i]=[];for(var r in n)n[r]&&!t[i].hasOwnProperty(n[r])&&t[i].push(n[r])}}}),this.slots=t},t.prototype.flushRules=function(e){var t=this;e.split("\n").forEach(function(e){var a=/([\w\.]+)\s*?=\s?(.*)/g.exec(e);if(a&&a.length>=3){var i=a[1];t.rules.hasOwnProperty(i)||(t.rules[i]=[]);var n=a[2].split(/[,]/g),r={};for(var s in t.slots)r["<"+s+">"]="("+t.slots[s].join("|")+")";for(var o in n){var l=n[o].trim();if(l.length>0){for(var u=l,d=/<(.+?)>/g;a=d.exec(l);){var c=a[1],p=["未定义信息"];t.slots[c]&&(p=t.slots[c]);var f="("+p.join("|")+")";u=u.replace(new RegExp(a[0],"g"),f)}for(var m in r)u.replace(m,r[m]);for(var h={origin:l,pattern:"^"+u+"$",groups:[]},g=/<(.*?)>/g;a=g.exec(h.origin);)h.groups.push(a[1]);t.rules[i].push(h)}}}})},t.prototype.flushGrammar=function(){var e="";for(var t in this.slots){var a=this.slots[t],i=[];for(var n in a)a[n].indexOf(".+")<0&&i.push(a[n]);e+="<"+t+"> = "+(i.length>0?i.join("| \n"):"词条默认值")+";\n"}var r=[],s=[];for(var n in this.rules)for(var o in this.rules[n]){var l=this.rules[n][o].origin.trim();l.indexOf("<")>-1?l.length>0&&!r.hasOwnProperty(l)&&r.push(l):l.length>0&&!s.hasOwnProperty(l)&&s.push(l)}e+="<auto_create_node> = "+(s.length>0?s.join(" | \n"):"词条默认值")+";\n",e+="<_wakeup> = 唤醒词占位符;\n",e+="\n\n_SCENE_ID_ 0\n\n",e+="( <auto_create_node> )\n\n",e+="( <_wakeup><auto_create_node> )\n\n";for(var n in r)e+="( "+r[n]+" )\n",e+="( <_wakeup>"+r[n]+" )\n";this.grammar=e},t.prototype.testInput=function(e){if(e.length<=0)this.testContent="";else{var t=[],a=[];for(var i in this.rules)for(var n in this.rules[i]){var r=this.rules[i][n],s=new RegExp(r.pattern).exec(e);if(s){var o=i,l=i,u=i.split(".");o=u[0],u.length>=2&&(l=u[1]);for(var d={domain:o,intent:l,object:{}},c=1;c<s.length;c++)d.object[r.groups[c-1]]=s[c];r.pattern.indexOf("*")>-1?a.push(d):t.push(d)}}results=[].concat(t,a);var p={raw_text:e,parsed_text:e,results:[].concat(t,a)};results.length>0?this.testResult=JSON.stringify(p,null,4):this.testResult="没有匹配的说法, 请修改词条 规则 或 测试内容"}},t.prototype.getDownloadBlob=function(){var e={version:this.version,slots:this.slots,rules:this.rules,grammar:this.grammar,origin_slots:this.origin_slots,origin_rules:this.origin_rules},t=encodeURIComponent(JSON.stringify(e,null,"    "));return new Blob([t],{type:"text/plain"})},t.prototype.createDownloadLink=function(){this.downloadLink=URL.createObjectURL(this.getDownloadBlob())},t.prototype.msDownload=function(){"msSaveOrOpenBlob"in navigator&&window.navigator.msSaveOrOpenBlob(this.getDownloadBlob(),"baidu_speech_grammar.bsg")},t}();module.exports=t}),define("ai/page/asr/index",["exports","module","./asr","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/bicc/audiofile/buy/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","async-validator","ai/common/enums","../../mixin"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](r),u=i["default"];module.exports=s["default"]({template:o["default"],mixin:l["default"],computed:{priceSchema:function(){var e=this.data.get("price");return[{label:"月转写时长（n）",name:"head"}].concat(e.map(function(e){return{label:e.range,name:e.range}}))},priceDatasource:function(){var e={head:"每转写小时/月"};return this.data.get("price").forEach(function(t){e[t.range]=t.cost+"元"}),[e]},unitPrice:function(){var e=this.data.get("realDuration"),t=0;if(e)for(var a=this.data.get("price"),i=0,n=a.length;i<n;i++)if(e<=a[i].max&&null==a[i].min||e>a[i].min&&null==a[i].max||a[i].min<e&&a[i].max>=e){t=a[i].cost;break}return t},realDuration:function(){return this.data.get("formData.duration")*this.data.get("formData.durationUnit")},overHours:function(){var e=this.data.get("formData.duration")*this.data.get("formData.durationUnit");return!e||e<0||isNaN(e)?0:Math.round(e/30)},totalPrice:function(){var e=this.data.get("formData.duration"),t=this.data.get("unitPrice");return e?e*t*this.data.get("formData.purchaseAmount")*this.data.get("formData.durationUnit"):0},btnDisabled:function(){return this.data.get("errors")}},initData:function(){var e=this;return{name:"",price:[],formData:{purchaseAmount:1,purchaseUnit:"MONTH",durationUnit:n.AudiofileUnit.wan},rules:new u({duration:[{validator:function(t,a,i,n){e.$get("realDuration")>99999e4?i("月转写时长不能大于99999万小时"):/^[1-9]\d*$/.test(e.$get("formData.duration"))?i():i("请输入正确的月转写时长")}}]}),errors:[],select:{datasource:n.AudiofileUnit.toArray().map(function(e){return{text:e.text,value:e.value}})},steps:[{text:"购买转写时长"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}]}},attached:function(){this.getPrice()},getPrice:function(){var e=this,t=this.$get(),a=t.apiId,i=t.aiAppType;this.ajax.apiPrice({type:i}).then(function(t){var i=t.filter(function(e){return+e.id==+a})[0]||{};e.$$set({name:i.name,price:i.price})})},submit:function(){var e=this;this.ref("form").validateForm().then(function(){e.confirm()})},getConfig:function(){var e=this.$get("formData"),t=e.purchaseUnit,a=e.purchaseAmount,i=e.duration,n=e.durationUnit;return{type:this.$get("aiAppType"),items:[{apiId:this.$get("apiId"),duration:i*n,purchaseUnit:t.toLowerCase(),purchaseAmount:a}]}},getOrder:function(){var e=this.$get("formData"),t=e.purchaseUnit,a=e.purchaseAmount,i=e.duration,n=this.$get(),r=n.unitPrice,s=n.totalPrice,o=n.name;return{serviceType:"BICC",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/bicc/order/v2/confirm",items:[{time:a,chargeType:["cpt2"],timeUnit:t,serviceType:"BICC",productType:"prepay",count:(i*this.data.get("formData.durationUnit")).toLocaleString("en-US")+"小时",configuration:["-"],serviceName:o,unitPriceShow:r+"元/小时/月",price:s.toFixed(2)}]}}})}),define("ai/page/bicc/audiofile/buy/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap bicc-wrapper">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <div class="back-wrapper">\n                <a href="#/ai/{{aiAppType}}/overview/index">\n                    <i class="iconfont icon-downarrow"></i>\n                    返回概览页\n                </a>\n            </div>\n            <div class="text-wrapper">\n                购买转写时长\n            </div>\n            <xui-viewstep step-index="{{currentStep}}" steps="{{steps}}"/>\n        </div>\n        <app-content>\n            <div class="list-content" s-if="!ui.show.confirm">\n                <xui-toastlabel level="info">\n                    注：根据业务需要购买音频文件转写时长，转写时长单价按阶梯逐级递减，按月灵活购买，购买后，我们2周内完成资源配置，配置成功后您即可付费使用，如您有任何问题，欢迎\n                    <a href="{{Url.ticket}}" target="_blank">提交工单</a>\n                    处理\n                </xui-toastlabel>\n                <p class="extro-tips">本接口主要适用于<span>呼叫中心电话录音场景</span>。需要通过API或JAVA SDK调用。</p>\n                <xui-form s-ref="form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}" labelWidth="80">\n                    <xui-item label="购买接口：">{{ name }}</xui-item>\n                    <xui-item label="月转写时长：" name="duration">\n                        <xui-textbox type="number" width="110" placeholder="请输入转写时长" value="{=formData.duration=}"></xui-textbox>\n                        <xui-select datasource="{{select.datasource}}" value="{=formData.durationUnit=}" style="width:auto;margin-left:10px"/>\n                        <div slot="help" class="warning-helper">\n                            <span>温馨提示：</span>\n                            <ul>\n                                <li>每日超出日均转写时长约{{ overHours }}小时的部分，返回时间会有延迟</li>\n                            </ul>\n                        </div>\n                    </xui-item>\n                    <xui-item label="价目表：">\n                        <xui-table schema="{{priceSchema}}" datasource="{{priceDatasource}}"></xui-table>\n                    </xui-item>\n                    <xui-item label="购买单价：">￥{{ unitPrice | currency }}/小时/月</xui-item>\n                    <xui-item label="购买时长：">\n                        <xui-numbertextline value="{=formData.purchaseAmount=}" min="{{1}}" style="display:inline-block;margin-right:10px;"/> 月\n                    </xui-item>\n                    <xui-item label="购买金额：" class="total-price-item">￥{{ totalPrice | currency }}</xui-item>\n                    <xui-button class="confirm-btn" size="large" skin="primary" on-click="submit" disabled="{{btnDisabled}}">确认购买</xui-button>\n                </xui-form>\n            </div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.confirm}}" class="order-confirm-panel"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/bicc/audiofile/renew/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","moment","../../mixin"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n);module.exports=r["default"]({template:s["default"],mixin:l["default"],computed:{totalPrice:function(){var e=this.data.get("resourceInfo.unitPrice")*this.data.get("resourceInfo.duration")*this.data.get("purchaseAmount");return e||!isNaN(e)?e:0},renewExpiryDate:function(){var e=this.data.get("resourceInfo.expireTime"),t=this.data.get("purchaseAmount");return o["default"](e).add(t,"months").format("YYYY月MM日DD日 HH:mm:ss")}},initData:function(){return{resourceInfo:{},purchaseAmount:1,purchaseUnit:"month",steps:[{text:"续费转写时长"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}]}},attached:function(){this.getResourceInfo()},getResourceInfo:function(){var e=this;this.ajax.resourceInfo({apiId:this.$get("apiId")}).then(function(t){e.$set("resourceInfo",t)})},getConfig:function(){var e=this.$get("resourceInfo"),t=e.unitId,a=e.resourceUuid,i=this.$get(),n=i.purchaseAmount,r=i.purchaseUnit;return{type:this.$get("aiAppType"),items:[{apiId:this.$get("apiId"),purchaseUnit:r,purchaseAmount:n,unitId:t,resourceUuid:a}]}},getOrder:function(){var e=this.$get(),t=e.purchaseAmount,a=e.purchaseUnit,i=e.totalPrice,n=this.$get("resourceInfo"),r=n.unitPrice,s=n.duration;n.expireTime;return{serviceName:n.apiName,serviceType:"BICC",productType:"prepay",type:"RENEW",confirmV2Url:"/api/ai/bicc/order/v2/confirm",items:[{time:t,chargeType:["cpt2"],timeUnit:a.toUpperCase(),serviceType:"BICC",productType:"prepay",count:s.toLocaleString("en-US")+"小时",configuration:["-"],serviceName:name,unitPriceShow:r+"元/小时/月",price:i.toFixed(2)}]}}})}),define("ai/page/bicc/audiofile/renew/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap bicc-wrapper">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <div class="back-wrapper">\n                <a href="#/ai/{{aiAppType}}/overview/index">\n                    <i class="iconfont icon-downarrow"></i>\n                    返回概览页\n                </a>\n            </div>\n            <div class="text-wrapper">\n                续费转写时长\n            </div>\n            <xui-viewstep step-index="{{currentStep}}" steps="{{steps}}"/>\n        </div>\n        <app-content>\n            <div class="list-content" s-if="!ui.show.confirm">\n                <xui-toastlabel level="info">\n                    注：您可对未过期的已购转写时长进行如下人工续费操作，延长已购转写时长的有效期，具体可查看<a href="{{Url.bicc.renew}}" target="_blank">续费详情</a>，如您有任何问题，欢迎\n                    <a href="{{Url.ticket}}" target="_blank">提交工单</a>处理\n                </xui-toastlabel>\n                <xui-form s-ref="form" formData="{=formData=}" rules="{{rules}}" errors="{=errors=}" labelWidth="70">\n                    <xui-item label="续费接口：">{{ resourceInfo.apiName }}</xui-item>\n                    <xui-item label="已购详情：">每月{{ resourceInfo.duration }}小时（单价：{{ resourceInfo.unitPrice }}/小时/月）</xui-item>\n                    <xui-item label="到期时间：">{{ resourceInfo.expireTime | dateFormat(\'YYYY月MM日DD日 HH:mm:ss\')}}</xui-item>\n                    <xui-item label="续费时长：">\n                        <xui-numbertextline value="{=purchaseAmount=}" min="{{1}}" style="display:inline-block;margin-right:10px;"/> 月\n                    </xui-item>\n                    <xui-item label="续费后到期时间：">{{ renewExpiryDate }}</xui-item>\n                    <xui-item label="续费费用：" class="total-price-item">￥{{ totalPrice | currency }}</xui-item>\n                    <xui-button class="confirm-btn" size="large" skin="primary" on-click="confirm">确认续费</xui-button>\n                </xui-form>\n            </div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.confirm}}" class="order-confirm-panel"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/bicc/audiofile/upgrade/failed/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],reApply:function(){this.fire("page_changed","NotApply")}})}),define("ai/page/bicc/audiofile/upgrade/failed/index.tpl",[],function(){return'<div class="bicc-upgrade-failed">\n    <div class="bicc-upgrade-details">\n        <p class="bicc-upgrade-title">非常抱歉，您的申请未通过</p>\n        <p>您的升级申请：月转写时长由{{ resourceInfo.duration }}小时升级至{{ resourceInfo.durationAfterResize }}小时，\n            到期时间{{ resourceInfo.expireTime | dateFormat(\'YYYY年MM月DD日 HH:mm:ss\') }}。</p>\n        <p>很抱歉，我们无法支持您的升级要求，如您有任何问题，可以<a href="{{Url.ticket}}" target="_blank">【提交工单】</a>进行咨询。</p>\n        <p>\n            <xui-button skin="primary" on-click="reApply">重新申请</xui-button>\n        </p>\n    </div>\n</div>\n'}),define("ai/page/bicc/audiofile/upgrade/index",["exports","module","babel-runtime/core-js/promise","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./success/index","./notApply/index","./reviewing/index","./failed/index","../../mixin","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](r),m=a["default"](s),h=a["default"](o),g=a["default"](l),v={Success:p["default"],NotApply:f["default"],Reviewing:m["default"],Failed:h["default"]};module.exports=d["default"]({template:c["default"],mixin:g["default"],initData:function(){return{currentStep:0,steps:[{text:"申请升级"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],page:"",applyInfo:{},resourceInfo:{},totalPrice:null}},attached:function(){var t=this;this.$get("aiAppType");e["default"].all([this.ajax.resizeApplyInfo({apiId:this.$get("apiId")}),this.ajax.resourceInfo({apiId:this.$get("apiId")})]).then(function(e){var a=e[0],i=e[1];t.$$set({applyInfo:a,resourceInfo:i}),t.renderPage(u.ResizeApplyStatus.getAliasFromValue(a.status)),a.status===u.ResizeApplyStatus.Success&&t.getTotalPrice()})},renderPage:function(e){var t=this.$get(),a=t.applyInfo,i=t.resourceInfo;this.page&&this.page.dispose(),this.page=new v[e]({data:{apiId:this.$get("apiId"),applyInfo:a,resourceInfo:i}}),this.page.on("page_changed",this.renderPage.bind(this)),this.page.on("next_step",this.confirm.bind(this)),this.page.attach(this.el.querySelector(".bicc-upgrade-wrapper")),this.children.push(this.page)},getConfig:function(){var e=this.$get("resourceInfo");return{type:this.$get("aiAppType"),items:[{apiId:this.$get("apiId"),duration:e.durationAfterResize,unitId:e.unitId,resourceUuid:e.resourceUuid}]}},getOrder:function(){var e=this.$get("resourceInfo");return{serviceType:"BICC",productType:"prepay",type:"RESIZE",confirmV2Url:"/api/ai/bicc/order/v2/confirm",items:[{time:e.purchaseAmount,chargeType:["cpt2"],timeUnit:e.purchaseUnit.toUpperCase(),serviceType:"BICC",productType:"prepay",count:e.durationAfterResize.toLocaleString("en-US")+"小时",configuration:["-"],serviceName:e.apiName,unitPriceShow:e.unitPriceAfterResize+"元/小时/月",price:this.$get("totalPrice").toFixed(2)}]}},getTotalPrice:function(){var e=this,t=this.$get("resourceInfo.flavor");t[0]&&(t[0].value=String(this.$get("resourceInfo.durationAfterResize"))),this.ajax.dilatationPrice({configs:[{flavor:t,resourceId:this.$get("resourceInfo.resourceUuid")}]},{"X-silence":!0}).then(function(t){t[0]&&e.$set("totalPrice",t[0].price<0?0:t[0].price)})}})}),define("ai/page/bicc/audiofile/upgrade/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap bicc-wrapper">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <div class="back-wrapper">\n                <a href="#/ai/{{aiAppType}}/overview/index">\n                    <i class="iconfont icon-downarrow"></i>\n                    返回概览页\n                </a>\n            </div>\n            <div class="text-wrapper">\n                升级转写时长\n            </div>\n            <xui-viewstep step-index="{{currentStep}}" steps="{{steps}}"/>\n        </div>\n        <app-content>\n            <div class="bicc-upgrade-wrapper list-content" style="display: {{ui.show.confirm ? \'none\' : \'block\'}}"></div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.confirm}}" class="order-confirm-panel"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/bicc/audiofile/upgrade/notApply/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","async-validator","ai/common/enums","lodash"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](i),u=t["default"](r),d=l["default"]["default"];module.exports=s["default"]({template:o["default"],computed:{priceSchema:function(){var e=this.data.get("price");return[{label:"月转写时长（n）",name:"head"}].concat(e.map(function(e){return{label:e.range,name:e.range}}))},priceDatasource:function(){var e={head:"每转写小时/月"};return this.data.get("price").forEach(function(t){e[t.range]=t.cost+"元"}),[e]},unitPriceBeforeUpgrade:function(){return this.data.get("resourceInfo.unitPrice")},unitPriceAfterUpgrade:function(){var e=this.data.get("realDuration"),t=0;if(e)for(var a=this.data.get("price"),i=0,n=a.length;i<n;i++)if(e<=a[i].max&&null==a[i].min||e>a[i].min&&null==a[i].max||a[i].min<e&&a[i].max>=e){t=a[i].cost;break}return t},overHours:function(){var e=this.data.get("realDuration");return!e||e<0||isNaN(e)?0:Math.round(e/30)},realDuration:function(){return this.data.get("formData.duration")*this.data.get("formData.durationUnit")},btnDisabled:function(){return this.data.get("errors")}},initData:function(){var e=this;return{name:"",price:[],totalPrice:0,formData:{duration:"",durationUnit:n.AudiofileUnit.wan,purchaseAmount:1,purchaseUnit:"MONTH"},rules:new d({duration:[{required:!0,message:"请输入月转写时长"},{pattern:/^[1-9]\d*$/,message:"请输入正确的月转写时长"},{validator:function(t,a,i,n){var r=e.$get("realDuration");r<=e.$get("resourceInfo.duration")?i("月转写时长必须大于已购月转写时长"):r>99999e4?i("月转写时长不能大于99999万小时"):i()}}]}),errors:[],select:{datasource:n.AudiofileUnit.toArray().map(function(e){return{text:e.text,value:e.value}})}}},attached:function(){var e=this;this.getPrice();var t=u["default"].debounce(function(){var t=e.$get("formData.duration"),a=e.$get("realDuration");/^[1-9]\d*$/.test(t)&&a>e.$get("resourceInfo.duration")&&a<99999e4&&e.getUpgradePrice()},400);this.watch("formData.duration",t),this.watch("formData.durationUnit",t)},getPrice:function(){var e=this,t=this.$get(),a=t.apiId,i=t.aiAppType;this.ajax.apiPrice({type:i}).then(function(t){var i=t.filter(function(e){return+e.id==+a})[0]||{};e.$$set({name:i.name,price:i.price})})},getUpgradePrice:function(){var e=this,t=this.$get("resourceInfo.flavor");t[0]&&(t[0].value=String(this.$get("realDuration"))),this.ajax.dilatationPrice({configs:[{flavor:t,resourceId:this.$get("resourceInfo.resourceUuid")}]},{"X-silence":!0}).then(function(t){t[0]&&e.$set("totalPrice",t[0].price<0?0:t[0].price)})},submit:function(){var e=this;this.ref("form").validateForm().then(function(){e.sendAjax()})},sendAjax:function(){var e=this;this.ajax.applyResize({apiId:this.$get("apiId"),duration:this.data.get("realDuration")}).then(function(){e.fire("page_changed","Reviewing")})}})}),define("ai/page/bicc/audiofile/upgrade/notApply/index.tpl",[],function(){return'<div>\n    <div s-if="!ui.show.confirm">\n        <xui-toastlabel level="info" class="bicc-toastlabel">\n            <span class="head">注：</span>\n            <ul>\n                <li>1、您可在已购转写时长有效期内选择更高的月转写时长完成升级，确认后补充差价即可弹性调整转写时长，费用计算可查看升级<a href="{{Url.bicc.upgrade}}" target="_blank">计费标准</a></li>\n                <li>2、升级成功后，我们将于2周内完成资源配置，配置成功后您即可升级使用，请耐心等待，如您有任何问题，欢迎<a href="{{Url.ticket}}" target="_blank">提交工单</a>处理</li>\n            </ul>\n        </xui-toastlabel>\n        <xui-form s-ref="form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}" labelWidth="100">\n            <xui-item label="升级接口：">{{ name }}</xui-item>\n            <xui-item label="已购详情：">\n                <div>每月{{ resourceInfo.duration }}小时  |   购买{{ resourceInfo.purchaseAmount }}个月</div>\n                <div>到期时间 {{ resourceInfo.expireTime | dateFormat(\'YYYY月MM日DD日 HH:mm:ss\')}}</div>\n            </xui-item>\n            <xui-item label="月转写时长升级至：" name="duration">\n                <xui-textbox type="number" width="110" placeholder="请输入转写时长" value="{=formData.duration=}"></xui-textbox>\n                <xui-select datasource="{{select.datasource}}" value="{=formData.durationUnit=}" style="width:auto;margin-left:10px"/>\n                <div slot="help" class="warning-helper">\n                    <span>温馨提示：</span>\n                    <ul>\n                        <li>1、升级月转写小时数需大于已购月转写小时数</li>\n                        <li>2、每日超出日均转写时长约{{ overHours }}小时的部分，返回时间会有延迟，不保证10小时内返回</li>\n                    </ul>\n                </div>\n            </xui-item>\n            <xui-item label="价目表：">\n                <xui-table schema="{{priceSchema}}" datasource="{{priceDatasource}}"></xui-table>\n            </xui-item>\n            <xui-item label="升级后单价：">￥{{ unitPriceAfterUpgrade | currency }}/小时/月</xui-item>\n            <xui-item label="升级费用：" class="total-price-item">￥{{ totalPrice | currency }}</xui-item>\n            <xui-button class="confirm-btn" size="large" skin="primary" on-click="submit" disabled="{{btnDisabled}}">提交申请</xui-button>\n        </xui-form>\n    </div>\n\n</div>\n\n'}),define("ai/page/bicc/audiofile/upgrade/reviewing/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"]})}),define("ai/page/bicc/audiofile/upgrade/reviewing/index.tpl",[],function(){return'<div class="bicc-upgrade-reviewing">\n    <div class="bicc-upgrade-details">\n        <p class="bicc-upgrade-title">我们已收到您的申请，正在审核中</p>\n        <p>感谢您的申请，我们将在2周内完成审核并配置资源，请您耐心等待。</p>\n        <p>审核结果将在此页面更新显示，同时您将收到短信或电话提醒，请您保持关注。</p>\n        <p>审核期间如有其它问题，可以<a href="{{Url.ticket}}" target="_blank">【提交工单】</a>进行咨询。</p>\n    </div>\n</div>\n'}),define("ai/page/bicc/audiofile/upgrade/success/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],nextStep:function(){this.fire("next_step")},reApply:function(){this.fire("page_changed","NotApply")}})}),define("ai/page/bicc/audiofile/upgrade/success/index.tpl",[],function(){return'<div class="bicc-upgrade-success">\n    <div class="bicc-upgrade-details">\n        <p class="bicc-upgrade-title bicc-upgrade-title-success">恭喜您,您的申请已通过</p>\n        <p>\n            您的升级申请：月转写时长由{{ resourceInfo.duration }}小时升级至{{ resourceInfo.durationAfterResize }}小时，\n            到期时间{{ resourceInfo.expireTime | dateFormat(\'YYYY年MM月DD日 HH:mm:ss\') }}</p>\n        <p>您的申请结果将失效于{{ applyInfo.expireTime | dateFormat(\'YYYY年MM月DD日 HH时\') }}，逾期您需重新申请。</p>\n        <p>请您尽快点击“下一步”确认升级订单，成功支付后即可享受升级服务，支付费用请参考升级<a href="{{Url.bicc.upgrade}}" target="_blank">计费标准</a>。</p>\n        <p>\n            <xui-button skin="primary" on-click="nextStep">下一步</xui-button>\n            <xui-button on-click="reApply">重新申请</xui-button>\n        </p>\n    </div>\n</div>\n'}),define("ai/page/bicc/mixin",["exports","module","inf-ria/app/brpc","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports={initData:function(){return{currentStep:0,ui:{show:{confirm:!1}}}},confirm:function(){var e=this,t=this.ref("confirm").__getESUI();t.on("action@prevPage",function(){e.$set("currentStep",0),e.$set("ui.show.confirm",!1)});var i={config:this.getConfig(),order:this.getOrder(),type:"MULTI_ORDER_ITEM"};a["default"].invokeService("billing://order_confirm",t,i).then(function(t){e.$set("currentStep",1),e.$set("ui.show.confirm",!0)})}}}),define("ai/page/bicc/realtime/buy/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","ai/common/enums","async-validator","lodash","../../mixin"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=(t["default"](s),t["default"](o)),c=r["default"],p=["POSTPAY","PREPAY"];module.exports=l["default"]({template:u["default"],mixin:d["default"],components:{"xui-tab":i.Tab,"xui-tab-panel":i.TabPanel},computed:{priceSchema:function(){var e=this.data.get("price"),t=this.data.get("type"),a="";return"post"===t?a="月使用时长（n）":"pre"===t&&(a="通路数（n）"),[{label:a,name:"head"}].concat(e.map(function(e){return{label:e.range,name:e.range}}))},priceDatasource:function(){var e={head:"价格"};return this.data.get("price").forEach(function(t){e[t.range]=t.cost+t.costUnit}),[e]},unitPrice:function(){var e=this.data.get("price"),t=0,a=0;if("pre"===this.data.get("type")&&(a=this.data.get("channel")))for(var i=0,n=e.length;i<n;i++)if(a<=e[i].max&&null==e[i].min||a>e[i].min&&null==e[i].max||e[i].min<a&&e[i].max>=a){t=e[i].cost;break}return t},totalPrice:function(){var e=this.data.get("type");if("post"===e){var t=this.data.get("price"),a=this.data.get("purchaseAmount"),i=0;if(a)for(var n=0,r=t.length;n<r;n++)a>t[n].max?i+=(t[n].max-t[n].min)*t[n].cost:a>t[n].min&&(a<=t[n].max||null==t[n].max)&&(i+=(a-t[n].min)*t[n].cost);return i}if("pre"===e){var s=this.data.get("channel"),o=this.data.get("unitPrice");return s?s*o:0}},purchaseAmount:function(){return{post:+this.data.get("formData.post.time"),pre:1}[this.data.get("type")]||0},purchaseUnit:function(){return{post:"HOUR",pre:"YEAR"}[this.data.get("type")]||""},channel:function(){return{post:25,pre:+this.data.get("formData.pre.channel")}[this.data.get("type")]||0},peakChannel:function(){var e=this.data.get("channel");return e?Math.floor(1.05*e):0},btnDisabled:function(){var e=this.data.get("type");return"post"===e?!this.data.get("purchaseStatus")||!!this.data.get("errMsg"):"pre"!==e||this.data.get("errors.pre")},errMsg:function(){var e=this.data.get("purchaseStatus");return this.data.get("qualification.certified")?e&&e.debt?'您的账户已欠费，请\n                    <a data-track-id="buy_service_debt_recharge"\n                        data-track-name="购买-欠费-立即充值"\n                        href="'+this.data.get("Url").recharge+'">\n                            立即充值\n                    </a>':"":'开通付费需完成实名认证，立即<a target="_blank" href="/qualify/">进行实名认证</a>'},priceItem:function(){var e=this.data.get("apiId"),t=this.data.get("payType");return this.data.get("priceList").find(function(a){return+a.id==+e&&a.payType===t})||{}},price:function(){return this.data.get("priceItem.price")||[]},name:function(){return this.data.get("priceItem.name")||""},type:function(){return p[this.data.get("tabIndex")].replace(/PAY$/,"").toLowerCase()}},initData:function(){return{priceList:[],formData:{post:{},pre:{}},rules:{post:new c({time:[{required:!0,message:"请输入正确的小时数"},{pattern:/^[1-9]\d*$/,message:"请输入正确的小时数"}]}),pre:new c({channel:[{required:!0,message:"请输入正确的购买通路"},{pattern:/^[1-9]\d*$/,message:"请输入正确的购买通路"},{validator:function(e,t,a,i){i.channel>9999?a("通路数不能大于9999"):a()}}]})},errors:{post:{},pre:{}},steps:[{text:"购买实时语音识别"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],purchaseStatus:null,payTypeList:n.BiccPayType.toArray().reduce(function(e,t){return e[t.alias]=t,e},{}),payType:1,tabIndex:0}},attached:function(){var e=+this.$get("payType");this.$set("payType",e),this.$set("tabIndex",p.indexOf(n.BiccPayType.getAliasFromValue(e))),this.getPrice(),this.getPurchaseStatus()},getPrice:function(){var e=this;this.ajax.apiPrice({type:this.$get("aiAppType")}).then(function(t){e.$set("priceList",t)})},submit:function(){var e=this;this.ref(this.$get("type")+"Form").validateForm().then(function(){e.confirm()})},getConfig:function(){var e=this.$get(),t=e.channel,a=e.purchaseUnit,i=e.purchaseAmount;return{type:this.$get("aiAppType"),items:[{apiId:this.$get("apiId"),payType:+this.$get("payType"),channel:t,purchaseUnit:a.toLowerCase(),purchaseAmount:i}]}},getOrder:function(){var e=this.$get(),t=e.type,a=e.purchaseUnit,i=e.purchaseAmount,r=e.name,s=e.unitPrice,o=e.totalPrice,l=n.AppType.aliasIndex[this.aiAppType].chargeServiceType||this.aiAppType.toUpperCase(),u="/api/ai/"+this.aiAppType+"/order/v2/confirm";return"pre"===t?{serviceType:l,productType:"prepay",type:"NEW",confirmV2Url:u,items:[{time:i,chargeType:["cpt2"],timeUnit:a,serviceType:l,productType:"prepay",count:this.$get("channel")+"通路",configuration:["-"],serviceName:r,unitPriceShow:s+"元/通路/年",price:o.toFixed(2)}]}:"post"===t?{serviceType:l,productType:"postpay",type:"NEW",confirmV2Url:u,items:[{chargeType:["cpc"],timeUnit:a,serviceType:l,productType:"postpay",count:1,configuration:["-"],serviceName:r,unitPriceShow:"见"+r+"价格",unitPriceUrl:this.$get("Url.bicc.price")}]}:void 0},changeTab:function(e){var t=e.value;this.$set("payType",n.BiccPayType[p[t.selectedIndex]])},getPurchaseStatus:function(){var e=this;return this.ajax.purchaseStatus({type:this.aiAppType}).then(function(t){e.$set("purchaseStatus",t)})}})}),define("ai/page/bicc/realtime/buy/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap bicc-wrapper">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <div class="back-wrapper">\n                <a href="#/ai/{{aiAppType}}/overview/index">\n                    <i class="iconfont icon-downarrow"></i>\n                    返回概览页\n                </a>\n            </div>\n            <div class="text-wrapper">\n                购买实时语音识别\n            </div>\n            <xui-viewstep step-index="{{currentStep}}" steps="{{steps}}"/>\n        </div>\n        <app-content>\n            <xui-tab skin="card" on-change="changeTab" selected-index="{=tabIndex=}" s-if="!ui.show.confirm">\n                <xui-tab-panel title="{{payTypeList.POSTPAY.text}}（中小客户）">\n                    <div class="list-content">\n                        <xui-form s-ref="postForm" formData="{=formData.post=}" rules="{{rules.post}}" errors="{=errors.post=}}" label-width="70">\n                            <xui-item label="购买接口：">{{ name }}</xui-item>\n                            <xui-item label="价目表：">\n                                <p>按照月使用时长（推送的语音包时长）阶梯累计计费，超出本阶段部分按照下一阶梯单价计算</p>\n                                <xui-table schema="{{priceSchema}}" datasource="{{priceDatasource}}"></xui-table>\n                            </xui-item>\n                            <xui-item label="并发通路：">\n                                <p>{{channel}}通路，若您需要更多的并发通路，可在开通付费一个月后<a href="{{Url.ticket}}" target="_blank">提交申请</a></p>\n                            </xui-item>\n                            <xui-item label="预估每月时长：" name="time">\n                                <xui-textbox type="number" width="120" placeholder="请输入预估每月时长" value="{=formData.post.time=}"></xui-textbox> 小时\n                            </xui-item>\n                            <xui-item label="预估每月所需费用：">\n                                ￥{{ totalPrice | currency }}\n                                <p>预估金额仅供参考，以实际账单金额为准</p>\n                            </xui-item>\n                            <div class="confirm-btn">\n                                <xui-button size="large" data-track-id="buy_service_confirm" data-track-name="确认购买-中小客户" skin="primary" on-click="submit" disabled="{{btnDisabled}}">确认购买</xui-button>\n                                <span s-if="btnDisabled" class="desc">温馨提示：{{ errMsg | raw }}</span>\n                            </div>\n                        </xui-form>\n                    </div>\n                </xui-tab-panel>\n                <xui-tab-panel title="{{payTypeList.PREPAY.text}}（大客户）">\n                    <div class="list-content">\n                        <xui-toastlabel level="info">\n                            注：根据业务需要购买并发通路数，并发通路单价按阶梯逐级递减，购买时长为一年。购买成功后，我们将于2周内完成资源配置，请耐心等待。按通路预付费不支持API接口调用。如您有任何问题，欢迎\x3c!--\n                            --\x3e<a href="{{Url.ticket}}" target="_blank">提交工单</a>处理\n                        </xui-toastlabel>\n                        <xui-form s-ref="preForm" formData="{=formData.pre=}" rules="{{rules.pre}}" errors="{=errors.pre=}" label-width="70">\n                            <xui-item label="购买接口：">{{ name }}</xui-item>\n                            <xui-item label="购买通路：" name="channel">\n                                <xui-textbox type="number" width="120" placeholder="请输入所购通路数" value="{=formData.pre.channel=}"></xui-textbox> 通路\n                                <div slot="help" class="warning-helper">\n                                    <span>温馨提示：</span>\n                                    <ul>\n                                        <li>1、付费资源配置成功后，您的免费额度将停止，可用通路变为所购通路数。付费资源到期后可继续使用免费通路</li>\n                                        <li>2、若您将通话分为双轨（用户和客服分轨）发送音频流，则一通电话占2通路并发，也可选择只发送其中一轨算一通路并发</li>\n                                        <li>3、为保证您业务稳定，高峰期额外赠送您所购通路数的5%，因此您高峰期实际可用通路为{{ peakChannel }}通路</li>\n                                    </ul>\n                                </div>\n                            </xui-item>\n                            <xui-item label="价目表：">\n                                <xui-table schema="{{priceSchema}}" datasource="{{priceDatasource}}"></xui-table>\n                            </xui-item>\n                            <xui-item label="购买单价：">￥{{ unitPrice | currency }}/通路/年</xui-item>\n                            <xui-item label="购买时长：">{{ purchaseAmount }}年</xui-item>\n                            <xui-item label="购买金额：" class="total-price-item">￥{{ totalPrice | currency }}</xui-item>\n                            <div class="confirm-btn">\n                                <xui-button size="large" data-track-id="ka_buy_service_confirm" data-track-name="确认购买-大客户" skin="primary" on-click="submit" disabled="{{btnDisabled}}">确认购买</xui-button>\n                            </div>\n                        </xui-form>\n                    </div>\n                </xui-tab-panel>\n            </xui-tab>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.confirm}}" class="order-confirm-panel"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/bicc/realtime/renew/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","moment","../../mixin"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n);module.exports=r["default"]({template:s["default"],mixin:l["default"],computed:{totalPrice:function(){var e=this.data.get("resourceInfo.unitPrice")*this.data.get("resourceInfo.channel")*this.data.get("purchaseAmount");return e||!isNaN(e)?e:0},renewExpiryDate:function(){var e=this.data.get("resourceInfo.expireTime"),t=this.data.get("purchaseAmount");return o["default"](e).add(t,"years").format("YYYY月MM日DD日 HH:mm:ss")}},initData:function(){return{resourceInfo:{},purchaseAmount:1,purchaseUnit:"year",steps:[{text:"续费并发通路"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}]}},attached:function(){this.getResourceInfo()},getResourceInfo:function(){var e=this;return this.ajax.resourceInfo({apiId:this.$get("apiId")}).then(function(t){e.$set("resourceInfo",t)})},getConfig:function(){var e=this.$get("resourceInfo"),t=e.unitId,a=e.resourceUuid,i=this.$get(),n=i.purchaseAmount,r=i.purchaseUnit;return{type:this.$get("aiAppType"),items:[{apiId:this.$get("apiId"),purchaseUnit:r,purchaseAmount:n,unitId:t,resourceUuid:a}]}},getOrder:function(){var e=this.$get(),t=e.purchaseAmount,a=e.totalPrice,i=this.$get("resourceInfo"),n=i.unitPrice,r=i.channel;i.expireTime;return{serviceName:i.apiName,serviceType:"BICC",productType:"prepay",type:"RENEW",confirmV2Url:"/api/ai/bicc/order/v2/confirm",items:[{time:t,chargeType:["cpt2"],timeUnit:"YEAR",serviceType:"BICC",productType:"prepay",count:r+"通路",configuration:["-"],serviceName:name,unitPriceShow:n+"元/通路/年",price:a.toFixed(2)}]}}})}),define("ai/page/bicc/realtime/renew/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap bicc-wrapper">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <div class="back-wrapper">\n                <a href="#/ai/{{aiAppType}}/overview/index">\n                    <i class="iconfont icon-downarrow"></i>\n                    返回概览页\n                </a>\n            </div>\n            <div class="text-wrapper">\n                续费并发通路\n            </div>\n            <xui-viewstep step-index="{{currentStep}}" steps="{{steps}}"/>\n        </div>\n        <app-content>\n            <div class="list-content" s-if="!ui.show.confirm">\n                <xui-toastlabel level="info">\n                    注：您可对未过期的已购通路进行如下人工续费操作，延长已购通路的有效期，具体可查看<a href="{{Url.bicc.renew}}" target="_blank">续费详情</a>，如您有任何问题，欢迎\n                    <a href="{{Url.ticket}}" target="_blank">提交工单</a>处理\n                </xui-toastlabel>\n                <xui-form s-ref="form" formData="{=formData=}" rules="{{rules}}" errors="{=errors=}" labelWidth="70">\n                    <xui-item label="续费接口：">{{ resourceInfo.apiName }}</xui-item>\n                    <xui-item label="已购详情：">{{ resourceInfo.channel }}通路（单价：{{ resourceInfo.unitPrice }}元/通路/年）</xui-item>\n                    <xui-item label="到期时间：">{{ resourceInfo.expireTime | dateFormat(\'YYYY月MM日DD日 HH:mm:ss\')}}</xui-item>\n                    <xui-item label="续费时长：">一年</xui-item>\n                    <xui-item label="续费后到期时间：">{{ renewExpiryDate }}</xui-item>\n                    <xui-item label="续费费用：" class="total-price-item">￥{{ totalPrice }}</xui-item>\n                    <xui-button class="confirm-btn" size="large" skin="primary" on-click="confirm">确认续费</xui-button>\n                </xui-form>\n            </div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.confirm}}" class="order-confirm-panel"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/bicc/realtime/upgrade/failed/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],reApply:function(){this.fire("page_changed","NotApply")}})}),define("ai/page/bicc/realtime/upgrade/failed/index.tpl",[],function(){return'<div class="bicc-upgrade-failed">\n    <div class="bicc-upgrade-details">\n        <p class="bicc-upgrade-title">非常抱歉，您的申请未通过</p>\n        <p>您的升级申请：通路由{{ resourceInfo.channel }}通路升级至{{ resourceInfo.channelAfterResize }}通路，\n            到期时间{{ resourceInfo.expireTime | dateFormat(\'YYYY年MM月DD日 HH:mm:ss\') }}。</p>\n        <p>很抱歉，我们无法支持您的升级要求，如您有任何问题，可以<a href="{{Url.ticket}}" target="_blank">【提交工单】</a>进行咨询。</p>\n        <p>\n            <xui-button skin="primary" on-click="reApply">重新申请</xui-button>\n        </p>\n    </div>\n</div>\n'}),define("ai/page/bicc/realtime/upgrade/index",["exports","module","babel-runtime/core-js/promise","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./success/index","./notApply/index","./reviewing/index","./failed/index","../../mixin","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](r),m=a["default"](s),h=a["default"](o),g=a["default"](l),v={Success:p["default"],NotApply:f["default"],Reviewing:m["default"],Failed:h["default"]};module.exports=d["default"]({template:c["default"],mixin:g["default"],initData:function(){return{currentStep:0,steps:[{text:"申请升级"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],page:"",applyInfo:{},resourceInfo:{},totalPrice:null}},attached:function(){var t=this;e["default"].all([this.ajax.resizeApplyInfo({apiId:this.$get("apiId")}),this.ajax.resourceInfo({apiId:this.$get("apiId")})]).then(function(e){var a=e[0],i=e[1];t.$$set({applyInfo:a,resourceInfo:i}),t.renderPage(u.ResizeApplyStatus.getAliasFromValue(a.status)),a.status===u.ResizeApplyStatus.Success&&t.getTotalPrice()})},renderPage:function(e){var t=this.$get(),a=t.applyInfo,i=t.resourceInfo;this.page&&this.page.dispose(),this.page=new v[e]({data:{apiId:this.$get("apiId"),applyInfo:a,resourceInfo:i}}),this.page.on("page_changed",this.renderPage.bind(this)),this.page.on("next_step",this.confirm.bind(this)),this.page.attach(this.el.querySelector(".bicc-upgrade-wrapper")),this.children.push(this.page)},getConfig:function(){var e=this.$get().resourceInfo;return{type:this.$get("aiAppType"),items:[{apiId:this.$get("apiId"),channel:e.channelAfterResize,unitId:e.unitId,resourceUuid:e.resourceUuid}]}},getOrder:function(){var e=this.$get("resourceInfo");return{serviceType:"BICC",productType:"prepay",type:"RESIZE",confirmV2Url:"/api/ai/bicc/order/v2/confirm",items:[{time:e.purchaseAmount,chargeType:["cpt2"],timeUnit:e.purchaseUnit.toUpperCase(),serviceType:"BICC",productType:"prepay",count:e.channelAfterResize.toLocaleString("en-US")+"通路",configuration:["-"],serviceName:e.apiName,unitPriceShow:e.unitPriceAfterResize+"元/通路/年",price:this.$get("totalPrice").toFixed(2)}]}},getTotalPrice:function(){var e=this,t=this.$get("resourceInfo.flavor");t[0]&&(t[0].value=String(this.$get("resourceInfo.channelAfterResize"))),this.ajax.dilatationPrice({configs:[{flavor:t,resourceId:this.$get("resourceInfo.resourceUuid")}]},{"X-silence":!0}).then(function(t){t[0]&&e.$set("totalPrice",t[0].price<0?0:t[0].price)})}})}),define("ai/page/bicc/realtime/upgrade/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap bicc-wrapper">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <div class="back-wrapper">\n                <a href="#/ai/{{aiAppType}}/overview/index">\n                    <i class="iconfont icon-downarrow"></i>\n                    返回概览页\n                </a>\n            </div>\n            <div class="text-wrapper">\n                升级并发通路\n            </div>\n            <xui-viewstep step-index="{{currentStep}}" steps="{{steps}}"/>\n        </div>\n        <app-content>\n            <div class="bicc-upgrade-wrapper list-content" style="display: {{ui.show.confirm ? \'none\' : \'block\'}}"></div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.confirm}}" class="order-confirm-panel"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/bicc/realtime/upgrade/notApply/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","async-validator","lodash"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n),u=o["default"]["default"];module.exports=r["default"]({template:s["default"],computed:{priceSchema:function(){var e=this.data.get("price");return[{label:"通路数（n）",name:"head"}].concat(e.map(function(e){return{label:e.range,name:e.range}}))},priceDatasource:function(){var e={head:"每通路/年"};return this.data.get("price").forEach(function(t){e[t.range]=t.cost+"元"}),[e]},unitPriceBeforeUpgrade:function(){return this.data.get("resourceInfo.unitPrice")},unitPriceAfterUpgrade:function(){var e=this.data.get("formData.channel"),t=0;if(e)for(var a=this.data.get("price"),i=0,n=a.length;i<n;i++)if(e<=a[i].max&&null==a[i].min||e>a[i].min&&null==a[i].max||a[i].min<e&&a[i].max>=e){t=a[i].cost;break}return t},peakChannel:function(){var e=this.data.get("formData.channel");return e?Math.floor(1.05*e):0},btnDisabled:function(){return this.data.get("errors")}},initData:function(){var e=this;return{name:"",price:[],totalPrice:0,formData:{channel:"",purchaseAmount:1,purchaseUnit:"year"},rules:new u({channel:[{required:!0,message:"请输入正确的升级通路"},{pattern:/^[1-9]\d*$/,message:"请输入正确的升级通路"},{validator:function(t,a,i,n){var r=e.$get("formData.channel");r<=e.$get("resourceInfo.channel")?i("升级通路必须大于已购通路"):r>9999?i("通路数不能大于9999"):i()}}]}),errors:[]}},attached:function(){var e=this;this.getPrice();var t=l["default"].debounce(function(){var t=e.$get("formData.channel");/^[1-9]\d*$/.test(t)&&t>e.$get("resourceInfo.channel")&&t<9999&&e.getUpgradePrice()},400);this.watch("formData.channel",t)},getPrice:function(){var e=this,t=this.$get(),a=t.apiId,i=t.aiAppType;this.ajax.apiPrice({type:i}).then(function(t){var i=t.filter(function(e){return+e.id==+a})[0]||{};e.$$set({name:i.name,price:i.price})})},getUpgradePrice:function(){var e=this,t=this.$get("resourceInfo.flavor");t[0]&&(t[0].value=String(this.$get("formData.channel"))),this.ajax.dilatationPrice({configs:[{flavor:t,resourceId:this.$get("resourceInfo.resourceUuid")}]},{"X-silence":!0}).then(function(t){t[0]&&e.$set("totalPrice",t[0].price<0?0:t[0].price)})},submit:function(){var e=this;this.ref("form").validateForm().then(function(){e.sendAjax()})},sendAjax:function(){var e=this;this.ajax.applyResize({apiId:this.$get("apiId"),channel:this.data.get("formData.channel")}).then(function(){e.fire("page_changed","Reviewing")})}})}),define("ai/page/bicc/realtime/upgrade/notApply/index.tpl",[],function(){return'<div>\n    <div s-if="!ui.show.confirm">\n        <xui-toastlabel level="info" class="bicc-toastlabel">\n            <span class="head">注：</span>\n            <ul>\n                <li>1、请您提交升级申请，我们将在2周内完成审核并配置资源。</li>\n                <li>2、审核通过后您补充差价即可升级通路，费用计算可查看升级<a href="{{Url.bicc.upgrade}}" target="_blank">计费标准</a>。如有任何问题，可以<a href="{{Url.ticket}}" target="_blank">提交工单</a>进行咨询。</li>\n            </ul>\n        </xui-toastlabel>\n        <xui-form s-ref="form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}" labelWidth="100">\n            <xui-item label="升级接口：">{{ name }}</xui-item>\n            <xui-item label="已购详情：">\n                <div>{{ resourceInfo.channel }}通路  |   购买{{ resourceInfo.purchaseAmount }}年</div>\n                <div>到期时间 {{ resourceInfo.expireTime | dateFormat(\'YYYY月MM日DD日 HH:mm:ss\')}}</div>\n            </xui-item>\n            <xui-item label="申请升至：" name="channel">\n                <xui-textbox type="number" width="120" placeholder="请输入升级通路数" value="{=formData.channel=}"></xui-textbox> 通路\n                <div slot="help" class="warning-helper">\n                    <span>温馨提示：</span>\n                    <ul>\n                        <li>1、升级通路数需高于已购通路数</li>\n                        <li>2、为保证您业务稳定，高峰期额外赠送您所购通路数的5%，因此您实际可用通路为{{ peakChannel }}通路</li>\n                    </ul>\n                </div>\n            </xui-item>\n            <xui-item label="价目表：">\n                <xui-table schema="{{priceSchema}}" datasource="{{priceDatasource}}"></xui-table>\n            </xui-item>\n            <xui-item label="升级后单价：">￥{{ unitPriceAfterUpgrade | currency }}/通路/年</xui-item>\n            <xui-item label="升级费用：" class="total-price-item">￥{{ totalPrice | currency }}</xui-item>\n            <xui-button class="confirm-btn" size="large" skin="primary" on-click="submit" disabled="{{btnDisabled}}">提交申请</xui-button>\n        </xui-form>\n    </div>\n\n</div>\n\n'}),define("ai/page/bicc/realtime/upgrade/reviewing/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"]})}),define("ai/page/bicc/realtime/upgrade/reviewing/index.tpl",[],function(){return'<div class="bicc-upgrade-reviewing">\n    <div class="bicc-upgrade-details">\n        <p class="bicc-upgrade-title">我们已收到您的申请，正在审核中</p>\n        <p>感谢您的申请，我们将在2周内完成审核并配置资源，请您耐心等待。</p>\n        <p>审核结果将在此页面更新显示，同时您将收到短信或电话提醒，请您保持关注。</p>\n        <p>审核期间如有其它问题，可以<a href="{{Url.ticket}}" target="_blank">【提交工单】</a>进行咨询。</p>\n    </div>\n</div>\n'}),define("ai/page/bicc/realtime/upgrade/success/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],nextStep:function(){this.fire("next_step")},reApply:function(){this.fire("page_changed","NotApply")}})}),define("ai/page/bicc/realtime/upgrade/success/index.tpl",[],function(){return'<div class="bicc-upgrade-success">\n    <div class="bicc-upgrade-details">\n        <p class="bicc-upgrade-title bicc-upgrade-title-success">恭喜您,您的申请已通过</p>\n        <p>\n            您的升级申请：通路由{{ resourceInfo.channel }}通路升级至{{ resourceInfo.channelAfterResize }}通路，\n            到期时间{{ resourceInfo.expireTime | dateFormat(\'YYYY年MM月DD日 HH:mm:ss\') }}</p>\n        <p>您的申请结果将失效于{{ applyInfo.expireTime | dateFormat(\'YYYY年MM月DD日 HH时\') }}，逾期您需重新申请。</p>\n        <p>请您尽快点击“下一步”确认升级订单，成功支付后即可享受升级服务，支付费用请参考升级<a href="{{Url.bicc.upgrade}}" target="_blank">计费标准</a>。</p>\n        <p>\n            <xui-button skin="primary" on-click="nextStep">下一步</xui-button>\n            <xui-button on-click="reApply">重新申请</xui-button>\n        </p>\n    </div>\n</div>\n'}),define("ai/page/buyNumPackage/buyNumPackage",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","inf-ria/app/brpc","lodash"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](r),d=a["default"](s),c=function(e){return e>=1e4?e/1e4+" 万次":e+" 次"};module.exports=o["default"]({template:l["default"],initData:function(){return{breadItem:[{title:"概览",url:"#/ai/"+this.aiAppType+"/overview/index"},{title:"购买次数包"}],currentStep:0,title:"次数包类型",ui:{show:{panel:!1,form:!0}},min:0,steps:[{text:"选择次数包"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],datasource:[],schema:[{label:"规格",name:"packageSize"},{label:"有效期",name:"validTime"},{label:"单价",name:"price"},{label:"数量",name:"number"}],numList:[],isTipColorRed:!1,canBuyPackageApiList:[],confirmDialog:{open:!1,text:""},unpaidDialog:{open:!1,unpaidId:""}}},created:function(){this.getNumPackagePrice(),this.getCanPaidApiList()},computed:{cartNotEmpty:function(){return this.data.get("numList").some(function(e){return!!e})},totalPrice:function(){var e=this;return this.data.get("numList").reduce(function(t,a,i){return t+e.data.get("datasource")[i].price*a},0)},isQualifed:function(){var e=this.data.get("qualification")||{};return this.data.get("needEnterprise")?!!~(e.state||[]).indexOf(n.QualificationStatus.ENTERPRISE_CERTIFIED):e.certified},needEnterprise:function(){return this.data.get("aiAppType")===n.AppType.kg&&"123"!==this.data.get("apiId")},canNotBuy:function(){return+this.data.get("status")===n.NumPackageType.CAN_NOT_BUY}},filters:{formatSize:c},getNumPackagePrice:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.numPackagePrice({type:this.aiAppType,apiId:this.$get("apiId")}));case 2:t=a.sent,this.$$set({datasource:t,numList:this.initNumList(t.length)});case 4:case"end":return a.stop()}},null,this)},getCanPaidApiList:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.canBuyPackageApiList({type:this.aiAppType}));case 2:t=i.sent,d["default"].isEmpty(t)&&this.$redirect("/ai/"+this.aiAppType+"/overview/index"),a=d["default"].find(t,{id:this.data.get("apiId")}),this.$$set({canBuyPackageApiList:t,title:a.name});case 6:case"end":return i.stop()}},null,this)},initNumList:function(e){return Array.apply(null,Array(e)).map(Number.prototype.valueOf,this.$get("min"))},handleInput:function(e,t){var a=e.value;a&&d["default"].isNumber(+a)&&(a=Math.floor(a),this.ref("numbertextline"+t).data.set("value",a),this.canUpdateNumList(a,t)&&this.data.splice("numList",[t,1,+a]))},canUpdateNumList:function(e,t){var a=this.$get(),i=a.numList,n=a.min,r=a.datasource;return!(""===e||i[t]===+e||+e<n||+e>r[t].purchaseLimit)},clearItem:function(e){this.$set("isTipColorRed",!1),"string"!=typeof e?this.data.splice("numList",[e,1,0]):this.$set("numList",this.initNumList(this.$get("datasource").length))},checkCart:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$get("cartNotEmpty")){t.next=3;break}return this.$set("isTipColorRed",!0),t.abrupt("return");case 3:return t.next=5,e["default"].awrap(this.checkOrder());case 5:if(!t.sent){t.next=8;break}return t.abrupt("return");case 8:if(!this.checkPayStatus()){t.next=10;break}return t.abrupt("return");case 10:this.confirm();case 11:case"end":return t.stop()}},null,this)},checkOrder:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getUnpaidId({type:this.$get("aiAppType"),productType:"package",apiId:this.$get("apiId")}));case 2:if(!(t=a.sent)){a.next=6;break}return this.$set("unpaidDialog",{open:!0,unpaidId:t}),a.abrupt("return",!0);case 6:return a.abrupt("return",!1);case 7:case"end":return a.stop()}},null,this)},checkPayStatus:function(){if(+this.$get("status")!==n.NumPackageType.BUY){if(this.$get("canNotBuy")){var e=this.$get("subUserInfo"),t=e.isSubUser,a=e.mainAccountId,i="";return i=t?"非常抱歉，您已经以主账户身份购买过该资源，无法再以子用户身份（关联主账户AccountID:"+a+"）购买。":"非常抱歉，您已经以子用户身份（关联主账户AccountID:"+this.$get("purchasedDomainId")+"）购买过该资源，无法再以主账户身份购买。",this.$set("confirmDialog",{open:!0,text:i}),!0}return!1}this.$set("confirmDialog",{open:!0,text:"次数包使用完毕会自动切换为按量后付费模式以保证您的正常使用"})},getConfig:function(){var e=this.$get(),t=e.numList,a=e.apiId,i=e.datasource,n=[];return t.forEach(function(e,t){e&&n.push({packageSize:i[t].packageSize,validTime:i[t].validTime,price:i[t].price,amount:e,apiId:a})}),{type:this.$get("aiAppType"),apiId:this.$get("apiId"),orderType:"package",items:n}},getOrder:function(){var e=n.AppType.aliasIndex[this.aiAppType].chargeServiceType||this.aiAppType.toUpperCase(),t="/api/ai/"+this.aiAppType+"/order/v2/confirm",a=this.$get(),i=a.canBuyPackageApiList,r=a.numList,s=a.apiId,o=a.datasource,l=a.totalPrice,u=[];return r.forEach(function(e,t){e&&u.push({serviceType:d["default"].find(i,{id:s+""}).serviceType,productType:"prepay",serviceName:d["default"].find(i,{id:s+""}).name,configuration:["次数包："+c(o[t].packageSize)],count:e,chargeType:["次数包"],time:o[t].validTime,unitPriceShow:"￥ "+o[t].price+"/个",price:(o[t].price*e).toFixed(2)})}),{serviceType:e,productType:"prepay",type:"NEW",confirmV2Url:t,practicalAmount:l,items:u}},confirm:function(){var e=this;if(!this.$get("canNotBuy")){var t=this.ref("confirm").__getESUI();t.on("action@prevPage",function(){e.$$set({currentStep:0,"ui.show.panel":!1,"ui.show.form":!0})});var a={config:this.getConfig(),order:this.getOrder()};u["default"].invokeService("billing://order_confirm",t,a).then(function(t){e.$$set({currentStep:1,"ui.show.panel":!0,"ui.show.form":!1})})}},cancel:function(){this.$set("unpaidDialog.open",!1)}})}),define("ai/page/buyNumPackage/index",["exports","module","./buyNumPackage","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/buyNumPackage/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap ai-buy-num-package">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <div class="back-wrapper">\n                <breadcrumb items="{{breadItem}}"></breadcrumb>\n            </div>\n            <xui-viewstep step-index="{{currentStep}}" steps="{{steps}}"/>\n        </div>\n        <app-content class="buy-num-package-content">\n            <template s-if="{{ui.show.form}}">\n                <div class="content-left">\n                    <dt>\n                        <h4>{{title}}</h4>\n                    </dt>\n                    <xui-table\n                        datasource="{{datasource}}"\n                        schema="{{schema}}"\n                        cell-builder="{{cellRenderer}}"\n                    >\n                        <template slot="c-packageSize">\n                            {{row.packageSize | formatSize}}\n                        </template>\n                        <template slot="c-price">\n                            ￥ {{row.price | currency}}\n                        </template>\n                        <template slot="c-number">\n                            <xui-numbertextline s-ref="numbertextline{{rowIndex}}" max="{{row.purchaseLimit}}" min="{{min}}" value="{{numList[rowIndex]}}" on-input="handleInput($event, rowIndex)" />\n                        </template>\n                    </xui-table>\n                </div>\n                <div class="content-right {{cartNotEmpty ? \'not-empty\' : \'empty\'}}">\n                    <div class="content">\n                        <dt>\n                            <h4>所选配置</h4>\n                            <p on-click="clearItem(\'all\')">清除</p>\n                        </dt>\n                        <template s-if="!cartNotEmpty">\n                            <div class="icon">\n                                <xui-icon name="shopping-cart" />\n                            </div>\n                            <div class="empty-tip {{isTipColorRed ? \'red\' : \'\'}}">\n                                请在左侧选择次数包类型\n                            </div>\n                        </template>\n                        <div s-if="cartNotEmpty" class="goods-content">\n                            <template s-for="item, index in numList">\n                                <div s-if="item" class="good-item">\n                                    <div class="good-item-name">\n                                        {{datasource[index].packageSize | formatSize}} × {{item}} 个\n                                    </div>\n                                    <div class="good-item-num">\n                                        <span class="good-item-price">￥ {{datasource[index].price * item | currency}}</span>\n                                        <xui-icon name="close" on-click="clearItem(index)"/>\n                                    </div>\n                                </div>\n                            </template>\n                        </div>\n                        <div class="total-price" s-if="cartNotEmpty">\n                            <span class="title">价格：</span>\n                            <span class="price">￥ {{totalPrice | currency}}</span>\n                        </div>\n                        <xui-button disabled="{{!isQualifed}}" class="buy-package-submit" skin="primary" on-click="checkCart">下一步</xui-button>\n                        <div class="qulify-tip" s-if="{{!isQualifed}}">\n                            <p s-if="{{!needEnterprise}}">\n                                开通付费需完成实名认证，立即<a target="_blank" href="{{Url.personalQualify}}">进行实名认证</a>\n                            </p>\n                            <p s-else>\n                                开通付费需完成企业认证，立即<a target="_blank" href="{{Url.enterpriseQualify}}">进行企业认证</a>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </template>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.panel}}" class="order-confirm-panel"></ui-actionpanel>            \n            <xui-dialog open="{=confirmDialog.open=}" head="{{false}}" on-confirm="confirm">\n                {{confirmDialog.text}}\n            </xui-dialog>\n            \x3c!-- 未支付订单弹框 --\x3e\n            <xui-dialog open="{=unpaidDialog.open=}" title="您还有未支付的订单" width="500">\n                <p>该服务存在未支付的订单，请完成支付或取消已有订单后再进行购买。</p>\n                <div slot="foot">\n                    <a href="//console.bce.baidu.com/billing/#/order/list">\n                        <xui-button skin="primary">查看已有订单</xui-button>\n                    </a>\n                    <xui-button on-click="cancel">退出</xui-button>\n                </div>\n            </xui-dialog>\n        </app-content>\n    </app-view>\n</div>\n    '}),define("ai/page/buyQps/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/helpers/object-without-properties","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","inf-ria/app/brpc","lodash","moment","jquery","ai/components/index","san-xui","ai/common/enums","ai/config/qpsOverlay","ai/config/constants"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m){var h=n["default"](i),g=n["default"](r),v=n["default"](s),x=n["default"](o),b=n["default"](l),y=n["default"](u),k={day:"天",month:"月",year:"年"};module.exports=h["default"]({template:g["default"],components:{"ai-form":d.Form,"ai-form-group":d.FormGroup,"ai-form-row":d.FormRow,"buy-qps-bucket":d.BuyQpsBucket,"qps-calculator":d.QpsCalculator,"xui-calendar":c.Calendar,"xui-radioselect":c.RadioSelect,"no-side-head":d.NoSideHead},messages:{"buyQpsBucket:delete":function(e){var t=e.value;this.data.remove("cartList",t)}},computed:{priceInfo:function(){var e=this.data.get("apiPriceList"),t=this.data.get("checkedApiId");return e.length&&t?e.filter(function(e){return e.apiId===t})[0]||{}:{}},priceDetail:function(){var t=this.data.get("priceInfo"),a=this.data.get("timeUnit");return x["default"].isEmpty(t)?[]:t[a+"Price"]?t[a+"Price"].map(function(t){return e["default"]({},t,{cost:+t.cost,min:+t.min,max:+t.max})}):[]},priceTable:function(){return this.data.get("priceDetail").reduce(function(e,t){var a=t.range,i=t.cost,n=t.min,r=t.max;return e.schema.push({label:n||r!==m.INFINITE?a:a+"QPS",name:n}),e.data[0][n]=i,e},{schema:[{label:"QPS 数量",name:"head"}],data:[{head:"单价（元 / "+k[this.data.get("timeUnit")]+" / QPS）"}]})},price:function(){var e=this.data.get("timeUnit"),t=this.data.get("priceDetail"),a=0;if("day"===e){var i=this.data.get("timeRange").split(",");a=b["default"](i[1],"YYYY.MM.DD").diff(b["default"](i[0],"YYYY.MM.DD"),"days")+1}else a=this.data.get(e);return a*function(e,t){return e=+e,x["default"].sortBy(t,function(e){return e.point}).reduce(function(t,a,i,n){if(a.point===m.INFINITE)t=e*a.price;else if(e-a.point>0){var r=n[i+1];!r||e-r.point<0?t+=(e-a.point)*a.price:t+=(r.point-a.point)*a.price}return t},0)}(this.data.get("qps"),t.map(function(e){var t=e.min,a=e.max,i=e.cost;return{point:t||a!==m.INFINITE?t:m.INFINITE,price:i}}))},cartLength:function(){return this.data.get("cartList").length},totoalPrice:function(){return this.data.get("cartList").reduce(function(e,t){return e+t.price},0)},confirmBtnDisabled:function(){return!this.data.get("cartList").length||this.data.get("totoalPrice")<=0},hasCategory:function(){return this.data.get("apiList").length&&this.data.get("apiList")[0].label},apiDatasource:function(){var a=this,i=this.data.get("apiList"),n=i;return this.data.get("hasCategory")&&function(){var e=a.data.get("category");n=(i.filter(function(t){return t.labelId===e})[0]||[]).children||[]}(),n.map(function(a){var i=a.id,n=a.name,r=t["default"](a,["id","name"]);return e["default"]({value:i,text:n},r)})},categoryList:function(){return this.data.get("hasCategory")?this.data.get("apiList").map(function(e){return{text:e.label,value:e.labelId}}):[]},qpsLimit:function(){var e=this.data.get("checkedApiId"),t=undefined;return this.data.get("apiList").forEach(function(a){a.id&&a.id===e?t=a.purchaseLimit:a.children&&a.children.forEach(function(a){a.id===e&&(t=a.purchaseLimit)})}),t},numberMaxLenght:function(){return this.data.get("apiList")&&this.data.get("apiList").length?(""+this.data.get("qpsLimit")).length||10:""},timeRange:function(){var e=b["default"]().format("YYYY.MM.DD"),t=~[p.AppType.face,p.AppType.body,p.AppType.speech].indexOf(this.data.get("aiAppType"))?0:1;return e+","+b["default"]().add(1,"weeks").subtract(t,"day").format("YYYY.MM.DD")},timeUnits:function(){var e=this.data.get("priceInfo");return["day","month","year"].filter(function(t){return e[t+"Price"]}).map(function(e){return{text:"按"+k[e]+"购买",value:e}})},canSelectStartTime:function(){return~[].concat(f.hasQPSOverlay,[p.AppType.body]).indexOf(this.data.get("aiAppType"))&&"month"===this.data.get("timeUnit")},isFaceMerge:function(){return+this.data.get("checkedApiId")===m.FACE_MERGE_QPS_ID},step:function(){return this.data.get("isFaceMerge")?10:1},minQps:function(){return this.data.get("isFaceMerge")?10:1},qps:function(){return this.data.get("isFaceMerge")?10:1}},initData:function(){return{ui:{show:{panel:!1,form:!0}},timeUnit:"day",month:1,year:1,range:{begin:b["default"]().subtract(1,"day").toDate(),end:b["default"]().add(100,"year").toDate()},apiPriceList:[],apiList:[],category:0,checkedApiId:null,cartList:[],height:"500",qpsMap:{},currentStep:0,errorMsg:"",calendar:{value:b["default"]().toDate()},steps:[{text:"购买QPS"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}]}},attached:function(){return a["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return y["default"](window).on("resize.ai",this.onResize.bind(this)),this.onResize(),this.watch("checkedApiId",this.onApiChange),this.getApiPrice(),e.next=6,a["default"].awrap(this.getApiList());case 6:this.getcheckedApiId(this.$get("apiList"));case 7:case"end":return e.stop()}},null,this)},disposed:function(){y["default"](window).off("resize.ai")},onResize:function(){this.$set("height",y["default"](window).height()-100-60)},getcheckedApiId:function(e){var t=this.$get("apiId");if(this.$get("hasCategory")){for(var a=[],i=0,n=e.length;i<n;i++){var r=e[i];if((o=r.children.filter(function(e){return e.id===t})).length){a.push(r.labelId,o[0].id);break}}if(a.length)this.$set("category",a[0]),this.$set("checkedApiId",a[1]);else{var s=e[0];s&&(this.$set("category",s.labelId),this.$set("checkedApiId",s.children[0].id))}}else{var o=x["default"].find(e,{id:t});this.$set("checkedApiId",o?o.id:e[0].id)}},getApiPrice:function(){var e;return a["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].awrap(this.ajax.apiPrice({type:this.$get("aiAppType"),isQps:!0}));case 2:e=t.sent,this.$set("apiPriceList",e);case 4:case"end":return t.stop()}},null,this)},getApiList:function(){var e,t;return a["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.$get("aiAppType"),i.next=3,a["default"].awrap(this.ajax.canBuyQpsApiList({type:e}));case 3:(t=i.sent).length||this.$redirect("#/ai/"+e+"/overview/index"),t[0].label&&t.forEach(function(e,t){e.labelId=t,e.children.forEach(function(e){e.addVersionFlag&&+e.version&&(e.name+="V"+e.version)})}),this.$set("apiList",t);case 7:case"end":return i.stop()}},null,this)},getConfig:function(){return{type:this.$get("aiAppType"),orderType:"qps",items:this.$get("cartList").map(function(t){var a,i=t.timeRange.split(",").map(function(e){return b["default"](e,"YYYY.MM.DD").valueOf()}),n=i[0],r=i[1];return e["default"]({timeUnit:t.timeUnit,apiId:t.apiId,st:n,et:r,qps:t.qps},"day"===t.timeUnit?{}:(a={},a[t.timeUnit]=t[t.timeUnit],a))})}},getOrder:function(){var e=this.$get("aiAppType"),t=e.toUpperCase();return{serviceType:t,productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/"+e+"/order/v2/confirm",items:this.$get("cartList").map(function(e){var a={};if("day"===e.timeUnit){var i=e.timeRange.split(","),n=i[0],r=i[1];a={time:b["default"](r,"YYYY.MM.DD").diff(b["default"](n,"YYYY.MM.DD"),"days")+1,chargeType:["ai_daily"]}}else a={time:e[e.timeUnit],chargeType:["cpt2"]};return x["default"].extend({},a,{timeUnit:e.timeUnit.toUpperCase(),serviceType:t,productType:"prepay",count:e.qps+"QPS",configuration:["QPS配置时间："+e.time],serviceName:e.apiName,price:e.price})})}},confirm:function(){var e=this,t=this.ref("confirm").__getESUI();t.on("action@prevPage",function(){e.data.set("currentStep",1),e.data.set("ui.show.panel",!1),e.data.set("ui.show.form",!0)});var a={config:this.getConfig(),order:this.getOrder(),type:"MULTI_ORDER_ITEM"};v["default"].invokeService("billing://order_confirm",t,a).then(function(){e.data.set("currentStep",2),e.data.set("ui.show.panel",!0),e.data.set("ui.show.form",!1)})},handleAdd:function(){if(!this.validateQps())return!1;var e=undefined,t=this.$get("timeUnit"),a=this.$get(t);if("day"===t)e={time:this.$get("timeRange").split(",").join("-"),timeRange:this.$get("timeRange")};else if(this.$get("canSelectStartTime")){var i,n=b["default"](this.$get("calendar.value"));(i={time:(s=n.format("YYYY.MM.DD"))+"-"+(o=n.add(a,t).format("YYYY.MM.DD"))})[t]=a,i.timeRange=s+","+o,e=i}else{var r,s,o;(r={time:(s=b["default"]().format("YYYY.MM.DD"))+"-"+(o=b["default"]().add(a,t).format("YYYY.MM.DD"))})[t]=a,r.timeRange=s+","+o,e=r}this.data.push("cartList",x["default"].extend({},e,{id:x["default"].uniqueId(),timeUnit:t,apiId:this.$get("checkedApiId"),apiName:x["default"].find(this.$get("apiDatasource"),{value:this.$get("checkedApiId")}).text,qps:this.$get("qps"),price:this.$get("price")}))},validateQps:function(){var e=this.$get("qps");if(e<1)return!1;var t=this.$get("checkedApiId"),a=this.$get("qpsMap."+t),i=this.$get("cartList").filter(function(e){return e.apiId===t}).map(function(e){var t=e.time.split("-").map(function(e){return b["default"](e,"YYYY.MM.DD").valueOf(e)}),a=t[0],i=t[1];return{qps:e.qps,st:a,et:i}}),n={},r=this.$get("timeUnit"),s=this.$get(r);if("day"===r){var o=this.$get("timeRange").split(",").map(function(e){return b["default"](e,"YYYY.MM.DD").valueOf()});n={qps:e,st:o[0],et:o[1]}}else if(this.$get("canSelectStartTime")){var l=this.$get("calendar.value");n={qps:e,st:l.valueOf(),et:b["default"](l).add(s,r).valueOf()}}else{n={qps:e,st:b["default"]().valueOf(),et:b["default"]().add(s,r).valueOf()}}var u={};[].concat(a,i,[n]).forEach(function(e){for(var t=b["default"](e.st).startOf("day").valueOf(),a=b["default"](e.et).endOf("day").valueOf(),i=[],n=t;n<a;n+=864e5)i.push(b["default"](n).format("YYYY.MM.DD"));i.forEach(function(t){u[t]?u[t]+=+e.qps:u[t]=+e.qps})});for(var d=x["default"].keys(u).sort(function(e,t){return b["default"](e,"YYYY.MM.DD").valueOf()-b["default"](t,"YYYY.MM.DD").valueOf()}),c=[],p=undefined,f=undefined,m=this.$get("qpsLimit"),h=0,g=d.length;h<g;h++){var v=d[h],y=u[v];if(y>m&&!p&&(p=v),y>m&&p){var k=b["default"](v,"YYYY.MM.DD").add(1,"day").format("YYYY.MM.DD");(u[k]<=m||null==u[k])&&(p===(f=v)?c.push(p):c.push(p+"—"+f),p=null,f=null)}}return c.length?this.showErrorMsg(c.join("、")+"    QPS超出购买限额（"+m+"）"):this.showErrorMsg(""),!c.length},showErrorMsg:function(){var e=arguments.length<=0||arguments[0]===undefined?"":arguments[0];this.$set("errorMsg",e)},onApiChange:function(){var e,t,i,n,r;return a["default"].async(function(s){for(var o=this;;)switch(s.prev=s.next){case 0:if(e=this.$get(),t=e.timeUnits,i=e.timeUnit,null==(n=e.checkedApiId)){s.next=11;break}if(this.nextTick(function(){t.length&&x["default"].isEmpty(x["default"].find(t,{value:i}))&&o.$set("timeUnit",t[0].value)}),this.$get("qpsMap."+n)){s.next=11;break}return s.next=9,a["default"].awrap(this.ajax.qpsOrderList({apiId:n}));case 9:r=s.sent,this.$set("qpsMap."+n,r);case 11:case"end":return s.stop()}},null,this)},onCategoryChange:function(){var e=this;this.nextTick(function(){var t=e.$get("apiDatasource")[0];e.$set("checkedApiId",t?t.value:null)})},handleInput:function(e){var t=e.value;t&&x["default"].isNumber(+t)&&(t=Math.floor(t),this.$get("isFaceMerge")&&(t=t<10?10:10*Math.floor(t/10)),this.ref("select").data.set("value",t),this.$set("qps",t))},backToManage:function(){this.$aiRedirect("overview/index")}})}),define("ai/page/buyQps/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap ai-buy-qps">\n    <app-view>\n        <div class="page-breadcrumb-wrapper">\n            <no-side-head\n                on-backToManage="backToManage"\n                stepIndex="{{currentStep}}"\n                steps="{{steps}}"\n            >\n                <span slot="back-title">返回概览页</span>\n                <span slot="title">购买QPS</span>\n            </no-side-head>\n        </div>\n        <app-content>\n            <div s-if="{{ui.show.form}}">\n                <ai-form class="left-block" style="height:{{height}}px">\n                    <ai-form-group title="QPS购买">\n                        <ai-form-row label="购买方式：">\n                            <xui-radioselect s-ref="radioselect" datasource="{{timeUnits}}" value="{=timeUnit=}" />\n                        </ai-form-row>\n                        <ai-form-row label="选择接口：">\n                            <xui-select s-if="hasCategory" datasource="{{categoryList}}" value="{=category=}" on-change="onCategoryChange"></xui-select>\n                            <xui-select s-if="apiList.length" datasource="{{apiDatasource}}" value="{=checkedApiId=}" layer-width="180"></xui-select>\n                        </ai-form-row>\n                        <ai-form-row label="购买单价：">\n                            <xui-table schema="{{priceTable.schema}}" datasource="{{priceTable.data}}"></xui-table>\n                        </ai-form-row>\n                        <ai-form-row label="购买时长：" s-if="timeUnit == \'month\'">\n                            <ui-numbertextline style="display:inline-block" value="{=month=}"></ui-numbertextline>\n                                <span class="ml10">月</span>\n                        </ai-form-row>\n                        <ai-form-row label="购买时长：" s-if="timeUnit === \'year\'">\n                                <ui-numbertextline style="display:inline-block" value="{=year=}"></ui-numbertextline>\n                                    <span class="ml10">年</span>\n                        </ai-form-row>\n                        <ai-form-row label="起始日期：" s-if="{{canSelectStartTime}}">\n                            <xui-calendar value="{=calendar.value=}" range="{{range}}"/>\n                        </ai-form-row>\n                        <ai-form-row label="购买期限：" s-if="timeUnit == \'day\'">\n                            <ui-rangecalendar dateFormat="YYYY.MM.DD" value="{=timeRange=}" range="{{range}}" hideShortCut="true"></ui-rangecalendar>\n                            <ui-tip content="自起始日0点生效，至停止日24点失效。 若起始日为本日，则是从下单成功时当即生效。" skin="warning"></ui-tip>\n                        </ai-form-row>\n                        <ai-form-row label="购买数量：" s-if="numberMaxLenght">\n                            <xui-numbertextline\n                                step="{{step}}"\n                                style="display:inline-block"\n                                maxlength="{{numberMaxLenght}}"\n                                min="{{minQps}}"\n                                max="{{qpsLimit}}"\n                                value="{=qps=}"\n                                s-ref="select"\n                                on-input="handleInput($event)"\n                            />\n                            <span class="ml10">QPS</span>\n                        </ai-form-row>\n                        <ai-form-row label="购买费用：" style="color:#FF3333">\n                            ￥ {{price}}\n                        </ai-form-row>\n                        <div class="tip-content">\n                            注：单个接口一天的QPS资源购买上限为{{qpsLimit}}，若需要更多QPS，请<a href="{{Url.ticket}}" target="_blank">提交工单</a>处理。\n                        </div>\n                        <div class="btn-container">\n                            <xui-button data-track-id="qps_add_cart"  data-track-name="购买QPS-添加到购物车" skin="create" class="add-cart-btn" on-click="handleAdd" disabled="{{checkedApiId == null}}">\n                                <i class="iconfont icon-shopping-cart" title="购物车"></i>添加到购物车\n                            </xui-button>\n                            <span class="error-msg">{{errorMsg}}</span>\n                        </div>\n                    </ai-form-group>\n                    <div s-if="aiAppType === \'speech\'" class="qps-calculator-wrap">\n                        <h4>QPS计算公式</h4>\n                        <qps-calculator />\n                    </div>\n                </ai-form>\n                <ai-form class="right-block" style="height:{{height}}px">\n                    <div class="cart-title">\n                        <i class="iconfont icon-shopping-cart" title="购物车" style="font-weight: bold"></i> <span>购物车</span>\n                        <div class="form-summary">共{{cartLength}}个项目</div>\n                    </div>\n                    <div class="buy-qps-container" style="height:{{height-108}}px">\n                        <buy-qps-bucket class="buy-qps-bucket" s-for="item in cartList" item="{{item}}"></buy-qps-bucket>\n                    </div>\n                    <div class="cart-footer">\n                        <div class="totol-price">总计：<span style="color:#FF3333">￥{{totoalPrice}}</span></div>\n                        <xui-button  data-track-id="qps_settle_accounts"  data-track-name="购买QPS-去结算" class="confirm-btn" skin="ok" disabled="{{confirmBtnDisabled}}" on-click="confirm">去结算</xui-button>\n                    </div>\n                </ai-form>\n            </div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.panel}}" class="order-confirm-panel"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/comment/dict/detail/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","inf-ui/x/components/Button","inf-ui/x/components/Table","inf-ui/x/components/Pager","inf-ui/x/components/Dialog","inf-ui/x/components/Loading","inf-ui/x/components/Icon","./SaveDialog","ai/components/FileErrorDetailDialog","lodash","moment","ai/config","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m){var h=t["default"](e),g=t["default"](a),v=t["default"](i),x=t["default"](n),b=t["default"](r),y=t["default"](s),k=t["default"](o),T=t["default"](l),w=t["default"](u),I=t["default"](d),D=t["default"](c),S=t["default"](p),A="ai-comment-has-closed-";module.exports=h["default"]({template:g["default"],messages:{showErrorDetailDialog:function(e){var t=e.value;this.$set("errorDetailDialog.visible",!0),this.$set("errorDetailDialog.detail",t)}},components:{"xui-button":v["default"],"xui-table":x["default"],"xui-pager":b["default"],"xui-dialog":y["default"],"xui-loading":k["default"],"xui-icon":T["default"],"save-dialog":w["default"],"error-detail-dialog":I["default"]},computed:{breadItem:function(){return[{title:"词法分析定制",url:"#/ai/"+this.data.get("aiAppType")+"/comment/dict/list"},{title:this.data.get("detail").name}]},btnDisabled:function(){var e=D["default"].get(this.data.get("detail"),"status");return D["default"].contains([m.DictStatus.effected,m.DictStatus.effecting,m.DictStatus.init],e)},maskStatusVisible:function(){var e=D["default"].get(this.data.get("detail"),"status"),t=window.localStorage.getItem(A+this.data.get("appId"));return e===m.DictStatus.effecting||e===m.DictStatus.fail||e===m.DictStatus.effected&&"true"!==t}},filters:{dateFormat:function(e,t){return e?S["default"](e).format(t):""}},initData:function(){return{detail:{},table:{error:"",schema:[{name:"industry",label:"行业垂类"},{name:"word.num",label:"自定义评论词汇数量"},{name:"updateTime",label:"更新时间"},{name:"operator",label:"词表操作"}],loading:!1,datasource:[],cellRenderer:function(e,t,a,i){return"word.num"===t?D["default"].get(e.word,"num",0):"updateTime"===t?S["default"](e[t]).format("YYYY/MM/DD HH:mm"):"operator"==t?0==D["default"].get(e.word,"num",0)?'<a data-command="CREATE" href="javascript:void(0)">扩展</a>':'<a data-command="UPDATE" href="javascript:void(0)">修改</a> |\n                                    <a data-command="DELETE" href="javascript:void(0)">清空</a>\n                            ':e[t]}},pager:{pageNo:1,pageSize:20,totalCount:0},saveDialog:{type:"create",visible:!1,payload:null},deleteDialog:{visible:!1,title:"",content:"",id:""},errorDetailDialog:{visible:!1,detail:[]}}},attached:function(){this.getData()},reload:function(){this.$reload()},getData:function(){var e=this;this.$set("table.loading",!0),f.api.getCommentWordsetList(this.getParams()).then(function(t){e.$set("table.datasource",t.result),e.$set("pager.totalCount",t.totalCount),e.$set("table.loading",!1)}),this.getDetail()},getDetail:function(){var e=this;f.api.getCommentDictDetail({appId:this.$get("appId")},{"x-silent":!0}).then(function(t){e.$set("detail",t),t.status===m.DictStatus.effecting&&setTimeout(function(){e.getDetail()},1e4)})},getParams:function(){return D["default"].extend(this.$get("pager"),{appId:this.$get("appId")})},onPagerChange:function(e){var t=e.pageNo;this.data.set("pager.pageNo",t),this.getData()},onCommand:function(e){var t=e.type,a=e.payload;switch(t){case"UPDATE":this.showWordSaveDialog("update",a);break;case"CREATE":this.showWordSaveDialog("create",a);break;case"DELETE":this.showDeleteDialog(a)}},showWordSaveDialog:function(e,t){this.$set("saveDialog.type",e),this.$set("saveDialog.payload",D["default"].cloneDeep(t,!0)),this.$set("saveDialog.visible",!0)},showDeleteDialog:function(e){this.$set("deleteDialog.visible",!0),this.$set("deleteDialog.title","清空词表"),this.$set("deleteDialog.content","确定要清空“"+e.industry+"”词表吗？"),this.$set("deleteDialog.id",e.id)},deleteWordset:function(){var e=this;f.api.deleteCommentWordset({appId:this.$get("appId"),id:this.$get("deleteDialog.id")}).then(function(){e.$toast(e.$get("deleteDialog.title")+"成功"),e.$reload()})},effect:function(){var e=this;f.api.effectCommentDict({appId:this.$get("appId")}).then(function(){window.localStorage.removeItem(A+e.$get("appId")),e.$reload()})},closeMaskStatus:function(){this.$set("maskStatusVisible",!1),window.localStorage.setItem(A+this.$get("appId"),"true")},retry:function(){this.effect()}})}),define("ai/page/comment/dict/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content class="dict-detail-content">\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content">\n                <div class="content-head">\n                    <div class="app-name">{{detail.name}} - 定制词表</div>\n                    <div class="effect-time">词表生效时间：{{detail.effectTime | dateFormat(\'YYYY/MM/DD HH:mm\')}}</div>\n                    <xui-button skin="ok" class="effect-btn" on-click="effect" disabled="{{btnDisabled}}">立即生效</xui-button>\n                </div>\n\n                <div class="content-body">\n                    <div class="table-full-wrap">\n                        <xui-table\n                            on-command="onCommand($event)"\n                            cell-builder="{{table.cellRenderer}}"\n                            schema="{{table.schema}}"\n                            loading="{{table.loading}}"\n                            error="{{table.error}}"\n                            datasource="{{table.datasource}}">\n                            <div class="ui-table-error" slot="error">\n                                啊呀，出错了？<a href="javascript:void(0)" on-click="refreshTable">重新加载</a>\n                            </div>\n                        </xui-table>\n                    </div>\n                    <xui-pager size="{{pager.pageSize}}"\n                        page="{{pager.pageNo}}"\n                        count="{{pager.totalCount}}"\n                        back-text="<"\n                        forward-text=">"\n                        on-change="onPagerChange($event)" />\n                </div>\n\n                <div class="status-mask" s-if="maskStatusVisible">\n                    <div class="mask"></div>\n                    <div class="dialog">\n                        <div s-if="detail.status == 2">\n                            <xui-loading size="middle" />\n                            <span class="word">生效中，预计耗时2-10分钟，请您耐心等待</span>\n                        </div>\n                        <div s-if="detail.status == 0">\n                            <xui-icon name="ok-reverse"></xui-icon>\n                            <span class="word">词表已生效</span>\n                            <span on-click="closeMaskStatus">\n                                <xui-icon name="close"></xui-icon>\n                            </span>\n                        </div>\n                        <div s-if="detail.status == 3">\n                            <xui-icon name="fail-reverse"></xui-icon>\n                            <span class="word">生效失败，<a href="javascript:void(0)" on-click="retry">请重试&gt;</a></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- dialog --\x3e\n            <xui-dialog open="{=deleteDialog.visible=}" on-confirm="deleteWordset">\n                <div slot="head">{{deleteDialog.title}}</div>\n                {{deleteDialog.content}}\n            </xui-dialog>\n\n            <save-dialog\n                on-reload="reload"\n                open="{=saveDialog.visible=}"\n                payload="{{saveDialog.payload}}"\n                appName="{{detail.name}}"\n                appId="{{appId}}"\n                type="{{saveDialog.type}}"\n            />\n\n            <error-detail-dialog open="{=errorDetailDialog.visible=}" detail="{{errorDetailDialog.detail}}" title="词表校验结果"></error-detail-dialog>\n\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/comment/dict/detail/SaveDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/forms/Form","inf-ui/x/forms/FormItem","inf-ui/x/components/TextBox","inf-ui/x/components/Dialog","inf-ui/x/components/Button","inf-ui/x/components/Tip","ai/components/UploadItem","async-validator","ai/config","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=t["default"](e),f=t["default"](a),m=t["default"](i),h=t["default"](n),g=t["default"](r),v=t["default"](s),x=t["default"](o),b=t["default"](l),y=t["default"](c);module.exports=p["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="dict-detail-save-dialog">\n                <div slot="head">{{title}}</div>\n                <xui-form formData="{=formData=}" rules="{{rules}}" errors="{=errors=}" s-ref="saveForm">\n                    <xui-item label="应用名称：">{{appName}}</xui-item>\n                    <xui-item label="所属行业：">{{payload.industry}}</xui-item>\n                    <xui-item label="文件导入：" class="file-form-item" name="file" required>\n                        <span slot="label">文件导入：\n                            <xui-tip position="lt">\n                                <dl class="wordset-tip">\n                                    <div class="wordset-tip-item">\n                                        <dt>评论对象：</dt><dd>包括评论实体与实体的不同维度，如：手机、手机像素、手机电池等</dd>\n                                    </div>\n                                    <div class="wordset-tip-item">\n                                        <dt>评论描述：</dt><dd>对评论对象的描述文本，如：好用、挺清晰、不会回购等</dd>\n                                    </div>\n                                    <div class="wordset-tip-item">\n                                        <dt>情感极性：</dt><dd>对评论描述的情感判断，2表示积极，0表示消极</dd>\n                                    </div>\n                                    <div class="wordset-tip-item">\n                                        <dt>归一化标签：</dt><dd>可选填，是指把同类评论描述聚合成同一标签</dd>\n                                    </div>\n                                </dl>\n                            </xui-tip>\n                        </span>\n                        <div>\n                            <upload-item\n                                on-seeErrorDetail="showErrorDetailDialog"\n                                options="{{fileUpload.options}}"\n                                error="{=fileUpload.error=}"\n                                sizeLimit="{{fileUpload.sizeLimit}}" url="{{fileUpload.url}}" extraData="{{fileUpload.extraData}}"\n                                data="{=formData.file=}">\n                                <div slot="error">\n                                    {{error}}\n                                    <a s-if="fileUpload.errorDetail">test</a>\n                                </div>\n                            </upload-item>\n                        </div>\n                    </xui-item>\n                    <xui-item label=" " class="desc-form-item">\n                        <div class="file-upload-desc">\n                            <div>文件格式为.txt,不超过2MB，编码仅支持GBK</div>\n                            <div><a href="https://nlp-test.bj.bcebos.com/comment-test/demo/评论观点抽取定制化demo.txt" target="_blank">下载评论词表模板</a>，并按照如下格式填写：</div>\n                        </div>\n                        <div class="commment-demo">\n                            <div class="comment-demo-item">\n                                <div class="comment-demo-label">格式：</div>\n                                <div class="comment-demo-content" style="color: #108CEE;">\n                                    <div class="comment-demo-object">评论对象</div> \\t\n                                    <div class="comment-demo-object">评论描述</div> \\t\n                                    <div class="comment-demo-object">情感极性</div> \\t\n                                    <div class="comment-demo-object">归一化标签</div>\n                                </div>\n                            </div>\n                            <div class="comment-demo-item">\n                                <div class="comment-demo-label">例子：</div>\n                                <div class="comment-demo-content">\n                                    <div>手机\\t像素很高\\t2\\t摄像头清晰</div>\n                                    <div>摄像头\\t清晰\\t2\\t摄像头清晰</div>\n                                    <div>上网速度\\t很慢\\t0</div>\n                                </div>\n                            </div>\n                            <div>其中情感极性‘2’表示积极、‘0’表示消极，归一化标签为选填项</div>\n                        </div>\n                    </xui-item>\n                </xui-form>\n                <div slot="foot">\n                    <ui-button on-click="save" skin="primary" disabled="{{btnDisabled}}">确认</ui-button>\n                    <ui-button on-click="onCloseDialog">取消</ui-button>\n                </div>\n            </xui-dialog>\n        </div>\n    ',computed:{state:function(){return this.data.get("type")},title:function(){switch(this.data.get("state")){case"create":return"新增词表";case"update":return"编辑词表"}},btnDisabled:function(){return!!this.data.get("errors")}},components:{"xui-dialog":g["default"],"xui-textbox":h["default"],"xui-button":v["default"],"xui-form":f["default"],"xui-item":m["default"],"xui-tip":x["default"],"upload-item":b["default"]},initData:function(){var e=this;return{formData:{},errors:[],rules:new u["default"]({file:function(t,a,i,n){e.$get("formData");y["default"].isEmpty(n.file)?i("请选择一个文件导入"):i()}}),fileUpload:{url:"/api/ai/s/nlp/fileUpload",sizeLimit:2097152,extraData:{kind:"nlpCommentCustomize"},options:{accept:{title:"Files",extensions:"txt"}},error:""}}},created:function(){var e=this;this.watch("open",function(t){t&&(0!==e.$get("payload.word.num")?e.$set("formData.file",{id:e.$get("payload.word.fileId"),name:e.$get("payload.word.fileName"),url:e.$get("payload.word.fileUrl")}):e.$set("formData.file",null),e.$set("errors",[]),e.$set("fileUpload.error",""))})},save:function(){var e=this;this.ref("saveForm").validateForm().then(function(){e.sendAjax()})},onCloseDialog:function(){this.$set("open",!1)},sendAjax:function(){var e=this,t=this.$get("payload"),a={appId:this.$get("appId"),id:t.id,isDefault:t.isDefault,code:t.code,industry:t.industry,wordFileId:y["default"].get(this.$get("formData"),"file.id")};d.api.saveCommentWordset(a).then(function(){e.$toast("保存成功"),e.$set("open",!1),e.fire("reload")},function(t){t.field&&e.$set("errors",t.field)})},showErrorDetailDialog:function(e){this.dispatch("showErrorDetailDialog",e)}})}),define("ai/page/comment/dict/list/Card",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","moment","ai/common/enums"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a);module.exports=n["default"]({template:'\n        <div class="card">\n            <div class="card-head">\n                <div class="app-name">{{data.name}}</div>\n                <div class="app-id">APP ID: {{data.devAppId}}</div>\n            </div>\n            <div class="card-body">\n                <div s-if="data.status == DictStatus.modified">\n                    评论观点抽取定制词表设置已更新，待生效 <br>\n                    建议您生效最新版定制词表\n                </div>\n                <div s-elif="data.status == DictStatus.effecting">\n                    评论观点抽取定制生效中...\n                </div>\n                <div s-elif="data.status == DictStatus.fail">\n                    本次评论观点抽取定制生效失败 <br>\n                    目前使用的仍是上一个生效版本，请您重试\n                </div>\n                <div s-elif="data.status == DictStatus.init">\n                    系统默认词表已生效 <br>\n                    您还可以添加更多自定义内容\n                </div>\n                <div s-elif="data.status == DictStatus.effected">\n                    <div class="card-item">\n                        <span class="card-item-title">生效时间：</span>\n                        <div class="card-item-value">{{data.effectTime | dateFormat(\'YYYY/MM/DD HH:mm\')}}</div>\n                    </div>\n                    <div class="card-item">\n                        <span class="card-item-title">已生效词表：</span>\n                        <div class="word-list card-item-value">{{data.wordset | join}}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="card-foot">\n                <a href="javascript:void(0)" class="to-detail-btn" on-click="onCommand(\'toDetail\', data.appId)">\n                    <span s-if="data.status != DictStatus.init">\n                        查看详情\n                    </span>\n                    <span s-else>\n                        立即创建\n                    </span>\n                </a>\n            </div>\n        </div>\n    ',filters:{join:function(e){return e&&e.join(" | ")},dateFormat:function(e,t){return r["default"](e).format(t)}},initData:function(){return{DictStatus:i.DictStatus}},onCommand:function(e,t){this.dispatch(e,t)}})}),define("ai/page/comment/dict/list/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/config","inf-ui/x/components/Pager","inf-ui/x/components/Loading","./Card"],function(exports,module,e,t,a,i,n,r,s){var o=t["default"](e),l=t["default"](a),u=t["default"](n),d=t["default"](r),c=t["default"](s);module.exports=o["default"]({template:l["default"],components:{card:c["default"],"xui-pager":u["default"],"xui-loading":d["default"]},messages:{toDetail:function(e){var t=e.value;this.$redirect("/ai/"+this.aiAppType+"/comment/dict/detail~appId="+t)}},initData:function(){return{pageNo:1,pageSize:9,totalCount:0,isLoading:!0,dictList:[],breadItem:[{title:"评论观点抽取定制"}]}},attached:function(){this.getData()},getData:function(){var e=this;this.$set("isLoading",!0),i.api.getCommentDictList(this.getParams()).then(function(t){e.$set("dictList",t.result),e.$set("totalCount",t.totalCount),e.$set("isLoading",!1)})},getParams:function(){return{pageNo:this.$get("pageNo"),pageSize:this.$get("pageSize")}},onPagerChange:function(e){var t=e.pageNo;this.$set("pageNo",t),this.getData()}})}),define("ai/page/comment/dict/list/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n        <app-view>\n            <app-content>\n                <breadcrumb items="{{breadItem}}"></breadcrumb>\n                <div class="list-content dict-list-content">\n                    <h2>\n                        评论观点抽取定制\n                        <ui-tip content="您可以基于平台已有的13个行业垂类，进行评论词表的扩展，来满足您多样的评论抽取需求。定制化服务不仅可以定制评论的抽取对象和描述，还可以定制您想提取的评论聚合标签"></ui-tip>\n                    </h2>\n                    <div>\n                        <xui-loading s-if="isLoading"/>\n                        <div s-elif="dictList.length">\n                            <div class="card-list">\n                                <card s-for="item in dictList" data="{{item}}"></card>\n                            </div>\n                            <xui-pager size="{{pageSize}}"\n                                page="{{pageNo}}"\n                                count="{{totalCount}}"\n                                back-text="<"\n                                forward-text=">"\n                                on-change="onPagerChange($event)" />\n                        </div>\n                        <div class="card-list-emtpy" s-else>\n                            <div class="app-list-no-data">\n                                <div class="no-data-helper">您还没有创建任何应用！</div>\n                                <a href="#/ai/{{aiAppType}}/app/create">马上创建></a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </app-content>\n        </app-view>\n    </div>\n'}),define("ai/page/easydl/common/options",["exports","module","babel-runtime/regenerator","ai/common/util","../modals/index","ai/common/enums","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i,n,r){var s=r["default"](n);module.exports={filters:{formatApi:function(e){var t='<span class="api-name">';return e.apiSrc?t+='<a href="'+e.apiSrc+'" target="_blank">'+s["default"].escape(e.name)+"</a>":t+=s["default"].escape(e.name),t+"</span>"},formatStatus:function(e){return t.getApiStatus(e)},formatCharge:function(e){return t.getChargeField(this.data.get("aiAppType")).content(e)}},functions:{disposeQpsDetailDialog:function(){this.qpsDetailDialog&&(this.qpsDetailDialog.dispose(),this.qpsDetailDialog=null)},disposeDestroyDialog:function(){this.destroyDialog&&(this.destroyDialog.dispose(),this.destroyDialog=null)},onCommand:function(e){var t=e.type,a=e.payload;"function"==typeof this[t]&&this[t](a)},qpsDetail:function(e){var t=e.id,i=e.name;this.disposeQpsDetailDialog(),this.qpsDetailDialog=new a.QpsDetail({data:{open:!0,name:i,apiId:t}}),this.qpsDetailDialog.attach(document.body)},orderDestroy:function(n){var r,s=n.id;return e["default"].async(function(n){for(var o=this;;)switch(n.prev=n.next){case 0:return this.disposeDestroyDialog(),n.next=3,e["default"].awrap(t.cacheValue(this.$get("aiAppType")+"_"+s,function(){return o.ajax.runningResourceType({resourceType:[i.ResourceType["package"],i.ResourceType.qpsPackage],apiId:s})}));case 3:r=n.sent,this.destroyDialog=new a.Destroy({data:{open:!0,resourceTypes:r,apiId:s}}),this.destroyDialog.on("destroySuccess",function(){o.getTableList()}),this.destroyDialog.attach(document.body);case 7:case"end":return n.stop()}},null,this)},changeToggle:function(){this.$set("showTutorial",!this.$get("showTutorial"))}}}}),define("ai/page/easydl/common/retailOverview/easydlOverviewApi",["exports","module","../subOverview/index","ai/common/enums"],function(exports,module,e,t){module.exports={schema:e.schema(t.EasydlAvailableTabs.PUBLICCLOUD,t.AppType.easydlRetail),cellRenderer:e.cellRenderer(t.EasydlAvailableTabs.PUBLICCLOUD,t.AppType.easydlRetail)}}),define("ai/page/easydl/common/retailOverview/easydlOverviewData",["exports","module"],function(exports,module){module.exports={schema:[{name:"api",label:"API"},{name:"status",label:"状态"},{name:"limit",label:"调用量限制"},{name:"maxQps",label:"QPS限制"},{name:"charge",label:"开通按量后付费"}]}}),define("ai/page/easydl/common/subOverview/cellRenderer",["exports","module","ai/common/enums","lodash","babel-runtime/helpers/interop-require-default","ai/common/util","moment"],function(exports,module,e,t,a,i,n){var r,s=a["default"](t),o=a["default"](n),l=(r={},r[e.AppType.easydlLite]=e.EasydlModelType,r[e.AppType.easydlPro]=e.EasydlProjectType,r[e.AppType.easydlRetail]=e.EasydlRetailType,r),u=function(e){var t=arguments.length<=1||arguments[1]===undefined?"YYYY-MM-DD":arguments[1],a=arguments.length<=2||arguments[2]===undefined?{value:-1,text:"永久"}:arguments[2];return e?-1===e?"永久":o["default"](e).format(t):a.text},d=function(e){return function(e,t,a,i){return"modelVersion"===t?"V"+(e.modelVersion||e.projectVersion):"modelId"===t?e.modelId||e.projectId:~["endTime","expireTime"].indexOf(t)?u(e[t],"YYYY-MM-DD",{value:null,text:"/"}):s["default"].escape(e[t])}};module.exports=function(t,a){var n;return(n={},n[e.EasydlAvailableTabs.PUBLICCLOUD]=function(e){return function(t,a,n,r){if("api"===a){var o='<span class="api-name">';return t.apiSrc?o+='<a href="'+t.apiSrc+'" target="_blank">'+s["default"].escape(t.name)+"</a>":o+=s["default"].escape(t.name),t.apiTip&&(o+='<span\n                    data-ui-type="Tip"\n                    data-ui-arrow="true"\n                    data-ui-content=\''+t.apiTip+"'></span>"),o+"</span>"}return~["modelType","projectType"].indexOf(a)?l[e].getTextFromValue(t.modelType||t.projectType):~["modelVersion","projectVersion"].indexOf(a)?"V"+(t.modelVersion||t.projectVersion):~["modelId","projectId"].indexOf(a)?t.modelId||t.projectId:~["modelName","projectName"].indexOf(a)?t.modelName||t.projectName:"status"===a?t.authStatus?i.getApiStatus(t):'<span class="status warning">暂未配置权限</span>\n                    <span\n                        data-ui-type="Tip"\n                        data-ui-arrow="true"\n                        data-ui-content="请在<a href=\'#/ai/easydl/service/list\'>云服务管理</a>中配置权限"></span>':"qps"===a?i.handleQpsTips(t.maxQps,t.qpsTip):"charge"===a?i.getChargeField(e).content(t):s["default"].escape(t[a])}}(a),n[e.EasydlAvailableSubTabs.LOCAL_API]=d(),n[e.EasydlAvailableSubTabs.LOCAL_SDK]=d(),n[e.EasydlAvailableTabs.DEVICE]=function(t,a,i,n){return~["expireTime","activateTime"].indexOf(a)?u(t[a],"YYYY-MM-DD",{value:null,text:"/"}):"authType"===a?e.EasyEdgeActiveType.getTextFromValue(t.authType):s["default"].escape(t[a])},n)[t]}}),define("ai/page/easydl/common/subOverview/index",["exports","./schemas","babel-runtime/helpers/interop-require","./cellRenderer"],function(exports,e,t,a){exports.__esModule=!0,exports.schema=t["default"](e),exports.cellRenderer=t["default"](a)}),define("ai/page/easydl/common/subOverview/schemas",["exports","module","ai/common/enums"],function(exports,module,e){module.exports=function(t,a){var i,n,r,s=(i={},i[e.AppType.easydlLite]="模型",i[e.AppType.easydlRetail]="模型",i[e.AppType.easydlPro]="项目",i),o=(n={},n[e.AppType.easydlLite]="模型版本",n[e.AppType.easydlRetail]="模型版本",n[e.AppType.easydlPro]="任务版本",n);return(r={},r[e.EasydlAvailableTabs.PUBLICCLOUD]=[{name:"api",label:"API"},{name:"modelId",label:s[a]+"ID"},{name:"modelType",label:s[a]+"类型"},{name:"modelName",label:s[a]+"名称"},{name:"modelVersion",label:o[a]},{name:"status",label:"状态"},{name:"limit",label:"调用量限制"},{name:"qps",label:"QPS限制"},{name:"charge",label:"开通按量后付费",width:180}],r[e.EasydlAvailableSubTabs.LOCAL_API]=[{name:"deployName",label:"私有服务名称"},{name:"modelId",label:s[a]+"ID"},{name:"modelVersion",label:o[a]},{name:"endTime",label:"到期时间"},{name:"operation",label:"操作"}],r[e.EasydlAvailableSubTabs.LOCAL_SDK]=[{name:"deployName",label:"私有服务名称"},{name:"modelId",label:s[a]+"ID"},{name:"modelVersion",label:o[a]},{name:"expireTime",label:"到期时间"},{name:"operation",label:"操作"}],r[e.EasydlAvailableTabs.DEVICE]=[{name:"authType",label:"激活方式"},{name:"name",label:"设备名/包名"},{name:"serialKey",label:"序列号"},{name:"activateTime",label:"激活时间"},{name:"expireTime",label:"到期时间"},{name:"operation",label:"操作"}],r)[t]}}),define("ai/page/easydl/index",["exports","module","./overview","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/local/apply/apply",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./apply.tpl","san-xui","./rules","ai/common/enums","../mixin","ai/common/util","ai/components/index","lodash","../typeConfig"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m,h,g=n["default"](i),v=n["default"](r),x=n["default"](o),b=n["default"](u),y=n["default"](p),k={api:(m={},m[l.AppType.easydlLite]={type:"模型类型",id:"选择模型",version:"选择版本",defectId:"暂无可私有化的模型",defectVersion:"暂无可私有化的版本"},m[l.AppType.easydlPro]={type:"项目类型",id:"选择项目",version:"选择任务版本",defectId:"暂无可私有化的项目",defectVersion:"暂无可私有化的任务"},m),sdk:(h={},h[l.AppType.easydlLite]={type:"模型类型",id:"选择模型",version:"选择版本",defectId:"暂无可私有化的模型",defectVersion:"暂无可私有化的版本"},h[l.AppType.easydlPro]={type:"项目类型",id:"选择项目",version:"选择任务",defectId:"暂无可私有化的项目",defectVersion:"暂无可私有化的任务"},h)};module.exports=g["default"]({template:v["default"],mixin:b["default"],components:{"xui-calendar":s.Calendar,"upload-item":c.UploadItem},computed:{rules:function(){return x["default"]({isSelfUse:this.data.get("isSelfUse"),type:this.data.get("type"),labelConfig:k,aiAppType:this.data.get("aiAppType")})},isSelfUse:function(){return this.data.get("formData.use")===l.PackageUse.self},platformList:function(){var e=this.data.get("formData.processorType"),t=[{text:"Linux",value:"linux"}],a=this.data.get("Url");return e===l.EasydlSDKPrcessorType.ATLAS?t:e===l.EasydlSDKPrcessorType.GPU?[].concat(t,[{text:"Windows",value:"windows"}]):this.data.get("formData.modelType")===l.EasydlModelType.SOUND_CLASSIFICATION?[].concat(t,[{text:"Windows",value:"windows",disabled:!0,tip:'暂不支持，可<a href="'+a.ticket+'" target="_blank">提交工单</a>咨询'}]):[].concat(t,[{text:"Windows",value:"windows",disabled:!0,tip:"如需部署在Windows CPU上，请在部署模型页面选择「设备端SDK」的部署方式"}])},isSDK:function(){return"sdk"===this.data.get("type")},isPro:function(){return this.data.get("aiAppType")===l.AppType.easydlPro},breadItem:function(){return[{title:this.data.get("applyName")}]},applyName:function(){var e=this.data.get("type");if(f.TABS[e])return f.TABS[e].applyName},modelTypeList:function(){var e=this.data.get("type");return e?this.data.get("isPro")?l.EasydlProjectType.toArray().filter(function(t){return t[e]}):l.EasydlModelType.toArray().filter(function(t){return t[e]}):[]},processorTypeList:function(){var e=l.EasydlSDKPrcessorType.toArray();return e.pop(),e}},initData:function(){return{AppType:l.AppType,labelConfig:k,errors:null,formData:{modelType:"",modelId:"",modelVersion:"",deployName:"",startTime:new Date,processorType:"",use:l.PackageUse.toArray()[0].value,companyIndustry:"",companyName:""},fileUpload:{url:"/api/ai/s/package/fileUpload",sizeLimit:1048576,deviceExtraData:{kind:"packageDevice"}},datasource:{modelIdList:[],modelVersionList:[],calendar:{begin:new Date(Date.now()-864e5),end:new Date(Date.now()+63072e7)},use:l.PackageUse.toArray(),industry:[]}}},attached:function(){var e=this.$get("type");e&&~f.TYPES.indexOf(e)||this.$set("type","api"),this.getIndustryList(),this.getUserBaseInfo(),this.checkParams(),"api"===this.$get("type")&&this.checkApply()},watchs:function(){var e=this;this.watch("formData.modelType",function(t){e.getModelIdList(t),e.$$set({"datasource.modelVersionList":[],"formData.modelId":"","formData.modelVersion":""})}),this.watch("formData.modelId",function(t){t&&(e.getModelVersionList(t),e.$$set({"datasource.modelVersionList":[],"formData.modelVersion":""}))}),this.$get("isSDK")&&this.watch("formData.processorType",function(){e.$set("formData.platform","linux")})},checkApply:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.ajax.packageEasydlCanApply({type:this.$get("aiAppType")}));case 2:e.sent||this.$aiRedirect("package/index",{type:this.$get("type")});case 4:case"end":return e.stop()}},null,this)},checkParams:function(){var e,a,i,n,r,s,o,l,u,d,c;return t["default"].async(function(p){for(;;)switch(p.prev=p.next){case 0:if(e=this.$get(),a=e.modelType,i=e.modelId,n=e.projectType,r=e.projectId,s=e.iterationId,o=e.isPro,l=undefined,u=undefined,d=undefined,o?(l=n,u=r,d=s):(l=a,u=i,d=s),l&&(this.$set("formData.modelType",+l),this.getModelIdList(l)),!u){p.next=16;break}return this.$set("formData.modelId",+u),p.next=16,t["default"].awrap(this.getModelVersionList(u));case 16:d&&(c=this.$get("datasource.modelVersionList").filter(function(e){return e.id===+d})[0])&&this.$set("formData.modelVersion",+c.value),this.watchs();case 18:case"end":return p.stop()}},null,this)},getModelIdList:function(e){var a,i,n,r,s,o;return t["default"].async(function(l){for(var u=this;;)switch(l.prev=l.next){case 0:return a=this.$get(),i=a.isPro,n=a.isSDK,r=a.aiAppType,l.next=6,t["default"].awrap(d.cacheValue("easydl_package_model_"+this.$get("type")+"_"+r+"_"+e,function(){return n?i?u.ajax.packageEasydlProProjectIdList({projectType:e}):u.ajax.packageEasydlProModelIdList({modelType:e}):i?u.ajax.packageEasydlProjectIdList({projectType:e,type:r}):u.ajax.packageEasydlModelIdList({modelType:e,type:r})}));case 6:s=l.sent,(o=s.map(function(e){return{text:e.modelName||e.projectName,value:e.modelId||e.projectId}})).length||o.push({text:k[this.$get("type")][r].defectId,value:-1,disabled:!0}),this.$set("datasource.modelIdList",o);case 10:case"end":return l.stop()}},null,this)},getModelVersionList:function(a){var i,n,r,s,o,l;return t["default"].async(function(u){for(var c=this;;)switch(u.prev=u.next){case 0:return i=this.$get(),n=i.isPro,r=i.isSDK,s=i.aiAppType,u.next=6,t["default"].awrap(d.cacheValue("easydl_package_model_version_"+this.$get("type")+"_"+s+"_"+a,function(){var t=e["default"]({},n?{projectId:a}:{modelId:a},{type:s});return r?c.ajax.packageEasydlProjectVersionList(t):c.ajax.packageEasydlModelVersionList(t)}));case 6:o=u.sent,(l=o.map(function(t){return e["default"]({id:t.id,text:"V"+t.version,value:t.version},r?{}:t.canPack?{}:{disabled:!0})})).length||l.push({text:k[this.$get("type")][s].defectVersion,value:-1,disabled:!0}),this.$set("datasource.modelVersionList",l);case 10:case"end":return u.stop()}},null,this)},getIndustryList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.packageIndustryList());case 2:e=a.sent,this.$set("datasource.industry",e.map(function(e){var t=e.id;return{text:e.name,value:t}}));case 4:case"end":return a.stop()}},null,this)},getUserBaseInfo:function(){var e;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.easydlPackageApplyUserInfo({type:this.$get("aiAppType")}));case 2:e=i.sent,a["default"](e).forEach(function(t){n.$set("formData."+t,e[t])});case 4:case"end":return i.stop()}},null,this)},onUseChange:function(e){var t=this;e.value===l.PackageUse.self&&this.nextTick(function(){t.ref("form").validateFormItem("industry"),t.ref("form").validateFormItem("customerName")})},getParams:function(){var t=this.$get("formData");return e["default"]({type:this.$get("aiAppType")},this.$get("isSDK")?{}:{deviceId:t.device.id,startTime:t.startTime.getTime(),endTime:t.startTime.getTime()+2592e6},y["default"].omit(t,["device","startTime"]),this.$get("isPro")?{projectType:t.modelType,projectId:t.modelId,projectVersion:t.modelVersion}:{})},submit:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.ref("form").validateForm());case 2:this.applySubmit();case 3:case"end":return e.stop()}},null,this)},applySubmit:y["default"].debounce(function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,e=this.getParams(),a=this.$get("isSDK")?"packageEasydlProjectSave":"packageEasydlSave",i.next=5,t["default"].awrap(this.ajax[a](e));case 5:this.$aiRedirect("package/success",{type:this.$get("type")}),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](0),i.t0.field&&this.$set("errors",i.t0.field);case 11:case"end":return i.stop()}},null,this,[[0,8]])},500)})}),define("ai/page/easydl/local/apply/apply.tpl",[],function(){return'<div class="easy-package-apply">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easy-package-apply-content">\n                <h2>{{applyName}}</h2>\n                <div class="apply-form">\n                    <xui-form s-ref="form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}">\n                        <xui-item label="{{labelConfig[type][aiAppType].type}}" name="modelType" required>\n                            <xui-select\n                                datasource="{{modelTypeList}}"\n                                value="{=formData.modelType=}"\n                            />\n                        </xui-item>\n                        <xui-item label="{{labelConfig[type][aiAppType].id}}" name="modelId" required>\n                            <xui-select\n                                datasource="{{datasource.modelIdList}}"\n                                value="{=formData.modelId=}"\n                            />\n                        </xui-item>\n                        <xui-item label="{{labelConfig[type][aiAppType].version}}" name="modelVersion" required>\n                            <xui-select\n                                datasource="{{datasource.modelVersionList}}"\n                                value="{=formData.modelVersion=}"\n                            />\n                        </xui-item>\n                        <xui-item label="私有服务名称" name="deployName" required>\n                            <xui-textbox value="{=formData.deployName=}" placeholder="20个字符以内（支持数字、英文）"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="证书生效日期" name="startTime" required s-if="{{!isSDK}}">\n                            <xui-calendar value="{=formData.startTime=}" close-on-change="{{true}}" range="{=datasource.calendar=}"/>\n                        </xui-item>\n                        <xui-item label="服务器类型" name="processorType" required>\n                            <xui-select\n                                datasource="{{processorTypeList}}"\n                                value="{=formData.processorType=}"\n                            />\n                        </xui-item>\n                        <xui-item label="操作系统" name="platform" required s-if="{{isSDK}}">\n                            <xui-select\n                                datasource="{{platformList}}"\n                                value="{=formData.platform=}"\n                            />\n                        </xui-item>\n                        <xui-item label="指纹文件上传" name="device" required s-if="{{!isSDK}}">\n                            <upload-item\n                                class="device-upload"\n                                url="{{fileUpload.url}}"\n                                extraData="{{fileUpload.deviceExtraData}}"\n                                sizeLimit="{{fileUpload.sizeLimit}}"\n                                data="{=formData.device=}"\n                                uploadType="button"\n                            />\n                            <xui-tip class="device-tip-content">\n                                <div style="width: 200px">\n                                    <div>1.机器指纹是每台机器独有的特征码</div>\n                                    <div>2.私有部署包的制作需要提供机器指纹文件，机器指纹是私有部署包制作的必要条件 </div>\n                                    <div>3.机器指纹和被部署的物理设备相绑定，每台机器都有自己专有的指纹文件，确保了本地部署的服务只能在指定的机器上运行</div>\n                                </div>\n                            </xui-tip>\n                        </xui-item>\n                        <xui-item class="device-tips" name="tips" s-if="{{!isSDK}}">\n                            <a target="_blank" href="{{Url.easypack.deviceTool}}">指纹提取工具下载</a> |\n                            <a target="_blank" href="{{Url.easypack.doc}}">指纹提取工具使用说明</a>\n                        </xui-item>\n                        <xui-item label="联系人姓名" name="contactName" required>\n                            <xui-textbox value="{=formData.contactName=}" placeholder="请输入联系人姓名"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="电话" name="contactPhone" required>\n                            <xui-textbox value="{=formData.contactPhone=}" placeholder="请输入联系电话"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="邮箱" name="contactEmail" required>\n                            <xui-textbox value="{=formData.contactEmail=}" placeholder="请输入联系邮箱"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="职务" name="contactPosition" required>\n                            <xui-textbox value="{=formData.contactPosition=}" placeholder="请输入工作职务"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="公司名称" name="companyName" required>\n                            <xui-textbox value="{=formData.companyName=}" placeholder="请输入公司名称"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="公司所在行业" name="companyIndustry" required>\n                            <xui-select\n                                datasource="{{datasource.industry}}"\n                                value="{=formData.companyIndustry=}"\n                            />\n                        </xui-item>\n                        <xui-item label="申请用途" name="use" required>\n                            <xui-boxgroup\n                                datasource="{{datasource.use}}"\n                                value="{=formData.use=}"\n                                on-change="onUseChange"\n                            />\n                        </xui-item>\n                        <xui-item label="客户名称" name="customerName" s-if="{{!isSelfUse}}" required="{{!isSelfUse}}">\n                            <xui-textbox value="{=formData.customerName=}" placeholder="请输入客户名称"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="客户所在行业" name="industry" s-if="{{!isSelfUse}}" required="{{!isSelfUse}}">\n                            <xui-select\n                                datasource="{{datasource.industry}}"\n                                value="{=formData.industry=}"\n                            />\n                        </xui-item>\n                        <xui-item label="业务量级" name="businessScale" required>\n                            <xui-textbox multiline value="{=formData.businessScale=}" placeholder="请您简要描述，每天处理的数据量级和所需的并发数" width="385" height="81"></xui-textbox>\n                        </xui-item>\n                        <xui-item label="应用场景" name="businessScene" required>\n                            <xui-textbox multiline value="{=formData.businessScene=}" placeholder="请您简要描述应用AI能力的业务场景、期望达到的效果等" width="385" height="165"></xui-textbox>\n                        </xui-item>\n                        <xui-item label=" ">\n                            <xui-button skin="primary" on-click="submit">提交申请</xui-button>\n                        </xui-item>\n                    </xui-form>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n        '}),define("ai/page/easydl/local/apply/index",["exports","module","./apply","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/local/apply/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default","ai/common/enums"],function(exports,module,e,t,a,i){var n=a["default"](t);module.exports=function(t){var a=t.isSelfUse,r=t.type,s=r===undefined?"api":r,o=t.labelConfig,l=t.aiAppType,u=l===undefined?i.AppType.easydlPro:l,d={contactName:[{required:!0,message:"联系人姓名必填"},{max:10,message:"联系人姓名不能超过10个汉字"}],contactPhone:[{required:!0,message:"联系电话必填"},{pattern:/^\d{5,11}$/,message:"联系电话格式不正确"}],contactEmail:[{required:!0,message:"联系邮箱必填"},{type:"email",message:"联系邮箱格式错误"}],contactPosition:[{required:!0,message:"工作职务必填"},{max:20,message:"工作职务不能超过20个汉字"}],use:[{required:!0,message:"申请用途必填"}],businessScene:[{required:!0,message:"应用场景必填"},{max:500,message:"应用场景不能超过500个汉字"}],businessScale:[{required:!0,message:"业务量级必填"},{max:500,message:"业务量级不能超过500个汉字"}],modelType:[{required:!0,message:"请选择"+o[s][u].type}],modelId:[{required:!0,message:"请"+o[s][u].id}],modelVersion:[{required:!0,message:"请"+o[s][u].version}],deployName:[{required:!0,message:"请填写私有服务名称"},{pattern:/^[A-Za-z0-9]{1,20}$/,message:"仅支持英文、数字20个字符以内"}],processorType:[{required:!0,message:"请选择服务器类型"}],companyIndustry:[{required:!0,message:"公司所在行业必填"}],companyName:[{required:!0,message:"请输入公司名称"}]};return a?n["default"].extend(d,{customerName:[{max:20,message:"客户名称不能超过20个汉字"}]}):n["default"].extend(d,{industry:[{required:!0,message:"客户所在行业必填"}],customerName:[{required:!0,message:"客户名称必填"},{max:20,message:"客户名称不能超过20个汉字"}]}),"api"!==s?n["default"].extend(d,{platform:[{required:!0,message:"请选择操作系统"}]}):n["default"].extend(d,{startTime:[{required:!0,message:"请选择起始时间"}],device:[{required:!0,message:"请上传指纹文件"}]}),new e["default"](d)}}),define("ai/page/easydl/local/detail/detail",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./detail.tpl","ai/common/enums","ai/components/UploadItem","lodash","../mixin","../typeConfig"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](r),p=a["default"](s),f=a["default"](o);module.exports=u["default"]({template:d["default"],mixin:f["default"],components:{"upload-item":c["default"]},computed:{breadItem:function(){return[{title:"私有服务器部署管理",url:"#/ai/"+this.data.get("aiAppType")+"/package/index~type="+this.data.get("type")},{title:"查看详情"}]},device:function(){var e=this.data.get("detail");if(e)return{name:p["default"].get(e,"device.fileName",""),url:p["default"].get(e,"device.fileUrl","")}},isPro:function(){return this.data.get("aiAppType")===n.AppType.easydlPro},isSDK:function(){return"sdk"===this.data.get("type")},status:function(){var e=this.data.get("detail");return e?e.status||e.applyStatus:""}},filters:{use:function(e){return n.PackageUse.getTextFromValue(e)},updateModelType:function(e){return n.EasyPackageUpdateType.getTextFromValue(e)}},initData:function(){return{PackageApplyStatusTest:n.PackageApplyStatusTest,detail:{}}},attached:function(){var e=this.$get("type");e&&~l.TYPES.indexOf(e)||this.$set("type","api"),this.getDetail()},getDetail:function(){var t,a,i,n,r,s;return e["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.$get(),a=t.aiAppType,i=t.applyId,n=t.isSDK,r=n?"packageEasydlProjectDetail":"packageEasydlDetail",o.next=7,e["default"].awrap(this.ajax[r]({type:a,applyId:i}));case 7:s=o.sent,this.$set("detail",s);case 9:case"end":return o.stop()}},null,this)},returnList:function(){this.$aiRedirect("package/index",{type:this.$get("type")})}})}),define("ai/page/easydl/local/detail/detail.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easy-package-detail-page package-apply-detail-page">\n                <div class="review-status reviewing" s-if="status === PackageApplyStatusTest.Reviewing">\n                    <div class="review-tip"></div>\n                    <div class="review-detail">\n                        <div class="review-title">正在审批中</div>\n                        <div class="review-content">{{detail.tips}}</div>\n                    </div>\n                </div>\n                <div class="review-status reject" s-elif="status === PackageApplyStatusTest.Failed">\n                    <div class="review-tip"></div>\n                    <div class="review-detail">\n                        <div class="review-title">已退回</div>\n                        <div class="review-content">退回原因：{{ detail.comment }}</div>\n                        <div class="button-wrap">\n                            <xui-button skin="primary" on-click="returnList">返回申请列表</xui-button>\n                        </div>\n                    </div>\n                </div>\n                <div class="section" s-else>\n                    <div class="section-title">管理员反馈</div>\n                    <template s-if="status === PackageApplyStatusTest.Completed">\n                        <div class="completed">\n                            <p>流程已关闭，请重新发起私有化部署申请</p>\n                            <xui-button skin="primary" on-click="returnList">返回申请列表</xui-button>\n                        </div>\n                    </template>\n                    <template s-else>\n                        <xui-form>\n                            <xui-item s-if="{{detail.downloadLink}}" label="部署包下载地址">\n                                <a href="{{detail.downloadLink}}" target="_blank">{{detail.downloadLink}}</a>\n                            </xui-item>\n                            <xui-item label="有效期:" s-if="detail.startTime && detail.endTime">{{detail.startTime | dateFormat(\'YYYY-MM-DD\')}}至{{detail.endTime | dateFormat(\'YYYY-MM-DD\')}}</xui-item>\n                            <xui-item s-if="detail.updateDownloadLink" label="更新包下载地址">\n                                <a href="{{detail.updateDownloadLink}}" target="_blank">{{detail.updateDownloadLink}}</a>\n                            </xui-item>\n                            <xui-item label="备注:">{{ detail.comment}}</xui-item>\n                        </xui-form>\n                    </template>\n                </div>\n                <div class="section package-detail">\n                    <div class="section-title">详情</div>\n                    <xui-form>\n                        <xui-item label="申请时间:">{{ detail.applyTime | dateFormat(\'YYYY-MM-DD\') }}</xui-item>\n                        <xui-item label="公司名称:" s-if="detail.company">{{ detail.company }}</xui-item>\n                        <xui-item label="联系人姓名:">{{ detail.contactName }}</xui-item>\n                        <xui-item label="联系电话:">{{ detail.contactPhone }}</xui-item>\n                        <xui-item label="联系邮箱:">{{ detail.contactEmail }}</xui-item>\n                        <xui-item label="工作职务:">{{ detail.contactPosition }}</xui-item>\n                        <xui-item label="申请用途:">{{ detail.use | use }}</xui-item>\n                        <xui-item label="{{isPro ? \'项目ID\' : \'模型ID\'}}:">{{ detail.modelId || detail.projectId }}</xui-item>\n                        <xui-item label="{{isPro ? \'任务版本\' : \'模型版本\'}}:">{{ detail.modelVersion || detail.projectVersion }}</xui-item>\n                        <xui-item label="私有服务名称:">{{ detail.deployName }}</xui-item>\n                        <xui-item label="服务器类型:">{{ detail.processorType }}</xui-item>\n                        <xui-item label="操作系统:" s-if="detail.platform">{{ detail.platform }}</xui-item>\n                        <xui-item label="申请类型:" s-if="detail.updateModelType">{{ detail.updateModelType | updateModelType}}</xui-item>\n                        <xui-item label="公司名称:">{{ detail.companyName }}</xui-item>\n                        <xui-item label="公司所在行业:">{{ detail.companyIndustry }}</xui-item>\n                        <xui-item label="客户所在行业:" s-if="detail.industry">{{ detail.industry }}</xui-item>\n                        <xui-item label="客户名称:" s-if="detail.customerName">{{ detail.customerName }}</xui-item>\n                        <xui-item label="应用场景:" class="xui-item-long">{{ detail.businessScene }}</xui-item>\n                        <xui-item label="业务量级:" class="xui-item-long">{{ detail.businessScale }}</xui-item>\n                        <xui-item label="指纹文件:" s-if="detail.device">\n                            <upload-item data="{{device}}" show="{{true}}"></upload-item>\n                        </xui-item>\n                    </xui-form>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n    '}),define("ai/page/easydl/local/detail/index",["exports","module","./detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/local/htmlConfig",["exports","module"],function(exports,module){module.exports=function(e){var t=e.ticketUrl;return[{title:"私有API集成",content:[{text:"1. 通过私有API集成私有部署模型包：可将私有部署包一键部署在私有的CPU、GPU服务器上并通过私有API集成。操作步骤："},{text:"① 在下方申请私有部署包 → ② 等待部署包制作 → ③ 下载部署包并在本地使用"},{text:"2. 每天最多可申请5个私有部署包，请注意正确填写信息"},{text:'3. 每个私有部署包的证书有效期为一个月，如需延期或正式购买，可以<a href="'+t+'" target="_blank">提交工单</a>或加入EasyDL官方QQ群（'+(e.isPro?"868826008":"185289236")+"）咨询"}]},{title:"服务器端SDK集成",content:[{text:"1. 通过集成适配本地服务器的SDK离线使用模型：SDK支持二次开发，按CPU/GPU设备授权使用，操作步骤如下："},{text:"① 在下方申请SDK → ② 查看激活序列号并下载SDK → ③ 根据开发文档集成SDK，并联网激活 → ④ 离线使用"},{text:'2. 序列号联网激活SDK后有效期为1个月，如需延期或正式购买，可以<a href="'+t+'" target="_blank">提交工单</a>或加入EasyDL官方QQ群（813291890）咨询'}]}]}}),define("ai/page/easydl/local/index",["exports","module","./local","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/local/local",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./local.tpl","./mixin","lodash","ai/common/enums","./updateDialog/index","ai/common/util","inf-ui/x/components/SearchBox","san-xui","./htmlConfig","./typeConfig"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m){var h=n["default"](i),g=n["default"](r),v=n["default"](s),x=n["default"](o),b=n["default"](u),y=n["default"](c),k=n["default"](f);module.exports=h["default"]({template:g["default"],mixin:v["default"],components:{"update-dialog":b["default"],"xui-searchbox":y["default"],"xui-tab":p.Tab,"xui-tab-panel":p.TabPanel,"xui-layer":p.Layer},computed:{ticketUrl:function(){return(this.data.get("Url")||{}).ticket+"~productId=171"},htmlConfig:function(){return k["default"]({ticketUrl:this.data.get("ticketUrl"),isPro:this.data.get("isPro")})},isApi:function(){return"api"===this.data.get("currentType")},currentExpend:function(){return this.data.get("isExpend")[this.data.get("currentType")]},currentTable:function(){return this.data.get("table")[this.data.get("currentType")]},currentPager:function(){return this.data.get("pager")[this.data.get("currentType")]},configs:function(){return{api:{btnText:"申请私有部署包"},sdk:{btnText:"申请服务器端SDK"}}[this.data.get("currentType")]},isPro:function(){return this.data.get("aiAppType")===l.AppType.easydlPro}},filters:{getLabelByValue:function(e,t){return t.getTextFromValue(e)},convertColor:function(e){return l.PackageApplyStatusTest.fromValue(e).color}},initData:function(){var e,t=(e={},e[l.AppType.easydlLite]={modelId:"模型",modelVersion:"模型"},e[l.AppType.easydlPro]={modelId:"项目",modelVersion:"任务"},e)[this.aiAppType];return{breadItem:[{title:"私有服务器部署管理"}],currentType:"api",isExpend:this.generateConfig("isExpend"),pager:this.generateConfig("pager"),table:{api:{datasource:[],schema:[{name:"applyId",label:"申请ID"},{name:"deployName",label:"私有服务名称"},{name:"modelId",label:t.modelId+"ID"},{name:"modelVersion",label:t.modelVersion+"版本"},{name:"applyTime",label:"申请日期"},{name:"endTime",label:"证书到期日期"},{name:"status",label:"状态"},{name:"operation",label:"操作"}]},sdk:{datasource:[],schema:[{name:"deployName",label:"私有服务名称"},{name:"modelId",label:t.modelId+"ID"},{name:"modelVersion",label:t.modelVersion+"版本"},{name:"applyStatus",label:"申请状态"},{name:"serialKey",label:"序列号"},{name:"activateTime",label:"激活时间"},{name:"expireTime",label:"到期日期"},{name:"operation",label:"操作"}]}},pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]},canApply:!1,updateDialogInfo:{open:!1,applyId:""},PackageApplyStatusTest:l.PackageApplyStatusTest,EasyPackageUpdateType:l.EasyPackageUpdateType,modelVersionList:[],deployName:"",EasydlSDKActiveStatus:l.EasydlSDKActiveStatus,EasydlSDKApplyStatus:l.EasydlSDKApplyStatus,EasydlSDKPrcessorType:l.EasydlSDKPrcessorType,download:{datasource:[]}}},attached:function(){var e=this;this.checkApply(),m.TYPES.forEach(function(t){e.watch("pager."+t+".pageSize",function(){e.getPackageList()})}),this.handleType()},handleType:function(){var e=this.$get(),t=e.type,a=e.currentType;this.watch("currentType",function(e){d.changeHash({type:e})}),t&&~m.TYPES.indexOf(t)&&t!==a?(this.changeTab({item:m.TABS[t]}),this.toTab(t)):this.getPackageList()},generateConfig:function(e){var t={};return["api","sdk"].forEach(function(a){switch(e){case"isExpend":t[a]=!1;break;case"pager":t[a]={pageNo:1,pageSize:10,totalCount:0}}}),t},changeTab:function(e){var t={"私有API集成":"api","服务器端SDK集成":"sdk"}[e.item.text];this.$set("currentType",t),this.$get("currentTable").datasource.length||this.getPackageList()},toTab:function(e){this.ref("tab").onTabClick({text:m.TABS[e].text},m.TABS[e].index)},getPackageList:x["default"].debounce(function(){var a,i,n,r,s,o,l,u,d,c,p;return t["default"].async(function(f){for(;;)switch(f.prev=f.next){case 0:return i=this.$get(),n=i.aiAppType,r=i.deployName,s=i.currentType,o="",l={type:n},"api"===s?(o="packageEasydlList",l.deployName=r):o="packageEasydlSDKList",f.next=9,t["default"].awrap(this.ajax[o](e["default"]({},l,x["default"].omit(this.$get("pager."+s),"totalCount"))));case 9:u=f.sent,d=u.items,c=u.totalCount,p=u.pageNo,this.$$set((a={},a["table."+s+".datasource"]=d,a["pager."+s+".totalCount"]=c,a["pager."+s+".pageNo"]=p,a["isExpend."+s]=!c,a));case 14:case"end":return f.stop()}},null,this)},50),checkApply:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.packageEasydlCanApply({type:this.$get("aiAppType")}));case 2:e=a.sent,this.$set("canApply",e);case 4:case"end":return a.stop()}},null,this)},onPagerChange:function(e){var t=e.pageNo;this.$set("pager."+this.$get("currentType")+".pageNo",t),this.getPackageList()},changeToggle:function(){this.$set("isExpend."+this.$get("currentType"),!this.$get("isExpend."+this.$get("currentType")))},toDetail:function(e){this.$aiRedirect("package/detail",{applyId:e,type:this.$get("currentType")})},getModelVersionList:function(a){var i,n,r,s,o;return t["default"].async(function(l){for(var u=this;;)switch(l.prev=l.next){case 0:return i=this.$get(),n=i.aiAppType,r=i.isPro,l.next=5,t["default"].awrap(d.cacheValue("easydl_package_model_version_"+n+"_"+a,function(){return u.ajax.packageEasydlModelVersionList(e["default"]({},r?{projectId:a}:{modelId:a},{type:n}))}));case 5:s=l.sent,(o=s.map(function(t){return e["default"]({text:"V"+t.version,value:t.version},t.canPack?{}:{disabled:!0})})).length||o.push({text:"暂无可私有化的版本",value:-1,disabled:!0}),this.$set("modelVersionList",o);case 9:case"end":return l.stop()}},null,this)},updatePackage:function(e){var a=e.modelId,i=e.applyId,n=e.projectId;return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.getModelVersionList(a||n));case 2:this.$set("updateDialogInfo",{open:!0,applyId:i});case 3:case"end":return e.stop()}},null,this)},updateSuccess:function(){this.getPackageList()},handleSearch:function(){this.$set("pager."+this.$get("currentType")+".pageNo",1),this.getPackageList()},apply:function(){this.$aiRedirect("package/apply",{type:this.$get("currentType")})},getDownLoadList:function(i){var n,r,s,o,u,c,p,f,m,h;return t["default"].async(function(g){for(var v=this;;)switch(g.prev=g.next){case 0:if("block"!==this.ref("download"+i.applyId).style.display){g.next=4;break}return this.ref("download"+i.applyId).style.display="none",g.abrupt("return");case 4:return this.closeOtherDownload(i),n=i.iterationId,r=i.projectId,s=i.modelId,o=i.applyId,u=i.platform,c=this.$get(),p=c.aiAppType,f=c.isPro,g.next=15,t["default"].awrap(d.cacheValue("easydl_package_sdk_download_"+n+"_"+o+"_"+p,function(){return v.ajax.easydlSdkProjectDownload(e["default"]({iterationId:n,applyId:o,type:p},f?{projectId:r}:{modelId:s}))}));case 15:if(m=g.sent,h=[],a["default"](m).forEach(function(e){m[e][u]&&h.push({text:l.SDKTypes.getTextFromValue(e),value:m[e][u][0].url})}),1!==h.length){g.next=21;break}return d.iframeDownload(h[0].value),g.abrupt("return");case 21:this.$$set({"download.datasource":h}),this.ref("download"+i.applyId).style.display="block";case 23:case"end":return g.stop()}},null,this)},downLoadSDK:function(e,t){d.iframeDownload(e),this.ref("download"+t).style.display="none"},closeOtherDownload:function(e){var t=this,a=e.applyId;this.$get("currentTable.datasource").filter(function(e){return e.applyId!==a&&e.applyStatus===l.EasydlSDKApplyStatus.APPROVED}).forEach(function(e){t.ref("download"+e.applyId).style.display="none"})}})}),define("ai/page/easydl/local/local.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easy-package-content">\n                <h2>私有服务器部署管理</h2>\n                <div class="app-list-page">\n                    <xui-tab skin="card" on-change="changeTab" s-ref="tab">\n                        <xui-tab-panel title="{{item.title}}" s-for="item in htmlConfig">\n                            <div class="tutorial">\n                                <ul class="tutorial-detail">\n                                    <div class="tutorial-title">\n                                        <div class="{{currentExpend ? \'has-bottom\' : \'\'}}">\n                                            使用说明：<span s-if="{{!currentExpend}}">（展开查看部署介绍及操作步骤等）</span>\n                                        </div>\n                                        <a class="toggle" on-click="changeToggle" href="javascript:void(0)">\n                                            {{currentExpend ? \'收起\' : \'展开\'}}\n                                        </a>\n                                    </div>\n                                    <template s-if="{{currentExpend}}">\n                                        <li s-for="data in item.content">{{data.text | raw}}</li>\n                                    </template>\n                                </ul>\n                            </div>\n                        </xui-tab-panel>\n                    </xui-tab>\n                    <div class="package-list">\n                        <div class="table-full-wrap">\n                            <section>\n                                <xui-button skin="ok" icon="plus" on-click="apply" disabled="{{!canApply}}">\n                                    {{configs.btnText}}\n                                </xui-button>\n                                <xui-tip s-if="{{!canApply}}" skin="warning" message="今日申请次数已达上限"/>\n                                <div class="pull-right">\n                                    <xui-searchbox s-if="{{isApi}}" value="{=deployName=}" placeholder="请输入私有服务名称" on-search="handleSearch"></xui-searchbox>\n                                    <a href="{{Url[aiAppType][currentType].localDoc}}" target="_blank" class="ui-ctrl ui-button right-button">开发文档</a>\n                                    <a href="{{ticketUrl}}" target="_blank" class="ui-ctrl ui-button right-button">工单支持</a>\n                                </div>\n                            </section>\n                            <xui-table datasource="{{currentTable.datasource}}"\n                                schema="{{currentTable.schema}}"\n                                class="list-table">\n                                <div slot="empty">\n                                    <div class="ui-table-body-nodata">\n                                        <div>\n                                            <p>\n                                                <span>还没{{configs.btnText}}</span>\n                                                <a on-click="apply" href="javascript:void(0)">发起申请></a>\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <template slot="c-applyTime">\n                                    <div>{{row.applyTime | dateFormat(\'YYYY-MM-DD\')}}</div>\n                                </template>\n                                <template slot="c-activateTime">\n                                    <div s-if="{{row.activateStatus === EasydlSDKActiveStatus.NOT_ACTIVED}}">未激活</div>\n                                    <div s-else>{{row.activateTime | dateFormat(\'YYYY-MM-DD\')}}</div>\n                                </template>\n                                <template slot="c-applyStatus">\n                                    <div>\n                                        {{row.applyStatus | getLabelByValue(EasydlSDKApplyStatus)}}\n                                        <span class="tips" s-if="row.applyStatus === EasydlSDKApplyStatus.Failed">\n                                            <xui-tip skin="warning" message="{{row.comment}}"/>\n                                        </span>\n                                        <span class="tips" s-if="row.applyStatus === EasydlSDKApplyStatus.GENERATE_FAILED">\n                                            <xui-tip skin="warning">\n                                                SDK封装失败，请<a href="{{Url.ticket}}" target="_blank">提交工单</a>或加入QQ群(679517246)联系我们\n                                            </xui-tip>\n                                        </span>\n                                    </div>\n                                </template>\n                                <template slot="c-endTime">\n                                    <div>{{row.endTime | dateFormat(\'YYYY-MM-DD\')}}</div>\n                                </template>\n                                <template slot="c-expireTime">\n                                    <div>{{row.expireTime | dateFormat(\'YYYY-MM-DD\')}}</div>\n                                </template>\n                                <template slot="c-modelId">\n                                    <div>{{row.modelId || row.projectId}}</div>\n                                </template>\n                                <template slot="c-modelVersion">\n                                    <div>V{{row.modelVersion || row.projectVersion}}</div>\n                                </template>\n                                <template slot="c-status">\n                                    <span class="status {{row.status | convertColor}}">\n                                        {{row.status | getLabelByValue(PackageApplyStatusTest)}}\n                                    </span>\n                                    <span class="tips" s-if="row.status === PackageApplyStatusTest.Failed">\n                                        <xui-tip skin="warning" message="{{row.comment}}"/>\n                                    </span>\n                                </template>\n                                <template slot="c-operation">\n                                    <a class="operation-item" on-click="toDetail(row.applyId)" href="javascript:void(0)">查看申请信息</a>\n                                    <template s-if="{{currentType === \'api\'}}">\n                                        <a class="operation-item" s-if="row.downloadLink" href="{{row.downloadLink}}" target="_blank">下载{{row.updateModelType | getLabelByValue(EasyPackageUpdateType)}}</a>\n                                        <a class="operation-item" s-if="row.status === PackageApplyStatusTest.SuccessTwo" on-click="updatePackage(row)" href="javascript:void(0)">更新版本</a>\n                                    </template>\n                                    <template s-else>\n                                        <template s-if="{{row.applyStatus === EasydlSDKApplyStatus.APPROVED}}">\n                                            <a s-if="{{row.activateStatus === EasydlSDKActiveStatus.NOT_ACTIVED}}" class="operation-item" target="_blank" href="{{Url[aiAppType].sdk.activate}}">如何激活</a>\n                                            <div class="download-select-all">\n                                                <a href="javascript:void(0);" class="operation-item" on-click="getDownLoadList(row)">下载SDK</a>\n                                                <div class="download-select" s-ref="download{{row.applyId}}" style="display: none;">\n                                                    <div on-click="downLoadSDK(item.value, row.applyId)" class="download-select-item" s-for="item in download.datasource">{{item.text}}</div>\n                                                </div>\n                                            </div>\n                                        </template>\n                                    </template>\n                                </template>\n                            </xui-table>\n                            <div class="pager-row">\n                                <span class="pager-label">每页显示</span>\n                                <xui-select datasource="{{pageSelect.datasource}}" value="{=pager[currentType].pageSize=}" />\n                                <xui-pager\n                                    size="{{currentPager.pageSize}}"\n                                    page="{{currentPager.pageNo}}"\n                                    count="{{currentPager.totalCount}}"\n                                    back-text="<"\n                                    forward-text=">"\n                                    on-change="onPagerChange($event)"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <update-dialog open="{=updateDialogInfo.open=}" modelVersionList="{{modelVersionList}}" updateDialogInfo="{{updateDialogInfo}}" on-updateSuccess="updateSuccess"/>\n        </app-content>\n    </app-view>\n</div>\n    '}),define("ai/page/easydl/local/mixin",["exports","module"],function(exports,module){module.exports={inited:function(){var e=this;this.on("getQulificationStatus",function(){return e.checkQualificationStatus()})},checkQualificationStatus:function(){this.$get("qualification").certified||this.$aiRedirect("package/qualification/index")}}}),define("ai/page/easydl/local/qualification/Certifying/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"]})}),define("ai/page/easydl/local/qualification/Certifying/index.tpl",[],function(){return'<div class="certifying-page">\n    <p class="title">个人信息认证中</p>\n    <p>我们已经收到您的个人认证申请，请耐心等待认证结果</p>\n    <p>审核时间不会很长，一般1-2个工作日，但往往会比这个要快</p>\n    <p>审核期间如有任何疑问，可以随时 <a href="{{Url.ticket}}" target="_blank">[提交工单]</a> 进行咨询</p>\n</div>\n'}),define("ai/page/easydl/local/qualification/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","./NotCertified/index","./Certifying/index","inf-ui/x/components/ViewStep"],function(exports,module,e,t,a,i,n,r,s){var o=t["default"](e),l=t["default"](a),u=t["default"](n),d=t["default"](r),c=t["default"](s),p={NotCertified:u["default"],Certifying:d["default"]},f="NotCertified",m="Certifying";module.exports=o["default"]({template:l["default"],components:{"xui-viewstep":c["default"]},initData:function(){return{step:0,page:-1,stepList:[{text:"个人认证"},{text:"私有服务器部署管理"}],breadItem:[{title:"私有服务器部署管理"}]}},computed:{title:function(){return this.data.get("stepList")[this.data.get("step")].text}},inited:function(){var e=this;this.watch("page",this.renderPage),this.on("getQulificationStatus",function(){return e.checkQualificationStatus()})},disposed:function(){this.page&&this.page.dispose()},checkQualificationStatus:function(){var e=this.$get("qualification");if(e.type!==i.AuthType.ENTERPRISE){if(e.type===i.AuthType.INDIVIDUAL){if(e.status===i.AuthStatus.CERTIFYING)return void this.$set("page",m);e.status===i.AuthStatus.CERTIFIED&&this.$aiRedirect("package/index")}this.$set("page",f)}else this.$aiRedirect("package/index")},renderPage:function(){this.page&&this.page.dispose(),this.page=new(p[this.$get("page")]),this.page.attach(this.el.querySelector(".package-wrapper"))}})}),define("ai/page/easydl/local/qualification/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easydl-package-content">\n                <h2>{{title}}</h2>\n                <xui-viewstep step-index=\'{{step}}\' steps="{{stepList}}"></xui-viewstep>\n                <div class="package-wrapper"></div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/easydl/local/qualification/NotCertified/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","esui/Dialog"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports=n["default"]({template:r["default"],qualify:function(){var e=this,t=s["default"].confirm({title:"认证提交",width:400,content:'<p class="auth-dialog-content">如已提交认证信息请等待结果通知</p>',closeButton:!0,needFoot:!0,encode:!1,draggable:!0,okText:"已提交信息",cancelText:"重新提交"});t.on("ok",function(){window.location.reload()}),t.on("cancel",function(){window.open(e.$get("Url").enterpriseQualify),e.qualify()}),t.resize()}})}),define("ai/page/easydl/local/qualification/NotCertified/index.tpl",[],function(){return'<div class="not-certified-page">\n    <p class="title">开发者您好，如需使用私有服务器部署管理，请先完成个人认证</p>\n    <p>开始申请前，我们首先需要确保您已经完成了个人认证</p>\n    <p>个人认证自提交信息后，审核时间一般为1-2个工作日，感谢您的配合</p>\n    <div class="buttons">\n        <a href="{{Url.individualQualify}}" target="_blank" class="ui-ctrl ui-button skin-ok skin-ok-button" on-click="qualify">去认证</a>\n    </div>\n</div>\n'}),define("ai/page/easydl/local/success/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{breadItem:[{title:"申请提交成功"}]}},reApply:function(){this.$aiRedirect("package/apply",{type:this.$get("type")})},returnList:function(){this.$aiRedirect("package/index",{type:this.$get("type")})}})}),define("ai/page/easydl/local/success/index.tpl",[],function(){return'<div class="easy-package-apply-success">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easy-package-apply-success-content">\n                <div class="success-icon"></div>\n                <div class="step3-right-block">\n                    <h3>申请提交成功</h3>\n                    <div class="sub-title">您的申请已成功提交，3个工作日内将有百度工作人员与您电话联系</div>\n                    <div class="step3-detail">\n                        <p>接下来的流程如下，预计需要5-15个工作日：</p>\n                        <p>1）百度人员与您沟通需求及商务情况，达成一致后提供测试部署包</p>\n                        <p>2）百度人员制作部署包，完成后您可以在申请列表中下载部署包并使用</p>\n                    </div>\n                    <div class="step3-buttons">\n                        <a href="javascript:void(0)" on-click="reApply">发起新申请</a>\n                        <a href="javascript:void(0)" on-click="returnList">返回申请列表</a>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/easydl/local/typeConfig",["exports"],function(exports){exports.__esModule=!0;exports.TYPES=["api","sdk"];exports.TABS={api:{text:"私有API集成",index:0,applyName:"申请私有部署包"},sdk:{text:"服务器端SDK集成",index:1,applyName:"申请SDK"}}}),define("ai/page/easydl/local/updateDialog/index",["exports","module","./updateDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/local/updateDialog/updateDialog",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./updateDialog.tpl","ai/common/enums","san-xui","async-validator"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i);module.exports=o["default"]({template:l["default"],components:{"xui-radiobox":r.RadioBox},initData:function(){return{open:!1,EasyPackageUpdateType:n.EasyPackageUpdateType,modelVersionList:[],errors:{},formData:{modelVersion:"",type:n.EasyPackageUpdateType.UPDATE},rules:new s["default"]({modelVersion:[{required:!0,message:"请选择版本"}]}),updateDialogInfo:{applyId:""}}},changeContent:function(e){this.$set("formData.type",e)},submit:function(){var t,a,i,r,s,o;return e["default"].async(function(l){for(var u=this;;)switch(l.prev=l.next){case 0:return l.next=2,e["default"].awrap(this.ref("form").validateForm());case 2:return t=this.$get("formData"),a=t.modelVersion,i=t.type,r=this.$get("updateDialogInfo.applyId"),s=undefined,o={type:i,applyId:r},this.$get("aiAppType")===n.AppType.easydlPro?(s="packageEasydlProjectUpdate",o.projectVersion=a):(s="packageEasydlModelUpdate",o.modelVersion=a),l.prev=9,l.next=12,e["default"].awrap(this.ajax[s](o));case 12:this.nextTick(function(){u.fire("updateSuccess"),u.$set("open",!1)}),l.next=18;break;case 15:l.prev=15,l.t0=l["catch"](9),l.t0.field&&this.$set("errors",l.t0.field);case 18:case"end":return l.stop()}},null,this,[[9,15]])}})}),define("ai/page/easydl/local/updateDialog/updateDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="700" title="更新部署包模型版本" foot="{{false}}">\n        <div class="ai-easydl-package-update">\n            <xui-form s-ref="form" rules="{{rules}}" formData="{=formData=}" errors="{=errors=}">\n                <xui-item label="选择版本：" name="modelVersion">\n                    <xui-select value="{=formData.modelVersion=}" datasource="{{modelVersionList}}" />\n                </xui-item>\n                <xui-item label="申请内容：">\n                    <xui-radiobox\n                        checked="{{formData.type === EasyPackageUpdateType.UPDATE}}"\n                        title="更新包"\n                        on-change="changeContent(EasyPackageUpdateType.UPDATE)"\n                    />\n                    <xui-tip skin="warning" message="使用更新包可直接更新模型相关文件，无需重新部署整个软件包"/>\n                    <xui-radiobox\n                        checked="{{formData.type === EasyPackageUpdateType.TOTOAL}}"\n                        title="完整部署包"\n                        on-change="changeContent(EasyPackageUpdateType.TOTOAL)"\n                        class="last-radio"\n                    />\n                </xui-item>\n            </xui-form>\n            <div class="submit-button">\n                <xui-button on-click="submit" skin="primary">提交申请</xui-button>\n            </div>\n        </div>\n\n    </xui-dialog>\n</template>\n    '}),define("ai/page/easydl/modals/Destroy/destroy",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./destroy.tpl","ai/common/enums"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i);module.exports=r["default"]({template:s["default"],computed:{hasQpsPackage:function(){return this.data.get("resourceTypes").filter(function(e){return e.resourceType===n.ResourceType.qpsPackage}).length},tip:function(){if(this.data.get("resourceTypes").length){return"该接口下的"+this.data.get("resourceTypes").map(function(e){var t=e.resourceType;return n.ResourceType.getTextFromValue(t)}).join("、")+"还未使用完，您需使用完才可终止付费。如需退款，请提交工单与我们联系\n                    "+(this.data.get("hasQpsPackage")?"（抱歉，按天购买的QPS包暂不支持退款）":"")+"。"}return"您确定要终止付费吗？终止付费后，您的资源将回归至免费状态，超过免费资源的调用将不再响应。后续如需使用付费资源，可再次开通付费。"}},initData:function(){return{apiId:"",resourceTypes:[]}},destroy:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e["default"].awrap(this.ajax.orderDestroy({type:this.$get("aiAppType"),apiId:this.$get("apiId")}));case 3:this.fire("destroySuccess"),this.cancel(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.cancel();case 10:case"end":return t.stop()}},null,this,[[0,7]])},cancel:function(){this.$set("open",!1)}})}),define("ai/page/easydl/modals/Destroy/destroy.tpl",[],function(){return'<div>\n    <xui-dialog\n        open="{=open=}"\n        class="destroy-tip-dialog"\n        title="终止付费"\n    >\n        <div class="qps-detail-dialog-content">\n            <p>{{tip}}</p>\n        </div>\n        <div slot="foot">\n            <template s-if="{{resourceTypes.length}}">\n                <a\n                    href="{{Url.ticket}}"\n                    target="_blank"\n                    class="ui-button ui-button-x skin-primary skin-primary-button ui-button-with-label"\n                >\n                    提交工单\n                </a>\n                <xui-button on-click="cancel">取消</xui-button>\n            </template>\n            <template s-else>\n                <xui-button skin="primary" on-click="destroy">确认</xui-button>\n                <xui-button on-click="cancel">取消</xui-button>\n            </template>\n        </div>\n    </xui-dialog>\n</div>'}),define("ai/page/easydl/modals/Destroy/index",["exports","module","./destroy","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/modals/index",["exports","module","./QpsDetail","babel-runtime/helpers/interop-require-default","./Destroy/index"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports={QpsDetail:i["default"],Destroy:n["default"]}}),define("ai/page/easydl/modals/QpsDetail",["exports","module","inf-ui/x/components/Dialog","babel-runtime/helpers/interop-require-default","ai/common/component","inf-ria/ui/echarts/EChart","inf-ui/uiFactory","ai/config","moment","underscore"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](i),c=t["default"](s),p=t["default"](o);module.exports=u["default"]({template:'\n    <div>\n        <xui-dialog open="{=open=}" class="error-detail-dialog" foot="{{false}}" height="350" width="800">\n            <div slot="head">QPS额度配置详情—{{name}}API</div>\n            <div class="qps-detail-dialog">\n                <div class="timeRange-container">\n                    <label>请选择时间段</label>\n                    <ui-rangecalendar value="{=timeRange=}"\n                        range="{{range}}"\n                        on-change="getData"\n                        hideShortCut="true">\n                    </ui-rangecalendar>\n                </div>\n                <echart chartType="line" s-ref="echart" style="width:100%;height:300px">\n                </echart>\n            </div>\n        </xui-dialog>\n    </div>\n',components:{echart:n.createUi(d["default"]),"xui-dialog":l["default"]},initData:function(){var e=c["default"]().format("YYYY-MM-DD"),t=c["default"]().add(1,"week").format("YYYY-MM-DD");return{range:{begin:c["default"]().subtract(1,"day").toDate(),end:new Date(2046,10,4)},timeRange:e+","+t,name:"",apiId:"",open:!1}},attached:function(){this.getData()},setEchartOption:function(e){this.ref("echart").__getESUI().setOption({grid:{top:20},color:["#108cee","#5fb333"],tooltip:{trigger:"axis",borderColor:"#1494EA",borderRadius:0,borderWidth:1,padding:0,backgroundColor:"rgba(255, 255, 255, 0.7)",textStyle:{color:"#666"},formatter:function(e){return'<div class="echarts-tooltip-title">'+String(e[0].name).replace(/\//g,"-")+"</div>"+e.map(function(e){return'<p class="echarts-tooltip-content">'+e.seriesName+"："+e.value+"</p>"}).join("")}},xAxis:[{type:"category",axisLabel:{textStyle:{color:"#999"}},data:p["default"].pluck(e,"name")}],yAxis:[{type:"value",min:0,axisLabel:{textStyle:{color:"#999"}}}],series:[{type:"line",symbol:"none",name:"QPS",data:p["default"].pluck(e,"value")}]})},getData:function(){var e=this,t=this.$get("timeRange").split(","),a=t[0],i=t[1];this.showLoading(),r.api.getQpsDetail({apiId:this.$get("apiId"),st:new Date(a).valueOf(),et:new Date(i).valueOf()}).then(function(t){e.setEchartOption(t),e.hideLoading()})},showLoading:function(){this.ref("echart").__getESUI().echartsInstance.showLoading()},hideLoading:function(){this.ref("echart").__getESUI().echartsInstance.hideLoading()}})}),define("ai/page/easydl/overview",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./overview.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{breadItem:[{title:"EasyDL总览"}],contentList:[{title:"经典版",content:"适合AI零基础或追求高效率开发的企业或个人开发者；支持定制图像分类、物体检测、图像分割、声音分类、视频分类、文本分类六类模型。",modelUrl:"//ai.baidu.com/easydl/app/overview",overviewUrl:"/ai/#/ai/easydlLite/overview/index",className:"lite"},{title:"专业版",content:"适合专业AI工程师且追求灵活、深度调参的企业或个人开发者。目前支持定制视觉及自然语言处理两大类任务，内部预置丰富的预训练模型。",modelUrl:"//ai.baidu.com/easydl/pro/app/dashboard",overviewUrl:"/ai/#/ai/easydlPro/overview/index",className:"pro"},{title:"零售版",content:"适合零售行业的企业或服务商，专注于定制商品识别服务。目前产品包括标准商品检测API、定制商品检测训练平台、货架拼接三类服务。",modelUrl:"//ai.baidu.com/easydl/app/1001/models",overviewUrl:"/ai/#/ai/easydlRetail/overview/index",className:"retail"}]}}})}),define("ai/page/easydl/overview.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap ai-easydl-overview">\n    <app-view>\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content overview-content">\n                <h2>EasyDL总览</h2>\n                <div class="tutorial">\n                    <div class="tutorial-title">\n                        <p>\n                            EasyDL平台简介：EasyDL是百度大脑推出的定制化模型训练和服务平台，支持企业用户和开发者自助在EasyDL平台上进行训练数据上传、数据标注、模型训练、模型部署，一站式获取高精度AI服务。\n                        </p>\n                    </div>\n                    <div class="tutorial-detail">\n                        <div>特色优势：</div>\n                        <p>-高精度模型效果：内置基于百度用户大数据训练的预训练模型，底层结合百度自研的AutoDL/AutoML技术，基于少量数据就能获得出色效果和性能的模型</p>\n                        <p>-一站式AI服务：为企业及开发者提供了从完善安全的数据服务、大规模分布式模型训练、丰富灵活的模型部署到预测的一站式服务</p>\n                        <p>-端云结合：训练完成的模型可发布为公有云API、设备端SDK、私有部署、软硬一体方案，灵活适配各种使用场景及运行环境</p>\n                        <p>-完善安全的数据服务：全方位支持训练数据的高质量采集与高效标注，支持在模型迭代过程中不断扩充数据，助力提升模型效果</p>\n                    </div>\n                    <div class="jump-button">\n                        <a href="//ai.baidu.com/easydl" target="_blank" class="button">官网</a>\n                        <a href="{{Url[aiAppType].doc}}" target="_blank" class="button">文档</a>\n                    </div>\n                </div>\n                <div class="content">\n                    <div class="content-item" s-for="item in contentList">\n                        <div class="content-item-img {{item.className}}"></div>\n                        <div class="content-item-title">{{item.title}}</div>\n                        <div class="content-item-text">{{item.content}}</div>\n                        <div class="content-item-url">\n                            <a href="{{item.modelUrl}}" target="_blank">训练模型</a>\n                            <a href="{{item.overviewUrl}}" target="_blank">查看已发布的AI服务</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/easydl/retailOverview",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./retailOverview.tpl","san-xui","./common/options","ai/common/util","./common/retailOverview/easydlOverviewApi","./common/retailOverview/easydlOverviewData"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=n["default"](i),p=n["default"](r),f=n["default"](o),m=n["default"](u),h=n["default"](d),g="AI_EASYDL_RETAIL_TIP_TOGGLE";module.exports=c["default"](e["default"]({template:p["default"],components:{"xui-radioselect":s.RadioSelect},filters:e["default"]({},f["default"].filters),computed:{tableData:function(){var e=this.data.get("cateGories.value"),t=this.data.get("dataAll");return t[e]}},initData:function(){return{easydlOverviewApi:m["default"],easydlOverviewData:h["default"],breadItem:[{title:"零售版概览"}],showTutorial:"1"===window.localStorage.getItem(g),cateGories:{value:0,datasource:[]},noData:'<div class="ui-table-body-nodata"><div><p><span>没有数据</span> <br></p></div></div>',dataAll:[]}},disposed:function(){this.disposeQpsDetailDialog(),this.disposeDestroyDialog();var e=this.$get("showTutorial")?"1":"0";window.localStorage.setItem(g,e)},attached:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:this.getTableList();case 1:case"end":return e.stop()}},null,this)}},f["default"].functions,{getTableList:function(){var i,n,r,s,o,u;return t["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:return i={type:this.$get("aiAppType")},d.next=3,t["default"].awrap(a["default"].all([this.ajax.easydlOverviewApiList(e["default"]({pageNo:1,pageSize:1e4},i)),this.ajax.easydlOverviewDataList(i),this.ajax.overviewEasydlApiList(i)]));case 3:n=d.sent,r=n[0],s=n[1],o=n[2],u=s.filter(function(e){return e.url}),this.$set("dataAll",[{easydlApiList:r.items,dataList:u}].concat(l.formatGerData(o,!1))),this.$set("cateGories.datasource",this.$get("dataAll").map(function(e,t){var a=e.label;return a||(a="定制商品检测"),{text:a,value:t}}));case 10:case"end":return d.stop()}},null,this)}}))}),define("ai/page/easydl/retailOverview.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap ai-easydl-retail-overview">\n    <app-view>\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content overview-content">\n                <h2>零售版概览</h2>\n                <div class="tutorial">\n                    <div class="tutorial-title">\n                        <div>\n                            产品介绍：<span s-if="{{!showTutorial}}">（展开查看服务功能介绍）</span>\n                        </div>\n                        <a class="toggle" on-click="changeToggle" href="javascript:void(0)">\n                            {{showTutorial ? \'收起\' : \'展开\'}}\n                        </a>\n                    </div>\n                    <div s-if="showTutorial" class="tutorial-detail">\n                        <p class="has-bottom">\n                            EasyDL零售版是EasyDL针对零售场景推出的行业版，提供定制商品检测、标准商品检测、货架拼接等服务。前往<a href="{{Url[aiAppType].retail}}" target="_blank">EasyDL零售版页面</a>\n                        </p>\n                        <p>\n                            服务介绍：\n                        </p>\n                        <ul class="has-bottom">\n                            <li>定制商品检测服务：需要前往<a href="{{Url[aiAppType].retailModel}}" target="_blank">EasyDL零售版</a>进行模型训练，通过简单五步即可获得定制商品检测模型。<a href="{{Url[aiAppType].retailModelDoc}}" target="_blank">技术文档</a></li>\n                            <li>标准商品检测服务：无需训练即可使用的商品检测服务，仅适用于货架合规性检查场景。<a href="{{Url[aiAppType].retailNormal}}" target="_blank">技术文档</a></li>\n                            <li>货架拼接服务：需绑定商品检测服务使用，支持将多个货架局部图片或视频，组合为完整货架图片，同时支持输出在完整货架图中的商品检测结果。<a href="{{Url[aiAppType].retailShelf}}" target="_blank">技术文档</a></li>\n                            <li>数据管理API：支持通过调用API管理用于训练定制商品检测模型的数据。<a href="{{Url[aiAppType].retailData}}" target="_blank">技术文档</a></li>\n                        </ul>\n                        <p>您可以在本页面开通付费，也可以通过左侧导航栏查看各个服务的详情，包括接口URL，用量统计和接口文档等内容。</p>\n                    </div>\n                </div>\n                <div class="section-header">可用接口列表</div>\n                <div class="category-tabs" s-if="{{cateGories.datasource.length > 1}}">\n                    <xui-radioselect value="{=cateGories.value=}" datasource="{{cateGories.datasource}}"></xui-radioselect>\n                </div>\n                <template s-if="{{!cateGories.value}}">\n                    <div class="section">\n                        <div class="section-title table-title">已上线的定制接口</div>\n                    </div>\n                    <xui-table\n                        class="show-head"\n                        schema="{{easydlOverviewApi.schema}}">\n                    </xui-table>\n                    <xui-table\n                        class="show-body"\n                        on-command="onCommand($event)"\n                        cell-builder="{{easydlOverviewApi.cellRenderer}}"\n                        schema="{{easydlOverviewApi.schema}}"\n                        datasource="{{tableData.easydlApiList}}">\n                        <div slot="empty">{{noData | raw}}</div>\n                    </xui-table>\n                    <div class="section">\n                        <div class="section-title table-title">数据管理接口</div>\n                    </div>\n                    <xui-table\n                        class="list-table"\n                        on-command="onCommand($event)"\n                        schema="{{easydlOverviewData.schema}}"\n                        datasource="{{tableData.dataList}}">\n                        <template slot="c-api">\n                            {{row | formatApi | raw}}\n                            <xui-tip s-if="{{row.apiTip}}" message="{{row.apiTip}}" />\n                        </template>\n                        <template slot="c-status">\n                            {{row | formatStatus | raw}}\n                        </template>\n                        <template slot="c-charge">\n                            {{row | formatCharge | raw}}\n                        </template>\n                        <template slot="c-maxQps">\n                            {{row.maxQps}}\n                            <xui-tip skin="warning" s-if="{{row.qpsTip}}" message="{{row.qpsTip}}" />\n                        </template>\n                        <div slot="empty">{{noData | raw}}</div>\n                    </xui-table>\n                </template>\n                <template s-else>\n                    <template s-for="item in tableData.children">\n                        <div class="section" s-if="{{item.name}}">\n                            <div class="section-title table-title">{{item.name}}</div>\n                        </div>\n                        <xui-table\n                            class="list-table"\n                            schema="{{easydlOverviewData.schema}}"\n                            datasource="{{item.children}}">\n                            <template slot="c-api">\n                                {{row | formatApi | raw}}\n                                <xui-tip s-if="{{row.apiTip}}" message="{{row.apiTip}}" />\n                            </template>\n                            <template slot="c-status">\n                                {{row | formatStatus | raw}}\n                            </template>\n                            <template slot="c-charge">\n                                {{row | formatCharge | raw}}\n                            </template>\n                            <template slot="c-maxQps">\n                                {{row.maxQps}}\n                                <xui-tip skin="warning" s-if="{{row.qpsTip}}" message="{{row.qpsTip}}" />\n                            </template>\n                            <div slot="empty">{{noData | raw}}</div>\n                        </xui-table>\n                    </template>\n                </template>\n            </div>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/easydl/sell/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/sell/list/list",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","ai/common/enums","san-xui"],function(exports,module,e,t,a,i,n,r){var s,o=a["default"](t),l=a["default"](i),u="AI_EASYDL_SELL_TIP_TOGGLE",d=(s={},s[n.AppType.easydlLite]={text:"模型",type:n.EasydlModelType},s[n.AppType.easydlPro]={text:"项目",type:n.EasydlProjectType},s[n.AppType.easydlRetail]={text:"模型",type:n.EasydlRetailType},s);module.exports=o["default"]({template:l["default"],components:{"xui-form":r.Form,"xui-item":r.FormItem},filters:{productStatus:function(e){return n.StoreProductStatus.getTextFromValue(e)},modelType:function(e){return d[this.data.get("aiAppType")].type.getTextFromValue(e)},deployType:function(e){return n.EasydlDeployType.getTextFromValue(e)}},initData:function(){var e=d[this.aiAppType].text;return{breadItem:[{title:"售卖已发布服务"}],showTutorial:"1"!==window.localStorage.getItem(u),table:{schema:[{name:"num",label:"序号"},{name:"serviceName",label:"接口名称"},{name:"deployType",label:"应用类型"},{name:"modelId",label:e+"ID"},{name:"modelName",label:e+"名称"},{name:"modelType",label:e+"类型"},{name:"status",label:"售卖状态"},{name:"ctl",label:"操作"}],datasource:[]}}},created:function(){this.fetchList(),window.localStorage.setItem(u,"1")},toggleTutorial:function(){this.$set("showTutorial",!this.$get("showTutorial"))},fetchList:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.easydlMarketList({type:this.$get("aiAppType")}));case 2:t=a.sent,this.$set("table.datasource",t);case 4:case"end":return a.stop()}},null,this)}})}),define("ai/page/easydl/sell/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easydl-sell-list-content">\n                <h2>售卖已发布服务</h2>\n                <div class="tutorial-wrap">\n                    <div class="tutorial-header">\n                        已发布服务售卖条件及售卖流程说明\n                        <a on-click="toggleTutorial" href="javascript:void(0)">{{!showTutorial ? \'展开教程\' : \'收起教程\'}}</a>\n                    </div>\n                    <div s-if="showTutorial" class="tutorial-content">\n                        <xui-form>\n                            <xui-item label="售卖位置：">\n                                模型发布成功后，将已上线的定制化识别接口发布至\n                                <a href="https://ai.baidu.com/market/" target="_blank">百度AI市场</a>\n                                进行售卖。\n                            </xui-item>\n                            <xui-item label="售卖条件：">\n                                <ul>\n                                    <li>定制化识别接口成功调用次数≥1；</li>\n                                    <li>图像分类/声音分类模型准确率>80%，总训练数据量>50；</li>\n                                    <li>物体检测模型mAP>60%，总训练数据量>20；</li>\n                                    <li>文本分类模型满足top1准确度>95%, 文本数据量超过2万条。</li>\n                                </ul>\n                            </xui-item>\n                            <xui-item label="售卖流程："></xui-item>\n                        </xui-form>\n                        <div class="sdkstep-item-wrap">\n                            <div class="sdkstep-item">入驻AI市场</div>\n                            <div class="sdkstep-icon-item"><xui-icon name="sort-ascending" /></div>\n                            <div class="sdkstep-item">创建商铺<br>签订协议</div>\n                            <div class="sdkstep-icon-item"><xui-icon name="sort-ascending" /></div>\n                            <div class="sdkstep-item">发布商品</div>\n                            <div class="sdkstep-icon-item"><xui-icon name="sort-ascending" /></div>\n                            <div class="sdkstep-item">售卖获得收入</div>\n                        </div>\n                    </div>\n                </div>\n                <hr class="sell-list-split">\n                <xui-table datasource="{{table.datasource}}" schema="{{table.schema}}">\n                    <template slot="c-num">\n                        {{rowIndex + 1}}\n                    </template>\n                    <template slot="c-deployType">\n                        {{row.deployType | deployType}}\n                    </template>\n                    <template slot="c-modelType">\n                        {{row.modelType | modelType}}\n                    </template>\n                    <template slot="c-status">\n                        {{row.status | productStatus}}\n                    </template>\n                    <template slot="c-ctl">\n                        <a s-if="row.status === -1" href="#/ai/market/product/publish" target="_blank">发布商品</a>\n                        <a s-else-if="row.status === 0" href="#/ai/market/product/publish~productId={{row.productId}}" target="_blank">查看商品</a>\n                        <a s-else href="#/ai/market/product/list" target="_blank">查看商品</a>\n                    </template>\n                </xui-table>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/easydl/serial/extend/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","./rules","lodash","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](n),c=i["default"](s),p=i["default"](o);module.exports=u["default"]({template:d["default"],components:{"xui-calendar":r.Calendar},initData:function(){return{breadItem:[{title:"设备端服务管理",url:"#/ai/"+this.aiAppType+"/serial/list"},{title:"申请延期"}],id:"",formData:{validTime:new Date(+new Date+864e5),reason:""},models:[],modelId:"",version:"",sdkListAll:[],rules:c["default"],errors:{},range:{begin:new Date,end:new Date(+new Date+31536e6)},submitted:!1}},computed:{model:function(){var e=this.data.get("modelId");return p["default"].find(this.data.get("models"),function(t){return t.modelId===e})},versions:function(){var e=this.data.get("sdkListAll"),t=this.data.get("modelId"),a=e.filter(function(e){return e.modelId===t});return a.length?a.map(function(e){return{text:"V"+e.version+"("+e.deployType+")",value:e.version}}):[{text:"暂无可用版本",value:-1,disabled:!0}]},isPro:function(){return this.data.get("aiAppType")===l.AppType.easydlPro},ticketUrl:function(){return(this.data.get("Url")||{}).ticket+"~productId=171"}},created:function(){return t["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:this.getSdkList(),this.watch("modelId",function(){return t.$set("version","")});case 2:case"end":return e.stop()}},null,this)},submit:function(){var a,i,n,r,s,o,l,u,d;return t["default"].async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t["default"].awrap(this.ref("form").validateForm());case 2:return this.$set("errors",{}),c.prev=3,a=this.$get("formData"),i=this.$get(),n=i.id,r=i.modelId,s=i.version,o=i.isPro,l=i.aiAppType,u=e["default"]({},a,{validTime:+a.validTime,licenseId:n,version:s,type:l}),o?(u.projectId=r,u.produceType="easydl-pro"):(u.modelId=r,u.produceType="easydl"),c.next=15,t["default"].awrap(this.ajax.easydlSdkLicenseExtend(u));case 15:this.$set("submitted",!0),c.next=22;break;case 18:c.prev=18,c.t0=c["catch"](3),d=c.t0.field,this.$set("errors",d);case 22:case"end":return c.stop()}},null,this,[[3,18]])},getSdkList:function(){var a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(this.ajax.easydlLiteSdkList({type:this.$get("aiAppType")}));case 2:a=n.sent,i={},this.$set("sdkListAll",a),this.$set("models",a.filter(function(e){var t=e.modelId;return!i[t]&&(i[t]=!0,!0)}).map(function(t){return e["default"]({text:t.modelName,value:t.modelId},t)}));case 6:case"end":return n.stop()}},null,this)},gotoSerial:function(){this.$aiRedirect("serial/list",{type:this.$get("type")})}})}),define("ai/page/easydl/serial/extend/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easydl-sdk-content">\n                <h2>申请延期</h2>\n                <div class="easydl-form" s-if="submitted">\n                    <div class="info-tip">\n                        <div class="icon-wrap">\n                            <xui-icon name="ok-reverse"/>\n                        </div>\n                        <div class="tip-content-wrap">\n                            <h4>提交成功</h4>\n                            <p>申请反馈时间：一般为5个工作日，期间会有工作人员电话联系，请保持手机畅通，并在离线SDK管理页面关注到期时间的变化。</p>\n                            <p>注意：延期申请成功后，序列号会发生变化，需要重新联网激活</p>\n                            <p><br></p>\n                            <p><a href="javascript:void(0);" on-click="gotoSerial">返回设备端服务管理</a>&#8195;<a href="{{ticketUrl}}" target="_blank">提交工单</a></p>\n                        </div>\n                    </div>\n                </div>\n                <div class="easydl-form" s-else>\n                    <xui-form s-ref="form" rules="{{rules}}" formData="{{formData}}" errors="{{errors}}">\n                        <xui-item label="{{isPro ? \'选择任务\' : \'选择模型\'}}：" required name="modelId">\n                            <xui-select datasource="{{models}}" value="{=modelId=}"/>\n                        </xui-item>\n                        <xui-item label="{{isPro ? \'选择任务版本\' : \'选择版本\'}}：" required name="version">\n                            <xui-select datasource="{{versions}}" value="{=version=}"/>\n                        </xui-item>\n                        <xui-item label="申请到期时间：" required name="validTime">\n                            <xui-calendar value="{=formData.validTime=}" range="{{range}}" close-on-change="{{true}}" />\n                        </xui-item>\n                        <xui-item label="申请延期理由：" required name="reason">\n                            <xui-textbox value="{=formData.reason=}" multiline="{{true}}" placeholder="请填写少于500字的申请延期理由" />\n                        </xui-item>\n                        <xui-item label=" ">\n                            <xui-button on-click="submit" skin="primary">提交审核</xui-button>\n                        </xui-item>\n                    </xui-form>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/easydl/serial/extend/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=new e["default"]({modelId:[{required:!0,message:"请选择"}],version:[{required:!0,message:"请选择"}],validTime:[{required:!0,message:"请选择到期时间"}],reason:[{required:!0,message:"请填写申请理由"},{max:500,message:"最多500个汉字"}]})}),define("ai/page/easydl/service/detail/index",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","jquery"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](i),l=a["default"](r);module.exports=s["default"]({template:o["default"],components:{"xui-layer":n.Layer,"xui-radioselect":n.RadioSelect},initData:function(){return{id:"",detail:{serviceName:""},apps:[],layerOpen:!1,addType:{data:[{text:"已创建应用",value:"select"},{text:"新增APP ID",value:"input"}],value:"select"},appList:[],selectAppId:"",inputAppId:"",loadingAddButton:!1,loadingSaveButton:!1,breadItem:[{title:"权限管理",url:"#/ai/"+this.aiAppType+"/service/list"},{title:"配置权限"}]}},computed:{disableAddButton:function(){var e=this.data.get("addType.value");return"select"===e?""===this.data.get("selectAppId"):"input"===e&&""===this.data.get("inputAppId")}},created:function(){var e=this;this.watch("addType.value",function(){e.$set("selectAppId",""),e.$set("inputAppId","")});var t=this.$get(),a=t.aiAppType,i=t.id;this.ajax.easydlServiceDetail({devApiId:i,type:a}).then(function(t){return e.$set("detail",t)}),this.ajax.easydlServiceAppList({devApiId:i,type:a}).then(function(t){return e.$set("apps",t)}),this.ajax.easydlAppList({type:a}).then(function(t){return e.$set("appList",t.map(function(e){return{value:e.appId,text:e.name,devAppId:e.devAppId}}))})},addApp:function(){var e=this,t=this.$get("addType.value"),a=this.$get("aiAppType");if("select"===t&&function(){var t=e.$get("selectAppId");if(t&&!e.checkDuplicatedApp(t,"appId")){var a=e.$get("appList").find(function(e){return e.value===t});a&&(e.data.push("apps",{appId:a.value,devAppId:a.devAppId,appName:a.text}),e.$set("selectAppId",""))}}(),"input"===t){var i=this.$get("inputAppId");i&&!this.checkDuplicatedApp(i,"devAppId")&&(this.$set("loadingAddButton",!0),this.$set("loadingSaveButton",!0),this.ajax.easydlServiceAppDetail({type:a,devAppId:i,devApiId:this.$get("id")}).then(function(t){e.data.push("apps",t),e.$set("inputAppId",""),e.$set("loadingAddButton",!1),e.$set("loadingSaveButton",!1)},function(){e.$set("loadingAddButton",!1),e.$set("loadingSaveButton",!1)}))}this.hideLayer()},deleteApp:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.$get("apps["+t+"]").bindH5){a.next=4;break}return a.next=4,e["default"].awrap(this.$confirm({title:"删除提示",content:"<p>选中的APPID已授权给“H5体验”，删除后H5体验将无法使用<br>请确定是否删除？</p>"}));case 4:this.data.removeAt("apps",t);case 5:case"end":return a.stop()}},null,this)},checkDuplicatedApp:function(e){for(var t=arguments.length<=1||arguments[1]===undefined?"appId":arguments[1],a=this.$get("apps"),i=0,n=a.length;i<n;i++)if(a[i][t]===e)return!0;return!1},showLayer:function(){this.$set("layerOpen",!0);var e=l["default"](this.ref("showLayerButton").el),t=l["default"](this.ref("layer").el);this.nextTick(function(){var a=e.offset().top;setTimeout(function(){var e=t.find(".ui-layer").offset().top;t.toggleClass("layer-upper",e<a)},10)})},hideLayer:function(){this.$set("layerOpen",!1)},save:function(){var e=this;this.$set("loadingSaveButton",!0),this.ajax.easydlServiceAppSave({type:this.$get("aiAppType"),devApiId:this.$get("id"),appIdList:this.$get("apps").map(function(e){return e.devAppId}).join(",")}).then(function(){e.$set("loadingSaveButton",!1),e.back()},function(){e.$set("loadingSaveButton",!1)})},back:function(){this.$aiRedirect("service/list")}})}),define("ai/page/easydl/service/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easydl-content">\n                <h2>配置权限</h2>\n                <xui-form>\n                    <xui-item label="服务名称：">{{detail.serviceName}}</xui-item>\n                    <xui-item label="可用APP ID：">\n                        <div class="easydl-service-app" s-for="app, index in apps">\n                            <div class="easydl-service-app-item">\n                                <span class="easydl-service-app-id">{{app.devAppId}}</span>\n                                <span class="easydl-service-app-name">{{app.appName}}</span>\n                                <a href="javascript:void(0)" on-click="deleteApp(index)"><xui-icon name="close" class="easydl-service-app-delete"></xui-icon></a>\n                            </div>\n                        </div>\n                        <xui-button s-ref="showLayerButton" class="easydl-service-app-show-layer-button" on-click="showLayer">\n                            请添加\n                            <xui-icon name="plus" />\n                            <xui-layer s-ref="layer" class="easydl-service-app-add-layer" open="{=layerOpen=}" width="{{400}}">\n                                <h2 class="layer-title">可用 APP ID</h2>\n                                <xui-form class="layer-form">\n                                    <xui-item label="添加方式：">\n                                        <xui-radioselect datasource="{{addType.data}}" value="{=addType.value=}"></xui-radioselect>\n                                    </xui-item>\n                                    <xui-item s-if="addType.value === \'select\'">\n                                        <xui-select datasource="{{appList}}" value="{=selectAppId=}" default-label="请选择您已创建的应用"></xui-select>\n                                    </xui-item>\n                                    <xui-item s-if="addType.value === \'input\'">\n                                        <xui-textbox type="text" value="{=inputAppId=}"></xui-textbox>\n                                    </xui-item>\n                                    <xui-item>\n                                        <xui-button skin="ok" disabled="{{disableAddButton || loadingAddButton}}" loading="{{loadingAddButton}}" on-click="addApp">添加</xui-button>\n                                        <xui-button on-click="hideLayer">取消</xui-button>\n                                    </xui-item>\n                                </xui-form>\n                            </xui-layer>\n                        </xui-button>\n                    </xui-item>\n                    <xui-item>\n                        <xui-button skin="ok" disabled="{{loadingSaveButton}}" loading="{{loadingSaveButton}}" on-click="save">保存</xui-button>\n                        <xui-button on-click="back">取消</xui-button>\n                    </xui-item>\n                </xui-form>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/easydl/service/list/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./serviceListFields"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports=n["default"]({template:r["default"],initData:function(){return{serviceList:{fields:s["default"](this.aiAppType),data:[]},breadItem:[{title:"权限管理"}]}},created:function(){var e=this;this.ajax.easydlServiceList({type:this.$get("aiAppType")}).then(function(t){return e.$set("serviceList.data",t)})}})}),define("ai/page/easydl/service/list/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easydl-content">\n                <h2>权限管理</h2>\n                <div class="easydl-list section">\n                    <div class="section-title">服务权限管理</div>\n                    <p class="section-tip">支持为您或者他人的AppID配置可用服务权限。</p>\n                    <ui-table\n                        datasource="{{serviceList.data}}"\n                        fields="{{serviceList.fields}}"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/easydl/service/list/serviceListFields",["exports","module","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=function(e){return[{title:"序号",stable:!0,width:65,content:function(e,t){return t+1}},{title:"服务名称",stable:!0,width:400,content:function(e){return a["default"].escape(e.serviceName)}},{title:"相关操作",content:function(t){return'<a href="#/ai/'+e+"/service/detail~id="+t.devApiId+'">配置权限</a>'}}]}}),define("ai/page/easydl/subOverview",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./subOverview.tpl","san-xui","ai/common/enums","./common/subOverview/index","./common/options","./common/retailOverview/easydlOverviewData","./local/updateDialog/index","../offlineSDK/serial/list/mutiApplyTop/index","lodash","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m){var h=n["default"](i),g=n["default"](r),v=n["default"](u),x=n["default"](d),b=n["default"](c),y=n["default"](p),k=n["default"](f);module.exports=h["default"](e["default"]({template:g["default"],components:{"xui-radioselect":s.RadioSelect,"update-dialog":b["default"],"muti-apply-top":y["default"]},filters:e["default"]({getLabelByValue:function(e,t){return t.getTextFromValue(e)}},v["default"].filters),computed:{isPro:function(){return this.data.get("aiAppType")===o.AppType.easydlPro},hasSub:function(){return this.data.get("cateGories.value")===o.EasydlAvailableTabs.LOCAL},realCateGoriesValue:function(){return this.data.get("cateGories.value")===o.EasydlAvailableTabs.LOCAL?this.data.get("boxgroup.value"):this.data.get("cateGories.value")}},initData:function(){var e=this.aiAppType===o.AppType.easydlPro?"专业版概览":"经典版概览",t=[].concat(o.EasydlAvailableTabs.toArray().filter(function(e){return!e.hasSub}),o.EasydlAvailableSubTabs.toArray());return{EasydlAvailableTabs:o.EasydlAvailableTabs,EasydlAvailableSubTabs:o.EasydlAvailableSubTabs,EasyPackageUpdateType:o.EasyPackageUpdateType,PackageApplyStatusTest:o.PackageApplyStatusTest,EasydlSDKApplyStatus:o.EasydlSDKApplyStatus,EasydlSDKActiveStatus:o.EasydlSDKActiveStatus,EasyEdgeActiveType:o.EasyEdgeActiveType,easydlOverviewData:x["default"],breadItem:[{title:e}],title:e,showTutorial:"1"===window.localStorage.getItem("TUTORIAL_STORAGE_KEY_"+this.aiAppType),easydlAvailableTabsWithType:t,cateGories:{value:o.EasydlAvailableTabs.PUBLICCLOUD,datasource:o.EasydlAvailableTabs.toArray()},boxgroup:{value:o.EasydlAvailableSubTabs.LOCAL_API,datasource:o.EasydlAvailableSubTabs.toArray()},table:{data:[],loading:!1,schema:[],cellRenderer:null},pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]},pager:this.generatePageConfig(t),updateDialogInfo:{open:!1,applyId:""},modelVersionList:[],mutiApplyTop:{open:!1,info:{}},download:{datasource:[]}}},inited:function(){var e=this;this.watch("cateGories.value",function(){return e.handleCategory()}),this.watch("boxgroup.value",function(){return e.handleCategory()}),this.getDataList(),this.handleType()},generatePageConfig:function(e){var t={};return e.forEach(function(e){t[e.value]={pageSize:10,pageNo:1,totalCount:0}}),t},disposed:function(){this.disposeQpsDetailDialog(),this.disposeDestroyDialog();var e=this.$get("showTutorial")?"1":"0";window.localStorage.setItem("TUTORIAL_STORAGE_KEY_"+this.$get("aiAppType"),e)}},v["default"].functions,{onPagerChange:function(e){var t=e.pageNo;this.$set("pager."+this.$get("realCateGoriesValue")+".pageNo",t),this.getTableList()},onSizeChange:function(e){var t=e.value;this.$set("pager."+this.$get("realCateGoriesValue")+".pageSize",t),this.getTableList()},handleCategory:function(){var e;return t["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.getTableList());case 2:this.nextTick(function(){var e=i.$get("pager."+i.$get("realCateGoriesValue")+".pageSize");i.ref("select").selectItem("",{value:e})}),e=this.$get("realCateGoriesValue"),m.changeHash({type:e});case 5:case"end":return a.stop()}},null,this)},getTableList:k["default"].debounce(function(){var e,a,i,n,r,s,u,d;return t["default"].async(function(c){for(;;)switch(c.prev=c.next){case 0:a=this.$get("realCateGoriesValue"),this.$set("table",{loading:!0,schema:l.schema(a,this.$get("aiAppType")),cellRenderer:l.cellRenderer(a,this.$get("aiAppType")),data:[]}),i=undefined,c.t0=a,c.next=c.t0===o.EasydlAvailableTabs.PUBLICCLOUD?6:c.t0===o.EasydlAvailableSubTabs.LOCAL_API?10:c.t0===o.EasydlAvailableSubTabs.LOCAL_SDK?14:c.t0===o.EasydlAvailableTabs.DEVICE?18:22;break;case 6:return c.next=8,t["default"].awrap(this.getPublicCloudList(a));case 8:return i=c.sent,c.abrupt("break",22);case 10:return c.next=12,t["default"].awrap(this.getPackageList(a));case 12:return i=c.sent,c.abrupt("break",22);case 14:return c.next=16,t["default"].awrap(this.getPrivatizationList(a));case 16:return i=c.sent,c.abrupt("break",22);case 18:return c.next=20,t["default"].awrap(this.getLiceseList(a));case 20:return i=c.sent,c.abrupt("break",22);case 22:r=(n=i).result,s=n.totalCount,u=n.pageNo,d=n.items,this.$$set((e={"table.loading":!1,"table.data":r||d},e["pager."+a+".totalCount"]=s,e["pager."+a+".pageNo"]=u,e));case 28:case"end":return c.stop()}},null,this)},50),getPublicCloudList:function(a){return t["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.ajax.easydlOverviewApiList(e["default"]({type:this.$get("aiAppType")},k["default"].omit(this.$get("pager."+a),"totalCount"))));case 1:case"end":return t.stop()}},null,this)},getPackageList:function(a){return t["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.ajax.easydlOverviewPackageList(e["default"]({type:this.$get("aiAppType")},k["default"].omit(this.$get("pager."+a),"totalCount"))));case 1:case"end":return t.stop()}},null,this)},getPrivatizationList:function(a){return t["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.ajax.easydlOverviewPrivatizationList(e["default"]({type:this.$get("aiAppType")},k["default"].omit(this.$get("pager."+a),"totalCount"))));case 1:case"end":return t.stop()}},null,this)},getLiceseList:function(a){return t["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.ajax.easydlOverviewLicenseList(e["default"]({type:this.$get("aiAppType"),productType:this.$get("isPro")?"easydl-pro":"easydl"},k["default"].omit(this.$get("pager."+a),"totalCount"))));case 1:case"end":return t.stop()}},null,this)},toDetail:function(e){var t=this.$get("realCateGoriesValue")===o.EasydlAvailableSubTabs.LOCAL_API?"api":"sdk";this.$redirect("#/ai/"+this.$get("aiAppType")+"/package/detail~applyId="+e+"&type="+t)},updatePackage:function(e){var a=e.modelId,i=e.applyId,n=e.projectId;return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.getModelVersionList(a||n));case 2:this.$set("updateDialogInfo",{open:!0,applyId:i});case 3:case"end":return e.stop()}},null,this)},getModelVersionList:function(a){var i,n,r,s,o;return t["default"].async(function(l){for(var u=this;;)switch(l.prev=l.next){case 0:return i=this.$get(),n=i.aiAppType,r=i.isPro,l.next=5,t["default"].awrap(m.cacheValue("easydl_package_model_version_"+n+"_"+a,function(){return u.ajax.packageEasydlModelVersionList(e["default"]({},r?{projectId:a}:{modelId:a},{type:n}))}));case 5:s=l.sent,(o=s.map(function(t){return e["default"]({text:"V"+t.version,value:t.version},t.canPack?{}:{disabled:!0})})).length||o.push({text:"暂无可私有化的版本",value:-1,disabled:!0}),this.$set("modelVersionList",o);case 9:case"end":return l.stop()}},null,this)},updateSuccess:function(){this.getTableList()},creatExtend:function(e){var t=e.id;this.$aiRedirect("serial/extend",{id:t})},improveTopLine:function(e){this.$set("mutiApplyTop",{open:!0,info:e})},getDownLoadList:function(i){var n,r,s,l,u,d,c,p,f,h;return t["default"].async(function(g){for(var v=this;;)switch(g.prev=g.next){case 0:if("block"!==this.ref("download"+i.applyId).style.display){g.next=4;break}return this.ref("download"+i.applyId).style.display="none",g.abrupt("return");case 4:return this.closeOtherDownload(i),n=i.iterationId,r=i.projectId,s=i.modelId,l=i.applyId,u=i.platform,d=this.$get(),c=d.aiAppType,p=d.isPro,g.next=15,t["default"].awrap(m.cacheValue("easydl_package_sdk_download_"+n+"_"+l+"_"+c,function(){return v.ajax.easydlSdkProjectDownload(e["default"]({iterationId:n,applyId:l,type:c},p?{projectId:r}:{modelId:s}))}));case 15:if(f=g.sent,h=[],a["default"](f).forEach(function(e){f[e][u]&&h.push({text:o.SDKTypes.getTextFromValue(e),value:f[e][u][0].url})}),1!==h.length){g.next=21;break}return m.iframeDownload(h[0].value),g.abrupt("return");case 21:this.$$set({"download.datasource":h}),this.ref("download"+i.applyId).style.display="block";case 23:case"end":return g.stop()}},null,this)},downLoadSDK:function(e,t){m.iframeDownload(e),this.ref("download"+t).style.display="none"},handleType:function(){var e=this.$get(),t=e.type,a=e.realCateGoriesValue,i=e.easydlAvailableTabsWithType;if(t&&this.isAvailableType(t,i)&&t!==a)return this.isAvailableType(t,o.EasydlAvailableTabs.toArray())?+t===o.EasydlAvailableTabs.PUBLICCLOUD?void this.getTableList():void this.$set("cateGories.value",+t):void this.$$set({"cateGories.value":o.EasydlAvailableTabs.LOCAL,"boxgroup.value":+t});this.getTableList()},isAvailableType:function(e,t){return t.some(function(t){return t.value===+e})},closeOtherDownload:function(e){var t=this,a=e.applyId;this.$get("table.data").filter(function(e){return e.applyId!==a&&e.applyStatus===o.EasydlSDKApplyStatus.APPROVED}).forEach(function(e){t.ref("download"+e.applyId).style.display="none"})},getDataList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.easydlOverviewDataList({pageNo:1,pageSize:1e4,type:this.$get("aiAppType")}));case 2:e=a.sent,this.$set("dataList",e.filter(function(e){return e.url}));case 4:case"end":return a.stop()}},null,this)}}))}),define("ai/page/easydl/subOverview.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap ai-easydl-base-overview ai-easydl-pro-overview">\n    <app-view>\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content overview-content">\n                <h2>{{title}}</h2>\n                <div class="tutorial">\n                    <div class="tutorial-title">\n                        <div class="{{showTutorial ? \'has-bottom\' : \'\'}}">\n                            产品介绍：<span s-if="{{!showTutorial}}">（展开查看服务功能介绍）</span>\n                        </div>\n                        <a class="toggle" on-click="changeToggle" href="javascript:void(0)">\n                            {{showTutorial ? \'收起\' : \'展开\'}}\n                        </a>\n                    </div>\n                    <div s-if="showTutorial" class="tutorial-detail">\n                        <template s-if="isPro">\n                            <p>EasyDL专业版是EasyDL在2019年10月下旬全新推出的针对AI初学者或者AI专业工程师的企业用户及开发者推出的AI模型训练与服务平台，支持视觉及自然语言处理两大技术方向，内置百度海量数据训练的预训练模型，可灵活脚本调参，只需少量数据可达到优模型效果。</p>\n                            <p>若您尚未训练模型，请前往<a href="{{Url[aiAppType].official}}" target="_blank">EasyDL专业版官网</a>进行模型训练。训练完成后，可在本页面管理模型部署服务。</p>\n                        </template>\n                        <template s-else>\n                            <p>经典版适合AI零基础或追求高效率开发的企业或个人开发者，支持定制图像分类、物体检测、图像分割、声音分类、视频分类、文本分类六类模型。</p>\n                            <p>若您尚未训练模型，请前往<a href="{{Url[aiAppType].official}}" target="_blank">EasyDL经典版官网</a>进行模型训练。训练完成后，可在本页面管理模型部署服务。</p>\n                            <p>目前EasyDL已支持将模型部署在公有云服务器、私有服务器，封装成可离线计算的设备端SDK，或直接购买软硬一体方案，灵活适配各种使用场景及运行环境。</p>\n                        </template>\n                    </div>\n                </div>\n                <div class="section-header">定制服务列表</div>\n                <div class="category-tabs">\n                    <xui-radioselect value="{=cateGories.value=}" datasource="{{cateGories.datasource}}"></xui-radioselect>\n                </div>\n                <div class="sub-category-tabs" s-if="{{hasSub}}">\n                    <xui-boxgroup box-type="radio" datasource="{{boxgroup.datasource}}" value="{=boxgroup.value=}"/>\n                </div>\n                <xui-table\n                    class="list-table"\n                    cell-builder="{{table.cellRenderer}}"\n                    schema="{{table.schema}}"\n                    loading="{{table.loading}}"\n                    on-command="onCommand($event)"\n                    datasource="{{table.data}}">\n                        <template slot="c-operation">\n                            <template s-if="EasydlAvailableSubTabs.LOCAL_SDK === realCateGoriesValue">\n                                <a class="operation-item" on-click="toDetail(row.applyId)" href="javascript:void(0)">查看申请信息</a>\n                                <template s-if="{{row.applyStatus === EasydlSDKApplyStatus.APPROVED}}">\n                                    <a s-if="{{row.activateStatus === EasydlSDKActiveStatus.NOT_ACTIVED}}" class="operation-item" target="_blank" href="{{Url[aiAppType].sdk.activate}}">如何激活</a>\n                                    <div class="download-select-all">\n                                        <a href="javascript:void(0);" class="operation-item" on-click="getDownLoadList(row)">下载SDK</a>\n                                        <div class="download-select" s-ref="download{{row.applyId}}" style="display: none;">\n                                            <div on-click="downLoadSDK(item.value, row.applyId)" class="download-select-item" s-for="item in download.datasource">{{item.text}}</div>\n                                        </div>\n                                    </div>\n                                </template>\n                            </template>\n                            <template s-if="EasydlAvailableSubTabs.LOCAL_API === realCateGoriesValue">\n                                <a class="operation-item" on-click="toDetail(row.applyId)" href="javascript:void(0)">查看申请信息</a>\n                                <a s-if="row.downloadLink" class="operation-item" href="{{row.downloadLink}}" target="_blank">下载{{row.updateModelType | getLabelByValue(EasyPackageUpdateType)}}</a>\n                                <a s-if="row.status === PackageApplyStatusTest.SuccessTwo"\n                                    class="operation-item"\n                                    on-click="updatePackage(row)"\n                                    href="javascript:void(0)">更新版本</a>\n                            </template>\n                            <template s-if="EasydlAvailableTabs.DEVICE === realCateGoriesValue">\n                                <a s-if="row.activateStatus === 0" href="{{Url[aiAppType].activation}}" target="_blank">如何激活</a>\n                                <span s-else-if="!row.canExtend" target="申请审核中" style="color: #999">申请审核中</span>\n                                <a s-else href="javascript:void(0)" on-click="creatExtend(row)">申请延期</a>\n                                <a s-if="row.orderId" href="#/ai/market/buyer/order/detail~orderId={{row.orderId}}">订单详情</a>\n                                <a s-if="row.canEnlarge && currentType === EasyEdgeActiveType.BATCH" href="javascript:void(0);" on-click="improveTopLine(row)">提高设备数上限</a>\n                            </template>\n                        </template>\n                        <div slot="empty">\n                            <div class="ui-table-body-nodata">\n                                <div>\n                                    <p>\n                                        <span>没有数据</span> <br>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                </xui-table>\n                <div class="pager-row">\n                    <span class="pager-label">每页显示</span>\n                    <xui-select\n                        s-ref="select"\n                        datasource="{{pageSelect.datasource}}"\n                        on-change="onSizeChange($event)"\n                        value="{=pager[realCateGoriesValue].pageSize=}"\n                    />\n                    <xui-pager\n                        size="{{pager[realCateGoriesValue].pageSize}}"\n                        page="{{pager[realCateGoriesValue].pageNo}}"\n                        count="{{pager[realCateGoriesValue].totalCount}}"\n                        back-text="<"\n                        forward-text=">"\n                        on-change="onPagerChange($event)"\n                    />\n                </div>\n                <div class="section-header">数据管理接口列表</div>\n                <xui-table\n                        class="list-table"\n                        schema="{{easydlOverviewData.schema}}"\n                        datasource="{{dataList}}">\n                        <template slot="c-api">\n                            {{row | formatApi | raw}}\n                            <xui-tip s-if="{{row.apiTip}}" message="{{row.apiTip}}" />\n                        </template>\n                        <template slot="c-status">\n                            {{row | formatStatus | raw}}\n                        </template>\n                        <template slot="c-charge">\n                            {{row | formatCharge | raw}}\n                        </template>\n                        <template slot="c-maxQps">\n                            {{row.maxQps}}\n                            <xui-tip skin="warning" s-if="{{row.qpsTip}}" message="{{row.qpsTip}}" />\n                        </template>\n                        <div slot="empty">{{noData | raw}}</div>\n                    </xui-table>\n            </div>\n            <muti-apply-top open="{=mutiApplyTop.open=}" info="{{mutiApplyTop.info}}"/>\n            <update-dialog open="{=updateDialogInfo.open=}" modelVersionList="{{modelVersionList}}" updateDialogInfo="{{updateDialogInfo}}" on-updateSuccess="updateSuccess"/>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/easydl/usage/index",["exports","module","./usage","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/easydl/usage/usage",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./usage.tpl","san-xui","moment","lodash","../../overview/usageFields"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](n),c=i["default"](s),p=i["default"](o),f=i["default"](l);module.exports=u["default"]({template:d["default"],components:{"xui-rangecalendar":r.RangeCalendar},initData:function(){var t=c["default"]().format("YYYY-MM-DD"),a=t;return{breadItem:[{title:"用量统计"}],table:e["default"]({data:[],loading:!1},f["default"](this.aiAppType)),pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]},pager:{pageSize:10,pageNo:1,totalCount:0},timeRange:{begin:t,end:a}}},attached:function(){var e=this;this.watch("pager.pageSize",function(){e.getUsage()}),this.getUsage()},getUsage:p["default"].debounce(function(){var e,a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return this.$set("table.loading",!0),r.next=3,t["default"].awrap(this.sendUsageAjax());case 3:e=r.sent,a=e.items,i=e.totalCount,n=e.pageNo,this.$$set({"table.loading":!1,"table.data":a,"pager.totalCount":i,"pager.pageNo":n});case 8:case"end":return r.stop()}},null,this)},50),sendUsageAjax:function(){var t=this.$get("timeRange");return this.ajax.easydlUsage(e["default"]({type:this.$get("aiAppType"),timeRange:c["default"](t.begin).valueOf()+","+c["default"](t.end).valueOf()},p["default"].omit(this.$get("pager"),"totalCount")))},selectTime:function(){this.$set("pager.pageNo",1),this.getUsage()},onPagerChange:function(e){var t=e.pageNo;this.$set("pager.pageNo",t),this.getUsage()}})}),define("ai/page/easydl/usage/usage.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap ai-easydl-all-usage">\n    <app-view>\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content overview-content">\n                <h2>用量统计</h2>\n                <div class="section">\n                    <div class="section-title">使用用量统计</div>\n                </div>\n                <div>\n                    <span>请选时间段：</span>\n                    <xui-rangecalendar value="{=timeRange=}" on-change="selectTime"/>\n                </div>\n                <xui-table\n                    class="usage-list-table"\n                    cell-builder="{{table.cellRenderer}}"\n                    schema="{{table.schema}}"\n                    loading="{{table.loading}}"\n                    datasource="{{table.data}}">\n                    <div slot="empty">\n                        <div class="ui-table-body-nodata">\n                            <div>\n                                <p>\n                                    <span>没有数据</span> <br>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </xui-table>\n                <div class="pager-row">\n                    <span class="pager-label">每页显示</span>\n                    <xui-select datasource="{{pageSelect.datasource}}" value="{=pager.pageSize=}" />\n                    <xui-pager\n                        size="{{pager.pageSize}}"\n                        page="{{pager.pageNo}}"\n                        count="{{pager.totalCount}}"\n                        back-text="<"\n                        forward-text=">"\n                        on-change="onPagerChange($event)"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/face/facelib/appList/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","inf-ui/x/components/SearchBox","inf-ui/x/components/asTable","inf-ui/x/components/Pager","lodash","er/URL"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](i),c=t["default"](r),p=t["default"](s),f=t["default"](o),m=[{name:"i",label:"",width:48},{name:"name",label:"人脸库名称"},{name:"devAppId",label:"AppID"},{name:"createTime",label:"创建时间"},{name:"detail",label:"详情"}];module.exports=l["default"]({template:u["default"],components:{"xui-searchbox":d["default"],"xui-table":n.asTable(m),"xui-pager":c["default"]},computed:{breadItem:function(){return[{title:"人脸库管理"}]}},initData:function(){return{searchName:"",noDataVisible:!0,table:{loading:!0,datasource:[],schema:m},pager:{pageNo:1,pageSize:10,totalCount:0}}},inited:function(){this.$get("pageNo")&&this.$set("pager.pageNo",+this.$get("pageNo"))},attached:function(){this.getData()},getData:function(){var e=this;this.$set("table.loading",!0),this.ajax.facelibAppList(this.getParams()).then(function(t){t.result=e.handleResult(t),e.$set("table.datasource",t.result),e.$set("pager.totalCount",t.totalCount),e.$set("table.loading",!1),e.$set("noDataVisible",!e.$get("searchName"))})},getParams:function(){return{name:this.$get("searchName"),pageNo:this.$get("pager.pageNo"),pageSize:this.$get("pager.pageSize")}},onPagerChange:function(e){var t=e.pageNo,a=this.$route(),i=a.query,n=a.path;this.$redirect({url:"#"+n+"~"+f["default"].serialize(p["default"].extend({},i,{pageNo:t})),options:{silent:!0}}),this.$set("pager.pageNo",t),this.getData()},handleResult:function(e){var t=e.result,a=e.pageNo,i=e.pageSize;return t.forEach(function(e,t){e.i=(a-1)*i+t+1}),t},searchHanlder:function(){var e=this.$route(),t=e.query,a=e.path,i={pageNo:1,searchName:this.$get("searchName")};this.$redirect({url:"#"+a+"~"+f["default"].serialize(p["default"].extend({},t,i)),options:{silent:!0}}),this.$set("pager.pageNo",1),this.getData()},createHandler:function(){this.$aiRedirect("app/create")},redirectGroupList:function(e){this.$aiRedirect("facelib/groupList",{appId:e.appId})}})}),define("ai/page/face/facelib/appList/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content facelib-content">\n                <h2>人脸库列表\n                    <span style="margin-left:20px;font-size:12px">可视化零成本创建人脸注册页面，快速注册人脸库，<a href="{{Url.face.facekit}}" target="_blank">了解详情</a></span>\n                </h2>\n                <div class="table-full-wrap">\n                    <div class="operation-wrap">\n                        <xui-button icon="plus" skin="primary" on-click="createHandler">新建应用</xui-button>\n                        <xui-searchbox value="{=searchName=}" placeholder="请输入人脸库名称" style="float:right" on-search="searchHanlder"></xui-searchbox>\n                    </div>\n                    <xui-table\n                        schema="{{table.schema}}"\n                        datasource="{{table.datasource}}"\n                        loading="{{table.loading}}">\n                        <div slot="c-name">\n                            <a href="javascript:void(0)" on-click="redirectGroupList(row)">{{row.name}}</a>\n                        </div>\n                        <div slot="c-createTime">\n                            {{row.createTime | dateFormat(\'YYYY-MM-DD HH:mm:ss\')}}\n                        </div>\n                        <div slot="c-detail">\n                            <div s-if="row.groupNum != 0">{{row.groupNum}}个用户组</div>\n                            <div s-else>人脸库为空</div>\n                        </div>\n                        <div slot="empty">\n                            <div class="ui-table-body-nodata">\n                                <div>\n                                    <p>\n                                        <span>没有相关的人脸库</span> <br>\n                                        <a s-if="noDataVisible" href="#/ai/{{aiAppType}}/app/create" class="create-btn">马上创建></a>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </xui-table>\n                    <xui-pager size="{{pager.pageSize}}"\n                        page="{{pager.pageNo}}"\n                        count="{{pager.totalCount}}"\n                        back-text="<"\n                        forward-text=">"\n                        on-change="onPagerChange($event)" />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/face/facelib/common/config",["exports","module"],function(exports,module){module.exports={groupIdMaxLength:48,uidMaxLength:128}}),define("ai/page/face/facelib/common/Uploader",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","lodash","jquery","saber-cookie"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n);module.exports=r["default"]({template:'\n        <div class="ai-upload-wrap">\n            <div class="upload-list" style="display:{{fileList.length ? \'flex\' : \'none\'}}">\n                <div class="upload-item" s-for="item, index in fileList">\n                    <div class="upload-img-wrap">\n                        <img src="{{item.url}}" class="{{item.img.width > item.img.height ? \'vertical-middle\' : \'horizontal-middle\'}}"/>\n                        <div class="upload-loading-mask" s-if="item.status == STATUS.dataProcess"></div>\n                        <xui-loading s-if="item.status == STATUS.dataProcess"/>\n                    </div>\n                    <div class="upload-item-desc">\n                        <div class="upload-progress" s-if="item.status == STATUS.uploading">\n                            <div class="progress-text-wrap">\n                                <div class="progress-text">上传进度</div>\n                                <div class="progress-percentage">{{item.progress}}%</div>\n                            </div>\n                            <div class="progress-bar">\n                                <div class="progress-bar-active" style="width: {{item.progress}}%;"></div>\n                            </div>\n                        </div>\n                        <a s-if="item.status == STATUS.beforeUpload" href="javascript:void(0)" on-click="delete(index)">删除</a>\n                        <div s-if="item.status == STATUS.dataProcess">数据处理中</div>\n                        <div s-if="item.status == STATUS.success">上传成功</div>\n                        <div s-if="item.status == STATUS.fail" class="error">上传失败 <br> {{item.errorMsg}}</div>\n                    </div>\n                </div>\n                <div class="upload-btn" on-click="uploadHandler" s-if="createBtnVisible">\n                </div>\n                <input type="file" class="choose" accept="image/*" multiple="{{multiple}}" s-ref="file" on-change="changeHandler($event)">\n            </div>\n            <div class="empty-desc" style="display:{{fileList.length ? \'none\' : \'block\'}}">\n                <div class="add-image-bg"></div>\n                <xui-button skin="primary" on-click="uploadHandler">点此添加图片</xui-button>\n                <div s-if="maxLength != 1" class="empty-desc-helper" style="margin-bottom: 20px;">按住Ctrl可选多张图片，最多{{maxLength}}张</div>\n\n                <div class="empty-desc-helper">请上传用户正面、无遮挡照片</div>\n                <div class="empty-desc-helper">仅支持PNG、JPG、JPEG、BMP格式，大小{{maxSize}}M以内</div>\n                <div class="empty-desc-helper">若图片包含多张人脸，则只注册图片中“可检测到的最大脸”</div>\n            </div>\n        </div>\n    ',inited:function(){var e=this;this.on("queueChange",function(){e.$set("createBtnVisible",e.$get("fileList").length<e.$get("maxLength")),e.dispatch("input-comp-value-changed",{value:e.$get("fileList")})})},initData:function(){return{maxLength:5,acceptMimeTypes:/\/(?:jpeg|png|jpg|bmp)/i,maxSize:5,url:"",fileList:[],multiple:!0,STATUS:{beforeUpload:0,uploading:1,fail:2,dataProcess:3,success:4}}},getInputElement:function(){return o["default"](".ai-upload-wrap .choose")},uploadHandler:function(){this.getInputElement().click()},changeHandler:function(e){var t=this,a=this.getInputElement()[0].files,i=this.$get("maxLength"),n=this.$get("acceptMimeTypes"),r=this.$get("maxSize");a.length&&((a=Array.prototype.slice.call(a)).length+this.$get("fileList").length>i?this.$toast("一次最多只能上传"+i+"张",{messageType:"error"}):(a.forEach(function(e,a){if(n.test(e.type))if(e.size>1024*r*1024)t.$toast("大小仅支持"+r+"M以内",{messageType:"error"});else{var i=document.createElement("img"),s=window.URL.createObjectURL(e);i.src=s,i.addEventListener("load",function(){t.data.push("fileList",t.createItemFactory({url:s,blob:e,type:e.type,size:e.size,img:i})),t.fire("queueChange",t.$get("fileList"))})}else t.$toast("仅支持PNG、JPG、JPEG、BMP格式",{messageType:"error"})}),this.getInputElement()[0].value=""))},createItemFactory:function(e){return s["default"].extend({status:0,progress:0,errorMsg:"",url:""},e)},uploadAll:function(){var e=this;this.$get("fileList").forEach(function(t,a){t.size>1048576?e.compress(t,a,.5,function(t){e.upload(t,a)}):e.upload(t.blob,a)}),this.$set("createBtnVisible",!1)},upload:function(e,t){var a=this;this.$set("fileList["+t+"].status",this.$get("STATUS.uploading"));var i=new XMLHttpRequest;i.open("post",this.$get("url"));var n=l["default"].get("bce-user-info");n&&(n=n.replace(/"/g,"")),i.setRequestHeader("csrftoken",n),i.setRequestHeader("X-Request-By","ERApplication"),i.addEventListener("readystatechange",function(){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.response);e.success?a.$set("fileList["+t+"].status",a.$get("STATUS.success")):(a.$set("fileList["+t+"].status",a.$get("STATUS.fail")),a.$set("fileList["+t+"].errorMsg",e.message.global))}else 4===i.readyState&&200!==i.status&&(a.$set("fileList["+t+"].status",a.$get("STATUS.fail")),a.$set("fileList["+t+"].errorMsg","服务器出错"));a.uploadFinish()}),i.upload.addEventListener("progress",function(e){a.$set("fileList["+t+"].progress",~~(100*e.loaded/e.total))}),i.upload.addEventListener("load",function(e){a.$set("fileList["+t+"].status",a.$get("STATUS.dataProcess"))}),i.send(e)},compress:function(e,t,a,i){a===undefined&&(a=.6);var n=e.img.width*a,r=e.img.height*a,s=document.createElement("canvas"),o=s.getContext("2d"),l=document.createAttribute("width");l.nodeValue=n;var u=document.createAttribute("height");u.nodeValue=r,s.setAttributeNode(l),s.setAttributeNode(u),o.drawImage(e.img,0,0,n,r),s.toBlob(function(e){i(e)},e.type)},"delete":function(e){this.data.splice("fileList",[e,1]),this.fire("queueChange",this.$get("fileList"))},uploadFinish:function(){var e=this,t=this.$get("fileList").every(function(t){return t.status==e.$get("STATUS.success")||t.status==e.$get("STATUS.fail")});this.lifeCycle.disposed||t&&this.fire("finish",{successList:this.$get("fileList").filter(function(t){return t.status==e.$get("STATUS.success")}),failList:this.$get("fileList").filter(function(t){return t.status==e.$get("STATUS.fail")})})}})}),define("ai/page/face/facelib/faceList/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./UploadDialog"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports=n["default"]({template:r["default"],computed:{breadItem:function(){return[{title:"人脸库管理",url:"#/ai/"+this.data.get("aiAppType")+"/facelib/appList"},{title:this.data.get("appName")}]}},initData:function(){return{faceList:[],dialog:{open:!0,data:{}}}},attached:function(){this.getData(),this.getAppDetail()},getData:function(){var e=this;this.ajax.facelibFaceList(this.getParams()).then(function(t){e.$set("faceList",t),t.forEach(function(t,a){var i=new Image;i.src=t.url,i.onload=function(){e.$set("faceList["+a+"].width",i.width),e.$set("faceList["+a+"].height",i.height)}})})},getAppDetail:function(){var e=this;this.ajax.facelibAppDetail({id:this.$get("appId")}).then(function(t){e.$set("appName",t.name)})},getParams:function(){return{appId:this.$get("appId"),groupId:this.$get("groupId"),uid:this.$get("uid")}},createHandler:function(){(new s["default"]).attach(document.body)},redirectGroupList:function(){this.$aiRedirect("facelib/groupList",{appId:this.$get("appId")})},redirectUserList:function(){this.$aiRedirect("facelib/userList",{appId:this.$get("appId"),groupId:this.$get("groupId")})}})}),define("ai/page/face/facelib/faceList/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content facelib-content">\n                <h2>\n                    <a href="javascript:void(0)" on-click="redirectGroupList">{{appName}}</a> /\n                    <a href="javascript:void(0)" on-click="redirectUserList">{{groupId}}</a> /\n                    {{uid}}\n                </h2>\n                <div class="table-full-wrap">\n                    <div class="operation-wrap button-wrap">\n                        <xui-button icon="plus" skin="primary" on-click="createHandler">添加人脸</xui-button>\n                    </div>\n                    <div class="face-list">\n                        <div class="face-item" s-for="item in faceList">\n                            <div class="item-img-wrap">\n                                <img class="{{item.width > item.height ? \'vertical-middle\' : \'horizontal-middle\'}}" src="{{item.url}}" alt="">\n                            </div>\n                            <div>创建时间：{{item.createTime | dateFormat(\'YYYY-MM-DD HH:mm:ss\')}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/face/facelib/faceList/UploadDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/Dialog","lodash","promise","jquery","../common/Uploader","er/URL"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=(t["default"](i),t["default"](n),t["default"](r),t["default"](s)),c=t["default"](o);module.exports=l["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="facelib-upload-dialog">\n                <div slot="head">上传图片</div>\n                <uploader maxLength="{{5}}"\n                    s-ref="uploader"\n                    on-queueChange="queueChange"\n                    on-finish="finishHander"\n                    fileList="{=fileList=}"\n                    url="{{uploadUrl}}"\n                ></uploader>\n                <div class="upload-result" s-if="allOver">上传成功{{successNum}}张，<span class="error">上传失败{{failNum}}张</span></div>\n                <div slot="foot">\n                    <div s-if="!allOver">\n                        <ui-button on-click="startUpload" skin="primary" disabled="{{btnDisabled}}">{{okText}}</ui-button>\n                        <ui-button on-click="onCloseDialog">取消</ui-button>\n                    </div>\n                    <div s-else>\n                        <ui-button on-click="closeAndReload">关闭</ui-button>\n                    </div>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":u["default"],uploader:d["default"]},computed:{},initData:function(){var e=this.$route(),t={appId:e.query.appId,groupId:e.query.groupId,uid:e.query.uid,locale:"zh-cn"};return{open:!0,fileList:[],allOver:!1,okText:"上传图片",btnDisabled:!0,uploadUrl:"/api/ai/facelib/face/create?"+c["default"].serialize(t)}},attached:function(){},onCloseDialog:function(){this.dispose()},startUpload:function(){this.ref("uploader").uploadAll(),this.$set("okText","上传中"),this.$set("btnDisabled",!0)},finishHander:function(e){var t=e.successList,a=t===undefined?[]:t,i=e.failList,n=i===undefined?[]:i;this.$set("allOver",!0),this.$set("btnDisabled",!1),this.$set("successNum",a.length),this.$set("failNum",n.length)},closeAndReload:function(){this.dispose(),this.$reload()},queueChange:function(e){this.$set("btnDisabled",!e.length)}})}),define("ai/page/face/facelib/groupList/CreateGroupDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/forms/Form","inf-ui/x/forms/FormItem","inf-ui/x/components/TextBox","inf-ui/x/components/Dialog","inf-ui/x/components/Button","../common/config","async-validator","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=t["default"](e),c=t["default"](a),p=t["default"](i),f=t["default"](n),m=t["default"](r),h=t["default"](s),g=t["default"](u);module.exports=d["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" title="新建组" class="facelib-create-group-dialog">\n                <div slot="head">新建用户组</div>\n                <xui-form formData="{=formData=}" rules="{{rules}}" errors="{=errors=}" s-ref="saveForm">\n                    <xui-item label="组ID：" name="id">\n                        <xui-textbox value="{=formData.id=}" placeholder="由数字、字母和下划线组成"></xui-textbox>\n                        <div slot="help" class="text-helper">\n                            <div style="color:{{formData.id.length > '+o.groupIdMaxLength+" ? '#f00' : '#333'}}\">{{formData.id.length}}/"+o.groupIdMaxLength+'</div>\n                        </div>\n                    </xui-item>\n                </xui-form>\n                <div slot="foot">\n                    <ui-button on-click="save" skin="primary" disabled="{{btnDisabled}}">确认</ui-button>\n                    <ui-button on-click="onCloseDialog">取消</ui-button>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":m["default"],"xui-textbox":f["default"],"xui-button":h["default"],"xui-form":c["default"],"xui-item":p["default"]},computed:{btnDisabled:function(){return!!this.data.get("errors")}},initData:function(){return{formData:{id:""},errors:null,rules:new l["default"]({id:[{required:!0,message:"组ID不能为空"},{pattern:/^\w+$/,message:"组ID必须由数字、字母、下划线组成"},{max:o.groupIdMaxLength,message:"组ID不能超过"+o.groupIdMaxLength+"个字符"}]})}},save:function(){var e=this;this.ref("saveForm").validateForm().then(function(){e.sendAjax()})},sendAjax:function(){var e=this,t=g["default"].extend({appId:this.$get("data.appId")},this.$get("formData"));this.ajax.facelibGroupCreate(t).then(function(){e.$toast("保存成功"),e.$set("open",!1),e.$reload()},function(t){t.field&&e.$set("errors",t.field)})},onCloseDialog:function(){this.$set("open",!1)}})}),define("ai/page/face/facelib/groupList/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","inf-ui/x/components/SearchBox","inf-ui/x/components/asTable","inf-ui/x/components/Pager","./CreateGroupDialog","lodash","moment","er/URL"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=t["default"](e),c=t["default"](a),p=t["default"](i),f=t["default"](r),m=t["default"](s),h=t["default"](o),g=(t["default"](l),t["default"](u)),v=[{name:"i",label:"",width:48},{name:"id",label:"用户组"},{name:"userNum",label:"用户数"},{name:"updateTime",label:"修改时间"},{name:"detail",label:"详情"}];module.exports=d["default"]({template:c["default"],components:{"xui-searchbox":p["default"],"xui-table":n.asTable(v),"xui-pager":f["default"],"create-group-dialog":m["default"]},computed:{breadItem:function(){return[{title:"人脸库管理",url:"#/ai/"+this.data.get("aiAppType")+"/facelib/appList"},{title:this.data.get("appName")}]}},initData:function(){return{searchId:"",noDataVisible:!0,table:{loading:!0,datasource:[],schema:v},pager:{pageNo:1,pageSize:10,totalCount:0},createDialog:{open:!1,data:{}}}},inited:function(){this.$get("pageNo")&&this.$set("pager.pageNo",+this.$get("pageNo"))},attached:function(){this.getData(),this.getAppDetail()},getData:function(){var e=this;this.$set("table.loading",!0),this.ajax.facelibGroupList(this.getParams()).then(function(t){t.result=e.handleResult(t),e.$set("table.datasource",t.result),e.$set("pager.totalCount",t.totalCount),e.$set("table.loading",!1),e.$set("noDataVisible",!e.$get("searchId"))})},getAppDetail:function(){var e=this;this.ajax.facelibAppDetail({id:this.$get("appId")}).then(function(t){e.$set("appName",t.name)})},getParams:function(){return{appId:this.$get("appId"),id:this.$get("searchId"),pageNo:this.$get("pager.pageNo"),pageSize:this.$get("pager.pageSize")}},onPagerChange:function(e){var t=e.pageNo,a=this.$route(),i=a.query,n=a.path;this.$redirect({url:"#"+n+"~"+g["default"].serialize(h["default"].extend({},i,{pageNo:t})),options:{silent:!0}}),this.$set("pager.pageNo",t),this.getData()},handleResult:function(e){var t=e.result,a=e.pageNo,i=e.pageSize;return t.forEach(function(e,t){e.i=(a-1)*i+t+1}),t},searchHanlder:function(){var e=this.$route(),t=e.query,a=e.path,i={pageNo:1,searchId:this.$get("searchId")};this.$redirect({url:"#"+a+"~"+g["default"].serialize(h["default"].extend({},t,i)),options:{silent:!0}}),this.$set("pager.pageNo",1),this.getData()},createHandler:function(){this.$set("createDialog.open",!0),this.$set("createDialog.data.appId",this.$get("appId"))},redirectUserList:function(e){this.$aiRedirect("facelib/userList",{appId:this.$get("appId"),groupId:e.id})}})}),define("ai/page/face/facelib/groupList/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content facelib-content">\n                <h2>{{appName}}</h2>\n                <div class="table-full-wrap">\n                    <div class="operation-wrap">\n                        <xui-button icon="plus" skin="primary" on-click="createHandler">新建组</xui-button>\n                        <xui-searchbox value="{=searchId=}" placeholder="请输入用户组id" style="float:right" on-search="searchHanlder"></xui-searchbox>\n                    </div>\n                    <xui-table\n                        schema="{{table.schema}}"\n                        datasource="{{table.datasource}}"\n                        loading="{{table.loading}}">\n                        <div slot="c-id">\n                            <a class="overflow-ellipsis" href="javascript:void(0)" on-click="redirectUserList(row)">{{row.id}}</a>\n                        </div>\n                        <div slot="c-updateTime">\n                            {{row.updateTime | dateFormat(\'YYYY-MM-DD HH:mm:ss\')}}\n                        </div>\n                        <div slot="c-detail">\n                            <div>{{row.faceNum}}张人脸</div>\n                        </div>\n                        <div slot="empty">\n                            <div class="ui-table-body-nodata">\n                                <div>\n                                    <p>\n                                        <span>没有相关的用户组</span> <br>\n                                        <a s-if="noDataVisible" on-click="createHandler" href="javascript:void(0)" class="create-btn">马上创建></a>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </xui-table>\n                    <xui-pager size="{{pager.pageSize}}"\n                        page="{{pager.pageNo}}"\n                        count="{{pager.totalCount}}"\n                        back-text="<"\n                        forward-text=">"\n                        on-change="onPagerChange($event)" />\n                </div>\n            </div>\n            <create-group-dialog open="{=createDialog.open=}" data="{{createDialog.data}}"></create-group-dialog>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/face/facelib/userList/CopyDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/Dialog","inf-ui/x/components/Button","inf-ui/x/components/BoxGroup","inf-ui/x/components/SearchBox","inf-ui/x/components/InfiniteScroll","async-validator","lodash","promise"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=t["default"](e),c=t["default"](a),p=t["default"](i),f=t["default"](n),m=t["default"](r),h=t["default"](s),g=t["default"](l),v=t["default"](u);module.exports=d["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="facelib-copy-dialog">\n                <div slot="head">{{typeName}}到组</div>\n                <xui-searchbox\n                    width="486"\n                    value="{=searchId=}"\n                    placeholder="搜索组ID"\n                    on-search="searchHandler"\n                ></xui-searchbox>\n                <xui-infinite-scroll on-more="loadMore" loading="{{loading}}" finished="{{finished}}">\n                    <xui-boxgroup\n                        s-if="groupList.length"\n                        box-type="radio"\n                        datasource="{{groupList}}"\n                        value="{=toGroupId=}"\n                    ></xui-boxgroup>\n                    <div s-if="!groupList.length && !loading">\n                        没有相关的组\n                    </div>\n                </xui-infinite-scroll>\n                <div slot="foot">\n                    <ui-button on-click="save" skin="primary" disabled="{{btnDisabled}}">{{okText}}</ui-button>\n                    <ui-button on-click="onCloseDialog">取消</ui-button>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":c["default"],"xui-button":p["default"],"xui-boxgroup":f["default"],"xui-searchbox":m["default"],"xui-infinite-scroll":h["default"]},computed:{btnDisabled:function(){return!this.data.get("toGroupId")},typeName:function(){return"copy"===this.data.get("type")?"复制":"移动"}},initData:function(){return{okText:"确认",searchId:"",toGroupId:"",pageNo:1,pageSize:20,groupList:[],loading:!1,finished:!1}},attached:function(){this.getData()},getData:function(){var e=this,t=arguments.length<=0||arguments[0]===undefined?"append":arguments[0];this.$set("loading",!0);var a=g["default"].get(this.$route(),"query.appId"),i=this.$get("searchId"),n=this.$get("pageNo"),r=this.$get("pageSize");this.ajax.facelibGroupIdList({appId:a,id:i,pageNo:n,pageSize:r},{"X-silence":!0}).then(function(a){e.$set("loading",!1);var i=a.result.filter(function(t){return t!=g["default"].get(e.$route(),"query.groupId")}).map(function(e){return{text:e,value:e}});"append"===t?e.data.splice("groupList",[e.$get("groupList").length,0].concat(i)):e.data.set("groupList",i),a.result.length<e.$get("pageSize")&&e.$set("finished",!0)})},searchHandler:function(){this.$set("pageNo",1),this.$set("toGroupId",""),this.getData("override")},loadMore:function(){this.$get("open")&&(this.$set("pageNo",this.$get("pageNo")+1),this.getData())},save:function(){var e=this;this.$set("okText","提交中"),this.$set("btnDisabled",!0);var t=this.$get("uid").split(","),a="copy"===this.$get("type")?"facelibUserCopy":"facelibUserMove",i=t.map(function(t){return new v["default"](function(i,n){e.ajax[a]({id:t,groupId:g["default"].get(e.$route(),"query.groupId"),toGroupId:e.$get("toGroupId"),appId:g["default"].get(e.$route(),"query.appId")},{"X-silence":!0}).then(function(){i()},function(e){i({uid:t,error:e.global})})})});v["default"].all(i).then(function(t){var a=t.filter(function(e){return e});a.length?e.fire("errorDialog",{title:"拷贝失败",list:a}):(e.$toast(e.$get("typeName")+"成功"),e.$reload()),e.dispose()})},onCloseDialog:function(){this.$set("open",!1),this.dispose()}})}),define("ai/page/face/facelib/userList/CreateDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/Dialog","inf-ui/x/forms/Form","inf-ui/x/forms/FormItem","inf-ui/x/components/TextBox","async-validator","jquery","lodash","../common/Uploader","er/URL","../common/config"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=t["default"](e),f=t["default"](a),m=t["default"](i),h=t["default"](n),g=t["default"](r),v=(t["default"](o),t["default"](l),t["default"](u)),x=t["default"](d);module.exports=p["default"]({template:'\n        <div>\n            <xui-dialog open="{{true}}" class="facelib-create-user-dialog">\n                <div slot="head">新建用户</div>\n                <xui-form formData="{=formData=}" rules="{{rules}}" errors="{=errors=}" s-ref="form">\n                    <xui-item label="用户ID：" name="id" required>\n                        <xui-textbox value="{=formData.id=}" placeholder="由数字、字母和下划线组成"></xui-textbox>\n                        <div slot="help" class="text-helper">\n                            <div style="color:{{formData.id.length > '+c.uidMaxLength+" ? '#f00' : '#333'}}\">{{formData.id.length}}/"+c.uidMaxLength+'</div>\n                        </div>\n                    </xui-item>\n                    <xui-item name="fileList" style="margin-top:40px;">\n                        <uploader maxLength="{{1}}"\n                            multiple="{{false}}"\n                            s-ref="uploader"\n                            on-finish="finishHander"\n                            fileList="{=formData.fileList=}"\n                            url="{{uploadUrl}}"\n                        ></uploader>\n                    </xui-item>\n                </xui-form>\n                <div slot="foot">\n                    <div s-if="!allOver">\n                        <ui-button on-click="saveHandler" skin="primary" disabled="{{btnDisabled}}">{{okText}}</ui-button>\n                        <ui-button on-click="onCloseDialog">取消</ui-button>\n                    </div>\n                    <div s-else>\n                        <ui-button on-click="closeAndReload">关闭</ui-button>\n                    </div>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":f["default"],uploader:v["default"],"xui-textbox":g["default"],"xui-form":m["default"],"xui-item":h["default"]},computed:{btnDisabled:function(){return!!this.data.get("errors")}},initData:function(){return{okText:"确认",allOver:!1,uploadUrl:"",formData:{id:"",fileList:[]},rules:new s["default"]({id:[{required:!0,message:"用户ID不能为空"},{pattern:/^\w+$/,message:"用户ID必须由数字、字母、下划线组成"},{max:c.uidMaxLength,message:"用户ID不能超过"+c.uidMaxLength+"个字符"}],fileList:function(e,t,a){if(!t.length)return a("请选择一张图片");a()}}),errors:null}},onCloseDialog:function(){this.dispose()},closeAndReload:function(){this.dispose(),this.$reload()},saveHandler:function(){var e=this;this.ref("form").validateForm().then(function(){e.save()})},save:function(){var e=this.$route(),t={appId:e.query.appId,groupId:e.query.groupId,id:this.$get("formData.id"),locale:"zh-cn"};this.ref("uploader").$set("url","/api/ai/facelib/user/create?"+x["default"].serialize(t)),this.ref("uploader").uploadAll(),this.$set("btnDisabled",!0),this.$set("okText","提交中")},finishHander:function(e){var t=e.successList;this.$set("allOver",!0),t.length?(this.$toast("新建成功"),this.dispose(),this.$reload()):(this.$set("okText","完成"),this.$set("btnDisabled",!1))}})}),define("ai/page/face/facelib/userList/DeleteDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/Dialog","inf-ui/x/components/Button","promise","lodash"],function(exports,module,e,t,a,i,n,r){var s=t["default"](e),o=t["default"](a),l=t["default"](i),u=t["default"](n),d=t["default"](r);module.exports=s["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="facelib-delete-dialog">\n                <div slot="head">确认删除</div>\n                <div>\n                    <div class="confirm-icon"></div>\n                    <div class="delete-dialog-text">\n                        <div class="ui-dialog-text">确认删除所选择的用户信息吗？</div>\n                        <xui-checkbox checked="{=checked=}" title="同时删除用户所在其他组的记录" class="{{checked ? \'\' : \'grey\'}}"/>\n                        <div class="delete-dialog-warning-text" s-if="checked">删除后数据不可恢复，该用户将从人脸库彻底删除</div>\n                    </div>\n                </div>\n                <div slot="foot">\n                    <ui-button on-click="save" skin="primary" disabled="{{btnDisabled}}">{{okText}}</ui-button>\n                    <ui-button on-click="onCloseDialog">取消</ui-button>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":o["default"],"xui-button":l["default"]},computed:{},initData:function(){return{checked:!1,btnDisabled:!1,okText:"确定"}},save:function(){var e=this;this.$set("okText","提交中"),this.$set("btnDisabled",!0);var t=this.$get("uid").split(",").map(function(t){return new u["default"](function(a,i){e.ajax.facelibUserDelete({id:t,groupId:d["default"].get(e.$route(),"query.groupId"),appId:d["default"].get(e.$route(),"query.appId"),allGroup:e.$get("checked")},{"x-silent":!0,"X-silence":!0}).then(function(){a()},function(e){a({uid:t,error:e.global})})})});u["default"].all(t).then(function(t){var a=t.filter(function(e){return e});a.length?e.fire("errorDialog",{title:"删除失败",list:a}):(e.$toast("删除成功"),e.$reload()),e.dispose()})},onCloseDialog:function(){this.$set("open",!1),this.dispose()}})}),define("ai/page/face/facelib/userList/ErrorDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/Dialog","inf-ui/x/components/Button"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports=n["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="facelib-delete-dialog">\n                <div slot="head">{{title}}</div>\n                <div>\n                    <div class="confirm-icon"></div>\n                    <div class="delete-dialog-text">\n                        <div class="error-title">失败原因：</div>\n                        <div class="error-list">\n                            <div class="error-item" s-for="item, index in list">\n                                {{index + 1}}、uid：{{item.uid}}，{{item.error}}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div slot="foot">\n                    <ui-button on-click="onCloseDialog">关闭</ui-button>\n                </div>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":r["default"],"xui-button":s["default"]},initData:function(){return{open:!0}},onCloseDialog:function(){this.$set("open",!1),this.dispose(),this.$reload()}})}),define("ai/page/face/facelib/userList/GroupDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/Dialog","inf-ui/x/components/Loading","lodash"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i);t["default"](n);module.exports=r["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="facelib-group-dialog" foot="{{false}}" top="200" s-ref="dialog">\n                <div slot="head">所在组</div>\n                <div class="group-list" s-if="!loading">\n                    <div class="group-item" s-for="item in groupList">{{item}}</div>\n                </div>\n                <xui-loading s-else/>\n            </xui-dialog>\n        </div>\n    ',components:{"xui-dialog":s["default"],"xui-loading":o["default"]},initData:function(){return{loading:!1,groupList:[]}},attached:function(){this.getData()},getData:function(){var e=this;this.$set("loading",!0),this.ajax.facelibUserGroupInfo({appId:this.$route().query.appId,id:this.$get("uid")},{"X-silence":!0}).then(function(t){e.$set("groupList",t),e.ref("dialog").__resize(),e.$set("loading",!1)})}})}),define("ai/page/face/facelib/userList/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","inf-ui/x/components/SearchBox","inf-ui/x/components/asTable","inf-ui/x/components/Dialog","inf-ui/x/components/Pager","lodash","moment","er/URL","./CopyDialog","./GroupDialog","./DeleteDialog","./CreateDialog","./ErrorDialog"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m){var h=t["default"](e),g=t["default"](a),v=t["default"](i),x=(t["default"](r),t["default"](s)),b=t["default"](o),y=(t["default"](l),t["default"](u)),k=t["default"](d),T=t["default"](c),w=t["default"](p),I=t["default"](f),D=t["default"](m),S=[{name:"i",label:"",width:48},{name:"id",label:"用户"},{name:"faceNum",label:"人脸数量"},{name:"group",label:"所在组",width:130},{name:"updateTime",label:"修改时间"},{name:"operation",label:"操作"}];module.exports=h["default"]({template:g["default"],components:{"xui-searchbox":v["default"],"xui-table":n.asTable(S),"xui-pager":x["default"]},computed:{breadItem:function(){return[{title:"人脸库管理",url:"#/ai/"+this.data.get("aiAppType")+"/facelib/appList"},{title:this.data.get("appName")}]}},initData:function(){return{searchId:"",noDataVisible:!0,table:{loading:!0,datasource:[],schema:S},pager:{pageNo:1,pageSize:10,totalCount:0},selectedItems:[]}},attached:function(){this.getData(),this.getAppDetail()},getData:function(){var e=this;this.$set("table.loading",!0),this.ajax.facelibUserList(this.getParams()).then(function(t){t.result=e.handleResult(t),e.$set("table.datasource",t.result),e.$set("pager.totalCount",t.totalCount),e.$set("table.loading",!1),e.$set("noDataVisible",!e.$get("searchId"))})},getAppDetail:function(){var e=this;this.ajax.facelibAppDetail({id:this.$get("appId")}).then(function(t){e.$set("appName",t.name)})},getParams:function(){return{appId:this.$get("appId"),groupId:this.$get("groupId"),id:this.$get("searchId"),pageNo:this.$get("pager.pageNo"),pageSize:this.$get("pager.pageSize")}},onPagerChange:function(e){var t=e.pageNo,a=this.$route(),i=a.query,n=a.path;this.$redirect({url:"#"+n+"~"+y["default"].serialize(b["default"].extend({},i,{pageNo:t})),options:{silent:!0}}),this.$set("pager.pageNo",t),this.getData()},handleResult:function(e){var t=e.result,a=e.pageNo,i=e.pageSize;return t.forEach(function(e,t){e.i=(a-1)*i+t+1}),t},onTableRowSelected:function(e){this.$set("selectedItems",e.selectedItems)},copySelected:function(){var e=this.$get("selectedItems").map(function(e){return e.id}).join(",");this.copy(e)},copy:function(e){var t=new k["default"]({data:{open:!0,type:"copy",uid:e}});this.children.push(t),this.bindDialogEvent(t),t.attach(document.body)},moveSelected:function(){var e=this.$get("selectedItems").map(function(e){return e.id}).join(",");this.move(e)},move:function(e){var t=new k["default"]({data:{open:!0,type:"move",uid:e}});this.children.push(t),this.bindDialogEvent(t),t.attach(document.body)},exportSelected:function(){var e=this.$get("selectedItems").map(function(e){return e.id}).join(",");this["export"](e)},"export":function(e){var t={appId:this.$get("appId"),groupId:this.$get("groupId"),uidList:e,locale:"zh-cn"};window.open("/ai/download/facelib/face?"+y["default"].serialize(t))},deleteSelected:function(){var e=this.$get("selectedItems").map(function(e){return e.id}).join(",");this["delete"](e)},"delete":function(e){var t=new w["default"]({data:{open:!0,uid:e}});this.children.push(t),this.bindDialogEvent(t),t.attach(document.body)},seeGroup:function(e){var t=new T["default"]({data:{open:!0,uid:e.id}});this.children.push(t),t.attach(document.body)},redirectUserDetail:function(e){this.$aiRedirect("facelib/faceList",{appId:this.$get("appId"),groupId:this.$get("groupId"),uid:e})},redirectGroupList:function(){this.$aiRedirect("facelib/groupList",{appId:this.$get("appId")})},createHandler:function(){var e=new I["default"];this.children.push(e),e.attach(document.body)},bindDialogEvent:function(e){var t=this;e.on("errorDialog",function(e){t.showErrorDialog(e)})},showErrorDialog:function(e){var t=new D["default"]({data:e});this.children.push(t),t.attach(document.body)},searchHanlder:function(){var e=this.$route(),t=e.query,a=e.path,i={pageNo:1,searchId:this.$get("searchId")};this.$redirect({url:"#"+a+"~"+y["default"].serialize(b["default"].extend({},t,i)),options:{silent:!0}}),this.$set("pager.pageNo",1),this.getData()}})}),define("ai/page/face/facelib/userList/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content facelib-content">\n                <h2><a href="javascript:void(0)" on-click="redirectGroupList">{{appName}}</a> / {{groupId}}</h2>\n                <div class="table-full-wrap">\n                    <div class="operation-wrap button-wrap">\n                        <xui-button icon="plus" skin="primary" on-click="createHandler">新建用户</xui-button>\n                        <span s-if="selectedItems.length">\n                            <xui-button on-click="copySelected">复制到</xui-button>\n                            <xui-button on-click="moveSelected">移动到</xui-button>\n                            <xui-button on-click="exportSelected">导出</xui-button>\n                            <xui-button on-click="deleteSelected">删除</xui-button>\n                        </span>\n                        <xui-searchbox value="{=searchId=}" placeholder="请输入用户id" style="float:right" on-search="searchHanlder"></xui-searchbox>\n                    </div>\n                    <xui-table\n                        select="multi"\n                        schema="{{table.schema}}"\n                        datasource="{{table.datasource}}"\n                        on-selected-change="onTableRowSelected($event)"\n                        loading="{{table.loading}}">\n                        <div slot="c-id">\n                            <a class="overflow-ellipsis" href="javascript:void(0)" on-click="redirectUserDetail(row.id)">{{row.id}}</a>\n                        </div>\n                        <div slot="c-updateTime">\n                            {{row.updateTime | dateFormat(\'YYYY-MM-DD HH:mm:ss\')}}\n                        </div>\n                        <div slot="c-group">\n                            <a on-click="seeGroup(row)" href="javascript:void(0)">查看</a>\n                        </div>\n                        <div slot="c-operation">\n                            <a class="operation-btn" href="javascript:void(0)" on-click="copy(row.id)">复制到</a>\n                            <a class="operation-btn" href="javascript:void(0)" on-click="move(row.id)">移动到</a>\n                            <a class="operation-btn" href="javascript:void(0)" on-click="export(row.id)">导出</a>\n                            <a class="operation-btn" href="javascript:void(0)" on-click="delete(row.id)">删除</a>\n                        </div>\n                        <div slot="empty">\n                            <div class="ui-table-body-nodata">\n                                <div>\n                                    <p>\n                                        <span>没有相关的用户</span> <br>\n                                        <a s-if="noDataVisible" on-click="createHandler" href="javascript:void(0)" class="create-btn">马上创建></a>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </xui-table>\n                    <xui-pager size="{{pager.pageSize}}"\n                        page="{{pager.pageNo}}"\n                        count="{{pager.totalCount}}"\n                        back-text="<"\n                        forward-text=">"\n                        on-change="onPagerChange($event)" />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/lexer/dict/detail/index",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","inf-ui/x/components/Button","inf-ui/x/components/Table","inf-ui/x/components/Pager","inf-ui/x/components/Dialog","inf-ui/x/components/Loading","inf-ui/x/components/Icon","./SaveDialog","ai/components/FileErrorDetailDialog","lodash","moment","ai/config","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h){var g=a["default"](t),v=a["default"](i),x=a["default"](n),b=a["default"](r),y=a["default"](s),k=a["default"](o),T=a["default"](l),w=a["default"](u),I=a["default"](d),D=a["default"](c),S=a["default"](p),A=a["default"](f),$="ai-lexer-has-closed-";module.exports=g["default"]({template:v["default"],messages:{showErrorDetailDialog:function(e){var t=e.value;this.$set("errorDetailDialog.visible",!0),this.$set("errorDetailDialog.detail",t)}},components:{"xui-button":x["default"],"xui-table":b["default"],"xui-pager":y["default"],"xui-dialog":k["default"],"xui-loading":T["default"],"xui-icon":w["default"],"save-dialog":I["default"],"error-detail-dialog":D["default"]},computed:{breadItem:function(){return[{title:"词法分析定制",url:"#/ai/"+this.data.get("aiAppType")+"/lexer/dict/list"},{title:this.data.get("detail").name}]},btnDisabled:function(){var e=S["default"].get(this.data.get("detail"),"status");return S["default"].contains([h.DictStatus.effected,h.DictStatus.effecting,h.DictStatus.init],e)},maskStatusVisible:function(){var e=S["default"].get(this.data.get("detail"),"status"),t=window.localStorage.getItem($+this.data.get("appId"));return e===h.DictStatus.effecting||e===h.DictStatus.fail||e===h.DictStatus.effected&&"true"!==t}},filters:{dateFormat:function(e,t){return e?A["default"](e).format(t):""}},initData:function(){return{detail:{},table:{error:"",schema:[{name:"name",label:"词表"},{name:"code",label:"英文简称"},{name:"word.num",label:"自定义词汇"},{name:"regex.num",label:"正则表达式"},{name:"updateTime",label:"更新时间"},{name:"operator",label:"词表操作"}],loading:!1,datasource:[],cellRenderer:function(e,t,a,i){return"name"===t&&e.isDefault?'<span style="color:#999">默认</span> | '+e[t]:"word.num"===t?S["default"].get(e.word,"num")||0:"regex.num"===t?S["default"].get(e.regex,"num")||0:"updateTime"===t?A["default"](e[t]).format("YYYY/MM/DD HH:mm"):"operator"==t?e.isDefault?e.isClosed?'<a data-command="OPEN" href="javascript:void(0)">开启</a>':0===S["default"].get(e.word,"num",0)&&0===S["default"].get(e.regex,"num",0)?'<a data-command="CREATE" href="javascript:void(0)">扩展</a> |\n                                        <a data-command="CLOSE" href="javascript:void(0)">关闭</a>\n                                ':'<a data-command="UPDATE" href="javascript:void(0)">修改</a> |\n                                        <a data-command="DELETE" href="javascript:void(0)">清空</a> |\n                                        <a data-command="CLOSE" href="javascript:void(0)">关闭</a>\n                                ':'<a data-command="UPDATE" href="javascript:void(0)">修改</a> |\n                                    <a data-command="DELETE" href="javascript:void(0)">删除</a>':e[t]}},pager:{pageNo:1,pageSize:20,totalCount:0},saveDialog:{visible:!1,payload:null},deleteDialog:{visible:!1,title:"",content:"",id:""},errorDetailDialog:{visible:!1,detail:[]}}},attached:function(){this.getData()},reload:function(){this.$reload()},getData:function(){var e=this;this.$set("table.loading",!0),m.api.getLexerWordsetList(this.getParams()).then(function(t){e.$set("table.datasource",t.result),e.$set("pager.totalCount",t.totalCount),e.$set("table.loading",!1)}),this.getDetail()},getDetail:function(){var e=this;m.api.getLexerDictDetail({appId:this.$get("appId")},{"x-silent":!0}).then(function(t){e.$set("detail",t),t.status===h.DictStatus.effecting&&setTimeout(function(){e.getDetail()},1e4)})},getParams:function(){return S["default"].extend(this.$get("pager"),{appId:this.$get("appId")})},onPagerChange:function(e){var t=e.pageNo;this.data.set("pager.pageNo",t),this.getData()},onCommand:function(e){var t=e.type,a=e.payload;switch(t){case"UPDATE":case"CREATE":this.showWordSaveDialog(a);break;case"DELETE":this.showDeleteDialog(a);break;case"CLOSE":this.closeDefaultWordset(a);break;case"OPEN":this.openDefaultWordset(a)}},closeDefaultWordset:function(t){var a=t.id,i=t.name,n=t.code;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.$confirm({title:"确认关闭系统词表",content:"关闭系统默认词表后，系统默认词表和已扩展的默认词表将不会生效，完全以个性化词表与规则设置为准"}));case 2:return t.next=4,e["default"].awrap(this.ajax.closeLaxerWordset({appId:this.$get("appId"),id:a,name:i,code:n}));case 4:this.getData();case 5:case"end":return t.stop()}},null,this)},openDefaultWordset:function(t){var a=t.id,i=t.name,n=t.code;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.$confirm({title:"确认开启系统词表",content:"开启系统默认词表后，系统默认词表和已扩展的默认词表将重新生效"}));case 2:return t.next=4,e["default"].awrap(this.ajax.openLaxerWordset({appId:this.$get("appId"),id:a,name:i,code:n}));case 4:this.getData();case 5:case"end":return t.stop()}},null,this)},createWordHandler:function(){this.showWordSaveDialog()},showWordSaveDialog:function(e){this.$set("saveDialog.visible",!0),this.$set("saveDialog.payload",S["default"].cloneDeep(e,!0))},showDeleteDialog:function(e){var t=undefined,a=undefined;e.isDefault?(t="清空词表",a="确定要清空”"+e.name+"“默认词表吗？"):(t="删除词表",a="确定要删除”"+e.name+"“词表吗？"),this.$set("deleteDialog.visible",!0),this.$set("deleteDialog.title",t),this.$set("deleteDialog.content",a),this.$set("deleteDialog.id",e.id)},deleteWordset:function(){var e=this;m.api.deleteLexerWordset({appId:this.$get("appId"),id:this.$get("deleteDialog.id")}).then(function(){e.$toast(e.$get("deleteDialog.title")+"成功"),e.$reload()})},effect:function(){var e=this;m.api.effectLexerDict({appId:this.$get("appId")}).then(function(){window.localStorage.removeItem($+e.$get("appId")),e.$reload()})},closeMaskStatus:function(){this.$set("maskStatusVisible",!1),window.localStorage.setItem($+this.$get("appId"),"true")},retry:function(){this.effect()}})}),define("ai/page/lexer/dict/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content class="dict-detail-content">\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content">\n                <div class="content-head">\n                    <div class="app-name">{{detail.name}} - 定制词典</div>\n                    <div class="effect-time">词典生效时间：{{detail.effectTime | dateFormat(\'YYYY/MM/DD HH:mm\')}}</div>\n                    <xui-button skin="ok" class="effect-btn" on-click="effect" disabled="{{btnDisabled}}">立即生效</xui-button>\n                </div>\n\n                <div class="content-body">\n                    <div class="button-wrap">\n                        <xui-button skin="primary" icon="plus" on-click="createWordHandler" disabled="{{pager.totalCount > 100}}">新增词表</xui-button>\n                        <span class="max-limit-error" s-if="pager.totalCount > 100">当前词表数量为{{pager.totalCount}}，已达上限值</span>\n                    </div>\n                    <div class="table-full-wrap">\n                        <xui-table\n                            on-command="onCommand($event)"\n                            cell-builder="{{table.cellRenderer}}"\n                            schema="{{table.schema}}"\n                            loading="{{table.loading}}"\n                            error="{{table.error}}"\n                            datasource="{{table.datasource}}">\n                            <div class="ui-table-error" slot="error">\n                                啊呀，出错了？<a href="javascript:void(0)" on-click="refreshTable">重新加载</a>\n                            </div>\n                        </xui-table>\n                    </div>\n                    <xui-pager size="{{pager.pageSize}}"\n                        page="{{pager.pageNo}}"\n                        count="{{pager.totalCount}}"\n                        back-text="<"\n                        forward-text=">"\n                        on-change="onPagerChange($event)" />\n                </div>\n\n                <div class="status-mask" s-if="maskStatusVisible">\n                    <div class="mask"></div>\n                    <div class="dialog">\n                        <div s-if="detail.status == 2">\n                            <xui-loading size="middle" />\n                            <span class="word">生效中，预计耗时2-10分钟，请您耐心等待</span>\n                        </div>\n                        <div s-if="detail.status == 0">\n                            <xui-icon name="ok-reverse"></xui-icon>\n                            <span class="word">词典已生效</span>\n                            <span on-click="closeMaskStatus">\n                                <xui-icon name="close"></xui-icon>\n                            </span>\n                        </div>\n                        <div s-if="detail.status == 3">\n                            <xui-icon name="fail-reverse"></xui-icon>\n                            <span class="word">生效失败，<a href="javascript:void(0)" on-click="retry">请重试&gt;</a></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- dialog --\x3e\n            <xui-dialog open="{=deleteDialog.visible=}" on-confirm="deleteWordset">\n                <div slot="head">{{deleteDialog.title}}</div>\n                {{deleteDialog.content}}\n            </xui-dialog>\n\n            <save-dialog on-reload="reload" open="{=saveDialog.visible=}" payload="{{saveDialog.payload}}" appName="{{detail.name}}" appId="{{appId}}"></save-dialog>\n\n            <error-detail-dialog open="{=errorDetailDialog.visible=}" detail="{{errorDetailDialog.detail}}"></error-detail-dialog>\n\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/lexer/dict/detail/SaveDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/forms/Form","inf-ui/x/forms/FormItem","inf-ui/x/components/TextBox","inf-ui/x/components/Dialog","inf-ui/x/components/Button","inf-ui/x/components/Tip","async-validator","./Uploader","san","ai/config","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){var f=t["default"](e),m=t["default"](a),h=t["default"](i),g=t["default"](n),v=t["default"](r),x=t["default"](s),b=t["default"](o),y=t["default"](u),k=t["default"](p);module.exports=f["default"]({template:'\n        <div>\n            <xui-dialog open="{=open=}" class="dict-detail-save-dialog">\n                <div slot="head">{{title}}</div>\n                <xui-form formData="{=formData=}" rules="{{rules}}" errors="{=errors=}" s-ref="saveForm">\n                    <xui-item label="应用名称：">{{appName}}</xui-item>\n                    <xui-item label="词表名：" required="{{state === \'create\' ? \'true\' : \'\'}}" name="name">\n                        <xui-textbox s-if="state === \'create\'" type="text" value="{=formData.name=}" placeholder="请输入1-10位字母、汉字、数字"></xui-textbox>\n                        <span s-else>{{formData.name}}</span>\n                    </xui-item>\n                    <xui-item label="英文简称：" required="{{state === \'create\' ? \'true\' : \'\'}}" name="code">\n                        <xui-textbox s-if="state === \'create\'" type="text" value="{=formData.code=}" placeholder="请输入1-7位大写字母"></xui-textbox>\n                        <span s-else>{{formData.code}}</span>\n                    </xui-item>\n                    <xui-item label="文件导入：" class="file-form-item" name="file" required>\n                        <span slot="label">文件导入：\n                            <xui-tip position="lt">\n                                <dl class="wordset-tip">\n                                    <div class="wordset-tip-item">\n                                        <dt>词汇：</dt><dd>用户上传的词汇集，如在水果词表下添加词汇：苹果、菠萝、梨，一般适用于可枚举的词表配置。</dd>\n                                    </div>\n                                    <div class="wordset-tip-item">\n                                        <dt>正则表达式：</dt><dd>用户上传的正则表达式集，如在电话号码词表下添加通配式：1[0-9]{10}，一般适用于不可枚举的词表配置。</dd>\n                                    </div>\n                                </dl>\n                            </xui-tip>\n                        </span>\n                        <div style="width:242px;display:inline-block;">\n                            <uploader file="{=formData.word=}" buttonText="词汇" kind="lexerWord"></uploader>\n                            <uploader file="{=formData.regex=}" buttonText="正则表达式" kind="lexerRegex"></uploader>\n                        </div>\n                    </xui-item>\n                    <xui-item label=" " class="desc-form-item">\n                        文件格式为.txt,不超过2MB，编码仅支持GBK <br>\n                        模板样例（<a href="https://nlp-test.bj.bcebos.com/lexer-test/demo/词汇导入demo.txt" target="_blank">词汇导入demo</a> |\n                            <a href="https://nlp-test.bj.bcebos.com/lexer-test/demo/正则表达式demo.txt" target="_blank">正则表达式demo</a>）\n                    </xui-item>\n                </xui-form>\n                <div slot="foot">\n                    <ui-button on-click="save" skin="primary" disabled="{{btnDisabled}}">确认</ui-button>\n                    <ui-button on-click="onCloseDialog">取消</ui-button>\n                </div>\n            </xui-dialog>\n        </div>\n    ',computed:{state:function(){var e=this.data.get("payload");return e?e.isDefault?"default":"custom":"create"},title:function(){switch(this.data.get("state")){case"create":return"新增词表";case"default":case"custom":return"编辑词表"}},formData:function(){return this.data.get("payload")?this.data.get("payload"):{}},btnDisabled:function(){return!!this.data.get("errors")}},components:{"xui-dialog":v["default"],"xui-textbox":g["default"],"xui-button":x["default"],"xui-form":m["default"],"xui-item":h["default"],"xui-tip":b["default"],uploader:y["default"]},initData:function(){var e=this;return{errors:null,rules:new l["default"]({name:[{required:!0,message:"请填写词表名"},{max:10,message:"词表名不能超过10个字符"}],code:[{required:!0,message:"请填写英文简称"},{max:7,message:"英文简称不能超过7个字符"}],file:function(t,a,i,n){d.nextTick(function(){(n=e.$get("formData")).word||n.regex?i():i("请至少选择一个文件导入")})}})}},save:function(){var e=this;this.ref("saveForm").validateForm().then(function(){e.sendAjax()})},onCloseDialog:function(){this.$set("open",!1)},sendAjax:function(){var e=this,t=k["default"].omit(this.$get("formData"),"file");t.wordFileId=k["default"].get(t,"word.fileId"),t.regexFileId=k["default"].get(t,"regex.fileId"),t.appId=this.$get("appId"),t=k["default"].omit(t,"word","regex"),c.api.saveLexerWordset(t).then(function(){e.$toast("保存成功"),e.$set("open",!1),e.fire("reload")},function(t){t.field&&e.$set("errors",t.field)})}})}),define("ai/page/lexer/dict/detail/Uploader",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","webuploader","ai/config/upload","lodash","underscore","inf-ui/x/components/Icon","jquery"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](i),c=t["default"](n),p=t["default"](r),f=t["default"](s),m=(t["default"](o),{F_EXCEED_SIZE:"文件大小超限",Q_EXCEED_NUM_LIMIT:"队列文件数量超出限制！",Q_EXCEED_SIZE_LIMIT:"文件大小超限",Q_ZERO_SIZE_LIMIT:"不能上传空文件",Q_TYPE_DENIED:"文件格式错误",F_DUPLICATE:"文件 “<%= name %>” 已存在"});module.exports=l["default"]({template:'\n        <div class="nlp-uploader">\n            <div class="upload-btn" style="display:{{!file ? \'inline-block\' : \'none\'}}">\n                <xui-icon name="plus"></xui-icon>{{buttonText}}\n            </div>\n            <div class="file-preview" s-if="file">\n                <div class="file">\n                    <div class="file-icon"></div>\n                    <div class="file-name">{{file.fileName}}</div>\n                </div>\n                <div class="mask">\n                    <div on-click="reupload"><xui-icon name="refresh"></xui-icon><span>重新上传</span></div>\n                    <div on-click="download"><xui-icon name="download"></xui-icon><span>下载</span></div>\n                    <div on-click="delete"><xui-icon name="close"></xui-icon><span>删除</span></div>\n                </div>\n            </div>\n            <div class="error-msg" s-if="errorMsg">\n                {{errorMsg}}\n                <a href="javascript:void(0)" s-if="errorDetail.length" on-click="showErrorDetailDialog">校验结果详情</a>\n            </div>\n        </div>\n    ',components:{"xui-icon":f["default"]},initData:function(){return{state:"init",file:null,errorMsg:"",errorDetail:[]}},attached:function(){var e=this,t=c["default"].extend({},d["default"],{formData:{kind:this.$get("kind")},pick:this.el.querySelector(".upload-btn")});this.uploader=u["default"].create(t),this.initEvents(),this.uploader.on("ready",function(){e.el.querySelector(".webuploader-pick");var t=e.el.querySelector('.upload-btn input[type="file"]').parentNode;t.style.width="100%",t.style.height="100%"})},initEvents:function(){var e=this;this.uploader.on("error",function(t,a){var i=p["default"].template(m[t],a);e.$set("errorMsg",i)}),this.uploader.on("uploadAccept",function(t,a){a.success?(e.$set("errorMsg",""),e.$set("file",c["default"].extend({},e.$get("file"),a.result)),e.fireChange()):(e["delete"](),e.$set("errorMsg",a.message.global),e.$set("errorDetail",a.message.detail))}),this.uploader.on("beforeFileQueued",function(){return!e.uploader.isInProgress()})},"delete":function(){var e=this;this.$set("file",null);var t=this.uploader.getFiles();c["default"].isEmpty(t)?this.fireChange():t.forEach(function(t){e.uploader.removeFile(t,!0)})},showErrorDetailDialog:function(){this.dispatch("showErrorDetailDialog",this.$get("errorDetail"))},download:function(){window.open(this.$get("file.fileUrl"))},upload:function(){this.el.querySelector('.upload-btn input[type="file"]').click()},reupload:function(){this["delete"](),this.upload()},fireChange:function(){this.dispatch("input-comp-value-changed",{value:this.$get("file")})}})}),define("ai/page/lexer/dict/list/Card",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","moment","ai/common/enums"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a);module.exports=n["default"]({template:'\n        <div class="card">\n            <div class="card-head">\n                <div class="app-name">{{data.name}}</div>\n                <div class="app-id">APP ID: {{data.devAppId}}</div>\n            </div>\n            <div class="card-body">\n                <div s-if="data.status == DictStatus.modified">\n                    词法分析定制词典设置已更新，待生效 <br>\n                    建议您生效最新版定制词典\n                </div>\n                <div s-elif="data.status == DictStatus.effecting">\n                    词法分析定制生效中...\n                </div>\n                <div s-elif="data.status == DictStatus.fail">\n                    本次词法分析定制生效失败 <br>\n                    目前使用的仍是上一个生效版本，请您重试\n                </div>\n                <div s-elif="data.status == DictStatus.init">\n                    系统词表{{dictClosedStatus}}<br>\n                    您还可以添加更多自定义内容\n                </div>\n                <div s-elif="data.status == DictStatus.effected">\n                    <div class="card-item">\n                        <span class="card-item-title">生效时间：</span>\n                        <div class="card-item-value">{{data.effectTime | dateFormat(\'YYYY/MM/DD HH:mm\')}}</div>\n                    </div>\n                    <div class="card-item">\n                        <span class="card-item-title">已生效词表：</span>\n                        <div class="word-list card-item-value">{{data.wordset | join}}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="card-foot">\n                <a href="javascript:void(0)" class="to-detail-btn" on-click="onCommand(\'toDetail\', data.appId)">\n                    <span s-if="data.status != DictStatus.init">\n                        查看详情\n                    </span>\n                    <span s-else>\n                        立即创建\n                    </span>\n                </a>\n            </div>\n        </div>\n    ',filters:{join:function(e){return e&&e.join(" | ")},dateFormat:function(e,t){return r["default"](e).format(t)}},initData:function(){return{DictStatus:i.DictStatus}},computed:{dictClosedStatus:function(){return i.DictClosedStatus.valueIndex[this.data.get("data.closedStatus")].text}},onCommand:function(e,t){this.dispatch(e,t)}})}),define("ai/page/lexer/dict/list/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/config","inf-ui/x/components/Pager","inf-ui/x/components/Loading","./Card"],function(exports,module,e,t,a,i,n,r,s){var o=t["default"](e),l=t["default"](a),u=t["default"](n),d=t["default"](r),c=t["default"](s);module.exports=o["default"]({template:l["default"],components:{card:c["default"],"xui-pager":u["default"],"xui-loading":d["default"]},messages:{toDetail:function(e){var t=e.value;this.$redirect("/ai/"+this.aiAppType+"/lexer/dict/detail~appId="+t)}},initData:function(){return{pageNo:1,pageSize:9,totalCount:0,isLoading:!0,dictList:[],breadItem:[{title:"词法分析定制"}]}},attached:function(){this.getData()},getData:function(){var e=this;this.$set("isLoading",!0),i.api.getLexerDictList(this.getParams()).then(function(t){e.$set("dictList",t.result),e.$set("totalCount",t.totalCount),e.$set("isLoading",!1)})},getParams:function(){return{pageNo:this.$get("pageNo"),pageSize:this.$get("pageSize")}},onPagerChange:function(e){var t=e.pageNo;this.$set("pageNo",t),this.getData()}})}),define("ai/page/lexer/dict/list/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n        <app-view>\n            <app-content>\n                <breadcrumb items="{{breadItem}}"></breadcrumb>\n                <div class="list-content dict-list-content">\n                    <h2>词法分析定制\n                        <ui-tip content="通过您提供的语料与素材干预，定制化的词法分析服务能高精度识别您所需领域内的专有名词"></ui-tip>\n                    </h2>\n                    <div>\n                        <xui-loading s-if="isLoading"/>\n                        <div s-elif="dictList.length">\n                            <div class="card-list">\n                                <card s-for="item in dictList" data="{{item}}"></card>\n                            </div>\n                            <xui-pager size="{{pageSize}}"\n                                page="{{pageNo}}"\n                                count="{{totalCount}}"\n                                back-text="<"\n                                forward-text=">"\n                                on-change="onPagerChange($event)" />\n                        </div>\n                        <div class="card-list-emtpy" s-else>\n                            <div class="app-list-no-data">\n                                <div class="no-data-helper">您还没有创建任何应用！</div>\n                                <a href="#/ai/{{aiAppType}}/app/create">马上创建></a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </app-content>\n        </app-view>\n    </div>\n'}),define("ai/page/market-buyer/address/address",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./address.tpl","san-xui","lodash","./AddressForm/index"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=(a["default"](r),a["default"](s));module.exports=o["default"]({template:l["default"],filters:{mobileMask:function(e){return e?e.slice(0,3)+"*****"+e.slice(-3):""}},components:{"xui-form":n.Form,"xui-item":n.FormItem,"address-form":u["default"]},initData:function(){return{breadItem:[{title:"地址管理"}],info:{receiver:"",address:{province:"",provinceLabel:"",city:"",cityLabel:"",area:"",areaLabel:"",street:""},post:"",mobile:"",phone:""},loading:!0,editing:!1}},computed:{addressContent:function(){var e=this.data.get("info.address");return e.provinceLabel+" "+e.cityLabel+" "+e.areaLabel+" "+e.street}},created:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.fetchAddress());case 2:case"end":return t.stop()}},null,this)},fetchAddress:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketBuyerAddressInfo());case 2:(t=a.sent)?this.$$set({info:t,loading:!1,editing:!1}):this.$$set({loading:!1,editing:!0});case 4:case"end":return a.stop()}},null,this)},save:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ref("addressForm").save());case 2:this.$toast("保存成功"),this.$reload();case 4:case"end":return t.stop()}},null,this)},toEdit:function(){this.$set("editing",!0)}})}),define("ai/page/market-buyer/address/address.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-address">\n                <h2>收货地址</h2>\n                \x3c!-- 编辑 --\x3e\n                <template s-if="!loading && editing">\n                    <address-form s-ref="addressForm" info="{{info}}" />\n                    <xui-form>\n                        <xui-item label=" ">\n                            <xui-button on-click="save" skin="primary">保存地址</xui-button>\n                        </xui-item>\n                    </xui-form>\n                </template>\n                \x3c!-- 展示 --\x3e\n                <template s-if="!loading && !editing">\n                    <xui-form>\n                        <xui-item label="收货人：">\n                            {{ info.receiver }}\n                        </xui-item>\n                        <xui-item label="收货地址：">\n                            {{ addressContent }}\n                        </xui-item>\n                        <xui-item label="手机号：">\n                            {{ info.mobile | mobileMask }}\n                        </xui-item>\n                        <xui-item label="电话：">\n                            {{ info.phone || \'-\' }}\n                        </xui-item>\n                    </xui-form>\n                    <div class="tip-content">温馨提示：地址变更仅对变更后的订单有效。已生效的订单如需变更地址请联系服务商。</div>\n                    <div><a on-click="toEdit" href="javascript:void(0)">修改信息</a></div>\n                </template>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/address/AddressForm/AddressForm",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./AddressForm.tpl","san-xui","./rules","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=n["default"](i),c=n["default"](r),p=n["default"](o),f=n["default"](u);module.exports=d["default"]({template:c["default"],components:{"xui-form":s.Form,"xui-item":s.FormItem,"xui-button":s.Button},initData:function(){return{info:{receiver:"",address:{province:"",provinceLabel:"",city:"",cityLabel:"",area:"",areaLabel:"",street:""},mobile:"",phone:""},phone:{prefix:"",content:""},select:{province:[],city:[],area:[]},errors:{},isSaveAddress:!0,type:""}},computed:{rules:function(){return p["default"](e["default"]({},this.data.get("select"),{phonePrefix:this.data.get("phone.prefix"),phoneContent:this.data.get("phone.content"),phone:this.data.get("info").phone,receiverLabel:this.data.get("receiverLabel"),isSaveAddress:this.data.get("isSaveAddress")}))},receiverLabel:function(){return this.data.get("isSaveAddress")?"invoice"===this.data.get("type")?"收件":"收货":"联系"}},created:function(){var e,a,i,n,r;return t["default"].async(function(t){for(var s=this;;)switch(t.prev=t.next){case 0:(e=this.$get("info.phone"))&&~e.indexOf("-")?(a=e.split("-"),this.$$set({"phone.prefix":a[0]||"","phone.content":a[1]||""})):this.$set("phone.content",e),this.watch("phone",function(e){var t=e.prefix+"-"+e.content;""===e.prefix&&""===e.content&&(t=""),s.$set("info.phone",t)}),this.watch("info.address.province",function(e){s.fetchSelect("city",e)}),this.watch("info.address.city",function(e){s.fetchSelect("area",e)}),this.fetchSelect("province"),i=this.$get("info.address"),n=i.province,r=i.city,n&&this.fetchSelect("city",n),r&&this.fetchSelect("area",r);case 11:case"end":return t.stop()}},null,this)},fetchSelect:function(e,a){var i,n,r;return t["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t["default"].awrap(this.ajax.getMarketBuyerAddressDatasource({key:a}));case 2:i=s.sent,this.$set("select."+e,i),n=i.map(function(e){return e.value}),r=this.$get("info.address."+e),f["default"].includes(n,r)||this.$set("info.address."+e,"");case 7:case"end":return s.stop()}},null,this)},handlePhoneChange:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(l.sleep());case 2:this.ref("form").validateFormItem("mobile");case 3:case"end":return e.stop()}},null,this)},getAddressLabel:function(){var e=this.$get("info.address"),t=e.province,a=e.city,i=e.area,n=this.$get("select"),r=n.province,s=n.city,o=n.area,l=function(e,t){var a=f["default"].find(e,function(e){return e.value===t});return a?a.text:""};return{provinceLabel:l(r,t),cityLabel:l(s,a),areaLabel:l(o,i)}},save:function(){return t["default"].async(function(e){for(var i=this;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new a["default"](function(e,a){var n,r,s,o,u;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(l.getAsyncTuple(this.ref("form").validateForm()));case 2:if(n=i.sent,!(r=n[0])){i.next=6;break}return i.abrupt("return");case 6:return s=f["default"].cloneDeep(this.$get("info")),delete s.address.provinceLabel,delete s.address.cityLabel,delete s.address.areaLabel,this.data.get("isSaveAddress")||(s.address={},s.isSaveAddress=!1),o={},i.next=14,t["default"].awrap(l.getAsyncTuple(this.ajax.saveMarketBuyerAddressInfo(s)));case 14:if(u=i.sent,r=u[0],o=u[1],!r){i.next=21;break}return a(r),r.field&&this.$set("errors",r.field),i.abrupt("return");case 21:e(o);case 22:case"end":return i.stop()}},null,i)}));case 1:case"end":return e.stop()}},null,this)}})}),define("ai/page/market-buyer/address/AddressForm/AddressForm.tpl",[],function(){return'<template>\n    <xui-form s-ref="form" formData="{{info}}" rules="{{rules}}" errors="{=errors=}" class="ai-market-address-form">\n        <xui-item name="receiver" label="{{receiverLabel}}人：">\n            <xui-textbox value="{=info.receiver=}" placeholder="请输入{{receiverLabel}}人姓名" />\n        </xui-item>\n        <template s-if="isSaveAddress">\n            <xui-item name="receiveAddress" label="{{receiverLabel}}地址：">\n                <xui-select value="{=info.address.province=}" datasource="{{select.province}}" default-label="省/直辖市" width="120" />\n                <xui-select value="{=info.address.city=}" datasource="{{select.city}}" default-label="市" width="120" />\n                <xui-select value="{=info.address.area=}" datasource="{{select.area}}" default-label="区" width="120" />\n            </xui-item>\n            <xui-item name="streetAddress" label=" ">\n                <xui-textbox value="{=info.address.street=}" width="350" height="85" limit-length="100" multiline="{{true}}" placeholder="请输入街道，最多100字" />\n            </xui-item>\n        </template>\n\n        <xui-item name="mobile" label="手机号：" help="至少填写一项联系方式">\n            <xui-textbox value="{=info.mobile=}" placeholder="请输入手机号" />\n        </xui-item>\n        <xui-item name="phone" label="电话：">\n            <xui-textbox class="ai-market-address-phone-prefix" width="50" on-input="handlePhoneChange" value="{=phone.prefix=}" />\n            <span class="ai-market-address-phone-line"></span>\n            <xui-textbox class="ai-market-address-phone" width="160" on-input="handlePhoneChange" value="{=phone.content=}" placeholder="请输入座机号码" />\n        </xui-item>\n    </xui-form>\n</template>\n'}),define("ai/page/market-buyer/address/AddressForm/index",["exports","module","./AddressForm","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/address/AddressForm/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=function(t){return new e["default"]({receiver:[{required:!0,message:"请填写"+t.receiverLabel+"人"}],receiveAddress:[{validator:function(e,a,i,n){t.isSaveAddress?!t.province.length||n.address.province?!t.city.length||n.address.city?!t.area.length||n.address.area?i():i("请选择地区"):i("请选择城市"):i("请选择省份"):i()}}],streetAddress:[{validator:function(e,a,i,n){if(t.isSaveAddress)if(n.address&&n.address.street){var r=n.address.street.trim();r.length?r.length>100?i("最多只能输入100个字符"):i():i("请填写街道地址")}else i("请填写街道地址");else i()}}],mobile:[{pattern:/^(|\d{11})$/,message:"手机号格式不正确"},{validator:function(e,a,i,n){var r=n.mobile.trim(),s=t.phone.trim();r.length||s.length?i():i("请至少填写一项联系方式")}}],phone:[{validator:function(e,a,i,n){var r=t.phonePrefix.trim(),s=t.phoneContent.trim();r.length||s.length?r.length?s.length?i():i("请填写电话座机号码"):i("请填写电话区号"):i()}}]})}}),define("ai/page/market-buyer/address/index",["exports","module","./address","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/app/manage/create/create",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./create.tpl","san-xui","ai/components/TextArea","ai/common/util","./rules","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](s),f=i["default"](l),m=i["default"](u);module.exports=d["default"]({template:c["default"],components:{"xui-form":r.Form,"xui-item":r.FormItem,"xui-select":r.Select,"xui-textarea":p["default"],"xui-table":r.Table},initData:function(){return{rules:f["default"],typeList:[],table:{schema:[{name:"apiName",label:"已购API接口"}],selectedIndex:[],datasource:[]},data:{name:"",type:null,description:"",apiList:[]}}},computed:{title:function(){return this.data.get("ifNewApp")?"创建应用":"编辑应用"},breadItem:function(){return[{title:"应用管理",url:"#/ai/"+this.data.get("aiAppType")+"/buyer/app/manage/list"},{title:this.data.get("title")}]},ifNewApp:function(){return!this.data.get("appId")},postData:function(){var e=this.data.get("data");return e=JSON.parse(JSON.stringify(e)),this.data.get("ifNewApp")||(e.appId=+this.data.get("appId")),e.apiList=e.apiList.map(function(e){return+e}),e}},created:function(){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(t["default"].all([this.getTypeList(),this.getApiList()]));case 2:if(this.$get("ifNewApp")){a.next=5;break}return a.next=5,e["default"].awrap(this.getAppDetail());case 5:case"end":return a.stop()}},null,this)},getApiList:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketBuyerApiList());case 2:t=a.sent,this.$set("table.datasource",t);case 4:case"end":return a.stop()}},null,this)},getTypeList:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketBuyerAppTypeList());case 2:t=a.sent,this.$set("typeList",t.map(function(e){var t=e.id;return{text:e.name,value:t}}));case 4:case"end":return a.stop()}},null,this)},getAppDetail:function(){var t,a,i,n,r,s,o,l,u;return e["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e["default"].awrap(this.ajax.getMarketBuyerAppDetail({appId:this.$get("appId")}));case 2:t=d.sent,a=t.name,i=t.type,n=t.description,r=t.apiInfo,s=this.$get("data"),o=this.$get("table.datasource"),l=r.map(function(e){return e.devApiId}),u=l.reduce(function(e,t,a){var i=m["default"].findIndex(o,function(e){return e.devApiId===t});return i>=0&&e.push(i+""),e},[]),this.$set("table.selectedIndex",u),this.$set("data",m["default"].assign({},s,{name:a,type:i,description:n,apiList:l}));case 13:case"end":return d.stop()}},null,this)},onTableRowSelected:function(){var t,a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e["default"].awrap(o.sleep(0));case 2:return t=this.data.get("table"),a=t.datasource,i=t.selectedIndex,i=i.map(function(e){return+e}),n=a.filter(function(e,t){return~i.indexOf(t)}).map(function(e){return e.devApiId}),this.$set("data.apiList",n),r.next=10,e["default"].awrap(o.sleep(0));case 10:this.ref("form").validateFormItem("apiList");case 11:case"end":return r.stop()}},null,this)},submit:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e["default"].awrap(o.getAsyncTuple(this.ref("form").validateForm()));case 2:if(t=n.sent,!(a=t[0])){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,e["default"].awrap(o.getAsyncTuple(this.ajax.saveMarketBuyerApp(this.$get("postData"),{"x-silent":!0})));case 8:if(i=n.sent,!(a=i[0])){n.next=13;break}return this.$errorToast(a.global),n.abrupt("return");case 13:this.$toast(this.$get("title")+"成功"),this.goToList();case 15:case"end":return n.stop()}},null,this)},goToList:function(){this.$aiRedirect("buyer/app/manage/list")}})}),define("ai/page/market-buyer/app/manage/create/create.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-manage-create">\n                <h2>{{title}}</h2>\n                <xui-form s-ref="form" rules="{{rules}}" formData="{=data=}">\n                    <xui-item name="name" label="应用名称：">\n                        <xui-textbox value="{=data.name=}" placeholder="请输入应用名称" />\n                    </xui-item>\n                    <xui-item name="type" label="应用类型：">\n                        <xui-select value="{=data.type=}" datasource="{{typeList}}" />\n                    </xui-item>\n                    <xui-item name="apiList" label="接口选择：">\n                        <div class="gray-tip">您可以为应用勾选多个接口权限，使此应用可以请求已购的接口服务</div>\n                        <div>{{table.selectIndex}}</div>\n                        <xui-table style="width:500px;"\n                            class="service-table"\n                            select="multi"\n                            schema="{{table.schema}}"\n                            datasource="{{table.datasource}}"\n                            selected-index="{=table.selectedIndex=}"\n                            on-selected-change="onTableRowSelected($event)"\n                        />\n                        <div class="gray-tip-box">\n                            <p>说明1:勾选哪些接口服务，这些服务就和这个应用进行绑定，可以通过这个应用的 API Key 和 SecretKey 来请求这些接口。</p>\n                            <p>说明2:一个应用可以绑定多个服务，一个服务可以被多个应用绑定。</p>\n                        </div>\n                    </xui-item>\n                    <xui-item name="description" label="应用描述：">\n                        <xui-textarea value="{=data.description=}" max="{{500}}" placeholder="简单描述一下您使用人工智能服务的应用场景，如开发一款美颜相机，需要检测人脸关键点，请控制在500字以内。" />\n                    </xui-item>\n                </xui-form>\n                <h2 style="margin:20px 0 0;"></h2>\n                <xui-form>\n                    <xui-item label=" ">\n                        <xui-button on-click="submit" skin="primary" width="100" size="large">{{title}}</xui-button>\n                        <xui-button on-click="goToList" width="100" size="large">取消</xui-button>\n                    </xui-item>\n                </xui-form>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/app/manage/create/index",["exports","module","./create","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/app/manage/create/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){a["default"](t);module.exports=new e["default"]({name:[{required:!0,message:"请输入应用名称"}],type:[{required:!0,message:"请选择应用类型"}],description:[{required:!0,message:"请填写应用描述"},{max:500,message:"应用描述最多500字"}],apiList:[{validator:function(e,t,a){!t||t.length<=0?a("请至少选择一个API接口"):a()}}]})}),define("ai/page/market-buyer/app/manage/detail/detail",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./detail.tpl","san-xui","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i);a["default"](s);module.exports=o["default"]({template:l["default"],components:{"xui-table":n.Table,"xui-form":n.Form,"xui-item":n.FormItem},initData:function(){return{detailTable:{schema:[{name:"name",label:"应用名称"},{name:"devAppId",label:"APPID"},{name:"ak",label:"APIKey"},{name:"sk",label:"SecretKey"},{name:"time",label:"创建时间"}],datasource:[]},apiTable:{schema:[{name:"apiName",label:"已购API接口"}],datasource:[]}}},computed:{breadItem:function(){return[{title:"应用管理",url:"#/ai/"+this.data.get("aiAppType")+"/buyer/app/manage/list"},{title:"应用详情"}]}},created:function(){this.getAppDetail()},getAppDetail:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketBuyerAppDetail({appId:this.$get("appId")}));case 2:t=a.sent,this.$$set({"detailTable.datasource":[t],"apiTable.datasource":t.apiInfo});case 4:case"end":return a.stop()}},null,this)},setSkVisible:function(e,t){this.$set("detailTable.datasource["+e+"].skVisible",t)},goToEdit:function(){this.$aiRedirect("buyer/app/manage/create",{appId:this.$get("appId")})}})}),define("ai/page/market-buyer/app/manage/detail/detail.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-manage-detail">\n                <h2>应用详情</h2>\n                <div class="section">\n                    <div style="margin: 20px 0;">\n                        <xui-button on-click="goToEdit" skin="primary" width="80">编辑</xui-button>\n                    </div>\n                    <xui-table datasource="{{detailTable.datasource}}" schema="{{detailTable.schema}}">\n                        \x3c!-- sk --\x3e\n                        <template slot="c-sk">\n                            <template s-if="row.skVisible">\n                                <span style="word-wrap: break-word;">{{row.sk}}</span>\n                                <a on-click="setSkVisible(rowIndex,false)" href="javascript:void(0)">隐藏</a>\n                            </template>\n                            <template s-else>\n                                <span>****************</span>\n                                <a on-click="setSkVisible(rowIndex,true)" href="javascript:void(0)">显示</a>\n                            </template>\n                        </template>\n                    </xui-table>\n                    <div class="section-title">可用服务列表</div>\n                    <xui-table style="width:500px;"\n                        class="service-table"\n                        schema="{{apiTable.schema}}"\n                        datasource="{{apiTable.datasource}}"\n                    />\n                    <div class="section-title">应用描述</div>\n                    <p>{{detailTable.datasource[0].description}}</p>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/app/manage/detail/index",["exports","module","./detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/app/manage/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/app/manage/list/list",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","san-xui","inf-ui/x/biz/XPager","ai/common/util"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](r);module.exports=o["default"]({template:l["default"],components:{"xui-table":n.Table,"xui-xpager":u["default"]},initData:function(){return{breadItem:[{title:"应用管理"}],table:{schema:[{name:"name",label:"应用名称"},{name:"devAppId",label:"APPID"},{name:"ak",label:"API Key"},{name:"sk",label:"SecretKey"},{name:"time",label:"创建时间"},{name:"ctrl",label:"操作"}],datasource:[]},page:{pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}}},created:function(){this.fetchCurrentPage()},handleSizeChange:function(e){var t=e.value;this.$$set({"page.pager.size":t,"page.pager.page":1}),this.fetchCurrentPage()},handlePageChange:function(e){var t=e.pageNo;this.$set("page.pager.page",t),this.fetchCurrentPage()},setSkVisible:function(e,t){this.$set("table.datasource["+e+"].skVisible",t)},goToCreate:function(){this.$aiRedirect("buyer/app/manage/create")},goToDetail:function(e){this.$aiRedirect("buyer/app/manage/detail",{appId:e})},fetchCurrentPage:function(){var t,a,i,n,r;return e["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.$get("page.pager"),a=t.page,i=t.size,o.next=5,e["default"].awrap(s.getAsyncTuple(this.ajax.getMarketBuyerAppList({page:a,pageSize:i})));case 5:n=o.sent,n[0],r=n[1],this.$$set({"page.pager.size":r.pageSize,"page.pager.page":r.page,"page.pager.count":r.total,"table.datasource":r.list});case 9:case"end":return o.stop()}},null,this)},deleteApp:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.$confirm({title:"删除提示",content:"请确定是否要删除应用"}));case 2:return a.next=4,e["default"].awrap(this.ajax.deleteMarketBuyerApp({appId:t}));case 4:return this.$toast("删除成功"),a.next=7,e["default"].awrap(this.fetchCurrentPage());case 7:case"end":return a.stop()}},null,this)}})}),define("ai/page/market-buyer/app/manage/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-manage-content">\n                <h2>应用管理</h2>\n                <div class="new-app-btn-wrap">\n                    <xui-button on-click="goToCreate" icon="plus" skin="primary" label="新建应用" data-track-id="ai-market-buyer-create-app" data-track-name="买家订单列表页-创建应用" />\n                </div>\n                <div class="manage-table-wrap">\n                    <xui-table datasource="{{table.datasource}}" schema="{{table.schema}}">\n                        \x3c!-- sk --\x3e\n                        <template slot="c-sk">\n                            <template s-if="row.skVisible">\n                                <span style="word-wrap: break-word;">{{row.sk}}</span>\n                                <a on-click="setSkVisible(rowIndex,false)" href="javascript:void(0)">隐藏</a>\n                            </template>\n                            <template s-else>\n                                <span>****************</span>\n                                <a on-click="setSkVisible(rowIndex,true)" href="javascript:void(0)">显示</a>\n                            </template>\n                        </template>\n                        \x3c!-- ctrl --\x3e\n                        <template slot="c-ctrl">\n                            <a on-click="goToDetail(row.id)" href="javascript:void(0)" style="margin-right: 10px;">管理</a>\n                            <a on-click="deleteApp(row.id)" href="javascript:void(0)">删除</a>\n                        </template>\n                        <div slot="empty" class="ui-table-body-nodata">\n                            <div>\n                                <p>\n                                    <div>您还没有创建任何应用！</div>\n                                    <a on-click="goToCreate" href="javascript:void(0)" class="create-btn" data-track-id="ai-market-buyer-create-app" data-track-name="买家订单列表页-创建应用">马上创建\b&gt;</a>\n                                </p>\n                            </div>\n                        </div>\n                    </xui-table>\n                </div>\n                <div class="pager-wrap">\n                    <xui-xpager\n                        withPagerSize="{{true}}"\n                        pager="{=page.pager=}"\n                        on-pager-size-change="handleSizeChange"\n                        on-pager-change="handlePageChange"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/business/CheckDialog/CheckDialog",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./CheckDialog.tpl","san-xui","ai/common/util","./rules"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](s);module.exports=o["default"]({template:l["default"],components:{"xui-dialog":n.Dialog,"xui-form":n.Form,"xui-item":n.FormItem,"xui-textbox":n.TextBox,"xui-button":n.Button},initData:function(){return{rules:u["default"],info:{mobile:"",verifyCode:""},verifyCodeLeft:0,errors:{},open:!1}},detached:function(){window.clearInterval(this.timer)},computed:{verifyCodeBtnDisabled:function(){return this.data.get("verifyCodeLeft")>0||!this.data.get("info.mobile").match(/^\d{11}$/)},verifyCodeBtnText:function(){var e=this.data.get("verifyCodeLeft");return e>0?e+"秒":"获取验证码"}},onCloseDialog:function(){this.$set("open",!1),this.fire("close")},sendVerifyCode:function(){var e=this;this.ajax.sendMarketVefiryCode({contactPhone:this.$get("info.mobile")}),this.$toast("发送成功"),window.clearInterval(this.timer),this.$set("verifyCodeLeft",60),this.timer=window.setInterval(function(){var t=e.$get("verifyCodeLeft");t<=0&&window.clearInterval(e.timer),e.$set("verifyCodeLeft",t-1)},1e3)},save:function(){var t,a,i,n;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=undefined,s.next=3,e["default"].awrap(r.getAsyncTuple(this.ref("checkForm").validateForm()));case 3:if(a=s.sent,!(t=a[0])){s.next=8;break}return this.jumpToError(t),s.abrupt("return");case 8:return s.next=10,e["default"].awrap(r.getAsyncTuple(this.ajax.checkMarketBuyerBusinessRelated(this.$get("info"))));case 10:if(i=s.sent,!(t=i[0])){s.next=17;break}return n=t.global?"提交失败："+t.global:"提交失败",this.$toast(n,{messageType:"error"}),t.field&&(r.jumpToError(t.field),this.$set("errors",t.field)),s.abrupt("return");case 17:this.$toast("关联成功"),this.$reload(),this.fire("confirm"),this.$set("open",!1);case 21:case"end":return s.stop()}},null,this)}})}),define("ai/page/market-buyer/business/CheckDialog/CheckDialog.tpl",[],function(){return'<template>\n    <xui-dialog title="需求查询与关联" open="{=open=}" width="600">\n        <div class="ai-market-buyer-business-check">\n            <xui-form s-ref="checkForm" formData="{{info}}" rules="{{rules}}" errors="{=errors=}">\n\n                <xui-item label="联系人手机号：" name="mobile">\n                    <xui-textbox width="384" value="{=info.mobile=}" placeholder="请输入您提交需求或咨询时预留的业务联系人手机号"></xui-textbox>\n                </xui-item>\n\n                <xui-item label="验证码：" name="verifyCode">\n                    <xui-textbox width="284" value="{=info.verifyCode=}" placeholder="请输入验证码" />\n                    <xui-button width="90" on-click="sendVerifyCode" skin="primary" disabled="{{verifyCodeBtnDisabled}}" skin="primary" style="margin-left: 10px;">{{verifyCodeBtnText}}</xui-button>\n                </xui-item>\n\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="save" skin="primary">确认</xui-button>\n            <xui-button on-click="onCloseDialog">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n    '}),define("ai/page/market-buyer/business/CheckDialog/index",["exports","module","./CheckDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/business/CheckDialog/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=new e["default"]({mobile:[{required:!0,message:"请填写联系人手机号"},{pattern:/^\d{11}$/,message:"请填写正确的联系人手机号"}],verifyCode:[{required:!0,message:"请填写验证码"}]})}),define("ai/page/market-buyer/business/DetailDialog/DetailDialog",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./DetailDialog.tpl","san-xui","ai/common/util","ai/common/enums","lodash"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](o);module.exports=l["default"]({template:u["default"],components:{"xui-dialog":n.Dialog,"xui-form":n.Form,"xui-item":n.FormItem},initData:function(){return{businessId:"",info:{providerName:"",productName:"",description:"",contactName:"",mobile:"",receiveType:[]},open:!1}},created:function(){this.fetchDetail()},fetchDetail:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e["default"].awrap(r.getAsyncTuple(this.ajax.getMarketBuyerBusinessDetail({businessId:this.$get("businessId")})));case 2:if(t=n.sent,a=t[0],i=t[1],!a){n.next=8;break}return this.$toast("获取需求详情失败",{messageType:"error"}),n.abrupt("return");case 8:d["default"].isEmpty(i)||this.$set("info",i);case 9:case"end":return n.stop()}},null,this)},computed:{receiveType:function(){return this.data.get("info.receiveType").map(function(e){return s.BusinessOrigin.getTextFromValue(e)}).join("、")}},onCloseDialog:function(){this.$set("open",!1),this.fire("close")}})}),define("ai/page/market-buyer/business/DetailDialog/DetailDialog.tpl",[],function(){return'<template>\n    <xui-dialog title="需求详情" open="{=open=}" width="500" foot="{{false}}">\n        <div class="ai-market-buyer-business-detail">\n            <xui-form>\n\n                <xui-item label="需求 ID：" name="businessId">\n                    <span>{{ businessId }}</span>\n                </xui-item>\n\n                <xui-item label="目标服务商：" name="providerName">\n                    <span>{{ info.providerName }}</span>\n                </xui-item>\n\n                <xui-item label="目标商品：" name="productName">\n                    <span>{{ info.productName }}</span>\n                </xui-item>\n\n                <xui-item label="需求描述：" name="description">\n                    <span>{{ info.description }}</span>\n                </xui-item>\n            \n                <xui-item label="业务联系人：" name="contactName">\n                    <span>{{ info.contactName }}</span>\n                </xui-item>\n\n                <xui-item label="联系方式：" name="mobile">\n                    <span>{{ info.mobile }}</span>\n                </xui-item>\n\n                <xui-item label="触达方式：" name="receiveType">\n                    <span>{{ receiveType }}</span>\n                </xui-item>\n\n            </xui-form>\n        </div>\n    </xui-dialog>\n</template>\n    '}),define("ai/page/market-buyer/business/DetailDialog/index",["exports","module","./DetailDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/business/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/business/list/list",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","lodash","san-xui","ai/common/enums","ai/common/util","../CheckDialog/index","../DetailDialog/index","../UpdateStatus/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=i["default"](a),f=i["default"](n),m=i["default"](r),h=i["default"](u),g=i["default"](d),v=i["default"](c);module.exports=p["default"]({template:f["default"],components:{"xui-table":s.Table,"xui-rangecalendar":s.RangeCalendar,"xui-toastlabel":s.Toastlabel,"xui-tip":s.Tip,"xui-clipboard":s.Clipboard,"check-dialog":h["default"],"detail-dialog":g["default"],"update-status":v["default"]},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=o.BuyerBusinessDockedStatus.fromValue(e);return t?t.color:""}},initData:function(){return{breadItem:[{title:"商机管理"}],BusinessOrigin:o.BusinessOrigin,BusinessLevel:o.BusinessLevel,BuyerBusinessDockedStatus:o.BuyerBusinessDockedStatus,ifCheckDialogOpen:!1,ifDetailDialogOpen:!1,ifUpdateStatusDialogOpen:!1,ifUpdateStatusClose:!1,subTable:{loading:!1,schema:[{name:"",label:"",width:70},{name:"providerName",label:"触达服务商"},{name:"hotNo",label:"联系方式"},{name:"source",label:"触达原因"},{name:"time",label:"触达时间"},{name:"status",label:"对接状态"},{name:"ctl",label:"操作"}],datasource:[]},table:{schema:[{name:"desc"},{name:"ctl"}],expandedIndex:[0],datasource:[]},tableExpandedIndex:[0],currBusinessId:"",currUpdateStatus:o.BuyerBusinessDockedStatus.docking,currUpdateStatusProviderId:"",list:[]}},created:function(){var e=this;this.fetchDetail(),this.watch("table.expandedIndex",function(t){var a=e.$get("table.datasource"),i={};t.forEach(function(e){var t=a[e];t&&t.businessId&&(i[t.businessId]=1)}),localStorage.setItem(o.LocalstorageKeys.AI_MARKET_BUYER_BUSINESS_LIST_STATUS,JSON.stringify(i))})},methodHook:{onAftercopy:function(){this.$toast("复制成功")},checkDetail:function(e){this.$$set({currBusinessId:e,ifDetailDialogOpen:!0})},closeDemand:function(e){var a,i,n,r=e.businessId,u=e.subDatasource;return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.some(function(e){return e.status===o.BuyerBusinessDockedStatus.complete})){e.next=4;break}return s.notification.error("您的需求已被服务商成功对接，无需关闭需求",{duration:3}),e.abrupt("return");case 4:return e.next=6,t["default"].awrap(this.$confirm({title:"关闭需求",content:"您确定要关闭需求吗？<br />关闭后该需求所有对接状态将变更为停止对接，服务商不再联系您。"}));case 6:return e.next=8,t["default"].awrap(l.getAsyncTuple(this.ajax.closeMarketBuyerBusiness({businessId:r},{"x-silent":!0})));case 8:if(a=e.sent,!(i=a[0])){e.next=14;break}return n=i.global||"操作失败",s.notification.error(n,{duration:3}),e.abrupt("return");case 14:this.$toast("关闭成功"),this.$reload();case 16:case"end":return e.stop()}},null,this)},updateStatus:function(e){var t=e.businessId,a=e.providerId,i=e.status,n=!(arguments.length<=1||arguments[1]===undefined)&&arguments[1];this.$$set({currBusinessId:t,currUpdateStatus:i,currUpdateStatusProviderId:a,ifUpdateStatusDialogOpen:!0,ifUpdateStatusClose:n})},stopDock:function(e){this.updateStatus(e,!0)},checkDemand:function(){this.$set("ifCheckDialogOpen",!0)},fetchDetail:function(){var a,i,n;return t["default"].async(function(r){for(var s=this;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(l.getAsyncTuple(this.ajax.getMarketBuyerBusinessList()));case 2:if(a=r.sent,i=a[0],n=a[1],!i){r.next=8;break}return this.$toast("获取需求列表失败",{messageType:"error"}),r.abrupt("return");case 8:m["default"].isArray(n)&&function(){var t=n.map(function(t){return{name:"business",desc:"需求描述: "+t.description,businessId:t.businessId,isClosed:t.isClosed,subDatasource:t.detail.map(function(a){return e["default"]({businessId:t.businessId,disabled:a.status===o.BuyerBusinessDockedStatus.close},a)})}});s.$set("table.datasource",t);var a=l.getOrInitStorage(o.LocalstorageKeys.AI_MARKET_BUYER_BUSINESS_LIST_STATUS,{}),i=t.map(function(e,t){return t});m["default"].isEmpty(a)||(i=t.map(function(e,t){return a[e.businessId]?t:-1}).filter(function(e){return e>-1})),s.$set("table.expandedIndex",i)}();case 9:case"end":return r.stop()}},null,this)}}})}),define("ai/page/market-buyer/business/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-market-buyer-business-list-content">\n                <h2>需求管理</h2>\n                <xui-toastlabel style="margin: 20px 0;" level="normal">\n                    温馨提示：AI市场为您智能匹配合适的服务商与商品。若下方无您已发布的需求或咨询，可通过手机号查询并进行关联与管理。\n                    <a style="margin-left: 40px;" href="javascript:void(0);" on-click="checkDemand">立即查询</a>\n                </xui-toastlabel>\n                <div class="section">\n                    <xui-table\n                        class="ai-market-buyer-business-table"\n                        datasource="{{table.datasource}}"\n                        hasSubrow="{{true}}"\n                        expandedIndex="{=table.expandedIndex=}"\n                        schema="{{table.schema}}"\n                    >\n                        <span class="ai-market-buyer-business-desc" slot="c-desc">\n                            <p title="{{row.desc}}">{{ row.desc }}</p>\n                        </span>\n                        <span class="ai-market-buyer-business-ctl" slot="c-ctl">\n                            <a on-click="checkDetail(row.businessId)" href="javascript:void(0)">查看</a>\n                            <a s-if="!row.isClosed" on-click="closeDemand(row)" href="javascript:void(0)">关闭</a>\n                        </span>\n\n                        <div slot="sub-business" class="subrow-content-row">\n                            <xui-table class="ai-market-buyer-business-sub-table" loading="{{subTable.loading}}" schema="{{subTable.schema}}" datasource="{{row.subDatasource}}">\n                                <span slot="h-ctl">\n                                    <span>操作</span>\n                                    <xui-tip message="当服务商无法满足您的需求时，可点击“终止对接”，服务商将不会与您联系。" position="tc" width="200" />\n                                </span>\n                                <span class="provider-name" slot="c-providerName">\n                                    <a href="{{Url.store.provider + \'/\' + row.providerInstance}}" target="_blank">{{ row.providerName }}</a>\n                                </span>\n                                <span slot="c-hotNo">\n                                    <span>{{ row.hotNo }}</span>\n                                    <xui-clipboard class="hot-no-clipboard" on-aftercopy="onAftercopy" text="{{row.hotNo}}" ariaLabel=""><xui-icon name="copy" /></xui-clipboard>\n                                </span>\n                                <span slot="c-source">\n                                    {{ row.source | getLabelByValue(BusinessOrigin) }}\n                                </span>\n                                <span class="ai-market-buyer-business-docking-status {{ row.status | getStatuColor }}" slot="c-status">\n                                    <span>{{ row.status | getLabelByValue(BuyerBusinessDockedStatus) }}</span>\n                                    <a s-if="!row.disabled" class="update-status" on-click="updateStatus(row)" href="javascript:void(0)">反馈</a>\n                                </span>\n                                <span slot="c-ctl">\n                                    <span s-if="row.disabled" class="stop-dock-diabled">终止对接</span>\n                                    <a s-else on-click="stopDock(row)" href="javascript:void(0)">终止对接</a>\n                                </span>\n        \n                                <div class="ui-table-body-nodata" slot="empty">\n                                    此需求AI市场专家正在火速为您匹配合适服务商，请您耐心等待\n                                </div>\n                            </xui-table>\n                        </div>\n\n                        <div class="ui-table-body-nodata" slot="empty">\n                            <div class="store-no-data">\n                                <div>暂无需求</div>\n                                <a href="{{ Url.store.home }}" target="_blank">去发布&gt;</a>\n                            </div>\n                        </div>\n                    </xui-table>\n                </div>\n            </div>\n\n            <check-dialog s-if="ifCheckDialogOpen" open="{=ifCheckDialogOpen=}" />\n            <detail-dialog s-if="ifDetailDialogOpen" open="{=ifDetailDialogOpen=}" businessId="{{currBusinessId}}" />\n            <update-status\n                s-if="ifUpdateStatusDialogOpen"\n                open="{=ifUpdateStatusDialogOpen=}"\n                providerId="{{currUpdateStatusProviderId}}"\n                businessId="{{currBusinessId}}"\n                status="{{currUpdateStatus}}"\n                statusDisabled="{{ifUpdateStatusClose}}" />\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/business/UpdateStatus/index",["exports","module","./UpdateStatus","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/business/UpdateStatus/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){var i=a["default"](t);module.exports=function(t){return new e["default"]({detail:[{validator:function(e,a,n){t.ifDocking&&i["default"].isEmpty(i["default"].trim(a))?n("请填写详情"):n()}}],price:[{validator:function(e,a,n){t.ifComplete&&t.ifOfflineTrade&&i["default"].isEmpty(t.price)?n("请输入订单金额"):n()}}],orderId:[{validator:function(e,a,n){t.ifComplete&&t.ifDeal&&!t.ifOfflineTrade&&i["default"].isEmpty(i["default"].trim(a))?n("请填写订单号"):n()}}]})}}),define("ai/page/market-buyer/business/UpdateStatus/UpdateStatus",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./UpdateStatus.tpl","san-xui","ai/components/ImageUploader2","ai/components/NoValueChangeWrapper","ai/common/util","ai/common/enums","./rules","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=i["default"](a),f=i["default"](n),m=i["default"](s),h=i["default"](o),g=i["default"](d),v=i["default"](c);module.exports=p["default"]({template:f["default"],components:{"xui-dialog":r.Dialog,"xui-select":r.Select,"xui-form":r.Form,"xui-item":r.FormItem,"xui-textbox":r.TextBox,"xui-radiobox":r.RadioBox,"xui-boxgroup":r.BoxGroup,"xui-button":r.Button,"image-uploader2":m["default"],"no-value-change-wrapper":h["default"]},initData:function(){var e=this;return{BusinessTradeType:u.BusinessTradeType,BuyerBusinessDockedStatus:u.BuyerBusinessDockedStatus,BuyerBusinessDockingFailureReason:u.BuyerBusinessDockingFailureReason,BusinessTradeTypeList:u.BusinessTradeType.toArray(),BuyerBusinessDockedStatusList:u.BuyerBusinessDockedStatus.toArray(),BuyerBusinessDockingFailureReasonList:u.BuyerBusinessDockingFailureReason.toArray(),dealList:[{text:"是",value:!0},{text:"否",value:!1}],uploadUrl:"/api/ai/market/common/fileUpload",statusDisabled:!1,providerId:"",businessId:"",status:u.BuyerBusinessDockedStatus.docking,businessDetail:{detail:"",deal:!0,tradeType:u.BusinessTradeType.ONLINE,orderId:"",price:"",certificate:"",certificateUrl:"",remark:"",closeReason:u.BuyerBusinessDockingFailureReason.mismatch,closeRemark:"",reason:""},handleCertificateBefore:function(e,t,a){v["default"].extend(t,{fileType:e.file.ext})},handleCertificateSuccess:function(t){t&&t.objectId?(e.$$set({"businessDetail.certificate":t.objectId,"businessDetail.certificateUrl":t.fileLink}),e.$set("certificateChanged",!0)):e.$$set({"businessDetail.certificate":"","businessDetail.certificateUrl":""})},errors:{},certificateChanged:!1,open:!1}},created:function(){this.$get("statusDisabled")&&this.$set("status",u.BuyerBusinessDockedStatus.close)},computed:{rules:function(){return g["default"]({price:this.data.get("businessDetail.price"),ifDocking:this.data.get("ifDocking"),ifClose:this.data.get("ifClose"),ifComplete:this.data.get("ifComplete"),ifDeal:this.data.get("ifDeal"),ifOfflineTrade:this.data.get("ifOfflineTrade")})},ifDeal:function(){return this.data.get("businessDetail.deal")},ifOfflineTrade:function(){return this.data.get("ifDeal")&&this.data.get("businessDetail.tradeType")===u.BusinessTradeType.OFFLINE},ifNotDocked:function(){return this.data.get("status")===u.BuyerBusinessDockedStatus.not_docked},ifDocking:function(){return this.data.get("status")===u.BuyerBusinessDockedStatus.docking},ifClose:function(){return this.data.get("status")===u.BuyerBusinessDockedStatus.close},ifComplete:function(){return this.data.get("status")===u.BuyerBusinessDockedStatus.complete}},onCloseDialog:function(){this.$set("open",!1),this.fire("close")},methodHook:{handleCertificateImageUrlChange:function(e){e?this.$set("errors",null):this.$$set({"businessDetail.certificate":"","businessDetail.certificateUrl":""})}},changeTradeType:function(e){this.$set("businessDetail.tradeType",e),e===u.BusinessTradeType.ONLINE&&this.$set("errors.price",null)},save:function(){var a,i,n,r,s,o,u,d,c,p;return e["default"].async(function(f){for(var m=this;;)switch(f.prev=f.next){case 0:return a=undefined,i={providerId:this.$get("providerId"),businessId:this.$get("businessId"),status:this.$get("status"),businessDetail:{}},n=this.$get("ifComplete")&&this.$get("ifDeal"),r=this.$get("ifComplete")&&!this.$get("ifDeal"),s=n&&!this.$get("ifOfflineTrade"),o=this.$get("ifComplete")&&this.$get("ifOfflineTrade"),u={detail:this.$get("ifDocking"),deal:this.$get("ifComplete"),tradeType:n,orderId:s,price:o,certificate:o,remark:o||r,closeReason:this.$get("ifClose"),closeRemark:this.$get("ifClose")},t["default"](u).filter(function(e){return u[e]}).forEach(function(e){var t=m.$get("businessDetail");t[e]!==undefined&&(i.businessDetail[e]=t[e])}),f.next=11,e["default"].awrap(l.getAsyncTuple(this.ref("statusForm").validateForm()));case 11:if(d=f.sent,!(a=d[0])){f.next=16;break}return this.jumpToError(a),f.abrupt("return");case 16:return f.next=18,e["default"].awrap(l.getAsyncTuple(this.ajax.updateMarketBuyerBusinessStatus(i)));case 18:if(c=f.sent,!(a=c[0])){f.next=25;break}return p=a.global?"提交失败："+a.global:"提交失败",this.$toast(p,{messageType:"error"}),a.field&&(l.jumpToError(a.field),this.$set("errors",a.field)),f.abrupt("return");case 25:this.$toast("保存成功"),this.$reload(),this.fire("confirm"),this.$set("open",!1);case 29:case"end":return f.stop()}},null,this)}})}),define("ai/page/market-buyer/business/UpdateStatus/UpdateStatus.tpl",[],function(){return'<template>\n    <xui-dialog title="更新商机状态" open="{=open=}" width="500">\n        <div class="ai-market-business-update-status">\n            <xui-form s-ref="statusForm" rules="{{rules}}" errors="{{errors}}">\n                \x3c!-- 对接状态 --\x3e\n                <xui-item label="对接状态：" name="status">\n                    <xui-select width="90" disabled="{{statusDisabled}}" datasource="{{BuyerBusinessDockedStatusList}}" value="{=status=}" />\n                    <p s-if="ifComplete" style="color: #999;font-size: 12px;">记录成交结果，有利于为您提供保障，减少交易风险。</p>\n                </xui-item>\n\n                \x3c!-- 对接详情 --\x3e\n                <xui-item s-if="ifDocking" label="对接详情：" name="detail">\n                    <xui-textbox multiline="{{true}}" width="370" height="120" limit-length="{{500}}" value="{=businessDetail.detail=}" placeholder="描述对接的情况，有助于AI市场提供支持。"></xui-textbox>\n                </xui-item>\n\n                <template s-if="ifClose">\n                    \x3c!-- 关闭原因 --\x3e\n                    <xui-item label="关闭原因" name="closeReason">\n                        <xui-select datasource="{{BuyerBusinessDockingFailureReasonList}}" value="{=businessDetail.closeReason=}" />\n                    </xui-item>\n                    \x3c!-- 备注 --\x3e\n                    <xui-item label="备注：" name="closeRemark">\n                        <xui-textbox multiline="{{true}}" width="370" height="120" limit-length="{{500}}" value="{=businessDetail.closeRemark=}" placeholder="AI市场会根据您的反馈，优化商机推荐策略，为您提供更加合适的商家。"></xui-textbox>\n                    </xui-item>\n                </template>\n\n                <template s-if="ifComplete">\n                    \x3c!-- 是否成交 --\x3e\n                    <xui-item label="是否成交：" name="deal">\n                        <xui-boxgroup box-type="radio" datasource="{{dealList}}" value="{=businessDetail.deal=}" />\n                    </xui-item>\n                    \x3c!-- 交易方式 --\x3e\n                    <xui-item label="交易方式：" name="price" s-if="ifDeal">\n                        <template s-for="item, index in BusinessTradeTypeList">\n                            <no-value-change-wrapper>\n                                <xui-radiobox style="margin-left: {{index === 0 ? \'0\' : \'30px\'}}" checked="{{businessDetail.tradeType === item.value}}" name="tradeType" title="{{item.text}}" on-change="changeTradeType(item.value)"></xui-radiobox>\n                            </no-value-change-wrapper>\n                            <xui-textbox style="margin-left: 10px;" s-if="item.value === BusinessTradeType.OFFLINE" placeholder="请输入订单金额" type="number" width="100" value="{=businessDetail.price=}"></xui-textbox>\n                            <span s-if="item.value === BusinessTradeType.OFFLINE">元</span>\n                        </template>                        \n                    </xui-item>\n                    \x3c!-- 关联订单号 --\x3e\n                    <xui-item label="关联订单号：" name="orderId" s-if="ifDeal && !ifOfflineTrade">\n                        <xui-textbox width="370" value="{=businessDetail.orderId=}" placeholder="请输入正确的订单号"></xui-textbox>\n                    </xui-item>\n                    \x3c!-- 底单凭证 --\x3e\n                    <xui-item label="底单凭证：" name="certificate" s-if="ifOfflineTrade">\n                        <image-uploader2 before="{{handleCertificateBefore}}" success="{{handleCertificateSuccess}}" url="{{uploadUrl}}" img-url="{{businessDetail.certificateUrl}}" on-change="handleCertificateImageUrlChange" size-limit="{{10*1024*1024}}" />\n                    </xui-item>\n                    \x3c!-- 备注 --\x3e\n                    <xui-item label="备注：" name="remark" s-if="ifOfflineTrade || !ifDeal">\n                        <xui-textbox multiline="{{true}}" width="370" height="78" limit-length="{{500}}" value="{=businessDetail.remark=}"></xui-textbox>\n                    </xui-item>\n                </template>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="save" skin="primary">确认</xui-button>\n            <xui-button on-click="onCloseDialog">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n    '}),define("ai/page/market-buyer/index",["exports","module","ai/common/basePage","babel-runtime/helpers/interop-require-default","ai/common/util"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=function(e){return n["default"].mixin(e,{}),i["default"](e)}}),define("ai/page/market-buyer/invoice/address/address",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./address.tpl","san-xui","ai/page/market-buyer/address/AddressForm/index","ai/common/util","ai/common/enums","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](r),p=a["default"](l);module.exports=u["default"]({template:d["default"],filters:{mobileMask:function(e){return e?e.slice(0,3)+"*****"+e.slice(-3):""}},components:{"xui-form":n.Form,"xui-item":n.FormItem,"xui-boxgroup":n.BoxGroup,"xui-button":n.Button,"address-form":c["default"]},initData:function(){var e={receiver:"",address:{province:"",provinceLabel:"",city:"",cityLabel:"",area:"",areaLabel:"",street:""},mobile:"",phone:""};return{breadItem:[{title:"发票寄送地址"}],orderId:"",initInfo:e,info:e,originalAddressInfo:{},type:o.InvoiceAddressType.ORIGINAL,typeDatasource:o.InvoiceAddressType.toArray(),errors:{},loading:!0,editing:!1,empty:!1}},computed:{ifEdit:function(){return!this.data.get("loading")&&this.data.get("editing")},ifShow:function(){return!this.data.get("loading")&&!this.data.get("editing")&&!this.data.get("empty")},ifEmpty:function(){return!this.data.get("loading")&&this.data.get("empty")&&!this.data.get("editing")},ifShowType:function(){return this.data.get("ifEdit")&&this.data.get("ifHasOriginalAddress")},ifHasOriginalAddress:function(){return!p["default"].isEmpty(this.data.get("originalAddressInfo"))},ifOtherType:function(){return this.data.get("type")===o.InvoiceAddressType.OTHER},ifShowAddressForm:function(){return this.data.get("ifEdit")&&(!this.data.get("ifHasOriginalAddress")||this.data.get("ifOtherType"))},ifShowAddressInfo:function(){return this.data.get("ifShow")||this.data.get("ifEdit")&&this.data.get("ifHasOriginalAddress")&&!this.data.get("ifOtherType")},addressContent:function(){var e=this.data.get("info.address");return e.provinceLabel+" "+e.cityLabel+" "+e.areaLabel+" "+e.street}},inited:function(){var t=this;window.onbeforeunload=function(e){t.$get("ifEdit")&&(e.returnValue="离开此页后，所填写的内容将不会保存\n确认要离开当前页面吗？")},this.sidebar.aiJumpHook=function(a){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$get("ifEdit")){t.next=3;break}return t.next=3,e["default"].awrap(this.$confirm({title:"提示",width:500,content:"<p>离开此页后，所填写的内容将不会保存</p><p>确认要离开当前页面吗？</p>",needFoot:!0}));case 3:a();case 4:case"end":return t.stop()}},null,t)}},created:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.fetchInvoiceAddressInfo());case 2:this.$get("orderId")&&this.toEdit();case 3:case"end":return t.stop()}},null,this)},attached:function(){return e["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:this.watch("type",function(e){var a=p["default"].cloneDeep(t.$get("initInfo"));e===o.InvoiceAddressType.ORIGINAL&&(a=p["default"].cloneDeep(t.$get("originalAddressInfo"))),t.$set("info",a)});case 1:case"end":return e.stop()}},null,this)},detached:function(){window.onbeforeunload=null},fetchInvoiceAddressInfo:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.getMarketBuyerInvoiceAddressInfo());case 2:if(!(t=i.sent)){i.next=6;break}return this.$$set({info:t,loading:!1,empty:!1}),i.abrupt("return");case 6:return i.next=8,e["default"].awrap(this.ajax.getMarketBuyerAddressInfo());case 8:if(!(a=i.sent)){i.next=12;break}return this.$$set({info:p["default"].cloneDeep(a),originalAddressInfo:p["default"].cloneDeep(a),editing:!0,loading:!1}),i.abrupt("return");case 12:this.$set("loading",!1);case 13:case"end":return i.stop()}},null,this)},toEdit:function(){this.$set("editing",!0)},save:function(){var t,a,i,n,r,o;return e["default"].async(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=undefined,!this.$get("ifShowAddressForm")){l.next=9;break}return l.next=4,e["default"].awrap(s.getAsyncTuple(this.ref("addressForm").ref("form").validateForm()));case 4:if(a=l.sent,!(t=a[0])){l.next=9;break}return s.jumpToError(t),l.abrupt("return");case 9:return i=p["default"].cloneDeep(this.$get("info")),delete i.address.provinceLabel,delete i.address.cityLabel,delete i.address.areaLabel,l.next=15,e["default"].awrap(s.getAsyncTuple(this.ajax.saveMarketBuyerInvoiceAddressInfo(i)));case 15:if(n=l.sent,!(t=n[0])){l.next=22;break}return r=t.global?"提交失败："+t.global:"提交失败",this.$toast(r,{messageType:"error"}),t.field&&(s.jumpToError(t.field),this.$set("errors",t.field)),l.abrupt("return");case 22:this.$toast("保存成功"),(o=this.$get("orderId"))?this.$aiRedirect("buyer/invoice/apply/confirm",{orderId:o}):this.$reload();case 25:case"end":return l.stop()}},null,this)}})}),define("ai/page/market-buyer/invoice/address/address.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n        <app-view>\n            <app-sidebar />\n            <app-content>\n                <breadcrumb items="{{breadItem}}"></breadcrumb>\n                <div class="list-content market-buyer-invoice-address">\n                    <h2>发票寄送地址</h2>\n\n                    <xui-form s-if="ifShowType">\n                        <xui-item label="发票寄送信息：" name="type">\n                            <xui-boxgroup box-type="radio" value="{=type=}" datasource="{{typeDatasource}}" />\n                        </xui-item>\n                    </xui-form>\n\n                    <address-form type="invoice" s-if="ifShowAddressForm" s-ref="addressForm" info="{=info=}" />\n\n                    <xui-form s-if="ifShowAddressInfo">\n                        <xui-item label="收取人：">\n                            {{ info.receiver }}\n                        </xui-item>\n                        <xui-item label="收取地址：">\n                            {{ addressContent }}\n                        </xui-item>\n                        <xui-item label="手机号：">\n                            {{ info.mobile | mobileMask }}\n                        </xui-item>\n                        <xui-item label="电话：">\n                            {{ info.phone || \'-\' }}\n                        </xui-item>\n                    </xui-form>\n\n                    <xui-form s-if="ifEdit">\n                        <xui-item label=" ">\n                            <xui-button on-click="save" skin="primary" size="large">保存</xui-button>\n                        </xui-item>\n                    </xui-form>\n\n                    <template s-if="ifShow">\n                        <div class="modify-button"><a on-click="toEdit" href="javascript:void(0)">修改信息</a></div>\n                        <div class="tip-content">温馨提示：地址变更仅对变更后的发票申请有效，已申请的发票如需更换地址请联系服务商或删除重新申请。</div>\n                    </template>\n\n                    \x3c!-- 无数据 --\x3e\n                    <div class="invoice-address-page-emtpy" s-if="ifEmpty">\n                        <div class="invoice-address-no-data">\n                            <div class="no-data-helper">发票寄送地址</div>\n                            <a href="javascript:void(0)" on-click="toEdit">马上添加></a>\n                        </div>\n                    </div>\n                </div>\n            </app-content>\n        </app-view>\n    </div>\n    '}),define("ai/page/market-buyer/invoice/address/index",["exports","module","./address","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/invoice/address/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){var i=a["default"](t);module.exports=function(t){return new e["default"]({invoiceTitle:[{validator:function(e,a,n){if(i["default"].isEmpty(i["default"].trim(a))){n(t.ifPerson?"请填写个人名称":"请填写公司名称")}else n()}}],taxNum:[{validator:function(e,a,n){t.ifPerson?n():i["default"].isEmpty(i["default"].trim(a))?n("请填写纳税人识别号"):i["default"].trim(a).length<15?n("纳税人识别号不小于15位"):/^[0-9a-zA-Z]+$/.test(i["default"].trim(a))?n():n("纳税人识别号只包含数字或字母")}}],registerAddress:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写公司地址"):n()}}],registerPhone:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写公司电话"):n()}}],bankName:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写开户银行"):n()}}],bankAccount:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写银行账号"):n()}}]})}}),define("ai/page/market-buyer/invoice/applyList/confirm/index",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","lodash","ai/common/enums","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](r);module.exports=l["default"]({template:u["default"],components:{"xui-toastlabel":n.Toastlabel},filters:{getTextByName:function(e,t){var a=d["default"].find(t,function(t){return t.value===e});return a?a.text:""}},initData:function(){return{InvoiceTitleTypeList:s.InvoiceTitleType.toArray(),InvoiceTypeList:s.InvoiceTypeForInfo.toArray(),orderId:"",info:{}}},computed:{breadItem:function(){return[{title:"开具发票",url:"#/ai/market/buyer/invoice/applyList"},{title:"信息确认"}]},receiptAddress:function(){try{var e=this.data.get("info.receiptAddress");return[e.provinceLabel,e.cityLabel,e.areaLabel,e.street].join(" ").trim()}catch(t){return"-"}},ifTaxDedutibility:function(){return this.data.get("info.invoiceType")===s.InvoiceTypeForInfo.TAX_DEDUCTIBLE},ifPerson:function(){return this.data.get("info.invoiceTitleType")===s.InvoiceTitleType.PERSON}},created:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketBuyerInvoiceApplyInfo({orderId:this.$get("orderId")}));case 2:(t=a.sent).validInvoiceInfo?this.$set("info",t):this.$aiRedirect("buyer/invoice/info~orderId="+this.$get("orderId")+"&productInvoiceType="+t.productInvoiceType);case 4:case"end":return a.stop()}},null,this)},confirm:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(o.getAsyncTuple(this.ajax.applyMarketBuyerInvoice({orderId:this.$get("orderId")})));case 2:t=a.sent,t[0]?this.$toast("提交失败"):(this.$toast("提交成功"),this.$aiRedirect("buyer/invoice/list"));case 5:case"end":return a.stop()}},null,this)}})}),define("ai/page/market-buyer/invoice/applyList/confirm/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-invoice-confirm-content">\n                <h2>信息确认</h2>\n                <xui-toastlabel class="invoice-confirm-toast-label" level="alert">\n                    温馨提示：请仔细核对以下信息，若信息有误将影响发票的正常开具流程。                \n                </xui-toastlabel>\n                \x3c!-- 订单信息 --\x3e\n                <div class="section">\n                    <h3 class="section-title">订单信息</h3>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">发票金额：</td>\n                                <td>{{info.orderPrice}}元</td>\n                                <td class="info-table-title">商品名称：</td>\n                                <td>{{info.productName}}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">订单号：</td>\n                                <td>{{info.orderId}}</td>\n                                <td class="info-table-title">服务商名称：</td>\n                                <td>{{info.providerName}}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- 发票信息 --\x3e\n                <div class="section">\n                    <h3 class="section-title">发票信息</h3><a class="modify-btn" href="#/ai/market/buyer/invoice/info~orderId={{info.orderId}}&productInvoiceType={{info.productInvoiceType}}">修改</a>\n                    <table class="info-table">\n                        <tbody s-if="ifTaxDedutibility">\n                            <tr>\n                                <td class="info-table-title">发票类型：</td>\n                                <td>{{ info.invoiceType | getTextByName(InvoiceTypeList) }} </td>\n                                <td class="info-table-title">公司地址：</td>\n                                <td>{{ info.registerAddress }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">发票抬头类型：</td>\n                                <td>{{ info.invoiceTitleType | getTextByName(InvoiceTitleTypeList) }} </td>\n                                <td class="info-table-title">公司电话：</td>\n                                <td>{{ info.registerPhone }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">公司名称：</td>\n                                <td>{{ info.invoiceTitle }} </td>\n                                <td class="info-table-title">开户银行：</td>\n                                <td>{{ info.bankName }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">税号：</td>\n                                <td>{{ info.taxNum }} </td>\n                                <td class="info-table-title">银行账户：</td>\n                                <td>{{ info.bankAccount }}</td>\n                            </tr>\n                        </tbody>\n\n                        <tbody s-else-if="ifPerson">\n                            <tr>\n                                <td class="info-table-title">发票类型：</td>\n                                <td>{{ info.invoiceType | getTextByName(InvoiceTypeList) }} </td>\n                                <td class="info-table-title">发票抬头：</td>\n                                <td>{{ info.invoiceTitle }} </td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">发票抬头类型：</td>\n                                <td>{{ info.invoiceTitleType | getTextByName(InvoiceTitleTypeList) }} </td>\n                            </tr>\n                        </tbody>\n\n                        <tbody s-else>\n                            <tr>\n                                <td class="info-table-title">发票类型：</td>\n                                <td>{{ info.invoiceType | getTextByName(InvoiceTypeList) }} </td>\n                                <td class="info-table-title">公司名称：</td>\n                                <td>{{ info.invoiceTitle }} </td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">发票抬头类型：</td>\n                                <td>{{ info.invoiceTitleType | getTextByName(InvoiceTitleTypeList) }} </td>\n                                <td class="info-table-title">税号：</td>\n                                <td>{{ info.taxNum }} </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- 发票寄送信息 --\x3e\n                <div class="section">\n                    <h3 class="section-title">发票寄送信息</h3><a class="modify-btn" href="#/ai/market/buyer/invoice/address~orderId={{info.orderId}}">修改</a>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">收取人：</td>\n                                <td>{{ info.receiver }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">收取地址：</td>\n                                <td>{{ receiptAddress || \'-\' }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">手机号：</td>\n                                <td>{{ info.receiptMobile }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">电话：</td>\n                                <td>{{ info.receiptPhone }}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <xui-button class="confirm-btn" size="large" skin="primary" on-click="confirm">确认开票</xui-button>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/invoice/applyList/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/invoice/applyList/list/list",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","lodash","san-xui","inf-ui/x/biz/XPager","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](n),c=a["default"](s);module.exports=l["default"]({template:u["default"],components:{"xui-table":r.Table,"xui-xpager":c["default"]},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=o.MarketProductOrderStatus.fromValue(e);return t?t.color:""}},initData:function(){return{breadItem:[{title:"开具发票"}],MarketProductOrderStatus:o.MarketProductOrderStatus,table:{loading:!1,schema:[{name:"orderId",label:"订单号",width:250},{name:"productName",label:"商品名称"},{name:"providerName",label:"服务商名称"},{name:"packageName",label:"规格"},{name:"orderPrice",label:"发票金额"},{name:"orderTime",label:"下单时间"},{name:"orderStatus",label:"订单状态"},{name:"ctl",label:"操作"}],datasource:[]},pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}},created:function(){return e["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchCurrentPage();case 1:case"end":return e.stop()}},null,this)},fetchCurrentPage:d["default"].debounce(function(){var t,a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.$get("pager"),a=t.page,i=t.size,this.$set("table.loading",!0),r.next=6,e["default"].awrap(this.ajax.getMarketBuyerInvoiceApplyList({page:a,pageSize:i}));case 6:n=r.sent,this.$$set({"table.loading":!1,"pager.page":n.page,"pager.size":n.pageSize,"pager.count":n.total,"table.datasource":n.items});case 8:case"end":return r.stop()}},null,this)},50),onPageSizeChange:function(e){var t=e.value;this.$set("pager.size",t),this.$set("pager.page",1),this.fetchCurrentPage()},onPageChange:function(e){var t=e.pageNo;this.$set("pager.page",t),this.fetchCurrentPage()},toInvoice:function(e){this.$redirect("#/ai/market/buyer/invoice/apply/confirm~orderId="+e)}})}),define("ai/page/market-buyer/invoice/applyList/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-market-order-list-content">\n                <h2>开具发票</h2>\n                <xui-toastlabel class="invoice-order-toast-label" level="alert">\n                    <ul>\n                        <span>温馨提示：</span>\n                        <li>1、您的发票将由第三方服务商开具，如遇到纠纷，请向AI市场<a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>投诉（工单类型：人工智能-AI市场）；</li>\n                        <li>2、您提出开票要求后，市场会向相应的服务商发送通知，服务商收到后会根据您的信息寄送发票；</li>\n                        <li>3、AI市场只支持纸质发票，单次申请开票金额小于￥50，需您承担运费（运费到付），使用优惠券免减的金额不支持开票。</li>\n                    </ul>                    \n                </xui-toastlabel>\n                <div class="section">\n                    <xui-table loading="{{table.loading}}" schema="{{table.schema}}" datasource="{{table.datasource}}">\n                        <span style="display: inline-block;" slot="c-orderId">\n                            <a href="#/ai/market/buyer/order/detail~orderId={{row.orderId}}">{{ row.orderId }}</a>\n                        </span>\n                        <span style="display: inline-block;" slot="c-orderPrice">\n                            {{ row.orderPrice }}元\n                        </span>\n                        <span class="ai-market-order-status {{ row.orderStatus | getStatuColor }}" slot="c-orderStatus">\n                            {{ row.orderStatus | getLabelByValue(MarketProductOrderStatus) }}\n                        </span>\n                        \x3c!-- ctrl --\x3e\n                        <div class="ctl-wrap" slot="c-ctl">\n                            <a href="javascript:void(0);" on-click="toInvoice(row.orderId)" style="margin-right: 10px;">我要开票</a>\n                        </div>\n                    </xui-table>\n\n                    <div class="pager-wrap">\n                        <xui-xpager\n                            withPagerSize="{{true}}"\n                            pager="{{pager}}"\n                            on-pager-size-change="onPageSizeChange"\n                            on-pager-change="onPageChange"\n                        />\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/invoice/info/index",["exports","module","./info","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/invoice/info/info",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./info.tpl","san-xui","ai/common/util","ai/common/enums","./rules","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](l),f=i["default"](u);module.exports=d["default"]({template:c["default"],filters:{getTextByName:function(e,t){var a={invoiceTypeList:this.$get("InvoiceTypeList"),invoiceTitleTypeList:this.$get("InvoiceTitleTypeList")}[t+"List"];if(!a)return e;var i=f["default"].find(a,function(t){return t.value===e});return i?i.text:""}},components:{"xui-form":r.Form,"xui-item":r.FormItem,"xui-boxgroup":r.BoxGroup,"xui-radiobox":r.RadioBox,"xui-button":r.Button},initData:function(){var t,a,i,n,r={InvoiceTypeList:o.InvoiceTypeForInfo.toArray(),InvoiceTitleTypeList:o.InvoiceTitleType.toArray()};return e["default"]({breadItem:[{title:"发票信息管理"}],InvoiceTitleType:o.InvoiceTitleType,InvoiceTypeForInfo:o.InvoiceTypeForInfo},r,{orderId:"",productInvoiceType:"",info:{invoiceType:o.InvoiceTypeForInfo.TAX_DEDUCTIBLE,invoiceTitleType:o.InvoiceTitleType.COMPANY,invoiceTitle:"",taxNum:"",registerAddress:"",registerPhone:"",bankName:"",bankAccount:""},errors:{},loading:!0,editing:!1,empty:!1,formConfig:(a={},a[o.InvoiceTypeForInfo.TAX_DEDUCTIBLE]=["invoiceType","invoiceTitleType","invoiceTitle","taxNum","registerAddress","registerPhone","bankName","bankAccount"],a[o.InvoiceTypeForInfo.NON_TAX_DEDUCTIBLE]=(t={},t[o.InvoiceTitleType.PERSON]=["invoiceType","invoiceTitleType","invoiceTitle"],t[o.InvoiceTitleType.COMPANY]=["invoiceType","invoiceTitleType","invoiceTitle","taxNum"],t),a),formItems:[{name:"invoiceType",normal:{name:"invoiceType",label:"发票类型：",com:"boxgroup",datasource:r.InvoiceTypeList},fromApplyInfo:{name:"invoiceType",label:"发票类型：",com:"radiobox",value:o.InvoiceTypeForInfo.TAX_DEDUCTIBLE,title:o.InvoiceTypeForInfo.getTextFromValue("TAX_DEDUCTIBLE")}},(i={name:"invoiceTitleType"},i[o.InvoiceTypeForInfo.TAX_DEDUCTIBLE]={name:"invoiceTitleType",label:"发票抬头类型：",com:"radiobox",value:o.InvoiceTitleType.COMPANY,title:o.InvoiceTitleType.getTextFromValue("COMPANY")},i[o.InvoiceTypeForInfo.NON_TAX_DEDUCTIBLE]={name:"invoiceTitleType",label:"发票抬头类型：",com:"boxgroup",datasource:r.InvoiceTitleTypeList},i),(n={name:"invoiceTitle"},n[o.InvoiceTitleType.PERSON]={name:"invoiceTitle",label:"发票抬头：",placeholder:"请填写个人名称"},n[o.InvoiceTitleType.COMPANY]={name:"invoiceTitle",label:"公司名称：",placeholder:"请填写公司名称"},n),{name:"taxNum",label:"税号：",placeholder:"请填写纳税人识别号"},{name:"registerAddress",label:"公司地址：",placeholder:"请填写公司公司地址"},{name:"registerPhone",label:"公司电话：",placeholder:"请填写公司公司电话"},{name:"bankName",label:"开户银行：",placeholder:"请填写开户银行"},{name:"bankAccount",label:"银行账号：",placeholder:"请填写银行账号"}]})},computed:{rules:function(){return p["default"]({ifTaxDedutibility:this.data.get("ifTaxDedutibility"),ifPerson:this.data.get("ifPerson")})},ifEdit:function(){return!this.data.get("loading")&&this.data.get("editing")},ifShow:function(){return!this.data.get("loading")&&!this.data.get("editing")&&!this.data.get("empty")},ifEmpty:function(){return!this.data.get("loading")&&this.data.get("empty")&&!this.data.get("editing")},ifTaxDedutibility:function(){return this.data.get("info.invoiceType")===o.InvoiceTypeForInfo.TAX_DEDUCTIBLE},ifPerson:function(){return this.data.get("info.invoiceTitleType")===o.InvoiceTitleType.PERSON},renderData:function(){var e="normal",t=this.data.get("productInvoiceType");t&&t!==o.InvoiceType.BOTH&&(e="fromApplyInfo");var a=this.data.get("info.invoiceType"),i=this.data.get("info.invoiceTitleType"),n={};this.data.get("formItems").forEach(function(e){n[e.name]=e});var r=this.data.get("formConfig");return(r[a][i]||r[a]).map(function(t){return n[t][e]||n[t][a]||n[t][i]||n[t]})}},inited:function(){var e=this;window.onbeforeunload=function(t){e.$get("ifEdit")&&(t.returnValue="离开此页后，所填写的内容将不会保存\n确认要离开当前页面吗？")},this.sidebar.aiJumpHook=function(a){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$get("ifEdit")){e.next=3;break}return e.next=3,t["default"].awrap(this.$confirm({title:"提示",width:500,content:"<p>离开此页后，所填写的内容将不会保存</p><p>确认要离开当前页面吗？</p>",needFoot:!0}));case 3:a();case 4:case"end":return e.stop()}},null,e)}},created:function(){var a,i,n,r;return t["default"].async(function(s){for(var l=this;;)switch(s.prev=s.next){case 0:return this.watch("info.invoiceType",function(e){e===o.InvoiceTypeForInfo.TAX_DEDUCTIBLE&&l.$set("info.invoiceTitleType",o.InvoiceTitleType.COMPANY)}),a=function(){l.watch("info.invoiceTitleType",function(e){l.$$set({errors:{},"info.invoiceTitle":"","info.taxNum":"","info.registerAddress":"","info.registerPhone":"","info.bankName":"","info.bankAccount":""})})},s.next=4,t["default"].awrap(this.fetchInvoiceInfo());case 4:if(this.$get("orderId")){s.next=7;break}return a(),s.abrupt("return");case 7:i={loading:!1,editing:!0},(n=this.$get("productInvoiceType"))&&n!==o.InvoiceType.BOTH&&(i=e["default"]({},i,(r={},r["info.invoiceType"]=n,r["formItems[0].fromApplyInfo"]={name:"invoiceType",label:"发票类型：",com:"radiobox",value:o.InvoiceTypeForInfo[n],title:o.InvoiceTypeForInfo.getTextFromValue(n)},r))),this.$$set(i),a();case 12:case"end":return s.stop()}},null,this)},detached:function(){window.onbeforeunload=null},fetchInvoiceInfo:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketBuyerInvoiceInfo());case 2:e=a.sent,f["default"].isEmpty(e)?this.$$set({loading:!1,empty:!0}):this.$$set({info:e,loading:!1,empty:!1});case 4:case"end":return a.stop()}},null,this)},toEdit:function(){this.$set("editing",!0)},save:function(){var e,a,i,n,r,o,l,u,d,c;return t["default"].async(function(p){for(;;)switch(p.prev=p.next){case 0:return e=undefined,p.next=3,t["default"].awrap(s.getAsyncTuple(this.ref("invoiceInfoForm").validateForm()));case 3:if(a=p.sent,!(e=a[0])){p.next=8;break}return s.jumpToError(e),p.abrupt("return");case 8:return i=this.$get("info"),n=this.data.get("formConfig"),r=i.invoiceType,o=i.invoiceTitleType,l=n[r][o]||n[r],u={},l.forEach(function(e){u[e]=i[e]}),p.next=17,t["default"].awrap(s.getAsyncTuple(this.ajax.saveMarketBuyerInvoiceInfo(u)));case 17:if(d=p.sent,!(e=d[0])){p.next=24;break}return c=e.global?"提交失败："+e.global:"提交失败",this.$toast(c,{messageType:"error"}),e.field&&(s.jumpToError(e.field),this.$set("errors",e.field)),p.abrupt("return");case 24:this.$toast("保存成功"),this.$get("orderId")?this.$redirect("#/ai/market/buyer/invoice/apply/confirm~orderId="+this.$get("orderId")):this.$reload();case 26:case"end":return p.stop()}},null,this)}})}),define("ai/page/market-buyer/invoice/info/info.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n        <app-view>\n            <app-sidebar />\n            <app-content>\n                <breadcrumb items="{{breadItem}}"></breadcrumb>\n                <div class="list-content market-buyer-invoice-info">\n                    <h2>发票信息管理</h2>\n\n                    <xui-form s-if="ifEdit || ifShow" s-ref="invoiceInfoForm" rules="{{rules}}" formData="{{info}}" errors="{{errors}}">\n\n                        <xui-item s-for="item in renderData" label="{{item.label}}" name="{{item.name}}">\n\n                            \x3c!-- 编辑 --\x3e\n                            <template s-if="ifEdit">\n                                <xui-boxgroup s-if="item.com === \'boxgroup\'" box-type="radio" value="{=info[item.name]=}" datasource="{{item.datasource}}" />\n\n                                <xui-radiobox s-if="item.com === \'radiobox\'" checked="{{true}}" disabled="{{true}}" value="{{item.value}}" title="{{item.title}}" />\n    \n                                <xui-textbox s-if="!item.com" placeholder="{{item.placeholder}}" width="242" type="text" value="{=info[item.name]=}"/>\n                            </template>\n                            \n                            \x3c!-- 展示 --\x3e\n                            <template s-if="ifShow">\n                                <span>{{ info[item.name] | getTextByName(item.name) }}</span>\n                            </template>\n\n                        </xui-item>\n\n                        <xui-item label=" ">\n                            <xui-button s-if="ifEdit" on-click="save" skin="primary" size="large">保存</xui-button>\n                            <xui-button s-if="ifShow" on-click="toEdit" skin="primary" size="large">修改</xui-button>\n                        </xui-item>\n                    </xui-form>\n\n                    \x3c!-- 无数据 --\x3e\n                    <div class="invoice-info-page-emtpy" s-if="ifEmpty">\n                        <div class="invoice-info-no-data">\n                            <div class="no-data-helper">还没有添加发票信息</div>\n                            <a href="javascript:void(0)" on-click="toEdit">马上添加></a>\n                        </div>\n                    </div>\n                </div>\n            </app-content>\n        </app-view>\n    </div>\n    '}),define("ai/page/market-buyer/invoice/info/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){var i=a["default"](t);module.exports=function(t){return new e["default"]({invoiceTitle:[{validator:function(e,a,n){if(i["default"].isEmpty(i["default"].trim(a))){n(t.ifPerson?"请填写个人名称":"请填写公司名称")}else n()}}],taxNum:[{validator:function(e,a,n){t.ifPerson?n():i["default"].isEmpty(i["default"].trim(a))?n("请填写纳税人识别号"):i["default"].trim(a).length<15?n("纳税人识别号不小于15位"):/^[0-9a-zA-Z]+$/.test(i["default"].trim(a))?n():n("纳税人识别号只包含数字或字母")}}],registerAddress:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写公司地址"):n()}}],registerPhone:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写公司电话"):n()}}],bankName:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写开户银行"):n()}}],bankAccount:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写银行账号"):n()}}]})}}),define("ai/page/market-buyer/invoice/list/detail/detail",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./detail.tpl","ai/common/enums","san-xui","moment"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](s);module.exports=o["default"]({template:l["default"],components:{"xui-toastlabel":r.Toastlabel},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=n.MarketInvoiceStatus.fromValue(e);return t?t.color:""},formatTime:function(e){return u["default"](e).format("YYYY年MM月DD日")}},initData:function(){return{MarketInvoiceStatus:n.MarketInvoiceStatus,InvoiceTitleType:n.InvoiceTitleType,InvoiceTypeForInfo:n.InvoiceTypeForInfo,orderId:"",info:{},deliverySchema:[{name:"expressName",label:"快递公司"},{name:"expressNum",label:"快递单号"},{name:"remark",label:"备注"}]}},computed:{breadItem:function(){return[{title:"发票列表",url:"#/ai/market/buyer/invoice/list"},{title:"发票详情"}]},receiptAddress:function(){try{var e=this.data.get("info.receiptAddress");return[e.provinceLabel,e.cityLabel,e.areaLabel,e.street].join(" ").trim()}catch(t){return"-"}},deliveryDatasource:function(){var e=this.data.get("info.invoiceDelivery");return e?[e]:[]},ifTaxDedutibility:function(){return this.data.get("info.invoiceType")===n.InvoiceTypeForInfo.TAX_DEDUCTIBLE},ifPerson:function(){return this.data.get("info.invoiceTitleType")===n.InvoiceTitleType.PERSON}},created:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketBuyerInvoiceDetail({orderId:this.$get("orderId")}));case 2:t=a.sent,this.$set("info",t);case 4:case"end":return a.stop()}},null,this)}})}),define("ai/page/market-buyer/invoice/list/detail/detail.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-invoice-confirm-content">\n                <h2>发票信息</h2>\n                \x3c!-- 发票信息 --\x3e\n                <xui-toastlabel style="margin-top: 10px;" level="alert" s-if="info.invoiceStatus === MarketInvoiceStatus.DELAY_INVOICE && info.delayTime">\n                    延迟开票说明：服务商预计开票时间为{{ info.delayTime | formatTime }}，原因：{{ info.delayReason }}\n                </xui-toastlabel>\n                <xui-toastlabel style="margin-top: 10px;" level="alert" s-if="info.invoiceStatus === MarketInvoiceStatus.APPLY">\n                    暂无快递信息，请耐心等待服务商寄送发票；若长时间未更新，请联系服务商。\n                </xui-toastlabel>\n                <div class="section">\n                    <h3 class="section-title">发票信息</h3>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">发票金额：</td>\n                                <td>{{info.orderPrice}}元</td>\n                                <td class="info-table-title">开票状态：</td>\n                                <td>\n                                    <span class="ai-market-order-status {{ info.invoiceStatus | getStatuColor }}">{{info.invoiceStatus | getLabelByValue(MarketInvoiceStatus) }}</span>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">申请发票时间：</td>\n                                <td>{{info.applyTime}}</td>\n                                <td class="info-table-title">发票类型：</td>\n                                <td>{{info.invoiceType | getLabelByValue(InvoiceTypeForInfo)}}</td>\n                            </tr>\n\n                            <template s-if="ifTaxDedutibility">\n                                <tr>\n                                    <td class="info-table-title">发票抬头类型：</td>\n                                    <td>{{info.invoiceTitleType | getLabelByValue(InvoiceTitleType)}}</td>\n                                    <td class="info-table-title">公司名称：</td>\n                                    <td>{{info.invoiceTitle}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">公司地址：</td>\n                                    <td>{{info.registerAddress}}</td>\n                                    <td class="info-table-title">公司电话：</td>\n                                    <td>{{info.registerPhone}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">税号：</td>\n                                    <td>{{info.taxNum}}</td>\n                                    <td class="info-table-title">开户银行：</td>\n                                    <td>{{info.bankName}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">银行账户：</td>\n                                    <td>{{info.bankAccount}}</td>\n                                </tr>\n                            </template>\n\n                            <template s-else-if="ifPerson">\n                                <tr>\n                                    <td class="info-table-title">发票抬头类型：</td>\n                                    <td>{{info.invoiceTitleType | getLabelByValue(InvoiceTitleType)}}</td>\n                                    <td class="info-table-title">发票抬头：</td>\n                                    <td>{{info.invoiceTitle}}</td>\n                                </tr>\n                            </template>\n\n                            <template s-else>\n                                <tr>\n                                    <td class="info-table-title">发票抬头类型：</td>\n                                    <td>{{info.invoiceTitleType | getLabelByValue(InvoiceTitleType)}}</td>\n                                    <td class="info-table-title">公司名称：</td>\n                                    <td>{{info.invoiceTitle}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">税号：</td>\n                                    <td>{{info.taxNum}}</td>\n                                </tr>\n                            </template>\n                            \n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- 发票寄送信息 --\x3e\n                <div class="section">\n                    <h3 class="section-title">发票寄送信息</h3>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">收取人：</td>\n                                <td>{{ info.receiver }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">收取地址：</td>\n                                <td>{{ receiptAddress || \'-\' }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">手机号：</td>\n                                <td>{{ info.receiptMobile }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">电话：</td>\n                                <td>{{ info.receiptPhone || \'-\' }}</td>\n                            </tr>\n                            <tr s-if="info.invoiceStatus === MarketInvoiceStatus.HAS_INVOICED || info.invoiceStatus === MarketInvoiceStatus.COMPLETE">\n                                <td class="info-table-title">快递信息：</td>\n                                <td>\n                                    <xui-table schema="{{deliverySchema}}" datasource="{{deliveryDatasource}}">\n                                    </xui-table>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- 订单信息 --\x3e\n                <div class="section">\n                    <h3 class="section-title">订单信息</h3>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">订单金额：</td>\n                                <td>{{ info.orderPrice }}元</td>\n                                <td class="info-table-title">商品名称：</td>\n                                <td>{{ info.productName }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">订单号：</td>\n                                <td>{{ info.orderId }}</td>\n                                <td class="info-table-title">服务商名称：</td>\n                                <td>{{ info.providerName }}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/invoice/list/detail/index",["exports","module","./detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/invoice/list/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/invoice/list/list/list",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","moment","lodash","san-xui","inf-ui/x/biz/XPager","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](n),p=a["default"](r),f=a["default"](o);module.exports=u["default"]({template:d["default"],components:{"xui-table":s.Table,"xui-xpager":f["default"]},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=l.MarketInvoiceStatus.fromValue(e);return t?t.color:""},formatTime:function(e){return c["default"](e).format("YY年MM月DD日")}},initData:function(){return{breadItem:[{title:"发票列表"}],MarketInvoiceStatus:l.MarketInvoiceStatus,InvoiceTypeForInfo:l.InvoiceTypeForInfo,table:{loading:!1,schema:[{name:"productName",label:"所购商品"},{name:"invoiceType",label:"发票类型"},{name:"invoiceTitle",label:"发票抬头"},{name:"orderPrice",label:"发票金额"},{name:"applyTime",label:"申请发票时间"},{name:"invoiceStatus",label:"状态"},{name:"remark",label:"备注"},{name:"ctl",label:"操作",width:"150"}],datasource:[]},pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}},created:function(){return e["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchCurrentPage();case 1:case"end":return e.stop()}},null,this)},fetchCurrentPage:p["default"].debounce(function(){var t,a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.$get("pager"),a=t.page,i=t.size,this.$set("table.loading",!0),r.next=6,e["default"].awrap(this.ajax.getMarketBuyerInvoiceList({page:a,pageSize:i}));case 6:n=r.sent,this.$$set({"table.loading":!1,"pager.page":n.page,"pager.size":n.pageSize,"pager.count":n.total,"table.datasource":n.items});case 8:case"end":return r.stop()}},null,this)},50),onPageSizeChange:function(e){var t=e.value;this.$set("pager.size",t),this.$set("pager.page",1),this.fetchCurrentPage()},onPageChange:function(e){var t=e.pageNo;this.$set("pager.page",t),this.fetchCurrentPage()},toMarketProductPage:function(e){var t=e.productUuid,a=this.$get("Url").store.product+"/"+t;window.open(a)},toInvoice:function(e){this.$redirect("#/ai/market/buyer/invoice/apply/confirm~orderId="+e)},confirm:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.$confirm({title:"提示",content:'<p style="font-size: 12px;">确认您已收到发票并核对无误？</p>'}));case 2:return a.next=4,e["default"].awrap(this.ajax.confirmMarketBuyerInvoice({orderId:t}));case 4:this.$reload();case 5:case"end":return a.stop()}},null,this)},cancel:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.$confirm({title:"取消开票提示",width:"520",content:'<p style="font-size: 12px;line-height: 17px;">取消后当前列表中将不再显示，若需要发票需在【开具发票】中重新索取；<br />\n                确认要取消开票吗？</p>'}));case 2:return a.next=4,e["default"].awrap(this.ajax.cancelMarketBuyerInvoice({orderId:t}));case 4:this.$reload();case 5:case"end":return a.stop()}},null,this)}})}),define("ai/page/market-buyer/invoice/list/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-market-order-list-content">\n                <h2>发票列表</h2>\n                <div class="section">\n                    <xui-table loading="{{table.loading}}" schema="{{table.schema}}" datasource="{{table.datasource}}">\n                        <span style="display: inline-block;" slot="c-productName">\n                            <a href="javascript:void(0);" on-click="toMarketProductPage(row)">{{ row.productName }}</a>\n                        </span>\n                        <span style="display: inline-block;" slot="c-invoiceType">\n                            {{ row.invoiceType | getLabelByValue(InvoiceTypeForInfo) }}\n                        </span>\n                        <span style="display: inline-block;" slot="c-orderPrice">\n                            {{ row.orderPrice }}元\n                        </span>\n                        <span class="ai-market-order-status {{ row.invoiceStatus | getStatuColor }}" slot="c-invoiceStatus">\n                            {{ row.invoiceStatus | getLabelByValue(MarketInvoiceStatus) }}\n                        </span>\n                        <span style="display: inline-block;" slot="c-remark">\n                            <template s-if="row.invoiceStatus === MarketInvoiceStatus.DELAY_INVOICE && row.delayTime">\n                                <span style="vertical-align:middle;">开票延时至：{{ row.delayTime | formatTime }}</span>\n                                <xui-tip message="{{ row.delayReason }}" position="bc" />\n                            </template>\n                            <span s-else>-</span>\n                        </span>\n                        \x3c!-- ctrl --\x3e\n                        <div class="ctl-wrap" slot="c-ctl">\n                            <a href="javascript:void(0);" s-if="row.invoiceStatus === MarketInvoiceStatus.HAS_INVOICED" on-click="confirm(row.orderId)">\n                                确认收到\n                                <span style="color: #3F3F3F;">({{ row.autoConfirmTime }})</span>\n                            </a>\n                            <a href="javascript:void(0);" s-if="row.invoiceStatus === MarketInvoiceStatus.APPLY || row.invoiceStatus === MarketInvoiceStatus.DELAY_INVOICE" on-click="cancel(row.orderId)">取消开票</a>\n                            <a href="#/ai/market/buyer/invoice/list/detail~orderId={{row.orderId}}">查看</a>\n                        </div>\n                    </xui-table>\n\n                    <div class="pager-wrap">\n                        <xui-xpager\n                            withPagerSize="{{true}}"\n                            pager="{{pager}}"\n                            on-pager-size-change="onPageSizeChange"\n                            on-pager-change="onPageChange"\n                        />\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/order/confirm/AddressInfo/AddressInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./AddressInfo.tpl","san-xui","ai/common/util","ai/common/enums","ai/components/ComplexBoxGroup/index","../InvoiceDialog/index","ai/page/market-buyer/address/AddressForm/index","./rules","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){var f=i["default"](a),m=i["default"](n),h=i["default"](l),g=i["default"](u),v=i["default"](d),x=i["default"](c),b=i["default"](p),y=o.LocalstorageKeys.AI_MARKET_ORDER_DATA_CACHE;module.exports=f["default"]({template:m["default"],components:{"address-form":v["default"],"xui-form":r.Form,"xui-item":r.FormItem,"xui-toastlabel":r.Toastlabel,"xui-checkbox":r.Checkbox,"xui-boxgroup":r.BoxGroup,"complex-box-group":h["default"],"invoice-dialog":g["default"]},filters:{mobileMask:function(e){return e?e.slice(0,3)+"*****"+e.slice(-3):""},getTextByName:function(e,t){if(!t)return e;var a=b["default"].find(t,function(t){return t.value===e});return a?a.text:""}},initData:function(){return{errors:{},open:!0,info:{receiver:"",address:{province:"",provinceLabel:"",city:"",cityLabel:"",area:"",areaLabel:"",street:""},post:"",mobile:"",phone:"",remark:"",productInstance:"",packageInstance:"",purchaseNum:""},InvoiceTypeList:o.InvoiceTypeForInfo.toArray(),InvoiceTitleTypeList:o.InvoiceTitleType.toArray(),invoiceInfo:{id:0,invoiceType:o.InvoiceTypeForInfo.TAX_DEDUCTIBLE,invoiceTitleType:o.InvoiceTitleType.COMPANY,invoiceTitle:"",taxNum:"",registerAddress:"",registerPhone:"",bankName:"",bankAccount:""},invoiceAddressInfo:{id:0,receiver:"",address:{province:"",provinceLabel:"",city:"",cityLabel:"",area:"",areaLabel:"",street:""},mobile:"",phone:""},ifInvoiceAddressInfoOpen:!1,EInvoiceGetTime:o.EInvoiceGetTime,invoiceDatasource:o.EInvoiceGetTime.toArray(),invoiceGetTime:"",sameWithGood:!0,couponCode:"",couponValue:"",hasCheckedCoupon:!1,loading:!0,productInstance:"",packageInstance:"",purchaseNum:"",deliveryTypeInfo:[],showCouponCode:!1}},computed:{rules:function(){return x["default"]({invoiceInfo:this.data.get("invoiceInfo"),invoiceGetTime:this.data.get("invoiceGetTime")})},invoiceAddressContent:function(){var e=this.data.get("invoiceAddressInfo.address");return e.provinceLabel+" "+e.cityLabel+" "+e.areaLabel+" "+e.street},ifTaxDedutibility:function(){return this.data.get("invoiceInfo.invoiceType")===o.InvoiceTypeForInfo.TAX_DEDUCTIBLE},ifPerson:function(){return this.data.get("invoiceInfo.invoiceTitleType")===o.InvoiceTitleType.PERSON},ifHardwareDelivery:function(){return b["default"].includes(this.data.get("deliveryTypeInfo"),o.StoreDeliveryType.HARDWARE)}},created:function(){return t["default"].async(function(e){for(var a=this;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.fetchDeliveryTypeInfo());case 2:this.fetchAddress(),this.$get("ifHardwareDelivery")||this.$set("sameWithGood",!1),this.fetchInvoiceInfo(),this.fetchInvoiceAddressInfo(),this.watch("invoiceGetTime",function(e){e!==o.EInvoiceGetTime.immediate||a.$get("invoiceInfo.invoiceTitle")||a.modifyInvoicInfo()});case 7:case"end":return e.stop()}},null,this)},fetchDeliveryTypeInfo:function(){var e,a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(s.getAsyncTuple(this.ajax.getMarketBuyerGetDeliveryType({productInstance:this.$get("productInstance"),packageInstance:this.$get("packageInstance")})));case 2:if(e=n.sent,a=e[0],i=e[1],!a){n.next=8;break}return this.$toast("获取交付信息失败",{messageType:"error"}),n.abrupt("return");case 8:b["default"].isEmpty(i.deliveryType)||this.$set("deliveryTypeInfo",i.deliveryType);case 9:case"end":return n.stop()}},null,this)},fetchInvoiceInfo:function(){var e,a,i;return t["default"].async(function(n){for(var r=this;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(s.getAsyncTuple(this.ajax.getMarketBuyerInvoiceInfo()));case 2:if(e=n.sent,a=e[0],i=e[1],!a){n.next=8;break}return this.$toast("获取发票信息失败",{messageType:"error"}),n.abrupt("return");case 8:b["default"].isEmpty(i)||(this.$set("invoiceInfo",i),this.nextTick(function(){return r.ref("extraForm").validateFormItem("invoice")}));case 9:case"end":return n.stop()}},null,this)},fetchInvoiceAddressInfo:function(){var e,a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(s.getAsyncTuple(this.ajax.getMarketBuyerInvoiceAddressInfo()));case 2:if(e=n.sent,a=e[0],i=e[1],!a){n.next=8;break}return this.$toast("获取发票寄送信息失败",{messageType:"error"}),n.abrupt("return");case 8:b["default"].isEmpty(i)||this.$$set({sameWithGood:!1,invoiceAddressInfo:i});case 9:case"end":return n.stop()}},null,this)},fetchAddress:function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.getMarketBuyerAddressInfo());case 2:(e=i.sent)?(this.$$set({info:e,loading:!1}),a=s.getOrInitStorage(y,{}),!e.remark&&a.remark&&this.$set("info.remark",a.remark)):this.$$set({loading:!1});case 4:case"end":return i.stop()}},null,this)},modifyInvoicInfo:function(){this.$set("ifInvoiceAddressInfoOpen",!0)},modifyConponCode:function(){this.$set("hasCheckedCoupon",!1)},exchangeConponCode:function(){var e,a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(s.getAsyncTuple(this.ajax.checkMarketBuyerCoupon({productInstance:this.$get("productInstance"),packageInstance:this.$get("packageInstance"),purchaseNum:this.$get("purchaseNum"),couponCode:this.$get("couponCode")},{"x-silent":!0})));case 2:if(e=n.sent,a=e[0],i=e[1],this.$set("errors.couponCode",null),!a){n.next=9;break}return this.$$set({couponValue:"",hasCheckedCoupon:!1,"errors.couponCode":a.global}),n.abrupt("return");case 9:this.$$set({couponValue:i.couponValue,hasCheckedCoupon:!0});case 10:case"end":return n.stop()}},null,this)},getInvoiceInfoId:function(e){var t=e.invoiceInfoId,a=t===undefined?0:t,i=e.invoiceAddressId,n=i===undefined?0:i;a&&this.fetchInvoiceInfo(),n&&this.fetchInvoiceAddressInfo()},submit:function(){var a,i,n,r,l,u;return t["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t["default"].awrap(s.getAsyncTuple(this.ref("extraForm").validateForm()));case 2:if(a=d.sent,!(i=a[0])){d.next=7;break}return s.jumpToError(i),d.abrupt("return");case 7:if(!this.$get("showCouponCode")||!this.$get("couponCode")){d.next=12;break}return d.next=10,t["default"].awrap(this.exchangeConponCode());case 10:if(!this.$get("errors.couponCode")){d.next=12;break}return d.abrupt("return");case 12:return this.$$set({"info.productInstance":this.$get("productInstance"),"info.packageInstance":this.$get("packageInstance"),"info.purchaseNum":this.$get("purchaseNum")}),d.next=15,t["default"].awrap(this.ref("addressForm").save());case 15:n=d.sent,r={invoiceInfoId:0,invoiceAddressId:0},this.$get("invoiceGetTime")===o.EInvoiceGetTime.immediate&&(l=this.$get("invoiceAddressInfo.id")||0,this.$get("sameWithGood")&&(l=n&&n.id||0),r={invoiceInfoId:this.$get("invoiceInfo.id")||0,invoiceAddressId:l}),this.$get("info.remark")&&(u=s.getOrInitStorage(y,{}),localStorage.setItem(y,JSON.stringify(e["default"]({},u,{remark:this.$get("info.remark")})))),this.fire("submit",e["default"]({remark:this.$get("info.remark"),couponCode:this.$get("showCouponCode")?this.$get("couponCode"):""},r)),this.$toast("保存成功");case 21:case"end":return d.stop()}},null,this)}})}),define("ai/page/market-buyer/order/confirm/AddressInfo/AddressInfo.tpl",[],function(){return'<template>\n    <div class="market-buyer-address-info">\n        <xui-toastlabel level="normal" class="address-tip" >\n            <span>温馨提示：1、请仔细核对信息；2、发票由服务商为您开具。</span>\n        </xui-toastlabel>\n\n        <template>\n            \x3c!-- 硬件交付 --\x3e\n            <template s-if="ifHardwareDelivery">\n                <div class="module-title address-title">收货信息</div>\n                <address-form s-ref="addressForm" s-if="!loading" info="{=info=}" />\n            </template>\n            \x3c!-- 非硬件交付 --\x3e\n            <template s-else>\n                <div class="module-title address-title">联系人信息</div>\n                <address-form s-ref="addressForm" s-if="!loading" isSaveAddress="{{false}}" info="{=info=}" />\n            </template>\n\n            <xui-form s-ref="extraForm" errors="{=errors=}" rules="{{rules}}" class="ai-market-address-extra-form">\n\n                <div class="module-title invoice-title">发票信息</div>\n                <xui-item name="invoice" label=" ">\n                    <complex-box-group box-type="radio" datasource="{{invoiceDatasource}}" value="{=invoiceGetTime=}">\n                        <template slot="com" s-if="itemData.value === EInvoiceGetTime.later">\n                            <span>（可稍后在<a target="_blank" href="#/ai/market/buyer/invoice/applyList">发票管理</a>中填写开票信息及收票地址）</span>\n                        </template>\n                    </complex-box-group>\n                </xui-item>\n\n                <xui-item label=" ">\n                    <div class="invoice-info-board" s-if="invoiceGetTime === EInvoiceGetTime.immediate">\n                        <div>\n                            <span class="invoice-info-title">开票信息</span>\n                            <a class="modify-invoice-info" href="javascript:void(0);" on-click="modifyInvoicInfo">修改信息</a>\n                        </div>\n                        <table class="info-table">\n                            <tbody s-if="ifTaxDedutibility">\n                                <tr>\n                                    <td class="info-table-title">发票类型：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceType | getTextByName(InvoiceTypeList) }}</td>\n                                    <td class="info-table-title">注册地址：</td>\n                                    <td colspan="3">{{ invoiceInfo.registerAddress }}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">发票抬头类型：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceTitleType | getTextByName(InvoiceTitleTypeList) }}</td>\n                                    <td class="info-table-title">注册电话：</td>\n                                    <td colspan="3">{{ invoiceInfo.registerPhone }}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">公司名称：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceTitle }}</td>\n                                    <td class="info-table-title">开户银行：</td>\n                                    <td colspan="3">{{ invoiceInfo.bankName }}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">税号：</td>\n                                    <td colspan="3">{{ invoiceInfo.taxNum }}</td>\n                                    <td class="info-table-title">银行账户：</td>\n                                    <td colspan="3">{{ invoiceInfo.bankAccount }}</td>\n                                </tr>\n                            </tbody>\n\n                            <tbody s-else-if="ifPerson">\n                                <tr>\n                                    <td class="info-table-title">发票类型：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceType | getTextByName(InvoiceTypeList) }}</td>\n                                    <td class="info-table-title">发票抬头：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceTitle }}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">发票抬头类型：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceTitleType | getTextByName(InvoiceTitleTypeList) }}</td>\n                                </tr>\n                            </tbody>\n\n                            <tbody s-else>\n                                <tr>\n                                    <td class="info-table-title">发票类型：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceType | getTextByName(InvoiceTypeList) }}</td>\n                                    <td class="info-table-title">公司名称：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceTitle }}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">发票抬头类型：</td>\n                                    <td colspan="3">{{ invoiceInfo.invoiceTitleType | getTextByName(InvoiceTitleTypeList) }}</td>\n                                    <td class="info-table-title">税号：</td>\n                                    <td colspan="3">{{ invoiceInfo.taxNum }}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n\n                        <template>\n                            <span class="invoice-info-title invoice-address-title">发票寄送信息</span>\n                            <table class="info-table">\n                                <tbody s-if="sameWithGood">\n                                    <tr>\n                                        <td>同收货信息</td>\n                                    </tr>\n                                </tbody>\n                                <tbody s-else>\n                                    <tr>\n                                        <td class="info-table-title">收件人：</td>\n                                        <td colspan="7">{{ invoiceAddressInfo.receiver }}</td>\n                                    </tr>\n                                    <tr>\n                                        <td class="info-table-title">收件地址：</td>\n                                        <td colspan="7">{{ invoiceAddressContent }}</td>\n                                    </tr>\n                                    <tr>\n                                        <td class="info-table-title">手机号：</td>\n                                        <td colspan="7">{{ invoiceAddressInfo.mobile | mobileMask }}</td>\n                                    </tr>\n                                    <tr>\n                                        <td class="info-table-title">电话：</td>\n                                        <td colspan="7">{{ invoiceAddressInfo.phone || \'-\' }}</td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </template>\n                    </div>\n                </xui-item>\n\n                <div class="module-title other-title">其他</div>\n                <xui-item name="remark" label="订单备注：">\n                    <xui-textbox multiline="{{true}}" width="350" height="85" limit-length="30" value="{=info.remark=}" placeholder="选填，请先和商家协商一致" />\n                </xui-item>\n\n                <xui-item label=" ">\n                    <xui-checkbox checked="{=showCouponCode=}" title="优惠券码" />\n                </xui-item>\n\n                <xui-item s-if="showCouponCode" name="couponCode" label=" ">\n                    <xui-textbox class="coupon-code-input" disabled="{{ hasCheckedCoupon }}" value="{=couponCode=}" placeholder="请输入优惠券码并点击兑换，获得优惠" />\n                    <xui-button s-if="!hasCheckedCoupon" skin="primary" on-click="exchangeConponCode">兑换</xui-button>\n                    <a s-else href="javascript:void(0)" on-click="modifyConponCode">更换券码</a>\n                </xui-item>\n                <xui-item s-if="showCouponCode && hasCheckedCoupon" name="couponValue" label=" ">\n                    <div class="coupon-value-wrapper">\n                        <span class="coupon-value">￥{{ couponValue }}</span>\n                        <span class="coupon-value-label">使用优惠券1张，优惠{{ couponValue }}元</span>\n                    </div>\n                </xui-item>\n            </xui-form>\n            <div class="split-line"></div>\n            <div class="submit-wrap">\n                <xui-button width="68" on-click="submit" skin="primary">下一步</xui-button>\n            </div>\n        </template>\n        <invoice-dialog\n            s-if="ifInvoiceAddressInfoOpen"\n            open="{=ifInvoiceAddressInfoOpen=}"\n            on-success="getInvoiceInfoId"\n            ifHardwareDelivery="{{ifHardwareDelivery}}"\n            sameWithGood="{=sameWithGood=}"\n            invoiceInfo="{{invoiceInfo}}"\n            invoiceAddressInfo="{{invoiceAddressInfo}}" />\n    </div>\n</template>\n'}),define("ai/page/market-buyer/order/confirm/AddressInfo/index",["exports","module","./AddressInfo","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/confirm/AddressInfo/rules",["exports","module","async-validator","ai/common/enums"],function(exports,module,e,t){module.exports=function(a){return new e["default"]({invoice:[{validator:function(e,i,n){a.invoiceGetTime!==t.EInvoiceGetTime.immediate||a.invoiceInfo.invoiceTitle?n():n("发票信息不完整")}}]})}}),define("ai/page/market-buyer/order/confirm/confirm",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./confirm.tpl","inf-ria/app/brpc","./AddressInfo/index","san-xui","ai/common/util","saber-cookie"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](r),f=i["default"](s),m=i["default"](u);module.exports=d["default"]({components:{"address-info":f["default"],"view-step":o.ViewStep},template:c["default"],initData:function(){return{step:0,steps:[{text:"填写信息"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],productInstance:"",packageInstance:"",purchaseNum:"",couponCode:""}},computed:{stepTitle:function(){return 0===this.data.get("step")?"填写信息":"订单确认页"}},jumpToStep:function(e){var t=e.index;this.$set("step",t)},invokeConfirm:function(a){var i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(this.ajax.checkMarketBuyerOrder({productInstance:this.$get("productInstance"),packageInstance:this.$get("packageInstance"),purchaseNum:this.$get("purchaseNum"),couponCode:a.couponCode,invoiceInfoId:a.invoiceInfoId,invoiceAddressId:a.invoiceAddressId}));case 2:return i=n.sent,this.$set("step",1),n.next=6,t["default"].awrap(l.sleep());case 6:this.invokeOrder(e["default"]({},a,i));case 7:case"end":return n.stop()}},null,this)},invokeOrder:function(e){var t=e.productInstance,a=e.productName,i=e.packageInstance,n=e.packageName,r=e.packagePrice,s=e.price,o=e.couponCode,l=e.remark,u=e.invoiceInfoId,d=e.invoiceAddressId,c=this.ref("confirm").__getESUI(),f=+this.$get("purchaseNum")||1,h={config:{packageId:i,periodId:"",activityId:"",pid:t,privilegeName:"",unrestrictedPrivilege:!0,purchaseNum:f,price:s,agentSchema:{},serviceType:"MKT",from:"AI",extra:{remark:l,coupon:o,invoiceInfoId:u,invoiceAddressId:d,baiduid:(m["default"].get("BAIDUID")||"").replace(/:FG\S+$/,""),device:"pc"}},order:{fromService:"AIMKT",serviceType:"MKT",productType:"prepay",type:"NEW",confirmV2Url:"/api/mkt/order/v2/confirm",price:s,items:[{serviceType:"MKT",productType:"prepay",chargeType:["一次性计收"],unitPriceShow:"¥"+r,count:f,time:"-",price:s,configuration:["名称："+a,"规格："+n]}]}};p["default"].invokeService("billing://order_confirm",c,h)}})}),define("ai/page/market-buyer/order/confirm/confirm.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content class="market-buyer-ticket-content">\n            <p style="line-height:40px;">云市场 / {{ stepTitle }}</p>\n            <view-step step-index="{{step}}" steps="{{steps}}" on-click="jumpToStep" style="top:7px;" />\n            <div class="list-content">\n                <address-info class="{{step===0 ? \'\' : \'hide-step-1\'}}" on-submit="invokeConfirm" productInstance="{{productInstance}}" packageInstance="{{packageInstance}}" purchaseNum="{{purchaseNum}}" />\n                \x3c!-- <xui-button on-click="invokeOrder">show order</xui-button> --\x3e\n                <ui-actionpanel s-if="step===1" san-ref="confirm"></ui-actionpanel>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/order/confirm/index",["exports","module","./confirm","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/confirm/InvoiceDialog/index",["exports","module","./InvoiceDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/confirm/InvoiceDialog/InvoiceDialog",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./InvoiceDialog.tpl","san-xui","ai/common/enums","./InvoiceForm/index","ai/page/market-buyer/address/AddressForm/index","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](s),f=a["default"](o),m=a["default"](u);module.exports=d["default"]({template:c["default"],components:{"xui-form":n.Form,"xui-item":n.FormItem,"xui-toastlabel":n.Toastlabel,"xui-checkbox":n.Checkbox,"xui-boxgroup":n.BoxGroup,"xui-dialog":n.Dialog,"invoice-form":p["default"],"address-form":f["default"]},initData:function(){return{errors:{},invoiceAddressInfoErrors:{},open:!0,invoiceInfo:{invoiceType:r.InvoiceTypeForInfo.TAX_DEDUCTIBLE,invoiceTitleType:r.InvoiceTitleType.COMPANY,invoiceTitle:"",taxNum:"",registerAddress:"",registerPhone:"",bankName:"",bankAccount:""},invoiceAddressInfo:{receiver:"",address:{province:"",provinceLabel:"",city:"",cityLabel:"",area:"",areaLabel:"",street:""},mobile:"",phone:""},ifHardwareDelivery:!0,sameWithGood:!0,InvoiceTypeList:r.InvoiceTypeForInfo.toArray()}},save:function(){var t,a,i,n,r,s,o,u;return e["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:return t=undefined,d.next=3,e["default"].awrap(l.getAsyncTuple(this.ref("invoiceInfoForm").ref("form").validateForm()));case 3:if(a=d.sent,t=a[0],this.$get("sameWithGood")){d.next=10;break}return d.next=8,e["default"].awrap(l.getAsyncTuple(this.ref("invoiceAddressForm").ref("form").validateForm()));case 8:i=d.sent,t=i[0];case 10:if(!t){d.next=13;break}return l.jumpToError(t),d.abrupt("return");case 13:return d.next=15,e["default"].awrap(this.ref("invoiceInfoForm").save());case 15:if(n=d.sent,this.fire("success",{invoiceInfoId:n&&n.id||0}),!this.$get("sameWithGood")){d.next=20;break}return this.close(),d.abrupt("return");case 20:return r=m["default"].cloneDeep(this.$get("invoiceAddressInfo")),delete r.address.provinceLabel,delete r.address.cityLabel,delete r.address.areaLabel,s=undefined,d.next=27,e["default"].awrap(l.getAsyncTuple(this.ajax.saveMarketBuyerInvoiceAddressInfo(r)));case 27:if(o=d.sent,t=o[0],s=o[1],!t){d.next=35;break}return u=t.global?"发票寄送信息保存失败："+t.global:"发票寄送信息保存失败",this.$toast(u,{messageType:"error"}),t.field&&this.$set("invoiceAddressInfoErrors",t.field),d.abrupt("return");case 35:this.fire("success",{invoiceAddressId:s&&s.id||0}),this.$toast("发票寄送信息保存成功"),n&&n.id&&this.close();case 38:case"end":return d.stop()}},null,this)},close:function(){this.$set("open",!1)}})}),define("ai/page/market-buyer/order/confirm/InvoiceDialog/InvoiceDialog.tpl",[],function(){return'<template>\n    <xui-dialog title="发票信息" open="{=open=}" width="700">\n        <div class="market-order-invoice-dialog-content">\n            <div class="invoice-info-help">以下发票信息将同步至发票信息管理</div>\n\n            <span class="module-title">开票信息</span>\n            <invoice-form s-ref="invoiceInfoForm" info="{=invoiceInfo=}" />\n\n            <xui-form s-if="ifHardwareDelivery">\n                <xui-item label=" ">\n                    <xui-checkbox checked="{=sameWithGood=}" title="发票寄送信息同收货信息" />\n                </xui-item>\n            </xui-form>\n\n            <template s-if="!sameWithGood">\n                <span class="module-title">发票寄送信息</span>\n                <address-form type="invoice" errors="{=invoiceAddressInfoErrors=}" s-ref="invoiceAddressForm" info="{=invoiceAddressInfo=}" />\n            </template>\n        </div>\n        <div slot="foot">\n            <ui-button on-click="save" skin="primary">保存</ui-button>\n            <ui-button on-click="close">取消</ui-button>\n        </div>\n    </xui-dialog>\n</template>\n    '}),define("ai/page/market-buyer/order/confirm/InvoiceDialog/InvoiceForm/index",["exports","module","./InvoiceForm","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/confirm/InvoiceDialog/InvoiceForm/InvoiceForm",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./InvoiceForm.tpl","san-xui","ai/common/enums","ai/common/util","./rules","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](o);a["default"](l);module.exports=u["default"]({template:d["default"],components:{"xui-form":n.Form,"xui-item":n.FormItem,"xui-checkbox":n.Checkbox,"xui-boxgroup":n.BoxGroup},initData:function(){return{errors:{},open:!0,info:{invoiceType:r.InvoiceTypeForInfo.TAX_DEDUCTIBLE,invoiceTitleType:r.InvoiceTitleType.COMPANY,invoiceTitle:"",taxNum:"",registerAddress:"",registerPhone:"",bankName:"",bankAccount:""},InvoiceTypeList:r.InvoiceTypeForInfo.toArray()}},computed:{rules:function(){return c["default"]({ifTaxDedutibility:this.data.get("ifTaxDedutibility"),ifPerson:this.data.get("ifPerson")})},ifTaxDedutibility:function(){return this.data.get("info.invoiceType")===r.InvoiceTypeForInfo.TAX_DEDUCTIBLE},ifPerson:function(){return this.data.get("info.invoiceTitleType")===r.InvoiceTitleType.PERSON},getInvoiceTitleTypeList:function(){return this.data.get("info.invoiceType")===r.InvoiceTypeForInfo.TAX_DEDUCTIBLE?[{text:r.InvoiceTitleType.fromValue(r.InvoiceTitleType.COMPANY).text,value:r.InvoiceTitleType.COMPANY,disabled:!0}]:r.InvoiceTitleType.toArray()}},created:function(){return e["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:this.watch("info.invoiceType",function(e){e===r.InvoiceTypeForInfo.TAX_DEDUCTIBLE&&t.$set("info.invoiceTitleType",r.InvoiceTitleType.COMPANY)});case 1:case"end":return e.stop()}},null,this)},save:function(){var t,a,i,n,r,o,l,u,d,c,p;return e["default"].async(function(f){for(;;)switch(f.prev=f.next){case 0:return t=undefined,a={id:0},f.next=4,e["default"].awrap(s.getAsyncTuple(this.ref("form").validateForm()));case 4:if(i=f.sent,!(t=i[0])){f.next=9;break}return s.jumpToError(t),f.abrupt("return");case 9:return n=this.$get("info"),r={},this.$get("ifTaxDedutibility")?r=n:(o=n.invoiceType,l=n.invoiceTitleType,u=n.invoiceTitle,d=n.taxNum,r=this.$get("ifPerson")?{invoiceType:o,invoiceTitleType:l,invoiceTitle:u}:{invoiceType:o,invoiceTitleType:l,invoiceTitle:u,taxNum:d}),f.next=14,e["default"].awrap(s.getAsyncTuple(this.ajax.saveMarketBuyerInvoiceInfo(r)));case 14:if(c=f.sent,t=c[0],a=c[1],!t){f.next=22;break}return p=t.global?"发票信息保存失败："+t.global:"发票信息保存失败",this.$toast(p,{messageType:"error"}),t.field&&(s.jumpToError(t.field),this.$set("errors",t.field)),f.abrupt("return");case 22:return this.$toast("发票信息保存成功"),f.abrupt("return",a);case 24:case"end":return f.stop()}},null,this)}})}),define("ai/page/market-buyer/order/confirm/InvoiceDialog/InvoiceForm/InvoiceForm.tpl",[],function(){return'<template>\n    <xui-form s-ref="form" formData="{{info}}" rules="{{rules}}" errors="{=errors=}" class="ai-market-invoice-form">\n        <xui-item name="invoiceType" label="发票类型：">\n            <xui-boxgroup box-type="radio" datasource="{{InvoiceTypeList}}" value="{=info.invoiceType=}" />\n        </xui-item>\n        <xui-item name="invoiceTitleType" label="发票抬头类型：">\n            <xui-boxgroup box-type="radio" datasource="{{getInvoiceTitleTypeList}}" value="{=info.invoiceTitleType=}" />\n        </xui-item>\n\n        <template s-if="ifTaxDedutibility">\n            <xui-item name="invoiceTitle" label="公司名称：">\n                <xui-textbox value="{=info.invoiceTitle=}" placeholder="请填写公司名称" />\n            </xui-item>\n            <xui-item name="taxNum" label="税号：">\n                <xui-textbox value="{=info.taxNum=}" placeholder="请填写税号" />\n            </xui-item>\n            <xui-item name="registerAddress" label="注册地址：">\n                <xui-textbox value="{=info.registerAddress=}" placeholder="请填写注册地址" />\n            </xui-item>\n            <xui-item name="registerPhone" label="注册电话：">\n                <xui-textbox value="{=info.registerPhone=}" placeholder="请填写注册电话" />\n            </xui-item>\n            <xui-item name="bankName" label="开户银行：">\n                <xui-textbox value="{=info.bankName=}" placeholder="请填写开户银行" />\n            </xui-item>\n            <xui-item name="bankAccount" label="银行账户：">\n                <xui-textbox value="{=info.bankAccount=}" placeholder="请填写银行账户" />\n            </xui-item>\n        </template>\n\n        <template s-else>\n            <xui-item name="invoiceTitle" label="发票抬头：">\n                <xui-textbox value="{=info.invoiceTitle=}" placeholder="请填写发票抬头" />\n            </xui-item>\n            <xui-item s-if="!ifPerson" name="taxNum" label="税号：">\n                <xui-textbox value="{=info.taxNum=}" placeholder="请填写税号" />\n            </xui-item>\n        </template>\n    </xui-form>\n</template>\n'}),define("ai/page/market-buyer/order/confirm/InvoiceDialog/InvoiceForm/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){var i=a["default"](t);module.exports=function(t){return new e["default"]({invoiceTitle:[{validator:function(e,a,n){if(i["default"].isEmpty(i["default"].trim(a))){n(t.ifPerson?"请填写个人名称":"请填写公司名称")}else n()}}],taxNum:[{validator:function(e,a,n){t.ifPerson?n():i["default"].isEmpty(i["default"].trim(a))?n("请填写纳税人识别号"):i["default"].trim(a).length<15?n("纳税人识别号不小于15位"):/^[0-9a-zA-Z]+$/.test(i["default"].trim(a))?n():n("纳税人识别号只包含数字或字母")}}],registerAddress:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写公司地址"):n()}}],registerPhone:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写公司电话"):n()}}],bankName:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写开户银行"):n()}}],bankAccount:[{validator:function(e,a,n){t.ifTaxDedutibility&&i["default"].isEmpty(i["default"].trim(a))?n("请填写银行账号"):n()}}]})}}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDetail/AutoHeightTextarea/AutoHeightTextarea",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./AutoHeightTextarea.tpl","san-xui","./calcTextareaHeight"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](n);module.exports=r["default"]({template:s["default"],components:{"xui-textbox":i.TextBox},initData:function(){return{value:"",placeholder:"",width:"",height:"",indent:""}},created:function(){var e=this;try{this.getHeight()}catch(t){}this.watch("value",function(){e.getHeight()})},computed:{styleText:function(){var e=this.data.get("height"),t=this.data.get("width"),a=this.data.get("indent");return(a?"text-indent:"+a+";":"")+(e?"height:"+e+";":"")+(t?"width:"+t:"")}},methodHook:{getHeight:function(){var e=this.ref("textarea"),t=o["default"](e,1,null).height;this.$set("height",t)},onInputHandle:function(){var e=this.data.get("value");this.fire("input",{value:e})},onFocusHandle:function(e){this.fire("focus",e)},onBlurHandle:function(e){this.fire("blur",e)}}})}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDetail/AutoHeightTextarea/AutoHeightTextarea.tpl",[],function(){return'<template>\n    <textarea s-ref="textarea" rows="1" placeholder="{{placeholder}}" value="{=value=}" style="{{styleText}}" on-input="onInputHandle" on-focus="onFocusHandle" on-blur="onBlurHandle"></textarea>\n    \x3c!-- <xui-textbox s-ref="textarea" multiline value="{=value=}" height="{{height}}"></xui-textbox> --\x3e\n</template>\n'}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDetail/AutoHeightTextarea/calcTextareaHeight",["exports","module"],function(exports,module){module.exports=function(i){var n=arguments.length<=1||arguments[1]===undefined?1:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];e||(e=document.createElement("textarea"),document.body.appendChild(e));var s=function(e){var t=window.getComputedStyle(e),i=t.getPropertyValue("box-sizing"),n=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:a.map(function(e){return e+":"+t.getPropertyValue(e)}).join(";"),paddingSize:n,borderSize:r,boxSizing:i}}(i),o=s.paddingSize,l=s.borderSize,u=s.boxSizing,d=s.contextStyle;e.setAttribute("style",d+";"+t),e.value=i.value||i.placeholder||"";var c=e.scrollHeight,p={};"border-box"===u?c+=l:"content-box"===u&&(c-=o),e.value="";var f=e.scrollHeight-o;if(null!==n){var m=f*n;"border-box"===u&&(m=m+o+l),c=Math.max(m,c),p.minHeight=m+"px"}if(null!==r){var h=f*r;"border-box"===u&&(h=h+o+l),c=Math.min(h,c)}return p.height=c+"px",e.parentNode&&e.parentNode.removeChild(e),e=null,p};var e=undefined,t="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",a=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"]}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDetail/AutoHeightTextarea/index",["exports","module","./AutoHeightTextarea","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDetail/CommentDetail",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./CommentDetail.tpl","./AutoHeightTextarea/index","lodash"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](i),l=a["default"](n),u=a["default"](r);module.exports=s["default"]({template:o["default"],components:{"auto-height-textarea":l["default"]},filters:{},initData:function(){return{error:null,ifFocus:!1,activeTagList:{experience:!1,effect:!1,usability:!1,overall:!1},commentList:{extra:"",experience:"",effect:"",usability:"",overall:""}}},computed:{tags:function(){var t=this;return[{text:"商品使用体验",value:"experience",indent:"84px"},{text:"商品效果",value:"effect",indent:"60px"},{text:"商品适用性",value:"usability",indent:"72px"},{text:"整体评价",value:"overall",indent:"60px"}].map(function(a){return e["default"]({},a,{activeClass:t.data.get("activeTagList."+a.value)?"active":""})})},text:function(){var e=this.data.get("commentList"),t=this.data.get("tags").filter(function(t){return t.activeClass&&!!e[t.value]}).map(function(t){return t.text+"："+e[t.value]});return[].concat(t,[e.extra]).filter(function(e){return!!e}).join(" ")},totalNumber:function(){return this.data.get("text").length},ifError:function(){return!!this.data.get("error")},extraPlaceholder:function(){return this.data.get("tags").every(function(e){return!e.activeClass})?"点击上方标签，从不同角度给商品更全面的评价，可以帮助到更多人哦~":""}},onClickWrapHandle:function(e){this.ref("extra-textarea").el.querySelector("textarea").focus()},onClickItemHandle:function(e){e.stopPropagation(),e.cancelBubble=!0},toggleRagStatus:function(e){var t=this,a=this.$get("activeTagList."+e);this.$set("activeTagList."+e,!a),this.fire("input",{value:this.$get("text")}),a||this.nextTick(function(){try{t.ref("comment-textarea-"+e).el.querySelector("textarea").focus()}catch(a){}})},onInputHandle:function(e,t){var a=e.value,i=u["default"].cloneDeep(this.$get("commentList"));i[t]=a,this.$set("commentList",i),this.fire("input",{value:this.$get("text")})},onFocusHandle:function(){this.$set("ifFocus",!0)},onBlurHandle:function(){this.$set("ifFocus",!1)}})}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDetail/CommentDetail.tpl",[],function(){return'<template>\n    <div class="product-comment-detail">\n        <div class="product-comment-wrap {{ ifFocus ? \'comment-textarea-focus\' : \'\' }} {{ ifError ? \'comment-textarea-error\' : \'\' }}">\n            <div class="product-comment-tags">\n                <span class="product-comment-tag {{ item.activeClass }}" s-for="item in tags" on-click="toggleRagStatus(item.value)">{{ item.text }}</span>\n            </div>\n            <div class="product-comment-textarea-wrap" on-click="native:onClickWrapHandle">\n                \x3c!-- 考虑再优化吧，有点丑 --\x3e\n                <div on-click="native:onClickItemHandle" class="product-comment-textarea-item {{ item.activeClass }}" s-for="item in tags">\n                    <span class="product-comment-textarea-tag">{{ item.text }}：</span>\n                    <auto-height-textarea s-ref="comment-textarea-{{item.value}}" class="product-comment-textarea" width="620px" indent="{{ item.indent }}" on-focus="onFocusHandle" on-blur="onBlurHandle" on-input="onInputHandle($event, item.value)"></auto-height-textarea>\n                </div>\n                <auto-height-textarea s-ref="extra-textarea" class="product-comment-textarea-extra" width="620px" on-focus="onFocusHandle" on-blur="onBlurHandle" on-input="onInputHandle($event, \'extra\')" placeholder="{{ extraPlaceholder }}"></auto-height-textarea>\n            </div>\n            <div class="text-number-wrap">\n                <span class="text-number">{{ totalNumber }}/150</span>\n            </div>\n        </div>\n        <span s-if="ifError" class="product-comment-detail-error">{{ error }}</span>\n    </div>\n</template>'}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDetail/index",["exports","module","./CommentDetail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDialog",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./CommentDialog.tpl","san-xui","ai/common/enums","ai/common/util","./config","./StarComment/index","./CommentDetail/index","ai/components/ImageUploadList/index","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){function f(e,t){return window.parseInt(k["default"].get(v["default"],e+".star["+t+"].score"))||0}function m(e){return{score:e<0?e:"+"+e,"class":e<0?"decrease-score":"increase-score"}}var h=i["default"](a),g=i["default"](n),v=i["default"](l),x=i["default"](u),b=i["default"](d),y=i["default"](c),k=i["default"](p);module.exports=h["default"]({template:g["default"],components:{"xui-form":r.Form,"xui-item":r.FormItem,"xui-dialog":r.Dialog,"xui-button":r.Button,"star-comment":x["default"],"comment-detail":b["default"],"image-upload-list":y["default"]},filters:{},initData:function(){return e["default"]({mode:"edit",imageList:{url:"/api/ai/market/common/picUpload",extData:{rel:"product"},loading:!1,des:["图片尺寸：600*600px以上","图片大小：建议大于80Kb且小于10Mb","图片格式：jpg、png"],sizeLimit:{min:0,minLabel:"0Kb",max:10485760,maxLabel:"10Mb"},lengthLimit:{width:600,height:600},previewRect:{width:200,height:200},list:[],labels:[]},validateFlag:!1,open:!1,orderInfo:{},data:{commentDetail:""}},v["default"],{star:{serviceStar:-1,deliveryStar:-1,commentStar:-1},errors:{}})},computed:{ifEditMode:function(){return"edit"===this.data.get("mode")},errors:function(){var e=this,t={detail:"",service:"",delivery:"",comment:""};return this.data.get("validateFlag")&&(["service","delivery","comment"].forEach(function(a){t[a]=-1===e.data.get("star."+a+"Star")?"请点击小星星打分哦～":null}),this.data.get("data.commentDetail")||(t.detail="我们十分期待您的评价，请填写后再发布区"),this.data.get("data.commentDetail").length>150&&(t.detail="评论最多150个字符")),t},providerTypeLabel:function(){var e=s.ProviderType.fromValue(this.data.get("orderInfo.providerType"));return e?e.text:""},providerCommentScore:function(){return m(f("service",this.data.get("star.serviceStar"))+f("delivery",this.data.get("star.deliveryStar")))},productCommentScore:function(){return m(f("product",this.data.get("star.commentStar")))},hasNegativeComment:function(){var e=this.data.get("data"),t=e.commentScore,a=e.deliveryScore,i=e.serviceScore;return this.data.get("ifEditMode")&&[t,a,i].some(function(e){return e<=2})},uploadedImagesNumber:function(){var e=this.data.get("imageList.list");return e&&e.length||0}},created:function(){this.$get("ifEditMode")||this.fetchCommentDetail()},validate:function(){this.$set("validateFlag",!0)},uploadImage:function(){this.ref("imageUploadList").addImage()},onCommentInputHandle:function(e){var t=e.value;this.$set("data.commentDetail",t)},fetchCommentDetail:function(){var e,a,i,n,r;return t["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t["default"].awrap(this.ajax.getMarketCommentDetail({orderId:this.$get("orderInfo.orderId")}));case 2:(e=s.sent)&&(this.$set("data",e),a=this.data.get("data"),i=a.commentScore,n=a.deliveryScore,r=a.serviceScore,this.$set("star",{commentStar:i-1,deliveryStar:n-1,serviceStar:r-1}));case 4:case"end":return s.stop()}},null,this)},publish:function(){var e,a,i,n,r,s,l,u,d;return t["default"].async(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.validate(),e=this.$get("errors"),!k["default"].values(e).some(function(e){return!!e})){c.next=4;break}return c.abrupt("return");case 4:return a=this.data.get(),i=a.orderInfo,n=a.data,r=a.star,s=a.imageList,l={orderId:i.orderId,commentScore:r.commentStar+1,deliveryScore:r.deliveryStar+1,serviceScore:r.serviceStar+1,commentDetail:n.commentDetail,commentImage:s.list.map(function(e){return e.objectId})},c.next=12,t["default"].awrap(o.getAsyncTuple(this.ajax.addMarketComment(l)));case 12:if(u=c.sent,!(e=u[0])){c.next=18;break}return d=e.global?"提交失败："+e.global:"提交失败",this.$toast(d,{messageType:"error"}),c.abrupt("return");case 18:this.$toast("评价发布成功"),this.$reload(),this.close();case 21:case"end":return c.stop()}},null,this)},cancelPublish:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t["default"].awrap(this.$confirm({title:"提示",width:500,content:"其他买家需要您的建议，提交评价AI市场会为您提供更专业、及时的服务。\n                确认放弃评价吗？",needFoot:!0,okText:"继续评价",cancelText:"残忍离开"}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.close();case 8:case"end":return e.stop()}},null,this,[[0,5]])},close:function(){this.$set("open",!1)}})}),define("ai/page/market-buyer/order/detail/CommentDialog/CommentDialog.tpl",[],function(){return'<template>\n    <xui-dialog class="ai-market-order-comment-dialog" title="发布评价" open="{=open=}" width="700">\n        <div class="ai-market-order-comment-dialog-content">\n            <xui-toastlabel level="normal" class="comment-tip">\n                <span s-if="ifEditMode">温馨提示：分享体验心得，给想买的人一个参考吧！我们会更加努力滴~</span>\n                <span s-else-if="hasNegativeComment">温馨提示：抱歉没有给您带来良好交易体验，如有不满，可与卖家协商售后</span>\n                <span s-else>温馨提示：感谢您的评价，我们会持续为您提供专业、及时的服务</span>\n            </xui-toastlabel>\n\n            <div class="product-info-wrap">\n                <img class="product-image" src="{{ orderInfo.productImage }}" />\n                <div class="product-info">\n                    <div class="product-name">{{ orderInfo.productName }}</div>\n                    <div class="package-name">{{ orderInfo.packageName }}</div>\n                    <div class="provider-info">\n                        <span s-if="providerTypeLabel" class="provider-type">{{ providerTypeLabel }}</span>\n                        <span class="provider-name">{{ orderInfo.providerName }}</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="comment-module-header">\n                <div class="comment-module-title">商家服务（匿名）</div>\n                <div s-if="star.serviceStar > -1 || star.deliveryStar > -1" class="comment-score {{ providerCommentScore.class }}">服务商{{ providerCommentScore.score }}分</div>\n            </div>\n            <div class="comment-module">\n                <star-comment type="service" mode="{{mode}}" error="{{errors.service}}" activeIndex="{=star.serviceStar=}"></star-comment>\n                <star-comment type="delivery" mode="{{mode}}" error="{{errors.delivery}}" activeIndex="{=star.deliveryStar=}"></star-comment>\n            </div>\n\n            <div class="comment-module-header">\n                <div class="comment-module-title">商品评价</div>\n                <div s-if="star.commentStar > -1" class="comment-score {{ productCommentScore.class }}">商品{{ productCommentScore.score }}分</div>\n            </div>\n            <div class="comment-module">\n                <star-comment type="product" mode="{{mode}}" error="{{errors.comment}}" activeIndex="{=star.commentStar=}"></star-comment>\n\n                <div s-if="!ifEditMode" class="comment-detail-wrap">\n                    <span class="comment-detail-label">评价描述</span>\n                    <div class="comment-detail">\n                        <p class="comment-detail-content">{{ data.commentDetail }}</p>\n                        <div class="comment-detail-images">\n                            <img s-for="imageUrl in data.commentImage" src="{{ imageUrl }}" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div s-if="ifEditMode" class="comment-detail-edit">\n                <comment-detail error="{{errors.detail}}" on-input="onCommentInputHandle"></comment-detail>\n\n                <image-upload-list s-ref="imageUploadList" loading="{=imageList.loading=}" labels="{{imageList.labels}}" list="{=imageList.list=}" url="{{imageList.url}}" des="{{imageList.des}}" sizeLimit="{{imageList.sizeLimit}}" lengthLimit="{{imageList.lengthLimit}}" previewRect="{{imageList.previewRect}}">\n                    <div slot="uploadArea" class="comment-images-upload-area">\n                        <a on-click="uploadImage" href="javascript:void(0);">{{uploadedImagesNumber > 0 ? \'继续上传\' : \'上传图片\'}}</a>\n                        <span>({{ uploadedImagesNumber }}/5)</span>\n                    </div>\n                </image-upload-list>\n            </div>\n\n        </div>\n        <div slot="foot">\n            <template s-if="ifEditMode">\n                <xui-button on-click="publish" disabled="{{imageList.loading}}" skin="primary">发布</xui-button>\n                <xui-button on-click="cancelPublish">取消</xui-button>\n            </template>\n            <xui-button s-else on-click="close" skin="primary">关闭</xui-button>\n        </div>\n    </xui-dialog>\n</template>'}),define("ai/page/market-buyer/order/detail/CommentDialog/config",["exports","module"],function(exports,module){module.exports={product:{label:"满意程度",star:[{star:"1分",score:-3,label:"非常不满",detail:"差的离谱，与描述适合你不符，非常不满"},{star:"2分",score:-1,label:"不满",detail:"与描述的效果不一致，不满意"},{star:"3分",score:0,label:"一般",detail:"产品一般，没有描述的那么好"},{star:"4分",score:1,label:"满意",detail:"产品不错，基本满足我的需求，还是挺满意的"},{star:"5分",score:3,label:"很满意",detail:"产品很好，效果出乎意料，很满意"}]},service:{label:"服务态度",star:[{star:"1分",score:-3,label:"非常不满",detail:"态度差，有辱骂等行为，不把客户当回事"},{star:"2分",score:-1,label:"不满",detail:"卖家有点不耐烦，承诺的服务也兑现不了"},{star:"3分",score:0,label:"一般",detail:"回复有些慢，态度一般，谈不上顺利"},{star:"4分",score:1,label:"满意",detail:"卖家服务挺好，沟通挺顺畅，总体满意"},{star:"5分",score:3,label:"很满意",detail:"卖家服务周到、真诚，很满意"}]},delivery:{label:"交付速度",star:[{star:"1分",score:-3,label:"非常不满",detail:"再三催促还是没有按约定时间交付，耽误了我的时间"},{star:"2分",score:-1,label:"不满",detail:"交付有些慢，催促几次才发货"},{star:"3分",score:0,label:"一般",detail:"交付速度一般，提醒后才发货"},{star:"4分",score:1,label:"满意",detail:"交付还算及时，满意"},{star:"5分",score:3,label:"很满意",detail:"交付速度快，非常满意"}]}}}),define("ai/page/market-buyer/order/detail/CommentDialog/index",["exports","module","./CommentDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/detail/CommentDialog/StarComment/index",["exports","module","./StarComment","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/detail/CommentDialog/StarComment/StarComment",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./StarComment.tpl","../config","ai/components/StarGroup/index"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n);module.exports=r["default"]({template:s["default"],components:{"star-group":l["default"]},filters:{},initData:function(){return{type:"service",error:null,mode:"show",hoverIndex:-1,activeIndex:-1}},computed:{starIndexInfo:function(){var e=o["default"][this.data.get("type")];if(!e)return{};var t=Math.max(this.data.get("hoverIndex"),this.data.get("activeIndex")),a=e.star[t]||{};return{label:e.label,starScore:a.star,starLabel:a.label,starDetail:a.detail}},ifError:function(){return-1===this.data.get("activeIndex")&&!!this.data.get("error")}}})}),define("ai/page/market-buyer/order/detail/CommentDialog/StarComment/StarComment.tpl",[],function(){return'<template>\n    <div class="star-comment">\n        <span class="star-label">{{ starIndexInfo.label }}</span>\n        <star-group hoverIndex="{=hoverIndex=}" activeIndex="{=activeIndex=}" mode="{{mode}}"></star-group>\n        <span s-if="ifError" class="star-comment-emprt-error">{{ error }}</span>\n        <div s-else class="star-comment-detail-wrap">\n            <span class="star-comment-star">{{ starIndexInfo.starScore }}</span>\n            <span class="star-comment-label">{{ starIndexInfo.starLabel }}</span>\n            <span class="star-comment-detail">{{ starIndexInfo.starDetail }}</span>\n        </div>\n    </div>\n</template>\n'}),define("ai/page/market-buyer/order/detail/index",["exports","module","babel-runtime/core-js/object/keys","babel-runtime/regenerator","babel-runtime/core-js/promise","lodash","babel-runtime/helpers/interop-require-default","ai/page/market-buyer/index","bat-ria/tpl!./index.tpl","san-xui","ai/common/enums","ai/components/market/ExpressDetail/index","./CommentDialog/index","ai/components/PagerHeader/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=n["default"](i),f=n["default"](r),m=n["default"](s),h=n["default"](u),g=n["default"](d),v=n["default"](c);module.exports=f["default"]({template:m["default"],components:{"xui-table":o.Table,"xui-toastlabel":o.Toastlabel,"express-status":h["default"],"comment-dialog":g["default"],"pager-header":v["default"]},filters:{deliveryTypeLabel:function(e){var t=l.StoreDeliveryType.fromValue(e);return t?t.text:""},getExpressStatus:function(e){var t=l.OrderExpressStatus.fromValue(e);return t&&t.text||"暂无物流信息"},enumTextFromVal:function(e,t){var a=t.fromValue(e);return a?a.text:"--"},orderStatuColor:function(e){var t=l.MarketProductOrderStatus.fromValue(e);return t?t.color:""},deliveryDaysLabel:function(e){return-1===e?"按需确认":0===e?"实时交付":e+"天交付"}},initData:function(){return{tagList:{},ShowApply:l.ShowApply,MarketProductOrderStatus:l.MarketProductOrderStatus,MarketProductType:l.MarketProductType,StoreDeliveryType:l.StoreDeliveryType,OrderExpressStatus:l.OrderExpressStatus,orderId:"",toComment:0,info:{},currExpressNum:"",expressDetailOpen:!1,commentDialogOpen:!1,commentDialogMode:"show",deliveryTable:{schema:[{name:"expressName",label:"快递公司"},{name:"expressNum",label:"快递单号"},{name:"status",label:"物流状态",width:120},{name:"remark",label:"备注"}]}}},computed:{showApplyKey:function(){var t=this.data.get("info.showApply"),a=this.data.get("tagList");return t?e["default"](a).find(function(e){return a[e]===t}):"normal"},applyUrl:function(){var e=l.ShowApply.fromValue(this.data.get("showApplyKey"));return e?e.url:""},breadItem:function(){return[{title:"订单列表",url:"#/ai/market/buyer/order/list"},{title:"订单详情"}]},sdkTable:function(){var e=[],t=[l.MarketProductOrderStatus.DELIVERED,l.MarketProductOrderStatus.COMPLETED];return p["default"].includes(t,this.data.get("info.status"))&&(e=[{}]),{schema:[{name:"number",label:"SDK序列号"},{name:"usage",label:"使用方式"},{name:"remark",label:"备注"}],datasource:e}},serviceTable:function(){var e=this.data.get("info"),t=[{name:"createTime",label:"买家下单"},{name:"purchaseTime",label:"买家付款"}];if(e.productType===l.MarketProductType.SOFTWARE)t=[].concat(t,[{name:"completeTime",label:"交付完成"}]);else{var a=~[l.MarketProductOrderStatus.REFUND_SUCC,l.MarketProductOrderStatus.REFUNDING,l.MarketProductOrderStatus.REFUND_FAILED].indexOf(e.status);t=[].concat(t,a?[{name:"refundTime",label:"买家退款时间"}]:[{name:"deliveryTime",label:"服务商交付"},{name:"completeTime",label:"买家确认交付"}])}return{schema:t,datasource:[e]}},receiptAddress:function(){try{var e=this.data.get("info.receiptInfo.receiptAddress");return[e.provinceLabel,e.cityLabel,e.areaLabel,e.street].join(" ").trim()}catch(t){return"-"}},ifProductAPI:function(){return this.data.get("info.productType")===l.MarketProductType.SOFTWARE}},created:function(){return t["default"].async(function(e){for(var i=this;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(a["default"].all([this.ajax.getMarketBuyerFunctaglist(),this.ajax.getMarketBuyerOrderDetail({orderId:this.$get("orderId")})]).then(function(e){var t=e[0],a=e[1];i.$$set({tagList:t,info:a})}));case 2:this.$get("info.hasComment")||"1"!==this.$get("toComment")||this.$$set({commentDialogOpen:!0,commentDialogMode:"edit"});case 3:case"end":return e.stop()}},null,this)},toMarketSnapshot:function(){var e=this.$get("Url").store.snapshot+"/"+this.$get("orderId");window.open(e)},handleBack:function(){this.$aiRedirect("buyer/order/list")},comment:function(){var e=this.$get("info.hasComment")?"show":"edit";this.$$set({commentDialogOpen:!0,commentDialogMode:e})},invokeReceive:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.$confirm({title:"提示",width:600,content:"<h2>确认收货？</h2><p>确认后，您所支付服务费将由市场结算给服务商，进度将更新为交付完成。</p>"}));case 2:return e.next=4,t["default"].awrap(this.ajax.sureMarketBuyerOrderConfirm({orderId:this.$get("orderId")}));case 4:this.$toast("确认收货成功"),this.$reload();case 6:case"end":return e.stop()}},null,this)},applyRefund:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.$confirm({title:"提示",width:600,content:"<h2>确认要退款吗？</h2>"}));case 2:return e.next=4,t["default"].awrap(this.ajax.applyMarketBuyerOrderRefund({orderId:this.$get("orderId")}));case 4:this.$toast("申请退款成功"),this.$reload();case 6:case"end":return e.stop()}},null,this)},cancelOrder:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.$confirm({title:"删除提示",content:"请确定是否要取消该订单？"}));case 2:return e.next=4,t["default"].awrap(this.ajax.cancelMarketBuyerOrder({orderId:this.$get("orderId")}));case 4:this.$toast("取消成功"),this.$reload();case 6:case"end":return e.stop()}},null,this)},toMarketProductPage:function(e){var t=e.productUuid,a=this.$get("Url").store.product+"/"+t;window.open(a)},openExpressDetail:function(e){this.$set("currExpressNum",e),this.$set("expressDetailOpen",!0)}})}),define("ai/page/market-buyer/order/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        \x3c!-- <app-sidebar /> --\x3e\n        <app-content style="padding:0;">\n            <pager-header back="返回订单列表" title="订单详情" on-back="handleBack" />\n            \x3c!-- <breadcrumb items="{{breadItem}}"></breadcrumb> --\x3e\n            <div class="list-content market-buyer-service-detail--progress-content" style="padding: 0 122px 80px 118px;">\n                <xui-toastlabel class="mark-content" s-if="info.status === MarketProductOrderStatus.COMPLETED">\n                    <div>温馨提示：</div>\n                    <div>1. 当前所购服务已交付，若服务中有不满意或调整，请线下联系服务商协商解决。</div>\n                    <div>\n                        2. 针对协商过程中产生的纠纷，您可以向AI市场发起投诉。\n                        <a href="{{Url.ticket}}" target="_blank" data-track-id="ai-market-buyer-order-detail-ticket" data-track-name="买家订单详情页-发起投诉">发起投诉>></a>\n                    </div>\n                </xui-toastlabel>\n                \x3c!-- 订单信息 --\x3e\n                <div class="section">\n                    <h3 class="section-title">订单信息</h3>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">订单编号：</td>\n                                <td>{{info.orderId}}</td>\n                                <td class="info-table-title">商品名称：</td>\n                                <td>\n                                    <a on-click="toMarketProductPage(info)" href="javascript:void(0)">{{info.productName}}</a>\n                                </td>\n                                <td class="info-table-title">商品类型：</td>\n                                <td>{{info.productType | enumTextFromVal(MarketProductType)}}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">购买规格：</td>\n                                <td>{{info.packageName}}</td>\n                                <td class="info-table-title">购买数量：</td>\n                                <td>{{info.purchaseNum}}</td>\n                                <td class="info-table-title">购买单价：</td>\n                                <td>{{info.packagePrice}}元</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">优惠金额：</td>\n                                <td>{{info.coupon}}元</td>\n                                <td class="info-table-title">支付金额：</td>\n                                <td>{{info.cash}}元</td>\n                                <td class="info-table-title">交易快照：</td>\n                                <td colspan="2">发生交易争议时，可作为判断依据 <a on-click="toMarketSnapshot" href="javascript:void(0)">查看</a></td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">备注：</td>\n                                <td colspan="2">{{info.remark}}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- 进度信息 --\x3e\n                <div class="section">\n                    <h3 class="section-title">进度信息</h3>\n                    <xui-toastlabel class="mark-content" s-if="info.status === MarketProductOrderStatus.NEED_DELIVER">\n                        <div>温馨提示：</div>\n                        <div>1. 服务商尚未交付，服务商将在2个工作日内与您取得联系。</div>\n                        <div>\n                            2. 若服务商未在约定时间内提供服务，您可向AI市场进行投诉。\n                            <a href="{{Url.ticket}}" target="_blank" data-track-id="ai-market-buyer-order-detail-ticket" data-track-name="买家订单详情页-发起投诉">发起投诉>></a>\n                        </div>\n                    </xui-toastlabel>\n                    <br>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">目前状态：</td>\n                                <td colspan="7">\n                                    <span slot="c-status" class="ai-market-order-status {{ info.status | orderStatuColor }}">\n                                        <span>{{ info.status | enumTextFromVal(MarketProductOrderStatus) }}</span>\n                                    </span>\n                                    <span s-if="info.status === MarketProductOrderStatus.NEED_PURCHASE" style="color: #808080;">（ 订单状态稍有延迟，请刷新页面获得最新状态更新 ）</span>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">服务商电话：</td>\n                                <td colspan="7">{{ info.providerPhone }} </td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">服务商邮箱：</td>\n                                <td  colspan="7">{{ info.providerEmail }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">服务跟踪：</td>\n                                <td colspan="7">\n                                    <xui-table schema="{{serviceTable.schema}}" datasource="{{serviceTable.datasource}}">\n\n                                    </xui-table>\n                                </td>\n                            </tr>\n                            \x3c!-- 如果规格包价钱不是0，且在待交付状态 --\x3e\n                            <tr s-if="info.cash!==0 && info.status === MarketProductOrderStatus.NEED_DELIVER">\n                                <td class="info-table-title">操作：</td>\n                                <td>\n                                    <a on-click="applyRefund" href="javascript:void(0)">申请退款</a>\n                                </td>\n                            </tr>\n                            <tr s-if="info.status === MarketProductOrderStatus.NEED_PURCHASE">\n                                <td class="info-table-title">操作：</td>\n                                <td>\n                                    <a on-click="cancelOrder" href="javascript:void(0)">取消订单</a>\n                                </td>\n                            </tr>\n\n                            <tr s-if="info.status === MarketProductOrderStatus.COMPLETED">\n                                <td class="info-table-title"></td>\n                                <td class="comment-wrap">\n                                    <xui-button on-click="comment" skin="primary">{{info.hasComment ? \'查看评价\' : \'立即评价\'}}</xui-button>\n                                    <p s-if="info.hasComment && info.commentReply">服务商回复：{{ info.commentReply }}</p>\n                                    <p s-if="!info.hasComment">温馨提示：请您根据本次交易，给予真实、客观、仔细地评价。您的评价将成为未来买家的参考，也将影响服务商的积分。AI市场将为提交过评价的客户提供更专业、及时的服务。</p>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                \x3c!-- 交付信息 --\x3e\n                <div class="section" s-if="serviceTable.datasource.length>0">\n                    <div class="section-title">交付信息</div>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                \x3c!-- <td class="info-table-title">交付方式：</td>\n                                <td>{{ info.deliveryType | enumTextFromVal(StoreDeliveryType) }}</td> --\x3e\n                                <td class="info-table-title">交付时间：</td>\n                                <td colspan="7">{{ info.deliveryDays | deliveryDaysLabel }}</td>\n                            </tr>\n                            <template s-for="item,index in info.deliveryInfo">\n                                \x3c!-- api 交付 --\x3e\n                                <tr s-if="item.deliveryType === StoreDeliveryType.API">\n                                    <td class="info-table-title">API交付：</td>\n                                    <td colspan="7">\n                                        <span>API由系统交付，请前往</span>\n                                        <a href="#">应用管理</a>\n                                        <span>中创建应用使用，具体使用方法参考</span>\n                                        <a href="#">API使用文档</a>\n                                    </td>\n                                </tr>\n                                \x3c!-- 硬件交付 --\x3e\n                                <tr s-elif="item.deliveryType === StoreDeliveryType.HARDWARE">\n                                    <td class="info-table-title">硬件交付：</td>\n                                    <td colspan="7">\n                                        <xui-table schema="{{deliveryTable.schema}}" datasource="{{item.expressInfo}}">\n                                            <template slot="c-expressNum">\n                                                {{ row.expressNum }}\n                                            </template>\n                                            \x3c!-- status --\x3e\n                                            <template slot="c-status">\n                                                <span>{{row.status | getExpressStatus(OrderExpressStatus)}}</span>\n                                                <a s-if="row.status" href="javascript:void(0);" on-click="openExpressDetail(row.expressNum)">详情</a>\n                                                <xui-tip s-else position="bc" layer-width="310">\n                                                    <span>暂未查询到物流信息，请耐心等待。若超过2天未查询到物流信息，请与服务商联系核对快递单号或<a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>向AI市场反馈您的问题。</span>\n                                                </xui-tip>\n                                            </template>\n                                            \x3c!-- remark --\x3e\n                                            <template slot="c-remark">\n                                                <p>{{ row.remark }}</p>\n                                                <span s-if="showApplyKey === ShowApply.speech" style="white-space: normal;">使用开发套件的识别与合成能力，请先<a href="{{applyUrl[0]}}">创建应用</a>获取鉴权，操作详情查看使用指南。</span>\n                                            </template>\n                                        </xui-table>\n                                    </td>\n                                </tr>\n                                \x3c!-- 其它交付类型 --\x3e\n                                <template s-else>\n                                    <tr>\n                                        <td class="info-table-title">{{ item.deliveryType | deliveryTypeLabel }}</td>\n                                        <td colspan="7">\n                                            <pre>{{ item.content }}</pre>\n                                            \x3c!-- <p>{{ item.content | raw}}</p> --\x3e\n                                        </td>\n                                    </tr>\n                                    <tr s-if="item.docs.length">\n                                        <td class="info-table-title">交付资料：</td>\n                                        <td colspan="7">\n                                            <div s-for="file,fileIndex in item.docs" style="margin-bottom: 8px;">\n                                                <xui-icon name="pdc-task" style="vertical-align: bottom;" />\n                                                <span>{{ file.name }}</span>\n                                                <a href="{{ file.link }}" target="_blank" style="margin-left: 16px;">下载</a>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                    <tr s-if="item.remark">\n                                        <td class="info-table-title">交付备注：</td>\n                                        <td colspan="7">\n                                            {{ item.remark }}\n                                        </td>\n                                    </tr>\n                                </template>\n                            </template>\n\n                            \x3c!-- sdk交付 --\x3e\n                            <tr s-if="showApplyKey === ShowApply.face || showApplyKey === ShowApply.easyDl">\n                                <td class="info-table-title"></td>\n                                <td colspan="7">\n                                    <xui-table schema="{{sdkTable.schema}}" datasource="{{sdkTable.datasource}}">\n                                        <template slot="c-number">\n                                            {{info.purchaseNum}}个\n                                        </template>\n                                        <div slot="c-usage" style="white-space: normal;">\n                                            <span>SDK下载与SDK序列号查看、激活，请前往SDK管理控制台</span>\n\n                                            \x3c!-- 人脸地址 --\x3e\n                                            <template s-if="showApplyKey === ShowApply.face">\n                                                <a href="{{applyUrl[0]}}" target="_blank">立即前往</a>\n                                            </template>\n\n                                            \x3c!-- easyDl 地址 --\x3e\n                                            <div s-if="showApplyKey === ShowApply.easyDl">\n                                                <a href="{{applyUrl[0]}}" target="_blank">EasyDL经典版SDK获取地址 >></a>\n                                                <br />\n                                                <a href="{{applyUrl[1]}}" target="_blank">EasyDL专业版SDK获取地址 >></a>\n                                            </div>\n\n                                        </div>\n                                        <div slot="c-remark" style="white-space: normal;">SDK序列号激活后，不能解绑或换绑设备，请谨慎操作。</div>\n                                    </xui-table>\n                                </td>\n                            </tr>\n                            \x3c!-- 确认交付，服务商已交付状态 --\x3e\n                            <tr s-if="MarketProductOrderStatus.DELIVERED === info.status">\n                                <td class="info-table-title"></td>\n                                <td colspan="7">\n                                    <p>\n                                        <xui-button on-click="invokeReceive" skin="primary" data-track-id="ai-market-buyer-order-detail-confirm-receipt" data-track-name="买家订单详情页-确认收货">确认收货</xui-button>\n                                    </p>\n                                    <br>\n                                    <p s-if="OrderExpressStatus.received === info.expressStatus">\n                                        提示：您已成功签收，<span style="color:#f00;">还剩{{info.autoCompleteTime}}</span>，将自动确认收货<br />\n                                        若未收到货，请<a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>联系AI市场。\n                                    </p>\n                                    <p s-else>\n                                        提示：<span style="color:#f00;">还剩{{info.autoCompleteTime}}</span>，将自动确认收货\n                                    </p>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                    <br>\n                </div>\n                \x3c!-- 收货信息 --\x3e\n                <div class="section" s-if="info.status !== MarketProductOrderStatus.COMPLETED && !ifProductAPI">\n                    <div class="section-title">收货信息</div>\n                    <table class="info-table">\n                        <tbody>\n                            <tr>\n                                <td class="info-table-title">收货人：</td>\n                                <td>{{ info.receiptInfo.receiptName }}</td>\n                                <td class="info-table-title">手机号：</td>\n                                <td>{{ info.receiptInfo.mobile }}</td>\n                                <td class="info-table-title">电话号：</td>\n                                <td>{{ info.receiptInfo.telephone }}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">收货地址：</td>\n                                <td colspan="7">{{ receiptAddress || \'-\' }}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n            <express-status s-if="expressDetailOpen" type="buyer" open="{=expressDetailOpen=}" orderId="{{info.orderId}}" expressNum="{{currExpressNum}}" receiptAddress="{{receiptAddress}}" />\n            <comment-dialog s-if="commentDialogOpen" open="{=commentDialogOpen=}" orderInfo="{{info}}" mode="{{commentDialogMode}}" ></comment-dialog>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/order/list/index",["exports","module","./listNew","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market-buyer/order/list/listNew",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./listNew.tpl","lodash","san-xui","inf-ui/x/biz/XPager","moment","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=n["default"](i),p=n["default"](r),f=n["default"](s),m=n["default"](l),h=n["default"](u);module.exports=c["default"]({template:p["default"],components:{"xui-table":o.Table,"xui-rangecalendar":o.RangeCalendar,"xui-xpager":m["default"]},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=d.MarketProductOrderStatus.fromValue(e);return t?t.color:""}},initData:function(){return{breadItem:[{title:"订单列表"}],MarketProductOrderStatus:d.MarketProductOrderStatus,MarketProductType:d.MarketProductType,rangecalendar:{value:{begin:h["default"]().add(-7,"days").toDate(),end:new Date},range:{begin:new Date(2e3,1,1),end:new Date}},table:{loading:!1,schema:[{name:"orderId",label:"订单号",width:250},{name:"productName",label:"商品名称"},{name:"productType",label:"类型",filter:{options:[{text:"全部",value:""}]}},{name:"packageName",label:"规格"},{name:"purchaseNum",label:"数量"},{name:"packagePrice",label:"单价"},{name:"cash",label:"支付金额"},{name:"createTime",label:"下单时间"},{name:"status",label:"状态",filter:{options:[{text:"全部",value:""}]}},{name:"ctl",label:"操作"}],datasource:[]},filter:{productType:"",deliveryType:"",status:""},pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}},computed:{tabList:function(){var t=this.data.get("filter.status");return[{text:"全部订单",value:""},{text:"待付款",value:"NEED_PURCHASE"},{text:"待交付",value:"NEED_DELIVER"},{text:"评价",value:"COMPLETED"}].map(function(a){return e["default"]({},a,{activeClass:a.value===t?"active":""})})}},created:function(){return t["default"].async(function(e){for(var i=this;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(a["default"].all([this.fetchProductTypeList(),this.fetchStatusList()]));case 2:["rangecalendar.value","filter"].forEach(function(e){return i.watch(e,function(){return i.fetchCurrentPage()})}),this.fetchCurrentPage();case 5:case"end":return e.stop()}},null,this)},changeTab:function(e){this.$set("filter.status",e)},fetchProductTypeList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductTypeList());case 2:e=a.sent,this.data.splice("table.schema[2].filter.options",[1,0].concat(e.map(function(e){return{text:e.label,value:e.name}})));case 4:case"end":return a.stop()}},null,this)},fetchStatusList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketOrderStatusList());case 2:e=a.sent,this.data.splice("table.schema[8].filter.options",[1,0].concat(e.map(function(e){return{text:e.label,value:e.name}})));case 4:case"end":return a.stop()}},null,this)},fetchCurrentPage:f["default"].debounce(function(){var e,a,i,n,r,s,o,l,u,d,c,p,f;return t["default"].async(function(m){for(;;)switch(m.prev=m.next){case 0:return e=this.$get("pager"),a=e.page,i=e.size,n=this.$get("rangecalendar.value"),r=n.begin,s=n.end,o=h["default"](r).format("YYYY-MM-DD"),l=h["default"](s).format("YYYY-MM-DD"),u=this.$get("filter"),d=u.productType,c=u.deliveryType,p=u.status,this.$set("table.loading",!0),m.next=15,t["default"].awrap(this.ajax.getMarketBuyerOrderList({page:a,pageSize:i,startTime:o,endTime:l,productType:d,deliveryType:c,status:p}));case 15:f=m.sent,this.$$set({"table.loading":!1,"pager.page":f.page,"pager.size":f.pageSize,"pager.count":f.total,"table.datasource":f.items});case 17:case"end":return m.stop()}},null,this)},50),onPageSizeChange:function(e){var t=e.value;this.$set("pager.size",t),this.$set("pager.page",1),this.fetchCurrentPage()},onPageChange:function(e){var t=e.pageNo;this.$set("pager.page",t),this.fetchCurrentPage()},onFilter:function(e){var t=this;f["default"].keys(this.$get("filter")).forEach(function(a){e.hasOwnProperty(a)&&t.$set("filter."+a,e[a])})},goToComment:function(e){this.$aiRedirect("buyer/order/detail~orderId="+e+"&toComment=1")},goToPay:function(e){var t="/finance/#/finance/pay~serviceType=MKT&fromService=AIM&orderType=NEW&orderId="+e;window.location=t},cancelOrder:function(e){return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.$confirm({title:"删除提示",content:"请确定是否要取消该订单？"}));case 2:return a.next=4,t["default"].awrap(this.ajax.cancelMarketBuyerOrder({orderId:e}));case 4:return this.$toast("取消成功"),a.next=7,t["default"].awrap(this.fetchCurrentPage());case 7:case"end":return a.stop()}},null,this)},buyAgain:function(e){var t=e.productUuid,a=this.$get("Url").store.product+"/"+t;window.open(a)}})}),define("ai/page/market-buyer/order/list/listNew.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content class="ai-market-main-content">\n            <div class="list-content ai-store-content ai-market-order-list-content ai-market-buyer-order-list-content">\n                <h2 class="ai-market-page-header">订单列表</h2>\n                \n                <div class="ai-market-order-list-tab">\n                    <div class="ai-market-order-list-tab-item {{ item.activeClass }}" s-for="item in tabList" on-click="changeTab(item.value)">\n                        {{ item.text }}\n                    </div>\n                </div>\n\n                <xui-toastlabel style="text-align: center;margin-top: 20px;margin-bottom: 20px;" level="alert">下单2小时内请完成付款，未及时支付，系统将自动取消订单。</xui-toastlabel>\n\n                <div class="section">\n                    <div style="margin: 20px 0;">\n                        <span>下单时间：</span>\n                        <xui-rangecalendar value="{=rangecalendar.value=}" range="{=rangecalendar.range=}" shortcut="{{false}}" />\n                    </div>\n                    <xui-table loading="{{table.loading}}" schema="{{table.schema}}" datasource="{{table.datasource}}" on-filter="onFilter">\n                        <span style="display: inline-block;" slot="c-orderId">\n                            <a href="#/ai/market/buyer/order/detail~orderId={{row.orderId}}">{{ row.orderId }}</a>\n                        </span>\n                        <span style="display: inline-block;" slot="c-productType">\n                            {{ row.productType | getLabelByValue(MarketProductType) }}\n                        </span>\n                        <span style="display: inline-block;" slot="c-packagePrice">\n                            {{ row.packagePrice }}元\n                        </span>\n                        <span style="display: inline-block;" slot="c-cash">\n                            {{ row.cash }}元\n                        </span>\n                        <span class="ai-market-order-status {{ row.status | getStatuColor }}" slot="c-status">\n                            {{ row.status | getLabelByValue(MarketProductOrderStatus) }}\n                        </span>\n                        \x3c!-- ctrl --\x3e\n                        <div class="ctl-wrap" slot="c-ctl">\n                            \x3c!-- 未支付 --\x3e\n                            <div s-if="row.status === MarketProductOrderStatus.NEED_PURCHASE">\n                                <a href="#/ai/market/buyer/order/detail~orderId={{row.orderId}}" style="margin-right: 10px;">订单详情</a>\n                                <a on-click="goToPay(row.orderId)" href="javascript:void(0)" style="margin-right: 10px;">支付订单</a>\n                                <a on-click="cancelOrder(row.orderId)" href="javascript:void(0)">取消订单</a>\n                            </div>\n                            \x3c!-- 其它已完成状态 --\x3e\n                            <div s-else>\n                                <a href="#/ai/market/buyer/order/detail~orderId={{row.orderId}}" style="margin-right: 10px;">订单详情</a>\n                                <a s-if="!row.hasComment && row.status === MarketProductOrderStatus.COMPLETED" on-click="goToComment(row.orderId)" href="javascript:void(0)">去评价</a>\n                            </div>\n                        </div>\n                    </xui-table>\n\n                    <div class="pager-wrap">\n                        <xui-xpager\n                            withPagerSize="{{true}}"\n                            pager="{{pager}}"\n                            on-pager-size-change="onPageSizeChange"\n                            on-pager-change="onPageChange"\n                        />\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/service/detail/index",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","ai/common/enums"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](i);module.exports=s["default"]({template:o["default"],components:{"xui-table":n.Table},filters:{deliveryType:function(e){return r.StoreDeliveryType.fromValue(e)?r.StoreDeliveryType.fromValue(e).text:"--"},productTypeLabel:function(e){return r.MarketProductType.fromValue(e)?r.MarketProductType.fromValue(e).text:"--"},orderStatus:function(e){return r.StoreServiceStatus.fromValue(e)?r.StoreServiceStatus.fromValue(e).text:"--"},orderStatusClass:function(e){return e!==r.StoreServiceStatus.NORMAL?"error":"normal"},orderStatuLabel:function(e){return r.MarketProductOrderStatus.fromValue(e).text},orderStatuColor:function(e){var t=r.MarketProductOrderStatus.fromValue(e);return t?t.color:""}},initData:function(){return{MarketProductType:r.MarketProductType,breadItem:[{title:"已购服务",url:"#/ai/market/buyer/service/list"},{title:"服务详情"}],productId:"",table:{schema:[{name:"createTime",label:"购买时间"},{name:"packageName",label:"规格"},{name:"usage",label:"使用情况"},{name:"expireTime",label:"到期时间"},{name:"status",label:"状态"},{name:"ctrl",label:"操作"}]},detail:{}}},computed:{providerServiceTime:function(){return this.data.get("detail.providerServiceType")===r.ServiceTime.AllYear?r.ServiceTime.getTextFromAlias("AllYear"):this.data.get("detail.providerServiceTime.st")+" - "+this.data.get("detail.providerServiceTime.et")+" （工作日）"}},created:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketBuyerServiceDetail({productId:this.$get("productId")}));case 2:t=a.sent,this.$set("detail",t);case 4:case"end":return a.stop()}},null,this)}})}),define("ai/page/market-buyer/service/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-service-detail-content">\n                <h2>服务详情</h2>\n                <div class="section">\n                    <h3 class="section-title">基本信息</h3>\n                    <div class="basic-info">\n                        <table class="info-table">\n                            <tbody>\n                                <tr>\n                                    <td>服务名称：</td>\n                                    <td>{{detail.productName}}</td>\n                                    <td>类型：</td>\n                                    <td>{{detail.productType | productTypeLabel}}</td>\n                                </tr>\n                                <tr>\n                                    <td>创建时间：</td>\n                                    <td>{{detail.createTime}}</td>\n                                    <td>总体使用情况：</td>\n                                    <td>{{ detail.totalUsage || \'-\' }}</td>\n                                </tr>\n                                <tr>\n                                    <td>到期时间：</td>\n                                    <td>{{detail.expireTime}}</td>\n                                    <td>使用方式：</td>\n                                    <td>\n                                        <a s-if="detail.productInstruction" href="{{detail.productInstruction}}" target="_blank">使用指南</a>\n                                        <span s-else>-</span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <div class="section">\n                    <h3 class="section-title">服务信息</h3>\n                    <xui-table datasource="{{detail.orderList}}" schema="{{table.schema}}">\n                        \x3c!-- status --\x3e\n                        <span slot="c-status" class="ai-market-order-status {{ row.status | orderStatuColor }}">\n                            <span>{{ row.status | orderStatuLabel }}</span>\n                        </span>\n                        \x3c!-- ctrl --\x3e\n                        <template slot="c-ctrl">\n                            <a href="#/ai/market/buyer/order/detail~orderId={{row.orderId}}">订单详情</a>\n                        </template>\n                    </xui-table>\n                </div>\n                <div class="section">\n                    <h3 class="section-title">服务商信息</h3>\n                    <div class="provider-info">\n                        <table class="info-table">\n                            <tbody>\n                                <tr>\n                                    <td>服务商名称：</td>\n                                    <td>{{detail.providerName}}</td>\n                                    <td>客服电话：</td>\n                                    <td>{{detail.providerMobile}}</td>\n                                </tr>\n                                <tr>\n                                    <td>客服服务时间：</td>\n                                    <td>{{providerServiceTime}}</td>\n                                    <td>客服邮件：</td>\n                                    <td>{{detail.providerEmail}}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market-buyer/service/list/index",["exports","module","babel-runtime/regenerator","ai/page/market-buyer/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","inf-ui/x/biz/XPager","ai/common/enums","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](r);module.exports=l["default"]({template:u["default"],components:{"xui-table":n.Table,"xui-xpager":d["default"],"xui-toastlabel":n.ToastLabel},filters:{enumTextFromVal:function(e,t){var a=t.fromValue(e);return a?a.text:"--"}},initData:function(){return{MarketProductType:s.MarketProductType,breadItem:[{title:"已购服务"}],table:{schema:[{name:"productName",label:"服务名称"},{name:"productType",label:"类型"},{name:"createTime",label:"创建时间"},{name:"ctrl",label:"操作"}],datasource:[]},page:{pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}}},created:function(){this.fetchCurrentPage()},handleSizeChange:function(e){var t=e.value;this.$$set({"page.pager.size":t,"page.pager.page":1}),this.fetchCurrentPage()},handlePageChange:function(e){var t=e.pageNo;this.$set("page.pager.page",t),this.fetchCurrentPage()},fetchCurrentPage:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.$get("page.pager"),a=t.page,i=t.size,s.next=5,e["default"].awrap(o.getAsyncTuple(this.ajax.getMarketBuyerServiceList({page:a,pageSize:i})));case 5:n=s.sent,n[0],r=n[1],this.$$set({"page.pager.size":r.pageSize,"page.pager.page":r.page,"page.pager.count":r.total,"table.datasource":r.items});case 9:case"end":return s.stop()}},null,this)}})}),define("ai/page/market-buyer/service/list/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-buyer-service-list-content">\n                <h2>服务列表</h2>\n                <xui-toastlabel class="service-tip">\n                    温馨提示：您新购买的服务，将在1分钟之内创建完成，如果服务列表还没有显示，请耐心等待。\n                </xui-toastlabel>\n                <div class="service-list-table-wrap">\n                    <xui-table datasource="{{table.datasource}}" schema="{{table.schema}}">\n                        \x3c!-- productName --\x3e\n                        <template slot="c-productName">\n                            <a href="#/ai/market/buyer/service/detail~productId={{row.productId}}">{{row.productName}}</a>\n                        </template>\n                        \x3c!-- productType --\x3e\n                        <template slot="c-productType">\n                            {{ row.productType | enumTextFromVal(MarketProductType) }}\n                        </template>\n                        \x3c!-- ctrl --\x3e\n                        <template slot="c-ctrl">\n                            <a href="#/ai/market/buyer/service/detail~productId={{row.productId}}" style="margin-right: 10px;">服务详情</a>\n                            <a href="{{Url.store.product}}/{{row.productUuid}}" target="_blank">再次购买</a>\n                        </template>\n                    </xui-table>\n                </div>\n                <div class="pager-wrap">\n                    <xui-xpager\n                        withPagerSize="{{true}}"\n                        pager="{=page.pager=}"\n                        on-pager-size-change="handleSizeChange"\n                        on-pager-change="handlePageChange"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/business/detail/detail",["exports","module","babel-runtime/core-js/object/keys","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./detail.tpl","lodash","moment","san-xui","ai/common/enums","./updateStatus/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](r),f=i["default"](s),m=i["default"](u);module.exports=d["default"]({template:c["default"],components:{"xui-table":o.Table,"xui-toastlabel":o.Toastlabel,"xui-tip":o.Tip,"update-status-dialog":m["default"]},filters:{getTextFromVal:function(e,t){var a=t.fromValue(e);return a?a.text:""},getArea:function(e,t){var a=p["default"].find(t,function(t){return t.value===e});return a?a.text:"-"},getStatuColor:function(e){var t=l.BusinessDockingStatus.fromValue(e);return t?t.color:""},dateTime:function(e){return f["default"](e).format("YY.MM.DD")},getMessage:function(e){if(p["default"].isEmpty(e))return"";return e.orderId||e.closeReason||e.detail||e.remark},getAllMessage:function(e){if(p["default"].isEmpty(e))return"";return'<div style="max-height: 140px;overflow-y: auto;word-break: break-all;">'+p["default"].values(e).reduce(function(e,t){return e+"<p>"+t+"</p>"})+"</div>"}},initData:function(){return{areaList:[],BusinessOrigin:l.BusinessOrigin,BusinessLevel:l.BusinessLevel,BusinessDockingStatus:l.BusinessDockingStatus,breadItem:[{title:"商机管理",url:"#/ai/market/business/list"},{title:"商机详情"}],open:!1,info:{businessId:"",providerName:"",productName:"",productUuid:"",packageInstance:"",contactName:"",contactMobile:"",description:"",from:l.BusinessOrigin.directional,level:l.BusinessLevel.normal,applyTime:"",status:l.BusinessDockingStatus.complete,progress:[]}}},computed:{ifDirectional:function(){return this.data.get("info.from")===l.BusinessOrigin.directional},ifNotDocked:function(){return this.data.get("info.status")===l.BusinessDockingStatus.not_docked},ifClose:function(){return this.data.get("info.status")===l.BusinessDockingStatus.close},details:function(){var t=p["default"].cloneDeep(this.data.get("info.progress"));if(p["default"].isEmpty(t))return[];var a={detail:function(e){return"详情："+e.detail},deal:function(e){return e.deal?"已成交":"已关闭"},tradeType:function(e){var t=l.BusinessTradeType.getTextFromValue(e.tradeType);return l.BusinessTradeType.ONLINE===e.tradeType?t:t+"：￥"+e.price},orderId:function(e){return"订单号："+e.orderId},remark:function(e){var t=e.remark;return t?"备注："+t:""},closeReason:function(e){var t=e.closeReason;return l.BusinessDockingFailureReason.getTextFromValue(t)||""},closeRemark:function(e){var t=e.closeRemark;return t?"备注："+t:""}};return t.map(function(e){return e.businessDetail}).map(function(t){var i={};return e["default"](t).forEach(function(e){a[e]&&(i[e]=a[e](t))}),i})}},inited:function(){this.on("getStoreUserInfo",this.fetchDetail)},fetchDetail:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.fetchAreaList());case 2:return a.next=4,t["default"].awrap(this.ajax.getMarketSellerBusinessDetail({businessId:this.$get("businessId")}));case 4:e=a.sent,this.$set("info",e);case 6:case"end":return a.stop()}},null,this)},fetchAreaList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketBuyerAddressDatasource());case 2:e=a.sent,this.$set("areaList",e.map(function(e){return{text:e.text,value:e.value}}));case 4:case"end":return a.stop()}},null,this)},toMarketProductPage:function(e){var t=e.productUuid,a=this.$get("Url").store.product+"/"+t;window.open(a)},updateStatus:function(){this.$set("open",!0)}})}),define("ai/page/market/business/detail/detail.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n        <app-view>\n            <app-sidebar />\n            <app-content>\n                <breadcrumb items="{{breadItem}}"></breadcrumb>\n                <div class="list-content ai-market-business-detail-content">\n                    <h2>商机详情</h2>\n                    <xui-toastlabel style="margin-top: 20px;" level="alert" s-if="ifNotDocked">\n                        温馨提示：AI市场持续为您提供商机，请尽快与客户联系！若商机状态超过1个工作日为“未对接”，可能影响您的市场信誉，且客户信息有被隐藏的风险。\n                    </xui-toastlabel>\n                    <xui-toastlabel style="margin-top: 20px;" level="normal" s-else>\n                        温馨提示：本商机来源{{ info.from | getTextFromVal(BusinessOrigin) }}，具体还请与客户详细沟通后记录情况\n                    </xui-toastlabel>\n                    \x3c!-- 基本信息 --\x3e\n                    <div class="section">\n                        <div class="section-title">基本信息</div>\n                        <table class="info-table">\n                            <tbody>\n                                <tr>\n                                    <td class="info-table-title">商机状态：</td>\n                                    <td colspan="2">\n                                        <span class="ai-market-business-docking-status {{ info.status | getStatuColor }}">\n                                            {{info.status | getTextFromVal(BusinessDockingStatus)}}\n                                        </span>\n                                        <xui-icon s-if="!ifClose" class="ai-market-business-update-status-icon" on-click="updateStatus()" name="edit" />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">商机等级：</td>\n                                    <td>\n                                        <span style="vertical-align: middle;">{{info.level | getTextFromVal(BusinessLevel)}}</span>\n                                        <xui-tip layer-width="200" style="margin-left: 7px;vertical-align: middle;" message="AI市场根据客户质量、采购规模为您标识商家价值，敬请参考" position="lt" />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">商机来源：</td>\n                                    <td colspan="2">{{info.from | getTextFromVal(BusinessOrigin)}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">触达时间：</td>\n                                    <td>{{info.applyTime}}</td>\n                                </tr>\n                                <tr s-if="ifDirectional">\n                                    <td class="info-table-title">目标商品：</td>\n                                    <td colspan="2">\n                                        <a on-click="toMarketProductPage(info)" href="javascript:void(0);">{{info.productName}}</a>\n                                    </td>\n                                </tr>\n                                <tr s-else>\n                                    <td class="info-table-title">推荐说明：</td>\n                                    <td class="wrap-text">{{info.recommendRemark}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">商机标题：</td>\n                                    <td class="wrap-text">{{info.title}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">采购数量：</td>\n                                    <td class="wrap-text">{{info.buyNum ? info.buyNum + info.buyUnit : \'详谈\'}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">商机描述：</td>\n                                    <td class="wrap-text">{{info.description}}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    \x3c!-- 买家信息 --\x3e\n                    <div class="section">\n                        <div class="section-title">买家信息</div>\n                        <table class="info-table">\n                            <tbody>\n                                <tr>\n                                    <td class="info-table-title">企业名称：</td>\n                                    <td colspan="2">{{info.company}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">业务联系人：</td>\n                                    <td colspan="2">{{info.contactName}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">联系电话：</td>\n                                    <td colspan="2">{{info.contactMobile}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">所在地区：</td>\n                                    <td colspan="2">{{info.area | getArea(areaList)}}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    \x3c!-- 商机对接进度 --\x3e\n                    <div class="section" s-if="!ifNotDocked">\n                        <div class="section-title">商机对接进度</div>\n                        <table class="info-table ai-market-business-progress-info">\n                            <tbody>\n                                <tr>\n                                    <td class="info-table-title">对接详情：</td>\n                                    <td colspan="2" class="business-progress">\n                                        <div class="business-progress-item" s-for="item, index in info.progress">\n                                            <div class="business-progress-item-time">\n                                                <span s-if="item.recordStatus === BusinessDockingStatus.not_docked" class="record-time">{{ item.recordTime | dateTime }}</span>\n                                                <xui-tip s-else inComponent="true" position="bc" layer-width="200" message="{{ details[index] | getAllMessage | raw }}">\n                                                    <span class="record-time">{{ item.recordTime | dateTime }}</span>\n                                                </xui-tip>\n                                            </div>\n                                            <div class="business-progress-item-status {{  index === 0 ? \'green\' : \'\' }}">\n                                                {{ item.recordStatus | getTextFromVal(BusinessDockingStatus) }}\n                                            </div>\n                                            <div class="business-progress-item-detail" s-if="index === 0">\n                                                <p>{{ details[0] | getMessage | raw }}</p>\n                                            </div>\n                                            <div s-if="index < info.progress.length - 1" class="business-progress-item-split-line"></div>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <update-status-dialog open="{=open=}" businessId="{{info.businessId}}" status="{{info.status}}"></update-status-dialog>\n            </app-content>\n        </app-view>\n    </div>\n'}),define("ai/page/market/business/detail/index",["exports","module","./detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/business/detail/updateStatus/index",["exports","module","./update","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/business/detail/updateStatus/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){var i=a["default"](t);module.exports=function(t){return new e["default"]({detail:[{validator:function(e,a,n){t.ifDocking&&i["default"].isEmpty(i["default"].trim(a))?n("请填写详情"):n()}}],price:[{validator:function(e,a,n){t.ifComplete&&t.ifOfflineTrade&&i["default"].isEmpty(t.price)?n("请输入订单金额"):n()}}],orderId:[{validator:function(e,a,n){t.ifComplete&&t.ifDeal&&!t.ifOfflineTrade&&i["default"].isEmpty(i["default"].trim(a))?n("请填写订单号"):n()}}]})}}),define("ai/page/market/business/detail/updateStatus/update",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./update.tpl","san-xui","ai/components/ImageUploader2","ai/components/NoValueChangeWrapper","ai/common/util","ai/common/enums","./rules","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=i["default"](a),f=i["default"](n),m=i["default"](s),h=i["default"](o),g=i["default"](d),v=i["default"](c);module.exports=p["default"]({template:f["default"],components:{"xui-dialog":r.Dialog,"xui-select":r.Select,"xui-form":r.Form,"xui-item":r.FormItem,"xui-textbox":r.TextBox,"xui-radiobox":r.RadioBox,"xui-boxgroup":r.BoxGroup,"xui-button":r.Button,"image-uploader2":m["default"],"no-value-change-wrapper":h["default"]},initData:function(){var e=this;return{BusinessTradeType:u.BusinessTradeType,BusinessDockingStatus:u.BusinessDockingStatus,BusinessDockingFailureReason:u.BusinessDockingFailureReason,BusinessTradeTypeList:u.BusinessTradeType.toArray(),BusinessDockingStatusList:u.BusinessDockingStatus.toArray().filter(function(e){return e.value!==u.BusinessDockingStatus.not_docked}),BusinessDockingFailureReasonList:u.BusinessDockingFailureReason.toArray(),dealList:[{text:"是",value:!0},{text:"否",value:!1}],uploadUrl:"/api/ai/market/common/fileUpload",businessId:"",status:u.BusinessDockingStatus.docking,businessDetail:{detail:"",deal:!0,tradeType:u.BusinessTradeType.ONLINE,orderId:"",price:"",certificate:"",certificateUrl:"",remark:"",closeReason:u.BusinessDockingFailureReason.unreachable,closeRemark:"",reason:""},handleCertificateBefore:function(e,t,a){v["default"].extend(t,{fileType:e.file.ext})},handleCertificateSuccess:function(t){t&&t.objectId?(e.$$set({"businessDetail.certificate":t.objectId,"businessDetail.certificateUrl":t.fileLink}),e.$set("certificateChanged",!0)):e.$$set({"businessDetail.certificate":"","businessDetail.certificateUrl":""})},errors:{},certificateChanged:!1,open:!1}},created:function(){},computed:{rules:function(){return g["default"]({price:this.data.get("businessDetail.price"),ifDocking:this.data.get("ifDocking"),ifClose:this.data.get("ifClose"),ifComplete:this.data.get("ifComplete"),ifDeal:this.data.get("ifDeal"),ifOfflineTrade:this.data.get("ifOfflineTrade")})},ifDeal:function(){return this.data.get("businessDetail.deal")},ifOfflineTrade:function(){return this.data.get("ifDeal")&&this.data.get("businessDetail.tradeType")===u.BusinessTradeType.OFFLINE},ifDocking:function(){return this.data.get("status")===u.BusinessDockingStatus.docking},ifClose:function(){return this.data.get("status")===u.BusinessDockingStatus.close},ifComplete:function(){return this.data.get("status")===u.BusinessDockingStatus.complete}},onCloseDialog:function(){this.$set("open",!1),this.fire("close")},methodHook:{handleCertificateImageUrlChange:function(e){e?this.$set("errors",null):this.$$set({"businessDetail.certificate":"","businessDetail.certificateUrl":""})}},changeTradeType:function(e){this.$set("businessDetail.tradeType",e),e===u.BusinessTradeType.ONLINE&&this.$set("errors.price",null)},save:function(){var a,i,n,r,s,o,u,d,c,p;return e["default"].async(function(f){for(var m=this;;)switch(f.prev=f.next){case 0:return a=undefined,i={businessId:this.$get("businessId"),status:this.$get("status"),businessDetail:{}},n=this.$get("ifComplete")&&this.$get("ifDeal"),r=this.$get("ifComplete")&&!this.$get("ifDeal"),s=n&&!this.$get("ifOfflineTrade"),o=this.$get("ifComplete")&&this.$get("ifOfflineTrade"),u={detail:this.$get("ifDocking"),deal:this.$get("ifComplete"),tradeType:n,orderId:s,price:o,certificate:o,remark:o||r,closeReason:this.$get("ifClose"),closeRemark:this.$get("ifClose")},t["default"](u).filter(function(e){return u[e]}).forEach(function(e){var t=m.$get("businessDetail");t[e]!==undefined&&(i.businessDetail[e]=t[e])}),f.next=11,e["default"].awrap(l.getAsyncTuple(this.ref("statusForm").validateForm()));case 11:if(d=f.sent,!(a=d[0])){f.next=16;break}return this.jumpToError(a),f.abrupt("return");case 16:return f.next=18,e["default"].awrap(l.getAsyncTuple(this.ajax.updateMarketSellerBusinessStatus(i)));case 18:if(c=f.sent,!(a=c[0])){f.next=25;break}return p=a.global?"提交失败："+a.global:"提交失败",this.$toast(p,{messageType:"error"}),a.field&&(l.jumpToError(a.field),this.$set("errors",a.field)),f.abrupt("return");case 25:this.$toast("保存成功"),this.$reload(),this.fire("confirm"),this.$set("open",!1);case 29:case"end":return f.stop()}},null,this)}})}),define("ai/page/market/business/detail/updateStatus/update.tpl",[],function(){return'<template>\n    <xui-dialog title="更新商机状态" open="{=open=}" width="500">\n        <div class="ai-market-business-update-status">\n            <xui-form s-ref="statusForm" rules="{{rules}}" errors="{{errors}}">\n                \x3c!-- 对接状态 --\x3e\n                <xui-item label="对接状态：" name="status">\n                    <xui-select width="90" datasource="{{BusinessDockingStatusList}}" value="{=status=}" />\n                    <p s-if="ifComplete" style="color: #999;font-size: 12px;">记录成交结果，有利于您的商品搜索排序、流量推广。</p>\n                </xui-item>\n\n                \x3c!-- 对接详情 --\x3e\n                <xui-item s-if="ifDocking" label="对接详情：" name="detail">\n                    <xui-textbox multiline="{{true}}" width="370" height="120" limit-length="{{500}}" value="{=businessDetail.detail=}" placeholder="描述客户需求内容，对接的情况，有助于AI市场提供支持。"></xui-textbox>\n                </xui-item>\n\n                <template s-if="ifClose">\n                    \x3c!-- 关闭原因 --\x3e\n                    <xui-item label="关闭原因" name="closeReason">\n                        <xui-select datasource="{{BusinessDockingFailureReasonList}}" value="{=businessDetail.closeReason=}" />\n                    </xui-item>\n                    \x3c!-- 备注 --\x3e\n                    <xui-item label="备注：" name="closeRemark">\n                        <xui-textbox multiline="{{true}}" width="370" height="120" limit-length="{{500}}" value="{=businessDetail.closeRemark=}" placeholder="记录原因，有助于AI市场为您提供更多支持。"></xui-textbox>\n                    </xui-item>\n                </template>\n\n                <template s-if="ifComplete">\n                    \x3c!-- 是否成交 --\x3e\n                    <xui-item label="是否成交：" name="deal">\n                        <xui-boxgroup box-type="radio" datasource="{{dealList}}" value="{=businessDetail.deal=}" />\n                    </xui-item>\n                    \x3c!-- 交易方式 --\x3e\n                    <xui-item label="交易方式：" name="price" s-if="ifDeal">\n                        <template s-for="item, index in BusinessTradeTypeList">\n                            <no-value-change-wrapper>\n                                <xui-radiobox style="margin-left: {{index === 0 ? \'0\' : \'30px\'}}" checked="{{businessDetail.tradeType === item.value}}" name="tradeType" title="{{item.text}}" on-change="changeTradeType(item.value)"></xui-radiobox>\n                            </no-value-change-wrapper>\n                            <xui-textbox style="margin-left: 10px;" s-if="item.value === BusinessTradeType.OFFLINE" placeholder="请输入订单金额" type="number" width="100" value="{=businessDetail.price=}"></xui-textbox>\n                            <span s-if="item.value === BusinessTradeType.OFFLINE">元</span>\n                        </template>                        \n                    </xui-item>\n                    \x3c!-- 关联订单号 --\x3e\n                    <xui-item label="关联订单号：" name="orderId" s-if="ifDeal && !ifOfflineTrade">\n                        <xui-textbox width="370" value="{=businessDetail.orderId=}" placeholder="请输入正确的订单号"></xui-textbox>\n                    </xui-item>\n                    \x3c!-- 底单凭证 --\x3e\n                    <xui-item label="底单凭证：" name="certificate" s-if="ifOfflineTrade">\n                        <image-uploader2 before="{{handleCertificateBefore}}" success="{{handleCertificateSuccess}}" url="{{uploadUrl}}" img-url="{{businessDetail.certificateUrl}}" on-change="handleCertificateImageUrlChange" size-limit="{{10*1024*1024}}" />\n                    </xui-item>\n                    \x3c!-- 备注 --\x3e\n                    <xui-item label="备注：" name="remark" s-if="ifOfflineTrade || !ifDeal">\n                        <xui-textbox multiline="{{true}}" width="370" height="78" limit-length="{{500}}" value="{=businessDetail.remark=}"></xui-textbox>\n                    </xui-item>\n                </template>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="save" skin="primary">确认</xui-button>\n            <xui-button on-click="onCloseDialog">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n    '}),define("ai/page/market/business/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/business/list/list",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","lodash","san-xui","inf-ui/x/biz/XPager","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](n),c=a["default"](s);module.exports=l["default"]({template:u["default"],components:{"xui-table":r.Table,"xui-rangecalendar":r.RangeCalendar,"xui-toastlabel":r.Toastlabel,"xui-xpager":c["default"],"xui-tip":r.Tip},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=o.BusinessDockingStatus.fromValue(e);return t?t.color:""}},initData:function(){return{breadItem:[{title:"商机管理"}],BusinessOrigin:o.BusinessOrigin,BusinessLevel:o.BusinessLevel,BusinessDockingStatus:o.BusinessDockingStatus,table:{loading:!1,schema:[{name:"businessId",label:"商机编号",width:"250"},{name:"company",label:"企业名称"},{name:"contact",label:"联系人"},{name:"from",label:"商机来源"},{name:"level",label:"商机等级",filter:{options:[{text:"全部",value:""},{text:"未标识",value:"undefined"},{text:"普通",value:"normal"},{text:"优质",value:"great"},{text:"可忽略",value:"other"}]}},{name:"applyTime",label:"触达时间",sortable:!0},{name:"status",label:"状态",filter:{options:[{text:"全部",value:""},{text:"未对接",value:"not_docked"},{text:"对接中",value:"docking"},{text:"已转化",value:"complete"},{text:"已关闭",value:"close"}]}},{name:"ctl",label:"操作"}],datasource:[]},sort:"desc",filter:{level:"",status:""},pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]},overview:{},storeData:{}}},computed:{overviewData:function(){var e=this.data.get("overview");return[{name:"totalNum",label:"商机总量",value:e.totalNum},{name:"monthAdditional",label:"30天新增",value:e.monthAdditional},{name:"responseRank",label:"30天响应速度排名",value:e.responseRank,message:"AI市场所有供应商商机响应速度排名，每周日更新，商机获得少于3个暂不纳入排名。"},{name:"responseTime",label:"30天平均响应时间",value:e.responseTime+"分钟",message:"是商机状态第一次变更时间到触达时间，每周日24点对近30天商机进行计算。"}]}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},methodHook:{getStoreUserInfo:function(){var e=this;this.fetchStoreData(),["filter","sort"].forEach(function(t){return e.watch(t,function(){return e.fetchCurrentPage()})}),this.fetchBusinessOverview(),this.fetchCurrentPage()},fetchStoreData:function(){return e["default"].async(function(t){for(var a=this;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ajax.getMarketOperationStatus().then(function(e){return a.$set("storeData",e.product)}));case 2:case"end":return t.stop()}},null,this)},fetchBusinessOverview:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketSellerBusinessOverview());case 2:t=a.sent,this.$set("overview",t);case 4:case"end":return a.stop()}},null,this)},fetchCurrentPage:d["default"].debounce(function(){var t,a,i,n,r,s,o,l;return e["default"].async(function(u){for(;;)switch(u.prev=u.next){case 0:return t=this.$get("pager"),a=t.page,i=t.size,n=this.$get("filter"),r=n.level,s=n.status,o=this.$get("sort"),this.$set("table.loading",!0),u.next=10,e["default"].awrap(this.ajax.getMarketSellerBusinessList({page:a,pageSize:i,level:r,status:s,sort:o}));case 10:l=u.sent,this.$$set({"table.loading":!1,"pager.page":l.page,"pager.size":l.pageSize,"pager.count":l.total,"table.datasource":l.items});case 12:case"end":return u.stop()}},null,this)},50),onPageSizeChange:function(e){var t=e.value;this.$set("pager.size",t),this.$set("pager.page",1),this.fetchCurrentPage()},onPageChange:function(e){var t=e.pageNo;this.$set("pager.page",t),this.fetchCurrentPage()},onFilter:function(e){var t=this;d["default"].keys(this.$get("filter")).forEach(function(a){e.hasOwnProperty(a)&&t.$set("filter."+a,e[a])})},onSort:function(){var e=this.$get("sort");this.$set("sort","desc"===e?"asc":"desc")},manage:function(e){this.$aiRedirect("business/detail",{businessId:e})},goToPublish:function(){this.$aiRedirect("product/publish")},"delete":function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.$confirm({title:"删除提示",content:"选中的商机删除后无法恢复！请确定是否要删除这条商机？"}));case 2:return a.next=4,e["default"].awrap(this.ajax.deleteMarketSellerBusiness({businessId:t}));case 4:this.$toast("删除成功"),this.$reload();case 6:case"end":return a.stop()}},null,this)}}})}),define("ai/page/market/business/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-market-business-list-content">\n                <h2>\n                    <span class="title">商机管理</span>\n                    <span class="notification">通知：2019.9需求广场重磅上线，商机无需等待，一键认领即可获得，<a href="https://aim.baidu.com/requirement/square" target="_blank">立即体验></a></span>\n                </h2>\n                <xui-toastlabel style="margin: 20px 0;" level="alert" s-if="storeData.release <= 0">\n                    您的店铺目前还没有上架商品，AI市场无法向您推送商机与客户，请先<a href="javascript:void(0)" on-click="goToPublish()">发布商品</a>。\n                </xui-toastlabel>\n                <xui-toastlabel style="margin: 20px 0;" level="normal" s-else>\n                    温馨提示：AI市场为您提供如下商机，请您在一个工作日内与客户联系并更新商机状态；每周Top10响应最及时的服务商将被AI市场推荐，商机获得量比同类服务商高出约50%。\n                </xui-toastlabel>\n                <div class="section">\n                    <div class="ai-market-business-overview">\n                        <span class="overview-title">商机数据</span>\n                        <div class="overview-item" s-for="item in overviewData">\n                            <span class="overview-item-data">{{ item.value }}</span>\n                            <span class="overview-item-label">\n                                <span>{{ item.label }}</span>\n                                <xui-tip s-if="item.message" layer-width="250" message="{{ item.message }}" position="bc"></xui-tip>\n                            </span>\n                        </div>\n                    </div>\n                    <xui-table loading="{{table.loading}}" schema="{{table.schema}}" datasource="{{table.datasource}}" on-filter="onFilter" on-sort="onSort">\n                        <span style="display: inline-block;" slot="c-from">\n                            {{ row.from | getLabelByValue(BusinessOrigin) }}\n                        </span>\n                        <span style="display: inline-block;" slot="c-level">\n                            {{ row.level | getLabelByValue(BusinessLevel) }}\n                        </span>\n                        <span class="ai-market-business-docking-status {{ row.status | getStatuColor }}" slot="c-status">\n                            {{ row.status | getLabelByValue(BusinessDockingStatus) }}\n                        </span>\n                        <span style="display: inline-block;" slot="c-ctl">\n                            <a on-click="manage(row.businessId)" href="javascript:void(0)">管理</a>\n                            <a s-if="row.status !== BusinessDockingStatus.docking" on-click="delete(row.businessId)" href="javascript:void(0)">删除</a>\n                        </span>\n\n                        <div class="ui-table-body-nodata" slot="empty">\n                            <div class="store-no-data">\n                                <div>暂无商机数据，请发布商品</div>\n                                <a href="javascript:void(0)" on-click="goToPublish()">马上发布&gt;</a>\n                            </div>\n                        </div>\n                    </xui-table>\n\n                    <div class="pager-wrap">\n                        <xui-xpager\n                            withPagerSize="{{true}}"\n                            pager="{{pager}}"\n                            on-pager-size-change="onPageSizeChange"\n                            on-pager-change="onPageChange"\n                        />\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/comment/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/comment/list/list",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/object/keys","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","lodash","san-xui","ai/common/util","inf-ui/x/biz/XPager","moment","ai/common/enums","ai/components/StarGroup/index","ai/components/ImagePreview"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m){var h=r["default"](n),g=r["default"](s),v=r["default"](o),x=r["default"](d),b=r["default"](c),y=r["default"](f),k=r["default"](m),T={commentScore:{label:"商品满意程度",details:["客户对您的商品满意度较低，请根据客户评价及时调优您的商品","您商品的满意程度一般，建议在商品效果与客户体验上进一步改良","客户对您的商品满意度较高，请继续保持打造卓越口碑"]},deliveryScore:{label:"服务态度",details:["服务态度直接影响商品销量与口碑，请您重视并予以改进","您的服务态度评分一般，建议在回复及时性与沟通态度上进一步提高","您的服务态度评分较高，请持续保持您的优势行为"]},serviceScore:{label:"交付速度",details:["客户对您的交付速度评分较低，请及时交付并与客户保持良好沟通","您的交付速度评分一般，建议提高交付速度，比同行更快一步","您的交付速度评分较高，请继续保持，在同行中脱颖而出"]}};module.exports=h["default"]({template:g["default"],components:{"xui-table":l.Table,"xui-rangecalendar":l.RangeCalendar,"xui-xpager":x["default"],"xui-textbox":l.TextBox,"star-group":y["default"],"image-preview":k["default"]},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},formatTime:function(e){return b["default"](e).format("YYYY-MM-DD")}},initData:function(){return{commentScoreData:{},replyData:{value:{},status:{}},preview:{open:!1,url:""},rangecalendar:{value:{begin:b["default"]().add(-7,"days").toDate(),end:new Date},range:{begin:new Date(2e3,1,1),end:new Date}},table:{loading:!1,datasource:[]},filter:{commentType:""},pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}},computed:{tableSchema:function(){return[{name:"commentType",label:"全部评分",filter:{options:p.CommentScoreType.toArray()}},{name:"commentContent",label:"评论内容",width:"360"},{name:"contactInfo",label:"评价人信息"},{name:"tradeInfo",label:"交易信息"},{name:"ctl",label:"操作"}]},commentTotalScoreData:function(){var e=this.data.get("commentScoreData"),a=[[0,2],[2,4],[4,5]];return t["default"](T).map(function(t){var i={label:v["default"].get(T,"["+t+"].label"),star:(10*e[t]-10)/10,score:e[t]||"-",detail:"-"};if(!T[t]||!e[t])return i;var n=v["default"].get(T,"["+t+"].details");return a.forEach(function(a,r){a[0]<e[t]&&a[1]>=e[t]&&(i.detail=n[r])}),i})}},created:function(){return a["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:return e.next=2,a["default"].awrap(i["default"].all([this.fetchCurrentPage(),this.fetchCommentScore()]));case 2:["rangecalendar.value","filter"].forEach(function(e){return t.watch(e,function(){return t.fetchCurrentPage(1)})}),this.fetchCurrentPage();case 5:case"end":return e.stop()}},null,this)},methodHook:{previewImage:function(e){this.$set("preview",{open:!0,url:e})},fetchCommentScore:function(){var e;return a["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].awrap(this.ajax.getMarketCommentScore());case 2:(e=t.sent)&&this.$set("commentScoreData",e);case 4:case"end":return t.stop()}},null,this)},fetchCurrentPage:v["default"].debounce(function(e){var t,i,n,r,s,o,l,u,d,c,p;return a["default"].async(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=this.$get("pager"),i=t.page,n=t.size,!e||+i==+e){f.next=7;break}return this.$set("pager.page",e),this.fetchCurrentPage(),f.abrupt("return");case 7:return r=this.$get("rangecalendar.value"),s=r.begin,o=r.end,l=b["default"](s).format("YYYY-MM-DD"),u=b["default"](o).format("YYYY-MM-DD"),d=this.$get("filter"),c=d.commentType,this.$set("table.loading",!0),f.next=17,a["default"].awrap(this.ajax.getMarketCommentList({page:i,pageSize:n,startTime:l,endTime:u,commentType:c}));case 17:p=f.sent,this.$$set({"table.loading":!1,"pager.page":p.page,"pager.size":p.pageSize,"pager.count":p.total,"table.datasource":p.items});case 19:case"end":return f.stop()}},null,this)},50),onPageSizeChange:function(e){var t=e.value;this.$set("pager.size",t),this.$set("pager.page",1),this.fetchCurrentPage()},onPageChange:function(e){var t=e.pageNo;this.$set("pager.page",t),this.fetchCurrentPage()},onFilter:function(e){var t=this;v["default"].keys(this.$get("filter")).forEach(function(a){e.hasOwnProperty(a)&&t.$set("filter."+a,e[a])})},cancelReply:function(t){var a,i=v["default"].cloneDeep(this.$get("replyData.status"));this.$set("replyData.status",e["default"]({},i,(a={},a[t]=!1,a)))},replyInputHandle:function(t,a){var i,n=t.value,r=v["default"].cloneDeep(this.$get("replyData.value"));this.$set("replyData.value",e["default"]({},r,(i={},i[a]=n,i)))},confirmReply:function(e){var t,i,n,r,s;return a["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=this.$get("replyData.value."+e)){o.next=4;break}return this.$toast("请输入回复",{messageType:"error"}),o.abrupt("return");case 4:return o.next=6,a["default"].awrap(u.getAsyncTuple(this.ajax.replyMarketComment({commentId:e,reply:t})));case 6:if(i=o.sent,!(n=i[0])){o.next=13;break}return r=n.global?"提交失败："+n.global:"提交失败",this.$toast(r,{messageType:"error"}),n.field&&(s=v["default"].values(n.field)[0],this.$toast(s,{messageType:"error"})),o.abrupt("return");case 13:this.$toast("回复成功"),this.$reload();case 15:case"end":return o.stop()}},null,this)},reply:function(t){var a,i=v["default"].cloneDeep(this.$get("replyData.status"));this.$set("replyData.status",e["default"]({},i,(a={},a[t]=!0,a)))},goToOrderDetail:function(e){this.$aiRedirect("order/detail",{orderId:e})}}})}),define("ai/page/market/comment/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content class="ai-market-main-content">\n            <div class="list-content ai-store-content ai-market-comment-list-content">\n                <h2 class="ai-market-page-header">评论管理</h2>\n                <div class="section">\n                    <div class="comment-score-wrap">\n                        <div class="comment-score-item" s-for="item in commentTotalScoreData">\n                            <span class="comment-score-item-label">{{ item.label }}</span>\n                            <star-group mode="show" activeIndex="{{ item.star }}"></star-group>\n                            <span class="comment-score-item-score">{{ item.score }}分</span>\n                            <span class="comment-score-item-detail">{{ item.detail }}</span>\n                        </div>\n                    </div>\n                    <div class="filter-wrap">\n                        <span>评价时间：</span>\n                        <xui-rangecalendar value="{=rangecalendar.value=}" range="{=rangecalendar.range=}" shortcut="{{false}}" />\n                    </div>\n                    <xui-table loading="{{table.loading}}" schema="{{tableSchema}}" datasource="{{table.datasource}}" on-filter="onFilter">\n                        <span style="display: inline-block;" slot="c-commentType">\n                            {{ row.commentScore }}分\n                        </span>\n                        <div class="comment-content" slot="c-commentContent">\n                            <p>{{ row.commentDetail }}</p>\n                            <div class="image-wrap">\n                                <img s-for="imgUrl in row.commentImage" on-click="previewImage(imgUrl)" src="{{ imgUrl }}" />\n                            </div>\n                            <span class="comment-time">{{ row.commentTime }}</span>\n                        </div>\n                        <div class="contact-info" slot="c-contactInfo">\n                            <p>{{ row.commentName }}</p>\n                            <p class="comment-mobile">{{ row.commentMobile }}</p>\n                            <p>{{ row.company }}</p>\n                        </div>\n                        <div slot="c-tradeInfo">\n                            <a on-click="goToOrderDetail(row.orderId)" href="javascript:void(0);">订单号{{ row.orderId }}</a>\n                            <p class="comment-product-name">{{ row.productName }}</p>\n                            <p>{{ row.packageName }}</p>\n                        </div>\n                        <div slot="c-ctl">\n                            <template s-if="!row.reply">\n                                <div s-if="replyData.status[row.commentId]" class="reply-wrap">\n                                    <xui-textbox multiline="{{true}}" limit-length="{{150}}" height="100" type="text" width="140" placeholder="谢谢，我们会做得更好！" value="{{replyData.value[row.commentId]}}" on-input="replyInputHandle($event, row.commentId)"></xui-textbox>\n                                    <div class="reply-btn-wrap">\n                                        <a on-click="confirmReply(row.commentId)" href="javascript:void(0);">确认</a>\n                                        <a style="color: #666;" on-click="cancelReply(row.commentId)" href="javascript:void(0);">取消</a>\n                                    </div>\n                                </div>\n                                <a s-else on-click="reply(row.commentId)" href="javascript:void(0)">回复</a>\n                            </template>\n                            <p s-else>回复：{{ row.reply }}</p>\n                        </div>\n                    </xui-table>\n\n                    <div class="pager-wrap">\n                        <xui-xpager\n                            withPagerSize="{{true}}"\n                            pager="{{pager}}"\n                            on-pager-size-change="onPageSizeChange"\n                            on-pager-change="onPageChange"\n                        />\n                    </div>\n                </div>\n            </div>\n            <image-preview open="{{preview.open}}" url="{{preview.url}}" />\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/hooks",["exports","ai/common/enums","lodash","babel-runtime/helpers/interop-require-default"],function(exports,e,t,a){function i(t){t===e.StoreProviderStatus.REVIEWING?$('[sidetype="register-product"]').show():$('[sidetype="register-product"]').hide()}exports.__esModule=!0;var n;exports.judgeAuthRedirect=function(e){var t=s[e],a=window.location.hash;if(t.allow&&t.allow.length&&!r["default"].some(t.allow,function(e){return~a.indexOf(e)}))return t.redirect;if(t.disable&&t.disable.length&&r["default"].some(t.disable,function(e){return~a.indexOf(e)}))return t.redirect},exports.getCacheProviderAvailable=function(){var t=localStorage[o];return!t||+t==+e.StoreProviderStatus.SUCCESS},exports.limitSideBarVisibleByCache=function(){i(+window.localStorage[o]||e.StoreProviderStatus.NONE)},exports.limitSideBarVisible=i;var r=a["default"](t),s=(n={},n[e.StoreProviderStatus.NONE]={allow:["provider/register"],redirect:"provider/register"},n[e.StoreProviderStatus.REVIEWING]={allow:["provider/register","product/list","product/publish","product/stock"],redirect:"provider/register"},n[e.StoreProviderStatus.SUCCESS]={disable:["provider/register"],redirect:"overview/index"},n[e.StoreProviderStatus.FAILED]={allow:["provider/register"],redirect:"provider/register"},n),o="AI_MARKET_PROVIDER_STATUS_CACHE";exports.AI_MARKET_PROVIDER_STATUS_CACHE=o}),define("ai/page/market/index",["exports","module","babel-runtime/regenerator","ai/common/basePage","babel-runtime/helpers/interop-require-default","san-xui","ai/components/EmptyLayer","ai/common/util","ai/common/enums","./hooks"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](n),d=a["default"](r),c={color:"unavailable",text:"",alias:"LOADING"};module.exports=function(t){return d["default"].mixin(t,{components:{"xui-toastlabel":i.ToastLabel,"empty-layer":u["default"]},initData:function(){var e;return{loadingMarketUserInfo:!0,marketUserInfo:{providerId:"",providerName:"",providerType:s.StoreProviderType.COMPANY,providerStatus:null,shopId:""},labels:(e={},e[s.StoreProviderType.COMPANY]={providerTarget:"企业",providerType:"企业资质信息",providerName:"企业名称",providerSite:"企业网站",providerEmail:"企业邮箱",providerAddress:"企业地址",providerScale:"企业规模",providerImage:"营业执照扫描件",providerLicense:"营业执照注册号",plsEnterProviderLicense:"请输入企业营业执照注册号"},e[s.StoreProviderType.ORGANIZATION]={providerTarget:"组织机构",providerType:"组织机构资质信息",providerName:"组织机构名称",providerSite:"组织机构网站",providerEmail:"组织机构邮箱",providerAddress:"组织机构地址",providerScale:"组织机构规模",providerImage:"组织机构代码扫描件",providerLicense:"组织机构代码",plsEnterProviderLicense:"请输入组织结构代码"},e)}},computed:{status:function(){return"SUCCESS"===this.data.get("provider").alias?s.StoreStatus.fromValue(s.StoreStatus.SETTLED):s.StoreStatus.fromValue(s.StoreStatus.UNSETTLED)},finalStatus:function(){var e=this.data.get("marketUserInfo.providerFinalStatus");return s.MarketProviderFinalStatus.fromValue(e)||c},shopFinalStatus:function(){var e=this.data.get("marketUserInfo.shopFinalStatus");return s.MarketShopFinalStatus.fromValue(e)||c},provider:function(){return s.StoreProviderStatus.fromValue(this.data.get("marketUserInfo.providerStatus"))||c},isProviderAvailable:function(){return this.data.get("loadingMarketUserInfo")||this.data.get("marketUserInfo.providerStatus")===s.StoreProviderStatus.SUCCESS},label:function(){return this.data.get("labels")[this.data.get("marketUserInfo.providerType")]}},inited:function(){o.limitSideBarVisibleByCache()},attached:function(){var t,a,i,n;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e["default"].awrap(r.getAsyncTuple(this.ajax.getStoreUserInfo()));case 2:if(t=s.sent,a=t[0],i=t[1],!a){s.next=8;break}return this.$set("loadingMarketUserInfo",!1),s.abrupt("return");case 8:if(this.$set("marketUserInfo",i),this.$set("loadingMarketUserInfo",!1),i.shopOffline?this.$alert("您的店铺涉嫌违规已被下线，请联系客服"):i.productOffline&&this.$alert("您有商品违规被下架，请重新编辑提交审核"),o.getCacheProviderAvailable()===this.$get("isProviderAvailable")){s.next=15;break}return localStorage[o.AI_MARKET_PROVIDER_STATUS_CACHE]=i.providerStatus,this.$reload(),s.abrupt("return");case 15:if(localStorage[o.AI_MARKET_PROVIDER_STATUS_CACHE]=i.providerStatus,!(n=o.judgeAuthRedirect(i.providerStatus))){s.next=20;break}return this.$aiRedirect(n),s.abrupt("return");case 20:o.limitSideBarVisible(i.providerStatus),this.fire("getStoreUserInfo");case 22:case"end":return s.stop()}},null,this)}}),l["default"](t)}}),define("ai/page/market/order/detail/DeliveryInfoTable/DeliveryInfoTable",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./DeliveryInfoTable.tpl","lodash","san-xui","ai/common/enums","ai/components/market/ExpressDetail/index"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](n),c=i["default"](r),p=i["default"](l),f="invoice";module.exports=u["default"]({template:d["default"],components:{"xui-table":s.Table,"xui-tip":s.Tip,"xui-select":s.Select,"express-status":p["default"]},filters:{getExpressStatus:function(e){var t=o.OrderExpressStatus.fromValue(e);return t&&t.text||"暂无物流信息"}},initData:function(){return{MarketProductOrderStatus:o.MarketProductOrderStatus,OrderExpressStatus:o.OrderExpressStatus,modifying:!1,initDeliveryInfo:[],type:"order",disabled:!1,deliveryInfo:[],status:"",orderId:"",expressNameDatasource:[],expressDetailOpen:!1,expressTypeList:[]}},computed:{addDisabled:function(){return this.data.get("type")===f&&this.data.get("deliveryInfo").length>=1},isModifying:function(){return this.data.get("statusDelivered")&&this.data.get("modifying")},isEditing:function(){return this.data.get("isModifying")||this.data.get("statusNeedDeliver")},deliverTableSchema:function(){var e=[{name:"expressName",label:"快递公司",width:255},{name:"expressNum",label:"快递单号"},{name:"status",label:"物流状态",width:120},{name:"remark",label:"备注"},{name:"ctl",label:"操作",width:100}];return!this.data.get("disabled")&&this.data.get("isEditing")||e.pop(),e},sendDeliveryDisabled:function(){return this.data.get("type")===f?1!==this.data.get("deliveryInfo").length:this.data.get("deliveryInfo").length<=0},statusNeedDeliver:function(){var e=this.data.get("status");return"order"===this.data.get("type")?o.MarketProductOrderStatus.NEED_DELIVER===e:this.data.get("type")===f&&c["default"].includes([o.MarketInvoiceStatus.APPLY,o.MarketInvoiceStatus.DELAY_INVOICE],e)},statusDelivered:function(){var e=this.data.get("status");return"order"===this.data.get("type")?o.MarketProductOrderStatus.DELIVERED===e:this.data.get("type")===f&&o.MarketInvoiceStatus.HAS_INVOICED===e},confirmText:function(){return this.data.get("type")===f?"确认":"确认发货"}},created:function(){var e,a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(this.ajax.getMarketExpressList());case 2:e=n.sent,a=e.map(function(e){return{text:e.expressName,value:e.expressType}}),this.$set("expressNameDatasource",a),i=this.$get("deliveryInfo").map(function(e){return"other"===e.expressType&&(e.otherExpressName=e.expressName),e}),this.$set("deliveryInfo",i),this.$set("expressTypeList",i.map(function(e){return e.expressType}));case 8:case"end":return n.stop()}},null,this)},change:function(e,t){this.$set("expressTypeList["+e+"]",t.value)},setDeliverTableEditing:function(e,t){if(!t){var a=this.$get("deliveryInfo["+e+"]");if(!a.expressName.length&&!a.expressNum.length&&!a.remark.length)return void this.deleteDeliverRow(e)}this.$set("deliveryInfo["+e+"].isEditing",t)},updateDeliverRow:function(e){var t,a=this,i=function(t){if(!a.ref("deliver-"+e+"-"+t))return"";var i=a.ref("deliver-"+e+"-"+t).data.get("value");return"string"==typeof i?i.trim():i},n=i("expressType"),r=i("expressNum"),s=i("remark"),o=i("otherExpressName");if(n.length&&r.length&&("other"!==n||o.length)){this.$$set((t={},t["deliveryInfo["+e+"].expressType"]=n,t["deliveryInfo["+e+"].expressName"]=function(e){var t="";return a.$get("expressNameDatasource").forEach(function(a){a.value===e&&(t=a.text)}),t}(n),t["deliveryInfo["+e+"].otherExpressName"]=o,t["deliveryInfo["+e+"].expressNum"]=r,t["deliveryInfo["+e+"].remark"]=s,t)),this.setDeliverTableEditing(e,!1)}else this.$toast("请将信息填写完整",{messageType:"error"})},deleteDeliverRow:function(e){this.data.splice("deliveryInfo",[e,1]),this.data.splice("expressTypeList",[e,1])},openExpressDetail:function(e){this.$set("currExpressNum",e),this.$set("expressDetailOpen",!0)},appendDeliverRow:function(){this.$get("deliveryInfo").some(function(e){return e.isEditing})?this.$toast("请先保存上一条信息",{messageType:"error"}):this.data.push("deliveryInfo",{expressType:"",expressName:"",expressNum:"",remark:"",isEditing:!0})},setDeliverInfoModifying:function(e){if(!e){var t=this.$get("initDeliveryInfo");this.$set("deliveryInfo",c["default"].cloneDeep(t))}this.$set("modifying",e)},editDeliveryInfo:function(e){this.submitDeliver()},modifyDeliveryInfo:function(){this.submitDeliver("\n            <h2>确认修改交付信息？</h2>\n            <p>确认后，“服务商已交付”时间将同步更新。</p>\n        ")},submitDeliver:function(a){var i,n,r,s,o;return t["default"].async(function(l){for(var u=this;;)switch(l.prev=l.next){case 0:if(!(i=this.$get("deliveryInfo")).some(function(e){return e.isEditing})){l.next=4;break}return this.$toast("请先保存信息",{messageType:"error"}),l.abrupt("return");case 4:if(i.forEach(function(e){"other"===e.expressType&&(e.expressName=e.otherExpressName),delete e.otherExpressName,delete e.isEditing}),!((n=this.$get("initDeliveryInfo")).length>0&&c["default"].isEqual(i,n))){l.next=9;break}return this.$set("modifying",!1),l.abrupt("return");case 9:if(r="\n            <h2>确认发货？</h2>\n            <p>确认后，服务状态将更新为“服务商已交付”。</p>\n        ",s="\n            <h2>确认发货？</h2>\n            <p>确认后，发票状态将更新为“已开票”</p>\n        ",o=function(e){return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.$confirm({title:"提示",width:600,content:e}));case 2:case"end":return a.stop()}},null,u)},"order"!==this.$get("type")){l.next=17;break}return l.next=15,t["default"].awrap(o(a||r));case 15:return l.next=17,t["default"].awrap(this.ajax.saveMarketOrderDelivery({orderId:this.$get("orderId"),deliveryInfo:i}));case 17:if(this.$get("type")!==f){l.next=22;break}return l.next=20,t["default"].awrap(o(s));case 20:return l.next=22,t["default"].awrap(this.ajax.saveMarketInvoiceDeliveryInfo(e["default"]({orderId:this.$get("orderId")},i[0])));case 22:this.$toast("提交成功"),this.fire("update");case 24:case"end":return l.stop()}},null,this)}})}),define("ai/page/market/order/detail/DeliveryInfoTable/DeliveryInfoTable.tpl",[],function(){return'<template>\n    <div class="deliver-info-table-wrap">\n        <xui-table class="deliver-info-table" schema="{{deliverTableSchema}}" datasource="{{deliveryInfo}}">\n            \x3c!-- expressName --\x3e\n            <template slot="c-expressName">\n                <span s-if="!deliveryInfo[rowIndex].isEditing">{{ row.otherExpressName || row.expressName }}</span>\n                <xui-select on-change="change(rowIndex, $event)" s-else s-ref="deliver-{{rowIndex}}-expressType" datasource="{{expressNameDatasource}}" value="{{row.expressType}}" ></xui-select>\n                <span s-if="deliveryInfo[rowIndex].isEditing && expressTypeList[rowIndex] === \'other\'">\n                    (<xui-textbox width="100" placeholder="请输入快递公司" s-ref="deliver-{{rowIndex}}-otherExpressName" value="{{row.otherExpressName}}" />)\n                </span>\n            </template>\n            \x3c!-- expressNum --\x3e\n            <template slot="c-expressNum">\n                <span s-if="!deliveryInfo[rowIndex].isEditing">{{row.expressNum}}</span>\n                <xui-textbox class="express-auto-width" s-else placeholder="请输入快递单号" s-ref="deliver-{{rowIndex}}-expressNum" value="{{row.expressNum}}" />\n            </template>\n            \x3c!-- remark --\x3e\n            <template slot="c-remark">\n                <span s-if="!deliveryInfo[rowIndex].isEditing">{{row.remark}}</span>\n                <xui-textbox class="express-auto-width" s-else placeholder="请输入备注信息，最多20字" s-ref="deliver-{{rowIndex}}-remark" value="{{row.remark}}" />\n            </template>\n            \x3c!-- 操作 --\x3e\n            <template slot="c-ctl" s-if="isEditing">\n                <template s-if="!deliveryInfo[rowIndex].isEditing">\n                    <a on-click="setDeliverTableEditing(rowIndex,true)" href="javascript:void(0)">编辑</a>\n                    <a on-click="deleteDeliverRow(rowIndex)" href="javascript:void(0)">删除</a>\n                </template>\n                <template s-else>\n                    <a on-click="updateDeliverRow(rowIndex)" href="javascript:void(0)">保存</a>\n                    <a on-click="setDeliverTableEditing(rowIndex,false)" href="javascript:void(0)">取消</a>\n                </template>\n            </template>\n            \x3c!-- status --\x3e\n            <template s-if="deliveryInfo[rowIndex].isEditing" slot="c-status">\n                <span>-</span>\n            </template>\n            <template s-else slot="c-status">\n                <span>{{row.status | getExpressStatus(OrderExpressStatus)}}</span>\n                <a s-if="row.status" href="javascript:void(0);" on-click="openExpressDetail(row.expressNum)">详情</a>\n                <xui-tip s-else position="bc" layer-width="310">\n                    <span>暂未查询到物流信息，请耐心等待。若超过2天未查询到物流信息，请核对快递单号无误后，向AI市场<a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>反馈。</span>\n                </xui-tip>\n            </template>\n        </xui-table>\n\n        <div s-if="isEditing && !addDisabled" class="add-param-wrap">\n            <span s-if="disabled" class="add-param disabled">\n                <xui-icon name="plus" />\n                <span>添加物流信息</span>\n                <xui-tip message="请先完成货品交付，再提供发票寄送信息。" />\n            </span>\n            <a s-else on-click="appendDeliverRow" class="add-param" href="javascript:void(0)">\n                <xui-icon name="plus" />\n                <span>添加物流信息</span>\n            </a>\n        </div>\n\n        <template s-if="!disabled">\n            <xui-button on-click="editDeliveryInfo" s-if="statusNeedDeliver" disabled="{{sendDeliveryDisabled}}" skin="primary">{{confirmText}}</xui-button>\n        \n            <template s-if="statusDelivered">\n                <xui-button on-click="setDeliverInfoModifying(true)" s-if="!isModifying">修改交付信息</xui-button>\n                <xui-button on-click="modifyDeliveryInfo" s-if="isModifying" disabled="{{sendDeliveryDisabled}}" skin="primary">确认修改</xui-button>\n                <xui-button on-click="setDeliverInfoModifying(false)" s-if="isModifying">取消</xui-button>\n            </template>\n        </template>\n    \n        <express-status s-if="expressDetailOpen" type="seller" open="{=expressDetailOpen=}" orderId="{{orderId}}" expressNum="{{currExpressNum}}" receiptAddress="{{receiptAddress}}" />\n    </div>\n</template>'}),define("ai/page/market/order/detail/DeliveryInfoTable/index",["exports","module","./DeliveryInfoTable","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/detail/detail",["exports","module","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./detail.tpl","san-xui","./OrderDetail/index","./InvoiceDetail/index","ai/components/EmptyLayer","ai/components/PagerHeader/index"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](n),c=t["default"](r),p=t["default"](s),f=t["default"](o);module.exports=l["default"]({template:u["default"],components:{"xui-tab":i.Tab,"xui-tab-panel":i.TabPanel,"order-detail":d["default"],"invoice-detail":c["default"],"empty-layer":p["default"],"pager-header":f["default"]},initData:function(){return{breadItem:[{title:"交易管理",url:"#/ai/market/order/list"},{title:"订单详情"}],orderId:""}},computed:{breadItem:function(){return[{title:"订单管理",url:"#/ai/market/order/list"},{title:"订单详情"}]}},handleBack:function(){this.$aiRedirect("order/list")}})}),define("ai/page/market/order/detail/detail.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        \x3c!-- <app-sidebar /> --\x3e\n        <app-content style="padding: 0;">\n            <pager-header back="返回订单管理" title="订单详情" on-back="handleBack" />\n            \x3c!-- <breadcrumb items="{{breadItem}}"></breadcrumb> --\x3e\n            <div class="list-content" style="padding: 0 122px 80px 118px;">\n                <xui-tab>\n                    <xui-tab-panel title="货品管理">\n                        <order-detail orderId="{{orderId}}" />\n                    </xui-tab-panel>\n                    <xui-tab-panel title="开票管理">\n                        <invoice-detail orderId="{{orderId}}" />\n                    </xui-tab-panel>\n                </xui-tab>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/order/detail/index",["exports","module","./detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/detail/InvoiceDetail/DelayInfo/index",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","moment","ai/common/util"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](r);module.exports=o["default"]({template:l["default"],components:{"xui-dialog":n.Dialog,"xui-toastlabel":n.Toastlabel,"xui-form":n.Form,"xui-item":n.FormItem,"xui-calendar":n.Calendar,"xui-textbox":n.TextBox},initData:function(){return{data:{},info:{delayTime:"",delayReason:""},errors:{},mode:"add",open:!1}},created:function(){var e=this.$get("data");if(e.delayTime){var t=e.delayTime,a=e.delayReason;this.$$set({mode:"modify",info:{delayTime:t,delayReason:a}})}else this.$set("mode","add")},onCloseDialog:function(){this.$set("open",!1),this.fire("close")},save:function(){var t,a,i,n,r;return e["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.$get("info"),a={orderId:this.$get("data.orderId"),delayTime:u["default"](t.delayTime).format("YYYY-MM-DD HH:mm:ss"),delayReason:t.delayReason},o.next=4,e["default"].awrap(s.getAsyncTuple(this.ajax.saveMarketInvoiceDelayInfo(a)));case 4:if(i=o.sent,!(n=i[0])){o.next=11;break}return r=n.global?"提交失败："+n.global:"提交失败",this.$toast(r,{messageType:"error"}),n.field&&(s.jumpToError(n.field),this.$set("errors",n.field)),o.abrupt("return");case 11:this.$toast("保存成功"),this.fire("confirm"),this.$set("open",!1);case 14:case"end":return o.stop()}},null,this)}})}),define("ai/page/market/order/detail/InvoiceDetail/DelayInfo/index.tpl",[],function(){return'<template>\n    <xui-dialog title="延迟开票" open="{=open=}" width="500">\n        <div class="market-transaction-invoice-delay-info-content">\n            <xui-toastlabel class="transaction-invoice-delay-info-toast-label" level="alert">\n                温馨提示：{{ mode === \'add\' ? \'若无法及时开具发票，请确认好延长时间后向客户说明原因\' : \'再次延迟开票时间，请与买家协商同意前提下修改\' }}\n            </xui-toastlabel>\n            <xui-form formData="{{info}}" errors="{{errors}}">\n                \x3c!-- 预计开票时间 --\x3e\n                <xui-item label="预计开票时间：" name="delayTime">\n                    <xui-calendar  value="{=info.delayTime=}"></xui-calendar>\n                </xui-item>\n                \x3c!-- 延时开票说明 --\x3e\n                <xui-item label="延时开票说明：" name="delayReason">\n                    <xui-textbox multiline="{{true}}" width="336" limit-length="{{100}}" value="{=info.delayReason=}"></xui-textbox>\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <ui-button disabled="{{!info.delayReason}}" on-click="save" skin="primary">确认</ui-button>\n            <ui-button on-click="onCloseDialog">取消</ui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/market/order/detail/InvoiceDetail/index",["exports","module","./InvoiceDetail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/detail/InvoiceDetail/InvoiceDetail",["exports","module","babel-runtime/regenerator","lodash","babel-runtime/helpers/interop-require-default","ai/common/component","bat-ria/tpl!./InvoiceDetail.tpl","san-xui","ai/common/enums","./DelayInfo/index","../DeliveryInfoTable/index"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](n),p=a["default"](o),f=a["default"](l);module.exports=d["default"]({template:c["default"],components:{"xui-button":r.Button,"xui-toastlabel":r.Toastlabel,"delay-info-dialog":p["default"],"delivery-info-table":f["default"]},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e,t){var a=t.fromValue(e);return a?a.color:""}},initData:function(){return{loading:!1,MarketInvoiceStatus:s.MarketInvoiceStatus,InvoiceTitleType:s.InvoiceTitleType,InvoiceTypeForInfo:s.InvoiceTypeForInfo,ifDelayInfoOpen:!1,orderId:"",info:{},open:!1,deliverySchema:[{name:"expressName",label:"快递公司"},{name:"expressNum",label:"快递单号"},{name:"remark",label:"备注"}]}},computed:{receiptAddress:function(){try{var e=this.data.get("info.receiptAddress");return[e.provinceLabel,e.cityLabel,e.areaLabel,e.street].join(" ").trim()}catch(t){return"-"}},deliveryDatasource:function(){var e=this.data.get("info.invoiceDelivery");return u["default"].isEmpty(e)?[]:[e]},deliveryDisabled:function(){return!~[s.MarketProductOrderStatus.DELIVERED,s.MarketProductOrderStatus.COMPLETED].indexOf(this.data.get("info.orderStatus"))},delayEnabled:function(){return~[s.MarketInvoiceStatus.APPLY,s.MarketInvoiceStatus.DELAY_INVOICE].indexOf(this.data.get("info.invoiceStatus"))},ifTaxDedutibility:function(){return this.data.get("info.invoiceType")===s.InvoiceTypeForInfo.TAX_DEDUCTIBLE},ifPerson:function(){return this.data.get("info.invoiceTitleType")===s.InvoiceTitleType.PERSON}},created:function(){this.fetchDetail()},fetchDetail:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.$set("loading",!0),a.prev=1,a.next=4,e["default"].awrap(this.ajax.getMarketInvoiceDetail({orderId:this.$get("orderId")}));case 4:t=a.sent,this.$set("info",t),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),this.$toast("获取发票信息失败");case 11:this.$set("loading",!1);case 12:case"end":return a.stop()}},null,this,[[1,8]])},openDelayDialog:function(){this.$set("ifDelayInfoOpen",!0)},onConfirmDialog:function(){this.fire("confirm"),this.$set("open",!1)}})}),define("ai/page/market/order/detail/InvoiceDetail/InvoiceDetail.tpl",[],function(){return'<template>\n    <div class="market-invoice-info-content">\n        <div s-if="info.orderId">\n            <xui-toastlabel class="invoice-info-toast-label" level="normal">温馨提示：请按照以下信息为客户开具发票</xui-toastlabel>\n            \x3c!-- 发票信息 --\x3e\n            <div class="section">\n                <h3 class="section-title">发票信息</h3>\n                <table class="info-table">\n                    <tbody>\n                        <tr>\n                            <td class="info-table-title">发票金额：</td>\n                            <td>{{info.orderPrice}}元</td>\n                            <td class="info-table-title">发票状态：</td>\n                            <td>\n                                <span class="ai-market-order-status {{ info.invoiceStatus | getStatuColor(MarketInvoiceStatus) }}">\n                                    {{ info.invoiceStatus | getLabelByValue(MarketInvoiceStatus) }}\n                                </span>\n                                <a s-if="!deliveryDisabled && delayEnabled" href="javascript:void(0);" on-click="openDelayDialog">延迟开票</a>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td class="info-table-title">申请发票时间：</td>\n                            <td>{{info.applyTime}}</td>\n                            <td class="info-table-title">发票类型：</td>\n                            <td>{{info.invoiceType | getLabelByValue(InvoiceTypeForInfo)}}</td>\n                        </tr>\n\n                        <template s-if="ifTaxDedutibility">\n                            <tr>\n                                <td class="info-table-title">发票抬头类型：</td>\n                                <td>{{info.invoiceTitleType | getLabelByValue(InvoiceTitleType)}}</td>\n                                <td class="info-table-title">公司名称：</td>\n                                <td>{{info.invoiceTitle}}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">公司地址：</td>\n                                <td>{{info.registerAddress}}</td>\n                                <td class="info-table-title">公司电话：</td>\n                                <td>{{info.registerPhone}}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">税号：</td>\n                                <td>{{info.taxNum}}</td>\n                                <td class="info-table-title">开户银行：</td>\n                                <td>{{info.bankName}}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">银行账户：</td>\n                                <td>{{info.bankAccount}}</td>\n                            </tr>\n                        </template>\n\n                        <template s-else-if="ifPerson">\n                            <tr>\n                                <td class="info-table-title">发票抬头类型：</td>\n                                <td>{{info.invoiceTitleType | getLabelByValue(InvoiceTitleType)}}</td>\n                                <td class="info-table-title">发票抬头：</td>\n                                <td>{{info.invoiceTitle}}</td>\n                            </tr>\n                        </template>\n\n                        <template s-else>\n                            <tr>\n                                <td class="info-table-title">发票抬头类型：</td>\n                                <td>{{info.invoiceTitleType | getLabelByValue(InvoiceTitleType)}}</td>\n                                <td class="info-table-title">公司名称：</td>\n                                <td>{{info.invoiceTitle}}</td>\n                            </tr>\n                            <tr>\n                                <td class="info-table-title">税号：</td>\n                                <td>{{info.taxNum}}</td>\n                            </tr>\n                        </template>\n                    </tbody>\n                </table>\n            </div>\n            \x3c!-- 发票寄送信息 --\x3e\n            <div class="section">\n                <h3 class="section-title">发票寄送信息</h3>\n                <table class="info-table">\n                    <tbody>\n                        <tr>\n                            <td class="info-table-title">收取人：</td>\n                            <td>{{ info.receiver }}</td>\n                        </tr>\n                        <tr>\n                            <td class="info-table-title">收取地址：</td>\n                            <td>{{ receiptAddress || \'-\' }}</td>\n                        </tr>\n                        <tr>\n                            <td class="info-table-title">手机号：</td>\n                            <td>{{ info.receiptMobile }}</td>\n                        </tr>\n                        <tr>\n                            <td class="info-table-title">电话：</td>\n                            <td>{{ info.receiptPhone || \'-\' }}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            \x3c!-- 发票交付信息 --\x3e\n            <div class="section">\n                <h3 class="section-title">发票交付信息</h3>\n                <table class="info-table">\n                    <tbody>\n                        <tr>\n                            <td class="info-table-title">交付信息：</td>\n                            <td colspan="7">\n                                <delivery-info-table\n                                    type="invoice"\n                                    on-update="fetchDetail"\n                                    disabled="{{deliveryDisabled}}"\n                                    deliveryInfo="{{deliveryDatasource}}"\n                                    initDeliveryInfo="{{deliveryDatasource}}"\n                                    status="{{info.invoiceStatus}}"\n                                    orderId="{{orderId}}" />\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class="invoice-empty ui-table-body-nodata" s-else-if="!loading">\n            <div class="app-list-no-data">\n                <div class="no-data-content">此订单暂无开票请求</div>\n            </div>\n        </div>\n        <delay-info-dialog s-if="ifDelayInfoOpen" on-confirm="fetchDetail" open="{=ifDelayInfoOpen=}" data="{{info}}" />\n    </div>\n</template>\n    '}),define("ai/page/market/order/detail/OrderDetail/CommonDelivery/CommonDelivery",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./CommonDelivery.tpl","lodash","san-xui","ai/components/MemoryUploader","ai/common/enums","async-validator"],function(exports,module,e,t,a,i,n,r,s,o,l){var u,d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](s),m=(u={},u[o.StoreDeliveryType.SDK]={des:"请详细填写SDK获取方式，保障用户可通过如下信息获取到SDK与SDK授权码",placeholder:"例如：SDK授权码、SDK授权码激活方式、SDK下载地址"},u[o.StoreDeliveryType.APPLICATION]={des:"请详细填写应用软件获取方式，保障用户可通过如下信息获取并正常使用应用软件",placeholder:"例如：应用软件下载与激活地址，应用软件授权码等"},u[o.StoreDeliveryType.COURSE]={des:"请详细填写课程获取方式，保障用户可通过如下信息获取到课程资源",placeholder:"例如：课程授权码、课程下载地址等"},u[o.StoreDeliveryType.DATA]={des:"请详细填写数据获取方式，保障用户可通过如下信息获取到数据资源",placeholder:"例如：数据下载地址等"},u[o.StoreDeliveryType.HUMAN]={des:"请详细填写人工交付内容的获取方式，保障用户可通过如下信息正确获取到人工交付内容",placeholder:"例如：人工交付内容的获取方式"},u);module.exports=d["default"]({template:c["default"],components:{"xui-form":r.Form,"xui-item":r.FormItem},initData:function(){return{StoreDeliveryType:o.StoreDeliveryType,disabled:!1,item:{},errors:null}},computed:{des:function(){var t=this.data.get("item"),a=o.StoreDeliveryType.fromValue(t.deliveryType),i=(a||{}).text+"：";return e["default"]({label:i},m[a.value])},rules:function(){return new l["default"]({content:[{required:!0,message:"请填写交付内容"}]})}},methodHook:{uploadDoc:function(){var e=this;this.$set("errors.docs",null);new f["default"]({url:"/api/ai/market/common/fileUpload",options:{compress:!1},sizeLimit:10485760,errors:{F_EXCEED_SIZE:"请选择10M以内的文件"},success:function(t){var a=t.objectId,i=t.fileName,n=t.fileLink;e.data.push("item.docs",{objectId:a,name:i,link:n})},events:{uploadBeforeSend:function(e,t,a){p["default"].extend(t,{fileType:e.file.ext})}}}).showDialog()},delDoc:function(e){this.$set("errors.docs",null),this.data.splice("item.docs",[e,1])},validate:function(){var e=this.ref("form");if(e)return e.validateForm()}}})}),define("ai/page/market/order/detail/OrderDetail/CommonDelivery/CommonDelivery.tpl",[],function(){return'<template>\n    \x3c!-- api交付 --\x3e\n    <xui-form s-if="item.deliveryType === StoreDeliveryType.API" style="padding-top: 0;">\n        <xui-item label="API交付：">\n            API由系统自动交付，无需服务商操作\n        </xui-item>\n    </xui-form>\n    \x3c!-- 其它 --\x3e\n    <xui-form s-else s-ref="form" formData="{{ item }}" rules="{{ rules }}" errors="{= errors =}" style="padding-top: 0;">\n        <xui-item s-if="disabled" name="content" label="{{ des.label }}">\n            <span>{{ item.content }}</span>\n        </xui-item>\n        <xui-item s-else name="content" label="{{ des.label }}" required>\n            <div>{{ des.des }}</div>\n            <div>\n                <xui-textbox value="{= item.content =}" multiline="{{true}}" limitLength="500" placeholder="{{ des.placeholder }}" />\n            </div>\n        </xui-item>\n        <xui-item name="docs" label="交付资料：" >\n            <div s-if="!disabled" style="margin-bottom: 10px;">\n                <xui-button on-click="uploadDoc" disabled="{{ item.docs.length>=5 }}" icon="plus">文件上传</xui-button>\n                <span style="margin-left:10px;color:#666;">支持所有格式文件上传</span>\n            </div>\n            <div s-for="file,fileIndex in item.docs">\n                <xui-icon name="pdc-task" style="vertical-align: bottom;" />\n                <span>{{ file.name }}</span>\n                <a href="{{ file.link }}" target="_blank" style="margin-left: 16px;">查看</a>\n                <a on-click="delDoc(fileIndex)" s-if="!disabled" href="javascript:void(0)" style="margin-left: 10px;">删除</a>\n            </div>\n        </xui-item>\n\n        <xui-item name="remark" label="交付备注：">\n            <span s-if="disabled">{{ item.remark }}</span>\n            <xui-textbox s-else value="{= item.remark =}" limitLength="100" width="500" />\n        </xui-item>\n    </xui-form>\n</template>\n'}),define("ai/page/market/order/detail/OrderDetail/CommonDelivery/index",["exports","module","./CommonDelivery","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/detail/OrderDetail/HardDelivery/HardDelivery",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./HardDelivery.tpl","lodash","san-xui","ai/common/enums","ai/components/market/ExpressDetail/index","jquery","async-validator","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=a["default"](t),p=a["default"](i),f=a["default"](n),m=a["default"](o),h=a["default"](l);module.exports=c["default"]({template:p["default"],components:{"xui-table":r.Table,"xui-tip":r.Tip,"xui-select":r.Select,"express-status":m["default"]},filters:{getExpressStatus:function(e){var t=s.OrderExpressStatus.fromValue(e);return t&&t.text||"暂无物流信息"}},initData:function(){return{MarketProductOrderStatus:s.MarketProductOrderStatus,OrderExpressStatus:s.OrderExpressStatus,disabled:!1,orderId:"",item:{},errors:null,expressNameDatasource:[],expressDetailOpen:!1}},computed:{deliverTableSchema:function(){var e=[{name:"expressName",label:"快递公司",width:255},{name:"expressNum",label:"快递单号"},{name:"status",label:"物流状态",width:120},{name:"remark",label:"备注"},{name:"ctl",label:"操作",width:100}];return this.data.get("disabled")&&e.pop(),e},rules:function(){var e=this.data.get("item");return new u["default"]({expressInfo:[{validator:function(t,a,i){e.expressInfo.length?e.expressInfo.some(function(e){return e.isEditing})?i("请保存快递信息"):i():i("请添加物流信息")}}]})}},created:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.getMarketExpressList());case 2:t=i.sent,a=t.map(function(e){return{text:e.expressName,value:e.expressType}}),this.$set("expressNameDatasource",a);case 5:case"end":return i.stop()}},null,this)},handleExpressChange:function(e,t){var a=h["default"]("#expressNameSel"+e).removeClass("other");"other"===t.value&&a.addClass("other")},setDeliverTableEditing:function(e,t){if(this.validate(),!t){var a=this.$get("item.expressInfo["+e+"]");if(!a.expressName.length&&!a.expressNum.length&&!a.remark.length)return void this.deleteDeliverRow(e)}this.$set("item.expressInfo["+e+"].isEditing",t)},updateDeliverRow:function(e){var t,a=this;this.validate();var i=function(t){if(!a.ref("deliver-"+e+"-"+t))return"";var i=a.ref("deliver-"+e+"-"+t).data.get("value");return"string"==typeof i?i.trim():i},n=i("expressType"),r=i("expressNum"),s=i("remark"),o=i("otherExpressName");if(n.length&&r.length&&("other"!==n||o.length)){this.$$set((t={},t["item.expressInfo["+e+"].expressType"]=n,t["item.expressInfo["+e+"].expressName"]=function(e){var t="";return a.$get("expressNameDatasource").forEach(function(a){a.value===e&&(t=a.text)}),t}(n),t["item.expressInfo["+e+"].otherExpressName"]=o,t["item.expressInfo["+e+"].expressNum"]=r,t["item.expressInfo["+e+"].remark"]=s,t)),this.setDeliverTableEditing(e,!1)}else this.$toast("请将信息填写完整",{messageType:"error"})},deleteDeliverRow:function(e){this.data.splice("item.expressInfo",[e,1]),this.validate()},openExpressDetail:function(e){this.$set("currExpressNum",e),this.$set("expressDetailOpen",!0)},appendDeliverRow:function(){this.$get("item.expressInfo").some(function(e){return e.isEditing})?this.$toast("请先保存上一条信息",{messageType:"error"}):this.data.push("item.expressInfo",{expressType:"",expressName:"",expressNum:"",remark:"",isEditing:!0})},validate:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(d.sleep(10));case 2:return t.abrupt("return",this.ref("form").validateForm());case 3:case"end":return t.stop()}},null,this)},getPostData:function(){var e=f["default"].cloneDeep(this.$get("item"));return e.expressInfo.forEach(function(e){"other"===e.expressType&&(e.expressName=e.otherExpressName),delete e.otherExpressName,delete e.isEditing}),e},clearErrors:function(){this.$set("errors",null)}})}),define("ai/page/market/order/detail/OrderDetail/HardDelivery/HardDelivery.tpl",[],function(){return'<template>\n    <xui-form s-ref="form" formData="{{ item }}" rules="{{ rules }}" errors="{= errors =}" class="aim-hard-delivery">\n        <xui-item name="empty" label="硬件交付：" required>\n            <xui-table class="deliver-info-table" schema="{{deliverTableSchema}}" datasource="{{item.expressInfo}}">\n                \x3c!-- expressName --\x3e\n                <template slot="c-expressName">\n                    <span s-if="!item.expressInfo[rowIndex].isEditing">{{ row.otherExpressName || row.expressName }}</span>\n                    <xui-select on-change="handleExpressChange(rowIndex, $event)" s-else s-ref="deliver-{{rowIndex}}-expressType" datasource="{{expressNameDatasource}}" value="{{row.expressType}}" style="width:auto;" ></xui-select>\n                    <div\n                        id="expressNameSel{{rowIndex}}"\n                        s-if="item.expressInfo[rowIndex].isEditing"\n                        class="express-select {{ item.expressInfo[rowIndex].expressType }}"\n                    >\n                        <xui-textbox width="160" placeholder="请输入快递公司" s-ref="deliver-{{rowIndex}}-otherExpressName" value="{{row.otherExpressName || row.expressName}}" />\n                    </div>\n                </template>\n                \x3c!-- expressNum --\x3e\n                <template slot="c-expressNum">\n                    <span s-if="!item.expressInfo[rowIndex].isEditing">{{row.expressNum}}</span>\n                    <xui-textbox class="express-auto-width" s-else placeholder="请输入快递单号" s-ref="deliver-{{rowIndex}}-expressNum" value="{{row.expressNum}}" />\n                </template>\n                \x3c!-- remark --\x3e\n                <template slot="c-remark">\n                    <span s-if="!item.expressInfo[rowIndex].isEditing">{{row.remark}}</span>\n                    <xui-textbox class="express-auto-width" s-else placeholder="请输入备注信息，最多20字" s-ref="deliver-{{rowIndex}}-remark" value="{{row.remark}}" />\n                </template>\n                \x3c!-- 操作 --\x3e\n                <template slot="c-ctl">\n                    <template s-if="!item.expressInfo[rowIndex].isEditing">\n                        <a on-click="setDeliverTableEditing(rowIndex,true)" href="javascript:void(0)">编辑</a>\n                        <a on-click="deleteDeliverRow(rowIndex)" href="javascript:void(0)">删除</a>\n                    </template>\n                    <template s-else>\n                        <a on-click="updateDeliverRow(rowIndex)" href="javascript:void(0)">保存</a>\n                        <a on-click="setDeliverTableEditing(rowIndex,false)" href="javascript:void(0)">取消</a>\n                    </template>\n                </template>\n                \x3c!-- status --\x3e\n                <template s-if="item.expressInfo[rowIndex].isEditing" slot="c-status">\n                    <span>-</span>\n                </template>\n                <template s-else slot="c-status">\n                    <span>{{row.status | getExpressStatus(OrderExpressStatus)}}</span>\n                    <a s-if="row.status" href="javascript:void(0);" on-click="openExpressDetail(row.expressNum)">详情</a>\n                    <xui-tip s-else position="bc" layer-width="310">\n                        <span>暂未查询到物流信息，请耐心等待。若超过2天未查询到物流信息，请核对快递单号无误后，向AI市场<a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>反馈。</span>\n                    </xui-tip>\n                </template>\n            </xui-table>\n\n            <div s-if="!disabled" class="add-param-wrap">\n                <a on-click="appendDeliverRow" class="add-param" href="javascript:void(0)">\n                    <xui-icon name="plus" />\n                    <span>添加物流信息</span>\n                </a>\n            </div>\n\n            <express-status s-if="expressDetailOpen" type="seller" open="{=expressDetailOpen=}" orderId="{{orderId}}" expressNum="{{currExpressNum}}" receiptAddress="{{receiptAddress}}" />\n        </xui-item>\n        \x3c!-- 这一行用来展示错误信息 --\x3e\n        <xui-item name="expressInfo" label=" " style="margin-top: 0;">\n            <span> </span>\n        </xui-item>\n    </xui-form>\n</template>\n'}),define("ai/page/market/order/detail/OrderDetail/HardDelivery/index",["exports","module","./HardDelivery","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/detail/OrderDetail/index",["exports","module","./OrderDetail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/detail/OrderDetail/OrderDetail",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./OrderDetail.tpl","lodash","san-xui","ai/common/enums","./HardDelivery/index","./CommonDelivery/index","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](o),m=a["default"](l);module.exports=d["default"]({template:c["default"],components:{"xui-table":r.Table,"hard-delivery":f["default"],"common-delivery":m["default"]},filters:{getDeliveryTypeLabel:function(e){var t=s.StoreDeliveryType.fromValue(e);return(t?t.text:"")+"："},getTextFromVal:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=s.MarketProductOrderStatus.fromValue(e);return t?t.color:""},deliveryDaysLabel:function(e){return-1===e?"按需确认":0===e?"实时交付":e+"天"}},initData:function(){return{MarketProductOrderStatus:s.MarketProductOrderStatus,MarketProductType:s.MarketProductType,StoreDeliveryType:s.StoreDeliveryType,modifying:!1,initDeliveryInfo:[],info:{orderId:"",productId:"",productName:"",productType:"",deliveryType:[],deliveryTime:"",deliveryDays:"",packageId:"",packageName:"",packagePrice:0,purchaseNum:1,cash:0,createTime:"",status:"",startTime:"",endTime:"",purchaseTime:"",completeTime:"",refundTime:"",deliveryInfo:[],receiptInfo:{receiptName:"",receiptAddress:{},zipCode:"",receiptMobile:"",receiptTelephone:"",nick:"",city:"",mobile:"",email:""}}}},computed:{serviceTable:function(){var e=this.data.get("info"),t=[{name:"createTime",label:"买家下单"},{name:"purchaseTime",label:"买家付款"}];return t=e.productType===s.MarketProductType.SOFTWARE?[].concat(t,[{name:"completeTime",label:"交付完成"}]):s.MarketProductOrderStatus.REFUND_SUCC===e.status?[].concat(t,[{name:"refundTime",label:"买家退款时间"}]):[].concat(t,[{name:"deliveryTime",label:"服务商交付"},{name:"completeTime",label:"买家确认交付"}]),{schema:t,datasource:[e]}},statusNeedDeliver:function(){return s.MarketProductOrderStatus.NEED_DELIVER===this.data.get("info.status")},statusDelivered:function(){return s.MarketProductOrderStatus.DELIVERED===this.data.get("info.status")},receiptAddress:function(){var e=this.data.get("info.receiptInfo.receiptAddress");return[e.provinceLabel,e.cityLabel,e.areaLabel,e.street].join(" ").trim()},ifHardwareDelivery:function(){return p["default"].includes(this.data.get("info.deliveryType"),s.StoreDeliveryType.HARDWARE)},ifProductAPI:function(){return this.data.get("info.productType")===s.MarketProductType.SOFTWARE},deliveryInfoDisabled:function(){return this.data.get("info.status")===s.MarketProductOrderStatus.COMPLETED||this.data.get("statusDelivered")&&!this.data.get("modifying")}},created:function(){return e["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchDetail();case 1:case"end":return e.stop()}},null,this)},fetchDetail:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketOrderDetail({orderId:this.$get("orderId")}));case 2:(t=a.sent).deliveryInfo.length||p["default"].each(t.deliveryType,function(e){e===s.StoreDeliveryType.API?t.deliveryInfo.push({deliveryType:e}):e===s.StoreDeliveryType.HARDWARE?t.deliveryInfo.push({deliveryType:e,expressInfo:[]}):t.deliveryInfo.push({deliveryType:e,content:"",docs:[],remark:""})}),this.$$set({info:t,initDeliveryInfo:p["default"].cloneDeep(t.deliveryInfo)});case 5:case"end":return a.stop()}},null,this)},toMarketSnapshot:function(){var e=this.$get("Url").store.snapshot+"/"+this.$get("orderId");window.open(e)},setDeliveryInfoModify:function(e){if(!e){this.$set("info.deliveryInfo",p["default"].cloneDeep(this.$get("initDeliveryInfo")));for(var t=0;t<this.$get("info.deliveryInfo").length;t++){var a=this.ref("deliveryForm"+t);a.clearErrors&&a.clearErrors()}}this.$$set({modifying:e})},submit:function(){var t,a,i,n,r,s,o,l,d,c,f,m;return e["default"].async(function(h){for(;;)switch(h.prev=h.next){case 0:t=[],a=this.$get("info"),i=0;case 3:if(!(i<a.deliveryInfo.length)){h.next=11;break}return n=this.ref("deliveryForm"+i),h.next=7,e["default"].awrap(n.validate());case 7:n.getPostData?t.push(n.getPostData()):t.push(a.deliveryInfo[i]);case 8:i++,h.next=3;break;case 11:return r=["<h2>确认发货？</h2>\n            <p>确认后，服务状态将更新为“服务商已交付”。</p>","<h2>确认修改交付信息？</h2>\n            <p>确认后，“服务商已交付”时间将同步更新。</p>"][this.$get("modifying")?1:0],h.next=14,e["default"].awrap(this.$confirm({title:"提示",width:600,content:r}));case 14:return h.next=16,e["default"].awrap(u.getAsyncTuple(this.ajax.saveMarketOrderDelivery({orderId:this.$get("orderId"),deliveryInfo:t})));case 16:if(s=h.sent,!(o=s[0])){h.next=22;break}return o.field&&(d=p["default"].keys(o.field)[0],c=d.split("-"),f=c[0],m=c[1],this.ref("deliveryForm"+m).data.set("errors",(l={},l[f]=o.field[d],l))),this.$toast(o.global||"提交失败",{messageType:"error"}),h.abrupt("return");case 22:this.$toast("提交成功"),this.$reload();case 24:case"end":return h.stop()}},null,this)}})}),define("ai/page/market/order/detail/OrderDetail/OrderDetail.tpl",[],function(){return'<template>\n    <div class="list-content ai-market-order-detail-content">\n        \x3c!-- 订单详情 --\x3e\n        <div class="section">\n            <div class="section-title">订单信息</div>\n            <table class="info-table">\n                <tbody>\n                    <tr>\n                        <td class="info-table-title">订单编号：</td>\n                        <td colspan="2">{{info.orderId}}</td>\n                        <td class="info-table-title">商品类型：</td>\n                        <td>{{info.productType | getTextFromVal(MarketProductType)}}</td>\n                        <td class="info-table-title">商品名称：</td>\n                        <td>{{info.productName}}</td>\n                        <td class="info-table-title">商品ID：</td>\n                        <td>{{info.productId}}</td>\n                    </tr>\n                    <tr>\n                        <td class="info-table-title">购买规格：</td>\n                        <td colspan="2">{{info.packageName}}</td>\n                        <td class="info-table-title">购买数量：</td>\n                        <td>{{info.purchaseNum}}</td>\n                        <td class="info-table-title">购买单价：</td>\n                        <td>{{info.packagePrice}}元</td>\n                        <td class="info-table-title">优惠金额：</td>\n                        <td>{{info.coupon}}元</td>\n                    </tr>\n                    <tr>\n                        <td class="info-table-title">支付金额：</td>\n                        <td colspan="2">{{info.cash}}元</td>\n                        <td class="info-table-title">下单时间：</td>\n                        <td>{{info.createTime}}</td>\n                        <td class="info-table-title">生效时间：</td>\n                        <td>{{info.startTime}}</td>\n                        <td class="info-table-title">到期时间：</td>\n                        <td>{{info.endTime}}</td>\n                    </tr>\n                    <tr>\n                        <td class="info-table-title">交易快照：</td>\n                        <td colspan="2">发生交易争议时，可作为判断依据 <a on-click="toMarketSnapshot" href="javascript:void(0)">查看</a></td>\n                        <td class="info-table-title">备注：</td>\n                        <td colspan="3">{{info.remark}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        \x3c!-- 服务跟踪 --\x3e\n        <div class="section">\n            <div class="section-title">服务跟踪</div>\n            <table class="info-table">\n                <tbody>\n                    <tr>\n                        <td class="info-table-title">目前状态：</td>\n                        <td>\n                            <span class="ai-market-order-status {{ info.status | getStatuColor }}" slot="c-status">\n                                {{ info.status | getTextFromVal(MarketProductOrderStatus) }}\n                            </span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="info-table-title">服务跟踪：</td>\n                        <td>\n                            <xui-table schema="{{serviceTable.schema}}" datasource="{{serviceTable.datasource}}" />\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        \x3c!-- 交付信息 --\x3e\n        <div class="section delivery-info-wrap">\n            <div class="section-title">交付信息</div>\n            <xui-form>\n                <xui-item label="交付时间：">\n                    {{ info.deliveryDays | deliveryDaysLabel }}\n                </xui-item>\n            </xui-form>\n            <div s-for="item,index in info.deliveryInfo" class="delivery-info">\n                \x3c!-- 硬件交付 --\x3e\n                <hard-delivery\n                    s-if="item.deliveryType === StoreDeliveryType.HARDWARE"\n                    s-ref="{{ \'deliveryForm\' + index }}"\n                    disabled="{{ deliveryInfoDisabled }}"\n                    item="{= item =}"\n                    orderId="{{info.orderId}}"\n                />\n                \x3c!-- 其它 --\x3e\n                <common-delivery\n                    s-else\n                    s-ref="{{ \'deliveryForm\' + index }}"\n                    disabled="{{ deliveryInfoDisabled }}"\n                    item="{= item =}"\n                />\n            </div>\n            <xui-form>\n                <xui-item label=" ">\n                    <template s-if="!disabled">\n                        \x3c!-- 待交付 --\x3e\n                        <xui-button on-click="submit" s-if="statusNeedDeliver" skin="primary">确认发货</xui-button>\n                        \x3c!-- 已交付 --\x3e\n                        <template s-if="statusDelivered">\n                            \x3c!-- 未修改状态 --\x3e\n                            <xui-button on-click="setDeliveryInfoModify(true)" s-if="!modifying">修改交付信息</xui-button>\n                            \x3c!-- 修改状态 --\x3e\n                            <xui-button on-click="submit" s-if="modifying" skin="primary">确认修改</xui-button>\n                            <xui-button on-click="setDeliveryInfoModify(false)" s-if="modifying">取消</xui-button>\n                        </template>\n                    </template>\n                </xui-item>\n            </xui-form>\n        </div>\n        \x3c!-- 买家信息 --\x3e\n        <div class="section">\n            <div class="section-title">买家信息</div>\n            <table class="info-table">\n                <tbody>\n                    \x3c!-- 硬件交付的商品才有收货地址 --\x3e\n                    <tr>\n                        <td s-if="ifHardwareDelivery" class="info-table-title">收货人：</td>\n                        <td s-else class="info-table-title">联系人：</td>\n                        <td>{{info.receiptInfo.receiptName || \'-\'}}</td>\n                        <td class="info-table-title">手机号：</td>\n                        <td>{{info.receiptInfo.receiptMobile || \'-\'}}</td>\n                        <td class="info-table-title">电话号码：</td>\n                        <td>{{info.receiptInfo.receiptTelephone || \'-\'}}</td>\n                    </tr>\n                    <tr s-if="ifHardwareDelivery">\n                        <td class="info-table-title">收货地址：</td>\n                        <td colspan="3">{{receiptAddress || \'-\'}}</td>\n                    </tr>\n                    <tr>\n                        <td class="info-table-title">昵称：</td>\n                        <td>{{info.receiptInfo.nick || \'-\'}}</td>\n                        <td class="info-table-title">城市：</td>\n                        <td>{{info.receiptInfo.city || \'-\'}}</td>\n                        <td class="info-table-title">联系方式：</td>\n                        <td>{{info.receiptInfo.mobile || \'-\'}}</td>\n                        <td class="info-table-title">邮箱：</td>\n                        <td>{{info.receiptInfo.email || \'-\'}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</template>\n'}),define("ai/page/market/order/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/list/list",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","lodash","san-xui","inf-ui/x/biz/XPager","moment","ai/common/enums","./PriceLayer/index","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){var f=n["default"](i),m=n["default"](r),h=n["default"](s),g=n["default"](l),v=n["default"](u),x=n["default"](c),b=[["filter","filter"],["timerange","rangecalendar.value"],["searchbox-type","searchbox.type"],["searchbox-value","searchbox.value"],["page","pager.page"]];module.exports=f["default"]({template:m["default"],components:{"xui-table":o.Table,"xui-rangecalendar":o.RangeCalendar,"xui-xpager":g["default"],"xui-searchbox":o.SearchBox,"price-layer":x["default"]},filters:{getLabelByValue:function(e,t){var a=t.fromValue(e);return a?a.text:""},getStatuColor:function(e){var t=d.MarketProductOrderStatus.fromValue(e);return t?t.color:""},getInvoiceStatusColor:function(e){var t=d.MarketInvoiceStatus.fromValue(e);return t?t.color:""},formatDelayTime:function(e){return v["default"](e).format("YYYY-MM-DD")}},initData:function(){return{breadItem:[{title:"订单管理"}],MarketInvoiceStatus:d.MarketInvoiceStatus,MarketProductOrderStatus:d.MarketProductOrderStatus,StoreDeliveryType:d.StoreDeliveryType,MarketProductType:d.MarketProductType,orderStatusList:[],searchbox:{type:"orderId",value:"",datasource:[{text:"订单号",value:"orderId"},{text:"买家账号",value:"bceUserId"},{text:"商品名称",value:"productName"}]},rangecalendar:{value:{begin:v["default"]().add(-7,"days").toDate(),end:new Date},range:{begin:new Date(2e3,1,1),end:new Date}},table:{loading:!1,datasource:[]},filter:{productType:"",deliveryType:"",status:"",invoiceStatus:""},pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}},computed:{tableSchema:function(){var e=[{text:"全部",value:""}].concat(d.MarketInvoiceStatus.toArray()),t="bceUserId"===this.data.get("searchbox.type")?[{name:"bceUserId",label:"买家账号"}]:[],a=this.data.get("orderStatusList").map(function(e){return{text:e.label,value:e.name}});return[{name:"orderId",label:"订单号",width:250}].concat(t,[{name:"productName",label:"商品名称"},{name:"packageName",label:"规格"},{name:"purchaseNum",label:"数量"},{name:"packagePrice",label:"单价",width:100},{name:"cash",label:"支付金额"},{name:"createTime",label:"下单时间"},{name:"status",label:"状态",filter:{options:[{text:"全部",value:""}].concat(a)}},{name:"invoiceStatus",label:"发票状态",width:120,filter:{options:e}},{name:"ctl",label:"操作"}])}},created:function(){return t["default"].async(function(e){for(var i=this;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(a["default"].all([this.fetchProductTypeList(),this.fetchDeliveryTypeList(),this.fetchStatusList()]));case 2:this.parseQuery2Data(),["rangecalendar.value","filter"].forEach(function(e){return i.watch(e,function(){return i.fetchCurrentPage(1)})}),this.fetchCurrentPage();case 6:case"end":return e.stop()}},null,this)},methodHook:{saveData2Query:function(){var e=this,t=b.reduce(function(t,a){var i=a[0],n=a[1];return t[i]=e.$get(n),t},{});p.changeHash({cacheQuery:JSON.stringify(t)})},parseQuery2Data:function(){for(var e=JSON.parse(this.$get("cacheQuery")||"{}"),t=0;t<b.length;t++){var a=b[t],i=a[0],n=a[1];e.hasOwnProperty(i)&&this.$set(n,e[i])}},showPriceLayer:function(e){return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.$set("table.datasource["+e+"].priceLayerOpen",!1),a.next=3,t["default"].awrap(p.sleep(0));case 3:this.$set("table.datasource["+e+"].priceLayerOpen",!0);case 4:case"end":return a.stop()}},null,this)},fetchProductTypeList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductTypeList());case 2:e=a.sent,this.data.splice("table.schema[2].filter.options",[1,0].concat(e.map(function(e){return{text:e.label,value:e.name}})));case 4:case"end":return a.stop()}},null,this)},fetchDeliveryTypeList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductDeliveryType());case 2:e=a.sent,this.data.splice("table.schema[9].filter.options",[1,0].concat(e.map(function(e){return{text:e.label,value:e.name}})));case 4:case"end":return a.stop()}},null,this)},fetchStatusList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketOrderStatusList());case 2:e=a.sent,h["default"].isArray(e)&&this.$set("orderStatusList",e);case 4:case"end":return a.stop()}},null,this)},fetchCurrentPage:h["default"].debounce(function(a){var i,n,r,s,o,l,u,d,c,p,f,m,h,g,x,b;return t["default"].async(function(y){for(;;)switch(y.prev=y.next){case 0:if(i=this.$get("pager"),n=i.page,r=i.size,!a||+n==+a){y.next=7;break}return this.$set("pager.page",a),this.fetchCurrentPage(),y.abrupt("return");case 7:return s=this.$get("rangecalendar.value"),o=s.begin,l=s.end,u=v["default"](o).format("YYYY-MM-DD"),d=v["default"](l).format("YYYY-MM-DD"),c=this.$get("filter"),p=c.productType,f=c.deliveryType,m=c.status,h=c.invoiceStatus,g=this.$get("searchbox"),x=g.datasource.reduce(function(e,t){return e[t.value]="",e},{}),x[g.type]=g.value,this.$set("table.loading",!0),y.next=23,t["default"].awrap(this.ajax.getMarketOrderList(e["default"]({page:n,pageSize:r,startTime:u,endTime:d,productType:p,deliveryType:f,status:m,invoiceStatus:h},x)));case 23:b=y.sent,this.$$set({"table.loading":!1,"pager.page":b.page,"pager.size":b.pageSize,"pager.count":b.total,"table.datasource":b.items}),this.saveData2Query();case 26:case"end":return y.stop()}},null,this)},50),handleExport:function(){var t=this.$get("rangecalendar.value"),a=t.begin,i=t.end,n=v["default"](a).format("YYYY-MM-DD"),r=v["default"](i).format("YYYY-MM-DD"),s=this.$get("filter"),o=s.productType,l=s.deliveryType,u=s.status,d=s.invoiceStatus,c=this.$get("searchbox"),p=c.datasource.reduce(function(e,t){return e[t.value]="",e},{});p[c.type]=c.value;var f=e["default"]({startTime:n,endTime:r,productType:o,deliveryType:l,status:u,invoiceStatus:d},p),m=h["default"].keys(f).reduce(function(e,t){return e.push(t+"="+encodeURIComponent(f[t])),e},[]).join("&");window.open("/ai/s/market/transaction/export?"+m)},onPageSizeChange:function(e){var t=e.value;this.$set("pager.size",t),this.$set("pager.page",1),this.fetchCurrentPage()},onPageChange:function(e){var t=e.pageNo;this.$set("pager.page",t),this.fetchCurrentPage()},onFilter:function(e){var t=this;h["default"].keys(this.$get("filter")).forEach(function(a){e.hasOwnProperty(a)&&t.$set("filter."+a,e[a])})},goToDetail:function(e){this.$aiRedirect("order/detail",{orderId:e})}}})}),define("ai/page/market/order/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-market-order-list-content">\n                <h2>订单管理</h2>\n                <xui-toastlabel style="margin: 20px 0;text-align: center;" level="alert">温馨提示：待付款订单2小时后失效，提醒买家付款吧！</xui-toastlabel>\n                <div class="section">\n                    <div class="filter-wrap">\n                        <xui-button skin="primary" icon="download" on-click="handleExport">导出订单</xui-button>\n                        <div class="fr">\n                            <span>下单时间：</span>\n                            <xui-rangecalendar value="{=rangecalendar.value=}" range="{=rangecalendar.range=}" shortcut="{{false}}" />\n                            <xui-searchbox on-search="fetchCurrentPage(1)" value="{=searchbox.value=}" keyword-type="{=searchbox.type=}" datasource="{{searchbox.datasource}}" style="margin-left:20px;" />\n                        </div>\n                    </div>\n                    <xui-table loading="{{table.loading}}" schema="{{tableSchema}}" datasource="{{table.datasource}}" on-filter="onFilter">\n                        <span style="display: inline-block;" slot="c-orderId">\n                            <a on-click="goToDetail(row.orderId)" href="javascript:void(0)">{{ row.orderId }}</a>\n                        </span>\n                        <span style="display: inline-block;word-break:break-all;" slot="c-bceUserId">\n                            {{ row.bceUserId }}\n                        </span>\n                        <span style="display: inline-block;" slot="c-productType">\n                            {{ row.productType | getLabelByValue(MarketProductType) }}\n                        </span>\n                        <div slot="c-packagePrice" class="{{ row.status === MarketProductOrderStatus.NEED_PURCHASE? \'can-edit\': \'\' }}">\n                            <div class="package-price-normal">\n                                {{ row.packagePrice }}元\n                            </div>\n                            <div class="package-price-edit-wrap">\n                                <span class="price-content">{{ row.packagePrice }}元</span>\n                                <xui-icon on-click="showPriceLayer(rowIndex)" name="edit" />\n                                <price-layer open="{=row.priceLayerOpen=}" price="{{row.packagePrice}}" originalPrice="{{row.originalPrice}}" createTimeStamp="{{row.createTimeStamp}}" orderId="{{row.orderId}}" on-refresh="fetchCurrentPage" />\n                            </div>\n                        </div>\n                        <span style="display: inline-block;" slot="c-cash">\n                            {{ row.cash }}元\n                        </span>\n                        <span class="ai-market-order-status {{ row.status | getStatuColor }}" slot="c-status">\n                            {{ row.status | getLabelByValue(MarketProductOrderStatus) }}\n                        </span>\n                        <span class="ai-market-order-status {{ row.invoiceStatus | getInvoiceStatusColor }}" slot="c-invoiceStatus">\n                            <span style="display: block;">{{ row.invoiceStatus | getLabelByValue(MarketInvoiceStatus) }}</span>\n                            <span s-if="row.invoiceStatus === MarketInvoiceStatus.DELAY_INVOICE && row.delayTime" class="delay-time">预计{{ row.delayTime | formatDelayTime }}</span>\n                        </span>\n                        <span style="display: inline-block;" slot="c-deliveryType">\n                            {{ row.deliveryType | getLabelByValue(StoreDeliveryType) }}\n                        </span>\n                        <span style="display: inline-block;" slot="c-ctl">\n                            <a on-click="goToDetail(row.orderId)" href="javascript:void(0)">查看</a>\n                        </span>\n                    </xui-table>\n\n                    <div class="pager-wrap">\n                        <xui-xpager\n                            withPagerSize="{{true}}"\n                            pager="{{pager}}"\n                            on-pager-size-change="onPageSizeChange"\n                            on-pager-change="onPageChange"\n                        />\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/order/list/PriceLayer/index",["exports","module","./PriceLayer","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/order/list/PriceLayer/PriceLayer",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PriceLayer.tpl","san-xui","lodash","moment","ai/common/util","async-validator"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=(a["default"](r),a["default"](s));module.exports=u["default"]({template:d["default"],components:{"xui-layer":n.Layer,"xui-form":n.Form,"xui-item":n.FormItem},initData:function(){return{orderId:"",open:!1,form:{value:0},originalPrice:0,price:0,createTimeStamp:+new Date,currentTimeStamp:+new Date,errors:null}},detached:function(){window.clearInterval(this.timer)},computed:{leftTime:function(){return 72e5-(this.data.get("currentTimeStamp")-this.data.get("createTimeStamp"))},overtime:function(){return this.data.get("leftTime")<0},tipContent:function(){return this.data.get("overtime")?"超时无法改价，请通知买家再次购买。":"支付剩余时间："+c["default"](this.data.get("leftTime")-288e5).format("HH小时mm分ss秒")+"，\n                请尽快改价并通知买家付款。"},rules:function(){return new l["default"]({value:[{validator:function(e,t,a){(t=+t)<=0?a("金额必须大于0"):a()}}]})},submitDisabled:function(){return this.data.get("overtime")||this.data.get("errors")}},methodHook:{submit:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(o.getAsyncTuple(this.ajax.alterMarketOrder({orderId:this.$get("orderId"),packagePrice:+this.$get("form.value")})));case 2:if(t=i.sent,a=t[0],t[1],!a){i.next=8;break}return this.$toast(a.global,{messageType:"error"}),i.abrupt("return");case 8:this.$toast("操作成功"),this.fire("refresh"),this.close();case 11:case"end":return i.stop()}},null,this)},close:function(){this.$set("open",!1)},updateTimeStamp:function(){this.$set("currentTimeStamp",+new Date),this.$get("overtime")&&window.clearInterval(this.timer)},startInterval:function(){window.clearInterval(this.timer),this.timer=window.setInterval(this.updateTimeStamp,1e3),this.updateTimeStamp()}},watchHook:{open:function(e){e?(this.$set("form.value",this.$get("price")),this.startInterval()):window.clearInterval(this.timer)}}})}),define("ai/page/market/order/list/PriceLayer/PriceLayer.tpl",[],function(){return'<template>\n    <xui-layer\n        open="{=open=}"\n        width="{{353}}"\n        offset-top="{{35}}"\n        followScroll="{{false}}"\n        class="market-order-list-price-layer">\n\n        <xui-form formData="{{form}}" rules="{{rules}}" s-ref="form" errors="{=errors=}">\n            <xui-item name="value">\n                <xui-textbox width="240" disabled="{{overtime}}" s-ref="textbox" type="number" value="{=form.value=}" /> 元\n            </xui-item>\n        </xui-form>\n        <div class="tip-content">{{tipContent}}</div>\n        <div class="btn-wrap">\n            <xui-button disabled="{{submitDisabled}}" on-click="submit" skin="primary">确定</xui-button>\n            <xui-button on-click="close">取消</xui-button>\n        </div>\n    </xui-layer>\n</template>\n'}),define("ai/page/market/overview/history/index",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","ai/common/enums"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](i);module.exports=s["default"]({template:o["default"],components:{"xui-dialog":n.Dialog,"xui-table":n.Table},filters:{filterScoreTypeLabel:function(e){var t=r.EScoreType.fromValue(e);return t?t.text:""},filterScore:function(e){return e>0?'<div style="color: #5fb333;">+'+e+"</div>":'<div style="color: #d0021b;">'+e+"</div>"}},initData:function(){return{schema:[{name:"ruleDetail",label:"评分内容"},{name:"scoreType",label:"积分类型"},{name:"productName",label:"所属商品"},{name:"score",label:"分值"}],datasource:[],totalScore:0,open:!1}},created:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e["default"].awrap(this.ajax.getMarketScoreHistory());case 3:t=a.sent,this.$set("datasource",t),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),this.$toast("获取积分明细异常",{messageType:"error"});case 10:case"end":return a.stop()}},null,this,[[0,7]])},onCloseDialog:function(){this.$set("open",!1),this.fire("close")}})}),define("ai/page/market/overview/history/index.tpl",[],function(){return'<template>\n    <xui-dialog title="积分明细" open="{=open=}" width="700" height="450" foot="{{false}}">\n        <div class="market-score-history-info-content">\n            <xui-toastlabel class="score-history-info-toast-label" level="alert">\n                目前总积分：{{ totalScore }}分，具体明细如下；如有疑问，请<a href="{{Url.ticket}}" target="_blank">提交工单</a>。\n            </xui-toastlabel>\n            <div class="section">\n                    <xui-table\n                        datasource="{{datasource}}"\n                        schema="{{schema}}"\n                    >\n                        <template slot="c-scoreType">\n                            {{row.scoreType | filterScoreTypeLabel}}\n                        </template>\n                        <template slot="c-score">\n                            {{row.score | filterScore | raw}}\n                        </template>\n                    </xui-table>\n            </div>\n        </div>\n    </xui-dialog>\n</template>\n    '}),define("ai/page/market/overview/index",["exports","module","babel-runtime/core-js/object/keys","lodash","babel-runtime/helpers/interop-require-default","ai/page/market/index","bat-ria/tpl!./index.tpl","san-xui","ai/common/enums","./history/index","moment","jquery"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](o),m=a["default"](l),h=a["default"](u),g={product:"商品情况",browse:"客户浏览情况",business:"商机情况",order:"交易情况",invoice:"开票情况"},v={product:{release:{label:"已上架商品数",unit:"个"},tradable:{label:"可线上交易商品数",unit:"个"},auditing:{label:"待审核商品数",unit:"个"}},browse:{pv:{label:"页面浏览量",unit:"次"},uv:{label:"独立访客数",unit:"个"}},business:{total:{label:"商机总数",unit:"个"},notDocked:{label:"未对接商机",unit:"个"},complete:{label:"已转化商机",unit:"个"}},order:{tradeVolume:{label:"交易金额",unit:"元"},orderNum:{label:"订单总数",unit:"个"},refundNum:{label:"退款订单数",unit:"个"}},invoice:{applyNum:{label:"需开票次数",unit:"次"},invoicedNum:{label:"已开票次数",unit:"次"},confirmNum:{label:"客户已确认",unit:"次"}}};module.exports=c["default"]({template:p["default"],components:{"xui-clipboard":r.Clipboard,"history-dialog":f["default"]},initData:function(){return{breadItem:[{title:"概览"}],scoreDetail:{},settleStatus:{},operationStatus:{product:{},browse:{},business:{},order:{},invoice:{}},featureList:[],titleMap:g,hideOperationButtons:!1,operationBoard:{leftDisabled:!0,rightDisabled:!1},ESettleStatus:s.ESettleStatus,ifShowHistory:!1}},filters:{dateFormat:function(e,t){return m["default"](e).format(t)},filterScore:function(e){return e?(e>0?"+":"")+e+"分":"-"},filterOperationLabel:function(e){var t=e.title,a=e.key;return d["default"].get(v,[t,a,"label"])||""},filterOperationValue:function(e){var t=e.title,a=e.key;return(d["default"].get(this.$get("operationStatus"),[t,a])||0)+(d["default"].get(v,[t,a,"unit"])||"个")}},computed:{settleStatusConf:function(){var e=this.data.get("settleStatus.status");return s.ESettleStatus.fromValue(e)},titleList:function(){return e["default"](this.data.get("operationStatus"))},keyList:function(){var t=this;return e["default"](this.data.get("operationStatus")).map(function(a){return e["default"](t.data.get("operationStatus."+a))})},productScore:function(){var e=this.data.get("settleStatus.productScore");return e>0?"+"+e+"积分":""},agreementScore:function(){var e=this.data.get("settleStatus.agreementScore");return e>0?"+"+e+"积分":""}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},attached:function(){var e=this;this.inovkeUpdateButtonsStatus(),this.funcUpdateButtonsStatus=d["default"].debounce(function(){return e.inovkeUpdateButtonsStatus()},200),window.addEventListener("resize",this.funcUpdateButtonsStatus)},disposed:function(){window.removeEventListener("resize",this.funcUpdateButtonsStatus)},inovkeUpdateButtonsStatus:function(){var e=h["default"](".operation-info").css("width"),t=window.parseInt(e)>1201;this.$set("hideOperationButtons",t),t&&this.toOperationBoardRight()},methodHook:{getStoreUserInfo:function(){var e=this;this.$get("marketUserInfo.providerStatus")!==s.StoreProviderStatus.NONE&&(this.ajax.getMarketSettleStatus().then(function(t){return e.$set("settleStatus",t)}),this.ajax.getMarketOperationStatus().then(function(t){return e.$set("operationStatus",t)}),this.ajax.getMarketScoreDetail().then(function(t){return e.$set("scoreDetail",t)}),h["default"].get("https://ai.baidu.com/platform/news/getnewswithsys?module=AIMarketConsole&pageSize=6").done(function(t){var a=t.result.newsCat.find(function(e){return"newfunction"===e.catKey}).newsList.map(function(e){return{title:e.title,time:e.pubTime}}).slice(0,6);e.$set("featureList",a)}))},toContractPage:function(){window.open(this.$get("Url.store.enterContract"))},showHistory:function(){this.$set("ifShowHistory",!0)},toOperationBoardRight:function(){if(!this.$get("operationBoard.rightDisabled")){var e=h["default"](".operation-info").css("width");if(!(window.parseInt(e)>1201)){var t=h["default"](".module-operation-wrap").css("width"),a=window.parseInt(t)-window.parseInt(e);h["default"](".module-operation-wrap").css("left","-"+a+"px"),this.$set("operationBoard",{leftDisabled:!1,rightDisabled:!0})}}},toOperationBoardLeft:function(){this.$get("operationBoard.leftDisabled")||(h["default"](".module-operation-wrap").css("left",0),this.$set("operationBoard",{leftDisabled:!0,rightDisabled:!1}))}}})}),define("ai/page/market/overview/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-store-content ai-market-overview-content">\n                <h2>AI 市场概览</h2>\n                <xui-toastlabel level="alert" s-if="settleStatus.status === ESettleStatus.settling">提示：请尽快完成AI市场入驻流程，越早完成能获得更多积分哦！超过30天未发布商品需重新激活入驻。</xui-toastlabel>\n                <xui-toastlabel level="error" s-if="settleStatus.status === ESettleStatus.settled && shopFinalStatus.alias === \'UPDATE_FAILED\'">提示：店铺信息更新失败，请尽快修改并提交正确信息</xui-toastlabel>\n                <div class="module">\n                    <h3 class="module-title">基本信息</h3>\n                    <div class="basic-info">\n                        <table class="info-table">\n                            <tbody>\n                                <tr>\n                                    <td class="info-table-title">服务商：</td>\n                                    <td>{{marketUserInfo.providerName || \'无\'}}</td>\n                                    <td class="info-table-title">用户ID：</td>\n                                    <td colspan="2">\n                                        <span class="provider-id">{{marketUserInfo.cloudId}}</span>\n                                        <xui-clipboard text="{{marketUserInfo.cloudId}}"><xui-icon name="copy" /></xui-clipboard>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">入驻状态：</td>\n                                    <td>\n                                        <span class="status status-{{settleStatusConf.color}}">{{settleStatusConf.text}}</span>\n                                    </td>\n                                </tr>\n                                <tr s-if="settleStatus.status === ESettleStatus.settled">\n                                    <template s-if="shopFinalStatus.alias === \'UPDATE_FAILED\'">\n                                        <td class="info-table-title">店铺信息：</td>\n                                        <td>\n                                            <span class="status status-error">更新失败</span>\n                                            <a class="operation" href="#/ai/market/shop/edit~section=shop">修改 ></a>\n                                        </td>\n                                    </template>\n                                    <template s-if="finalStatus.alias === \'UPDATE_FAILED\'">\n                                        <td class="info-table-title">服务商信息：</td>\n                                        <td>\n                                            <span class="status status-error">更新失败</span>\n                                            <a class="operation" href="#/ai/market/provider/edit~section=provider">修改 ></a>\n                                        </td>\n                                    </template>\n                                </tr>\n                            </tbody>\n                        </table>\n\n                        <div class="status-row" s-if="settleStatus.status === ESettleStatus.settling">\n                            <div class="status-item">\n                                <span class="qualification-icon status-icon"></span>\n                                <span>资质已审核</span>\n                            </div>\n                            <div class="status-item">\n                                <span class="shop-icon status-icon"></span>\n                                <span>已开店</span>\n                            </div>\n                            <div class="status-item">\n                                <span class="release-icon status-icon"></span>\n                                <a href="#/ai/market/product/publish">发布商品{{ productScore }} ></a>\n                            </div>\n                            <div class="status-item">\n                                <span class="agreement-icon status-icon"></span>\n                                <a href="javascript:void(0);" on-click="toContractPage()">签署协议{{ agreementScore }} ></a>\n                                <span s-if="!settleStatus.agreementScore">剩余{{ settleStatus.agreementDays }}天商品将下架</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="module operation">\n                    <h3 class="module-title">运营概况</h3>\n                    <div class="operation-buttons" s-if="!hideOperationButtons">\n                        <xui-icon on-click="toOperationBoardLeft" class="{{operationBoard.leftDisabled ? \'disabled\' : \'\'}}" name="arrow-left" />\n                        <xui-icon on-click="toOperationBoardRight" class="{{operationBoard.rightDisabled ? \'disabled\' : \'\'}}" name="arrow-right" />\n                    </div>\n                    <div class="operation-info">\n                        <div class="module-operation-wrap">\n                            <div class="operation-item" s-for="title, index in titleList">\n                                <h4>{{ titleMap[title] }}</h4>\n                                <table class="info-table">\n                                    <tbody>\n                                        <tr s-for="key in keyList[index]">\n                                            <td class="info-table-title">{{ {title, key} | filterOperationLabel }}：</td>\n                                            <td class="info-table-data">{{ {title, key} | filterOperationValue }}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="module-wrap">\n                    <div class="module score">\n                        <div class="module-inner">\n                            <h3 class="module-title">积分概况</h3>\n                            <a class="score-rules" href="{{ Url.store.scoreRules }}" target="_blank">积分规则介绍 ></a>\n                            <div class="score-info">\n                                <div class="total-score-wrap">\n                                    <div class="total-score">\n                                        <div class="total-score-value">{{ scoreDetail.totalScore }}分</div>\n                                        <div class="total-score-label">当前总积分</div>\n                                    </div>\n                                    <div class="rank">\n                                        <span s-if="scoreDetail.scoreRank">超过{{ scoreDetail.scoreRank }}%服务商</span>\n                                        <span s-else>暂无排名信息</span>\n                                    </div>\n                                </div>\n                                <div class="line"></div>\n                                <div class="detail-score-wrap">\n                                    <table class="info-table">\n                                        <tbody>\n                                            <tr>\n                                                <td class="info-table-title">入驻积分：</td>\n                                                <td class="info-table-data">{{ scoreDetail.providerScore | filterScore }}</td>\n                                            </tr>\n                                            <tr>\n                                                <td class="info-table-title">服务积分：</td>\n                                                <td class="info-table-data">{{ scoreDetail.serviceScore | filterScore }}</td>\n                                            </tr>\n                                            <tr>\n                                                <td class="info-table-title">商品积分：</td>\n                                                <td class="info-table-data">{{ scoreDetail.productScore | filterScore }}</td>\n                                            </tr>\n                                            <tr>\n                                                <td class="info-table-title">合作关系积分：</td>\n                                                <td class="info-table-data">{{ scoreDetail.partnerScore | filterScore }}</td>\n                                            </tr>\n                                            <tr>\n                                                <td class="info-table-title">\n                                                    <a href="javascript:void(0);" on-click="showHistory()">查看明细</a>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="module feature">\n                        <div class="module-inner">\n                            <h3 class="module-title">新功能发布</h3>\n                            <div class="feature-info">\n                                <table class="info-table">\n                                    <tbody>\n                                        <tr s-for="item in featureList">\n                                            <td class="info-table-title">{{ item.title }}</td>\n                                            <td class="info-table-data">{{ item.time | dateFormat(\'MM-DD\') }}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <history-dialog s-if="ifShowHistory" open="{=ifShowHistory=}" totalScore="{{ scoreDetail.totalScore }}" />\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/product/list/cellRender",["exports","module","ai/common/enums","lodash","babel-runtime/helpers/interop-require-default","ai/config/url"],function(exports,module,e,t,a,i){a["default"](t);var n=a["default"](i);module.exports=function(t){return function(t,a,i,r){var s=t[a];if("productName"===a)return t.online===e.MarketOnlineStatus.ONLINE?'<a href="'+n["default"].store.product+"/"+t.productUuid+'" target="_blank" rel="noopener">'+s+"</a>":s;if("productType"===a)return e.MarketProductType.fromValue(s).text;if("online"===a){var o=e.MarketOnlineStatus.fromValue(s).text;return"<span"+(s===e.MarketOnlineStatus.OFFLINE?' style="color:#999;"':"")+">"+o+"</span>"}if("status"===a){return function(e){var t=e.text,a=e.color,i=e.colorStatus;return'<span class="'+(a||"status "+i)+'">'+t+"</span>"}(e.StoreProductStatus.fromValue(s))}return"control"===a?function(t){var a,i=(a={},a[e.StoreProductStatus.DRAFT]=[1,0,0,1],a[e.StoreProductStatus.REVIEWING]=[1,0,0,0],a[e.StoreProductStatus.OFFLINE]=[1,1,0,1],a[e.StoreProductStatus.FAILED]=[1,0,0,1],a[e.StoreProductStatus.ONLINE]=[1,0,1,0],a),n=["编辑","上架","下架","删除"];if(t.online===e.MarketOnlineStatus.ONLINE){var r;(r={})[e.StoreProductStatus.DRAFT]=[1,0,1,0],r[e.StoreProductStatus.REVIEWING]=[1,0,0,0],r[e.StoreProductStatus.OFFLINE]=[1,1,1,0],r[e.StoreProductStatus.FAILED]=[1,0,1,0],r[e.StoreProductStatus.ONLINE]=[1,0,1,0],i=r,n=["编辑","发布","下架","删除"]}var s=["EDIT","RELEASE","CANCEL","DELETE"];return i[t.status].map(function(e,a){return e?'<a\n            class="ctrl-item"\n            data-command="'+s[a]+'"\n            data-command-args="'+t.productId+'"\n            href="javascript:void(0);">'+n[a]+"</a>":""}).join("")}(t):t[a]}}}),define("ai/page/market/product/list/index",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","inf-ui/x/biz/XPager","./cellRender","ai/common/enums","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](r),f=a["default"](s),m=a["default"](u);module.exports=d["default"]({template:c["default"],components:{"xui-radioselect":n.RadioSelect,"xui-table":n.Table,"xui-xpager":p["default"],"xui-select":n.Select},filters:{filterStatusClass:function(e){var t=o.StoreProductStatus.fromValue(e);return t?t.color||"status "+t.colorStatus:""},filterStatusText:function(e){var t=o.StoreProductStatus.fromValue(e);return t?t.text:""},filterReviewRaw:function(e){return'<div style="min-width:261px;">'+e+"</div>"}},initData:function(){return{StoreProductStatus:o.StoreProductStatus,breadItem:[{title:"商品列表"}],tabInfo:{value:-1,datasource:[{text:"全部",value:-1},{text:"未通过",value:3},{text:"审核中",value:1},{text:"已上架",value:4},{text:"待上架",value:2}]},table:{loading:!1,schema:[{name:"productName",label:"商品名称"},{name:"productType",label:"服务类型"},{name:"productPrice",label:"商品价格"},{name:"releaseTime",label:"上架时间"},{name:"updateTime",label:"最近更新时间"},{name:"online",label:"商品状态",filter:{options:[{text:"全部",value:-1}].concat(o.MarketOnlineStatus.toArray())}},{name:"status",label:"信息状态",filter:{options:[{text:"全部",value:-1}].concat(o.StoreProductStatus.toArray())}},{name:"control",label:"操作"}],datasource:[],cellRenderer:f["default"]()},page:{pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}},filter:{online:-1,status:-1}}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},getStoreUserInfo:function(){var e=this;this.getProductInfo(),this.watch("filter",function(){e.$set("page.pager.page",1),e.getProductInfo()})},onFilter:function(e){var t=this;m["default"].keys(this.$get("filter")).forEach(function(a){e.hasOwnProperty(a)&&t.$set("filter."+a,e[a])})},onPageSizeChange:function(e){var t=e.value;this.$set("page.pager.size",t),this.$set("page.pager.page",1),this.getProductInfo()},onPageChange:function(e){var t=e.pageNo;this.$set("page.pager.page",t),this.getProductInfo()},onCommand:function(e){var t=e.type,a=e.payload;switch(t){case"EDIT":this.productEdit(a);break;case"RELEASE":this.productRelease(a);break;case"CANCEL":this.productCancel(a);break;case"DELETE":this.productDelete(a)}},goToPublish:function(e){var t=e?{productId:e}:undefined;this.$aiRedirect("product/publish",t)},productEdit:function(t){var a,i,n=t.status,r=(t.draftId,t.productId),s=t.incomplete;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=3;break}return this.$alert('抱歉，该商品存在未交付的订单，您交付后才可编辑该商品，有问题请\n                <a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>（工单类型：人工智能-AI市场）'),t.abrupt("return");case 3:if(a={},a[o.StoreProductStatus.REVIEWING]="编辑会撤销当前审核申请并进入草稿状态<br>确认编辑该商品吗？",a[o.StoreProductStatus.ONLINE]="对当前商品编辑时，客户无法正常下单。编辑内容进入审核流程，您确认要编辑商品吗？",a[o.StoreProductStatus.OFFLINE]="对当前已通过审核商品进行编辑，编辑内容需进入审核流程；<br>确认编辑该商品吗？",!(i=a)[n]){t.next=7;break}return t.next=7,e["default"].awrap(this.$confirm({title:"编辑提示",content:i[n]}));case 7:if(n===o.StoreProductStatus.DRAFT){t.next=10;break}return t.next=10,e["default"].awrap(this.ajax.revertMarketProduct({productId:r}));case 10:this.goToPublish(r);case 11:case"end":return t.stop()}},null,this)},productRelease:function(t){var a,i,n,r=t.productId,s=t.online;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(l.getAsyncTuple(this.ajax.releaseStoreProduct({productId:r})));case 2:if(a=t.sent,i=a[0],a[1],!i){t.next=8;break}return this.$toast(i.global,{messageType:"error"}),t.abrupt("return");case 8:n=s?"发布":"上架",this.$toast(n+"成功"),this.getProductInfo();case 11:case"end":return t.stop()}},null,this)},productCancel:function(t){var a,i,n=t.productId,r=t.incomplete;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=3;break}return this.$alert('抱歉，该商品存在未交付的订单，您交付后才可下架该商品，有问题请\n                <a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>（工单类型：人工智能-AI市场）'),t.abrupt("return");case 3:return t.next=5,e["default"].awrap(this.$confirm({title:"下架提示",width:520,content:"<p>下架后商品无法在AI市场中展示，影响商品推广效果与客户体验</p><p>确认下架该商品吗？</p>",needFoot:!0}));case 5:return t.next=7,e["default"].awrap(l.getAsyncTuple(this.ajax.cancelStoreProduct({productId:n})));case 7:if(a=t.sent,i=a[0],a[1],!i){t.next=13;break}return this.$toast("下架失败，"+i.global,{messageType:"error"}),t.abrupt("return");case 13:this.$toast("下架成功"),this.getProductInfo();case 15:case"end":return t.stop()}},null,this)},productDelete:function(e){var t=this,a=e.productId,i=e.draftId;return this.$confirm({content:"删除后商品将不可恢复，确认删除此商品么？"}).then(function(){return t.ajax.deleteStoreProduct({productId:a,draftId:i})}).then(function(e){e?(t.$toast("删除成功",{messageType:"success"}),t.getProductInfo()):t.$toast("删除失败",{messageType:"error"})})},getProductInfo:function(){var e=this;this.$set("table.loading",!0);var t=this.$get("filter"),a=t.online,i=t.status;this.ajax.getStoreProductList({online:a,status:i,pageSize:this.$get("page.pager.size"),page:this.$get("page.pager.page")}).then(function(t){e.$set("table.loading",!1),e.$set("page.pager.count",t.total),e.$set("table.datasource",t.items)})}})}),define("ai/page/market/product/list/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content class="ai-market-main-content">\n            \x3c!-- <breadcrumb items="{{breadItem}}"></breadcrumb> --\x3e\n            <div class="list-content ai-store-content ai-store-product-list-content">\n                <h2 class="ai-market-page-header">商品列表</h2>\n                <div class="section">\n                    <div class="btn-wrap">\n                        <xui-button skin="primary" icon="plus" on-click="goToPublish()">商品发布</xui-button>\n                    </div>\n                    <xui-table\n                        class="product-table"\n                        loading="{{table.loading}}"\n                        schema="{{table.schema}}"\n                        cell-builder="{{table.cellRenderer}}"\n                        datasource="{{table.datasource}}"\n                        on-command="onCommand($event)"\n                        extensions="Command"\n                        on-filter="onFilter"\n                    >\n                        <span style="display: inline-block;" slot="c-status">\n                            <span style="vertical-align:middle;" class="{{ row.status | filterStatusClass }}">{{ row.status | filterStatusText }}</span>\n                            <xui-tip s-if="row.status === StoreProductStatus.FAILED" skin="warning" message="{{ row.review | filterReviewRaw }}" position="tc" />\n                        </span>\n                        <div class="ui-table-body-nodata" slot="empty">\n                            <div class="store-no-data">\n                                <div>还没有商品</div>\n                                <a href="javascript:void(0)" on-click="goToPublish()">马上发布&gt;</a>\n                            </div>\n                        </div>\n                    </xui-table>\n                </div>\n                <div class="pager-wrap">\n                    <xui-xpager\n                        withPagerSize="{{true}}"\n                        pager="{{page.pager}}"\n                        on-pager-size-change="onPageSizeChange"\n                        on-pager-change="onPageChange"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/product/publish/apiInfoLanguages",["exports","module"],function(exports,module){module.exports=[{title:"Bash",content:"curl -i -k 'https://aip.baidubce.com/rest/2.0/aimarket/general?access_token=[token]' --data '{\"image\": \"xxx\"}' -H 'Content-Type:application/json; charset=UTF-8'"},{title:"PHP",content:"class Example\n{\n\n    /**\n     * 通用物体识别 advanced_general api url\n     * @var string\n     */\n    private $advancedGeneralUrl = 'https://aip.baidubce.com/rest/2.0/aimarket/general';\n\n    public function advancedGeneral($image, $options=array())\n    {\n\n        $data = array();\n\n        $data['image'] = base64_encode($image);\n\n        $data = array_merge($data, $options);\n\n        return $this->request_post($this->advancedGeneralUrl, $data);\n    }\n\n    /**\n     * 发起http post请求(REST API), 并获取REST请求的结果\n     * @param string $url\n     * @param string $param\n     * @return - http response body if succeeds, else false.\n     */\n    public function request_post($url = '', $param = '')\n    {\n        if (empty($url) || empty($param)) {\n            return false;\n        }\n\n        $postUrl = $url . \"?access_token=【token】\";\n        $curlPost = $param;\n        // 初始化curl\n        $curl = curl_init();\n        curl_setopt($curl, CURLOPT_URL, $postUrl);\n        curl_setopt($curl, CURLOPT_HEADER, 0);\n        // 要求结果为字符串且输出到屏幕上\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\n        // post提交方式\n        curl_setopt($curl, CURLOPT_POST, 1);\n        curl_setopt($curl, CURLOPT_POSTFIELDS, $curlPost);\n        // 运行curl\n        $data = curl_exec($curl);\n        curl_close($curl);\n\n        return $data;\n    }\n}"},{title:"Python",content:"import urllib2, json, base64\n\nclass Example(object):\n\n    '''\n    语言处理基础技术\n    '''\n\n    __lexerUrl = \"https://aip.baidubce.com/rest/2.0/aimarket/general\"\n\n    def lexer(self, image, options=None):\n        \"\"\"\n            词法分析\n        \"\"\"\n        options = options or {}\n        data = {}\n        data[\"image\"] = base64.b64encode(image).decode()\n        data.update(options)\n        return self._request(data)\n\n    def _request(self, data):\n        '''\n        发送请求\n        :param url:\n        :param data:\n        :return dict\n        '''\n        access_token = \"\"\n        request_url = self.__lexerUrl + \"?access_token=\" + access_token\n        request = urllib2.Request(url=request_url, data=json.dumps(data))\n        request.add_header('Content-Type', 'application/json')\n        response = urllib2.urlopen(request)\n        content = response.read()\n\n        return content or {}"},{title:"Java",content:'package com.baidu.ai.aip;\n\nimport com.baidu.ai.aip.utils.HttpUtil;\nimport com.baidu.ai.aip.utils.GsonUtils;\n\nimport java.util.*;\n\n/**\n* 人脸检测与属性分析\n*/\npublic class FaceDetect {\n\n    /**\n    * 重要提示代码中所需工具类\n    * FileUtil,Base64Util,HttpUtil,GsonUtils请从\n    * https://ai.baidu.com/file/658A35ABAB2D404FBF903F64D47C1F72\n    * https://ai.baidu.com/file/C8D81F3301E24D2892968F09AE1AD6E2\n    * https://ai.baidu.com/file/544D677F5D4E4F17B4122FBD60DB82B3\n    * https://ai.baidu.com/file/470B3ACCA3FE43788B5A963BF0B625F3\n    * 下载\n    */\n    public static String detect() {\n        // 请求url\n        String url = "https://aip.baidubce.com/rest/2.0/aimarket/general";\n        try {\n            Map<String, Object> map = new HashMap<>();\n            map.put("image", "xxx");\n\n            String param = GsonUtils.toJson(map);\n\n            // 注意这里仅为了简化编码每一次请求都去获取access_token，线上环境access_token有过期时间， 客户端可自行缓存，过期后重新获取。\n            String accessToken = "[调用鉴权接口获取的token]";\n\n            String result = HttpUtil.post(url, accessToken, "application/json", param);\n            System.out.println(result);\n            return result;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    public static void main(String[] args) {\n        FaceDetect.detect();\n    }\n}'},{title:"C++",content:'#include <iostream>\n#include <curl/curl.h>\n\n// libcurl库下载链接：https://curl.haxx.se/download.html\n// jsoncpp库下载链接：https://github.com/open-source-parsers/jsoncpp/\nconst static std::string request_url = "https://aip.baidubce.com/rest/2.0/aimarket/general";\nstatic std::string detect_result;\n/**\n * curl发送http请求调用的回调函数，回调函数中对返回的json格式的body进行了解析，解析结果储存在全局的静态变量当中\n * @param 参数定义见libcurl文档\n * @return 返回值定义见libcurl文档\n */\nstatic size_t callback(void *ptr, size_t size, size_t nmemb, void *stream) {\n    // 获取到的body存放在ptr中，先将其转换为string格式\n    detect_result = std::string((char *) ptr, size * nmemb);\n    return size * nmemb;\n}\n/**\n * 人脸检测与属性分析\n * @return 调用成功返回0，发生错误返回其他错误码\n */\nint detect(std::string &json_result, const std::string &access_token) {\n    std::string url = request_url + "?access_token=" + access_token;\n    CURL *curl = NULL;\n    CURLcode result_code;\n    int is_success;\n    curl = curl_easy_init();\n    if (curl) {\n        curl_easy_setopt(curl, CURLOPT_URL, url.data());\n        curl_easy_setopt(curl, CURLOPT_POST, 1);\n        curl_slist *headers = NULL;\n        headers = curl_slist_append(headers, "Content-Type:application/json;charset=UTF-8");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);\n        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "{"image": "xxx"}");\n        result_code = curl_easy_perform(curl);\n        if (result_code != CURLE_OK) {\n            fprintf(stderr, "curl_easy_perform() failed: %s\n",\n                    curl_easy_strerror(result_code));\n            is_success = 1;\n            return is_success;\n        }\n        json_result = detect_result;\n        curl_easy_cleanup(curl);\n        is_success = 0;\n    } else {\n        fprintf(stderr, "curl_easy_init() failed.");\n        is_success = 1;\n    }\n    return is_success;\n}'},{title:"C#",content:'using System;\nusing System.IO;\nusing System.Net;\nusing System.Text;\nusing System.Web;\n\nnamespace com.baidu.ai\n{\n    public class FaceDetect\n    {\n        // 人脸检测与属性分析\n        public static string detect()\n        {\n            string token = "[调用鉴权接口获取的token]";\n            string host = "https://aip.baidubce.com/rest/2.0/aimarket/general?access_token=" + token;\n            Encoding encoding = Encoding.Default;\n            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(host);\n            request.Method = "post";\n            request.KeepAlive = true;\n            String str = "{"image": "xxx"}";\n            byte[] buffer = encoding.GetBytes(str);\n            request.ContentLength = buffer.Length;\n            request.GetRequestStream().Write(buffer, 0, buffer.Length);\n            HttpWebResponse response = (HttpWebResponse)request.GetResponse();\n            StreamReader reader = new StreamReader(response.GetResponseStream(), Encoding.Default);\n            string result = reader.ReadToEnd();\n            Console.WriteLine(result);\n            return result;\n        }\n    }\n}'},{title:"Node",content:"var https = require('https');\nvar qs = require('querystring');\nvar fs = require('fs');\n\nvar image = fs.readFileSync(\"assets/example.jpg\").toString(\"base64\");\n\nvar param = qs.stringify({\n    'access_token': '您的access_token'\n});\n\nvar options = {\n    hostname: 'aip.baidubce.com',\n    path: 'rest/2.0/aimarket/general?' + param,\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n    }\n};\n\nvar req = https.request(\n    options,\n    function (res) {\n        // 在标准输出中查看运行结果\n        res.pipe(process.stdout);\n    }\n);\n\n// 如果有可选参数\nvar postData = {};\npostData[\"image\"] = \"xxxx\";\n\n// 携带数据发送https请求\nreq.write(JSON.stringify(postData));\nreq.end();"}]}),define("ai/page/market/product/publish/FastPublish/FastPublish",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./FastPublish.tpl","san-xui","lodash"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](i);a["default"](r);module.exports=s["default"]({template:o["default"],components:{"xui-layer":n.Layer,"xui-table":n.Table},initData:function(){return{open:!1,schema:[{name:"modelName",label:"模型名称"},{name:"modelId",label:"模型ID"}],datasource:[],selectItem:null}},created:function(){var e=this;this.watch("open",function(){e.$set("selectItem",null)})},onTableRowSelected:function(e){var t=e.selectedItems[0];this.$set("selectItem",t)},submit:function(){var t,a;return e["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.data.get(),(a=t.selectItem)&&this.dispatch("reload-publish-page",{serviceName:a.serviceName,serviceUrl:a.url,modelType:a.modelType}),this.close();case 4:case"end":return e.stop()}},null,this)},close:function(){this.$set("open",!1)}})}),define("ai/page/market/product/publish/FastPublish/FastPublish.tpl",[],function(){return'<template>\n    <xui-layer\n        open="{=open=}"\n        width="{{520}}"\n        offset-top="{{40}}"\n        offset-left="{{0}}"\n        class="market-publish-fast-publish">\n        <h2 class="layer-title">快速发布</h2>\n        <div class="layer-wrap">\n            <div class="layer-tip">当前账户有以下定制化API服务可售卖，一键勾选，快速发布</div>\n            <xui-table\n                class="layer-table"\n                select="single"\n                schema="{{schema}}"\n                on-selected-change="onTableRowSelected($event)"\n                datasource="{{datasource}}">\n\n            </xui-table>\n            <div class="btn-wrap">\n                <xui-button on-click="submit" width="70" skin="primary">发布</xui-button>\n                <xui-button on-click="close" width="70">取消</xui-button>\n            </div>\n        </div>\n    </xui-layer>\n</template>\n'}),define("ai/page/market/product/publish/FastPublish/index",["exports","module","./FastPublish","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/publish/LabelSelect",["exports","module","san","ai/common/component","babel-runtime/helpers/interop-require-default","inf-ui/x/components/asInput","./TransferLayer/index","./TransferItem/index","lodash"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](n),u=a["default"](r),d=a["default"](s),c=o["default"]({template:'\n        <div class="ai-store-label-select">\n            <div class="ai-store-label-selector">\n                <transfer-layer maxCount="{{maxCount}}" layer="{{layer}}" on-submit="save"></transfer-layer>\n                <span class="ai-store-label-selector-des">{{des}}</span>\n            </div>\n            <div s-if="selected.length" class="ai-store-label-selected">\n                <transfer-item s-for="item in selected" item="{{item}}" on-remove="removeItem"></transfer-item>\n            </div>\n        </div>\n    ',components:{"transfer-layer":l["default"],"transfer-item":u["default"]},initData:function(){return{maxCount:0,title:"",des:"",datasource:[],value:[]}},computed:{layer:function(){return{title:this.data.get("title"),datasource:this.data.get("datasource")}},selected:function(){return this.data.get("datasource").filter(function(e){return e.added})}},dataTypes:{maxCount:e.DataTypes.number,title:e.DataTypes.string,des:e.DataTypes.string,datasource:e.DataTypes.array,value:e.DataTypes.array},save:function(e){this.$set("datasource",e),this.change()},removeItem:function(e){var t=this.$get("datasource"),a=d["default"].findIndex(t,function(t){return t.value===e.value});e.added=!1,this.data.splice("datasource",[a,1,e]),this.change()},change:function(){var e=this.$get("selected").map(function(e){return e.value});this.$set("value",e),this.fire("change",{value:e})}});module.exports=i.asInput(c)}),define("ai/page/market/product/publish/ProductEditor/index",["exports","module","./ProductEditor","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/publish/ProductEditor/lib/editorHelper",["exports","module","babel-runtime/core-js/promise"],function(exports,module,e){module.exports={formatBlock:function(e){document.execCommand("formatBlock",!1,e)},formatContent:function(){this.formatBlock("div")},formatTitle:function(){this.formatBlock("<h2>")},appendLine:function(){document.execCommand("insertHTML",!1,"<br>")},insertImage:function(e,t,a){if(a)return this.formatContent(),void document.execCommand("insertImage",!1,e);var i=document.createElement("div");i.innerHTML='<img src="'+e+'">',t.appendChild(i)},getFormatBlockTagName:function(t){return new e["default"](function(e){setTimeout(function(){var a=document.getSelection();if(a){var i=a.anchorNode;if(i)if(i!==t){for(;i.parentNode!==t&&i.parentNode;)i=i.parentNode;3!==i.nodeType?i.tagName?e(i.tagName.toLowerCase()):e(null):e("div")}else e("div");else e(null)}else e(null)},0)})}}}),define("ai/page/market/product/publish/ProductEditor/lib/imageHandle",["exports","module","babel-runtime/regenerator","ai/common/util","jquery","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){module.exports=function(a,i){var s=this,o=a.querySelectorAll("img");[].slice.call(o).forEach(function(a){var o,l,u,d;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:if(/^https?:/.test(a.src)){s.next=3;break}return n["default"](a).remove(),s.abrupt("return");case 3:if(!~a.src.indexOf("bcebos.com")&&a.src!==r){s.next=5;break}return s.abrupt("return");case 5:return o=a.src,a.src=r,s.next=9,e["default"].awrap(t.getAsyncTuple(i({link:o})));case 9:if(l=s.sent,u=l[0],d=l[1],!u){s.next=15;break}return n["default"](a).remove(),s.abrupt("return");case 15:a.src=d.fileLink;case 16:case"end":return s.stop()}},null,s)})};var n=i["default"](a),r="https://bce.bdstatic.com/console/dist/009bbae/dep/inf-style/0.0.0/img/process.gif"}),define("ai/page/market/product/publish/ProductEditor/lib/pasteHandle",["exports"],function(exports){function e(e,t,a,i){var n=e,r=n.split("</html>");return 2===r.length&&(n=r[0]),n=n.replace(/<(meta|script|link).+?>/gim,""),n=n.replace(/<!--.*?-->/gm,""),n=n.replace(/\s?data-.+?=('|").+?('|")/gim,""),a&&(n=n.replace(/<img.+?>/gim,"")),n=t?n.replace(/\s?(class|style)=('|").*?('|")/gim,""):n.replace(/\s?class=('|").*?('|")/gim,""),i&&(n=n.replace(/<(?!\/?(div|p|h2|br|img|span))[^>]+>/gi,"")),n}function t(e){return null==e?"":e.replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/(\r\n|\r|\n)/g,"<br/>")}exports.__esModule=!0,exports.getPasteHtml=function(a,i,n){var r=a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData,s=undefined,o=undefined;if(null==r?s=window.clipboardData&&window.clipboardData.getData("text"):(s=r.getData("text/plain"),o=r.getData("text/html")),!o&&s&&(o="<p>"+t(s)+"</p>"),o)return e(o,i,n,!0)},exports.getPasteHtmlFromContent=e,exports.replaceHtmlSymbol=t}),define("ai/page/market/product/publish/ProductEditor/lib/SelectionStore",["exports","module","babel-runtime/helpers/class-call-check"],function(exports,module,e){var t=function(){function t(){e["default"](this,t),this.range=null}return t.prototype.save=function(){this.range=window.getSelection().getRangeAt(0)},t.prototype.restore=function(){if(this.range){var e=window.getSelection();e.removeAllRanges(),e.addRange(this.range)}},t.prototype.hasSingleContainer=function(){return this.range.startContainer===this.range.endContainer},t.prototype.hasStored=function(){return!!this.range},t}();module.exports=t}),define("ai/page/market/product/publish/ProductEditor/ProductEditor",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ProductEditor.tpl","san-xui","./lib/editorHelper","./lib/SelectionStore","ai/components/MemoryUploader","jquery","./lib/pasteHandle","ai/common/util","./lib/imageHandle"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=a["default"](t),f=a["default"](i),m=a["default"](r),h=a["default"](s),g=a["default"](o),v=a["default"](l),x=a["default"](c);module.exports=p["default"]({template:f["default"],components:{"xui-layer":n.Layer},initData:function(){return{width:700,height:200,limit:200,limitContent:"0/200",title:"",secTitle:"",titleEditable:!1,titleEdit:{show:!1,value:""},content:"",toolbars:["Aa","image"],rowLayer:{open:!1,activeTag:"h2"},selection:new h["default"]}},computed:{editorStyle:function(){return["width:"+this.data.get("width")+"px"].join(";")},contentStyle:function(){return["height:"+this.data.get("height")+"px"].join(";")},showAa:function(){return!!~this.data.get("toolbars").indexOf("Aa")},showImage:function(){return!!~this.data.get("toolbars").indexOf("image")}},attached:function(){var t;return e["default"].async(function(e){for(var a=this;;)switch(e.prev=e.next){case 0:this.watch("rowLayer.activeTag",function(e){a.choseTag(e)}),this.watch("limit",function(){return a.updateLeftWorld()}),this.nextTick(function(){return a.updateLeftWorld()}),t=function(e){e!==a.getContent()&&(e=u.getPasteHtmlFromContent(e,!0,!1,!0),a.setContent(e),a.updateLeftWorld())},this.watch("content",t),t(this.$get("content")),this.attachedAfter();case 7:case"end":return e.stop()}},null,this)},attachedAfter:function(){var e=this;v["default"](this.ref("editor")).on("paste",function(t){e.nextTick(function(){var t=e.getContent(),a=u.getPasteHtmlFromContent(t,!0,!1,!1),i=u.getPasteHtmlFromContent(t,!0,!1,!0);i!==t&&a!==i?e.setContent(i):e.nextTick(function(){v["default"](e.ref("editor")).find("*").removeAttr("style")}),e.$get("toolbars").some(function(e){return"image"===e})&&x["default"](e.ref("editor"),e.ajax.linkUploadMarketImage)})})},disposed:function(){v["default"](this.ref("editor")).off("paste")},showRowLayer:function(){this.$set("rowLayer.open",!0)},choseTag:function(e){var t=this.$get("selection");if(t.hasSingleContainer()){switch(t.restore(),e){case"h2":this.$set("rowLayer.activeTag","h2"),m["default"].formatTitle();break;case"div":this.$set("rowLayer.activeTag","div"),m["default"].formatContent()}this.$set("rowLayer.open",!1),this.updateContent()}},cacheAndUpdate:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.$get("selection").save(),a.next=3,e["default"].awrap(m["default"].getFormatBlockTagName(this.ref("editor")));case 3:return t=a.sent,this.$set("rowLayer.activeTag",t),this.updateLeftWorld(),this.updateContent(),a.next=9,e["default"].awrap(d.sleep(0));case 9:this.fire("update",this.getContent());case 10:case"end":return a.stop()}},null,this)},uploadImage:function(){var t=this,a=this.$get("selection"),i=new g["default"]({url:"/api/ai/market/common/imageUpload?rel=other",success:function(n){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(d.sleep(50));case 2:a.restore(),m["default"].insertImage(n.picUrl,this.ref("editor"),a.hasStored()),i.dispose(),this.updateContent();case 6:case"end":return t.stop()}},null,t)},sizeLimit:10485760,errors:{F_EXCEED_SIZE:"请选择10M以内的图片文件"}});i.showDialog()},toggleEditBox:function(e){e&&this.$set("titleEdit.value",this.$get("title")),this.$set("titleEdit.show",e)},updateEditBox:function(){var e=this.$get("titleEdit.value").trim();e.length<=0||(this.$set("title",e),this.toggleEditBox(!1))},getContent:function(){var e=v["default"](this.ref("editor"));return e.text().trim().length<=0&&e.find("img").length<=0?"":e.html().trim()},setContent:function(e){this.ref("editor").innerHTML=e},updateContent:function(){this.$set("content",this.getContent())},updateLeftWorld:function(){var e=this.$get("limit"),t=this.ref("editor").innerText.trim().length;t<=e?this.$set("limitContent",t+"/"+e):this.$set("limitContent",'<span style="color:#f00;">字数最多'+e+"，已超出最大允许值!</span>")}})}),define("ai/page/market/product/publish/ProductEditor/ProductEditor.tpl",[],function(){return'<div class="market-product-editor" style="{{editorStyle}}">\n    <div class="product-editor-header">\n        <span class="product-editor-title">{{title}}{{secTitle}}</span>\n        <div s-if="titleEditable" class="title-edit-wrap">\n            <xui-icon on-click="toggleEditBox(true)" name="edit" />\n            <span s-if="titleEdit.show" class="edit-box">\n                \x3c!-- <xui-textbox s-ref="titleEditBox" value="{=titleEdit.value=}"/> --\x3e\n                <div class="ui-textbox ui-textbox-x">\n                    <input type="text" value="{=titleEdit.value=}">\n                </div>\n                <span on-click="updateEditBox">确定</span>\n                <span on-click="toggleEditBox(false)">取消</span>\n            </span>\n        </div>\n        <div class="toolbar-wrap" style="position: relative;">\n            <div s-if="showAa" on-click="showRowLayer" class="toolbar-item">Aa</div>\n            <xui-layer\n                s-if="showAa"\n                class="ai-market-editor-rowLayer"\n                open="{=rowLayer.open=}"\n                offset-top="{{height * -1}}"\n                offset-left="{{width - 100}}"\n            >\n                <div on-click="choseTag(\'h2\')" class="tag-option-wrap">\n                    <xui-icon s-if="rowLayer.activeTag === \'h2\'" name="duigou" />\n                    <div class="tag-option tag-option-title">标题</div>\n                </div>\n                <div on-click="choseTag(\'div\')" class="tag-option-wrap">\n                    <xui-icon s-if="rowLayer.activeTag === \'div\'" name="duigou" />\n                    <div class="tag-option">正文</div>\n                </div>\n            </xui-layer>\n            <div s-if="showImage" on-click="uploadImage" class="toolbar-item"><xui-icon name="image-new" /></div>\n        </div>\n    </div>\n    <div s-ref="editor" on-mouseup="cacheAndUpdate" on-keyup="cacheAndUpdate" class="product-editor-content" contentEditable="true" style="{{contentStyle}}"></div>\n    <div class="limit-tip">{{limitContent | raw}}</div>\n</div>\n'}),define("ai/page/market/product/publish/publish",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./publish.tpl","./PublishSteps/BaseInfo","./PublishSteps/ApiInfo","./PublishSteps/PropertyInfo","./PublishSteps/PayInfo/index","./PublishSteps/AfterServiceInfo","san-xui","lodash","jquery","ai/common/util","ai/common/enums","./utils","./tempSample","common/flags","inf-monitor/logger","ai/models/market/ProductInfo","ai/components/PagerHeader/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g,v,x,b,y){var k=i["default"](a),T=i["default"](n),w=i["default"](r),I=i["default"](s),D=i["default"](o),S=i["default"](l),A=i["default"](u),$=i["default"](c),E=i["default"](p),L=(i["default"](v),i["default"](x)),C=i["default"](y);module.exports=k["default"]({template:T["default"],components:{"base-info":w["default"],"api-info":I["default"],"property-info":D["default"],"pay-info":S["default"],"after-service-info":A["default"],"xui-checkbox":d.CheckBox,"pager-header":C["default"]},messages:{"on:step":function(e){var t=e.value;this.on("step",t)},"reload-publish-page":function(t){var a,i,n,r=t.value;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.initData({marketUserInfo:this.data.get("marketUserInfo")}).data,i=$["default"].assign({},a,r,{providerId:this.data.get("marketUserInfo.providerId")}),1===r.modelType?(i.apiInfo.requestSample=g.tuxiangSample,i.apiInfo.responseSuccSample=g.tuxiangSuccessSample,i.apiInfo.responseFailSample=g.tuxiangFailSample):2===r.modelType&&(i.apiInfo.requestSample=g.wutiSample,i.apiInfo.responseSuccSample=g.wutiSuccessSample,i.apiInfo.responseFailSample=g.wutiFailSample),t.next=5,e["default"].awrap(this.ajax.saveFastMarketProductEasyDL(i));case 5:if(n=t.sent,this.data.get("productId")+""!=n.productId+""){t.next=9;break}return this.$reload(),t.abrupt("return");case 9:this.$aiRedirect("product/publish",{productId:n.productId});case 10:case"end":return t.stop()}},null,this)}},initData:function(e){e.marketUserInfo;return{loading:!0,lastDraftContent:"",breadItem:[{title:"商品发布"}],step:0,feedback:[],done:[!1,!1,!1,!1],templateList:[],data:b.productInfoFactory()}},computed:{needReviewInfo:function(){var e=this.data.get("data.status");return e!==m.StoreProductStatus.OFFLINE&&e!==m.StoreProductStatus.ONLINE},showApiSection:function(){return!this.data.get("marketUserInfo.official")&&this.data.get("data.productType")===m.MarketProductType.SOFTWARE&&this.data.get("data.productCategory").some(function(e){return 60100===e})},submitDisabled:function(){return $["default"].some(this.data.get("done"),function(e){return!e})},postData:function(){return $["default"].assign({},h.getPostData(this.data.get("data")),{providerId:this.data.get("marketUserInfo.providerId")})},draftUnSave:function(){return this.data.get("lastDraftContent")!==JSON.stringify(this.data.get("postData"))},isEmptyTemplate:function(){return!this.data.get("showApiSection")&&this.data.get("templateList").length<=0},score:function(){var e=this.data.get("data"),t=100;e.productAlbum.length<=1&&(t-=5),e.productDocs.length<=2&&(t-=5),e.productVideo||(t-=5);var a=document.createElement("div");return a.innerHTML=e.productDetail.scene,a.textContent.trim().length||(t-=10),a.innerHTML=e.productDetail.description,a.textContent.trim().length<=20&&(t-=10),t}},inited:function(){var e=this;this.on("getStoreUserInfo",this.getStoreUserInfo),window.onbeforeunload=function(t){e.$get("draftUnSave")&&(t.returnValue="离开此页后，所填写的内容将不会保存\n确认要离开当前页面吗？")}},getStoreUserInfo:function(){return e["default"].async(function(t){for(var a=this;;)switch(t.prev=t.next){case 0:return L["default"].log({target:"SanPage",action:"actionLoad",actionPath:window.location.hash.substring(1),trackId:"ai-market-product-publish-load",trackName:"进入商品发布页",url:window.location.href.replace(/\?[^#]*/,"")}),t.next=3,e["default"].awrap(this.checkDraftCount());case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:if(this.$set("productId",~~this.$get("productId")),!this.$get("productId")){t.next=16;break}return t.next=10,e["default"].awrap(this.getProductDraft());case 10:if(this.setPackageInfoRndTag(),!this.$get("needReviewInfo")){t.next=14;break}return t.next=14,e["default"].awrap(this.getProductReview());case 14:return t.next=16,e["default"].awrap(this.getProductTemplateList());case 16:this.$set("data.providerId",this.data.get("marketUserInfo.providerId")),this.$set("loading",!1),this.choseSection(1),this.watch("data.productCategory",function(){a.getProductTemplateList(),a.$set("done[1]",!1)}),this.startToSaveDraft();case 21:case"end":return t.stop()}},null,this)},checkDraftCount:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$get("marketUserInfo.providerStatus")===m.StoreProviderStatus.REVIEWING){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,e["default"].awrap(this.ajax.getMarketProductDraftCount());case 5:if(!(t.sent.count>=5)){t.next=10;break}return this.$toast("未通过审核最多只能有5份草稿",{messageType:"error"}),this.$aiRedirect("provider/register"),t.abrupt("return",!1);case 10:return t.abrupt("return",!0);case 11:case"end":return t.stop()}},null,this)},setPackageInfoRndTag:function(){for(var e=this.$get("data.packageInfo"),t=0,a=e.length;t<a;t++){e[t].rndTag||this.$set("data.packageInfo["+t+"].rndTag",h.getRndTag())}},getProductTemplateList:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==(t=this.$get("data.productCategory")).length){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,e["default"].awrap(this.ajax.getMarketTemplateList({categoryId:t.slice(-1)[0]}));case 5:a=i.sent,this.$set("templateList",a);case 7:case"end":return i.stop()}},null,this)},getProductReview:function(){var e=this;return this.ajax.getStoreProductReviewInfo({productId:this.$get("data.productId")}).then(function(t){t.content&&e.$set("feedback",String(t.content).split("\n"))})},choseSection:function(e){e<5&&this.$set("done["+(e-1)+"]",!1),this.$$set({step:e}),this.fire("step",e),this.nextTick(function(){E["default"]("html, body").animate({scrollTop:0},300)})},handleDoneStep:function(e){this.$set("done["+(e-1)+"]",!0);var t=e+1;2===t&&this.$get("isEmptyTemplate")&&(this.$set("done[1]",!0),t++),this.choseSection(t)},getProductDraft:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getStoreProductDraftInfo({productId:this.$get("productId")}));case 2:t=a.sent,$["default"].isEmpty(t)||(this.$set("data",t),t.productId&&this.$set("productId",t.productId),t.productDetail.highlight.length<=0&&d.alert({title:"提示",message:"由于商品详情改版，请您按照新格式填写，历史数据已转到“产品说明”模块。",width:500}));case 4:case"end":return a.stop()}},null,this)},submit:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.$get("postData"),a=t.productId,i=t.autoRelease,s.next=5,e["default"].awrap(f.getAsyncTuple(this.ajax.submitMarketProduct({productId:a,autoRelease:i})));case 5:n=s.sent,r=n[0],n[1],r||(this.$toast("提交成功"),this.$redirect("#/ai/market/product/list"));case 9:case"end":return s.stop()}},null,this)},saveDraft:function(){var e=this;this.saveDraftBase().then(function(){return e.$toast("草稿保存成功",{messageType:"success"})},function(){return e.$toast("草稿保存失败",{messageType:"error"})})},saveDraftBase:function(){var a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e["default"].awrap(f.getAsyncTuple(this.ajax.saveStoreProductDraft(this.$get("postData"),{"x-silent":!0})));case 2:if(a=r.sent,i=a[0],n=a[1],!i){r.next=7;break}return r.abrupt("return",t["default"].reject(i));case 7:n.productId&&this.$$set({productId:n.productId,"data.productId":n.productId}),n.packageInfo&&h.updatePackageInfoPackageId(n.packageInfo,this),this.$set("lastDraftContent",JSON.stringify(this.$get("postData")));case 10:case"end":return r.stop()}},null,this)},startToSaveDraft:function(){clearInterval(this.draftTimer),this.draftTimer=window.setInterval(this.saveDraftBase.bind(this),6e4)},detached:function(){window.clearInterval(this.draftTimer),window.onbeforeunload=null},preview:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=window.open(),t.document.body.innerHTML="加载中...",s.next=4,e["default"].awrap(f.getAsyncTuple(this.ajax.getMarketProductPreview({productId:this.$get("data.productId")},{"x-silent":!0})));case 4:if(a=s.sent,i=a[0],n=a[1],!i){s.next=11;break}return t.close(),this.$toast(i.global,{messageType:"error"}),s.abrupt("return");case 11:r=this.$get("Url").store.product,t.location.href=r+"/"+n.productInstance+"?type=preview";case 13:case"end":return s.stop()}},null,this)},handleBack:function(){this.$aiRedirect("product/list")}})}),define("ai/page/market/product/publish/publish.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        \x3c!-- <app-sidebar /> --\x3e\n        <app-content style="padding: 0;">\n            <pager-header back="返回商品列表" title="发布商品" on-back="handleBack" />\n            \x3c!-- <breadcrumb items="{{breadItem}}"></breadcrumb> --\x3e\n            <div class="list-content ai-store-content ai-store-product-publish-content ai-market-content">\n                <xui-toastlabel s-if="feedback.length" level="error">\n                    <p>审核反馈：</p>\n                    <p>\n                        <template s-for=\'line, index in feedback\'>\n                            <br s-if="index !== 0">\n                            {{line}}\n                        </template>\n                    </p>\n                </xui-toastlabel>\n                <xui-toastlabel s-if="score<70 && !submitDisabled">\n                    <div>\n                        <span>温馨提示：当前商品信息完成度{{score}}%，内容不完整可能影响商品的推广效果及获取商机能力，建议继续完善商品信息。</span>\n                        \x3c!-- <a href="{{data.caseUrl}}" target="_blank">优秀案例</a> --\x3e\n                        \x3c!-- 临时写死，之后会放到接口 --\x3e\n                        <a href="https://aim.baidu.com/product/5b8d8817-9141-4cfc-ae58-640e2815dfd4" target="_blank">优秀案例</a>\n                    </div>\n                </xui-toastlabel>\n                <div class="section{{step === 1?\' open\' : \'\'}}">\n                    <div class="product-info-title">\n                        <xui-icon s-if="step!=1 && done[0]" name="ok" />\n                        <xui-icon s-else name="thin-more" />\n                        <span>基本信息</span>\n                        <template s-if="step > 1">\n                            <span class="split">|</span>\n                            <a on-click="choseSection(1)" href="javascript:void(0)">编辑</a>\n                        </template>\n                    </div>\n                    <base-info on-done-step="handleDoneStep" s-if="!loading" class="product-info-content" marketUserInfo="{{marketUserInfo}}" data="{=data=}" />\n                </div>\n                <div s-if="showApiSection" class="section{{step === 2?\' open\' : \'\'}}">\n                    <div class="product-info-title">\n                        <xui-icon s-if="step!=2 && done[1]" name="ok" />\n                        <xui-icon s-else name="thin-more" />\n                        <span>API生产信息</span>\n                        <template s-if="step > 2">\n                            <span class="split">|</span>\n                            <a on-click="choseSection(2)" href="javascript:void(0)">编辑</a>\n                        </template>\n                    </div>\n                    <api-info on-done-step="handleDoneStep" s-if="!loading" class="product-info-content" data="{=data=}" />\n                </div>\n                <div s-elif="!isEmptyTemplate" class="section{{step === 2?\' open\' : \'\'}}">\n                    <div class="product-info-title">\n                        <xui-icon s-if="step!=2 && done[1]" name="ok" />\n                        <xui-icon s-else name="thin-more" />\n                        <span>参数信息</span>\n                        <template s-if="step > 2">\n                            <span class="split">|</span>\n                            <a on-click="choseSection(2)" href="javascript:void(0)">编辑</a>\n                        </template>\n                    </div>\n                    <property-info on-done-step="handleDoneStep" s-if="!loading" class="product-info-content" templateList="{{templateList}}" data="{=data=}" />\n                </div>\n                <div class="section{{step === 3?\' open\' : \'\'}}">\n                    <div class="product-info-title">\n                        <xui-icon s-if="step!=3 && done[2]" name="ok" />\n                        <xui-icon s-else name="thin-more" />\n                        <span>交付信息</span>\n                        <template s-if="step > 3">\n                            <span class="split">|</span>\n                            <a on-click="choseSection(3)" href="javascript:void(0)">编辑</a>\n                        </template>\n                    </div>\n                    <pay-info on-done-step="handleDoneStep" s-if="!loading" class="product-info-content" marketUserInfo="{{marketUserInfo}}" data="{=data=}" />\n                </div>\n                <div class="section{{step ===4?\' open\' : \'\'}}">\n                    <div class="product-info-title">\n                        <xui-icon s-if="step!=4 && done[3]" name="ok" />\n                        <xui-icon s-else name="thin-more" />\n                        <span>售后服务信息</span>\n                        <template s-if="!submitDisabled">\n                            <span class="split">|</span>\n                            <a on-click="choseSection(4)" href="javascript:void(0)">编辑</a>\n                        </template>\n                    </div>\n                    <after-service-info on-done-step="handleDoneStep" s-if="!loading" class="product-info-content" marketUserInfo="{{marketUserInfo}}" data="{=data=}" />\n                </div>\n            </div>\n            <div class="aim-fixed-ctlbar">\n                <div class="btn-wrap">\n                    <xui-button on-click="submit" disabled="{{submitDisabled}}" skin="primary" size="large">提交审核</xui-button>\n                    <xui-button  on-click="saveDraft" size="large">保存至草稿</xui-button>\n                    <xui-button on-click="preview" disabled="{{submitDisabled}}" tip="{{submitDisabled? \'全部填写完毕后方可预览\': \'\'}}" size="large">预览</xui-button>\n                </div>\n                <div class="tip-wrap">\n                    <div s-if="!submitDisabled">\n                        <xui-checkbox checked="{=data.autoRelease=}" title="若审核成功，系统自动发布或更新商品" />\n                    </div>\n                    <div>提示：点击保存至草稿，此商品信息会被保存，可在商品列表页查看；</div>\n                </div>\n            </div>\n            \x3c!-- <div class="ai-market-btn-submit-wrap">\n                <div s-if="!submitDisabled" class="auto-release-wrap">\n                    <xui-checkbox checked="{=data.autoRelease=}" title="若审核成功，系统自动发布或更新商品" />\n                </div>\n                <xui-button on-click="submit" disabled="{{submitDisabled}}" skin="primary" size="large">提交审核</xui-button>\n                <xui-button  on-click="saveDraft" size="large">保存至草稿</xui-button>\n                <xui-button on-click="preview" disabled="{{submitDisabled}}" tip="{{submitDisabled? \'全部填写完毕后方可预览\': \'\'}}" size="large">预览</xui-button>\n            </div>\n            <div class="ai-market-des-wrap">\n                <p class="left-tip">提示：</p>\n                <p class="right-tip">当您点击保存信息时，您所填的信息会被保存；</p>\n                <p class="right-tip">当您点击完成提交时，所有信息会被提交至后台，待后台审核！</p>\n            </div> --\x3e\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/product/publish/PublishSteps/AfterServiceInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./AfterServiceInfo.tpl","san-xui","ai/components/InputAddonUnit/index","lodash","../rules","ai/common/util","../utils","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=i["default"](a),f=i["default"](n),m=i["default"](s),h=i["default"](o),g=i["default"](l);module.exports=p["default"]({template:f["default"],components:{"xui-textbox":r.TextBox,"xui-radiobox":r.RadioBox,"xui-boxgroup":r.BoxGroup,"xui-form":r.Form,"xui-item":r.FormItem,"input-addon-unit":m["default"],"xui-select":r.Select},initData:function(){return{InvoiceType:c.InvoiceType,invoiceTypeList:c.InvoiceType.toArray(),qualityAssuranceList:c.QualityAssurance.toArray(),qualityAssuranceUnitList:c.TimeUnit.toArray(),data:{},qualityAssuranceTime:"",qualityAssuranceCheckedindex:c.QualityAssurance.PERIOD,errors:{}}},computed:{rules:function(){return g["default"]({qualityAssuranceCheckedindex:this.data.get("qualityAssuranceCheckedindex"),qualityAssuranceTime:this.data.get("qualityAssuranceTime")})},postData:function(){var e=h["default"].cloneDeep(this.data.get("data")),t=this.data.get("qualityAssuranceCheckedindex"),a=this.data.get("qualityAssuranceTime");return t===c.QualityAssurance.NON?e.qualityAssurance.time=0:t===c.QualityAssurance.LIFE_TIME?e.qualityAssurance.time=-1:e.qualityAssurance.time=Number(a)||0,d.getPostData(e)}},created:function(){var e=this.$get("data.qualityAssurance.time");-1===e?this.$set("qualityAssuranceCheckedindex",c.QualityAssurance.LIFE_TIME):0===e?this.$set("qualityAssuranceCheckedindex",c.QualityAssurance.NON):this.$$set({qualityAssuranceTime:e,qualityAssuranceCheckedindex:c.QualityAssurance.PERIOD})},changeQualityAssurance:function(e){this.$set("qualityAssuranceCheckedindex",e)},saveStep:function(){var a,i,n,r,s;return t["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return a=undefined,i=undefined,o.next=4,t["default"].awrap(u.getAsyncTuple(this.ref("afterServiceForm").validateForm()));case 4:if(n=o.sent,!(a=n[0])){o.next=9;break}return this.jumpToError(a),o.abrupt("return");case 9:return o.next=11,t["default"].awrap(u.getAsyncTuple(this.ajax.saveMarketProduct(e["default"]({},this.$get("postData"),{step:4}))));case 11:if(r=o.sent,a=r[0],i=r[1],!a){o.next=19;break}return s=a.global?"提交失败："+a.global:"提交失败",this.$toast(s,{messageType:"error"}),a.field&&(this.jumpToError(a.field),this.$set("errors",a.field)),o.abrupt("return");case 19:i.productId&&this.$set("data.productId",i.productId),this.fire("done-step",4);case 21:case"end":return o.stop()}},null,this)},jumpToError:function(e){var t=h["default"].keys(e);if(!h["default"].isEmpty(t)){var a=t[0];$("html, body").animate({scrollTop:$(".ui-form-item-"+a).offset().top-60},300)}}})}),define("ai/page/market/product/publish/PublishSteps/AfterServiceInfo.tpl",[],function(){return'<div class="market-publish-after-service-info">\n    <xui-form s-ref="afterServiceForm" rules="{{rules.afterService}}" formData="{{data}}" errors="{{errors}}">\n        \x3c!-- 发票服务 --\x3e\n        <xui-item label="发票服务：" name="invoiceType">\n            <xui-boxgroup box-type="radio" datasource="{{invoiceTypeList}}" value="{=data.invoiceType=}"></xui-boxgroup>\n        </xui-item>\n\n        \x3c!-- 服务保障 --\x3e\n        <xui-item label="服务保障：" name="qualityAssurance">\n            <span class="quality-assurance-item" s-for="item in qualityAssuranceList">\n                <xui-radiobox class="quality-assurance-item-radiobox" name="qualityAssurance" title="{{item.text}}" checked="{{qualityAssuranceCheckedindex===item.value}}" on-change="changeQualityAssurance(item.value)" />\n                <input-addon-unit s-if="item.value === 0" disabled="{{qualityAssuranceCheckedindex!==0}}" datasource="{{qualityAssuranceUnitList}}" value="{=qualityAssuranceTime=}" unit="{=data.qualityAssurance.unit=}" min="{{1}}" width="{{145}}" placeholder="请输入质保期" type="number" />\n            </span>\n        </xui-item>\n\n        \x3c!-- 保障说明 --\x3e\n        <xui-item label=" " name="qualityIntroduction">\n            <span slot="label" style="line-height: 10px;">\n                保障说明：\n                <div style="margin-left: 8px;">(选填)</div>\n            </span>\n            <xui-textbox width="{{590}}" multiline="{{true}}" placeholder="请如实填写您的商品保修、退换货等售后服务支持说明；该信息将直接展示在商品详情页，有助于增加买家采购意愿。" limit-length="{{300}}" value="{=data.qualityIntroduction=}" />\n        </xui-item>\n\n        <xui-item label=" ">\n            <xui-button on-click="saveStep" class="btn-save-goon" skin="primary" size="large">保存并继续</xui-button>\n        </xui-item>\n    </xui-form>\n</div>\n'}),define("ai/page/market/product/publish/PublishSteps/ApiInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ApiInfo.tpl","san-xui","ai/components/TextArea","ai/components/NoValueChangeWrapper","lodash","../rules","../utils","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){var f=n["default"](i),m=n["default"](r),h=n["default"](o),g=n["default"](l),v=n["default"](u),x=n["default"](d);module.exports=f["default"]({template:m["default"],components:{"xui-textbox":s.TextBox,"xui-radiobox":s.RadioBox,"xui-checkbox":s.CheckBox,"xui-boxgroup":s.BoxGroup,"xui-select":s.Select,"xui-richtexteditor":s.RichTextEditor,"xui-tip":s.Tip,"xui-form":s.Form,"xui-item":s.FormItem,"xui-dialog":s.Dialog,"text-area":h["default"],"xui-table":s.Table,"xui-tab":s.Tab,"xui-tab-panel":s.TabPanel,"xui-clipboard":s.Clipboard,"no-value-change-wrapper":g["default"]},initData:function(){return{rules:x["default"](),headerTable:{schema:[{name:"param",label:"参数"},{name:"value",label:"值"},{name:"ctl",label:"操作"}]},queryTable:{schema:[{name:"param",label:"名称"},{name:"type",label:"类型"},{name:"required",label:"是否必须"},{name:"range",label:"可选值范围"},{name:"desc",label:"描述"},{name:"ctl",label:"操作"}]},bodyTable:{schema:[{name:"param",label:"名称"},{name:"type",label:"类型"},{name:"required",label:"是否必须"},{name:"range",label:"可选值范围"},{name:"desc",label:"描述"},{name:"ctl",label:"操作"}]},errorCodeTable:{schema:[{name:"code",label:"错误码"},{name:"msg",label:"错误信息"},{name:"desc",label:"描述"},{name:"ctl",label:"操作"}]},paramTypeDatasource:[],requiredDatasource:[{text:"必选",value:!0},{text:"可选",value:!1}],data:{apiInfo:{apiSrcUrl:"https://xxxxx",apiUsrUri:"face/xxxx",requestType:"POST",responseType:"JSON",requestHeader:[{param:"xxx",value:"xxxx"}],requestQuery:[{param:"xxxx",type:"",required:!0,desc:"xxxxx",range:"xxxx"}],requestBody:[{param:"xxxx",type:"",required:!1,desc:"xxxxx",range:"xxxx"}],requestSample:[{title:"bash",content:"xxxxx"}],responseSuccSample:"xxxxx",responseFailSample:"xxxxx",errorCode:[{code:1e3,msg:"xxxx",desc:"xxxx"}]}},errors:{}}},computed:{showApiLayer:function(){return"API"===this.data.get("data.productType")&&this.data.get("data.hasReleased")},queryTableTypes:function(){var e=this.data.get("paramTypeDatasource");return this.data.get("data.apiInfo.requestQuery").map(function(e){return e.type}).map(function(t){var a=v["default"].find(e,function(e){return e.value===t});return a?a.text:""})},queryTableRequireds:function(){var e=this.data.get("requiredDatasource");return this.data.get("data.apiInfo.requestQuery").map(function(e){return e.required}).map(function(t){var a=v["default"].find(e,function(e){return e.value===t});return a?a.text:""})},bodyTableTypes:function(){var e=this.data.get("paramTypeDatasource");return this.data.get("data.apiInfo.requestBody").map(function(e){return e.type}).map(function(t){var a=v["default"].find(e,function(e){return e.value===t});return a?a.text:""})},bodyTableRequireds:function(){var e=this.data.get("requiredDatasource");return this.data.get("data.apiInfo.requestBody").map(function(e){return e.required}).map(function(t){var a=v["default"].find(e,function(e){return e.value===t});return a?a.text:""})},postData:function(){return c.getPostData(this.data.get("data"))}},created:function(){var e;return t["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return e=this.$get("data.apiInfo.apiUsrUri"),this.$set("data.apiInfo.apiUsrUri",e.replace(/^\//,"")),this.watch("data.apiInfo.requestType",function(e){"GET"===e&&i.$set("data.apiInfo.requestBody",[])}),a.next=5,t["default"].awrap(this.getParamTypeDatasource());case 5:case"end":return a.stop()}},null,this)},getParamTypeDatasource:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductParamType());case 2:e=(e=a.sent).map(function(e){var t=e.name;return{text:t,value:t}}),this.$set("paramTypeDatasource",e);case 5:case"end":return a.stop()}},null,this)},choseRequestType:function(e){this.$set("data.apiInfo.requestType",e)},handleApiSrcBlur:function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(p.sleep(50));case 2:if(!this.$get("errors.apiSrcUrl")){i.next=4;break}return i.abrupt("return");case 4:return i.next=6,t["default"].awrap(p.getAsyncTuple(this.ajax.checkMarketApiSrcUrl({apiSrcUrl:this.$get("data.apiInfo.apiSrcUrl")},{"x-silent":!0})));case 6:e=i.sent,a=e[0],e[1],a?this.$set("errors.apiSrcUrl",a.global):this.$set("errors.apiSrcUrl",null);case 10:case"end":return i.stop()}},null,this)},handleApiUsrUri:function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(p.sleep(50));case 2:if(!this.$get("errors.apiUsrUri")){i.next=4;break}return i.abrupt("return");case 4:return i.next=6,t["default"].awrap(p.getAsyncTuple(this.ajax.checkMarketOutUri({outApiUsrUri:this.$get("data.apiInfo.apiUsrUri")},{"x-silent":!0})));case 6:e=i.sent,a=e[0],e[1],a?this.$set("errors.apiUsrUri",a.global):this.$set("errors.apiUsrUri",null);case 10:case"end":return i.stop()}},null,this)},setHeaderTableEditing:function(e,t){if(t||this.$set("errors.requestHeader",null),!t){var a=this.$get("data.apiInfo.requestHeader["+e+"]");if(!a.param.length&&!a.value.length)return void this.deleteHeaderRow(e)}this.$set("data.apiInfo.requestHeader["+e+"].isEditing",t)},updateHeaderRow:function(e){var t,a=this,i=function(t){var i=a.ref("header-"+e+"-"+t).data.get("value");return"string"==typeof i?i.trim():i},n=i("param"),r=i("value");n.length&&(this.$$set((t={},t["data.apiInfo.requestHeader["+e+"].param"]=n,t["data.apiInfo.requestHeader["+e+"].value"]=r,t)),this.setHeaderTableEditing(e,!1))},deleteHeaderRow:function(e){this.data.splice("data.apiInfo.requestHeader",[e,1])},appendHeaderRow:function(){for(var e=this.$get("data.apiInfo.requestHeader"),t=0;t<e.length;t++)e[t].isEditing&&this.updateHeaderRow(t);this.data.push("data.apiInfo.requestHeader",{param:"",value:"",isEditing:!0})},setQueryTableEditing:function(e,t){if(t||this.$set("errors.requestQuery",null),!t){if(!this.$get("data.apiInfo.requestQuery["+e+"]").param.trim().length)return void this.deleteQueryRow(e)}this.$set("data.apiInfo.requestQuery["+e+"].isEditing",t)},deleteQueryRow:function(e){this.data.splice("data.apiInfo.requestQuery",[e,1])},updateQueryRow:function(t){var a=this,i=function(e){var i=a.ref("query-"+t+"-"+e).data.get("value");return"string"==typeof i?i.trim():i},n=i("param"),r=i("type"),s=i("required"),o=i("range"),l=i("desc");if(n.trim().length){var u=this.$get("data.apiInfo.requestQuery["+t+"]");this.$set("data.apiInfo.requestQuery["+t+"]",e["default"]({},u,{param:n,type:r,required:s,range:o,desc:l})),this.setQueryTableEditing(t,!1)}},appendQueryRow:function(){for(var e=this.$get("data.apiInfo.requestQuery"),t=0;t<e.length;t++)e[t].isEditing&&this.updateQueryRow(t);this.data.push("data.apiInfo.requestQuery",{param:"",type:this.$get("paramTypeDatasource")[0].value,required:!0,desc:"无",range:"无",isEditing:!0})},setBodyTableEditing:function(e,t){if(t||this.$set("errors.requestBody",null),!t){if(!this.$get("data.apiInfo.requestBody["+e+"]").param.trim().length)return void this.deleteBodyRow(e)}this.$set("data.apiInfo.requestBody["+e+"].isEditing",t)},deleteBodyRow:function(e){this.data.splice("data.apiInfo.requestBody",[e,1])},updateBodyRow:function(t){var a=this,i=function(e){var i=a.ref("body-"+t+"-"+e).data.get("value");return"string"==typeof i?i.trim():i},n=i("param"),r=i("type"),s=i("required"),o=i("range"),l=i("desc");if(n.trim().length){var u=this.$get("data.apiInfo.requestBody["+t+"]");this.$set("data.apiInfo.requestBody["+t+"]",e["default"]({},u,{param:n,type:r,required:s,range:o,desc:l})),this.setBodyTableEditing(t,!1)}},appendBodyRow:function(){for(var e=this.$get("data.apiInfo.requestBody"),t=0;t<e.length;t++)e[t].isEditing&&this.updateBodyRow(t);this.data.push("data.apiInfo.requestBody",{param:"",type:this.$get("paramTypeDatasource")[0].value,required:!0,desc:"无",range:"无",isEditing:!0})},onAfterCopy:function(){this.$toast("复制成功")},setCodeTableEditing:function(e,t){if(t||this.$set("errors.errorCode",null),!t){if(!this.$get("data.apiInfo.errorCode["+e+"]").code.trim().length)return void this.deleteCodeRow(e)}this.$set("data.apiInfo.errorCode["+e+"].isEditing",t)},deleteCodeRow:function(e){this.data.splice("data.apiInfo.errorCode",[e,1])},updateCodeRow:function(t){var a=this,i=function(e){var i=a.ref("code-"+t+"-"+e).data.get("value");return"string"==typeof i?i.trim():i},n=i("code"),r=i("msg"),s=i("desc");if(/^\d+$/.test(n)){var o=this.$get("data.apiInfo.errorCode["+t+"]");this.$set("data.apiInfo.errorCode["+t+"]",e["default"]({},o,{code:n,msg:r,desc:s})),this.setCodeTableEditing(t,!1)}else this.$errorToast("错误码需要填数字")},appendCodeRow:function(){for(var e=this.$get("data.apiInfo.errorCode"),t=0;t<e.length;t++)e[t].isEditing&&this.updateCodeRow(t);this.data.push("data.apiInfo.errorCode",{code:"",msg:"",desc:"",isEditing:!0})},saveStep:function(){var i,n,r,s,o,l;return t["default"].async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,t["default"].awrap(p.getAsyncTuple(a["default"].all([this.ref("apiForm").validateForm()])));case 2:if(i=u.sent,!(n=i[0])){u.next=7;break}return this.jumpToError(n),u.abrupt("return");case 7:return u.next=9,t["default"].awrap(p.getAsyncTuple(a["default"].all([this.handleApiSrcBlur(),this.handleApiUsrUri()])));case 9:if(r=this.$get("errors"),!v["default"].keys(r).length){u.next=13;break}return this.jumpToError(r),u.abrupt("return");case 13:return s=undefined,u.next=16,t["default"].awrap(p.getAsyncTuple(this.ajax.saveMarketProduct(e["default"]({},this.$get("postData"),{step:2}))));case 16:if(o=u.sent,n=o[0],s=o[1],!n){u.next=24;break}return l=n.global?"提交失败："+n.global:"提交失败",this.$toast(l,{messageType:"error"}),n.field&&(this.jumpToError(n.field),this.$set("errors",n.field)),u.abrupt("return");case 24:s.productId&&this.$set("data.productId",s.productId),this.fire("done-step",2);case 26:case"end":return u.stop()}},null,this)},jumpToError:function(e){var t=v["default"].keys(e);if(!v["default"].isEmpty(t)){var a=t[0];$("html, body").animate({scrollTop:$(".ui-form-item-"+a).offset().top-60},300)}}})}),define("ai/page/market/product/publish/PublishSteps/ApiInfo.tpl",[],function(){return'<div class="step-api-info">\n    \x3c!-- 已发布过的api商品，不能编辑api部分内容 --\x3e\n    <div s-if="showApiLayer" class="api-layer">\n        <div class="api-layer-content">\n            为保障买家正常使用，已经上架过商品的API生产信息不可修改。\n        </div>\n    </div>\n    <xui-form s-ref="apiForm" rules="{{rules.api}}" formData="{{data.apiInfo}}" errors="{=errors=}">\n        <xui-item name="apiSrcUrl" label="API地址设置：">\n            <div>服务商原始API地址：</div>\n            <xui-textbox on-blur="handleApiSrcBlur" value="{=data.apiInfo.apiSrcUrl=}" width="550" placeholder="填写url地址" />\n        </xui-item>\n        <xui-item name="apiUsrUri">\n            <div>对外展示API地址：</div>\n            <div>\n                <span>https://aip.baidubce.com/rpc/2.0/aimarket/</span>\n                <xui-textbox on-blur="handleApiUsrUri" value="{=data.apiInfo.apiUsrUri=}" width="280" placeholder="支持字母、数字、下划线组合，开头必须为字母" />\n            </div>\n        </xui-item>\n        <xui-item name="requestType" label="请求方式：">\n            <xui-button on-click="choseRequestType(\'GET\')" skin="{{data.apiInfo.requestType === \'GET\'?\'primary\':\'\'}}">GET</xui-button>\n            <xui-button on-click="choseRequestType(\'POST\')" skin="{{data.apiInfo.requestType === \'POST\'?\'primary\':\'\'}}">POST</xui-button>\n        </xui-item>\n        <xui-item name="responseType" label="返回类型：">\n            \x3c!-- <xui-button skin="primary">JSON</xui-button> --\x3e\n            <span>JSON</span>\n        </xui-item>\n        <xui-item name="requestHeader" label="请求参数(选填)：">\n            \x3c!-- headers --\x3e\n            <div>Headers</div>\n            <xui-table schema="{{headerTable.schema}}" datasource="{{data.apiInfo.requestHeader}}">\n                \x3c!-- 参数 --\x3e\n                <no-value-change-wrapper slot="c-param">\n                    <span s-if="!data.apiInfo.requestHeader[rowIndex].isEditing">{{row.param}}</span>\n                    <xui-textbox placeholder="请输入参数" s-ref="header-{{rowIndex}}-param" s-if="data.apiInfo.requestHeader[rowIndex].isEditing" value="{{row.param}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 值 --\x3e\n                <no-value-change-wrapper slot="c-value">\n                    <span s-if="!data.apiInfo.requestHeader[rowIndex].isEditing">{{row.value}}</span>\n                    <xui-textbox placeholder="请输入值" s-ref="header-{{rowIndex}}-value" s-if="data.apiInfo.requestHeader[rowIndex].isEditing" value="{{row.value}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 操作 --\x3e\n                <div class="ctl-cell-wrap" slot="c-ctl">\n                    <template s-if="!data.apiInfo.requestHeader[rowIndex].isEditing">\n                        <a on-click="setHeaderTableEditing(rowIndex,true)" href="javascript:void(0)">编辑</a>\n                        <a on-click="deleteHeaderRow(rowIndex)" href="javascript:void(0)">删除</a>\n                    </template>\n                    <template s-if="data.apiInfo.requestHeader[rowIndex].isEditing">\n                        <a on-click="updateHeaderRow(rowIndex)" href="javascript:void(0)">保存</a>\n                        <a on-click="setHeaderTableEditing(rowIndex,false)" href="javascript:void(0)">取消</a>\n                    </template>\n                </div>\n            </xui-table>\n            <div class="api-add-param-wrap">\n                <a on-click="appendHeaderRow" class="api-add-param" href="javascript:void(0)">\n                    <xui-icon name="plus" />\n                    <span>添加参数</span>\n                </a>\n            </div>\n        </xui-item>\n\n        <xui-item name="requestQuery" label=" ">\n            \x3c!-- query --\x3e\n            <div>Query</div>\n            <xui-table schema="{{queryTable.schema}}" datasource="{{data.apiInfo.requestQuery}}">\n                \x3c!-- 名称 --\x3e\n                <no-value-change-wrapper slot="c-param">\n                    <span s-if="!data.apiInfo.requestQuery[rowIndex].isEditing">{{row.param}}</span>\n                    <xui-textbox placeholder="名称" s-ref="query-{{rowIndex}}-param" s-if="data.apiInfo.requestQuery[rowIndex].isEditing" value="{{row.param}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 类型 --\x3e\n                <no-value-change-wrapper slot="c-type">\n                    <span s-if="!data.apiInfo.requestQuery[rowIndex].isEditing">{{ queryTableTypes[rowIndex] }}</span>\n                    <xui-select s-ref="query-{{rowIndex}}-type" s-if="data.apiInfo.requestQuery[rowIndex].isEditing" datasource="{{paramTypeDatasource}}" value="{{row.type}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 是否必须 --\x3e\n                <no-value-change-wrapper slot="c-required">\n                    <span s-if="!data.apiInfo.requestQuery[rowIndex].isEditing">{{ queryTableRequireds[rowIndex] }}</span>\n                    <xui-select s-ref="query-{{rowIndex}}-required" s-if="data.apiInfo.requestQuery[rowIndex].isEditing" datasource="{{requiredDatasource}}" value="{{row.required}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 可选值范围 --\x3e\n                <no-value-change-wrapper slot="c-range">\n                    <span s-if="!data.apiInfo.requestQuery[rowIndex].isEditing">{{ row.range }}</span>\n                    <xui-textbox s-ref="query-{{rowIndex}}-range" s-if="data.apiInfo.requestQuery[rowIndex].isEditing" value="{{row.range}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 描述 --\x3e\n                <no-value-change-wrapper slot="c-desc">\n                    <span s-if="!data.apiInfo.requestQuery[rowIndex].isEditing">{{ row.desc }}</span>\n                    <xui-textbox placeholder="请输入描述" s-ref="query-{{rowIndex}}-desc" s-if="data.apiInfo.requestQuery[rowIndex].isEditing" value="{{row.desc}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 操作 --\x3e\n                <div class="ctl-cell-wrap" slot="c-ctl">\n                    <template s-if="!data.apiInfo.requestQuery[rowIndex].isEditing">\n                        <a on-click="setQueryTableEditing(rowIndex,true)" href="javascript:void(0)">编辑</a>\n                        <a on-click="deleteQueryRow(rowIndex)" href="javascript:void(0)">删除</a>\n                    </template>\n                    <template s-if="data.apiInfo.requestQuery[rowIndex].isEditing">\n                        <a on-click="updateQueryRow(rowIndex)" href="javascript:void(0)">保存</a>\n                        <a on-click="setQueryTableEditing(rowIndex,false)" href="javascript:void(0)">取消</a>\n                    </template>\n                </div>\n            </xui-table>\n            <div class="api-add-param-wrap">\n                <a on-click="appendQueryRow" class="api-add-param" href="javascript:void(0)">\n                    <xui-icon name="plus" />\n                    <span>添加参数</span>\n                </a>\n            </div>\n        </xui-item>\n\n        <xui-item name="requestBody" label=" ">\n            \x3c!-- body --\x3e\n            <div>Body</div>\n            <xui-table class="{{ data.apiInfo.requestType === \'GET\'?\'api-body-table\':\'\' }}" schema="{{bodyTable.schema}}" datasource="{{data.apiInfo.requestBody}}">\n                \x3c!-- 名称 --\x3e\n                <no-value-change-wrapper slot="c-param">\n                    <span s-if="!data.apiInfo.requestBody[rowIndex].isEditing">{{row.param}}</span>\n                    <xui-textbox placeholder="名称" s-ref="body-{{rowIndex}}-param" s-if="data.apiInfo.requestBody[rowIndex].isEditing" value="{{row.param}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 类型 --\x3e\n                <no-value-change-wrapper slot="c-type">\n                    <span s-if="!data.apiInfo.requestBody[rowIndex].isEditing">{{ bodyTableTypes[rowIndex] }}</span>\n                    <xui-select s-ref="body-{{rowIndex}}-type" s-if="data.apiInfo.requestBody[rowIndex].isEditing" datasource="{{paramTypeDatasource}}" value="{{row.type}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 是否必须 --\x3e\n                <no-value-change-wrapper slot="c-required">\n                    <span s-if="!data.apiInfo.requestBody[rowIndex].isEditing">{{ bodyTableRequireds[rowIndex] }}</span>\n                    <xui-select s-ref="body-{{rowIndex}}-required" s-if="data.apiInfo.requestBody[rowIndex].isEditing" datasource="{{requiredDatasource}}" value="{{row.required}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 可选值范围 --\x3e\n                <no-value-change-wrapper slot="c-range">\n                    <span s-if="!data.apiInfo.requestBody[rowIndex].isEditing">{{ row.range }}</span>\n                    <xui-textbox placeholder="可选值范围" s-ref="body-{{rowIndex}}-range" s-if="data.apiInfo.requestBody[rowIndex].isEditing" value="{{row.range}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 描述 --\x3e\n                <no-value-change-wrapper slot="c-desc">\n                    <span s-if="!data.apiInfo.requestBody[rowIndex].isEditing">{{ row.desc }}</span>\n                    <xui-textbox placeholder="描述" s-ref="body-{{rowIndex}}-desc" s-if="data.apiInfo.requestBody[rowIndex].isEditing" value="{{row.desc}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 操作 --\x3e\n                <div class="ctl-cell-wrap" slot="c-ctl">\n                    <template s-if="!data.apiInfo.requestBody[rowIndex].isEditing">\n                        <a on-click="setBodyTableEditing(rowIndex,true)" href="javascript:void(0)">编辑</a>\n                        <a on-click="deleteBodyRow(rowIndex)" href="javascript:void(0)">删除</a>\n                    </template>\n                    <template s-if="data.apiInfo.requestBody[rowIndex].isEditing">\n                        <a on-click="updateBodyRow(rowIndex)" href="javascript:void(0)">保存</a>\n                        <a on-click="setBodyTableEditing(rowIndex,false)" href="javascript:void(0)">取消</a>\n                    </template>\n                </div>\n                \x3c!-- 空白提示 --\x3e\n                <template class="body-empty" slot="empty">无参数</template>\n            </xui-table>\n            <div s-if="data.apiInfo.requestType === \'POST\' " class="api-add-param-wrap" style="margin-top:0;">\n                <a on-click="appendBodyRow" class="api-add-param" href="javascript:void(0)">\n                    <xui-icon name="plus" />\n                    <span>添加参数</span>\n                </a>\n            </div>\n        </xui-item>\n        \x3c!-- 请求示例 --\x3e\n        <xui-item label="请求示例：">\n            <div style="color: #999;">以下为多种程序语言的请求示例代码模板，请根据您API的具体情况进行修改；注：API地址请填写对外展示API地址。</div>\n            <xui-tab skin="card">\n                \x3c!-- 这里不能循环，先手写下来，以后再想办法 --\x3e\n                <xui-tab-panel s-if="data.apiInfo.requestSample.length>=1" title="{{data.apiInfo.requestSample[0].title}}">\n                    <ul class="api-request-sample-ul"></ul>\n                    <textarea class="api-request-sample-textarea" value="{=data.apiInfo.requestSample[0].content=}"></textarea>\n                    <xui-clipboard text="{{data.apiInfo.requestSample[0].content}}" on-aftercopy="onAfterCopy" tip-position="w">\n                        <xui-icon name="copy" />\n                    </xui-clipboard>\n                </xui-tab-panel>\n                <xui-tab-panel s-if="data.apiInfo.requestSample.length>=2" title="{{data.apiInfo.requestSample[1].title}}">\n                    <ul class="api-request-sample-ul"></ul>\n                    <textarea class="api-request-sample-textarea" value="{=data.apiInfo.requestSample[1].content=}"></textarea>\n                    <xui-clipboard text="{{data.apiInfo.requestSample[1].content}}" on-aftercopy="onAfterCopy" tip-position="w">\n                        <xui-icon name="copy" />\n                    </xui-clipboard>\n                </xui-tab-panel>\n                <xui-tab-panel s-if="data.apiInfo.requestSample.length>=3" title="{{data.apiInfo.requestSample[2].title}}">\n                    <ul class="api-request-sample-ul"></ul>\n                    <textarea class="api-request-sample-textarea" value="{=data.apiInfo.requestSample[2].content=}"></textarea>\n                    <xui-clipboard text="{{data.apiInfo.requestSample[2].content}}" on-aftercopy="onAfterCopy" tip-position="w">\n                        <xui-icon name="copy" />\n                    </xui-clipboard>\n                </xui-tab-panel>\n                <xui-tab-panel s-if="data.apiInfo.requestSample.length>=4" title="{{data.apiInfo.requestSample[3].title}}">\n                    <ul class="api-request-sample-ul"></ul>\n                    <textarea class="api-request-sample-textarea" value="{=data.apiInfo.requestSample[3].content=}"></textarea>\n                    <xui-clipboard text="{{data.apiInfo.requestSample[3].content}}" on-aftercopy="onAfterCopy" tip-position="w">\n                        <xui-icon name="copy" />\n                    </xui-clipboard>\n                </xui-tab-panel>\n                <xui-tab-panel s-if="data.apiInfo.requestSample.length>=5" title="{{data.apiInfo.requestSample[4].title}}">\n                    <ul class="api-request-sample-ul"></ul>\n                    <textarea class="api-request-sample-textarea" value="{=data.apiInfo.requestSample[4].content=}"></textarea>\n                    <xui-clipboard text="{{data.apiInfo.requestSample[4].content}}" on-aftercopy="onAfterCopy" tip-position="w">\n                        <xui-icon name="copy" />\n                    </xui-clipboard>\n                </xui-tab-panel>\n                <xui-tab-panel s-if="data.apiInfo.requestSample.length>=6" title="{{data.apiInfo.requestSample[5].title}}">\n                    <ul class="api-request-sample-ul"></ul>\n                    <textarea class="api-request-sample-textarea" value="{=data.apiInfo.requestSample[5].content=}"></textarea>\n                    <xui-clipboard text="{{data.apiInfo.requestSample[5].content}}" on-aftercopy="onAfterCopy" tip-position="w">\n                        <xui-icon name="copy" />\n                    </xui-clipboard>\n                </xui-tab-panel>\n                <xui-tab-panel s-if="data.apiInfo.requestSample.length>=7" title="{{data.apiInfo.requestSample[6].title}}">\n                    <ul class="api-request-sample-ul"></ul>\n                    <textarea class="api-request-sample-textarea" value="{=data.apiInfo.requestSample[6].content=}"></textarea>\n                    <xui-clipboard text="{{data.apiInfo.requestSample[6].content}}" on-aftercopy="onAfterCopy" tip-position="w">\n                        <xui-icon name="copy" />\n                    </xui-clipboard>\n                </xui-tab-panel>\n            </xui-tab>\n        </xui-item>\n        \x3c!-- 正常返回示例 --\x3e\n        <xui-item name="responseSuccSample" label="正常返回示例：">\n            <xui-textbox value="{=data.apiInfo.responseSuccSample=}" multiline="{{true}}" width="800"/>\n            <xui-clipboard style="position:absolute;left: 780px;top:2px;" text="{{data.apiInfo.responseSuccSample}}" on-aftercopy="onAfterCopy" tip-position="w">\n                <xui-icon name="copy" />\n            </xui-clipboard>\n        </xui-item>\n        \x3c!-- 失败返回示例 --\x3e\n        <xui-item name="responseFailSample" label="失败返回示例：">\n            <xui-textbox value="{=data.apiInfo.responseFailSample=}" multiline="{{true}}" width="800"/>\n            <xui-clipboard style="position:absolute;left: 780px;top:2px;" text="{{data.apiInfo.responseFailSample}}" on-aftercopy="onAfterCopy" tip-position="w">\n                <xui-icon name="copy" />\n            </xui-clipboard>\n        </xui-item>\n        \x3c!-- 错误码定义 --\x3e\n        <xui-item name="errorCode" label="错误码定义：">\n            <xui-table schema="{{errorCodeTable.schema}}" datasource="{{data.apiInfo.errorCode}}">\n                \x3c!-- 错误码 --\x3e\n                <no-value-change-wrapper slot="c-code">\n                    <span s-if="!data.apiInfo.errorCode[rowIndex].isEditing">{{row.code}}</span>\n                    <xui-textbox placeholder="错误码" s-ref="code-{{rowIndex}}-code" s-if="data.apiInfo.errorCode[rowIndex].isEditing" value="{{row.code}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 错误信息 --\x3e\n                <no-value-change-wrapper slot="c-msg">\n                    <span s-if="!data.apiInfo.errorCode[rowIndex].isEditing">{{row.msg}}</span>\n                    <xui-textbox placeholder="错误信息" s-ref="code-{{rowIndex}}-msg" s-if="data.apiInfo.errorCode[rowIndex].isEditing" value="{{row.msg}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 描述 --\x3e\n                <no-value-change-wrapper slot="c-desc">\n                    <span s-if="!data.apiInfo.errorCode[rowIndex].isEditing">{{row.desc}}</span>\n                    <xui-textbox placeholder="描述" s-ref="code-{{rowIndex}}-desc" s-if="data.apiInfo.errorCode[rowIndex].isEditing" value="{{row.desc}}" />\n                </no-value-change-wrapper>\n                \x3c!-- 操作 --\x3e\n                <div class="ctl-cell-wrap" slot="c-ctl">\n                    <template s-if="!data.apiInfo.errorCode[rowIndex].isEditing">\n                        <a on-click="setCodeTableEditing(rowIndex,true)" href="javascript:void(0)">编辑</a>\n                        <a on-click="deleteCodeRow(rowIndex)" href="javascript:void(0)">删除</a>\n                    </template>\n                    <template s-if="data.apiInfo.errorCode[rowIndex].isEditing">\n                        <a on-click="updateCodeRow(rowIndex)" href="javascript:void(0)">保存</a>\n                        <a on-click="setCodeTableEditing(rowIndex,false)" href="javascript:void(0)">取消</a>\n                    </template>\n                </div>\n            </xui-table>\n            <div class="api-add-param-wrap">\n                <a on-click="appendCodeRow" class="api-add-param" href="javascript:void(0)">\n                    <xui-icon name="plus" />\n                    <span>添加参数</span>\n                </a>\n            </div>\n        </xui-item>\n        <xui-item label=" ">\n            <xui-button on-click="saveStep" class="btn-save-goon" skin="primary" size="large">保存并继续</xui-button>\n        </xui-item>\n    </xui-form>\n</div>\n'}),define("ai/page/market/product/publish/PublishSteps/BaseInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./BaseInfo.tpl","san-xui","ai/components/TextArea","ai/components/ImageUploader","../LabelSelect","ai/common/enums","lodash","jquery","../ProductEditor/index","../rules","ai/components/UploadItem","ai/common/util","../utils","../FastPublish/index","ai/components/ImageCropper/index","ai/components/VodUploader/index","ai/components/ImageUploadList/index","ai/components/FileUploadList/index","ai/models/market/ProductInfo"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g,v,x,b,y,k,T,w){var I=n["default"](i),D=n["default"](r),S=n["default"](o),A=n["default"](l),$=n["default"](u),E=n["default"](c),L=n["default"](p),C=n["default"](f),P=n["default"](m),N=n["default"](h),U=n["default"](x),_=n["default"](b),M=n["default"](y),F=n["default"](k),q=n["default"](T);module.exports=I["default"]({template:D["default"],components:{"xui-textbox":s.TextBox,"xui-radiobox":s.RadioBox,"xui-checkbox":s.CheckBox,"xui-boxgroup":s.BoxGroup,"xui-select":s.Select,"xui-richtexteditor":s.RichTextEditor,"xui-tip":s.Tip,"xui-form":s.Form,"xui-item":s.FormItem,"xui-dialog":s.Dialog,"xui-multipicker":s.MultiPicker,"text-area":S["default"],"image-uploader":A["default"],"label-select":$["default"],"product-editor":C["default"],"upload-item":N["default"],"fast-publish":U["default"],"image-cropper":_["default"],"vod-uploader":M["default"],"image-upload-list":F["default"],"file-upload-list":q["default"]},initData:function(){return{easyDLList:[],fastPublishLayer:{open:!1},imageList:{url:"/api/ai/market/common/picUpload",extData:{rel:"product"},des:["图片尺寸：720*540px以上","图片大小：建议大于80Kb且小于10Mb","图片格式：jpg、png"],sizeLimit:{min:0,minLabel:"0Kb",max:10485760,maxLabel:"10Mb"}},fileList:{options:{url:"/api/ai/market/common/fileUpload"},des:["文件大小：不超过10Mb","文件格式：ppt、doc、pdf等"]},imageData:{rel:"product"},fileUploaderUrl:"/api/ai/market/common/fileUpload",fileUploaderOptions:{accept:{title:"Files",extensions:"pdf",mimeTypes:"application/pdf"}},fileUploaderEvents:{uploadBeforeSend:function(e,t,a){E["default"].extend(t,{fileType:e.file.ext})}},editorProductLightToolbar:["Aa"],productTypeList:[],technologyList:[],industryList:[],data:{},errors:{basic:{},editor:{}},previewDialog:{open:!1},fileUploadResultHandler:this.fileUploadResultHandler,fileUploadInstructionResultHandler:this.fileUploadInstructionResultHandler,productLicense:null,catList:[],catValue:[]}},computed:{catId2Name:function(){var e={};return this.data.get("catList").forEach(function(t){e[t.id]=t.name}),e},catDatasource:function(){var e=this;return this.data.get("catList").map(function(t){return{text:t.label,value:t.id,children:function a(t){return t.items&&0!==t.items.length?t.items.map(function(t){return{text:t.label,value:t.id,disabled:!e.data.get("marketUserInfo.official")&&60100===t.id,children:a(t)}}):null}(t)}})},complexUnit:function(){var e=this.data.get("priceUnitList"),t=this.data.get("data.priceUnit");return 1===E["default"].get(E["default"].find(e,E["default"].matchesProperty("value",t)),"type",0)},rules:function(){return P["default"]({complexUnit:this.data.get("complexUnit"),deliveryDaysTypes:this.data.get("deliveryDaysTypes")})},productImage:function(){return this.data.get("data.productImage")?{url:this.data.get("data.productImageUrl"),id:this.data.get("data.productImage")}:null},productImages:function(){return this.data.get("data.productImage")?[{url:this.data.get("data.productImageUrl"),id:this.data.get("data.productImage")}]:[]},needReviewInfo:function(){return this.data.get("data.status")!==d.StoreProductStatus.OFFLINE&&this.data.get("data.status")!==d.StoreProductStatus.ONLINE},postData:function(){return v.getPostData(this.data.get("data"))},contractConfirmed:function(){return!!this.data.get("marketUserInfo.contractStatus")}},created:function(){var e;return t["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.getProductCategoryList());case 2:this.watch("previewDialog.open",function(e){e||i.hidePreviewDialog()}),e=function(e){var t=E["default"].find(i.$get("catList"),function(t){return e[0]===t.id}),a=t&&t.name===d.MarketProductType.SOFTWARE&&e.some(function(e){return 60100===e}),n=t&&t.name===d.MarketProductType.HARDWARE,r=i.$get("data.deliveryDaysType");a?i.$$set({"data.tradeType":"ONLINE","data.deliveryType":"API"}):n?i.$$set({"data.tradeType":"ONLINE","data.deliveryType":"HARDWARE"}):i.$$set({"data.tradeType":"OFFLINE","data.deliveryType":"HUMAN"}),i.$get("contractConfirmed")||i.$$set({"data.tradeType":"OFFLINE"}),a&&0===r&&i.$set("data.deliveryDaysType",1),n&&0===r&&i.$set("data.deliveryDaysType",1),2===r&&i.$set("data.deliveryDays",0),a&&"ONLINE"===i.$get("data.tradeType")&&i.$set("data.chargeType","COUNT")},this.$set("catValue",this.$get("data.productCategory")),this.watch("catValue",function(t){var a=E["default"].find(i.$get("catList"),function(e){return t[0]===e.id});i.$$set({"data.productCategory":t,"data.productType":a&&a.name||d.MarketProductType.SOFTWARE,"data.productProperty":[]}),e(t);a&&a.name===d.MarketProductType.SOFTWARE&&t.some(function(e){return 60100===e})&&!i.$get("data.apiInfo")&&i.$set("data.apiInfo",w.productInfoFactory().apiInfo)});case 6:case"end":return a.stop()}},null,this)},attached:function(){var i,n,r,s,o,l;return t["default"].async(function(u){for(;;)switch(u.prev=u.next){case 0:return i=[this.getEasyDLList(),this.getProductTypeList(),this.getTechnologyList(),this.getIndustryList()],this.$get("data.productId")&&this.$get("needReviewInfo")&&this.getProductReview(),u.next=4,t["default"].awrap(a["default"].all(i));case 4:n=this.$get("data"),r=this.$get("technologyList"),s=this.$get("industryList"),this.$set("technologyList",r.map(function(t){return e["default"]({},t,{added:E["default"].includes(n.productTechnology,t.value)})})),this.$set("industryList",s.map(function(t){return e["default"]({},t,{added:E["default"].includes(n.productIndustry,t.value)})})),o=this.$get("data.productLicense"),l=this.$get("data.productLicenseLink"),o&&this.$set("productLicense",{name:"商品协议",url:l,objectId:o});case 12:case"end":return u.stop()}},null,this)},getProductCategoryList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketCategoryList());case 2:e=a.sent,this.$set("catList",e);case 4:case"end":return a.stop()}},null,this)},getEasyDLList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductEasyDLList());case 2:e=a.sent,this.$set("easyDLList",e);case 4:case"end":return a.stop()}},null,this)},showFastPublishLayer:function(){this.$set("fastPublishLayer.open",!0)},getProductTypeList:function(){var e=this;return this.ajax.getMarketProductTypeList().then(function(t){return e.$set("productTypeList",t.map(function(e){var t=e.name;return{text:e.label,value:t}}))})},getTechnologyList:function(){var e=this;return this.ajax.getStoreTechnologyList().then(function(t){return e.$set("technologyList",t.map(function(e){var t=e.id;return{text:e.name,value:t}}))})},getIndustryList:function(){var e=this;return this.ajax.getStoreIndustryList().then(function(t){return e.$set("industryList",t.map(function(e){var t=e.id;return{text:e.name,value:t}}))})},handleProductImage:function(e){e?(this.$set("data.productImage",e.id),this.$set("data.productImageUrl",e.url)):(this.$set("data.productImage",""),this.$set("data.productImageUrl",""))},changeProductImage:function(e){e.length?(this.$set("data.productImage",e[0].id),this.$set("data.productImageUrl",e[0].url)):(this.$set("data.productImage",""),this.$set("data.productImageUrl",""))},getProductReview:function(){var e=this;return this.ajax.getStoreProductReviewInfo({productId:this.$get("data.productId")}).then(function(t){t.content&&e.$set("feedback",String(t.content).split("\n"))})},changeProductTechnology:function(e){var t=e.value;this.$set("data.productTechnology",t)},changeProductIndustry:function(e){var t=e.value;this.$set("data.productIndustry",t)},showPreviewDialog:function(){var e=document.body.style.cssText.replace(/;\s*$/,"");e+=";overflow:hidden;",document.body.style.cssText=e,this.$set("previewDialog.open",!0)},hidePreviewDialog:function(){var e=document.body.style.cssText.replace(/;?\s*?overflow\s*?:\s*?hidden\s*?;?/g,"");document.body.style.cssText=e,this.$set("previewDialog.open",!1)},fileUploadResultHandler:function(t){return t.objectId?e["default"]({},t,{name:"商品协议",url:t.fileLink}):null},fileUploadInstructionResultHandler:function(t){return t.objectId?e["default"]({},t,{name:"使用指南",url:t.fileLink}):null},handleLicenseChange:function(e){e&&e.objectId?this.$$set({"data.productLicense":e.objectId,"data.productLicenseLink":e.fileLink}):this.$$set({"data.productLicense":"","data.productLicenseLink":""})},handleProductInstructionChange:function(e){e&&e.objectId?this.$$set({"data.productInstruction":e.objectId,"data.productInstructionLink":e.fileLink}):this.$$set({"data.productInstruction":"","data.productInstructionLink":""})},onProductNameBlur:function(e){var t=this,a=e.target.value;a&&this.ajax.checkProductName({productName:a},{"x-silent":!0}).then(function(){},function(e){t.ref("productNameItem").data.set("error",e&&e.global)})},onProductNameInput:function(e){var t=this,a=e.value;a&&a.length<=32&&a.length>=2&&(this.ref("productNameItem").data.set("error",""),this.nextTick(function(){return t.ref("basicForm").validateFormItem("productName")}))},validateProductName:function(){var e=this;return new a["default"](function(t,a){e.ref("productNameItem").data.get("error")?a({productName:"重名了"}):t()})},handleEditorUpdate:function(e){this.ref("editorForm").validateFormItem(e)},saveStep:function(){var i,n,r,s,o,l,u,d,c;return t["default"].async(function(p){for(var f=this;;)switch(p.prev=p.next){case 0:return p.next=2,t["default"].awrap(g.getAsyncTuple(a["default"].all([this.validateProductName(),this.ref("basicForm").validateForm(),this.ref("editorForm").validateForm(),this.ref("basicForm2").validateForm()])));case 2:if(i=p.sent,!(n=i[0])){p.next=7;break}return this.jumpToError(n),p.abrupt("return");case 7:return r=this.$get("data.productCategory"),s=this.$get("catId2Name"),r.forEach(function(e){s[e]&&f.$set("data.productType",s[e])}),o=undefined,p.next=13,t["default"].awrap(g.getAsyncTuple(this.ajax.saveMarketProduct(e["default"]({},this.$get("postData"),{step:1}))));case 13:if(l=p.sent,n=l[0],o=l[1],!n){p.next=21;break}return u=n.global?"提交失败："+n.global:"提交失败",this.$toast(u,{messageType:"error"}),n.field&&(this.jumpToError(n.field),delete(d=E["default"].assign({},n.field)).productDetail,c=n.field.productDetail||{},this.$$set({"errors.basic":d,"errors.editor":c})),p.abrupt("return");case 21:o.productId&&this.$set("data.productId",o.productId),this.fire("done-step",1);case 23:case"end":return p.stop()}},null,this)},jumpToError:function(e){var t=E["default"].keys(e);if(!E["default"].isEmpty(t)){var a=t[0];L["default"]("html, body").animate({scrollTop:L["default"](".ui-form-item-"+a).offset().top-60},300)}}})}),define("ai/page/market/product/publish/PublishSteps/BaseInfo.tpl",[],function(){return'<div class="step-base-info">\n    <xui-form s-ref="basicForm" rules="{{rules.basic}}" formData="{{data}}" errors="{=errors.basic=}">\n        \x3c!-- 商品名称 --\x3e\n        \x3c!-- help="上架后商品名称不可修改" --\x3e\n        <xui-item name="productName" label="商品名称：" s-ref="productNameItem">\n            <xui-textbox width="{{590}}" placeholder="名称不可重复使用，要求与服务紧密相关，建议以公司简称作为前缀名，2-32个字" type="text" value="{=data.productName=}" on-blur="onProductNameBlur" on-input="onProductNameInput"></xui-textbox>\n        </xui-item>\n        \x3c!-- 服务类型 --\x3e\n        \x3c!-- <xui-item class="item-typelist" name="productType" label="服务类型：">\n            <div on-mouseenter="showFastPublishLayer" s-if="!data.hasReleased && easyDLList.length > 0" class="layer-invoke-btn">!</div>\n            <xui-boxgroup box-type="radio" disabled="{{data.hasReleased}}" datasource="{{productTypeList}}" value="{=data.productType=}"></xui-boxgroup>\n            <fast-publish open="{=fastPublishLayer.open=}" datasource="{{easyDLList}}" />\n        </xui-item> --\x3e\n\n        \x3c!-- 商品分类 --\x3e\n        <xui-item name="productCategory" label="商品分类：">\n            <xui-multipicker\n                disabled="{{data.hasReleased}}"\n                datasource="{{catDatasource}}"\n                value="{=catValue=}"\n                >\n            </xui-multipicker>\n            <xui-button s-if="!data.hasReleased && easyDLList.length > 0" on-click="showFastPublishLayer" class="layer-invoke-btn">从现有API发布</xui-button>\n            <fast-publish open="{=fastPublishLayer.open=}" datasource="{{easyDLList}}" />\n            <p class="help">商品仅在从未上过架的草稿状态才可修改分类，请选择准确的分类。</p>\n        </xui-item>\n\n\n\n        \x3c!-- 应用技术 --\x3e\n        <xui-item name="productTechnology" label="AI能力：">\n            <label-select title="AI能力" maxCount="{{3}}" des="请选择与本商品相关的AI能力（最多可选3个）" datasource="{{technologyList}}" on-change="changeProductTechnology"></label-select>\n        </xui-item>\n        \x3c!-- 应用行业 --\x3e\n        <xui-item name="productIndustry" label="应用行业：">\n            <label-select title="应用行业" maxCount="{{3}}" des="请选择商品的应用行业（最多可选3个）" datasource="{{industryList}}" on-change="changeProductIndustry"></label-select>\n        </xui-item>\n        \x3c!-- 商品链接 --\x3e\n        <xui-item s-if="marketUserInfo.official" name="productLink" label="商品链接：">\n            <xui-textbox width="{{590}}" placeholder="请输入商品链接" type="text" value="{=data.productLink=}"></xui-textbox>\n        </xui-item>\n        \x3c!-- 商品摘要 --\x3e\n        <xui-item name="productSummary" label="商品摘要：">\n            <xui-textbox width="{{590}}" multiline="{{true}}" placeholder="商品摘要可以更快的让用户了解您的产品，该信息将直接展示在首页或商品详情页，字数70字以内" limit-length="{{70}}" value="{=data.productSummary=}" />\n            \x3c!-- <text-area width="{{590}}" placeholder="商品摘要可以更快的让用户了解您的产品，该信息将直接展示在首页或商品详情页，字数70字以内" max="{{120}}" value="{=data.productSummary=}"></text-area> --\x3e\n        </xui-item>\n        \x3c!-- 商品图片 --\x3e\n        <xui-item name="productAlbum" label="商品图片：">\n            <p class="help">该图片用于缩略图展示，为保证显示质量，请上传元素简单且文字清晰的高清图片（jpg或png格式），像素为720*540（商品详情页展示）</p>\n            <image-upload-list list="{=data.productAlbum=}" url="{{imageList.url}}" des="{{imageList.des}}" sizeLimit="{{imageList.sizeLimit}}" />\n            \x3c!-- <image-cropper url="{{imageCropper.url}}" des="{{imageCropper.des}}" sizeLimit="{{imageCropper.sizeLimit}}" image="{{productImage}}" extData="{{imageCropper.extData}}" on-change="handleProductImage" /> --\x3e\n            \x3c!-- <image-uploader url="{{imageUploaderUrl}}" images="{{productImages}}" data="{{imageData}}" on-change="changeProductImage">首页、商品列表及商品详情页展示（224*168）</image-uploader> --\x3e\n        </xui-item>\n        <xui-item name="" label="商品视频（选填）：">\n            \x3c!-- <div slot="label">\n                <div>商品视频</div>\n                <div>（选填）</div>\n            </div> --\x3e\n            <p class="help">该视频商品详情页展示，为保证显示质量，请上传突显产品性能及特性的视频</p>\n            <vod-uploader sts-url="/api/ai/market/common/sts" mediaId="{=data.productVideo=}" />\n        </xui-item>\n    </xui-form>\n    \x3c!-- 商品详情 --\x3e\n    <xui-form class="editor-form" s-ref="editorForm" rules="{{rules.editor}}" formData="{{data.productDetail}}" errors="{=errors.editor=}">\n        \x3c!-- 产品亮点 --\x3e\n        <xui-item name="highlight" label="商品详情：">\n            <p class="help">\n                商品详情是用户了解商品并产生购买意愿的重要一环，请仔细填写\n                \x3c!-- <a href="{{data.caseUrl}}" target="_blank">查看优秀范例</a> --\x3e\n                <a href="https://aim.baidu.com/product/5b8d8817-9141-4cfc-ae58-640e2815dfd4" target="_blank">查看优秀范例</a>\n            </p>\n            <product-editor content="{=data.productDetail.highlight=}" on-update="handleEditorUpdate(\'highlight\')" title="产品亮点" height="200" toolbars="{{editorProductLightToolbar}}"/>\n        </xui-item>\n        \x3c!-- 产品说明 --\x3e\n        <xui-item name="description" label=" ">\n            <product-editor content="{=data.productDetail.description=}" on-update="handleEditorUpdate(\'description\')" title="产品说明" height="360" limit="10000"/>\n        </xui-item>\n        \x3c!-- 应用场景 --\x3e\n        <xui-item name="scene" label=" ">\n            <product-editor content="{=data.productDetail.scene=}" title="应用场景" sec-title="(选填)" height="360" limit="10000"/>\n        </xui-item>\n        \x3c!-- 其他(选填) --\x3e\n        <xui-item name="other" label=" ">\n            <product-editor content="{=data.productDetail.other.content=}" title="{=data.productDetail.other.title=}" sec-title="(选填)" title-editable="{{true}}" height="300" limit="10000"/>\n        </xui-item>\n        <xui-item label=" ">\n            <a style="font-size: 14px;" on-click="showPreviewDialog" href="javascript:void(0)">预览详情</a>\n            \x3c!-- dialog的height是拼字符串，后面会加一个px。这里末尾加一个;来阻隔 =。= --\x3e\n            <xui-dialog open="{=previewDialog.open=}" width="1068" height="calc(100vh - 140px);" title="预览详情" foot="{{false}}">\n                <div class="ai-market-product-previewdialog">\n                    <div class="product-wrap">\n                        <h1 class="f-title">产品亮点</h1>\n                        <div class="ai-product-content">{{data.productDetail.highlight | raw}}</div>\n                    </div>\n                    <div class="product-wrap">\n                        <h1 class="f-title">产品说明</h1>\n                        <div class="ai-product-content">{{data.productDetail.description | raw}}</div>\n                    </div>\n                    <div s-if="data.productDetail.scene.length > 0" class="product-wrap">\n                        <h1 class="f-title">应用场景</h1>\n                        <div class="ai-product-content">{{data.productDetail.scene | raw}}</div>\n                    </div>\n                    <div s-if="data.productDetail.other.content.length > 0" class="product-wrap">\n                        <h1 class="f-title">{{data.productDetail.other.title}}</h1>\n                        <div class="ai-product-content">{{data.productDetail.other.content | raw}}</div>\n                    </div>\n                </div>\n            </xui-dialog>\n        </xui-item>\n    </xui-form>\n    <xui-form s-ref="basicForm2" rules="{{rules.basic}}" formData="{{data}}" errors="{=errors.basic=}">\n        <xui-item label="相关文档(选填)：">\n            <p class="help">请上传在销售和使用过程中用户经常用到的文档，包括但不限于：《使用说明》 《规格书》 《检测报告》等</p>\n            <file-upload-list options="{{fileList.options}}" des="{{fileList.des}}" list="{=data.productDocs=}" />\n            \x3c!-- <upload-item data="{{productInstruction}}" events="{{fileUploaderEvents}}" sizeLimit="{{100 * 1024 * 1025}}" options="{{fileUploaderInstructionOptions}}" url="{{fileUploaderUrl}}" title="上传附件" resultHandler="{{fileUploadInstructionResultHandler}}" on-change="handleProductInstructionChange" /> --\x3e\n        </xui-item>\n        \x3c!-- 商品协议 --\x3e\n        <xui-item name="productLicense" label="商品协议：" help="支持pdf格式，此协议为服务商提供的与用户之间的协议，为保障服务商与用户权益，请上传服务商与用户间的商品协议，因商品产生的法律风险由服务商自行承担">\n            <upload-item data="{{productLicense}}" events="{{fileUploaderEvents}}" sizeLimit="{{10 * 1024 * 1025}}" options="{{fileUploaderOptions}}" url="{{fileUploaderUrl}}" title="上传商品协议" resultHandler="{{fileUploadResultHandler}}" on-change="handleLicenseChange" />\n            <a href="https://market-public.bj.bcebos.com/商品协议.docx" target="_blank" class="productLicense-tpl">查看协议范本</a>\n        </xui-item>\n        <xui-item label=" ">\n            <xui-button on-click="saveStep" class="btn-save-goon" skin="primary" size="large">保存并继续</xui-button>\n        </xui-item>\n    </xui-form>\n</div>\n'}),define("ai/page/market/product/publish/PublishSteps/PackageCollapse/index",["exports","module","./PackageCollapse","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/publish/PublishSteps/PackageCollapse/PackageCollapse",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PackageCollapse.tpl","san-xui","lodash","./rules","ai/common/util","../../utils","ai/models/market/ProductInfo"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=i["default"](a),p=i["default"](n),f=i["default"](s),m=i["default"](o);module.exports=c["default"]({components:{"xui-form":r.Form,"xui-item":r.FormItem,"xui-textbox":r.TextBox,"xui-boxgroup":r.BoxGroup,"xui-radiobox":r.RadioBox,"xui-row":r.Row,"xui-suggestion":r.Suggestion},template:p["default"],filters:{getTextByName:function(e,t){var a=f["default"].find(t,function(t){return t.value===e});return a?a.text:""},getPackageModeDec:function(e,t){return{UNIT:"例如：100元/"+e,SET:"例如：100元/10"+e,STEP:"例如：1-10/"+e+" 100元/"+e+"；11-20"+e+" 80元/"+e}[t]}},initData:function(){var t=new d.PackageItem;return{open:!1,showEditingWanring:!1,cache:{UNIT:{packagePrice:t.packagePrice},SET:{packagePrice:t.packagePrice}},info:e["default"]({rndTag:u.getRndTag()},t),infinite:[{text:"无限",value:"无限"}],enablePackageLow:!1,editIndex:undefined,unitList:[],timeUnit:[{text:"天",value:"DAY"},{text:"月",value:"MONTH"},{text:"年",value:"YEAR"}],data:{},errors:{}}},computed:{title:function(){return(this.data.get("ifAppend")?"新建":"编辑")+"规格"},rules:function(){return m["default"]({data:this.data.get("data"),editIndex:this.data.get("editIndex"),extData:this.data.get("extData"),info:this.data.get("info"),ifCount:this.data.get("ifCount"),ifUnit:this.data.get("ifUnit"),enablePackageLow:this.data.get("enablePackageLow"),stepError:this.data.get("stepError")})},extData:function(){return{apiOnlineCountSetName:this.data.get("apiOnlineCountSetName")}},ifAppend:function(){return this.data.get("editIndex")===undefined},modeList:function(){if("TIME"===this.data.get("data.chargeType"))return[{text:"单价",value:"UNIT"}];var e=this.data.get("ifProductApi"),t="ONLINE"===this.data.get("data.tradeType"),a=this.data.get("ifCount");return e&&t&&a?[{text:"套餐价",value:"SET"}]:[{text:"单价",value:"UNIT"},{text:"套餐价",value:"SET"},{text:"阶梯价",value:"STEP"}]},ifHardware:function(){return"HARDWARE"===this.data.get("data.productType")},ifCount:function(){return"COUNT"===this.data.get("data.chargeType")},ifUnit:function(){return"UNIT"===this.data.get("info.packageMode")},ifSet:function(){return"SET"===this.data.get("info.packageMode")},ifStep:function(){return"STEP"===this.data.get("info.packageMode")},ifProductApi:function(){return"API"===this.data.get("data.productType")},currentUnitName:function(){var e=this,t=function(t,a){return f["default"].find(e.data.get(t),function(t){return t.value===e.data.get(a)})},a=undefined;return(a=this.data.get("ifCount")?t("unitList","info.packageUnit"):t("timeUnit","info.packageTimeUnit"))?a.text:""},apiOnlineCountSetName:function(){var e=this.data.get("ifProductApi"),t="ONLINE"===this.data.get("data.tradeType"),a=this.data.get("ifCount"),i=this.data.get("ifUnit");if(e&&t&&a&&!i){var n=this.data.get("info.packagePrice")+"元/"+this.data.get("info.packageCount")+this.data.get("currentUnitName");return this.data.get("info.packageLimit")>0&&(n+="（限购一次）"),n}return""},releasedEdit:function(){return this.data.get("data.hasReleased")&&!this.data.get("ifAppend")},ifEditingOnlineProduct:function(){return this.data.get("data.online")&&!this.data.get("ifAppend")},stockHelp:function(){return this.data.get("ifEditingOnlineProduct")?'上架后如需手动变更库存，请前往<a href="#/ai/market/product/stock">商品库存</a>更新':"买家下单后，库存数量将自动变更"},packageStepRemoveDisabled:function(){var e=this.data.get("info.packageStep");if(!Array.isArray(e))return[];return e.map(function(e,t,a){return 0===t||t!==a.length-1&&+e.start>0&&(+e.end>0||"无限"===e.end)&&+e.price>0})||[]},stepError:function(){if(!this.data.get("ifStep"))return{};var e=this.data.get("info.packageStep");if(e.length<2)return{text:"至少有两个阶梯价"};for(var t=function(t){var a=e[t];if(a.start&&a.end&&+a.start>=+a.end&&-1!==a.end)return{v:(i={},i[t+"-end"]="step-error",i.text="阶梯价最高数量必须大于最低数量",i)};if(a.start||a.end||a.price){var s=["start","end","price"].filter(function(e){var t={start:+a[e]<=0,end:"无限"!==a[e]&&+a[e]<=0,price:a[e]<0};return""!==a[e]&&t[e]})[0];if(s)return{v:(n={},n[t+"-"+s]="step-error",n.text="price"===s?"价格不能小于0":"数量至少为1",n)};var o=["start","end","price"].filter(function(e){return""===a[e]})[0];if(o)return{v:(r={},r[t+"-"+o]="step-error",r.text="请完成阶梯价格",r)}}},a=0;a<e.length;a++){var i,n,r,s=t(a);if("object"==typeof s)return s.v}var o=e.length-1;if("无限"!==f["default"].cloneDeep(e).pop().end){var l;return l={},l[o+"-end"]="step-error",l.text="阶梯价格数量最大值请改为无限",l}return{}},submitDisabled:function(){return this.data.get("errors")||!f["default"].isEmpty(this.data.get("stepError"))}},created:function(){var e=this,t=this.data.get("editIndex"),a=this.data.get("ifAppend");if(!a){var i=f["default"].cloneDeep(this.$get("packageInfo")[t]);-1===i.packageLow?i.packageLow=2:this.$set("enablePackageLow",!0),"STEP"===i.packageMode&&i.packageStep.forEach(function(e){e.startEditable=!0,e.endEditable=!0,-1===e.end&&(e.end="无限")}),this.$set("cache."+i.packageMode+".packagePrice",i.packagePrice),this.$set("info",i)}this.watch("modeList",function(t){e.$set("info.packageMode",t[0].value)}),a&&this.$set("info.packageMode",this.$get("modeList[0].value"))},handleLowChange:function(e){var t=e.value;this.$set("enablePackageLow",t)},handlePackageMode:function(){var e=arguments.length<=0||arguments[0]===undefined?"UNIT":arguments[0];this.$set("info.packageMode",e)},handleLimitChange:function(e){var t=e.value;this.$set("info.packageLimit",t?1:-1)},submit:function(){var e,a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(l.getAsyncTuple(this.ref("form").validateForm()));case 2:if(e=r.sent,!e[0]){r.next=6;break}return r.abrupt("return");case 6:this.$get("editIndex"),this.$get("ifAppend"),a=this.$get("info"),i=this.$get("cache"),"TIME"===this.$get("data.chargeType")&&(a.packageCount=-1,a.packageTime=1),(n=this.$get("apiOnlineCountSetName"))&&(a.packageName=n),this.$get("ifStep")?(a.packageStep=a.packageStep.filter(function(e){return e.start&&e.end&&e.price}).map(function(e){return{start:+e.start,end:"无限"===e.end?-1:+e.end,price:+e.price}}),a.packagePrice=a.packageStep[0]&&a.packageStep[0].price||1):a.packagePrice=i[a.packageMode].packagePrice,a.packageCount=+a.packageCount,a.packagePrice=+a.packagePrice,a.packageStock=+a.packageStock,a.packageUnitName=this.$get("currentUnitName"),this.$get("ifSet")||(a.packageCount=1),this.$get("enablePackageLow")||(a.packageLow=-1),this.fire("getPackageInfo",a),this.closeDialog();case 22:case"end":return r.stop()}},null,this)},addStepPrice:function(){var e=f["default"].cloneDeep(this.$get("info.packageStep")).some(function(e){return"无限"===e.end});this.data.push("info.packageStep",{start:"",startEditable:!0,end:e?"":"无限",endEditable:!0,price:""})},removeStepPrice:function(e){if(!this.$get("packageStepRemoveDisabled."+e)){if(e>0){var t="info.packageStep."+(e-1),a="info.packageStep."+(e+1);this.$set(t+".endEditable",!0);var i=+this.$get(t).end;if(+i>0&&this.$get(a)){var n;this.$$set((n={},n[a+".start"]=i+1,n[a+".startEditable"]=!1,n))}}this.data.splice("info.packageStep",[e,1])}},handleStartStepInput:function(e,t){var a;if(0!==t){var i="info.packageStep."+(t-1),n=+e.value,r=(a={},a[i+".end"]=n>0?n-1:"",a[i+".endEditable"]=n<=0,a);this.$$set(r)}},clearAfterSteps:function(e){var t=this.$get("info.packageStep").length-(e+1);this.data.splice("info.packageStep",[e+1,t].concat(new Array(t).fill({start:"",startEditable:!0,end:"",endEditable:!0,price:""})))},handleEndStepInput:function(e,t){var a;if(t!==this.$get("info.packageStep").length-1)if("无限"!==e.value){var i="info.packageStep."+(t+1),n=+e.value,r=(a={},a[i+".start"]=n>0?n+1:"",a[i+".startEditable"]=n<=0,a);this.$$set(r)}else this.clearAfterSteps(t)},closeDialog:function(){this.$set("open",!1)}})}),define("ai/page/market/product/publish/PublishSteps/PackageCollapse/PackageCollapse.tpl",[],function(){return'<div class="package-collapse" s-if="open">\n    <xui-form title="{{title}}" s-ref="form" rules="{{rules}}" formData="{{info}}" errors="{=errors=}">\n        \x3c!-- 规格名称 --\x3e\n        <xui-item name="packageName" label="规格名称：">\n            <span s-if="apiOnlineCountSetName">{{apiOnlineCountSetName}}</span>\n            <xui-textbox s-else width="262" value="{=info.packageName=}" placeholder="您可以输入普通版，10元/10件等"/>\n        </xui-item>\n\n        \x3c!-- 选择单位 按量、非套餐 --\x3e\n        <xui-item label="选择单位" s-if="ifCount&&!ifSet">\n            <xui-select  width="262" value="{=info.packageUnit=}" datasource="{{unitList}}"/>\n        </xui-item>\n\n        \x3c!-- 选择单位 按时长、单价、线下--\x3e\n        <xui-item label="选择单位" s-if="!ifCount&&ifUnit">\n            <xui-select width="262" value="{=info.packageTimeUnit=}" datasource="{{timeUnit}}"/>\n        </xui-item>\n\n        \x3c!-- 定价方式 --\x3e\n        <xui-item label="定价方式：" class="package-mode">\n            <span s-for="item in modeList">\n                <span s-if="modeList.length===1">{{item.text}}</span>\n                <xui-radiobox s-else on-change="handlePackageMode(item.value)" name="packageMode" title="{{item.text}}" checked="{{info.packageMode===item.value}}" /><span class="package-mode-dec">{{ currentUnitName | getPackageModeDec(item.value) }}</span>\n            </span>\n        </xui-item>\n\n        \x3c!-- 套餐配置 --\x3e\n        <xui-item name="packageCount" s-if="ifCount&&ifSet" label="套餐配置：">\n            <xui-textbox placeholder="请输入数量，数量不得小于2" width="180" min="{{2}}" type="number" value="{=info.packageCount=}"/>\n            <xui-select style="min-width: 60px;" width="60" value="{=info.packageUnit=}" datasource="{{unitList}}"/>\n            <span>{{ info.packageCount }}{{ currentUnitName }}/套</span>\n        </xui-item>\n\n        \x3c!-- 含税定价 --\x3e\n        <xui-item label="含税定价：" s-if="!ifStep" name="packagePrice">\n            <xui-textbox placeholder="请输入数字" width="240" min="{{1}}" type="number" value="{=cache[info.packageMode].packagePrice=}"/>\n            <span>元/{{ ifSet ? \'套\' : currentUnitName }}</span>\n        </xui-item>\n\n        \x3c!-- 含税定价 阶梯价格 --\x3e\n        <xui-item label="含税定价：" s-else>\n            <xui-row class="step-price" s-for="item, index in info.packageStep">\n                <xui-textbox class="{{stepError[index + \'-start\'] || \'\'}}" disabled="{{!item.startEditable}}" on-input="handleStartStepInput($event, index)" placeholder="请输入最低数量（含）" width="132" min="{{1}}" type="number" value="{=item.start=}"/>\n                <span style="margin: 0 10px;">至</span>\n                <xui-textbox s-if="index === 0" class="{{stepError[index + \'-end\'] || \'\'}}" disabled="{{!item.endEditable}}" on-input="handleEndStepInput($event, index)" placeholder="请选择或输入最高数量（含）" width="220" type="number" value="{=item.end=}"/>\n                <xui-suggestion s-else class="{{stepError[index + \'-end\'] || \'\'}}" disabled="{{!item.endEditable}}" on-input="handleEndStepInput($event, index)" on-change="handleEndStepInput($event, index)" hasArrow="{{true}" placeholder="请选择或输入最高数量（含）" value="{=item.end=}" datasource="{{infinite}}"/>\n                <span style="margin: 0 20px 0 10px;">{{ currentUnitName }}</span>\n                <xui-textbox class="{{stepError[index + \'-price\'] || \'\'}}" placeholder="请输入单价" width="161" min="{{1}}" type="number" value="{=item.price=}"/>\n                元\n                <a class="{{ packageStepRemoveDisabled[index] ? \'disabled\' : \'\' }}" href="javascript:void(0);" on-click="removeStepPrice(index)">移除</a>\n            </xui-row>\n            <xui-button disabled="{{ info.packageStep.length >= 5 }}" on-click="addStepPrice" icon="plus" label="添加价格" />\n            <span class="ui-form-item-invalid-label" s-if="stepError">{{ stepError.text }}</span>\n        </xui-item>\n\n        \x3c!-- 购买要求 --\x3e\n        <xui-item label=" " s-if="!ifStep" name="packageLow">\n            <span slot="label" style="line-height: 10px;" s-if="!ifStep">\n                购买要求：\n                <div style="margin-left: 8px;">(选填)</div>\n            </span>\n            <template s-if="ifUnit">\n                <xui-checkbox checked="{{enablePackageLow}}" on-change="handleLowChange" title="{{ ifCount ? \'起售量\' : \'起售时长\' }}"/>\n                <xui-textbox disabled="{{!enablePackageLow}}" width="60" type="number" min="{{2}}" value="{=info.packageLow=}" style="margin-right: 30px;" />\n            </template>\n            <xui-checkbox checked="{{info.packageLimit>0}}" on-change="handleLimitChange" title="每人限购1{{ ifSet ? \'套\' : currentUnitName }}"/>\n        </xui-item>\n\n        \x3c!-- 硬件 库存 --\x3e\n        <xui-item name="packageStock" s-if="ifHardware && ifCount" label="库存：" help="{{stockHelp}}">\n            <span s-if="ifEditingOnlineProduct">{{info.packageStock}}</span>\n            <xui-textbox s-else width="240" min="{{1}}" type="number" value="{=info.packageStock=}" placeholder="请如实填写库存数" />\n            <span>{{ ifSet ? \'套\' : currentUnitName }}</span>\n        </xui-item>\n    </xui-form>\n\n    <div class="footer">\n        <xui-button on-click="submit" skin="primary">确认</xui-button>\n        <xui-button on-click="closeDialog">取消</xui-button>\n        <span s-if="showEditingWanring" style="color: #EA2E2E;">当前规格正在编辑中</span>\n    </div>\n</div>\n\n'}),define("ai/page/market/product/publish/PublishSteps/PackageCollapse/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){a["default"](t);module.exports=function(t){return new e["default"]({packageName:[{validator:function(e,a,i){if(t.extData.apiOnlineCountSetName)i();else{var n=a.trim().replace(/[\u4e00-\u9fa5]/g,"11").length;0!==n?n>35?i("规格名称长度超出限制"):t.data.packageInfo.some(function(e,i){return e.packageName===a.trim()&&t.editIndex!==i})?i("规格重名，请重新填写"):i():i("请输入规格名称")}}}],packageCount:[{validator:function(e,t,a){(t=+t)>=1?a():a("数量最少为1")}}],packagePrice:[{validator:function(e,t,a){(t+"").length?(t=+t)>=0?a():a("价格最少0元"):a("请填写价格")}}],packageStep:[{validator:function(e,a,i){t.stepError?i(t.stepError.text):i()}}],packageLow:[{validator:function(e,a,i){if(t.enablePackageLow&&t.ifUnit){var n=t.info.packageLow,r="";if(r=t.ifCount?"起售量至少为2":"起售时长至少为2",n<2)return void i(r)}i()}}],packageStock:[{validator:function(e,a,i){a=+a;"HARDWARE"===t.data.productType&&a<=0?i("库存至少为1"):i()}}]})}}),define("ai/page/market/product/publish/PublishSteps/PackageTab/index",["exports","module","./PackageTab","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/publish/PublishSteps/PackageTab/PackageTab",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PackageTab.tpl","san-xui","lodash","./rules","ai/common/util","../../utils","ai/models/market/ProductInfo","ai/common/enums","./PriceModule/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m,h=n["default"](i),g=n["default"](r),v=n["default"](o),x=n["default"](l),b=n["default"](f),y=[{productType:p.MarketProductType.HARDWARE,productCategory:[],deliveryType:[p.StoreDeliveryType.HARDWARE],unit:"件"},{productType:p.MarketProductType.SOFTWARE,productCategory:[60100],deliveryType:[p.StoreDeliveryType.API],unit:"次"},{productType:p.MarketProductType.SOFTWARE,productCategory:[60101],deliveryType:[p.StoreDeliveryType.SDK],unit:"个"},{productType:p.MarketProductType.SOFTWARE,productCategory:[60101,60103,60199],deliveryType:[p.StoreDeliveryType.APPLICATION],unit:"年"},{productType:p.MarketProductType.DATA,productCategory:[60405],deliveryType:[p.StoreDeliveryType.COURSE],unit:"套"},{productType:p.MarketProductType.DATA,productCategory:[60403,60404],deliveryType:[p.StoreDeliveryType.DATA],unit:"件"},{productType:p.MarketProductType.SOLUTION,productCategory:[],deliveryType:[p.StoreDeliveryType.HUMAN],unit:""},{productType:null,productCategory:[60102,60103,60199],deliveryType:[p.StoreDeliveryType.APPLICATION],unit:""}];module.exports=h["default"]({components:{"xui-form":s.Form,"xui-item":s.FormItem,"xui-textbox":s.TextBox,"xui-boxgroup":s.BoxGroup,"xui-radiobox":s.RadioBox,"price-module":b["default"]},template:g["default"],initData:function(){return{done:!1,marketUserInfo:{},tabNames:["规格一","规格二","规格三","规格四","规格五"],data:{},errors:{},unitList:[],tradeTypeList:[],deliveryTypeList:p.StoreDeliveryType.toArray(),tabIndex:0,packageModeList:p.MarketPackageMode.toArray(),FreightType:p.FreightType,freightTypeList:p.FreightType.toArray()}},computed:{defaultItem:function(){var t=this.data.get("data"),a=(this.data.get("deliveryTypeList").map(function(t){return e["default"]({},t)}),this.data.get("unitList")),i=v["default"].find(y,function(e){return(!e.productType||e.productType===t.productType)&&!(e.productCategory&&e.productCategory.length&&!v["default"].intersection(t.productCategory,e.productCategory).length)});if(i){var n=v["default"].find(a,function(e){return e.text===i.unit})||{};return{deliveryType:i.deliveryType,unit:n.value,unitName:n.text}}},deliveryTypeDatasource:function(){var t=this.data.get("defaultItem"),a=this.data.get("deliveryTypeList").map(function(t){return e["default"]({},t)});if(t){var i=a.filter(function(e){return v["default"].includes(t.deliveryType,e.value)});v["default"].each(i,function(e){e.disabled=!0})}if(!this.data.get("marketUserInfo.official")){v["default"].find(a,function(e){return e.value===p.StoreDeliveryType.API}).disabled=!0}return a},addBtnVisible:function(){return this.data.get("data.packageInfo").length<this.data.get("tabNames").length},contractConfirmed:function(){return!!this.data.get("marketUserInfo.contractStatus")},hasHardWareMap:function(){return this.data.get("data.packageInfo").map(function(e){return!!~e.deliveryType.indexOf(p.StoreDeliveryType.HARDWARE)})},rules:function(){return x["default"]({data:this.data.get("data")})},apiEnabled:function(){}},created:function(){return t["default"].async(function(e){for(var i=this;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(a["default"].all([this.getUnitList(),this.getTradeType()]));case 2:this.initialize(),this.$get("data.packageInfo").length||this.addPackage(),this.$set("done",!0),this.dispatch("on:step",function(e){3===e&&i.setDefaultInfo()});case 6:case"end":return e.stop()}},null,this)},methodHook:{setDefaultInfo:function(){var e=this,t=arguments.length<=0||arguments[0]===undefined?-1:arguments[0],a=this.$get("defaultItem");if(a){var i=this.$get("data.packageInfo"),n=function(t){var n=v["default"].cloneDeep(i[t]);!n.packageUnit&&a.unit&&(n.packageUnit=a.unit,n.packageUnitName=a.unitName),n.deliveryType=v["default"].uniq([].concat(n.deliveryType,a.deliveryType||[]));v["default"].each(["packageUnit","packageUnitName","deliveryType"],function(a){e.$set("data.packageInfo["+t+"]."+a,n[a])})};if(t<0)for(var r=0;r<i.length;r++)n(r);else n(t)}},initialize:function(){var e=this,t=arguments.length<=0||arguments[0]===undefined?-1:arguments[0],a=(this.$get("data"),this.$get("data.packageInfo")),i=function(e){var t=v["default"].cloneDeep(a[e]);return t.deliveryDaysType=t.deliveryDays>=0?0:1,t.deliveryDaysType&&(t.deliveryDays=0),t.packageLowType=t.packageLow>=0,t.packageLowType||(t.packageLow=0),t.packageLimitType=t.packageLimit>=0,t},n=function(t,a){v["default"].each(["deliveryDaysType","deliveryDays","packageLowType","packageLow","packageLimitType"],function(i){e.$set("data.packageInfo["+t+"]."+i,a[i])})};if(t>=0)n(t,i(t));else for(var r=0;r<a.length;r++)n(r,i(r))},getUnitList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductUnitList());case 2:e=a.sent,this.$set("unitList",e.map(function(e){return{text:e.label,value:e.id}}));case 4:case"end":return a.stop()}},null,this)},updateUnit:function(){var e,a,i,n;return t["default"].async(function(r){for(var s=this;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(u.sleep(10));case 2:for(e=this.$get("unitList"),a=this.$get("data.packageInfo"),i=function(t){var i=a[t],n=v["default"].find(e,function(e){return e.value===i.packageUnit})||{};s.$set("data.packageInfo["+t+"].packageUnitName",n.text||"件")},n=0;n<a.length;n++)i(n);case 6:case"end":return r.stop()}},null,this)},getTradeType:function(){var e;return t["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductTradeType());case 2:e=a.sent,this.$set("tradeTypeList",e.map(function(e){return{text:e.label,value:e.name,disabled:e.name===p.PackageInfoTradeType.ONLINE&&!i.$get("contractConfirmed")}}));case 4:case"end":return a.stop()}},null,this)},choseTab:function(e){this.$set("tabIndex",e)},addPackage:function(){var t=c.packageItemFactory();this.$get("contractConfirmed")&&(t.tradeType=p.PackageInfoTradeType.ONLINE),this.data.push("data.packageInfo",e["default"]({},t,{rndTag:d.getRndTag()}));var a=this.$get("data.packageInfo").length-1;this.$set("tabIndex",a),this.initialize(a),this.setDefaultInfo(a)},deletePackage:function(e){var a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return a=this.$get("data.packageInfo["+e+"]"),i=a.packageName?'"'+a.packageName+'"':"",n.next=4,t["default"].awrap(this.$confirm({title:"删除提示",width:500,content:"<p>选中的商品规格删除后无法恢复</p><p>请确定是否要删除"+i+"商品规格？</p>",needFoot:!0}));case 4:this.data.splice("data.packageInfo",[e,1]),this.$set("tabIndex",0),this.$toast("删除成功");case 7:case"end":return n.stop()}},null,this)},handleDeliveryDaysTypeChange:function(e,a,i){return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(u.sleep(10));case 2:if(this.$set("data.packageInfo["+e+"].deliveryDaysType",a),!i){n.next=7;break}return n.next=6,t["default"].awrap(u.sleep(10));case 6:this.ref("form-"+e).validateFormItem("deliveryDaysRule");case 7:case"end":return n.stop()}},null,this)},chosePkgMode:function(e,t){this.$set("data.packageInfo["+e+"].packageMode",t)},validate:function(){var i,n,r,s,o;return t["default"].async(function(l){for(var d=this;;)switch(l.prev=l.next){case 0:l.prev=0,i=this.$get("data.packageInfo"),n=0;case 3:if(!(n<i.length)){l.next=18;break}return r=this.ref("form-"+n),l.next=7,t["default"].awrap(r.validateForm());case 7:return s=this.ref("priceModule-"+n),l.next=10,t["default"].awrap(s.validate());case 10:if(!(o=l.sent)){l.next=15;break}return this.$set("errors["+n+"]",e["default"]({},this.$get("errors["+n+"]"),{"pm-err":o})),l.next=15,t["default"].awrap(a["default"].reject());case 15:n++,l.next=3;break;case 18:return l.abrupt("return",[]);case 21:return l.prev=21,l.t0=l["catch"](0),l.abrupt("return",new a["default"](function(e){return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(u.sleep(10));case 2:e([this.$get("errors")]);case 3:case"end":return a.stop()}},null,d)}));case 24:case"end":return l.stop()}},null,this,[[0,21]])}},watchHook:(m={},m["data.packageInfo"]=function(){this.updateUnit()},m)})}),define("ai/page/market/product/publish/PublishSteps/PackageTab/PackageTab.tpl",[],function(){return'<div s-if="done" class="aim-package-tab">\n    \x3c!-- tab 头 --\x3e\n    <div class="pkg-tab-wrap">\n        <div s-for="item,index in data.packageInfo" class="pkg-tab-item {{ tabIndex===index? \' active\': \'\'}}">\n            <xui-icon on-click="deletePackage(index)" name="close" />\n            <span on-click="choseTab(index)">{{ tabNames[index] }}</span>\n        </div>\n        <div on-click="addPackage" s-if="addBtnVisible" class="pkg-tab-add">\n            <xui-icon name="plus" />\n            <span>新建商品规格</span>\n        </div>\n    </div>\n    \x3c!-- tab 面板 --\x3e\n    <div class="pkg-panel-wrap">\n        <xui-form s-for="item,index in data.packageInfo" s-ref="form-{{index}}" formData="{{item}}" errors="{= errors[index] =}" rules="{{rules[index]}}" class="pkg-form {{ tabIndex===index? \'\': \'hidden\' }}">\n            <xui-item name="packageName" label="规格名称：">\n                <xui-textbox value="{=item.packageName=}" placeholder="例如“基础版”" />\n            </xui-item>\n            <xui-item label="交易方式：">\n                <div style="position: relative;" class="{{!contractConfirmed? \'un-contract\':\'\'}}">\n                    <xui-tip class="tradeType-tip" s-if="!contractConfirmed" skin="warning">\n                        <p style="width: 254px;">完成AI市场入驻协议签署后，即可线上交易</p>\n                        <p>\n                            <a href="{{Url.store.enterContract}}" target="_blank">立即完成&gt;</a>\n                        </p>\n                    </xui-tip>\n                    <xui-boxgroup box-type="radio" datasource="{{tradeTypeList}}" value="{=item.tradeType=}" />\n                </div>\n            </xui-item>\n            <xui-item name="deliveryType" label="交付类型：">\n                <xui-boxgroup box-type="checkbox" datasource="{{deliveryTypeDatasource}}" value="{=item.deliveryType=}"></xui-boxgroup>\n            </xui-item>\n            <xui-item name="deliveryDaysRule" label="交付时间：">\n                <xui-radiobox value="{{0}}" on-change="handleDeliveryDaysTypeChange(index,0,1)" checked="{{item.deliveryDaysType===0}}" name="{{\'deliveryDaysType\'+index}}" />\n                <xui-textbox value="{= item.deliveryDays =}" type="number" width="80" disabled="{{ item.deliveryDaysType !== 0 }}" style="margin-left:10px;" />\n                <span on-click="handleDeliveryDaysTypeChange(index,0,1)" style="vertical-align: middle;cursor:default;">天内交付</span>\n                <xui-radiobox value="{{1}}" on-change="handleDeliveryDaysTypeChange(index,1,1)" checked="{{item.deliveryDaysType===1}}" name="{{\'deliveryDaysType\'+index}}" title="按需确认交付时间" style="margin-left:20px;" />\n            </xui-item>\n            <xui-item label="定价方式：">\n                <div class="pkg-mode-wrap">\n                    <div s-for="pkgMode,pkgModeIndex in packageModeList" on-click="chosePkgMode(index,pkgMode.value)" class="pkg-mode-item {{ item.packageMode === pkgMode.value? \'active\': \'\' }}">\n                        <span>{{ pkgMode.text }}</span>\n                        <xui-tip>\n                            <div style="width:{{ pkgMode.tipWidth }}">{{ pkgMode.tip | raw }}</div>\n                        </xui-tip>\n                    </div>\n                </div>\n            </xui-item>\n            <xui-item name="packageUnit" label="商品单位：">\n                <span style="vertical-align: middle;margin-right:10px;">按</span>\n                <xui-select on-change="updateUnit" style="min-width: 100px;" width="100" value="{=item.packageUnit=}" datasource="{{unitList}}"/>\n            </xui-item>\n            <xui-item label="含税定价：">\n                <price-module s-ref="priceModule-{{index}}" item="{=item=}" data="{=data=}" />\n            </xui-item>\n            \x3c!-- 硬件才有库存、运费 --\x3e\n            <template s-if="hasHardWareMap[index]">\n                \x3c!-- 库存 --\x3e\n                <xui-item name="packageStock" label="库存：">\n                    <xui-textbox value="{=item.packageStock=}" type="number" width="80" />\n                    <span style="margin-left:10px;color:#999;font-size:12px;">买家付款后，库存数量将自动变更</span>\n                </xui-item>\n                <xui-item name="lowRule" label=" " class="lowrule-row">\n                    <xui-checkbox checked="{= item.packageLowType =}" title="起售量≥" />\n                    <xui-textbox value="{= item.packageLow =}" disabled="{{!item.packageLowType}}" type="number" width="80" />\n                    <xui-checkbox checked="{= item.packageLimitType =}" title="单账号限购1{{item.packageUnitName}}" style="margin-left: 40px;" />\n                </xui-item>\n                <xui-item label="运费说明：">\n                    <xui-boxgroup box-type="radio" datasource="{{freightTypeList}}" value="{=item.freightType=}" />\n                </xui-item>\n                <xui-item label=" " name="freightInstruction" s-if="item.freightType === FreightType.CUSTOM">\n                    <xui-textbox class="freight-instruction-input" width="{{590}}" multiline="{{true}}" placeholder="请写明运费计价规则，并告知买家下单后联系改价。" limit-length="{{100}}" value="{=item.freightInstruction=}" />\n                </xui-item>\n            </template>\n        </xui-form>\n    </div>\n</div>\n'}),define("ai/page/market/product/publish/PublishSteps/PackageTab/PriceModule/index",["exports","module","./PriceModule","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/publish/PublishSteps/PackageTab/PriceModule/PriceModule",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PriceModule.tpl","san-xui","lodash","ai/common/util","ai/models/market/ProductInfo","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l){var u,d=a["default"](t),c=a["default"](i),p=a["default"](r);module.exports=d["default"]({components:{"xui-suggestion":n.Suggestion},template:c["default"],initData:function(){return{MarketPackageMode:l.MarketPackageMode,item:{},data:{},showOrigin:!1,infiniteDatasource:[{text:"无限",value:"无限"}],errors:{}}},computed:{enumDelEnabledMap:function(){for(var e={},t=this.data.get("item.priceContent"),a=0;a<t.length;a++)e[a]=0!==a||(t[0].count||t[0].price);return e}},created:function(){var e=this.$get("item");if(e.priceContent.length||this.appendPriceContent(),(e=this.$get("item")).packageMode===l.MarketPackageMode.LINEAR&&+e.priceContent[0].original>0&&this.$set("showOrigin",!0),e.packageMode===l.MarketPackageMode.STEP)for(var t=0;t<e.priceContent.length;t++)-1==+e.priceContent[t].end&&this.$set("item.priceContent["+t+"].end","无限")},methodHook:{handlePackageModeChange:function(){this.$set("item.priceContent",[]),this.appendPriceContent()},appendPriceContent:function(){var e=null;switch(this.$get("item.packageMode")){case l.MarketPackageMode.LINEAR:e={price:0,original:0};break;case l.MarketPackageMode.STEP:e={start:"",end:"",price:""};break;case l.MarketPackageMode.ENUM:e={count:"",price:""};break;case l.MarketPackageMode.RANGE:e={low:"",high:""}}e&&this.data.push("item.priceContent",e),this.validate()},delPriceContent:function(e){if(this.$get("item.packageMode")===l.MarketPackageMode.ENUM&&1===this.$get("item.priceContent").length)return this.$set("item.priceContent",[]),this.appendPriceContent(),void this.validate();this.data.splice("item.priceContent",[e,1]),this.validate()},adjustShowOriginChecked:function(){this.$get("showOrigin")||this.$set("item.priceContent[0].original",0),this.validate()},handleStepChange:function(t,a){var i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e["default"].awrap(s.sleep(10));case 2:if(i=this.$get("item.priceContent"),+(n=i[t][a?"start":"end"])||"无限"===n){r.next=6;break}return r.abrupt("return");case 6:a&&t>0?this.$set("item.priceContent["+(t-1)+"].end",+n-1):!a&&t<i.length-1&&this.$set("item.priceContent["+(t+1)+"].start",+n+1),this.validate();case 8:case"end":return r.stop()}},null,this)},validate:function(){var t,a,i,n,r,o,u,d,c,f,m,h;return e["default"].async(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e["default"].awrap(s.sleep(10));case 2:t={},a=this.$get("showOrigin"),i=this.$get("item.packageMode"),n=this.$get("item.priceContent"),r=function(e){return e>=Math.pow(10,8)?"价格不能超过100,000,000":null},o=function(e){return/^\d+(\.\d{1,2})?$/.test(e)?null:"价格最多两位小数"},u=function(e,a){r(e)&&(a&&(t[a]=1),t.total=r(e)),o(e)&&(a&&(t[a]=1),t.total=o(e))},g.t0=i,g.next=g.t0===l.MarketPackageMode.LINEAR?12:g.t0===l.MarketPackageMode.STEP?17:g.t0===l.MarketPackageMode.ENUM?55:g.t0===l.MarketPackageMode.RANGE?78:87;break;case 12:return+n[0].price||(t.total="请输入正确的价格"),+n[0].price<0?t.total="价格不能小于0":a&&+n[0].original<=0&&(t.total="原价必须大于0"),u(+n[0].price),u(+n[0].original),g.abrupt("break",87);case 17:if(!(n.length<2)){g.next=20;break}return t.total="至少有两个阶梯价格",g.abrupt("break",87);case 20:d=0;case 21:if(!(d<n.length)){g.next=54;break}if(+(c=n[d]).start){g.next=27;break}return t["step-"+d+"-start"]=1,t.total="请完善阶梯价格",g.abrupt("break",54);case 27:if(+c.end||!(d<n.length-1)){g.next=31;break}return t["step-"+d+"-end"]=1,t.total="阶梯价最高数量必须大于最低数量",g.abrupt("break",54);case 31:if(d!==n.length-1||"无限"===c.end){g.next=35;break}return t["step-"+d+"-end"]=1,t.total="阶梯价格数量最大值请改为无限",g.abrupt("break",54);case 35:if(!(+c.start>=+c.end)){g.next=39;break}return t["step-"+d+"-end"]=1,t.total="阶梯价最高数量必须大于最低数量",g.abrupt("break",54);case 39:if(+c.price>0){g.next=43;break}return t["step-"+d+"-price"]=1,t.total="请完善阶梯价格",g.abrupt("break",54);case 43:if(!r(+c.price)){g.next=47;break}return t["step-"+d+"-price"]=1,t.total=r(+c.price),g.abrupt("break",54);case 47:if(!o(+c.price)){g.next=51;break}return t["step-"+d+"-price"]=1,t.total=o(+c.price),g.abrupt("break",54);case 51:d++,g.next=21;break;case 54:return g.abrupt("break",87);case 55:d=0;case 56:if(!(d<n.length)){g.next=77;break}if((c=n[d]).count&&!(+c.count<=0)){g.next=62;break}return t["enum-"+d+"-count"]=1,t.total="请完善枚举数量",g.abrupt("break",77);case 62:if(c.price&&!(+c.price<=0)){g.next=66;break}return t["enum-"+d+"-price"]=1,t.total="请完善枚举价格",g.abrupt("break",77);case 66:if(!r(+c.price)){g.next=70;break}return t["enum-"+d+"-price"]=1,t.total=r(+c.price),g.abrupt("break",77);case 70:if(!o(+c.price)){g.next=74;break}return t["enum-"+d+"-price"]=1,t.total=o(+c.price),g.abrupt("break",77);case 74:d++,g.next=56;break;case 77:return g.abrupt("break",87);case 78:return f=n[0],m=f.low,h=f.high,m=+m,h=+h,!m||m<=0?(t["range-0-low"]=1,t.total="最低价需要大于0"):(!h||h<=m)&&(t["range-0-high"]=1,t.total="最高价需要大于最低价"),u(m,"range-0-low"),u(h,"range-0-high"),g.abrupt("break",87);case 87:return this.$$set({errors:t}),g.abrupt("return",p["default"].isEmpty(t)?null:t);case 89:case"end":return g.stop()}},null,this)}},watchHook:(u={},u["item.packageMode"]=function(){this.handlePackageModeChange()},u.showOrigin=function(){this.adjustShowOriginChecked()},u)})}),define("ai/page/market/product/publish/PublishSteps/PackageTab/PriceModule/PriceModule.tpl",[],function(){return'<template>\n    <div class="aim-price-module">\n        \x3c!-- LINEAR --\x3e\n        <template s-if="item.packageMode===MarketPackageMode.LINEAR">\n            <xui-textbox value="{= item.priceContent[0].price =}" on-input="validate" type="number" width="80" />\n            <span style="width: 12px;vertical-align: middle;">元/{{ item.packageUnitName }}</span>\n            <xui-checkbox checked="{=showOrigin=}" style="margin-left: 22px;margin-right:10px;vertical-align: middle;" title="展示原价" />\n            <xui-textbox value="{= item.priceContent[0].original =}" on-input="validate" disabled="{{!showOrigin}}" type="number" width="80" />\n            <span>元/{{ item.packageUnitName }}</span>\n            <template s-if="errors.total">\n                <br>\n                <div class="error-tip">{{ errors.total }}</div>\n            </template>\n        </template>\n        \x3c!-- STEP --\x3e\n        <template s-if="item.packageMode===MarketPackageMode.STEP">\n            <div s-for="step,stepIndex in item.priceContent" style="margin-bottom: 20px;">\n                \x3c!-- start --\x3e\n                <xui-textbox\n                    on-input="handleStepChange(stepIndex,1)"\n                    value="{= step.start =}"\n                    type="number" min="1" width="150" placeholder="请输入最低数量（含）"\n                    class="{{errors[\'step-\' + stepIndex + \'-start\']? \'error\':\'\'}}" />\n                <span style="margin:0 8px;">至</span>\n                \x3c!-- end --\x3e\n                <xui-suggestion\n                    s-if="item.priceContent.length>=2 && item.priceContent.length-1===stepIndex"\n                    on-input="handleStepChange(stepIndex)"\n                    on-change="handleStepChange(stepIndex)"\n                    hasArrow="{{true}"\n                    placeholder="请选择或输入最高数量（含）"\n                    value="{= step.end =}"\n                    datasource="{{infiniteDatasource}}"\n                    width="222"\n                    class="{{errors[\'step-\' + stepIndex + \'-end\']? \'error\':\'\'}}" />\n                <xui-textbox\n                    s-else on-input="handleStepChange(stepIndex)"\n                    type="number" min="1" placeholder="请选择或输入最高数量（含）" value="{= step.end =}"\n                    class="{{errors[\'step-\' + stepIndex + \'-end\']? \'error\':\'\'}}" />\n                <span style="margin: 0 8px;">{{ item.packageUnitName }}，</span>\n                \x3c!-- price --\x3e\n                <xui-textbox\n                    value="{= step.price =}"\n                    on-input="validate" type="number" min="1" placeholder="单价" width="100"\n                    class="{{errors[\'step-\' + stepIndex + \'-price\']? \'error\':\'noerr\'}}" />\n                <span style="margin: 0 8px;">元/{{ item.packageUnitName }}</span>\n                \x3c!-- 移除 --\x3e\n                <a s-if="stepIndex>0 && stepIndex===item.priceContent.length-1" on-click="delPriceContent(stepIndex)" href="javascript:void(0);">移除</a>\n                <span s-else style="color:#999;">移除</span>\n            </div>\n            <div>\n                <xui-button on-click="appendPriceContent" icon="plus" disabled="{{item.priceContent.length>=5}}">添加价格</xui-button>\n                <span s-if="errors.total" class="error-tip" style="margin-left:10px;">{{ errors.total }}</span>\n            </div>\n        </template>\n        \x3c!-- ENUM --\x3e\n        <template s-if="item.packageMode===MarketPackageMode.ENUM">\n            <div s-for="enum,enumIndex in item.priceContent" style="margin-bottom: 20px;">\n                <xui-textbox\n                    value="{= enum.count =}"\n                    on-input="validate"\n                    type="number" min="1" width="150" placeholder="数量（含）"\n                    class="{{errors[\'enum-\' + enumIndex + \'-count\']? \'error\':\'\'}}" />\n                <span style="margin:0 8px;">件，共</span>\n                <xui-textbox\n                    value="{= enum.price =}"\n                    on-input="validate"\n                    type="number" min="0" width="100"\n                    style="margin-right: 10px;"\n                    class="{{errors[\'enum-\' + enumIndex + \'-price\']? \'error\':\'\'}}" />元\n                <a style="margin-left: 16px;" s-if="enumDelEnabledMap[enumIndex]" on-click="delPriceContent(enumIndex)" href="javascript:void(0);">移除</a>\n                <span s-else style="color:#999;margin-left: 16px;">移除</span>\n            </div>\n            <div>\n                <xui-button on-click="appendPriceContent" icon="plus" disabled="{{item.priceContent.length>=5}}">添加价格</xui-button>\n                <span s-if="errors.total" class="error-tip" style="margin-left:10px;">{{ errors.total }}</span>\n            </div>\n        </template>\n        \x3c!-- RANGE --\x3e\n        <template s-if="item.packageMode===MarketPackageMode.RANGE">\n            <span>最低</span>\n            <xui-textbox\n                value="{= item.priceContent[0].low =}"\n                on-input="validate"\n                type="number" min="1"\n                width="80" style="margin:0 8px;"\n                class="{{errors[\'range-0-low\']? \'error\':\'\'}}"\n                placeholder="单价" />\n            <span style="vertical-align: middle;margin-right: 30px;">元/{{ item.packageUnitName }}</span>\n            <span>最高</span>\n            <xui-textbox\n                value="{= item.priceContent[0].high =}"\n                on-input="validate"\n                type="number" min="1"\n                width="80" style="margin:0 8px;"\n                class="{{errors[\'range-0-high\']? \'error\':\'\'}}"\n                placeholder="单价" />\n            <span>元/{{ item.packageUnitName }}</span>\n            <template s-if="errors.total">\n                <br>\n                <div class="error-tip">{{ errors.total }}</div>\n            </template>\n        </template>\n    </div>\n</template>\n'}),define("ai/page/market/product/publish/PublishSteps/PackageTab/rules",["exports","module","lodash","babel-runtime/helpers/interop-require-default","async-validator","ai/models/market/ProductInfo","ai/common/enums"],function(exports,module,e,t,a,i,n){t["default"](e);module.exports=function(e){var t=e.data;return t.packageInfo.map(function(e){return new a["default"]({packageName:[{validator:function(e,a,i){a=a.trim();if(t.packageInfo.filter(function(e){return e.packageName===a}).length>=2)i("规格重名，请重新填写");else{var n=a.replace(/[\u4e00-\u9fa5]/g,"11").length;0!==n?n>35?i("规格名称长度超出限制"):i():i("请输入规格名称")}}}],deliveryType:[{required:!0,message:"请选择交付类型"}],deliveryDaysRule:[{validator:function(t,a,i){a=+e.deliveryDays;1!==e.deliveryDaysType&&(!a||a<=0)?i("天数必须大于0"):i()}}],packageUnit:[{required:!0,message:"请选择商品单位"}],packageStock:[{validator:function(t,a,i){~e.deliveryType.indexOf(n.StoreDeliveryType.HARDWARE)||i(),!(a=+a)||a<=0?i("库存至少为1"):i()}}],lowRule:[{validator:function(t,a,i){if(e.packageLowType){var n=+e.packageLow;!n||n<=0?i("起售量必须不小于1"):i()}else i()}}],freightInstruction:[{validator:function(t,a,i){~e.deliveryType.indexOf(n.StoreDeliveryType.HARDWARE)||i(),~e.freightType.indexOf(n.FreightType.CUSTOM)||i(),(a=a.trim()).length<=0?i("请填写运费说明"):i()}}]})})}}),define("ai/page/market/product/publish/PublishSteps/PayInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PayInfo.tpl","san-xui","ai/components/TextArea","lodash","../rules","ai/common/util","./PackageCollapse/index","../utils","ai/common/enums","ai/models/market/ProductInfo"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m){var h=n["default"](i),g=n["default"](r),v=n["default"](o),x=n["default"](l),b=n["default"](u),y=n["default"](c);module.exports=h["default"]({template:g["default"],filters:{getTextByName:function(e,t){var a=x["default"].find(t,function(t){return t.value===e});return a?a.text:""},getTimeLabel:function(e,t){return e+{DAY:"天",MONTH:"月",YEAR:"年"}[t]},getPriceCell:function(e){if(e.packagePrice<=0)return"免费";return{UNIT:e.packagePrice+"元/"+e.packageUnitName,SET:e.packagePrice+"元/"+e.packageCount+e.packageUnitName,STEP:Array.isArray(e.packageStep)?e.packageStep.reduce(function(t,a){return-1===a.end?t+"大于"+a.start+e.packageUnitName+" "+a.price+"元；":t+(a.start+"-")+a.end+e.packageUnitName+" "+a.price+"元；"},""):""}[e.packageMode]||""}},components:{"xui-textbox":s.TextBox,"xui-radiobox":s.RadioBox,"xui-checkbox":s.CheckBox,"xui-boxgroup":s.BoxGroup,"xui-select":s.Select,"xui-richtexteditor":s.RichTextEditor,"xui-tip":s.Tip,"xui-form":s.Form,"xui-item":s.FormItem,"xui-dialog":s.Dialog,"text-area":v["default"],"xui-table":s.Table,"xui-tab":s.Tab,"xui-tab-panel":s.TabPanel,"xui-clipboard":s.Clipboard,"package-collapse":y["default"]},initData:function(){var e=[];return{MarketProductType:f.MarketProductType,FreightType:f.FreightType,tradeTypeList:[],deliveryTypeList:[],chargeTypeList:[],freightTypeList:f.FreightType.toArray(),deliveryDaysTypes:{REAL_TIME:0,BY_DAY:1,ON_DEMAND:2},packageTable:{schema:[{name:"packageName",label:"规格名称"},{name:"packageTime",label:"时长"},{name:"packagePrice",label:"含税价格"},{name:"ctl",label:"操作"}]},cache:{COUNT:{packageInfo:e},TIME:{packageInfo:e}},data:{},packageCollapse:{open:!1,editIndex:undefined},showEditingWanring:!1,unitList:[],errors:{}}},computed:{cachePackageInfoKey:function(){return"cache."+this.data.get("data.chargeType")+".packageInfo"},cachePackageInfo:function(){return this.data.get(this.data.get("cachePackageInfoKey"))},rules:function(){return b["default"]({ifValidateDeliveryDaysRule:"OFFLINE"===this.data.get("data.tradeType")||this.data.get("ifHardProduct"),deliveryDaysTypes:this.data.get("deliveryDaysTypes"),ifCustomFreight:this.data.get("ifCustomFreight"),ifHardProduct:this.data.get("ifHardProduct")})},ifCustomFreight:function(){return this.data.get("data.freightType")===f.FreightType.CUSTOM},ifApiProduct:function(){return this.data.get("data.productType")===f.MarketProductType.SOFTWARE&&this.data.get("data.productCategory").some(function(e){return 60100===e})},ifHardProduct:function(){return this.data.get("data.productType")===f.MarketProductType.HARDWARE},postData:function(){return p.getPostData(this.data.get("data"))},contractConfirmed:function(){return!!this.data.get("marketUserInfo.contractStatus")}},created:function(){var e;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return this.watch("data.freightType",function(e){n.nextTick(function(){e!==f.FreightType.CUSTOM&&n.ref("deliverForm").validateFormItem("freightInstruction")})}),this.watch("data.productType",function(){n.$set(n.$get("cachePackageInfoKey"),[])}),e=function(e){var t=n.$get("ifApiProduct"),a=n.$get("ifHardProduct");t?n.$$set({"data.deliveryType":"API"}):a?n.$$set({"data.deliveryType":"HARDWARE"}):n.$$set({"data.deliveryType":"HUMAN"}),t&&"ONLINE"===e&&(n.$set("data.chargeType","COUNT"),n.$set("data.deliveryDays",0))},this.watch("data.tradeType",e),e(this.$get("data.tradeType")),this.$set(this.$get("cachePackageInfoKey"),this.$get("data.packageInfo")),this.watch("cache",function(e){var t=n.$get("data.chargeType"),a=x["default"].get(e,t+".packageInfo")||[];n.$set("data.packageInfo",a),n.nextTick(function(){n.ref("deliverForm").validateFormItem("packageInfo")})}),i.next=9,t["default"].awrap(a["default"].all([this.getTradeType(),this.getDeliveryType(),this.getChargeType(),this.getUnitList()]));case 9:this.watch("data.tradeType",function(){n.$set(n.$get("cachePackageInfoKey"),[])});case 10:case"end":return i.stop()}},null,this)},getTradeType:function(){var e;return t["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductTradeType());case 2:e=a.sent,this.$set("tradeTypeList",e.map(function(e){return{text:e.label,value:e.name,disabled:"ONLINE"===e.name&&!i.$get("contractConfirmed")}}));case 4:case"end":return a.stop()}},null,this)},getDeliveryType:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductDeliveryType());case 2:e=a.sent,this.$set("deliveryTypeList",e.map(function(e){return{text:e.label,value:e.name}}));case 4:case"end":return a.stop()}},null,this)},getChargeType:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductChargeType());case 2:e=a.sent,this.$set("chargeTypeList",e.map(function(e){return{text:e.label,value:e.name}}));case 4:case"end":return a.stop()}},null,this)},getUnitList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketProductUnitList());case 2:e=a.sent,this.$set("unitList",e.map(function(e){return{text:e.name,value:e.id}}));case 4:case"end":return a.stop()}},null,this)},changeDeliveryDaysType:function(e){this.$set("data.deliveryDaysType",e)},getPackageInfoHandler:function(e){var t=this.data.get("packageCollapse");t.editIndex===undefined?this.data.push(this.$get("cachePackageInfoKey"),e):this.data.splice(this.$get("cachePackageInfoKey"),[t.editIndex,1,e])},showPackageCollapse:function(e){var t=this,a=this.$get("packageCollapse"),i=this.ref("packageCollapse");e!==undefined&&a.open?a.editIndex!==e?this.$confirm({title:"编辑提示",width:500,content:"<p>确认要放弃当前所编辑的商品规格吗？</p>\n            <p>点击 “确定”将放弃,点击“取消”将继续编辑。</p>",needFoot:!0}).then(function(){t.toggleToNextPackage(e)}):i.data.set("showEditingWanring",!0):this.$set("packageCollapse",{open:!0,editIndex:e})},toggleToNextPackage:function(e){this.$set("packageCollapse",{open:!0,editIndex:e});var t=x["default"].cloneDeep(this.$get("cachePackageInfo")[e]);-1===t.packageLow&&(t.packageLow=2),"STEP"===t.packageMode&&t.packageStep.forEach(function(e){e.startEditable=!0,e.endEditable=!0,-1===e.end&&(e.end="无限")}),this.ref("packageCollapse").data.set("info",t)},deletePackageRow:function(e){var a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=this.$get("packageCollapse"),i=a.open&&a.editIndex===e,n=x["default"].escape(this.$get("cachePackageInfo."+e+".packageName")),r.next=5,t["default"].awrap(this.$confirm({title:"删除提示",width:500,content:"<p>选中的商品规格"+(i?"正在编辑中，":"")+'删除后无法恢复</p><p>请确定是否要删除"'+n+'"商品规格？</p>',needFoot:!0}));case 5:i&&this.$set("packageCollapse",{open:!1,editIndex:undefined}),this.data.splice(this.$get("cachePackageInfoKey"),[e,1]),this.$toast("删除成功");case 8:case"end":return r.stop()}},null,this)},saveStep:function(){var a,i,n,r,s;return t["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return a=undefined,i=undefined,o.next=4,t["default"].awrap(d.getAsyncTuple(this.ref("deliverForm").validateForm()));case 4:if(n=o.sent,!(a=n[0])){o.next=9;break}return this.jumpToError(a),o.abrupt("return");case 9:return o.next=11,t["default"].awrap(d.getAsyncTuple(this.ajax.saveMarketProduct(e["default"]({},this.$get("postData"),{step:3}))));case 11:if(r=o.sent,a=r[0],i=r[1],!a){o.next=19;break}return s=a.global?"提交失败："+a.global:"提交失败",this.$toast(s,{messageType:"error"}),a.field&&(this.jumpToError(a.field),this.$set("errors",a.field)),o.abrupt("return");case 19:i.productId&&this.$set("data.productId",i.productId),i.packageInfo&&p.updatePackageInfoPackageId(i.packageInfo,this),this.fire("done-step",3);case 22:case"end":return o.stop()}},null,this)},jumpToError:function(e){var t=x["default"].keys(e);if(!x["default"].isEmpty(t)){var a=t[0];$("html, body").animate({scrollTop:$(".ui-form-item-"+a).offset().top-60},300)}}})}),define("ai/page/market/product/publish/PublishSteps/PayInfo.tpl",[],function(){return'<div class="market-publish-pay-info">\n    <xui-form s-ref="deliverForm" rules="{{rules.deliver}}" formData="{{data}}" errors="{{errors}}">\n\n        <xui-item label="交易方式：">\n            \x3c!-- 非api、hardware服务直接显示内容 --\x3e\n            \x3c!-- 这里之前还用template好好地，现在换了span才行，wtf --\x3e\n            <span s-if="!(ifApiProduct || MarketProductType.HARDWARE === data.productType)">\n                {{ data.tradeType | getTextByName(tradeTypeList) }}\n            </span>\n            \x3c!-- 否则是radio。实现方式要改一哈，现在这么写有点问题 --\x3e\n            <div style="position: relative;" s-else class="{{!contractConfirmed? \'un-contract\':\'\'}}">\n                <xui-tip class="tradeType-tip" s-if="!contractConfirmed" skin="warning">\n                    <p style="width: 254px;">完成AI市场入驻协议签署后，即可线上交易</p>\n                    <p>\n                        <a href="{{Url.store.enterContract}}" target="_blank">立即完成&gt;</a>\n                    </p>\n                </xui-tip>\n                <xui-boxgroup box-type="radio" datasource="{{tradeTypeList}}" value="{=data.tradeType=}" />\n            </div>\n        </xui-item>\n        <xui-item label="交付方式：">\n            {{ data.deliveryType | getTextByName(deliveryTypeList) }}\n        </xui-item>\n        \x3c!-- 交付时间 --\x3e\n        <xui-item name="deliveryDaysRule" label="交付时间：" class="deliveryDays-row">\n            <span s-if="ifApiProduct && data.tradeType===\'ONLINE\' ">实时交付</span>\n\n            <template s-if="data.tradeType===\'OFFLINE\' || ifHardProduct ">\n                <xui-radiobox checked="{{data.deliveryDaysType === deliveryDaysTypes.BY_DAY}}" name="deliveryDaysType" title=" " on-change="changeDeliveryDaysType(deliveryDaysTypes.BY_DAY)"></xui-radiobox>\n                <xui-textbox type="number" width="100" value="{=data.deliveryDays=}" disabled="{{data.deliveryDaysType !== deliveryDaysTypes.BY_DAY}}"></xui-textbox>\n                <span style="margin-right: 10px;">天内交付</span>\n                <xui-radiobox checked="{{data.deliveryDaysType === deliveryDaysTypes.ON_DEMAND}}" name="deliveryDaysType" title="按需确认交付时间" on-change="changeDeliveryDaysType(deliveryDaysTypes.ON_DEMAND)"></xui-radiobox>\n            </template>\n        </xui-item>\n        \x3c!-- 计费方式，只有api、线上，才 【按量】，其它是 【按量】+【按时长】 --\x3e\n        <xui-item label="计费方式：">\n            <span s-if="ifApiProduct && data.tradeType===\'ONLINE\' ">\n                {{ data.chargeType | getTextByName(chargeTypeList) }}\n            </span>\n            <xui-boxgroup s-else box-type="radio" datasource="{{chargeTypeList}}" value="{=data.chargeType=}"/>\n        </xui-item>\n\n        \x3c!-- 交付方式 --\x3e\n        \x3c!-- <xui-item name="deliveryType" label="交易方式：">\n            <xui-boxgroup box-type="radio" datasource="{{tradeTypeList}}" value="{=data.deliveryType=}"></xui-boxgroup>\n        </xui-item> --\x3e\n\n        <xui-item name="packageInfo" label="商品规格：">\n            <xui-table schema="{{packageTable.schema}}" datasource="{{cachePackageInfo}}">\n                \x3c!-- 未添加规格 --\x3e\n                <div class="ui-table-empty" slot="empty">\n                    暂无数据，点击<a href="javascript:void(0);" class="{{ packageCollapse.open ? \'disabled\' : \'\' }}"  on-click="showPackageCollapse()">添加</a>\n                </div>\n                \x3c!-- 价格 --\x3e\n                <template slot="c-packageName">\n                    {{ row.packageName }}\n                </template>\n                \x3c!-- 时长 --\x3e\n                <template slot="c-packageTime">\n                    <span s-if="row.packageTime===-1">长期有效</span>\n                    <span s-else>{{ row.packageTime | getTimeLabel(row.packageTimeUnit) }}</span>\n                </template>\n                \x3c!-- 价格 --\x3e\n                <template slot="c-packagePrice">\n                    {{ row | getPriceCell }}\n                </template>\n                \x3c!-- 操作 --\x3e\n                <template slot="c-ctl">\n                    <a on-click="showPackageCollapse(rowIndex)" href="javascript:void(0)" style="margin-right:10px">编辑</a>\n                    <a on-click="deletePackageRow(rowIndex)" href="javascript:void(0)">删除</a>\n                </template>\n            </xui-table>\n        </xui-item>\n        <xui-item>\n            <xui-button s-if="{{!packageCollapse.open}}" disabled="{{ data.packageInfo.length >= 10 }}" on-click="showPackageCollapse()" icon="plus" skin="primary" label="新建商品规格" />\n            \x3c!-- 规格表单 --\x3e\n            <package-collapse\n                s-ref="packageCollapse"\n                editIndex="{=packageCollapse.editIndex=}"\n                s-if="{{packageCollapse.open}}"\n                open="{=packageCollapse.open=}"\n                data="{{data}}" \n                packageInfo="{{cachePackageInfo}}"\n                on-getPackageInfo="getPackageInfoHandler"\n                unitList="{{unitList}}"\n            />\n\n            \x3c!-- <div class="mark-des">\n                <div class="des-title">备注说明</div>\n                <div class="des-content">\n                    <p>1. API的计费方式：目前仅支持按次计费。</p>\n                    <p>2. API的付费方式：目前仅支持买家预付费。</p>\n                    <p>3. API服务的有效期：自购买之日起一年有效。</p>\n                </div>\n            </div> --\x3e\n        </xui-item>\n\n        <template s-if="ifHardProduct">\n            <xui-item label="运费说明：" name="freightType">\n                <xui-boxgroup box-type="radio" datasource="{{freightTypeList}}" value="{=data.freightType=}"/>\n            </xui-item>\n            <xui-item label=" " name="freightInstruction">\n                <xui-textbox class="freight-instruction-input" s-if="data.freightType === FreightType.CUSTOM" width="{{590}}" multiline="{{true}}" placeholder="请写明运费计价规则，并告知买家下单后联系改价。" limit-length="{{100}}" value="{=data.freightInstruction=}" />\n            </xui-item>\n        </template>\n\n        <xui-item label=" ">\n            <xui-button on-click="saveStep" class="btn-save-goon" skin="primary" size="large">保存并继续</xui-button>\n        </xui-item>\n    </xui-form>\n    \x3c!-- s-if 重置数据更方便 --\x3e\n    \x3c!-- <package-dialog editIndex="{=packageDialog.editIndex=}" s-if="{{packageDialog.open}}" open="{=packageDialog.open=}" data="{=data=}" unitList="{{unitList}}" /> --\x3e\n</div>\n'}),define("ai/page/market/product/publish/PublishSteps/PayInfo/index",["exports","module","./PayInfo","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/publish/PublishSteps/PayInfo/PayInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PayInfo.tpl","san-xui","lodash","ai/common/util","../../utils","ai/common/enums","../PackageTab/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=n["default"](i),f=n["default"](r),m=n["default"](o),h=n["default"](c);module.exports=p["default"]({template:f["default"],components:{"xui-form":s.Form,"xui-item":s.FormItem,"package-tab":h["default"]},initData:function(){return{marketUserInfo:{},MarketProductType:d.MarketProductType,FreightType:d.FreightType,tradeTypeList:[],deliveryTypeList:[],chargeTypeList:[],freightTypeList:d.FreightType.toArray(),data:{},errors:{}}},computed:{postData:function(){return u.getPostData(this.data.get("data"))}},created:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},null,this)},validate:function(){var e,i,n,r,s;return t["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.ref("pkgTab"),o.next=3,t["default"].awrap(e.validate());case 3:if(i=o.sent,!(n=i[0])){o.next=16;break}r=m["default"].keys(n),s=0;case 8:if(!(s<r.length)){o.next=15;break}if(!n[s]){o.next=12;break}return this.$toast("请完善第"+(s+1)+"项规格",{messageType:"error"}),o.abrupt("break",15);case 12:s++,o.next=8;break;case 15:return o.abrupt("return",new a["default"](function(e){}));case 16:case"end":return o.stop()}},null,this)},saveStep:function(){var a,i,n,r,s,o;return t["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t["default"].awrap(this.validate());case 2:return d.next=4,t["default"].awrap(l.getAsyncTuple(this.ajax.saveMarketProduct(e["default"]({},this.$get("postData"),{step:3}))));case 4:if(a=d.sent,i=a[0],n=a[1],!i){d.next=10;break}return i.field?(r=m["default"].keys(i.field)[0],s=r.split("-"),s[0],o=s[1],this.$toast("规格包"+(+o+1)+"："+i.field[r],{messageType:"error"})):i.global&&this.$toast("提交失败："+i.global,{messageType:"error"}),d.abrupt("return");case 10:n.productId&&this.$set("data.productId",n.productId),n.packageInfo&&u.updatePackageInfoPackageId(n.packageInfo,this),this.fire("done-step",3);case 13:case"end":return d.stop()}},null,this)}})}),define("ai/page/market/product/publish/PublishSteps/PayInfo/PayInfo.tpl",[],function(){return'<div class="market-publish-pay-info">\n    <xui-form>\n        <xui-item label="规格信息：" required></xui-item>\n        <package-tab s-ref="pkgTab" data="{=data=}" marketUserInfo="{{marketUserInfo}}" />\n        <xui-item label=" ">\n            <xui-button on-click="saveStep" class="btn-save-goon" skin="primary" size="large">保存并继续</xui-button>\n        </xui-item>\n    </xui-form>\n</div>\n'}),define("ai/page/market/product/publish/PublishSteps/PropertyInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PropertyInfo.tpl","san-xui","lodash","../rules","ai/common/util","../utils"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](s),f=i["default"](o);module.exports=d["default"]({template:c["default"],components:{"xui-textbox":r.TextBox,"xui-boxgroup":r.BoxGroup,"xui-form":r.Form,"xui-item":r.FormItem,"xui-radiobox":r.RadioBox,"xui-checkbox":r.CheckBox},initData:function(){return{formatedTemplateList:[],templateData:[],data:{},errors:{}}},computed:{rules:function(){return f["default"]({formatedTemplateList:this.data.get("formatedTemplateList")||[]})},postData:function(){return u.getPostData(this.data.get("data"))},customHiddenList:function(){return this.data.get("formatedTemplateList").map(function(e){return""!==e.type&&("radio"===e.type?0!==e.value:"checkbox"===e.type?!e.value.some(function(e){return 0===e}):void 0)})}},created:function(){var e=this;this.formatTemplateList(this.$get("templateList")),this.watch("templateList",function(t){e.formatTemplateList(t)}),this.watch("formatedTemplateList",function(){e.$set("data.productProperty",e.getProductProperty())})},getProductProperty:function(){return this.data.get("formatedTemplateList").map(function(e){var t=[];return"radio"===e.type&&(t=[e.value?e.value:e.customValue]),"checkbox"===e.type&&(t=e.value.map(function(t){return 0===t?e.customValue:t})),!e.type&&e.customValue&&(t=[e.customValue]),{property:e.name,option:t}}).filter(function(e){return 0!==e.option.length})},radioHandle:function(e,t){this.$set("formatedTemplateList."+t+".value",e)},checkboxHandle:function(e,t,a){e.value?this.data.push("formatedTemplateList."+a+".value",t):this.data.remove("formatedTemplateList."+a+".value",t)},formatTemplateList:function(e){var t=this.$get("data.productProperty"),a={RadioButton:"radio",CheckBox:"checkbox"},i=function(e){var a={},i=t.find(function(t){return t.property===e.id});if(i&&i.option){var n=i.option;a={RadioButton:p["default"].isString(n[0])?0:n[0],CheckBox:n.map(function(e){return p["default"].isString(e)&&""!==e?0:e}),Custom:0}}else a={RadioButton:e.required?e.option[0]:undefined,CheckBox:[],Custom:0};return a[e.combine]},n=e.map(function(e){return{label:e.name,name:e.id,required:e.required,type:function(e){return a[e]||""}(e.combine),hasCustom:function(e){return"Custom"===e.combine||e.option.some(function(e){return 0===e})}(e),combine:e.combine,placeholder:e.tips,customValue:function(e){var a=t.find(function(t){return t.property===e.id});if(a&&a.option){var i=a.option;return{RadioButton:i[0],CheckBox:i.find(function(e){return p["default"].isString(e)}),Custom:i[0]}[e.combine]||""}return""}(e),value:i(e),datasource:function(e){return e.option.map(function(t,a){var n={text:e.label[a],value:t};return"CheckBox"===e.combine&&(n.checked=Array.isArray(i(e))&&i(e).includes(t)),n})}(e)}});this.$set("formatedTemplateList",n)},saveStep:function(){var a,i,n,r;return t["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t["default"].awrap(l.getAsyncTuple(this.ref("propertyForm").validateForm()));case 2:if(a=s.sent,!(i=a[0])){s.next=7;break}return this.jumpToError(i),s.abrupt("return");case 7:return undefined,s.next=10,t["default"].awrap(l.getAsyncTuple(this.ajax.saveMarketProduct(e["default"]({},this.$get("postData"),{step:2}))));case 10:if(n=s.sent,i=n[0],n[1],!i){s.next=18;break}return r=i.global?"提交失败："+i.global:"提交失败",this.$toast(r,{messageType:"error"}),i.field&&(this.jumpToError(i.field),this.$set("errors",i.field)),s.abrupt("return");case 18:this.fire("done-step",2);case 19:case"end":return s.stop()}},null,this)},jumpToError:function(e){var t=p["default"].keys(e);if(!p["default"].isEmpty(t)){var a=t[0];$("html, body").animate({scrollTop:$(".ui-form-item-"+a).offset().top-60},300)}}})}),define("ai/page/market/product/publish/PublishSteps/PropertyInfo.tpl",[],function(){return'<div class="step-property-info">\n    <p class="help">温馨提示：完善产品基本参数，方便用户和平台人员找到商品，获得更多商机。</p>\n    <xui-form s-ref="propertyForm" rules="{{rules.property}}" formData="{{templateData}}" errors="{=errors=}">\n        <xui-item s-for="item,index in formatedTemplateList" name="{{ item.name }}" label=" ">\n            <div slot="label">\n                <span>{{item.label}}：</span><br>\n                <span s-if="!item.required">（选填）</span>\n            </div>\n            <template s-if="item.type" s-for="it in item.datasource">\n                <xui-radiobox s-if="item.type === \'radio\'" name="{{item.name}}" checked="{{item.value === it.value}}" title="{{ it.text }}" on-change="radioHandle(it.value, index)" />\n                <xui-checkbox s-if="item.type === \'checkbox\'" checked="{{it.checked}}" title="{{ it.text }}" on-change="checkboxHandle($event, it.value, index)" />\n            </template>\n            <xui-textbox\n                s-if="item.hasCustom && !customHiddenList[index]"\n                type="text"\n                width="{{ item.combine === \'Custom\' ? 680 : 200 }}"\n                style="{{ item.combine === \'Custom\' ? \'\' : \'margin-left: -120px\' }}"\n                placeholder="{{ item.placeholder }}"\n                value="{=item.customValue=}">\n            </xui-textbox>\n        </xui-item>\n        <xui-item label=" ">\n            <xui-button on-click="saveStep" class="btn-save-goon" skin="primary" size="large">保存并继续</xui-button>\n        </xui-item>\n    </xui-form>\n</div>'}),define("ai/page/market/product/publish/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){var i=a["default"](t);module.exports=function(t){var a={};return t&&Array.isArray(t.formatedTemplateList)&&t.formatedTemplateList.forEach(function(e){a[e.name]=[{validator:function(t,a,i){"radio"!==e.type||0!==e.value||""!==e.customValue?"checkbox"===e.type&&e.value.some(function(e){return 0===e})&&""===e.customValue?i("请输入自定义参数"):e.required?""!==e.type||""!==e.customValue?e.value===undefined||Array.isArray(e.value)&&0===e.value.length?i("请选择/输入"+e.label):i():i("请选择/输入"+e.label):i():i("请输入自定义参数")}}]}),{property:new e["default"](a),basic:new e["default"]({productName:[{required:!0,message:"请填写商品名称"},{min:2,message:"最少输入2个字符"},{max:32,message:"最多只能输入32个字符"}],productType:[{required:!0,message:"请选择服务类型"}],productCategory:[{required:!0,message:"请选择商品分类"}],productTechnology:[{validator:function(e,t,a){i["default"].isEmpty(t)?a("请选择应用技术"):t.length>3?a("最多只能选3项"):a()}}],productIndustry:[{validator:function(e,t,a){i["default"].isEmpty(t)?a("请选择应用行业"):t.length>3?a("最多只能选3项"):a()}}],productSummary:[{required:!0,message:"请填写商品摘要 "},{max:70,message:"最多只能输入70个字符"}],productAlbum:[{required:!0,message:"请上传商品图片"}],productLicense:[{validator:function(e,t,a){t?a():a("请上传商品协议")}}]}),editor:new e["default"]({highlight:[{validator:function(e,t,a){var i=document.createElement("div");i.innerHTML=t;var n=i.innerText.trim().length;n<=0?a("请填写产品亮点"):n>200?a("不能超过200个字"):a()}}],description:[{validator:function(e,t,a){var i=document.createElement("div");i.innerHTML=t;var n=i.innerText.trim().length;n<=0?a("请填写产品说明"):n>1e4?a("不能超过10000个字"):a()}}],scene:[{validator:function(e,t,a){var i=document.createElement("div");i.innerHTML=t;i.innerText.trim().length>1e4?a("不能超过10000个字"):a()}}],other:[{validator:function(e,t,a){var i=t.title,n=t.content,r=document.createElement("div");r.innerHTML=n;var s=r.innerText.trim().length;i.length<=0?a("标题不能为空"):s>1e4?a("不能超过10000个字"):a()}}]}),deliver:new e["default"]({}),api:new e["default"]({apiSrcUrl:[{required:!0,message:"请填写服务商原始API地址"},{max:100,message:"地址过长"}],apiUsrUri:[{required:!0,message:"请填写对外展示API地址"},{max:50,message:"地址过长"},{pattern:/^[a-zA-Z][\w\/]{0,48}$/,message:"请填写正确格式的地址"}],responseSuccSample:[{required:!0,message:"请填写正常返回示例"}],responseFailSample:[{required:!0,message:"请填写失败返回示例"}],requestHeader:[{validator:function(e,t,a,n){i["default"].findIndex(t,function(e){return!!e.isEditing})>=0?a("存在未保存的内容"):a()}}],requestQuery:[{validator:function(e,t,a,n){i["default"].findIndex(t,function(e){return!!e.isEditing})>=0?a("存在未保存的内容"):a()}}],requestBody:[{validator:function(e,t,a,n){i["default"].findIndex(t,function(e){return!!e.isEditing})>=0?a("存在未保存的内容"):a()}}],errorCode:[{validator:function(e,t,a,n){i["default"].findIndex(t,function(e){return!!e.isEditing})>=0?a("存在未保存的内容"):t.length<=0?a("请添加错误码"):a()}}]}),afterService:new e["default"]({qualityAssurance:[{validator:function(e,a,n,r){if(t.qualityAssuranceCheckedindex>0)n();else{var s=i["default"].trim(t.qualityAssuranceTime);""!==s?+s<1?n("质保期数量至少为1"):n():n("请填写质保期")}}}]})}}}),define("ai/page/market/product/publish/tempSample",["exports"],function(exports){exports.__esModule=!0;exports.tuxiangSample=[{title:"Bash",content:"# 请将API地址替换为商品所提供的API地址。access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token。image为已转换好的去头的base64编码，编码转化地址可使用https://tool.css-js.com/base64.html。返回分类数量top_num设置为5\ncurl -i -k '【API地址】?access_token=【access_token】' --data '{\"image\": \"【图片base64编码】\",\"top_num\":5}' -H 'Content-Type:application/json; charset=UTF-8'"},{title:"PHP",content:'class Example\n{\n// 请将API地址替换为商品所提供的API地址\n    $url = \'【API地址】\' ;\n// 修改图片地址，测试不同图片\n    $img = file_get_contents("【本地图片地址】");\n//参数image：图像base64编码; 返回分类数量设置为5\n    $img = base64_encode($img);\n    $bodys = array(\n    "image" => $img,\n    "top_num" => 5\n    );\n        $bodys = json_encode($bodys);\n    $res = request_post($url, $bodys);\n    echo $res;\n\n    /**\n     * 发起http post请求(REST API), 并获取REST请求的结果\n     * @param string $url\n     * @param string $param\n     * @return - http response body if succeeds, else false.\n     */\n    public function request_post($url = \'\', $param = \'\')\n    {\n        if (empty($url) || empty($param)) {\n            return false;\n        }\n    //access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token\n        $postUrl = $url . "?access_token=【access_token】";\n        $curlPost = $param;\n            // 初始化curl\n        $curl = curl_init();\n            curl_setopt($curl, CURLOPT_URL, $postUrl);\n            curl_setopt($curl, CURLOPT_HEADER, 0);\n        // 要求结果为字符串且输出到屏幕上\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\n        // post提交方式\n        curl_setopt($curl, CURLOPT_POST, 1);\n        curl_setopt($curl, CURLOPT_POSTFIELDS, $curlPost);\n        // 运行curl\n        $data = curl_exec($curl);\n        curl_close($curl);\n\n        return $data;\n    }\n}'},{title:"Python",content:"import urllib3, json, base64\ndef image_classification():\n    #access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token\n    access_token='【access_token】'\n    http=urllib3.PoolManager()\n    #请将API地址替换为商品所提供的API地址\n    url='【API地址】?access_token='+access_token\n    #修改图片地址，测试不同图片\n    f = open('【本地图片地址】','rb')\n    #参数image：图像base64编码以及返回分类数量top_num设置为5\n    img = base64.b64encode(f.read())\n    #img参数进行一下str转换\n    params={'image':''+str(img,'utf-8')+'','top_num':5}\n    #对参数params数据进行json处理\n    encoded_data = json.dumps(params).encode('utf-8')\n    print(encoded_data)\n        request=http.request('POST',\n                        url,\n                        body=encoded_data,\n                        headers={'Content-Type':'application/json'})\n    #对返回的byte字节进行处理。Python3输出位串，而不是可读的字符串，需要进行转换\n    result = str(request.data,'utf-8')\n    print(result)\n#输出结果\nprint(image_classification())"},{title:"JAVA",content:'package com.baidu.ai.aip;\nimport com.baidu.ai.aip.utils.Base64Util;\nimport com.baidu.ai.aip.utils.FileUtil;\nimport com.baidu.ai.aip.utils.HttpUtil;\npublic class Sample {\n    /**\n    * 重要提示代码中所需工具类\n    * FileUtil,Base64Util,HttpUtil,GsonUtils请从\n    * https://ai.baidu.com/file/658A35ABAB2D404FBF903F64D47C1F72\n    * https://ai.baidu.com/file/C8D81F3301E24D2892968F09AE1AD6E2\n    * https://ai.baidu.com/file/544D677F5D4E4F17B4122FBD60DB82B3\n    * 下载\n    */\n    public static void main(String[] args) throws Exception {\n    //请将API地址替换为商品所提供的API地址\n        String url ="【API地址】";\n        //access_token获取方法请详见API使用说明，请注意access_token有效期为30天\n        String access_token="【access_token】";\n        //修改图片地址，测试不同图片\n        byte[] file = FileUtil.readFileByBytes("【本地图片地址】");\n        //参数image：图像base64编码\n        String image = Base64Util.encode(file);\n        //返回分类数量top_num设置为5 如不设置默认返回6条结果\n        String params = "{"image":""+image+"","top_num":5}";\n        String result = HttpUtil.post(url, access_token, params);\n        //输出识别结果\n        System.out.println(result);\n    }\n}'},{title:"C++",content:'#include <iostream>\n#include <curl/curl.h>\n\n// libcurl库下载链接：https://curl.haxx.se/download.html\n// jsoncpp库下载链接：https://github.com/open-source-parsers/jsoncpp/\n//请将API地址替换为商品所提供的API地址\nconst static std::string request_url = "【API地址】";\nstatic std::string classification_result;\n/**\n*  curl发送http请求调用的回调函数，回调函数中对返回的json格式的body进行了解析，解析结果储存在全局的静态变量当中\n*  @param 参数定义见libcurl文档\n*  @return 返回值定义见libcurl文档\n*/\nstatic size_t callback(void *ptr, size_t size, size_t nmemb, void *stream) {\n    // 获取到的body存放在ptr中，先将其转换为string格式\n    classification_result = std::string((char *) ptr, size * nmemb);\n    return size * nmemb;\n}\n\n/**\n*  @return 调用成功返回0，发生错误返回其他错误码\n*/\nint classification(std::string &json_result, const std::string &access_token) {\n    //access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token\n    std::string url = request_url + "?access_token=" + access_token;\n    CURL *curl = NULL;\n    CURLcode result_code;\n    int is_success;\n    curl = curl_easy_init();\n    if (curl) {\n        curl_easy_setopt(curl, CURLOPT_URL, url.data());\n        curl_easy_setopt(curl, CURLOPT_POST, 1);\n        curl_slist *headers = NULL;\n        headers = curl_slist_append(headers, "Content-Type:application/json;charset=UTF-8");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);\n        // image为已转换好的去头的base64编码，编码转化地址可使用https://tool.css-js.com/base64.html。返回分类数量top_num设置为5\n        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "{"image":"【图片base64编码】","top_num":5}");\n        result_code = curl_easy_perform(curl);\n        if (result_code != CURLE_OK) {\n            fprintf(stderr, "curl_easy_perform() failed: %s", curl_easy_strerror(result_code));\n            is_success = 1;\n            return is_success;\n        }\n        json_result = classification_result;\n        curl_easy_cleanup(curl);\n        is_success = 0;\n    } else {\n        fprintf(stderr, "curl_easy_init() failed.");\n        is_success = 1;\n    }\n    return is_success;\n}'},{title:"C#",content:'using System;\nusing System.IO;\nusing System.Net;\nusing System.Text;\nusing System.Web;\n\nnamespace com.baidu.ai\n{\n    public class ImageClassification\n    {\n        public static string classification()\n        {\n            //access_token获取方法请详见API使用说明，请注意access_token有效期为30天，这里仅为了简化编码每一次请求都去获取access_token\n            string token = "【Access_Token】";\n            //请将API地址替换为商品所提供的API地址\n            string host = "【API地址】?access_token=" + token;\n            Encoding encoding = Encoding.Default;\n            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(host);\n            request.Method = "post";\n            request.KeepAlive = true;\n            // image为已转换好的去头的base64编码，编码转化地址可使用https://tool.css-js.com/base64.html。返回分类数量top_num设置为5\n            String str = "{"image":"【图片base64编码】","top_num":5}";\n            byte[] buffer = encoding.GetBytes(str);\n            request.ContentLength = buffer.Length;\n            request.GetRequestStream().Write(buffer, 0, buffer.Length);\n            HttpWebResponse response = (HttpWebResponse)request.GetResponse();\n            StreamReader reader = new StreamReader(response.GetResponseStream(), Encoding.Default);\n            string result = reader.ReadToEnd();\n            Console.WriteLine(result);\n            return result;\n        }\n    }\n}'},{title:"Node",content:"var https = require('https');\nvar qs = require('querystring');\nvar fs = require('fs');\n//修改图片地址，测试不同图片。将图片转化为base64编码\nvar image = fs.readFileSync(\"【本地图片地址】\").toString(\"base64\");\nvar param = qs.stringify({\n    //access_token获取方法请详见API使用说明，请注意access_token有效期为30天，这里仅为了简化编码每一次请求都去获取access_token\n    'access_token': '【access_token】'\n});\n//请将API地址的后缀替换为商品的后缀，即aimarket/后面的部分\nvar options = {\n    hostname: 'aip.baidubce.com',\n    path: '/rest/2.0/aimarket/【API地址的后缀】?'+param,\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n    }\n};\nvar req = https.request(\n    options,\n    function (res) {\n        // 在标准输出中查看运行结果\n        res.pipe(process.stdout);\n    }\n);\n// 请求参数，包括图片base64编码与返回分类数量\nvar postData = {\"image\":image,\"top_num\":5};\n// 携带数据发送https请求\nreq.write(JSON.stringify(postData));\nreq.end();"}];exports.wutiSample=[{title:"bash",content:"# 请将API地址替换为商品所提供的API地址。access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token。image为已转换好的去头的base64编码，编码转化地址可使用https://tool.css-js.com/base64.html。阈值threshold设置为0.3\ncurl -i -k '【API地址】?access_token=【access_token】' --data '{\"image\": \"【图片base64编码】\",\"threshold\":0.3}' -H 'Content-Type:application/json; charset=UTF-8'"},{title:"PHP",content:'class Example\n{\n// 请将API地址替换为商品所提供的API地址\n    $url = \'【API地址】\' ;\n// 修改图片地址，测试不同图片\n    $img = file_get_contents("【本地图片地址】");\n//参数image：图像base64编码; 阈值threshold设置为0.3\n    $img = base64_encode($img);\n    $bodys = array(\n    "image" => $img,\n    "threshold" => 0.3\n    );\n        $bodys = json_encode($bodys);\n    $res = request_post($url, $bodys);\n    echo $res;\n\n    /**\n     * 发起http post请求(REST API), 并获取REST请求的结果\n     * @param string $url\n     * @param string $param\n     * @return - http response body if succeeds, else false.\n     */\n    public function request_post($url = \'\', $param = \'\')\n    {\n        if (empty($url) || empty($param)) {\n            return false;\n        }\n    //access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token\n        $postUrl = $url . "?access_token=【access_token】";\n        $curlPost = $param;\n            // 初始化curl\n        $curl = curl_init();\n            curl_setopt($curl, CURLOPT_URL, $postUrl);\n            curl_setopt($curl, CURLOPT_HEADER, 0);\n        // 要求结果为字符串且输出到屏幕上\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\n        // post提交方式\n        curl_setopt($curl, CURLOPT_POST, 1);\n        curl_setopt($curl, CURLOPT_POSTFIELDS, $curlPost);\n        // 运行curl\n        $data = curl_exec($curl);\n        curl_close($curl);\n\n        return $data;\n    }\n}'},{title:"Python",content:"import urllib3, json, base64\n\ndef object_detection():\n    #access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token\n    access_token='【access_token】'\n    http=urllib3.PoolManager()\n    #请将API地址替换为商品所提供的API地址\n    url='【API地址】?access_token='+access_token\n    #修改图片地址，测试不同图片\n    f = open('【本地图片地址】','rb')\n    #参数image：图像base64编码以及阈值threshold设置为0.3\n    img = base64.b64encode(f.read())\n    #img参数进行一下str转换\n    params={'image':''+str(img,'utf-8')+'','threshold':0.3}\n    #对参数params数据进行json处理\n    encoded_data = json.dumps(params).encode('utf-8')\n    print(encoded_data)\n        request=http.request('POST',\n                        url,\n                        body=encoded_data,\n                        headers={'Content-Type':'application/json'})\n    #对返回的byte字节进行处理。Python3输出位串，而不是可读的字符串，需要进行转换\n    result = str(request.data,'utf-8')\n    print(result)\n#输出结果\nprint(object_detection())"},{title:"JAVA",content:'package com.baidu.ai.aip;\nimport com.baidu.ai.aip.utils.Base64Util;\nimport com.baidu.ai.aip.utils.HttpUtil;\nimport com.baidu.ai.aip.utils.FileUtil;\n\nimport java.util.*;\n\npublic class object_detection {\n\n    /**\n    * 重要提示代码中所需工具类\n    * FileUtil,Base64Util,HttpUtil,GsonUtils请从\n    * https://ai.baidu.com/file/658A35ABAB2D404FBF903F64D47C1F72\n    * https://ai.baidu.com/file/C8D81F3301E24D2892968F09AE1AD6E2\n    * https://ai.baidu.com/file/544D677F5D4E4F17B4122FBD60DB82B3\n    * https://ai.baidu.com/file/470B3ACCA3FE43788B5A963BF0B625F3\n    * 下载\n    */\n    public static void main(String[] args) throws Exception {\n//请将API地址替换为商品所提供的API地址\n        String url ="【API地址】";\n//access_token获取方法请详见API使用说明，请注意access_token有效期为30天\n        String access_token="【access_token】";\n//修改图片地址，测试不同图片\n        byte[] file = FileUtil.readFileByBytes("【本地图片地址】");\n//参数image：图像base64编码\n        String image = Base64Util.encode(file);\n//阈值threshold设置为0.3\n        String params = "{"image":""+image+"","threshold":0.3}";\n        String result = HttpUtil.post(url, access_token, params);\n        System.out.println(result);\n    }\n}'},{title:"C++",content:'#include <iostream>\n#include <curl/curl.h>\n\n// libcurl库下载链接：https://curl.haxx.se/download.html\n// jsoncpp库下载链接：https://github.com/open-source-parsers/jsoncpp/\n//请将API地址替换为商品所提供的API地址\nconst static std::string request_url = "【API地址】";\nstatic std::string detection_result;\n/**\n*  curl发送http请求调用的回调函数，回调函数中对返回的json格式的body进行了解析，解析结果储存在全局的静态变量当中\n*  @param 参数定义见libcurl文档\n*  @return 返回值定义见libcurl文档\n*/\nstatic size_t callback(void *ptr, size_t size, size_t nmemb, void *stream) {\n    // 获取到的body存放在ptr中，先将其转换为string格式\n    detection_result = std::string((char *) ptr, size * nmemb);\n    return size * nmemb;\n}\n\n/**\n*  @return 调用成功返回0，发生错误返回其他错误码\n*/\nint detection(std::string &json_result, const std::string &access_token) {\n    //access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token\n    std::string url = request_url   "?access_token="   access_token;\n    CURL *curl = NULL;\n    CURLcode result_code;\n    int is_success;\n    curl = curl_easy_init();\n    if (curl) {\n        curl_easy_setopt(curl, CURLOPT_URL, url.data());\n        curl_easy_setopt(curl, CURLOPT_POST, 1);\n        curl_slist *headers = NULL;\n        headers = curl_slist_append(headers, "Content-Type:application/json;charset=UTF-8");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);\n        // image为已转换好的去头的base64编码，编码转化地址可使用https://tool.css-js.com/base64.html。阈值threshold设置为0.3\n        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "{"image":"【图片base64编码】","threshold":0.3}");\n        result_code = curl_easy_perform(curl);\n        if (result_code != CURLE_OK) {\n            fprintf(stderr, "curl_easy_perform() failed: %s", curl_easy_strerror(result_code));\n            is_success = 1;\n            return is_success;\n        }\n        json_result = detection_result;\n        curl_easy_cleanup(curl);\n        is_success = 0;\n    } else {\n        fprintf(stderr, "curl_easy_init() failed.");\n        is_success = 1;\n    }\n    return is_success;\n}'},{title:"C#",content:'using System;\nusing System.IO;\nusing System.Net;\nusing System.Text;\nusing System.Web;\n\nnamespace com.baidu.ai\n{\n    public class ObjectDetection\n    {\n        public static string detection()\n        {\n            //access_token获取方法请详见API使用说明，请注意access_token有效期为30天,这里仅为了简化编码每一次请求都去获取access_token\n            string token = "【Access_Token】";\n            //请将API地址替换为商品所提供的API地址\n            string host = "【API地址】?access_token=" + token;\n            Encoding encoding = Encoding.Default;\n            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(host);\n            request.Method = "post";\n            request.KeepAlive = true;\n            // image为已转换好的去头的base64编码，编码转化地址可使用https://tool.css-js.com/base64.html。阈值threshold设置为0.3\n            String str = "{"image":"【图片base64编码】","threshold":0.3}";\n            byte[] buffer = encoding.GetBytes(str);\n            request.ContentLength = buffer.Length;\n            request.GetRequestStream().Write(buffer, 0, buffer.Length);\n            HttpWebResponse response = (HttpWebResponse)request.GetResponse();\n\nStreamReader reader = new StreamReader(response.GetResponseStream(), Encoding.Default);\n            string result = reader.ReadToEnd();\n            Console.WriteLine(result);\n            return result;\n        }\n    }\n}'},{title:"Node",content:"var https = require('https');\nvar qs = require('querystring');\nvar fs = require('fs');\n//修改图片地址，测试不同图片。将图片转化为base64编码\nvar image = fs.readFileSync(\"【本地图片地址】\").toString(\"base64\");\nvar param = qs.stringify({\n    //access_token获取方法请详见API使用说明，请注意access_token有效期为30天，这里仅为了简化编码每一次请求都去获取access_token\n    'access_token': '【access_token】'\n});\n//请将API地址的后缀替换为商品的后缀，即aimarket/后面的部分\nvar options = {\n    hostname: 'aip.baidubce.com',\n    path: '/rest/2.0/aimarket/【API地址的后缀】?'+param,\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n    }\n};\nvar req = https.request(\n    options,\n    function (res) {\n        // 在标准输出中查看运行结果\n        res.pipe(process.stdout);\n    }\n);\n// 请求参数，包括图片base64编码与阈值\nvar postData = {\"image\":image,\"threshold\"：0.3};\n// 携带数据发送https请求\nreq.write(JSON.stringify(postData));\nreq.end();"}];exports.tuxiangSuccessSample='{\n    "log_id": XXXXX,\n    "results": [\n        {\n            "name": "【分类名称1】",\n            "score": [置信度1]\n        },\n        {\n            "name": "【分类名称2】",\n            "score": [置信度2]\n        },\n        {\n            "name": "【分类名称3】",\n            "score": [置信度3]\n        },\n        {\n            "name": "【分类名称4】",\n            "score": [置信度4]\n        },\n        {\n            "name": "【分类名称5】",\n            "score": [置信度5]\n        }\n    ]\n}';exports.tuxiangFailSample='{\n    "success": false,\n    "message": "request failed",\n    "errorCode": 110\n}';exports.wutiSuccessSample='{\n    "log_id": XXXXX,\n    "results": [\n      {\n          "name": "【分类名称】",\n          "score": [置信度],\n          "location":{\n            "left": XXX,\n            "top": XXX,\n            "width": XXX,\n            "height": XXX\n          }\n      }\n    ]\n}';exports.wutiFailSample='{\n    "success": false,\n    "message": "request failed",\n    "errorCode": 110\n}'}),define("ai/page/market/product/publish/TransferItem/index",["exports","module","./TransferItem","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/market/product/publish/TransferItem/TransferItem",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./TransferItem.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{}},addItem:function(){var e=this.$get("item");e.added||this.fire("add",e)},removeItem:function(){var e=this.$get("item");this.fire("remove",e)}})}),define("ai/page/market/product/publish/TransferItem/TransferItem.tpl",[],function(){return'<span class="transfer-item {{item.added?\'added\':\'\'}}"\n    on-click="addItem"\n>\n    {{item.text}}\n    <xui-icon \n        s-if="{{item.added}}" \n        on-click="native:removeItem" \n        class="icon-close" \n        name="close"\n    />\n</span>\n'}),define("ai/page/market/product/publish/TransferLayer/index",["exports","module","./TransferLayer","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/market/product/publish/TransferLayer/TransferLayer",["exports","module","lodash","babel-runtime/helpers/interop-require-default","ai/common/component","bat-ria/tpl!./TransferLayer.tpl","inf-ui/x/components/Button","inf-ui/x/components/Layer","inf-ui/x/components/Icon","../TransferItem/index"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](i),c=t["default"](n),p=t["default"](r),f=t["default"](s),m=t["default"](o);module.exports=u["default"]({template:d["default"],components:{"xui-button":c["default"],"xui-icon":f["default"],"xui-layer":p["default"],"transfer-item":m["default"]},initData:function(){return{maxCount:0,label:"请选择",des:"",open:!1,layer:{title:"",datasource:[]},clonesource:[]}},created:function(){var e=this;this.watch("open",function(t){if(t){var a=e.$get("layer.datasource"),i=JSON.parse(JSON.stringify(a));e.$set("clonesource",i)}})},computed:{btnIcon:function(){return this.data.get("open")?"minus":"plus"},addedDatasource:function(){return this.data.get("clonesource").filter(function(e){return!!e.added})},toAddDatasource:function(){return this.data.get("clonesource").filter(function(e){return!e.added})}},addItem:function(e){var t=this.$get("maxCount"),a=this.$get("clonesource"),i=a.filter(function(e){return e.added}).length;if(!(t&&i>=t)){var n=l["default"].findIndex(a,function(t){return t.value===e.value});e.added=!0,this.data.splice("clonesource",[n,1,e])}},removeItem:function(e){var t=this.$get("clonesource"),a=l["default"].findIndex(t,function(t){return t.value===e.value});e.added=!1,this.data.splice("clonesource",[a,1,e])},showLayer:function(){this.$set("open",!0)},handleOK:function(){this.fire("submit",this.$get("clonesource")),this.$set("open",!1)},handleCancel:function(){this.$set("open",!1)}})}),define("ai/page/market/product/publish/TransferLayer/TransferLayer.tpl",[],function(){return'<div class="transfer-layer">\n    <xui-button on-click="showLayer">\n        {{label}}\n        <xui-icon name="{{btnIcon}}"/>\n    </xui-button>\n    <span class="layer-des">{{des}}</span>\n    <xui-layer \n        class="transfer-layerwrap"\n        open="{=open=}" \n        width="{{400}}" \n        offset-top="{{20}}"\n    >\n        <h2 class="layer-title">{{layer.title}}</h2>\n        <div class="added-wrap">\n            <div class="added-title">已添加<span class="add-tip">（点击x删除）</span></div>\n            <transfer-item s-for="item in addedDatasource" \n                on-remove="removeItem"\n                item="{{item}}"/>\n        </div>\n        <div class="toadd-wrap">\n            <div class="added-title">待添加<span class="add-tip">（点击进行添加）</span></div>\n            <transfer-item s-for="item in toAddDatasource" \n                on-add="addItem"\n                item="{{item}}"/>\n        </div>\n        <div class="btn-wrap">\n            <xui-button on-click="handleOK" class="layer-btn" skin="primary">确定</xui-button>\n            <xui-button on-click="handleCancel" class="layer-btn">取消</xui-button>\n        </div>\n    </xui-layer>\n</div>\n'}),define("ai/page/market/product/publish/utils",["exports","lodash","babel-runtime/helpers/interop-require-default","ai/models/market/ProductInfo","ai/common/enums"],function(exports,e,t,a,i){exports.__esModule=!0,exports.getPostData=function(e){return arguments.length<=1||arguments[1]===undefined||arguments[1],(e=JSON.parse(JSON.stringify(e))).productType===i.MarketProductType.SOFTWARE&&e.productCategory.some(function(e){return 60100===e})&&e.apiInfo?e.apiInfo.apiUsrUri="/"+e.apiInfo.apiUsrUri:e.apiInfo=null,e.packageInfo.forEach(function(e){if(1==+e.deliveryDaysType&&(e.deliveryDays=-1),~e.deliveryType.indexOf(i.StoreDeliveryType.HARDWARE)||(e.packageStock=-1),e.packageLowType?e.packageLow=Number(e.packageLow):e.packageLow=-1,e.packageLimitType?e.packageLimit=1:e.packageLimit=-1,e.packageMode===i.MarketPackageMode.STEP)for(var t=0;t<e.priceContent.length;t++)"无限"===e.priceContent[t].end&&(e.priceContent[t].end=-1);e.packageStock=+e.packageStock,n["default"].each(e.priceContent,function(e){for(var t in e)e[t]=+e[t]});var a=e.priceContent[0];a&&(e.packagePrice=a.price||a.high)}),n["default"].assign({},e,{})},exports.getRndTag=function(){return(Math.random()+"").slice(-10)+(""+ +new Date).slice(-10)},exports.updatePackageInfoPackageId=function(e,t){if(e&&e.length)for(var a=t.$get("data.packageInfo"),i=function(i,r){var s=e[i],o=n["default"].findIndex(a,function(e){return e.rndTag===s.rndTag});o>=0&&t.$set("data.packageInfo["+o+"].packageId",s.packageId)},r=0,s=e.length;r<s;r++)i(r)};var n=t["default"](e)}),define("ai/page/market/product/stock/AddStock/AddStock",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./AddStock.tpl","san-xui"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i);module.exports=r["default"]({template:s["default"],components:{"xui-dialog":n.Dialog,"xui-numbertextline":n.NumberTextline,"xui-form":n.Form,"xui-item":n.FormItem},initData:function(){return{open:!1,product:null,updateStock:"0"}},computed:{updateResult:function(){var e=+this.data.get("updateStock");return e>0?"库存新增"+e+"个":e<0?"库存减少"+-e+"个":"库存无变更"},updateStockMax:function(){return 1e7},updateStockMin:function(){return-this.data.get("product.packageStock")}},created:function(){var e=this;this.watch("updateStock",function(t){var a=e.$get("updateStockMax"),i=e.$get("updateStockMin");(t=+t)>a?e.$set("updateStock",a):t<i?e.$set("updateStock",i):isNaN(t)&&e.$set("updateStock",0)})},save:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=this.$get("product.packageId"),0!==(a=+this.$get("updateStock"))){i.next=5;break}return this.close(),i.abrupt("return");case 5:return i.next=7,e["default"].awrap(this.ajax.saveMarketProductStock({packageId:t,packageStock:a}));case 7:this.$toast("库存更新成功"),this.fire("update"),this.close();case 10:case"end":return i.stop()}},null,this)},close:function(){this.$set("open",!1)}})}),define("ai/page/market/product/stock/AddStock/AddStock.tpl",[],function(){return'<div>\n    <xui-dialog class="market-stock-update-dialog" open="{=open=}" title="更新库存">\n        <xui-form>\n            <xui-item label="规格名称：">\n                {{ product.packageName }}\n            </xui-item>\n            <xui-item label="更新库存：">\n                <xui-numbertextline max="{{updateStockMax}}" min="{{updateStockMin}}" value="{=updateStock=}" />\n                <span>个</span>\n            </xui-item>\n            <xui-item label="更新结果：">\n                {{ updateResult }}\n            </xui-item>\n        </xui-form>\n        <div slot="foot" style="text-align: right;">\n            <xui-button on-click="save" skin="primary">确认</xui-button>\n            <xui-button on-click="close">取消</xui-button>\n        </div>\n    </xui-dialog>\n</div>\n'}),define("ai/page/market/product/stock/AddStock/index",["exports","module","./AddStock","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/stock/index",["exports","module","./stock","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/product/stock/stock",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./stock.tpl","san-xui","inf-ui/x/biz/XPager","ai/common/enums","./AddStock/index","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](r),p=a["default"](o);module.exports=u["default"]({template:d["default"],components:{"xui-table":n.Table,"xui-tip":n.Tip,"xui-xpager":c["default"],"add-stock":p["default"],"xui-dialog":n.Dialog,"xui-toastlabel":n.ToastLabel},filters:{getProductTypeText:function(e){return s.MarketProductType.fromValue(e).text}},initData:function(){return{breadItem:[{title:"库存管理"}],table:{schema:[{label:"商品名称",name:"productName"},{label:"规格名称",name:"packageName"},{label:"类型",name:"productType"},{label:"库存量",name:"packageStock"},{label:"状态",name:"status"},{label:"操作",name:"ctl"}],datasource:[]},pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},getStoreUserInfo:function(){this.fetchCurrentPage()},fetchCurrentPage:function(){var t,a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.$get("pager"),a=t.page,i=t.size,r.next=5,e["default"].awrap(this.ajax.getMarketProductStock({page:a,pageSize:i}));case 5:n=r.sent,this.$$set({"pager.page":n.page,"pager.pageSize":n.pageSize,"pager.count":n.total,"table.datasource":n.items});case 7:case"end":return r.stop()}},null,this)},onPageSizeChange:function(e){var t=e.value;this.$set("pager.size",t),this.$set("pager.page",1),this.fetchCurrentPage()},onPageChange:function(e){var t=e.pageNo;this.$set("pager.page",t),this.fetchCurrentPage()},addStock:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.$set("table.datasource["+t+"].open",!1),a.next=3,e["default"].awrap(l.sleep());case 3:this.$set("table.datasource["+t+"].open",!0);case 4:case"end":return a.stop()}},null,this)}})}),define("ai/page/market/product/stock/stock.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content class="ai-market-main-content">\n            \x3c!-- <breadcrumb items="{{breadItem}}"></breadcrumb> --\x3e\n            <div class="list-content ai-store-content ai-market-stock">\n                <h2 class="ai-market-page-header">商品库存</h2>\n                <xui-toastlabel level="alert" style="margin-top: 20px;">\n                    温馨提示:\n                    <ul>\n                        <li>1、如下为已上架商品，如需手动更新库存数量，请点击更新库存。</li>\n                        <li>2、未上架商品请前往<a href="#/ai/market/product/list">商品列表</a>中编辑商品信息进行修改。</li>\n                    </ul>\n                </xui-toastlabel>\n                <div class="section">\n                    <xui-table schema="{{table.schema}}" datasource="{{table.datasource}}">\n                        <template slot="c-productType">\n                            {{ row.productType | getProductTypeText }}\n                        </template>\n                        <template slot="c-packageStock">\n                            {{ row.packageStock == -1? \'不限\': row.packageStock }}\n                        </template>\n                        <template slot="c-status">\n                            <div s-if="row.packageStock === 0" class="stock-empty">\n                                <span>库存为空</span>\n                                <xui-tip skin="warning" message="本规格库存量已空，请及时补货" position="tc" />\n                            </div>\n                            <div s-else-if=" row.packageStock < 10 && row.packageStock > 0" class="stock-less">\n                                <span>库存短缺</span>\n                                <xui-tip skin="warning" message="本规格库存量已低于10，请及时补货" position="tc" />\n                            </div>\n                            <div s-else class="stock-full">库存充足</div>\n                        </template>\n                        <template slot="c-ctl">\n                            <a on-click="addStock(rowIndex)" href="javascript:void(0)">更新库存</a>\n                            <add-stock product="{{row}}" on-update="fetchCurrentPage" open="{{table.datasource[rowIndex].open}}" s-if="table.datasource[rowIndex].open" />\n                        </template>\n                    </xui-table>\n                </div>\n\n                <div class="pager-wrap">\n                    <xui-xpager\n                        withPagerSize="{{true}}"\n                        pager="{{pager}}"\n                        on-pager-size-change="onPageSizeChange"\n                        on-pager-change="onPageChange"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/provider/config",["exports","./register/pages/ContactInfo/index","babel-runtime/helpers/interop-require-default","./register/pages/ProviderInfo/index","./register/pages/ShopInfo/ShopInfo","./register/pages/ResultInfo/index"],function(exports,e,t,a,i,n){exports.__esModule=!0;var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n),u={pages:[s["default"],o["default"],l["default"]],getDraft:["getMarketProviderRegisterDraftInfo2","getMarketProviderRegisterDraftInfo3"],saveDraft:["saveMarketProviderRegisterDraftStep2","saveMarketProviderRegisterDraftStep3"],submit:["getMarketProviderRegisterStep2","getMarketProviderRegisterStep3"]};exports.EnterConfig=u;var d={pages:[r["default"],s["default"],o["default"]],getDraft:["getMarketProviderRegisterEditDraftInfo1","getMarketProviderRegisterEditDraftInfo2","getMarketProviderRegisterEditDraftInfo3"],saveDraft:["","saveMarketProviderRegisterEditDraftInfo2","saveMarketProviderRegisterEditDraftInfo3"],submit:["updateMarketProviderContact","updateMarketProviderInfo","updateMarketProviderShopInfo"]};exports.EditConfig=d}),define("ai/page/market/provider/edit/edit",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./edit.tpl","ai/common/enums","ai/common/util","../config","san-xui","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](l),p={contact:{page:s.EditConfig.pages[0],title:"服务商信息修改",submit:s.EditConfig.submit[0],submitText:"确认修改",cancelText:"放弃更新",submitToast:"修改成功",redirect:"provider/index",breadItem:function(e){return[{title:"服务商信息",url:"#/ai/"+e+"/provider/index"},{title:"联系信息修改"}]}},provider:{page:s.EditConfig.pages[1],title:"企业资质信息更新",submit:s.EditConfig.submit[1],submitText:"提交申请",cancelText:"放弃更新",submitToast:"提交成功",draftText:"保存至草稿",redirect:"provider/index",breadItem:function(e){return[{title:"服务商信息",url:"#/ai/"+e+"/provider/index"},{title:"企业资质信息更新"}]}},shop:{page:s.EditConfig.pages[2],title:"店铺信息更新",submit:s.EditConfig.submit[2],submitText:"提交申请",cancelText:"放弃更新",submitToast:"提交成功",draftText:"保存至草稿",redirect:"shop/info",breadItem:function(e){return[{title:"店铺管理",url:"#/ai/"+e+"/shop/info"},{title:"店铺信息更新"}]}}};module.exports=u["default"]({template:d["default"],components:{"xui-icon":o.Icon},initData:function(){return{section:""}},computed:{title:function(){var e=this.data.get("config");return e?e.title:""},breadItem:function(){var e=this.data.get("config");if(!e)return[];var t=this.data.get("aiAppType");return e.breadItem(t)},config:function(){var e=this.data.get("section");return p[e]}},inited:function(){this.on("getStoreUserInfo",this.initialize)},methodHook:{initialize:function(){if(!this.$get("config"))return this.$toast("未找到需要编辑的页面"),void this.$aiRedirect("overview/index");this.renderPage()},giveUp:function(){var e=this.data.get("section"),t=this.data.get("config"),a={provider:this.data.get("finalStatus"),shop:this.data.get("shopFinalStatus")}[e];!a||"DRAFT"!==a.alias&&"UPDATE_DRAFT"!==a.alias?this.$aiRedirect(t.redirect):this.$reload()},renderPage:function(){var e=this.$get("config"),t=c["default"].keys(p).indexOf(this.$get("section")),a=s.EditConfig.getDraft[t],i=s.EditConfig.saveDraft[t];this.page=new e.page({data:{providerId:this.$get("marketUserInfo.providerId"),marketUserInfo:this.$get("marketUserInfo"),ifEdit:!0,labels:this.$get("labels"),draftMethod:a,draftSaveMethod:i}}),this.page.attach(this.el.querySelector("#ai-register-wrapper"))},saveDraft:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(r.getAsyncTuple(this.page.saveDraft()));case 2:if(t=a.sent,!t[0]){a.next=7;break}return this.$toast("保存失败",{messageType:"error"}),a.abrupt("return");case 7:this.$toast("保存成功");case 8:case"end":return a.stop()}},null,this)},submit:function(){var t,a,i,n,s;return e["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.$get("config"),o.next=3,e["default"].awrap(r.getAsyncTuple(this.page.validate()));case 3:if(a=o.sent,i=a[0],n=a[1],!i){o.next=9;break}return this.invokeError(i),o.abrupt("return");case 9:return o.next=11,e["default"].awrap(r.getAsyncTuple(this.ajax[t.submit](n)));case 11:if(s=o.sent,!(i=s[0])){o.next=16;break}return this.invokeError(i),o.abrupt("return");case 16:this.$toast(t.submitToast),this.$aiRedirect(t.redirect);case 18:case"end":return o.stop()}},null,this)},invokeError:function(e){e.global?this.$toast(e.global,{messageType:"error"}):e.field&&(this.page.setError(e.field),this.jumpToError(e.field))},jumpToError:function(e){setTimeout(function(){var t=c["default"].keys(e);if(!c["default"].isEmpty(t)){var a=t[0],i=$(".ui-form-item-"+a);i.length&&$("html, body").animate({scrollTop:i.offset().top-60},300)}},10)}}})}),define("ai/page/market/provider/edit/edit.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-market-content ai-market-provider-content">\n                <h2>{{title}}\n                    <a s-if="section === \'shop\'" class="operation-book" href="{{Url.store.operateMethod}}" target="_blank">\n                        <xui-icon name="information"></xui-icon>\n                        <span>运营手册</span>\n                    </a>\n                </h2>\n                <xui-toastlabel s-if="marketUserInfo.opinion" style="margin: 10px 0;" level="error">{{marketUserInfo.opinion}}</xui-toastlabel>\n\n                <div id="ai-register-wrapper"></div>\n                <div class="edit-footer">\n                    <xui-button on-click="submit" size="large" skin="primary">{{config.submitText}}</xui-button>\n                    <xui-button on-click="giveUp" size="large">{{config.cancelText}}</xui-button>\n                    \x3c!-- 草稿功能暂时屏蔽 =。= --\x3e\n                    \x3c!-- <xui-button s-if="config.draftText" on-click="saveDraft" size="large">{{config.draftText}}</xui-button> --\x3e\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/provider/edit/index",["exports","module","./edit","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/index",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","lodash","./register/pages/ContactDialog/index","san-xui"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](r),c=a["default"](s);module.exports=l["default"]({template:u["default"],components:{"xui-tip":o.Tip,"contact-dialog":c["default"]},filters:{getTextByName:function(e,t){var a=d["default"].find(t,function(t){return t.value===e});return a?a.text:""},getNameById:function(e,t){var a=d["default"].find(t,function(t){return t.id===e});return a?a.name:""},getStatusColor:function(e,t){var a=t.fromValue(e);return a?a.color:""}},initData:function(){return{breadItem:[{title:"服务商信息"}],providerScaleList:n.MarketProviderScale.toArray(),industryList:[],ProviderQualificationStatus:n.ProviderQualificationStatus,ProviderQualificationStatusList:n.ProviderQualificationStatus.toArray(),qualificationStatus:"",ifContactDialogOpen:!1,data:{businessContact:"",contactPhone:"",contactEmail:"",providerType:1,licenseImage:"",licenseImageUrl:"",providerName:"",providerLicense:"",providerCapital:"",providerAddress:"",providerIndustry:"",providerScale:1,providerSite:""}}},computed:{showQualificationStatus:function(){return~[n.ProviderQualificationStatus.AUDIT,n.ProviderQualificationStatus.PASS].indexOf(this.data.get("qualificationStatus"))}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},methodHook:{fetchQualificationInfo:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketQualificationInfo());case 2:(t=a.sent)&&this.$set("qualificationStatus",t.status);case 4:case"end":return a.stop()}},null,this)},getStoreUserInfo:function(){var e=this,t=this.$get("finalStatus");~[n.MarketProviderFinalStatus.DRAFT,n.MarketProviderFinalStatus.UPDATE_DRAFT].indexOf(t.value)?this.$aiRedirect("provider/modify"):(this.fetchQualificationInfo(),this.$get("marketUserInfo.providerStatus")!==n.StoreProviderStatus.NONE&&(this.ajax.getStoreIndustryList().then(function(t){return e.$set("industryList",t)}),this.ajax.getStoreProviderInfo().then(function(t){return e.$set("data",t)})))},modifyContactInfo:function(){this.$set("ifContactDialogOpen",!0)},modifyProviderInfo:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.$get("showQualificationStatus")){a.next=7;break}return t="您还未进行企业认证，为了您的账号更加安全，我们建议您进行企业实名认证",this.$get("qualificationStatus")===n.ProviderQualificationStatus.RETURN&&(t="您暂未通过企业认证，请您前往认证结果中心查看并重新认证"),a.next=5,e["default"].awrap(this.$confirm({title:"提示",content:'<p style="font-size: 16px;">抱歉，无法修改企业信息</p><p>'+t+"</p>",needFoot:!0,okText:"去认证",cancelText:"取消"}));case 5:return window.open(this.$get("Url.enterpriseQualify")),a.abrupt("return");case 7:this.$aiRedirect("provider/modify");case 8:case"end":return a.stop()}},null,this)}}})}),define("ai/page/market/provider/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content class="ai-market-main-content">\n            \x3c!-- <breadcrumb items="{{breadItem}}"></breadcrumb> --\x3e\n            <div class="list-content ai-store-content ai-store-provider-content" style="min-height: 676px;">\n                <h2 class="ai-market-page-header">服务商信息</h2>\n\n                <xui-toastlabel s-if="finalStatus.alias === \'UPDATE_SUCCESS\'" level="normal">提示：您的信息已审核通过</xui-toastlabel>\n                <xui-toastlabel s-elif="finalStatus.alias === \'UPDATE_REVIEW\'" level="alert">提示：您的信息正在审核中，请耐心等待结果</xui-toastlabel>\n                <xui-toastlabel s-elif="finalStatus.alias === \'UPDATE_FAILED\'" level="error">提示：您的信息审核未通过，<a on-click="goToEdit(\'provider\')" href="javascript:void(0);">点击修改</a></xui-toastlabel>\n\n                <xui-toastlabel class="qualification-toast" s-if="qualificationStatus === ProviderQualificationStatus.NONE" level="info">您还未进行企业认证，为了您的账号更加安全，我们建议您进行企业实名认证 <a href="{{Url.enterpriseQualify}}" target="_blank">立即认证>></a></xui-toastlabel>\n                <xui-toastlabel class="qualification-toast" s-if="qualificationStatus === ProviderQualificationStatus.RETURN" level="info">您暂未通过企业认证，请您前往认证结果中心查看并重新认证 <a href="{{Url.qualifyResult}}" target="_blank">认证结果中心>></a></xui-toastlabel>\n\n                \x3c!-- <xui-toastlabel s-if="providerUpdateToast" level="{{providerUpdateToast.level}}">提示：你的信息{{providerUpdateToast.text}}</xui-toastlabel>\n                <xui-toastlabel s-if="shopUpdateToast" level="{{shopUpdateToast.level}}">{{shopUpdateToast.text}}</xui-toastlabel> --\x3e\n\n                <div class="section">\n                    <h3 class="section-title">企业信息 <xui-icon on-click="modifyProviderInfo" class="edit-label" name="edit" /></h3>\n                    <div class="basic-info">\n                        <table class="info-table">\n                            <tbody>\n                                <tr s-if="showQualificationStatus">\n                                    <td class="info-table-title">企业认证：</td>\n                                    <td>\n                                        <span class="ai-market-qualification-status {{ qualificationStatus | getStatusColor(ProviderQualificationStatus) }}">\n                                            {{ qualificationStatus | getTextByName(ProviderQualificationStatusList) }}\n                                        </span>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">企业名称：</td>\n                                    <td>{{data.providerName}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">注册资金：</td>\n                                    <td>{{data.providerCapital/10000}}（万元）</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">企业地址：</td>\n                                    <td>{{data.providerAddress}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">所属行业</td>\n                                    <td>{{data.providerIndustry | getNameById(industryList)}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">企业规模：</td>\n                                    <td>{{data.providerScale | getTextByName(providerScaleList)}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">企业网站：</td>\n                                    <td>{{data.providerSite || \'无\'}}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <div class="section">\n                    <h3 class="section-title">联系信息 <xui-icon on-click="modifyContactInfo" class="edit-label" name="edit" /></h3>\n                    <div class="product-info">\n                        <table class="info-table">\n                            <tbody>\n                                <tr>\n                                    <td class="info-table-title">商务联系人：</td>\n                                    <td>{{data.businessContact}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">商务联系人手机号：</td>\n                                    <td>{{data.contactPhone}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">商务联系人邮箱：</td>\n                                    <td>{{data.contactEmail}}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                <contact-dialog s-if="ifContactDialogOpen" ifEdit="{{true}}" mode="modify" providerId="{{marketUserInfo.providerId}}" open="{=ifContactDialogOpen=}"></contact-dialog>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/provider/modify/index",["exports","module","./modify","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/modify/modify",["exports","module","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./modify.tpl","ai/components/PagerHeader/index","../ProviderForm/index"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n);module.exports=r["default"]({template:s["default"],components:{"pager-header":o["default"],"provider-form":l["default"]},initData:function(){return{loading:!0}},inited:function(){this.on("getStoreUserInfo",this.initialize)},methodHook:{initialize:function(){this.$set("loading",!1)},handleBack:function(){this.$aiRedirect("provider/index")},giveUp:function(){var e=this.data.get("finalStatus");!e||"DRAFT"!==e.alias&&"UPDATE_DRAFT"!==e.alias?this.$aiRedirect("provider/index"):this.$reload()},saveDraft:function(){this.ref("provider-form").saveDraft()},submit:function(){this.ref("provider-form").submit()}}})}),define("ai/page/market/provider/modify/modify.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content style="padding: 0;">\n            <pager-header back="返回服务商信息页" title="修改企业信息" on-back="handleBack" />\n            <div class="list-content ai-market-content ai-market-provider-content" style="padding-bottom: 180px;">\n                <div class="section modify-provider-info">\n                    <h3 class="section-title">企业信息</h3>\n                    <provider-form s-if="!loading" s-ref="provider-form" ifEdit="{{true}}" labels="{{labels}}" providerId="{{marketUserInfo.providerId}}" marketUserInfo="{{marketUserInfo}}"></provider-form>\n                </div>\n            </div>\n\n            <div class="ai-market-provider-footer-wrap">\n                <div class="modify-btn-wrap">\n                    <xui-button on-click="giveUp" size="large">放弃编辑</xui-button>\n                    <xui-button on-click="submit" size="large" skin="primary">提交</xui-button>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/provider/ProviderForm/index",["exports","module","./ProviderForm","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/ProviderForm/ProviderForm",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ProviderForm.tpl","san-xui","./rules","ai/common/util","lodash","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=n["default"](i),p=n["default"](r),f=n["default"](o),m=n["default"](u),h={getDraft:"getMarketProviderRegisterDraftInfo2",saveDraft:"saveMarketProviderRegisterDraftStep2",submit:"getMarketProviderRegisterStep2"},g={getDraft:"getMarketProviderRegisterEditDraftInfo2",saveDraft:"saveMarketProviderRegisterEditDraftInfo2",submit:"updateMarketProviderInfo"};module.exports=c["default"]({template:p["default"],components:{"xui-form":s.Form,"xui-item":s.FormItem,"xui-textbox":s.TextBox,"xui-button":s.Button,"xui-radiobox":s.RadioBox,"xui-tip":s.Tip,"xui-select":s.Select},initData:function(){return{providerId:"",ifEdit:!1,qualificationStatus:d.ProviderQualificationStatus.NONE,data:{providerType:1,licenseImage:"",licenseImageUrl:"",providerName:"",providerLicense:"",providerCapital:"",providerAddress:"",providerIndustry:"",providerScale:1,providerSite:""},errors:null,providerScaleDatasource:d.MarketProviderScale.toArray(),currMethods:h}},computed:{ifCompany:function(){return this.data.get("data.providerType")===d.StoreProviderType.COMPANY},rules:function(){return f["default"]({})},postData:function(){var e=this.data.get("data");return m["default"].assign({},e,{providerCapital:1e4*this.data.get("data.providerCapital")})},qualificationInfo:function(){return d.ProviderQualificationStatus.fromValue(this.data.get("qualificationStatus"))},qualificationStatusFail:function(){return~[d.ProviderQualificationStatus.NONE,d.ProviderQualificationStatus.RETURN].indexOf(this.data.get("qualificationStatus"))}},created:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$get("ifEdit")&&this.$set("currMethods",g),e.next=3,t["default"].awrap(a["default"].all([this.fetchIndustryList(),this.fetchQualificationInfo(),this.fetchDraft()]));case 3:this.saveCache();case 4:case"end":return e.stop()}},null,this)},methodHook:{hasChanged:function(){return this.$get("lastCacheData")!==JSON.stringify(this.$get("postData"))},saveCache:function(){this.$set("lastCacheData",JSON.stringify(this.$get("postData")))},fetchQualificationInfo:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketQualificationInfo());case 2:(e=a.sent)&&(this.$set("qualificationStatus",e.status),this.$set("data.providerName",e.providerName));case 4:case"end":return a.stop()}},null,this)},fetchDraft:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.$get("providerId")){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t["default"].awrap(this.ajax[this.$get("currMethods").getDraft]({providerId:this.$get("providerId"),step:2}));case 4:if(e=a.sent){a.next=7;break}return a.abrupt("return");case 7:e.providerCapital=e.providerCapital/1e4,this.$set("data",e);case 9:case"end":return a.stop()}},null,this)},saveDraft:function(){var t=this,a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return this.ajax[this.$get("currMethods").saveDraft](e["default"]({},this.$get("postData"),a),{"x-silent":!0}).then(function(){t.saveCache(),t.$toast("保存成功")})},submit:function(){var e,a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(l.getAsyncTuple(this.ref("form").validateForm()));case 2:if(e=r.sent,!(a=e[0])){r.next=7;break}return this.invokeError(a),r.abrupt("return");case 7:return i=this.$get("postData"),r.next=10,t["default"].awrap(l.getAsyncTuple(this.ajax[this.$get("currMethods").submit](i)));case 10:if(n=r.sent,!(a=n[0])){r.next=15;break}return this.invokeError(a),r.abrupt("return");case 15:this.$toast("提交成功"),this.$aiRedirect("provider/index");case 17:case"end":return r.stop()}},null,this)},fetchIndustryList:function(){return t["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ajax.getStoreIndustryList().then(function(e){return t.$set("industryList",e.map(function(e){var t=e.id;return{text:e.name,value:t}}))}));case 1:case"end":return e.stop()}},null,this)},handleProviderType:function(e){this.$set("data.providerType",e)},invokeError:function(e){e.global?this.$toast(e.global,{messageType:"error"}):e.field&&(this.setError(e.field),l.jumpToError(e.field))},setError:function(e){this.$set("errors",e)}}})}),define("ai/page/market/provider/ProviderForm/ProviderForm.tpl",[],function(){return'<div class="ai-market-provider-form">\n    <xui-form s-ref="form" rules="{{rules}}" formData="{{data}}" errors="{=errors=}">\n        <xui-item name="providerName" label="企业名称：">\n            <span slot="help" style="color: #999;">企业名称由<a href="{{Url.enterpriseQualify}}" target="_blank">企业账号认证中心</a>同步，如需变更请您<a href="{{Url.ticket}}" target="_blank">提交工单</a></span>\n            <xui-textbox disabled value="{=data.providerName=}" width="400" placeholder="请完整输入企业全称" />\n        </xui-item>\n        <xui-item name="providerCapital" label="注册资本：" help="请务必与营业执照或组织机构代码保持一致">\n            <xui-textbox value="{=data.providerCapital=}" width="180" type="number" /> 万元\n        </xui-item>\n        <xui-item name="providerAddress" label="企业地址：" help="请务必与营业执照或组织机构代码保持一致">\n            <xui-textbox value="{=data.providerAddress=}" width="400" placeholder="请输入企业具体地址" />\n        </xui-item>\n        <xui-item name="providerIndustry" label="所属行业：">\n            <xui-select value="{=data.providerIndustry=}" width="90" datasource="{{industryList}}" />\n        </xui-item>\n        <xui-item name="providerScale" label="企业规模：">\n            <xui-select value="{=data.providerScale=}" width="90" datasource="{{providerScaleDatasource}}" />\n        </xui-item>\n        <xui-item name="providerSite" label=" ">\n            <div slot="label">\n                <span>企业网站：</span><br>\n                <span>（选填）</span>\n            </div>\n            <xui-textbox value="{=data.providerSite=}" width="400" placeholder="请输入企业网站地址" />\n        </xui-item>\n    </xui-form>\n</div>\n'}),define("ai/page/market/provider/ProviderForm/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=function(){return new e["default"]({providerName:[{required:!0,message:""},{max:100,message:"名称不能超过100个字符"}],providerCapital:[{required:!0,message:"请输入注册资本"},{validator:function(e,t,a){(t=+t)>21e4?a("您的注册资本过大，请提交工单咨询，谢谢！"):t>0?a():a("请输入正确的注册资本")}}],providerAddress:[{required:!0,message:"请输入地址"},{max:100,message:"地址不能超过100个字符"}],providerIndustry:[{required:!0,message:"请选择所属行业"}],providerScale:[{required:!0,message:"请输入规模"},{validator:function(e,t,a){(t=+t)>=1&&t<=1e8?a():a("请输入正确的规模")}}]})}}),define("ai/page/market/provider/register/index",["exports","module","./register","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/register/pages/ContactDialog/ContactDialog",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ContactDialog.tpl","san-xui","./rules","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](n),c=i["default"](s),p=i["default"](l),f={fetchDraft:"getMarketProviderRegisterDraftInfo1",saveDraft:"saveMarketProviderRegisterDraftStep1",submit:"getMarketProviderRegisterStep1"},m={fetchDraft:"getMarketProviderRegisterEditDraftInfo1",saveDraft:"",submit:"updateMarketProviderContact"};module.exports=u["default"]({template:d["default"],components:{"xui-form":r.Form,"xui-item":r.FormItem,"xui-textbox":r.TextBox,"xui-button":r.Button,"xui-dialog":r.Dialog},initData:function(){return{open:!1,mode:0,providerId:"",ifEdit:!1,draftMethod:"",draftSaveMethod:"",rules:c["default"],data:{businessContact:"",contactPhone:"",verifyCode:"",contactEmail:""},verifyCodeLeft:0,errors:null,currMethods:f}},computed:{ifRegister:function(){return 0===this.data.get("mode")},ifRegisterSubmit:function(){return 1===this.data.get("mode")},verifyCodeBtnDisabled:function(){return this.data.get("verifyCodeLeft")>0||!this.data.get("data.contactPhone").match(/^\d{11}$/)},verifyCodeBtnText:function(){var e=this.data.get("verifyCodeLeft");return e>0?"获取验证码("+e+")":"获取验证码"},postData:function(){var e=this.data.get("data");return p["default"].assign({},e)}},created:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$get("ifEdit")){e.next=4;break}this.$set("currMethods",m),e.next=7;break;case 4:if(this.$get("providerId")){e.next=7;break}return e.next=7,t["default"].awrap(this.saveDraft());case 7:return e.next=9,t["default"].awrap(this.fetchDraft());case 9:this.saveCache();case 10:case"end":return e.stop()}},null,this)},detached:function(){window.clearInterval(this.timer)},methodHook:{onCloseDialog:function(){this.$set("open",!1)},saveCache:function(){this.$set("lastCacheData",JSON.stringify(this.$get("postData")))},fetchDraft:function(){var a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.$get("providerId")){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,t["default"].awrap(this.ajax[this.$get("currMethods").fetchDraft]({providerId:this.$get("providerId")}));case 4:if(a=i.sent){i.next=7;break}return i.abrupt("return");case 7:this.$set("data",e["default"]({},a,{verifyCode:""}));case 8:case"end":return i.stop()}},null,this)},saveDraft:function(){var a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:if(!this.$get("ifEdit")){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,t["default"].awrap(this.ajax[this.$get("currMethods").saveDraft](e["default"]({},this.$get("postData"),a),{"x-silent":!0}).then(function(e){n.$get("providerId")||n.$set("marketUserInfo.providerId",e.providerId),n.saveCache()}));case 4:case"end":return i.stop()}},null,this)},sendVerifyCode:function(){var e=this;this.ajax.sendMarketVefiryCode({contactPhone:this.$get("data.contactPhone")}),this.$toast("发送成功"),window.clearInterval(this.timer),this.$set("verifyCodeLeft",60),this.timer=window.setInterval(function(){var t=e.$get("verifyCodeLeft");t<=0&&window.clearInterval(e.timer),e.$set("verifyCodeLeft",t-1)},1e3)},save:function(){var e,a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(o.getAsyncTuple(this.ref("form").validateForm()));case 2:if(e=r.sent,!(a=e[0])){r.next=7;break}return this.jumpToError(a),r.abrupt("return");case 7:return r.next=9,t["default"].awrap(o.getAsyncTuple(this.ajax[this.$get("currMethods").submit](this.$get("postData"))));case 9:if(i=r.sent,!(a=i[0])){r.next=16;break}return n=a.global?"提交失败："+a.global:"提交失败",this.$toast(n,{messageType:"error"}),a.field&&(o.jumpToError(a.field),this.$set("errors",a.field)),r.abrupt("return");case 16:this.$toast("保存成功"),this.$get("ifEdit")&&this.$reload(),this.$set("open",!1);case 19:case"end":return r.stop()}},null,this)},setError:function(e){this.$set("errors",e)}}})}),define("ai/page/market/provider/register/pages/ContactDialog/ContactDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="添加联系人" width="600">\n        <div class="ai-market-register-contact-dialog">\n            <xui-toastlabel style="margin-bottom: 20px;" level="normal">AI市场会与商务联系人沟通商务合作、入驻审核反馈、服务商权益责任等重要事宜</xui-toastlabel>\n            <xui-form s-ref="form" rules="{{rules}}" formData="{{data}}" errors="{=errors=}">\n                <xui-item required name="businessContact" label="商务联系人：">\n                    <xui-textbox value="{=data.businessContact=}" width="340" placeholder="请输入联系人姓名" />\n                </xui-item>\n                <xui-item required name="contactPhone" label="联系人手机号：">\n                    <xui-textbox value="{=data.contactPhone=}" width="340" placeholder="请输入11位手机号码" />\n                    <xui-button on-click="sendVerifyCode" skin="primary" disabled="{{verifyCodeBtnDisabled}}" skin="primary">{{verifyCodeBtnText}}</xui-button>\n                </xui-item>\n                <xui-item style="margin-top: 10px;" name="verifyCode" label=" " class="verify-code-row">\n                    <xui-textbox value="{=data.verifyCode=}" width="180" placeholder="请输入短信验证码" />\n                </xui-item>\n                <xui-item required name="contactEmail" label="联系人邮箱：">\n                    <xui-textbox value="{=data.contactEmail=}" width="340" placeholder="请输入企业邮箱地址" />\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot" s-if="ifRegister" style="text-align: right;">\n            <xui-button on-click="onCloseDialog">跳过</xui-button>\n            <xui-button on-click="save" skin="primary">开始入驻</xui-button>\n        </div>\n        <div slot="foot" s-elif="ifRegisterSubmit" style="text-align: right;">\n            <xui-button disabled="{{true}}">跳过</xui-button>\n            <xui-button on-click="save" skin="primary">提交</xui-button>\n        </div>\n        <div slot="foot" s-else style="text-align: right;">\n            <xui-button on-click="onCloseDialog">取消</xui-button>\n            <xui-button on-click="save" skin="primary">确认</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/market/provider/register/pages/ContactDialog/index",["exports","module","./ContactDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/register/pages/ContactDialog/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=new e["default"]({businessContact:[{required:!0,message:"请填写商务联系人"},{max:30,message:"商务联系人不能超过30个字符"}],contactPhone:[{required:!0,message:"请填写联系人手机号"},{pattern:/^\d{11}$/,message:"请填写正确的联系人手机号"}],verifyCode:[{required:!0,message:"请填写验证码"},{length:4,message:"请填写4位验证码"}],contactEmail:[{required:!0,message:"请输入联系人邮箱"},{max:50,message:"联系人邮箱不能超过50个字符"},{type:"email",message:"请输入正确的邮箱格式"}]})}),define("ai/page/market/provider/register/pages/ContactInfo/ContactInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ContactInfo.tpl","san-xui","./rules","lodash"],function(exports,module,e,t,a,i,n,r,s,o){var l=i["default"](a),u=i["default"](n),d=i["default"](s),c=i["default"](o);module.exports=l["default"]({template:u["default"],components:{"xui-form":r.Form,"xui-item":r.FormItem,"xui-textbox":r.TextBox,"xui-button":r.Button},initData:function(){return{providerId:"",ifEdit:!1,draftMethod:"",draftSaveMethod:"",rules:d["default"],data:{businessContact:"",contactPhone:"",verifyCode:"",contactEmail:""},verifyCodeLeft:0,errors:null}},computed:{verifyCodeBtnDisabled:function(){return this.data.get("verifyCodeLeft")>0||!this.data.get("data.contactPhone").match(/^\d{11}$/)},verifyCodeBtnText:function(){var e=this.data.get("verifyCodeLeft");return e>0?"获取验证码（"+e+"）":"获取验证码"},postData:function(){var e=this.data.get("data");return c["default"].assign({},e)}},created:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.fetchDraft());case 2:this.saveCache();case 3:case"end":return e.stop()}},null,this)},detached:function(){window.clearInterval(this.timer)},methodHook:{hasChanged:function(){return this.$get("lastCacheData")!==JSON.stringify(this.$get("postData"))},saveCache:function(){this.$set("lastCacheData",JSON.stringify(this.$get("postData")))},fetchDraft:function(){var a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.$get("providerId")){n.next=2;break}return n.abrupt("return");case 2:return a=this.$get("draftMethod"),n.next=5,t["default"].awrap(this.ajax[a]({providerId:this.$get("providerId")}));case 5:if(i=n.sent){n.next=8;break}return n.abrupt("return");case 8:this.$set("data",e["default"]({},i,{verifyCode:""}));case 9:case"end":return n.stop()}},null,this)},saveDraft:function(){var t=this,a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],i=this.$get("draftSaveMethod");return this.ajax[i](e["default"]({},this.$get("postData"),a),{"x-silent":!0}).then(function(){t.saveCache()})},sendVerifyCode:function(){var e=this;this.ajax.sendMarketVefiryCode({contactPhone:this.$get("data.contactPhone")}),this.$toast("发送成功"),window.clearInterval(this.timer),this.$set("verifyCodeLeft",60),this.timer=window.setInterval(function(){var t=e.$get("verifyCodeLeft");t<=0&&window.clearInterval(e.timer),e.$set("verifyCodeLeft",t-1)},1e3)},validate:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.ref("form").validateForm());case 2:return e.abrupt("return",this.$get("postData"));case 3:case"end":return e.stop()}},null,this)},setError:function(e){this.$set("errors",e)}}})}),define("ai/page/market/provider/register/pages/ContactInfo/ContactInfo.tpl",[],function(){return'<div class="contract-info">\n    <xui-toastlabel s-if="ifEdit" style="margin: 10px 0;" level="alert">联系信息修改不需要再次审核，确认后即可更新完成。</xui-toastlabel>\n    <div class="section">\n        <h3 class="section-title">联系信息</h3>\n        <xui-form s-ref="form" rules="{{rules}}" formData="{{data}}" errors="{=errors=}">\n            <xui-item name="businessContact" label="商务联系人" help="AI市场会与商务联系人沟通商务合作、入驻审核反馈、服务商权益责任等重要事宜">\n                <xui-textbox value="{=data.businessContact=}" width="550" placeholder="请输入联系人姓名" />\n            </xui-item>\n            <xui-item name="contactPhone" label="联系人手机号">\n                <xui-textbox value="{=data.contactPhone=}" width="360" placeholder="请输入11位手机号码" />\n                <xui-button on-click="sendVerifyCode" skin="primary" disabled="{{verifyCodeBtnDisabled}}" skin="primary" style="margin-left: 10px;">{{verifyCodeBtnText}}</xui-button>\n            </xui-item>\n            <xui-item name="verifyCode" label=" " class="verify-code-row">\n                <xui-textbox value="{=data.verifyCode=}" width="180" placeholder="请输入短信验证码" />\n            </xui-item>\n            <xui-item name="contactEmail" label="联系人邮箱">\n                <xui-textbox value="{=data.contactEmail=}" width="550" placeholder="请输入企业邮箱地址" />\n            </xui-item>\n        </xui-form>\n    </div>\n</div>\n'}),define("ai/page/market/provider/register/pages/ContactInfo/index",["exports","module","./ContactInfo","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/register/pages/ContactInfo/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){a["default"](t);module.exports=new e["default"]({businessContact:[{required:!0,message:"请填写商务联系人"},{max:30,message:"商务联系人不能超过30个字符"}],contactPhone:[{required:!0,message:"请填写联系人手机号"},{pattern:/^\d{11}$/,message:"请填写正确的联系人手机号"}],verifyCode:[{required:!0,message:"请填写验证码"},{length:4,message:"请填写4位验证码"}],contactEmail:[{required:!0,message:"请输入联系人邮箱"},{max:50,message:"联系人邮箱不能超过50个字符"},{type:"email",message:"请输入正确的邮箱格式"}]})}),define("ai/page/market/provider/register/pages/ProviderInfo/index",["exports","module","./ProviderInfo","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/register/pages/ProviderInfo/ProviderInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ProviderInfo.tpl","san-xui","./rules","lodash","ai/components/ImageUploader2","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=n["default"](i),p=n["default"](r),f=n["default"](o),m=n["default"](l),h=n["default"](u);module.exports=c["default"]({template:p["default"],components:{"xui-form":s.Form,"xui-item":s.FormItem,"xui-textbox":s.TextBox,"xui-button":s.Button,"xui-radiobox":s.RadioBox,"xui-tip":s.Tip,"image-uploader2":h["default"],"xui-select":s.Select},initData:function(){return{feedback:[],providerId:"",ifEdit:!1,draftMethod:"",draftSaveMethod:"",uploadUrl:"/api/ai/market/common/licenseUpload",ProviderQualificationStatus:d.ProviderQualificationStatus,qualificationStatus:d.ProviderQualificationStatus.NONE,qualificationProviderName:"",data:{providerName:"",providerCapital:"",providerAddress:"",providerIndustry:"",providerScale:1,providerSite:""},errors:null,industryList:[],statusNoneMessage:"适用于企业、个体工商户、事业单位、社会团体等，通过营业执照、组织机构代码证、法人身份证等相关资质进行认证。工作时间当天认证完成，非工作时间次日完成。",providerScaleDatasource:d.MarketProviderScale.toArray()}},computed:{rules:function(){return f["default"]({})},postData:function(){var e=this.data.get("data");return m["default"].assign({},e,{providerCapital:1e4*this.data.get("data.providerCapital")})},qualificationInfo:function(){return d.ProviderQualificationStatus.fromValue(this.data.get("qualificationStatus"))},qualificationStatusFail:function(){return~[d.ProviderQualificationStatus.NONE,d.ProviderQualificationStatus.RETURN].indexOf(this.data.get("qualificationStatus"))}},created:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(a["default"].all([this.fetchIndustryList(),this.fetchDraft()]));case 2:this.$set("data.providerName",this.$get("qualificationProviderName")),this.saveCache();case 4:case"end":return e.stop()}},null,this)},methodHook:{hasChanged:function(){return this.$get("lastCacheData")!==JSON.stringify(this.$get("postData"))},saveCache:function(){this.$set("lastCacheData",JSON.stringify(this.$get("postData")))},fetchDraft:function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.$get("providerId")){i.next=2;break}return i.abrupt("return");case 2:return e=this.$get("draftMethod"),i.next=5,t["default"].awrap(this.ajax[e]({providerId:this.$get("providerId"),step:2}));case 5:if(a=i.sent){i.next=8;break}return i.abrupt("return");case 8:a.providerCapital=a.providerCapital/1e4,this.$set("data",a);case 10:case"end":return i.stop()}},null,this)},saveDraft:function(){var t=this,a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];if(this.$get("providerId")){var i=this.$get("draftSaveMethod");return this.ajax[i](e["default"]({},this.$get("postData"),a),{"x-silent":!0}).then(function(){t.saveCache()})}},fetchIndustryList:function(){return t["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ajax.getStoreIndustryList().then(function(e){return t.$set("industryList",e.map(function(e){var t=e.id;return{text:e.name,value:t}}))}));case 1:case"end":return e.stop()}},null,this)},handleProviderType:function(e){this.$set("data.providerType",e)},validate:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$get("qualificationStatusFail")){e.next=3;break}return e.next=3,t["default"].awrap(this.ref("form").validateForm());case 3:return e.abrupt("return",this.$get("postData"));case 4:case"end":return e.stop()}},null,this)},setError:function(e){this.$set("errors",e)}}})}),define("ai/page/market/provider/register/pages/ProviderInfo/ProviderInfo.tpl",[],function(){return'<div class="provider-info">\n    <div class="qualification-info">\n        <p class="qualification-result">\n            <span style="vertical-align: middle;">{{ qualificationInfo.result }}</span>\n            <xui-tip style="margin-left: 5px;" s-if="ProviderQualificationStatus.NONE === qualificationStatus" layer-width="250" message="{{ statusNoneMessage }}" position="lt"></xui-tip>\n        </p>\n        <p class="qualification-tip">{{ qualificationInfo.tip }}</p>\n\n        <template s-if="qualificationStatusFail">\n            <a href="{{Url.enterpriseQualify}}" target="_blank">快速入口>></a>\n            <div class="qualification-images">\n                <div class="license-img-wrap">\n                    <div class="license-demo license-img"></div>\n                    <span>营业执照范本</span>\n                </div>\n                <div class="license-img-wrap">\n                    <div class="organization-license-demo license-img"></div>\n                    <span>组织机构代码证范本</span>\n                </div>\n            </div>\n        </template>\n\n        <xui-form s-else s-ref="form" rules="{{rules}}" formData="{{data}}" errors="{=errors=}">\n            <xui-item name="providerName" label="企业名称：">\n                <span slot="help" style="color: #999;">企业名称由<a href="{{Url.enterpriseQualify}}" target="_blank">企业账号认证中心</a>同步，如需变更请您<a href="{{Url.ticket}}" target="_blank">提交工单</a></span>\n                <xui-textbox disabled value="{=data.providerName=}" width="400" placeholder="请完整输入企业全称" />\n            </xui-item>\n            <xui-item name="providerCapital" label="注册资本：" help="请务必与营业执照或组织机构代码证保持一致">\n                <xui-textbox value="{=data.providerCapital=}" width="180" type="number" /> 万元\n            </xui-item>\n            <xui-item name="providerAddress" label="企业地址：" help="请务必与营业执照或组织机构代码证保持一致">\n                <xui-textbox value="{=data.providerAddress=}" width="400" placeholder="请输入企业具体地址" />\n            </xui-item>\n            <xui-item name="providerIndustry" label="所属行业：">\n                <xui-select value="{=data.providerIndustry=}" width="90" datasource="{{industryList}}" />\n            </xui-item>\n            <xui-item name="providerScale" label="企业规模：">\n                <xui-select value="{=data.providerScale=}" width="90" datasource="{{providerScaleDatasource}}" />\n            </xui-item>\n            <xui-item name="providerSite" label=" ">\n                <div slot="label">\n                    <span>企业网站：</span><br>\n                    <span>（选填）</span>\n                </div>\n                <xui-textbox value="{=data.providerSite=}" width="400" placeholder="请输入企业网站地址" />\n            </xui-item>\n        </xui-form>\n    </div>\n</div>\n'}),define("ai/page/market/provider/register/pages/ProviderInfo/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=function(){return new e["default"]({providerName:[{required:!0,message:"请输入企业名称"},{max:100,message:"名称不能超过100个字符"}],providerCapital:[{required:!0,message:"请输入注册资本"},{validator:function(e,t,a){(t=+t)>21e4?a("您的注册资本过大，请提交工单咨询，谢谢！"):t>0?a():a("请输入正确的注册资本")}}],providerAddress:[{required:!0,message:"请输入地址"},{max:100,message:"地址不能超过100个字符"}],providerIndustry:[{required:!0,message:"请选择所属行业"}],providerScale:[{required:!0,message:"请输入规模"},{validator:function(e,t,a){(t=+t)>=1&&t<=1e8?a():a("请输入正确的规模")}}]})}}),define("ai/page/market/provider/register/pages/ResultInfo/index",["exports","module","./ResultInfo","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/register/pages/ResultInfo/ResultInfo",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ResultInfo.tpl","san-xui","ai/common/util","ai/common/enums","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](n),c=i["default"](l);module.exports=u["default"]({template:d["default"],components:{"xui-button":r.Button},initData:function(){return{draftCount:0,feedback:[]}},computed:{ifReviewing:function(){return this.data.get("marketUserInfo.providerStatus")===o.StoreProviderStatus.REVIEWING}},attached:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.fetchUserInfo());case 2:case"end":return t.stop()}},null,this)},created:function(){this.fetchReview(),this.getDraftCount()},methodHook:{fetchUserInfo:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e["default"].awrap(s.getAsyncTuple(this.ajax.getStoreUserInfo()));case 2:if(t=n.sent,a=t[0],i=t[1],!a){n.next=8;break}return this.$set("loadingMarketUserInfo",!1),n.abrupt("return");case 8:this.$set("marketUserInfo",i),this.$set("loadingMarketUserInfo",!1);case 10:case"end":return n.stop()}},null,this)},fetchReview:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=[],a=this.$get("marketUserInfo.providerFinalStatus"),~[o.MarketProviderFinalStatus.REVIEW,o.MarketProviderFinalStatus.SUCCESS,o.MarketProviderFinalStatus.UPDATE_REVIEW,o.MarketProviderFinalStatus.UPDATE_SUCCESS].indexOf(a)){s.next=7;break}return s.next=5,e["default"].awrap(this.ajax.getMarketProviderReviewInfo());case 5:(i=s.sent).opinion&&t.push.apply(t,String(i.opinion).split("\n"));case 7:if(n=this.$get("marketUserInfo.shopFinalStatus"),~[o.MarketShopFinalStatus.REVIEW,o.MarketShopFinalStatus.SUCCESS,o.MarketShopFinalStatus.UPDATE_REVIEW,o.MarketShopFinalStatus.UPDATE_SUCCESS].indexOf(n)){s.next=13;break}return s.next=11,e["default"].awrap(this.ajax.getStoreShopReviewInfo());case 11:(r=s.sent).opinion&&t.push.apply(t,String(r.opinion).split("\n"));case 13:this.$set("feedback",t);case 14:case"end":return s.stop()}},null,this)},goToPublish:function(){this.$aiRedirect("product/publish")},showAlert:c["default"].throttle(function(){this.$get("draftCount")>=5&&this.$toast("未通过审核最多只能有5份商品草稿",{messageType:"error"})},8e3,{trailing:!1}),reApply:function(){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(t["default"].all([this.ajax.revertMarketShopStatus(),this.ajax.revertMarketProviderStatus({providerId:this.$get("providerId")})]));case 2:this.$reload();case 3:case"end":return a.stop()}},null,this)},getDraftCount:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.$get("marketUserInfo.providerStatus")===o.StoreProviderStatus.REVIEWING){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,e["default"].awrap(this.ajax.getMarketProductDraftCount());case 5:t=a.sent,this.$set("draftCount",t.count);case 7:case"end":return a.stop()}},null,this)}}})}),define("ai/page/market/provider/register/pages/ResultInfo/ResultInfo.tpl",[],function(){return'<div class="result-info">\n    <template s-if="ifReviewing">\n        <h4 class="success">提交成功！请等待审核……</h4>\n        <div class="tip-wrap">\n            <div class="tip-line">1、审核结果将在一个工作日内以短信、邮件方式通知给您；</div>\n            <div class="tip-line">2、审核通过后，您还需完成协议线下签署，查看<a href="{{Url.store.enterContract}}" target="_blank">签署流程</a>；</div>\n            <div class="tip-line">3、请尽快创建商品，让商机与客户找到您。</div>\n        </div>\n        <a class="create-product-btn" href="javascript:void(0);" on-mouseenter="showAlert">\n            <xui-button disabled="{{draftCount>=5}}" on-click="goToPublish" size="large" skin="primary">创建商品</xui-button>\n        </a>\n    </template>\n    \x3c!-- 除了reviewing，就只有failed --\x3e\n    <template s-else>\n        <h4 class="failed">抱歉，您的入驻申请未通过审核</h4>\n        <div class="err-tip-wrap">\n            <div class="tip-line">未通过原因：</div>\n            <div s-if="feedback&&feedback.length" s-for="item,index in feedback" class="tip-line">{{index+1}}. {{item}}</div>\n        </div>\n        <a class="err-btn" href="javascript:void(0);" on-click="reApply">重新申请</a>\n    </template>\n</div>\n'}),define("ai/page/market/provider/register/pages/ShopInfo/Case/case",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./case.tpl","san-xui","lodash","./rules","ai/components/ImageCropper/index","ai/components/FileUploadList/index","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](r),f=a["default"](s),m=a["default"](o),h=a["default"](l),g={serverUrl:"/api/ai/s/common/editorUpload",autoHeightEnabled:!0,enableAutoSave:!1,toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom"],["lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","|"],["imagenone","imageleft","imageright","imagecenter","|","simpleupload","|","horizontal","date","time","spechars","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview"]]};module.exports=d["default"]({template:c["default"],components:{"xui-button":n.Button,"xui-form":n.Form,"xui-item":n.FormItem,"xui-textbox":n.TextBox,"xui-radiobox":n.RadioBox,"xui-select":n.Select,"xui-richtexteditor":n.RichTextEditor,"file-upload-list":h["default"],"image-cropper":m["default"]},initData:function(){return{CaseDetailType:u.CaseDetailType,data:{},editorOptions:g,relatedProductList:[],ifUploadFile:!0,caseFileList:[],fileList:{options:{url:"/api/ai/market/common/fileUpload",options:{compress:!1,accept:{title:"Files",extensions:"pdf,doc,docx",mimeTypes:"\n                                application/pdf,\n                                application/msword,\n                                application/vnd.openxmlformats-officedocument.wordprocessingml.document"}},events:{uploadBeforeSend:function(e,t,a){p["default"].extend(t,{fileType:e.file.ext,isOnlineRead:1})}}},des:["文件大小：不超过10Mb","文件格式：pdf、doc",'<a target="__blank" href="https://bj.bcebos.com/v1/issue-luigi/%E4%BC%98%E7%A7%80%E6%A1%88%E4%BE%8B-20190718175555-giyxog.pdf">下载优秀模板</a>']},caseImageCropper:{url:"/api/ai/market/common/imageUploadBase64",extData:{rel:"case"},des:["图片尺寸：295*168px以上","图片大小：建议大于80Kb且小于3Mb","图片格式：jpg、png"],sizeLimit:{min:81920,minLabel:"80Kb",max:3145728,maxLabel:"3Mb"},lengthLimit:{width:295,height:168}},image:null,loading:!0,relatedProduct:[]}},computed:{rules:function(){return f["default"]({data:this.data.get("data")})},realErrors:function(){var e=this,t=this.data.get("errors");if(p["default"].isEmpty(t))return null;var a={};return p["default"].keys(t).filter(function(t){return~t.indexOf("shopCases_"+e.data.get("index"))}).forEach(function(e){a[e.split("_")[2]]=t[e]}),a},classForFieldError:function(){var e="ui-form-item-shopCases_"+this.data.get("index")+"_",t={};return["title","summary","detail"].forEach(function(a){t[a]=e+a}),t},seletedRelatedProductList:function(){var e=this,t=this.data.get("relatedProduct")||[],a=this.data.get("shopProductList")||[];return t.reduce(function(t,i){var n=p["default"].find(a,function(e){return e.productId===+i});if(!n)return t;var r='\n                    <a target="__blank" href="'+e.data.get("Url.store.product")+"/"+n.productUuid+'">\n                        '+n.productName+"\n                    </a>;\n                ",s="<span>"+n.productName+"</span>;";return t+=n.isOnline?r:s},"")},shopProductDatasource:function(){return this.data.get("shopProductList").map(function(e){return{text:e.productName,value:String(e.productId)}})},showRelatedProduct:function(){return this.data.get("shopProductList")&&this.data.get("shopProductList").length}},created:function(){var t;return e["default"].async(function(e){for(var a=this;;)switch(e.prev=e.next){case 0:(t=this.$get("data")).documentUrl&&this.$set("caseFileList",[{fileLink:t.documentUrl,fileName:t.fileName}]),t.imageUrl&&this.$set("image",{id:t.image,url:t.imageUrl}),setTimeout(function(){a.$set("loading",!1)},500),this.$set("relatedProduct",t.relatedProduct.map(function(e){return String(e)})),this.watch("relatedProduct",function(e){a.$set("data.relatedProduct",e.map(function(e){return+e}))});case 6:case"end":return e.stop()}},null,this)},methodHook:{changeCaseDetailMode:function(e){this.$set("data.detailType",e)},removeCase:function(){this.fire("remove",this.$get("index"))},changeCaseImage:function(e){this.$set("image",e),e?this.$$set({"data.image":e.id,"data.imageUrl":e.url}):this.$$set({"data.image":"","data.imageUrl":""})},changeCaseFile:function(e){if(e.length>0){var t=e[0];this.$$set({"data.documentUrl":t.fileLink,"data.fileName":t.fileName,"data.objectId":t.objectId,"data.documentId":t.documentId,"data.documentStatus":t.documentStatus,"data.token":t.token})}else this.$$set({"data.documentUrl":"","data.fileName":"","data.objectId":"","data.documentId":"","data.documentStatus":"","data.token":""})}}})}),define("ai/page/market/provider/register/pages/ShopInfo/Case/case.tpl",[],function(){return'<div class="case">\n    <h4 class="case-title">案例 {{index + 1}}<xui-button class="case-remove-button" on-click="removeCase">删除</xui-button></h4>\n    <xui-form s-ref="form" formData="{{data}}" rules="{{rules}}" errors="{{realErrors}}">\n        <xui-item label="案例名称：" name="title" class="{{classForFieldError.title}}">\n            <xui-textbox width="{{590}}" placeholder="请输入案例名称，20字内；例如\b：UNIT助力KFC开启智能点餐体验" value="{=data.title=}" />\n        </xui-item>\n        <xui-item label="案例头图：" name="image">\n            <p class="help">请上传客户高清LOGO图片，将展示于您店铺页的案例部分</p>\n            <image-cropper\n                url="{{caseImageCropper.url}}"\n                image="{{image}}"\n                des="{{caseImageCropper.des}}"\n                extData="{{caseImageCropper.extData}}"\n                sizeLimit="{{caseImageCropper.sizeLimit}}"\n                lengthLimit="{{caseImageCropper.lengthLimit}}"\n                on-change="changeCaseImage($event)"\n            />\n        </xui-item>\n        <xui-item label=" " name="relatedProduct" s-if="showRelatedProduct">\n            <div slot="label">\n                <span>关联商品：</span><br>\n                <span>（选填）</span>\n            </div>\n            <xui-select\n                multi\n                filter\n                filter-placeholder="请输入商品名称进行搜索"\n                layer-width="248"\n                value="{=relatedProduct=}"\n                datasource="{{shopProductDatasource}}" />\n            <span class="case-product help">关联商品后，案例将展示在商品页面；若无商品，<a href="#/ai/market/product/publish" target="_blank">快去创建</a></span>\n            <div class="product-list" s-if="seletedRelatedProductList">\n                <span>已关联：</span>\n                <span s-html="seletedRelatedProductList"></span>\n            </div>\n        </xui-item>\n        <xui-item label="案例简介：" name="summary" class="{{classForFieldError.summary}}">\n            <xui-textbox\n                value="{=data.summary=}"\n                width="590"\n                multiline="{{true}}"\n                limit-length="150"\n                placeholder="请简单介绍成功客户案例的关键信息，建议100-150字。例如：2019年X月，XX公司通过使用我司XXX产品，落地于XXXX场景，实现XXX效果，XX指标从X%升至/降至 X%。" />\n        </xui-item>\n        <xui-item s-if="data.isOfficialCase" label="案例详情：" name="url">\n            <xui-textbox width="{{590}}" value="{=data.url=}" disabled />\n        </xui-item>\n        <xui-item s-else label="案例详情：" name="detail" class="{{classForFieldError.detail}}">\n            <p class="detail-help">\n                建议您从如下几个方面详细介绍您的案例：<br>1、客户核心诉求；<br>2、产品交付与落地过程（建议配合流程图讲解，图片大小建议：不超过720*540）；<br>\n                3、落地效果（建议配合图片讲解，图片大小建议：不超过720*540）。<br>字数要求300字以上，描述清晰生动。\n            </p>\n            <xui-radiobox name="detailType" checked="{{data.detailType===CaseDetailType.DOC}}" on-change="changeCaseDetailMode(CaseDetailType.DOC)" title="上传案例资料"></xui-radiobox>\n            <file-upload-list s-if="data.detailType===CaseDetailType.DOC" on-change="changeCaseFile($event)" list="{=caseFileList=}" options="{{fileList.options}}" max="{{1}}" des="{{fileList.des}}" />\n            <br />\n\n            <xui-radiobox name="detailType" checked="{{data.detailType===CaseDetailType.TXT}}" on-change="changeCaseDetailMode(CaseDetailType.TXT)" title="撰写案例详情"></xui-radiobox>\n            <xui-richtexteditor s-if="data.detailType===CaseDetailType.TXT && !loading" class="case-detail-editor" s-ref="editor" width="700" value="{=data.detail=}" options="{{editorOptions}}"></xui-richtexteditor>\n            <br />\n        </xui-item>\n    </xui-form>\n</div>\n'}),define("ai/page/market/provider/register/pages/ShopInfo/Case/rules",["exports","module","async-validator","ai/common/enums","jquery","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i){var n=i["default"](a);module.exports=function(a){return new e["default"]({title:[{required:!0,message:"请填写案例名称"},{max:20,message:"最多只能输入20个字符"}],image:[{required:!0,message:"请上传案例头图"}],summary:[{required:!0,message:"请填写案例简介"},{max:150,message:"最多只能输入150个字符"}],detail:[{validator:function(e,i,r){if(a.data.isOfficialCase)r();else{var s=a.data,o=s.detail,l=s.detailType,u=s.documentUrl;if(l!==t.CaseDetailType.DOC||u){if(l===t.CaseDetailType.TXT){if(!o)return void r("请填写案例详情");var d=n["default"](o).text();if(d&&d.length<300)return void r("不能少于300个字符");if(o.length>1e6)return void r("不能超过1000000字符")}r()}else r("请上传案例文件")}}}]})}}),define("ai/page/market/provider/register/pages/ShopInfo/index",["exports","module","./ShopInfo","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/provider/register/pages/ShopInfo/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=function(t){return{basic:new e["default"]({productType:[{required:!0,message:"请选择店铺经营品类"}],shopAbility:[{required:!0,message:"请选择经营商品涉及AI能力"}],shopLogo:[{required:!0,message:"请上传店铺Logo"}],shopSummary:[{required:!0,message:"请填写店铺简介"},{max:120,message:"最多只能输入120个字符"}]}),service:new e["default"]({serviceEmail:[{required:!0,message:"请填写客服邮箱"},{max:100,message:"最多只能输入100个字符"},{type:"email",message:"请填写正确的邮箱"}],transferList:[{validator:function(e,a,i){t.hasTransferInfo?i():i("未绑定客服信息")}}]})}}}),define("ai/page/market/provider/register/pages/ShopInfo/ShopInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ShopInfo.tpl","san-xui","./rules","lodash","ai/common/enums","ai/page/market/product/publish/LabelSelect","ai/components/ImageCropper/index","ai/page/market/shop/hotline/index","./Case/case"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=n["default"](i),h=n["default"](r),g=n["default"](o),v=n["default"](l),x=n["default"](d),b=n["default"](c),y=n["default"](p),k=n["default"](f);module.exports=m["default"]({template:h["default"],components:{"xui-button":s.Button,"xui-tip":s.Tip,"xui-form":s.Form,"xui-item":s.FormItem,"xui-textbox":s.TextBox,"xui-radiobox":s.RadioBox,"xui-select":s.Select,"xui-boxgroup":s.BoxGroup,"label-select":x["default"],"image-cropper":b["default"],hotline:y["default"],"shop-case":k["default"]},filters:{getLabelByValues:function(e,t){return e.map(function(e){var a=v["default"].find(t,function(t){return t.value===e});return a?a.text:""}).filter(function(e){return e.length}).join("、")},getChNum:function(e){return["一","二","三"][e]||""}},initData:function(){return{feedback:[],providerId:"",ifEdit:!1,draftMethod:"",draftSaveMethod:"",MAX_CASE_COUNT:10,verifyCodeLeft:0,ServiceTime:u.ServiceTime,serviceRangeList:Array.apply(null,{length:24}).map(function(e,t){return{value:t+":00",text:t+":00"}}),errors:{basic:null,service:null,shopCases:null},data:{shopId:"",productType:[],shopAbility:[],baiduAI:1,shopLogo:"",shopLogoUrl:"",shopSummary:"",serviceEmail:"",servicePhone:"",serviceRange:{st:"9:00",et:"18:00"},serviceTime:u.ServiceTime.WeekDay,shopCases:[],hotline:"",transferList:[]},shopProductList:[],productTypeList:u.MarketProductType.toArray(),baiduAIDatasource:[{text:"是",value:1},{text:"否",value:0}],abilityList:[],imageCropper:{url:"/api/ai/market/common/imageUploadBase64",extData:{rel:"shop"},des:["logo 会用于首页和店铺页展示","图片尺寸：大于180*135px","图片大小：建议大于50Kb且小于10Mb","图片格式：jpg、png"],sizeLimit:{min:0,minLabel:"0Kb",max:10485760,maxLabel:"10Mb"},lengthLimit:{width:180,height:135}},hotlineTransferInfoOpen:!1}},computed:{rules:function(){return g["default"]({hasTransferInfo:this.data.get("hasTransferInfo")})},hasTransferInfo:function(){return this.data.get("data.transferList").some(function(e){return e.transferName&&e.transferTel})},hotlineData:function(){if(!this.data.get("data.hotline"))return{};var e=this.data.get("data");return{hotline:e.hotline,servicePhone:e.servicePhone,transferList:e.transferList}},canAddCase:function(){return this.data.get("data.shopCases").length<this.data.get("MAX_CASE_COUNT")},shopLogoImage:function(){return this.data.get("data.shopLogo")?{url:this.data.get("data.shopLogoUrl"),id:this.data.get("data.shopLogo")}:null},verifyCodeBtnDisabled:function(){return this.data.get("verifyCodeLeft")>0||!this.data.get("data.servicePhone").match(/^\d{11}$/)},verifyCodeBtnText:function(){var e=this.data.get("verifyCodeLeft");return e>0?"获取验证码（"+e+"）":"获取验证码"},postData:function(){var e=v["default"].cloneDeep(this.data.get("data"));return Array.isArray(e.shopCases)&&e.shopCases.forEach(function(e){e.detailType===u.CaseDetailType.TXT?(e.documentUrl="",e.fileName="",e.objectId="",e.documentId="",e.documentStatus="",e.token=""):e.detail=""}),v["default"].assign({},e)}},created:function(){var e;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.fetchAbilityList());case 2:return i.next=4,t["default"].awrap(a["default"].all([this.fetchDraft(),this.fetchReview(),this.fetchShopProduct()]));case 4:if(this.$get("marketUserInfo.shopFinalStatus")===u.MarketShopFinalStatus.SUCCESS||this.$get("data.hotline")){i.next=10;break}return""!==(e=this.$get("data.servicePhone"))&&this.$set("transferList",[{transferName:"",transferTel:e}]),i.next=10,t["default"].awrap(this.fetchHotline());case 10:this.saveCache();case 11:case"end":return i.stop()}},null,this)},detached:function(){window.clearInterval(this.timer)},methodHook:{hasChanged:function(){return this.$get("lastCacheData")!==JSON.stringify(this.$get("postData"))},saveCache:function(){this.$set("lastCacheData",JSON.stringify(this.$get("postData")))},fetchShopProduct:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.$get("providerId")){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t["default"].awrap(this.ajax.getMarketShopRelatedProduct({providerId:this.$get("providerId")}));case 4:e=a.sent,this.$set("shopProductList",e);case 6:case"end":return a.stop()}},null,this)},fetchReview:function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.$get("marketUserInfo.shopFinalStatus"),!~[u.MarketShopFinalStatus.REVIEW,u.MarketShopFinalStatus.SUCCESS,u.MarketShopFinalStatus.UPDATE_REVIEW,u.MarketShopFinalStatus.UPDATE_SUCCESS].indexOf(e)){i.next=3;break}return i.abrupt("return");case 3:if(this.$get("marketUserInfo.shopId")){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,t["default"].awrap(this.ajax.getStoreShopReviewInfo());case 8:(a=i.sent).opinion&&this.$set("feedback",String(a.opinion).split("\n"));case 10:case"end":return i.stop()}},null,this)},fetchDraft:function(){var a,i,n,r;return t["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.$get("providerId")){s.next=2;break}return s.abrupt("return");case 2:return a=this.$get("draftMethod"),s.next=5,t["default"].awrap(this.ajax[a]({providerId:this.$get("providerId")}));case 5:if(i=s.sent){s.next=8;break}return s.abrupt("return");case 8:n=this.$get("abilityList"),this.$set("abilityList",n.map(function(t){return e["default"]({},t,{added:v["default"].includes(i.shopAbility,t.value)})})),r=v["default"].cloneDeep(this.$get("data")),this.$set("data",e["default"]({},r,i));case 12:case"end":return s.stop()}},null,this)},fetchHotline:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getMarketShopHotline());case 2:e=a.sent,this.$$set({"data.hotline":e.hotline,"data.servicePhone":e.servicePhone});case 4:case"end":return a.stop()}},null,this)},saveDraft:function(){var t=this,a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],i=this.$get("draftSaveMethod");return this.ajax[i](e["default"]({},this.$get("postData"),a),{"x-silent":!0}).then(function(){t.saveCache()})},openHotlineTransferInfoDialog:function(){this.$set("hotlineTransferInfoOpen",!0)},fetchAbilityList:function(){var e=this;return this.ajax.getMarketAbility().then(function(t){return e.$set("abilityList",t.map(function(e){var t=e.id;return{text:e.name,value:t}}))})},handleShopLogoChange:function(e){e?(this.$set("data.shopLogo",e.id),this.$set("data.shopLogoUrl",e.url)):(this.$set("data.shopLogo",""),this.$set("data.shopLogoUrl",""))},changeServiceTime:function(e){this.$set("data.serviceTime",e)},addCase:function(){this.data.push("data.shopCases",{title:"",image:"",imageUrl:"",summary:"",detailType:u.CaseDetailType.DOC,relatedProduct:[],detail:"",documentUrl:"",fileName:"",objectId:"",documentId:"",documentStatus:"",token:"",caseUuid:""})},removeCase:function(e){var t=this;this.$confirm({title:"删除提示",content:"请确定是否要删除当前案例内容"}).then(function(){t.data.removeAt("data.shopCases",e)})},validate:function(){var e;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return e=this.$get("data.shopCases").map(function(e,t){return n.ref("shopCase"+t)}),i.next=3,t["default"].awrap(a["default"].all([this.ref("basicForm").validateForm(),this.ref("serviceForm").validateForm()].concat(e.map(function(e){return e.ref("form").validateForm()}))));case 3:return i.abrupt("return",this.$get("postData"));case 4:case"end":return i.stop()}},null,this)},setError:function(e){var t=this;v["default"].keys(e||{})[0]&&v["default"].keys(this.$get("errors")).forEach(function(a){t.$set("errors."+a,e)})}}})}),define("ai/page/market/provider/register/pages/ShopInfo/ShopInfo.tpl",[],function(){return'<div class="shop-info">\n    <xui-toastlabel s-if="feedback.length" level="error" style="margin: 20px 0;">\n        <p>审核反馈：</p>\n        <p>\n            <template s-for=\'line, index in feedback\'>\n                <br s-if="index !== 0">\n                {{line}}\n            </template>\n        </p>\n    </xui-toastlabel>\n    <div class="section">\n        <h3 class="section-title">基本信息</h3>\n        <xui-form s-ref="basicForm" rules="{{rules.basic}}" formData="{{data}}" errors="{=errors.basic=}">\n            <xui-item name="productType" label="店铺经营品类：">\n                <xui-boxgroup disabled="{{ifEdit}}" value="{=data.productType=}" datasource="{{productTypeList}}" box-type="checkbox" />\n            </xui-item>\n            <xui-item name="shopAbility" label="经营商品涉及AI能力：">\n                <label-select s-if="!ifEdit" value="{=data.shopAbility=}" title="经营商品涉及AI能力" datasource="{{abilityList}}"></label-select>\n                <div s-else>{{ data.shopAbility | getLabelByValues(abilityList) }}</div>\n            </xui-item>\n            <xui-item name="baiduAI" label="是否应用百度AI能力：">\n                <xui-boxgroup disabled="{{ifEdit}}" box-type="radio" datasource="{{baiduAIDatasource}}" value="{=data.baiduAI=}" />\n            </xui-item>\n            <xui-item name="shopLogo" label="店铺Logo：">\n                <image-cropper\n                    url="{{imageCropper.url}}"\n                    image="{{shopLogoImage}}"\n                    des="{{imageCropper.des}}"\n                    extData="{{imageCropper.extData}}"\n                    sizeLimit="{{imageCropper.sizeLimit}}"\n                    lengthLimit="{{imageCropper.lengthLimit}}"\n                    on-change="handleShopLogoChange"\n                />\n            </xui-item>\n            <xui-item name="shopSummary" label="店铺简介：">\n                <xui-textbox value="{=data.shopSummary=}" width="590" multiline="{{true}}" limit-length="120" />\n            </xui-item>\n        </xui-form>\n    </div>\n    <div class="section" style="margin-top: 20px;">\n        <h3 class="section-title">客服信息</h3>\n        <xui-toastlabel class="service-toast-label" level="normal">\n            1、AI市场免费为服务商提供400热线电话，店铺审核通过即可自动绑定，并短信通知客服绑定结果；<br />\n            2、绑定成功后将展示在您的商品页/店铺页中，方便您及时响应客户咨询。\n        </xui-toastlabel>\n        <xui-form s-ref="serviceForm"  rules="{{rules.service}}" formData="{{data}}" errors="{=errors.service=}">\n            <xui-item s-if="data.hotline" label="店铺400热线：" name="hotline">\n                <span>{{ data.hotline + \' 转 \' + data.servicePhone }}</span>\n            </xui-item>\n            <xui-item s-for="item, index in data.transferList" label="第{{ index | getChNum }}客服：">\n                {{ item.transferName + \' \' + item.transferTel }}\n            </xui-item>\n            <xui-item s-if="hasTransferInfo" label=" ">\n                <a class="modify-transfer-info" href="javascript:void(0);" on-click="openHotlineTransferInfoDialog">修改客服信息</a>\n            </xui-item>\n            <xui-item s-else label="客服信息：" name="transferList">\n                <xui-button on-click="openHotlineTransferInfoDialog" icon="plus">绑定客服信息</xui-button>\n            </xui-item>\n\n            <xui-item name="serviceEmail" label="客服邮箱：">\n                <xui-textbox value="{=data.serviceEmail=}" width="360" placeholder="请输入客服的电子邮箱地址" />\n            </xui-item>\n            <xui-item s-if="!data.hotline && data.servicePhone" label="客服手机号：">\n                <span>{{ data.servicePhone }}</span>\x3c!--\n                --\x3e<a style="margin-left: 10px;" href="javascript:void(0);" on-click="openHotlineTransferInfoDialog">绑定400热线</a>\n            </xui-item>\n            <xui-item label="服务时间：" name="serviceTime">\n                <div class="service-time-row">\n                    <xui-radiobox checked="{{data.serviceTime === ServiceTime.WeekDay}}" name="serviceTime" title="工作日" on-change="changeServiceTime(ServiceTime.WeekDay)"></xui-radiobox>\n                    &#8195;\n                    <xui-select datasource="{{serviceRangeList}}" value="{=data.serviceRange.st=}" disabled="{{data.serviceTime !== ServiceTime.WeekDay}}" />\n                    &#8195;至&#8195;\n                    <xui-select datasource="{{serviceRangeList}}" value="{=data.serviceRange.et=}" disabled="{{data.serviceTime !== ServiceTime.WeekDay}}" />\n                </div>\n                <div class="service-time-row">\n                    <xui-radiobox checked="{{data.serviceTime === ServiceTime.AllYear}}" name="serviceTime" title="全年无休" on-change="changeServiceTime(ServiceTime.AllYear)"></xui-radiobox>\n                </div>\n            </xui-item>\n        </xui-form>\n    </div>\n    <div class="section" style="margin-top: 20px;">\n        <h3 class="section-title">成功案例（选填）</h3>\n        <span class="error case-error">{{casesError}}</span>\n        <shop-case \n            s-ref="{{\'shopCase\'+index}}"\n            s-for="item, index in data.shopCases"\n            errors="{=errors.shopCases=}"\n            data="{=item=}"\n            index="{{index}}"\n            shopProductList="{{shopProductList}}"\n            on-remove="removeCase(index)">\n        </shop-case>\n        <div class="add-case" s-if="canAddCase">\n            <xui-button skin="primary" icon="plus" on-click="addCase">新增案例</xui-button>\n            &#8195;87%的客户更愿意选择有丰富案例的公司\n        </div>\n    </div>\n    <hotline\n        s-if="hotlineTransferInfoOpen"\n        open="{=hotlineTransferInfoOpen=}"\n        providerId="{{providerId}}"\n        data="{{hotlineData}}"\n        syncData="{=data=}">\n    </hotline>\n</div>\n'}),define("ai/page/market/provider/register/register",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./register.tpl","ai/common/enums","san-xui","ai/common/util","../config","ai/components/PagerHeader/index","./pages/ContactDialog/index","lodash","jquery"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=a["default"](t),f=a["default"](i),m=a["default"](l),h=a["default"](u),g=a["default"](d),v=a["default"](c);module.exports=p["default"]({template:f["default"],components:{"view-step":r.ViewStep,"pager-header":m["default"],"contact-dialog":h["default"]},initData:function(){return{loading:!0,breadItem:[{title:"服务商入驻"}],currentStep:0,steps:[{text:"企业信息"},{text:"店铺信息"},{text:"提交申请"}],agreeProtocal:!1,showContactDialog:!1,contactDialogMode:0,qualificationStatus:"",qualificationProviderName:""}},computed:{qualificationStatusFail:function(){return~[n.ProviderQualificationStatus.NONE,n.ProviderQualificationStatus.RETURN].indexOf(this.data.get("qualificationStatus"))}},inited:function(){this.on("getStoreUserInfo",this.initialize)},attached:function(){var e=this;window.onbeforeunload=function(t){e.hasChanged()&&(t.returnValue="离开此页后，所填写的内容将不会保存\n确认要离开当前页面吗？")}},detached:function(){this.clearDraftTimer(),window.onbeforeunload=null},methodHook:{hasChanged:function(){return"function"==typeof this.page.hasChanged&&this.page.hasChanged()},initialize:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.fetchQualificationInfo());case 2:if(this.$set("loading",!1),this.fetchContactDraft(),!1!==this.providerStatusLogic()){t.next=6;break}return t.abrupt("return");case 6:this.startSaveDraft();case 7:case"end":return t.stop()}},null,this)},providerStatusLogic:function(){var e=this.$get("marketUserInfo.providerStatus");~[n.StoreProviderStatus.FAILED,n.StoreProviderStatus.REVIEWING].indexOf(e)&&this.$set("currentStep",2),this.renderPage(this.$get("currentStep"))},fetchQualificationInfo:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketQualificationInfo());case 2:(t=a.sent)&&(this.$set("qualificationStatus",t.status),this.$set("qualificationProviderName",t.providerName));case 4:case"end":return a.stop()}},null,this)},fetchContactDraft:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=this.$get("marketUserInfo.providerId")){i.next=4;break}return this.$set("showContactDialog",!0),i.abrupt("return");case 4:return i.next=6,e["default"].awrap(this.ajax.getMarketProviderRegisterDraftInfo1({providerId:t}));case 6:if((a=i.sent)&&!["businessContact","contactPhone","contactEmail"].some(function(e){return!a[e]})){i.next=10;break}return this.$set("showContactDialog",!0),i.abrupt("return");case 10:this.$set("showContactDialog",!1);case 11:case"end":return i.stop()}},null,this)},renderPage:function(e){this.page&&this.page.dispose(),this.$set("currentStep",e);var t=o.EnterConfig.pages[e];this.page=new t({data:{providerId:this.$get("marketUserInfo.providerId"),marketUserInfo:this.$get("marketUserInfo"),labels:this.$get("labels"),qualificationStatus:this.$get("qualificationStatus"),qualificationProviderName:this.$get("qualificationProviderName"),draftMethod:o.EnterConfig.getDraft[e],draftSaveMethod:o.EnterConfig.saveDraft[e]}}),this.page.attach(this.el.querySelector("#ai-register-wrapper")),setTimeout(function(){v["default"]("html,body").animate({scrollTop:0})},50)},preStep:function(){this.renderPage(this.$get("currentStep")-1)},nextStep:function(){var t,a,i,n,r,l;return e["default"].async(function(u){for(;;)switch(u.prev=u.next){case 0:if(1!==(t=this.$get("currentStep"))){u.next=7;break}return u.next=4,e["default"].awrap(this.fetchContactDraft());case 4:if(!this.$get("showContactDialog")){u.next=7;break}return this.$set("contactDialogMode",1),u.abrupt("return");case 7:return u.next=9,e["default"].awrap(s.getAsyncTuple(this.page.validate()));case 9:if(a=u.sent,i=a[0],n=a[1],!i){u.next=15;break}return this.invokeError(i),u.abrupt("return");case 15:return r=o.EnterConfig.submit[t],u.next=18,e["default"].awrap(s.getAsyncTuple(this.ajax[r](n)));case 18:if(l=u.sent,!(i=l[0])){u.next=23;break}return this.invokeError(i),u.abrupt("return");case 23:1===t&&this.$toast("提交成功"),t<2&&this.renderPage(t+1);case 25:case"end":return u.stop()}},null,this)},invokeError:function(e){e.global?this.$toast(e.global,{messageType:"error"}):e.field&&(this.page.setError(e.field),this.jumpToError(e.field))},jumpToError:function(e){setTimeout(function(){var t=g["default"].keys(e);if(!g["default"].isEmpty(t)){var a=t[0],i=v["default"](".ui-form-item-"+a);i.length&&v["default"]("html, body").animate({scrollTop:i.offset().top-60},300)}},10)},saveDraft:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if("function"!=typeof this.page.saveDraft){a.next=3;break}return a.next=3,e["default"].awrap(this.page.saveDraft(t));case 3:case"end":return a.stop()}},null,this)},startSaveDraft:function(){var e=this;this.clearDraftTimer(),this.draftTimer=window.setInterval(function(){return e.saveDraft({automatic:!0})},3e4)},clearDraftTimer:function(){window.clearInterval(this.draftTimer)}}})}),define("ai/page/market/provider/register/register.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        \x3c!-- <app-sidebar /> --\x3e\n        <app-content style="padding: 0;">\n            <pager-header no-back="{{true}}" title="入驻AI市场" />\n            <a class="ai-market-provider-register-handbook" href="{{Url.store.registerHandbook}}" target="_blank">\n                <xui-icon name="information"></xui-icon>\n                <span>入驻指导手册</span>\n            </a>\n            \x3c!-- <breadcrumb items="{{breadItem}}"></breadcrumb> --\x3e\n            <div class="list-content ai-market-content ai-market-provider-content" style="padding: 0 122px 80px 118px;min-height: 560px;">\n                <div class="register-step-wrap">\n                    <view-step step-index="{{currentStep}}" steps="{{steps}}" />\n                </div>\n                \x3c!-- <h2>成为AI市场服务商</h2> --\x3e\n                <xui-toastlabel s-if="!loading && marketUserInfo.providerOpinion && currentStep<=2" style="margin: 20px 0;" level="error">{{marketUserInfo.providerOpinion}}</xui-toastlabel>\n                <xui-toastlabel s-else-if="!loading && marketUserInfo.shopOpinion && currentStep<=2" style="margin: 20px 0;" level="error">{{marketUserInfo.shopOpinion}}</xui-toastlabel>\n                \x3c!-- <xui-toastlabel s-if="!loading && currentStep<=2 && !ifEdit" style="margin: 20px 0;" level="alert">尊敬的用户：申请入驻需准备好营业执照/组织机构代码证扫描件和企业logo图片，填写完毕后请点击提<br>交信息进行审核；审核通过后，您的商品可发布在市场中。</xui-toastlabel> --\x3e\n                <div id="ai-register-wrapper"></div>\n\n                <contact-dialog s-if="!loading" providerId="{{marketUserInfo.providerId}}" mode="{{contactDialogMode}}" open="{=showContactDialog=}"></contact-dialog>\n            </div>\n\n            <div s-if="currentStep < 2" class="ai-market-provider-footer-wrap">\n                <div class="provider-footer">\n                    <xui-button\n                        s-if="currentStep === 0"\n                        on-click="nextStep"\n                        size="large"\n                        disabled="{{qualificationStatusFail}}"\n                        data-track-id="ai-market-provider-register-step-{{currentStep+1}}"\n                        data-track-name="服务商入驻-下一步-企业资质"\n                    >下一步</xui-button>\n\n                    <xui-button on-click="preStep" s-if="currentStep > 0" size="large">上一步</xui-button>\n                    <xui-button\n                        s-if="currentStep === 1"\n                        disabled="{{!agreeProtocal}}"\n                        on-click="nextStep"\n                        size="large"\n                        skin="primary"\n                        data-track-id="ai-market-provider-register-submit"\n                        data-track-name="服务商入驻-提交申请"\n                    >提交申请</xui-button>\n                    <div s-if="currentStep === 1" class="protocal">\n                        <xui-checkbox checked="{=agreeProtocal=}" title="我已阅读并同意" />\n                        <a href="{{Url.store.providerEnterContract}}" target="_blank">《AI市场服务商入驻协议》</a>\n                        <span>及</span>\n                        <a href="{{Url.store.cloudMarketProviderEnterContract}}" target="_blank">《百度云云市场服务商入驻协议》</a>\n                        <br>\n                        <br>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/settlement/bank/detail/detail",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./detail.tpl","san-xui","inf-ui/x/biz/XPager","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](r);module.exports=o["default"]({template:l["default"],components:{"xui-table":n.Table,"xui-xpager":u["default"],"xui-toastlabel":n.ToastLabel,"xui-select":n.Select,"xui-rangecalendar":n.RangeCalendar,"xui-form":n.Form,"xui-item":n.FormItem},initData:function(){return{MarketSettlementBankStatus:s.MarketSettlementBankStatus,review:"",breadItem:[{title:"收款信息"}],info:{status:0,companyAddress:{province:"",city:""},bankName:"",bankDeposit:"",bankCard:"",bankAddress:{province:"",city:""}}}},inited:function(){var e=this;this.on("getStoreUserInfo",function(){e.fetchInfo(),e.fetchReview()})},methodHook:{fetchInfo:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketSettlementBankInfo());case 2:if(t=a.sent){a.next=6;break}return this.goToEdit(),a.abrupt("return");case 6:this.$set("info",t);case 7:case"end":return a.stop()}},null,this)},fetchReview:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getMarketSettlementBankReview());case 2:t=a.sent,this.$set("review",t.opinion);case 4:case"end":return a.stop()}},null,this)},goToEdit:function(){this.$aiRedirect("settlement/bank/edit")}}})}),define("ai/page/market/settlement/bank/detail/detail.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-settlement-bank-content">\n                <h2>收款信息</h2>\n                \x3c!-- <xui-toastlabel s-if="review && info.status === MarketSettlementBankStatus.FAILED" level="error">{{ review }}</xui-toastlabel> --\x3e\n                <xui-toastlabel s-if="info.status === MarketSettlementBankStatus.SUCCESS" level="normal">提示：您的信息已审核通过</xui-toastlabel>\n                <xui-toastlabel s-elif="info.status === MarketSettlementBankStatus.REVIEW" level="alert">提示：您的信息正在审核中，请耐心等待结果</xui-toastlabel>\n                <xui-toastlabel s-elif="info.status === MarketSettlementBankStatus.FAILED" level="error">提示：您的信息审核未通过，未通过原因：{{ review }}，<a on-click="goToEdit" href="javascript:void(0);">点击修改</a></xui-toastlabel>\n                <div class="section">\n                    <h4 class="section-title">企业信息</h4>\n                    <xui-form>\n                        <xui-item label="企业名称：">{{ marketUserInfo.providerName }}</xui-item>\n                        <xui-item label="地址：">{{info.companyAddress.province}}/{{info.companyAddress.city}}</xui-item>\n                    </xui-form>\n                </div>\n                <div class="section">\n                    <h4 class="section-title">\n                        <span>银行信息</span>\n                        \x3c!-- <a class="link-download" href="javascript:void(0)">\n                            <xui-icon name="download" />\n                            <span>查看收款方开户银行填写说明</span>\n                        </a> --\x3e\n                    </h4>\n                    <xui-form>\n                        <xui-item label="银行名称：">{{ info.bankName }}</xui-item>\n                        <xui-item label="选择地址：">{{ info.bankAddress.province }}/{{ info.bankAddress.city }}</xui-item>\n                        <xui-item label="开户行支行：">{{ info.bankDeposit }}</xui-item>\n                        <xui-item label="银行卡号：">{{ info.bankCard }}</xui-item>\n                    </xui-form>\n                </div>\n                <xui-form>\n                    <xui-item label=" ">\n                        <xui-button on-click="goToEdit" width="88" height="30">编辑</xui-button>\n                    </xui-item>\n                </xui-form>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/settlement/bank/detail/index",["exports","module","./detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/settlement/bank/edit/edit",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./edit.tpl","san-xui","inf-ui/x/biz/XPager","ai/common/enums","ai/components/CascadingMenu/index","./rules","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=i["default"](a),p=i["default"](n),f=i["default"](s),m=i["default"](l),h=i["default"](u);module.exports=c["default"]({template:p["default"],components:{"xui-table":r.Table,"xui-xpager":f["default"],"xui-toastlabel":r.ToastLabel,"xui-select":r.Select,"xui-rangecalendar":r.RangeCalendar,"xui-form":r.Form,"xui-item":r.FormItem,"cascading-menu":m["default"],"xui-textbox":r.TextBox},initData:function(){return{rules:h["default"],errors:null,ascading:{labels:["省份","城市"],company:[],bank:[]},breadItem:[{title:"编辑收款信息"}],bankList:[],info:{status:o.MarketSettlementBankStatus.SUCCESS,companyAddress:{province:"",city:""},bankName:"",bankDeposit:"",bankCard:"",bankAddress:{province:"",city:""}}}},computed:{toast:function(){var e=this.data.get("review"),t=o.MarketSettlementBankStatus.fromValue(this.data.get("info.status"));return{review:e,level:t?t.level:"alert"}}},inited:function(){var e=this;this.on("getStoreUserInfo",function(){e.fetchInfo(),e.fetchBankList()})},methodHook:{fetchBankList:function(){var a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.getMarketBankList());case 2:a=i.sent,this.$set("bankList",a.map(function(t){return e["default"]({},t,{text:t.name,value:t.name})}));case 4:case"end":return i.stop()}},null,this)},fetchInfo:function(){var e,a,i,n,r,s,o;return t["default"].async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t["default"].awrap(this.ajax.getMarketSettlementBankInfo());case 2:if(e=l.sent){l.next=5;break}return l.abrupt("return");case 5:this.$set("info",e),a=e.companyAddress,i=a.province,n=a.city,i&&this.$set("ascading.company",[i,n]),r=e.bankAddress,s=r.province,o=r.city,s&&this.$set("ascading.bank",[s,o]);case 14:case"end":return l.stop()}},null,this)},fetchArea:function(a){return t["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.ajax.getMarketBuyerAddressDatasource(a,{"x-silent":!0}).then(function(t){return t.map(function(t){return e["default"]({},t,{value:t.text,key:t.value})})}));case 1:case"end":return t.stop()}},null,this)},handleLoadArea:function(e){var a,i,n,r=e[0],s=e[1];return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.map(function(e){return e.key}),i=a.length?{key:a.slice(-1)[0]}:undefined,e.next=4,t["default"].awrap(this.fetchArea(i));case 4:n=e.sent,r(n);case 6:case"end":return e.stop()}},null,this)},handleSyncArea:function(e){var t,a=this.$get("ascading."+e),i=a[0],n=a[1];this.$$set((t={},t["info."+e+"Address.province"]=i,t["info."+e+"Address.city"]=n,t))},submit:function(){var e,a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(d.sleep());case 2:return n.next=4,t["default"].awrap(d.getAsyncTuple(this.ref("form").validateForm()));case 4:if(e=n.sent,!(a=e[0])){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,t["default"].awrap(d.getAsyncTuple(this.ajax.saveMarketSettlementBankInfo(this.$get("info"),{"x-silent":!0})));case 10:if(i=n.sent,!(a=i[0])){n.next=15;break}return a.field?this.$set("errors",a.field):a.global&&this.$toast(a.global,{messageType:"error"}),n.abrupt("return");case 15:this.$toast("提交成功"),this.backToDetail();case 17:case"end":return n.stop()}},null,this)},backToDetail:function(){this.$aiRedirect("settlement/bank/detail")}}})}),define("ai/page/market/settlement/bank/edit/edit.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-settlement-bank-content">\n                <h2>编辑收款信息</h2>\n                <xui-toastlabel level="alert">温馨提示：收款信息请谨慎填写，AI市场根据提交的收款信息进行打款（收款信息要求与合同内容保持一致，否则无法成功打款）</xui-toastlabel>\n                <xui-form s-ref="form" formData="{{info}}" rules="{{rules}}" errors="{=errors=}" style="padding-top:0;">\n                    <div class="section">\n                        <h4 class="section-title">企业信息</h4>\n                        <xui-item label="企业名称：">{{ marketUserInfo.providerName }}</xui-item>\n                        <xui-item label="选择地址：" required name="companyAddressI">\n                            <cascading-menu value="{=ascading.company=}" labels="{{ascading.labels}}" on-change="handleSyncArea(\'company\')" on-loader="handleLoadArea" />\n                        </xui-item>\n                    </div>\n                    <div class="section">\n                        <h4 class="section-title">\n                            <span>银行信息</span>\n                            <a class="link-download" target="_blank" href="https://bj.bcebos.com/v1/issue-luigi/%E6%94%B6%E6%AC%BE%E6%96%B9%E9%93%B6%E8%A1%8C%E5%90%8D%E7%A7%B0%E5%8F%8A%E6%94%AF%E8%A1%8C%E5%90%8D%E7%A7%B0%E5%A1%AB%E5%86%99%E8%AF%B4%E6%98%8E-20180604181116-20190711194439-b51b2c.docx">\n                                <xui-icon name="download" />\n                                <span>查看收款方开户银行填写说明</span>\n                            </a>\n                        </h4>\n                        <xui-toastlabel level="alert">注：银行卡开户名必须与公司名称一致</xui-toastlabel>\n                        <xui-item label="银行名称：" required name="bankName">\n                            <xui-select datasource="{{bankList}}" value="{=info.bankName=}" />\n                        </xui-item>\n                        <xui-item label="选择地址：" required name="bankAddressI">\n                            <cascading-menu value="{=ascading.bank=}" labels="{{ascading.labels}}" on-change="handleSyncArea(\'bank\')" on-loader="handleLoadArea" />\n                        </xui-item>\n                        <xui-item label="开户行支行：" required name="bankDeposit">\n                            <xui-textbox value="{=info.bankDeposit=}" />\n                        </xui-item>\n                        <xui-item label="银行卡号：" required name="bankCard">\n                            <xui-textbox value="{=info.bankCard=}" />\n                        </xui-item>\n                    </div>\n                </xui-form>\n                <xui-form>\n                    <xui-item label=" ">\n                        <xui-button on-click="submit" skin="primary" width="88" height="30">提交信息</xui-button>\n                        <xui-button on-click="backToDetail" width="88" height="30" style="margin-left:10px;">取消</xui-button>\n                    </xui-item>\n                </xui-form>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/settlement/bank/edit/index",["exports","module","./edit","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/settlement/bank/edit/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=new e["default"]({companyAddressI:[{validator:function(e,t,a,i){var n=i.companyAddress,r=n.province,s=n.city;r&&r.length?s&&s.length?a():a("请选择城市"):a("请选择省份")}}],bankAddressI:[{validator:function(e,t,a,i){var n=i.bankAddress,r=n.province,s=n.city;r&&r.length?s&&s.length?a():a("请选择城市"):a("请选择省份")}}],bankName:[{required:!0,message:"请选择银行名称"}],bankDeposit:[{required:!0,message:"请选择开户行支行"}],bankCard:[{required:!0,message:"请输入银行卡号"}]})}),define("ai/page/market/settlement/bill/bill",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./bill.tpl","san-xui","inf-ui/x/biz/XPager","ai/common/util","moment","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](s),f=i["default"](l),m=i["default"](u);module.exports=d["default"]({template:c["default"],components:{"xui-table":r.Table,"xui-xpager":p["default"],"xui-toastlabel":r.ToastLabel,"xui-select":r.Select,"xui-rangecalendar":r.RangeCalendar},filters:{enumTextFromList:function(e,t){var a=m["default"].find(t,function(t){return t.name===e});return a?a.label:"--"},enumColorFromList:function(e,t){var a=m["default"].find(t,function(t){return t.name===e});return a?"color:"+a.color:""}},initData:function(){return{breadItem:[{title:"申请结算"}],filters:{status:"",calendar:{begin:f["default"]().subtract(3,"month").toDate(),end:new Date}},enumSource:{settlementPeriodList:[],settlementStatusList:[]},table:{loading:!1,schema:[{name:"billName",label:"账单时间"},{name:"period",label:"账单周期"},{name:"orderCount",label:"订单数"},{name:"status",label:"结算状态"},{name:"settlementApplyTime",label:"申请时间"},{name:"settlementFinishTime",label:"完成时间"},{name:"payInPrice",label:"现金金额"},{name:"billPrice",label:"结算金额"},{name:"ctrl",label:"操作",width:160}],datasource:[]},page:{pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}}},computed:{applyEnable:function(){var e=(new Date).getDate();return e>=3&&e<=10}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},getStoreUserInfo:function(){var t=this;this.ajax.getMarketSettlementStatusList().then(function(a){a=a.map(function(t){return e["default"]({text:t.label,value:t.name},t)}),a=[{text:"全部",value:""}].concat(a),t.$set("enumSource.settlementStatusList",a)}),this.ajax.getMarketsettlementPeriodList().then(function(a){a=a.map(function(t){return e["default"]({text:t.label,value:t.name},t)}),t.$set("enumSource.settlementPeriodList",a)}),this.watch("filters",function(){t.$set("page.pager.page",1),t.fetchCurrentPage()}),this.fetchCurrentPage()},handleSizeChange:function(e){var t=e.value;this.$$set({"page.pager.size":t,"page.pager.page":1}),this.fetchCurrentPage()},handlePageChange:function(e){var t=e.pageNo;this.$set("page.pager.page",t),this.fetchCurrentPage()},fetchCurrentPage:function(){var e,a,i,n,r,s,l,u,d,c,p;return t["default"].async(function(m){for(;;)switch(m.prev=m.next){case 0:return this.$set("table.loading",!0),e=this.$get("filters"),a=e.status,i=e.calendar,n=f["default"](i.begin).format("YYYY-MM-DD"),r=f["default"](i.end).format("YYYY-MM-DD"),s=this.$get("page.pager"),l=s.page,u=s.size,m.next=11,t["default"].awrap(o.getAsyncTuple(this.ajax.getMarketSettlementBillList({status:a,startTime:n,endTime:r,page:l,pageSize:u})));case 11:d=m.sent,c=d[0],p=d[1],c||this.$$set({"page.pager.size":p.pageSize,"page.pager.page":p.page,"page.pager.count":p.total,"table.datasource":p.items}),this.$set("table.loading",!1);case 16:case"end":return m.stop()}},null,this)},applySettlement:function(e){var a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(this.$confirm({title:"确认申请结算",content:"确认申请账单结算？<br>请核对下载账单数据，如核实无异议可申请结算"}));case 2:return r.next=4,t["default"].awrap(o.getAsyncTuple(this.ajax.applyMarketSettlement({billId:e},{"x-silent":!0})));case 4:if(a=r.sent,!(i=a[0])){r.next=12;break}return n=(i.global+"").match(/^(.*?)(\[(\S+?)\])?$/),r.next=10,t["default"].awrap(this.$alert({title:"提示",content:n[1]||"申请失败"}));case 10:return n[3]&&this.$aiRedirect(n[3]),r.abrupt("return");case 12:this.$toast("结算申请成功"),this.fetchCurrentPage();case 14:case"end":return r.stop()}},null,this)}})}),define("ai/page/market/settlement/bill/bill.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-settlement-bill-content">\n                <h2>服务列表</h2>\n                <xui-toastlabel class="settlement-toast-label">\n                    <ul>\n                        <span>温馨提示：</span>\n                        <li>1、订单状态属于“交付完成”后7天，才会进入到结算账单中。</li>\n                        <li>2、请您在每月3号～10号期间下载账单核对确认无误后，点击“申请结算”按钮提交结算申请。</li>\n                        <li>3、如对财务结算有任何问题，请将异议订单标注，<a target="_blank" href="//ticket.bce.baidu.com/#/ticket/create">提交工单</a>予以反馈。</li>\n                    </ul>\n                </xui-toastlabel>\n                <div class="filter-bar">\n                    <span>结算状态：</span>\n                    <xui-select value="{= filters.status =}" datasource="{{enumSource.settlementStatusList}}" />\n                    <span>账单时间：</span>\n                    <xui-rangecalendar value="{= filters.calendar =}" />\n                </div>\n                <div class="bill-list-table-wrap">\n                    <xui-table loading="{{table.loading}}" datasource="{{table.datasource}}" schema="{{table.schema}}">\n                        \x3c!-- period --\x3e\n                        <template slot="c-period">\n                            <span>{{ row.period | enumTextFromList(enumSource.settlementPeriodList) }}</span>\n                        </template>\n                        \x3c!-- status --\x3e\n                        <template slot="c-status">\n                            <span style="{{ row.status | enumColorFromList(enumSource.settlementStatusList) }}">{{ row.status | enumTextFromList(enumSource.settlementStatusList) }}</span>\n                        </template>\n                        \x3c!-- payInPrice --\x3e\n                        <template slot="c-payInPrice">\n                            ¥{{ row.payInPrice }}\n                        </template>\n                        \x3c!-- billPrice --\x3e\n                        <template slot="c-billPrice">\n                            ¥<span>{{ row.billPrice }}</span>\n                        </template>\n                        \x3c!-- ctrl --\x3e\n                        <template slot="c-ctrl">\n                            <a href="/ai/s/market/settlement/bill/export?billId={{row.billId}}" style="margin-right: 10px;">下载账单</a>\n                            \x3c!-- 这里先写死，web端改了fe也要改。应该全都放到fe才对 --\x3e\n                            <a s-if="applyEnable && row.status === \'TO_SETTLE\' " on-click="applySettlement(row.billId)" href="javascript:void(0)">申请结算</a>\n                            <span s-else style="color:#999;">申请结算</span>\n                        </template>\n                    </xui-table>\n                </div>\n                <div class="pager-wrap">\n                    <xui-xpager\n                        withPagerSize="{{true}}"\n                        pager="{=page.pager=}"\n                        on-pager-size-change="handleSizeChange"\n                        on-pager-change="handlePageChange"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/settlement/bill/index",["exports","module","./bill","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/settlement/record/index",["exports","module","./record","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/settlement/record/record",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./record.tpl","san-xui","inf-ui/x/biz/XPager","ai/common/util","moment","lodash","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=i["default"](a),p=i["default"](n),f=i["default"](s),m=i["default"](l);i["default"](u);module.exports=c["default"]({template:p["default"],components:{"xui-table":r.Table,"xui-xpager":f["default"],"xui-toastlabel":r.ToastLabel,"xui-tip":r.Tip,"xui-rangecalendar":r.RangeCalendar},filters:{enumText:function(e){var t=d.MarketSettlementRecordStatus.fromValue(e);return t?t.text:"--"},enumColor:function(e){var t=d.MarketSettlementRecordStatus.fromValue(e);return t?"color:"+t.color:""}},initData:function(){return{breadItem:[{title:"结算记录"}],filters:{calendar:{begin:m["default"]().subtract(1,"year").toDate(),end:new Date}},enumSource:{settlementStatusList:[]},table:{loading:!1,schema:[{name:"serialNumb",label:"流水号",width:250},{name:"amount",label:"结算金额"},{name:"status",label:"状态"},{name:"vendorName",label:"付款方"},{name:"priceFrom",label:"资金来源"},{name:"payTime",label:"付款时间"}],datasource:[]},page:{pager:{size:10,page:1,count:0,datasource:[{text:"10条",value:10},{text:"20条",value:20},{text:"50条",value:50}]}}}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},getStoreUserInfo:function(){var t=this;this.ajax.getMarketSettlementStatusList().then(function(a){a=a.map(function(t){return e["default"]({text:t.label,value:t.name},t)}),t.$set("enumSource.settlementStatusList",a)}),this.watch("filters",function(){t.$set("page.pager.page",1),t.fetchCurrentPage()}),this.fetchCurrentPage()},handleSizeChange:function(e){var t=e.value;this.$$set({"page.pager.size":t,"page.pager.page":1}),this.fetchCurrentPage()},handlePageChange:function(e){var t=e.pageNo;this.$set("page.pager.page",t),this.fetchCurrentPage()},fetchCurrentPage:function(){var e,a,i,n,r,s,l,u,c;return t["default"].async(function(p){for(;;)switch(p.prev=p.next){case 0:return this.$set("table.loading",!0),e=this.$get("filters.calendar"),a=m["default"](e.begin).format("YYYY-MM-DD"),i=m["default"](e.end).format("YYYY-MM-DD"),n=this.$get("page.pager"),r=n.page,s=n.size,p.next=9,t["default"].awrap(o.getAsyncTuple(this.ajax.getMarketSettlementResultList({startTime:a,endTime:i,page:r,pageSize:s})));case 9:l=p.sent,u=l[0],(c=l[1]).items.forEach(function(e){e.status!==d.MarketSettlementRecordStatus.FAILED&&delete e.message}),u||this.$$set({"page.pager.size":c.pageSize,"page.pager.page":c.page,"page.pager.count":c.total,"table.datasource":c.items}),this.$set("table.loading",!1);case 15:case"end":return p.stop()}},null,this)}})}),define("ai/page/market/settlement/record/record.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content market-settlement-record-content">\n                <h2>结算记录</h2>\n                <div class="filter-bar">\n                    <span>付款时间：</span>\n                    <xui-rangecalendar value="{= filters.calendar =}" />\n                </div>\n                <div class="record-list-table-wrap">\n                    <xui-table loading="{{table.loading}}" datasource="{{table.datasource}}" schema="{{table.schema}}">\n                        \x3c!-- status --\x3e\n                        <template slot="c-status">\n                            <span style="{{ row.status | enumColor }}">{{ row.status | enumText }}</span>\n                            <xui-tip s-if="row.message" position="lt" message="{{row.message}}" />\n                        </template>\n                        \x3c!-- amount --\x3e\n                        <template slot="c-amount">\n                            ¥{{ row.amount }}\n                        </template>\n                        \x3c!-- vendorName --\x3e\n                        <template slot="c-vendorName">\n                            百度网讯\n                        </template>\n                        \x3c!-- priceFrom --\x3e\n                        <template slot="c-priceFrom">\n                            云市场\n                        </template>\n                    </xui-table>\n                </div>\n                <div class="pager-wrap">\n                    <xui-xpager\n                        withPagerSize="{{true}}"\n                        pager="{=page.pager=}"\n                        on-pager-size-change="handleSizeChange"\n                        on-pager-change="handlePageChange"\n                    />\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/shop/edit/index",["exports","module","babel-runtime/helpers/extends","promise","babel-runtime/helpers/interop-require-default","ai/page/market/index","san-xui","san-xui/x/forms/Form","san-xui/x/forms/FormItem","ai/components/TextArea","ai/components/ImageUploader","bat-ria/tpl!./index.tpl","ai/common/enums","lodash","./rules","jquery"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=a["default"](t),h=a["default"](i),g=a["default"](r),v=a["default"](s),x=a["default"](o),b=a["default"](l),y=a["default"](u),k=a["default"](c),T=a["default"](p),w=a["default"](f);module.exports=h["default"]({template:y["default"],components:{"xui-form":g["default"],"xui-item":v["default"],"xui-textbox":n.TextBox,"xui-radiobox":n.RadioBox,"xui-select":n.Select,"xui-richtexteditor":n.RichTextEditor,"text-area":x["default"],"image-uploader":b["default"]},initData:function(e){var t=e.marketUserInfo;return{breadItem:[{title:"店铺管理"}],MAX_CASE_COUNT:2,imageUploaderUrl:"/api/ai/market/common/imageUpload",serviceRangeList:Array.apply(null,{length:24}).map(function(e,t){return{value:t+":00",text:t+":00"}}),editorOptions:{serverUrl:"/api/ai/s/common/editorUpload",autoHeightEnabled:!0,enableAutoSave:!1,toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom"],["lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","|"],["imagenone","imageleft","imageright","imagecenter","|","simpleupload","|","horizontal","date","time","spechars","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview"]]},feedback:[],data:{providerId:t.providerId,providerSummary:"",providerLogo:"",providerLogoUrl:"",serviceEmail:"",servicePhone:"",serviceTime:d.ServiceTime.WeekDay,serviceRange:{st:"08:00",et:"17:00"},providerCases:[]},rules:T["default"],errors:{basic:null,service:null},savingDraft:!1,saving:!1,providerImageData:{rel:"shop"},caseImageData:{rel:"case"},providerCases:[],casesRequiredError:"",ServiceTime:d.ServiceTime}},computed:{canAddCase:function(){return this.data.get("data.providerCases").length<this.data.get("MAX_CASE_COUNT")},providerImages:function(){return this.data.get("data.providerLogo")?[{url:this.data.get("data.providerLogoUrl"),id:this.data.get("data.providerLogo")}]:[]},casesError:function(){return this.data.get("providerCases").map(function(e){return e.errors})},submitDisabled:function(){var e=this.data.get("errors"),t=this.data.get("casesError"),a=this.data.get("casesRequiredError");return this.data.get("saving")||!k["default"].isEmpty(a)||!k["default"].isEmpty(e.basic)||!k["default"].isEmpty(e.service)||!k["default"].isEmpty(t)&&!k["default"].every(t,k["default"].isEmpty)},postData:function(){var e=this.data.get("data");return k["default"].assign({},e,{providerId:this.data.get("marketUserInfo.providerId")})}},inited:function(){this.on("getStoreUserInfo",this.getStoreUserInfo)},getStoreUserInfo:function(){var e=this;this.$get("isProviderAvailable")&&(this.$get("needReviewInfo")&&this.getShopReview(),this.getShopDraft().then(function(){e.updateEditorContent(),e.draftTimer=window.setTimeout(function(){e.saveToDraft({automatic:!0})},6e4)}))},detached:function(){window.clearTimeout(this.draftTimer)},changeServiceTime:function(e){this.$set("data.serviceTime",e)},addCase:function(){this.data.push("data.providerCases",{title:"",image:"",imageUrl:"",summary:"",detail:""}),this.data.push("providerCases",{images:[],errors:null}),this.validateProviderCases()},removeCase:function(e){var t=this;this.$confirm({title:"删除提示",content:"请确定是否要删除当前案例内容"}).then(function(){t.data.removeAt("data.providerCases",e),t.data.removeAt("providerCases",e),t.updateEditorContent(),t.validateProviderCases()})},getShopReview:function(){var e=this;return this.ajax.getStoreShopReviewInfo({shopId:this.$get("marketUserInfo.shopId")}).then(function(t){t.content&&e.$set("feedback",String(t.content).split("\n"))})},getShopDraft:function(){var e=this;return this.ajax.getStoreShopDraftInfo().then(function(t){k["default"].isEmpty(t)||(e.$set("data",t),e.$set("providerCases",t.providerCases.map(function(e){return{images:[{id:e.image,url:e.imageUrl}],errors:null}})))})},updateEditorContent:function(){var e=this;this.$get("data.providerCases").forEach(function(t,a){e.nextTick(function(){var i=e.ref("editors["+a+"]");i&&i.editor&&i.editor.setContent(t.detail)})})},changeProviderLogo:function(e){e.length?(this.$set("data.providerLogo",e[0].id),this.$set("data.providerLogoUrl",e[0].url)):(this.$set("data.providerLogo",""),this.$set("data.providerLogoUrl",""))},changeCaseImage:function(e,t){t.length?(this.$set("data.providerCases["+e+"].image",t[0].id),this.$set("data.providerCases["+e+"].imageUrl",t[0].url)):(this.$set("data.providerCases["+e+"].image",""),this.$set("data.providerCases["+e+"].imageUrl",""))},saveToDraft:function(t){var a=this;window.clearTimeout(this.draftTimer),this.$set("savingDraft",!0);return new m["default"](function(i,n){a.ajax.saveStoreShopDraft(e["default"]({},a.$get("postData"),t)).then(i,n)})["finally"](function(){a.$set("savingDraft",!1),a.draftTimer=window.setTimeout(function(){a.saveToDraft({automatic:!0})},6e4)})},saveDraft:function(){var e=this;this.saveToDraft({automatic:!1}).then(function(){return e.$toast("草稿保存成功",{messageType:"success"})},function(){return e.$toast("草稿保存失败",{messageType:"error"})})},validateProviderCases:function(){var e=this;return new m["default"](function(t,a){e.$get("data.providerCases").length?(e.$set("casesRequiredError",""),t()):(e.$set("casesRequiredError","必须填写成功案例"),a())})},submit:function(){var e=this,t=this.$get("data.providerCases").map(function(t,a){return e.ref("caseForm["+a+"]")});m["default"].all([this.ref("basicForm").validateForm(),this.ref("serviceForm").validateForm(),this.validateProviderCases()].concat(t.map(function(e){return e.validateForm()}))).then(function(){e.ajax.saveStoreShop(e.$get("postData")).then(function(){return e.$redirect("#/ai/market/shop/info")},function(t){var a=t.global?"提交失败："+t.global:"提交失败";e.$toast(a,{messageType:"error"}),t.field&&(e.jumpToError(t.field),e.$set("errors",k["default"].reduce(t.field,function(e,t,a){return e[k["default"].startsWith(a,"provider")?"basic":"service"][a]=t,e},{basic:{},service:{},cases:[null,null]})))})})["catch"](function(t){e.jumpToError(t)})},jumpToError:function(e){var t=k["default"].keys(e);if(!k["default"].isEmpty(t)){var a=t[0];w["default"]("html, body").animate({scrollTop:w["default"](".ui-form-item-"+a).offset().top-60},300)}}})}),define("ai/page/market/shop/edit/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-store-content ai-store-shop-edit-content">\n                <h2>店铺管理</h2>\n                    <p>审核反馈：</p>\n                    <p>\n                        <template s-for=\'line, index in feedback\'>\n                            <br s-if="index !== 0">\n                            {{line}}\n                        </template>\n                    </p>\n                </xui-toastlabel>\n                <xui-toastlabel s-else level="alert">\n                    <p>尊敬的服务商，您好，请填写完善以下信息，全部填写完毕后请点击提交信息，百度AI市场将审核您的信息。</p>\n                    <p>审核通过后，您填写的信息将被展示在商品页面中，请酌情填写，谢谢您的配合。</p>\n                </xui-toastlabel>\n                <div class="section">\n                    <h3 class="section-title">基本信息</h3>\n                    <xui-form s-ref="basicForm" formData="{{data}}" rules="{{rules.basic}}" errors="{=errors.basic=}">\n                        <xui-item label="{{label.providerName}}："><span class="provider-name">{{marketUserInfo.providerName}}</span></xui-item>\n                        <xui-item label="店铺形象：" name="providerLogo">\n                            <image-uploader url="{{imageUploaderUrl}}" images="{{providerImages}}" data="{{providerImageData}}" on-change="changeProviderLogo">首页和店铺详情页展示（180*135）</image-uploader>\n                        </xui-item>\n                        <xui-item label="店铺简介：" name="providerSummary">\n                            <text-area placeholder="字数120字以内" max="{{120}}" value="{=data.providerSummary=}"></text-area>\n                        </xui-item>\n                    </xui-form>\n                </div>\n                <div class="section">\n                    <h3 class="section-title">客服信息</h3>\n                    <xui-form s-ref="serviceForm" formData="{{data}}" rules="{{rules.service}}" errors="{=errors.service=}">\n                        <xui-item label="客服邮箱：" name="serviceEmail">\n                            <xui-textbox placeholder="请输入客服的电子邮箱地址" value="{=data.serviceEmail=}" />\n                        </xui-item>\n                        <xui-item label="客服电话：" name="servicePhone">\n                            <xui-textbox placeholder="如：010-12345678" value="{=data.servicePhone=}" />\n                        </xui-item>\n                        <xui-item label="服务时间：" name="serviceTime">\n                            <div class="service-time-row">\n                                <xui-radiobox checked="{{data.serviceTime === ServiceTime.WeekDay}}" name="serviceTime" title="工作日" on-change="changeServiceTime(ServiceTime.WeekDay)"></xui-radiobox>\n                                &#8195;\n                                <xui-select datasource="{{serviceRangeList}}" value="{=data.serviceRange.st=}" disabled="{{data.serviceTime !== ServiceTime.WeekDay}}" />\n                                &#8195;至&#8195;\n                                <xui-select datasource="{{serviceRangeList}}" value="{=data.serviceRange.et=}" disabled="{{data.serviceTime !== ServiceTime.WeekDay}}" />\n                            </div>\n                            <div class="service-time-row">\n                                <xui-radiobox checked="{{data.serviceTime === ServiceTime.AllYear}}" name="serviceTime" title="全年无休" on-change="changeServiceTime(ServiceTime.AllYear)"></xui-radiobox>\n                            </div>\n                        </xui-item>\n                    </xui-form>\n                </div>\n                <div class="section">\n                    <h3 class="section-title">成功案例</h3>\n                    <div class="case" s-for="item, index in providerCases">\n                        <h4 class="case-title">案例 {{index + 1}}<xui-button class="case-remove-button" on-click="removeCase(index)">删除</xui-button></h4>\n                        <xui-form s-ref="caseForm[{{index}}]" formData="{{data.providerCases[index]}}" rules="{{rules.cases}}" errors="{=item.errors=}">\n                            <xui-item label="案例名称：" name="title">\n                                <xui-textbox placeholder="请输入案例名称" value="{=data.providerCases[index].title=}" />\n                            </xui-item>\n                            <xui-item label="案例头图：" name="image">\n                                <image-uploader url="{{imageUploaderUrl}}" images="{=item.images=}" data="{{caseImageData}}" on-change="changeCaseImage(index, $event)">服务商详情页展示（295*166）</image-uploader>\n                            </xui-item>\n                            <xui-item label="案例简介：" name="summary">\n                                <text-area placeholder="简单介绍成功案例的关键信息，字数70字以内" max="{{70}}" value="{=data.providerCases[index].summary=}"></text-area>\n                            </xui-item>\n                            <xui-item label="案例详情：" name="detail">\n                                <xui-richtexteditor s-ref="editors[{{index}}]" width="700" value="{=data.providerCases[index].detail=}" options="{{editorOptions}}"></xui-richtexteditor>\n                            </xui-item>\n                        </xui-form>\n                    </div>\n                    <div class="add-case" s-if="canAddCase">\n                        <xui-button skin="primary" icon="plus" on-click="addCase">新增案例</xui-button>\n                        &#8195;最多可添加两个案例\n                        <span class="error">{{casesRequiredError}}</span>\n                    </div>\n                </div>\n                <div class="section">\n                    <div class="button-group">\n                        <xui-button skin="primary" size="large" on-click="submit" loading="{{saving}}" disabled="{{submitDisabled}}">提交审核</xui-button>\x3c!--\n                        --\x3e<xui-button size="large" on-click="saveDraft" loading="{{savingDraft}}" disabled="{{savingDraft}}">保存至草稿</xui-button>\n                    </div>\n                    <div class="save-tip">\n                        提示：当您点击保存信息时，您所填写的信息会被保存；<br>&#8195;&#8195;&#8195;当您点击完成提交时，所有信息会提交至后台，待后台审核！在等待审核结果过程中，不可再次编辑！\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/market/shop/edit/rules",["exports","module","async-validator"],function(exports,module,e){module.exports={basic:new e["default"]({providerLogo:[{required:!0,message:"请上传公司形象"}],providerSummary:[{required:!0,message:"请填写公司简介"},{max:120,message:"最多只能输入120个字符"}]}),service:new e["default"]({serviceEmail:[{required:!0,message:"请填写客服邮箱"},{max:100,message:"最多只能输入100个字符"},{type:"email",message:"请填写正确的邮箱"}],servicePhone:[{required:!0,message:"请填写客服电话"},{pattern:/^\d[\d\- ]{3,11}\d$/,message:"请填写正确的电话"}]}),cases:new e["default"]({title:[{required:!0,message:"请填写案例名称"},{max:50,message:"最多只能输入50个字符"}],image:[{required:!0,message:"请上传案例头图"}],summary:[{required:!0,message:"请填写案例简介"},{max:70,message:"最多只能输入70个字符"}],detail:[{required:!0,message:"请填写案例详情"},{max:1e6,message:"不能超过1000000字节"}]})}}),define("ai/page/market/shop/hotline/hotline",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./hotline.tpl","san-xui","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s,o){var l=i["default"](a),u=i["default"](n),d=i["default"](o);module.exports=l["default"]({template:u["default"],components:{"xui-dialog":r.Dialog,"xui-form":r.Form,"xui-item":r.FormItem,"xui-textbox":r.TextBox,"xui-button":r.Button,"xui-toastlabel":r.Toastlabel},filters:{getChNum:function(e){return["一","二","三"][e]||""},getTransferTelPlaceHolder:function(e){return""===e?"客服拨打热线时该号码第一响应":"若第"+e+"客服未接听，该号码顺次响应"}},initData:function(){return{responseErrors:{},syncData:{},data:{},info:{hotline:"",servicePhone:"",transferList:[{transferName:"",transferTel:""},{transferName:"",transferTel:""},{transferName:"",transferTel:""}]},providerId:"",enableValidate:!1,open:!1}},created:function(){var t,a;return e["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:if(!d["default"].isEmpty(this.$get("data"))){i.next=5;break}return i.next=3,e["default"].awrap(this.fetchHotline());case 3:i.next=8;break;case 5:t=d["default"].cloneDeep(this.$get("data")),a=d["default"].cloneDeep(this.$get("info")),this.$set("info",d["default"].merge(a,t));case 8:this.watch("info.transferList",function(){n.$get("enableValidate")||n.$set("enableValidate",!0),d["default"].isEmpty(n.$get("responseErrors"))||n.$set("responseErrors",{})});case 9:case"end":return i.stop()}},null,this)},computed:{transferListError:function(){if(!this.data.get("enableValidate"))return{};var e=this.data.get("responseErrors");if(!d["default"].isEmpty(e))return e;var t=["一","二","三"],a={};return this.data.get("info.transferList").forEach(function(e,i,n){var r=e.transferName,s=e.transferTel;if((0===i||s)&&d["default"].isEmpty(r.trim()))return a["transferName_"+i]="transferName-error",void(a["transferTel_"+i+"_text"]="请填写第"+t[i]+"客服姓名");if((0===i||r)&&d["default"].isEmpty(s.trim()))return a["transferTel_"+i]="transferTel-error",void(a["transferTel_"+i+"_text"]="请填写第"+t[i]+"客服手机号");if(!d["default"].isEmpty(s.trim())&&!/^\d{11}$/.test(s.trim()))return a["transferTel_"+i]="transferTel-error",void(a["transferTel_"+i+"_text"]="请填写正确的手机号");var o=n[i+1];r&&s||!o||!o.transferName||!o.transferTel||(a["transferName_"+i]="transferName-error",a["transferTel_"+i+"_text"]="请填写第"+t[i]+"客服信息")}),a}},fetchHotline:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e["default"].awrap(this.ajax.getMarketShopHotline());case 2:t=n.sent,a=t.hotline,i=t.servicePhone,a&&i&&this.$$set({"info.hotline":a,"info.servicePhone":i});case 6:case"end":return n.stop()}},null,this)},onCloseDialog:function(){this.$set("open",!1),this.fire("close")},save:function(){var a,i,n,r,o,l,u,c;return e["default"].async(function(p){for(var f=this;;)switch(p.prev=p.next){case 0:if(a=undefined,i=this.$get("transferListError"),t["default"](i).forEach(function(e,t){(i["transferTel_"+t]||i["transferName_"+t])&&(a["transferTel_"+t]=i["transferTel_"+t+"_text"])}),!a){p.next=6;break}return s.jumpToError(a),p.abrupt("return");case 6:if(n=d["default"].cloneDeep(this.data.get("info")),r=n.hotline,o=n.servicePhone,l=n.transferList,0!==(l=l.filter(function(e){return e.transferTel&&e.transferName})).length){p.next=14;break}return this.onCloseDialog(),p.abrupt("return");case 14:return p.next=16,e["default"].awrap(s.getAsyncTuple(this.ajax.saveMarketShopHotline({providerId:this.$get("providerId"),servicePhone:o,transferList:l})));case 16:if(u=p.sent,!(a=u[0])){p.next=23;break}return c=a.global?"绑定失败："+a.global:"绑定失败，重新绑定",this.$toast(c,{messageType:"error"}),a.field&&function(){s.jumpToError(a.field);var e={};t["default"](a.field).forEach(function(t){e[t]="transferTel-error",e[t+"_text"]=a.field[t]}),f.$set("responseErrors",e)}(),p.abrupt("return");case 23:this.$toast("绑定成功"),d["default"].isEmpty(this.$get("syncData"))?this.$reload():this.$$set({"syncData.hotline":r,"syncData.servicePhone":o,"syncData.transferList":l}),this.fire("confirm"),this.$set("open",!1);case 27:case"end":return p.stop()}},null,this)}})}),define("ai/page/market/shop/hotline/hotline.tpl",[],function(){return'<template>\n    <xui-dialog class="hotline-dialog" title="绑定400热线" open="{=open=}" width="500">\n        <div class="ai-market-shop-bind-hotline">\n            <xui-toastlabel level="normal" class="hotline-toastlabel">\n                温馨提示：客服手机号将用于接听AI市场客户电话咨询及AI市场短信通知\n            </xui-toastlabel>\n            <xui-form s-ref="hotlineForm">\n                \x3c!-- 店铺400热线 --\x3e\n                <xui-item label="店铺400热线：">\n                    <span>{{ info.hotline + \' 转 \' + info.servicePhone }}</span>\n                </xui-item>\n                \x3c!-- 客服 --\x3e\n                <xui-item required="{{ index === 0 }}" s-for="item, index in info.transferList" label="第{{ index | getChNum }}客服：" name="transferTel_{{index}}">\n                    <xui-textbox class="{{ transferListError[\'transferName_\' + index] || \'\' }}" width="99" style="margin-right: 10px;" value="{=item.transferName=}" placeholder="客服姓名"></xui-textbox>\x3c!-- \n                    --\x3e<xui-textbox class="{{ transferListError[\'transferTel_\' + index] || \'\' }}" width="243" value="{=item.transferTel=}" placeholder="{{ (index - 1) | getChNum | getTransferTelPlaceHolder }}"></xui-textbox>\n                    <span\n                        class="ui-form-item-invalid-label {{transferListError[\'transferName_\' + index] || transferListError[\'transferTel_\' + index] || \'\'}}"\n                        s-if="transferListError[\'transferTel_\' + index + \'_text\']">\n                        {{ transferListError[\'transferTel_\' + index + \'_text\'] }}\n                    </span>\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="save" skin="primary">确认</xui-button>\n            <xui-button on-click="onCloseDialog">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n        '}),define("ai/page/market/shop/hotline/index",["exports","module","./hotline","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/market/shop/info/index",["exports","module","babel-runtime/regenerator","ai/page/market/index","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","lodash","san-xui","ai/page/market/shop/hotline/index"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](r),c=a["default"](o),p="\n    p {\n        line-height: 32px;\n        margin: 16px 0;\n    }\n    h2 {\n        line-height: 54px;\n        margin: 20px 0;\n    }\n    table {\n        width: 100%;\n        border-collapse:collapse;\n        border: 1px solid #EEEEEE;\n        thead {\n            background: #F7F7F7;\n        }\n        th, td {\n            padding: 0 20px;\n            height: 56px;\n            line-height: 56px;\n            border: 1px solid #EEEEEE;\n        }\n    }\n    img {\n        display: block;\n        margin: 0 auto;\n        max-width: 100%;\n    }\n    a {\n        color: #3B85F6;\n    }\n";module.exports=l["default"]({template:u["default"],components:{"xui-form":s.Form,"xui-item":s.FormItem,hotline:c["default"]},filters:{getLabelByValues:function(e,t){return e.map(function(e){var a=d["default"].find(t,function(t){return t.value===e});return a?a.text:""}).filter(function(e){return e.length}).join("、")},getChNum:function(e){return["一","二","三"][e]||""}},initData:function(){return{CaseDetailType:n.CaseDetailType,breadItem:[{title:"店铺管理"}],productTypeList:n.MarketProductType.toArray(),abilityList:[],data:{productType:[],baiduAI:1,shopAbility:[],shopLogo:"",shopLogoUrl:"",shopSummary:"",serviceEmail:"",servicePhone:"",verifyCode:"",serviceRange:{st:"9:00",et:"18:00"},serviceTime:n.ServiceTime.WeekDay,shopCases:[],hotline:"",transferList:[]},preDistribution:{hotline:"",transferList:[]},hotlineTransferInfoOpen:!1,storeData:{},shopProductList:[]}},computed:{hasNoProduct:function(){return this.data.get("storeData.release")<=0},hotlineData:function(){if(!this.data.get("data.hotline"))return{};var e=this.data.get("data");return{hotline:e.hotline,servicePhone:e.servicePhone,transferList:e.transferList}},serviceTime:function(){return this.data.get("data.serviceTime")===n.ServiceTime.AllYear?n.ServiceTime.getTextFromAlias("AllYear"):this.data.get("data.serviceRange.st")+" - "+this.data.get("data.serviceRange.et")+" （工作日）"},hasCases:function(){var e=this.data.get("data.shopCases");return e&&e.length},serviceTimeLabel:function(){var e=this.data.get("data.serviceTime"),t=this.data.get("data.serviceRange"),a=t.st,i=t.et;return e===n.ServiceTime.WeekDay?a+" - "+i+" （工作日）":"全年无休"},seletedRelatedProductList:function(){var e=this,t=this.data.get("data.shopCases")||[],a=this.data.get("shopProductList")||[];return t.map(function(t){return(t.relatedProduct||[]).reduce(function(t,i){var n=d["default"].find(a,function(e){return e.productId===i});if(!n)return t;var r='\n                        <a target="__blank" href="'+e.data.get("Url.store.product")+"/"+n.productUuid+'">\n                            '+n.productName+"\n                        </a>;\n                    ",s="<span>"+n.productName+"</span>;";return t+=n.isOnline?r:s},"")})}},inited:function(){this.on("getStoreUserInfo",this.handleGetStoreUserInfo)},methodHook:{fetchShopProduct:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.$get("marketUserInfo.providerId")){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,e["default"].awrap(this.ajax.getMarketShopRelatedProduct({providerId:this.$get("marketUserInfo.providerId")}));case 4:t=a.sent,this.$set("shopProductList",t);case 6:case"end":return a.stop()}},null,this)},update:function(){this.$aiRedirect("shop/edit",{section:"shop"})},check:function(){window.open(this.$get("Url.store.provider")+"/"+this.$get("marketUserInfo.providerInstance"))},openHotlineTransferInfoDialog:function(){this.$set("hotlineTransferInfoOpen",!0)},handleGetStoreUserInfo:function(){var t,a;return e["default"].async(function(i){for(var r=this;;)switch(i.prev=i.next){case 0:if(this.fetchStoreData(),t=this.$get("shopFinalStatus"),!~[n.MarketShopFinalStatus.DRAFT,n.MarketShopFinalStatus.UPDATE_DRAFT].indexOf(t.value)){i.next=5;break}return this.$aiRedirect("shop/edit",{section:"shop"}),i.abrupt("return");case 5:return this.fetchAbilityList(),i.next=8,e["default"].awrap(this.ajax.getStoreShopInfo());case 8:return a=i.sent,this.$set("data",a),i.next=12,e["default"].awrap(this.fetchShopProduct());case 12:this.nextTick(function(){return r.setCaseDetail()});case 13:case"end":return i.stop()}},null,this)},fetchStoreData:function(){return e["default"].async(function(t){for(var a=this;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ajax.getMarketOperationStatus().then(function(e){return a.$set("storeData",e.product)}));case 2:case"end":return t.stop()}},null,this)},setCaseDetail:function(){var e=this;this.$get("data.shopCases").forEach(function(t,a){var i=t.detail,n=e.ref("caseDetail["+a+"]");n&&function(){var e=n.contentDocument.body,t=n.contentDocument.head,a=document.createElement("style");if(a.type="text/css",a.styleSheet){var r=function(){try{a.styleSheet.cssText=p}catch(e){}};a.styleSheet.disabled?setTimeout(r,10):r()}else{var s=document.createTextNode(p);a.appendChild(s)}t.appendChild(a),e.innerHTML=i}()})},fetchAbilityList:function(){var e=this;return this.ajax.getMarketAbility().then(function(t){return e.$set("abilityList",t.map(function(e){var t=e.id;return{text:e.name,value:t}}))})}}})}),define("ai/page/market/shop/info/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-store-content ai-store-shop-info-content">\n                <h2>\n                    店铺管理\n                    <a href="{{Url.store.operateMethod}}" target="_blank">\n                        <xui-icon name="information"></xui-icon>\n                        <span>运营手册</span>\n                    </a>\n                </h2>\n\n                <xui-toastlabel s-if="!data.hotline" level="alert">\n                    温馨提示：AI市场已免费为服务商提供400热线电话，请您尽快<a href="javascript:void(0);" on-click="openHotlineTransferInfoDialog">绑定400热线</a>，绑定成功后将展示在您的商品页面，方便您及时响应客户咨询。\n                </xui-toastlabel>\n\n                <xui-toastlabel s-if="shopFinalStatus.alias === \'UPDATE_SUCCESS\'" level="normal">提示：您的店铺已审核通过</xui-toastlabel>\n                <xui-toastlabel s-elif="shopFinalStatus.alias === \'UPDATE_REVIEW\'" level="alert">提示：您的店铺正在审核中，请耐心等待结果</xui-toastlabel>\n                <xui-toastlabel s-elif="shopFinalStatus.alias === \'UPDATE_FAILED\'" level="error">提示：您的店铺审核未通过，<a href="#/ai/market/shop/edit~section=shop">点击查看并修改</a></xui-toastlabel>\n                <div class="section">\n                    <h3 class="section-title">基本信息</h3>\n                    <div class="basic-info">\n                        <xui-form>\n                            <xui-item label="店铺经营品类：">\n                                {{ data.productType | getLabelByValues(productTypeList) }}\n                            </xui-item>\n                            <xui-item label="经营商品涉及AI能力：">\n                                {{ data.shopAbility | getLabelByValues(abilityList) }}\n                            </xui-item>\n                            <xui-item label="是否应用百度AI能力：">\n                                {{ data.baiduAI? \'是\': \'否\'}}\n                            </xui-item>\n                            <xui-item label="店铺Logo：">\n                                <div class="image-container"><img src="{{data.shopLogoUrl}}" ></div>\n                            </xui-item>\n                            <xui-item label="店铺简介：">\n                                {{data.shopSummary}}\n                            </xui-item>\n                        </xui-form>\n                    </div>\n                </div>\n                <div class="section">\n                    <h3 class="section-title">客服信息</h3>\n                    <xui-form>\n\n                        <template s-if="data.hotline">\n                            <xui-item label="店铺热线：">\n                                {{ data.hotline + \' 转 \' + data.servicePhone }}\n                            </xui-item>\n                            <xui-item s-for="item, index in data.transferList" label="第{{ index | getChNum }}客服：">\n                                {{ item.transferName + \' \' + item.transferTel }}\n                            </xui-item>\n                            <xui-item label=" ">\n                                <a class="modify-transfer-info" href="javascript:void(0);" on-click="openHotlineTransferInfoDialog">修改客服信息</a>\n                            </xui-item>\n                        </template>\n\n                        <xui-item label="客服邮箱：">\n                            {{ data.serviceEmail }}\n                        </xui-item>\n                        <xui-item s-if="!data.hotline" label="客服手机号：">\n                            <span>{{ data.servicePhone }}</span>\x3c!--\n                            --\x3e<a style="margin-left: 10px;" href="javascript:void(0);" on-click="openHotlineTransferInfoDialog">绑定400热线</a>\n                        </xui-item>\n                        <xui-item label="客服在线时间：">\n                            {{ serviceTimeLabel }}\n                        </xui-item>\n                    </xui-form>\n                </div>\n                <div class="section">\n                    <h3 class="section-title">成功案例</h3>\n                    <div s-if="hasCases" class="case-info" s-for="case, index in data.shopCases">\n                        <h4 class="case-title">案例 {{index + 1}}</h4>\n                        <table class="info-table">\n                            <tbody>\n                                <tr>\n                                    <td class="info-table-title">案例名称：</td>\n                                    <td>{{case.title}}</td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">案例头图：</td>\n                                    <td><div class="case-image" style="background-image: url({{case.imageUrl}})"></div></td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">关联商品：</td>\n                                    <td><span s-html="seletedRelatedProductList[index]"></span></td>\n                                </tr>\n                                <tr>\n                                    <td class="info-table-title">案例简介：</td>\n                                    <td>{{case.summary}}</td>\n                                </tr>\n                                \x3c!-- 从官网同步过来的案例 --\x3e\n                                <tr s-if="case.isOfficialCase">\n                                    <td class="info-table-title">案例详情：</td>\n                                    <td><a href="{{case.url}}" target="_blank">{{case.url}}</a></td>\n                                </tr>\n                                \x3c!-- 文件类型 --\x3e\n                                <tr s-elif="case.detailType === CaseDetailType.DOC">\n                                    <td class="info-table-title">案例详情：</td>\n                                    <td><a href="{{case.documentUrl}}" target="_blank">{{case.fileName}}</a></td>\n                                </tr>\n                                \x3c!-- 文本类型 --\x3e\n                                <tr s-else>\n                                    <td class="info-table-title">案例详情：</td>\n                                    <td><div class="case-detail"><iframe s-ref="caseDetail[{{index}}]" src="about:blank"></iframe></div></td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    <div s-else>无</div>\n                </div>\n                <div class="section">\n                    <div class="btn-group">\n                        <xui-button class="update-btn" skin="primary" size="large" on-click="update">更新信息</xui-button>\x3c!--\n                        --\x3e<xui-tip s-if="hasNoProduct" class="check-tip" layerWidth="188" message="您还未发布商品，无法查看店铺" position="lt" in-component="{{true}}">\n                            <xui-button size="large" on-click="check" disabled="{{ hasNoProduct }}">查看店铺</xui-button>\n                        </xui-tip>\x3c!--\n                        --\x3e<xui-button size="large" on-click="check" s-else>查看店铺</xui-button>\n                    </div>\n                </div>\n            </div>\n            <hotline\n                s-if="hotlineTransferInfoOpen"\n                open="{=hotlineTransferInfoOpen=}"\n                providerId="{{marketUserInfo.providerId}}"\n                data="{{hotlineData}}">\n            </hotline>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/offline/AppList/AppList",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","esui/Dialog","./NewApp/index","./OfficialApply/index","./NewApp/NewAppDialog","./Download/DownloadDialog","../SimpleDialog/ExtendDialog","../SimpleDialog/AppCountDialog","ai/common/enums","ai/common/util","moment","lodash","../IndividualGuide/IndividualGuide"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g,v,x){var b,y,k,T,w,I=n["default"](i),D=n["default"](r),S=n["default"](o),A=n["default"](l),$=n["default"](u),E=n["default"](g),L=n["default"](v),C=n["default"](x),P=[{title:"基础版 SDK",value:1,desc:["适用场景：设备端人脸图片采集，配合API使用，可实现各类场景需求。","核心功能：人脸SDK基础功能，人脸检测与追踪、人脸质量控制、人脸图片采集等"],doc:(b={},b[m.ClientBundleType.android]="https://ai.baidu.com/docs#/FaceSDK-Collect-Basic-Android",b[m.ClientBundleType.ios]="https://ai.baidu.com/docs#/FaceSDK-Collect-Basic-iOS",b[m.ClientBundleType.windows]="https://ai.baidu.com/docs#/FaceSDK-Collect-Basic-Windows",b[m.ClientBundleType.linux]="https://ai.baidu.com/docs#/FaceSDK-Collect-Basic-Linux",b)},{title:"有动作活体版本 SDK",value:2,desc:["适用场景：手机APP载体下的远程身份核验、金融开户、用户实名认证等。","核心功能：有动作活体检测，配合在线活体API，可提供手机场景下较强的活体检测能力"],doc:(y={},y[m.ClientBundleType.android]="https://ai.baidu.com/docs#/FaceSDK-Collect-WithLiveness-Android",y[m.ClientBundleType.ios]="https://ai.baidu.com/docs#/FaceSDK-Collect-WithLiveness-iOS",y)},{title:"人证核验示例工程",value:3,desc:["适用场景：手机APP载体下的远程身份核验、金融开户、用户实名认证等。","核心功能：OCR身份证识别、有动作活体检测（含API二次校验）、公安身份验证"],doc:(k={},k[m.ClientBundleType.android]="https://ai.baidu.com/docs#/FacePrint",k[m.ClientBundleType.ios]="https://ai.baidu.com/docs#/FacePrint",k)},{title:"人脸通行示例工程",value:4,desc:["适用场景：人脸闸机、人脸门禁、身份二次校验等","核心功能：人脸检测与追踪，图像采集，人脸注册，人脸1：N识别"],doc:(T={},T[m.ClientBundleType.android]="https://ai.baidu.com/docs#/FacePassage",T[m.ClientBundleType.ios]="https://ai.baidu.com/docs#/FacePassage",T)},{title:"移动端刷脸验证示例工程",value:5,desc:["适用场景：人脸登录、人脸考勤、访客签到等","核心功能：人脸检测与追踪，图像采集，人脸注册，人脸1：N识别（普通采集模式，快速登录模式）"],doc:(w={},w[m.ClientBundleType.android]="https://ai.baidu.com/docs#/FaceLogin",w[m.ClientBundleType.ios]="https://ai.baidu.com/docs#/FaceLogin",w)}];module.exports=I["default"]({template:D["default"],components:{"new-app":A["default"],"xui-tab":s.Tab,"xui-tab-panel":s.TabPanel,"individual-guide":C["default"]},initData:function(){return{appList:[],expireTime:0,appCount:4,extendApply:{},officialApply:{},appCountApply:{},elapsed:0,Platform:m.ClientPlatform,AuthType:m.ClientAuthType,authType:m.ClientAuthType.toArray().reduce(function(e,t){return e[t.value]=t.text,e},{}),resources:m.ClientBundleType.toArray().map(function(t){return{title:t.text,value:t.value,items:L["default"].filter(P,function(e){return L["default"].includes(L["default"].keys(e.doc),String(t.value))}).map(function(a){return e["default"]({},a,{doc:a.doc[t.value]})})}})}},computed:{apps:function(){return this.data.get("appList").map(function(t){return e["default"]({},t,{bundleName:L["default"].reduce(t.bundleName,function(e,t,a){return e[m.ClientBundleType.getAliasFromValue(a)]=t,e},{}),bundleMD5:L["default"].reduce(t.bundleMD5,function(e,t,a){return e[m.ClientBundleType.getAliasFromValue(a)]=t,e},{}),licenseId:t.platform===m.ClientPlatform.DESKTOP&&t.type===m.ClientAuthType.OFFLINE?t.appName+"-face-winandlinux-test":L["default"].reduce(t.bundleName,function(e,a,i){return a&&(e[m.ClientBundleType.getAliasFromValue(i)]=t.appName+"-face-"+("windows"===m.ClientBundleType.getAliasFromValue(i)?"win":m.ClientBundleType.getAliasFromValue(i))),e},{})})})},appExpireTime:function(){return this.data.get("isOfficial")?"永久免费":E["default"](this.data.get("expireTime")).format("YYYY-MM-DD")},isOfficial:function(){return this.data.get("officialApply.status")===m.ApplyStatus.APPLIED},isApplyExtend:function(){return this.data.get("extendApply.status")===m.ApplyStatus.UNDER_REVIEW},isApplyOfficial:function(){return this.data.get("officialApply.status")===m.ApplyStatus.UNDER_REVIEW},isApplyAppCount:function(){return this.data.get("appCountApply.status")===m.ApplyStatus.UNDER_REVIEW},isApplying:function(){return this.data.get("isApplyExtend")||this.data.get("isApplyOfficial")||this.data.get("isApplyAppCount")},extendDuration:function(){return h.duration(this.data.get("extendApply.duration")+this.data.get("elapsed"))},officialDuration:function(){return h.duration(this.data.get("officialApply.duration")+this.data.get("elapsed"))},appCountDuration:function(){return h.duration(this.data.get("appCountApply.duration")+this.data.get("elapsed"))},newAppShow:function(){return this.data.get("appList").length<this.data.get("appCount")},ENTERPRISE_CERTIFIED:function(){return~this.data.get("qualification").state.indexOf(m.QualificationStatus.ENTERPRISE_CERTIFIED)},showApply:function(){return this.data.get("ENTERPRISE_CERTIFIED")&&!this.data.get("isOfficial")}},created:function(){return t["default"].async(function(t){for(var i=this;;)switch(t.prev=t.next){case 0:this.$get("isApplying")&&this.startTick(),a["default"].all([this.ajax.clientAppList(),this.ajax.applyStatus()]).then(function(t){var a=t[0],n=t[1];i.$$set(e["default"]({appList:a},n))});case 2:case"end":return t.stop()}},null,this)},detached:function(){this.stopTick()},startTick:function(){this.timer||(this.timer=window.setInterval(this.tick.bind(this),1e3))},stopTick:function(){this.timer&&window.clearInterval(this.timer)},tick:function(){this.$set("elapsed",this.$get("elapsed")+1)},newApp:function(e){this.data.push("appList",e)},applySuccess:function(e){this.$set(e+"Apply",{status:m.ApplyStatus.UNDER_REVIEW,duration:-this.$get("elapsed")}),this.startTick()},getAppList:function(e){return L["default"].map(this.$get("appList"),function(t){return{text:t.appName,value:t.appId,disabled:!(t.bundleName&&t.bundleName[e]||"DESKTOP"===m.ClientBundleType.fromValue(e).type&&t.type===m.ClientAuthType.OFFLINE)}})},showOfficialApplyDialog:function(){var e=new $["default"];this.$waitAction({title:"申请免费正式版",width:528,content:e,needFoot:!0}),e.on("success",this.applySuccess.bind(this,"official"))},showExtendDialog:function(){p.showExtendDialog.call(this).on("success",this.applySuccess.bind(this,"extend"))},showAppCountDialog:function(){f.showAppCountDialog.call(this).on("success",this.applySuccess.bind(this,"appCount"))},showNewAppDialog:function(){d.showNewAppDialog.call(this)},showDownloadDialog:function(e,t){var a=this;c.showDownloadDialog.call(this,{title:"下载"+e.title,list:this.getAppList(t)}).on("download",function(i){window.open(a.$get("Url").download+"/client/resource?bundleType="+t+"&appId="+i+"&resourceType="+e.value)})},downloadResource:function(e,t){var a=this;this.$get("appList").length?"DESKTOP"===m.ClientBundleType.fromValue(t).type?this.getDownloadUrl({bundleType:t,resourceType:e.value}):this.showDownloadDialog(e,t):S["default"].confirm({title:"您还未创建授权",width:410,content:"资源下载前，您需要先创建授权，用于对SDK的鉴权功能。授权创建完毕后，当您下载资源，我们将自动帮您完成相关配置，便于您快速进入Demo运行状态。",closeButton:!0,needFoot:!0,encode:!1,draggable:!0,okText:"立即创建",cancelText:"取消"}).on("ok",function(){a.showNewAppDialog()})},getDownloadUrl:function(e){var a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return(a=window.open("about:blank")).document&&(a.document.body.innerHTML="载入中……",a.document.title="下载资源"),r.prev=2,r.next=5,t["default"].awrap(this.ajax.clientResourceUrl(e));case 5:i=r.sent,n=i.url,a.location&&(a.location.href=n),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](2),a.document&&(a.document.innerHTML=r.t0.message);case 13:case"end":return r.stop()}},null,this,[[2,10]])},downloadLicense:function(e,t){var a=this.$get("Url").download+"/client/license?appId="+e;t&&(a+="&bundleType="+m.ClientBundleType[t]),window.open(a)},supplement:function(t,a){var i=this;d.showNewAppDialog.call(this,e["default"]({},t,{bundleType:m.ClientBundleType.toArray().filter(function(e){return e.type===m.ClientPlatform.getAliasFromValue(t.platform)}).map(function(e){return e.value}),iosBundleName:t.bundleName.ios,androidBundleName:t.bundleName.android,androidBundleMD5:t.bundleMD5.android,windowsBundleName:t.bundleName.windows,windowsBundleMD5:t.bundleMD5.windows,linuxBundleName:t.bundleName.linux,linuxBundleMD5:t.bundleMD5.linux})).on("success",function(e){i.data.splice("appList",[a,1,e])})}})}),define("ai/page/offline/AppList/Download/DownloadDialog",["exports","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./DownloadDialog.tpl","inf-ui/x/components/Select"],function(exports,e,t,a,i){exports.__esModule=!0,exports.showDownloadDialog=function(e){var t=new o({data:e});return this.$waitAction({title:e.title,width:492,content:t,needFoot:!1}),t};var n=t["default"](e),r=t["default"](a),s=t["default"](i),o=n["default"]({template:r["default"],components:{"xui-select":s["default"]},initData:function(){return{appId:"",list:[]}},computed:{apps:function(){return[{text:"选择授权",value:""}].concat(this.data.get("list"))}},download:function(e){this.fire("download",e)}});exports["default"]=o}),define("ai/page/offline/AppList/Download/DownloadDialog.tpl",[],function(){return'<div class="client-dialog-content client-download-dialog-content">\n    <div class="client-dialog-content-tip">提示：请仔细核对下拉菜单中的授权信息，避免所选授权和开发平台不符合。如选择无误，下载的SDK将自动完成授权配置，可直接运行使用</div>\n    <div class="client-download">\n        <span>自动配置授权信息</span>\n        <xui-select datasource="{{apps}}" value="{=appId=}"></xui-select>\n        <xui-button on-click="download(appId)" skin="ok" disabled="{{!appId}}">下载</xui-button>\n    </div>\n</div>\n'}),define("ai/page/offline/AppList/index",["exports","module","./AppList","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/AppList/index.tpl",[],function(){return'<div class="app-list">\n    <individual-guide qualification="{{qualification}}" pageType="{{pageType}}"/>\n    <div class="section client-info">\n        <table>\n            <thead>\n                <tr>\n                    <th>授权类型</th>\n                    <th>截止有效期</th>\n                    <th>已用 / 授权数量</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr>\n                    <td>\n                        {{isOfficial ? \'正式版\' : \'试用版\'}}\n                        <xui-button s-if="showApply" skin="ok" disabled="{{isApplyExtend || isApplyOfficial}}" on-click="showOfficialApplyDialog">申请免费正式版</xui-button>\n                    </td>\n                    <td>\n                        {{appExpireTime}}\n                        <xui-button s-if="showApply" disabled="{{isApplyExtend || isApplyOfficial}}" on-click="showExtendDialog">延长授权时长</xui-button>\n                    </td>\n                    <td>\n                        {{appList.length}} / {{appCount}}个\n                        <xui-button s-if="ENTERPRISE_CERTIFIED" disabled="{{isApplyAppCount}}" on-click="showAppCountDialog">增加授权数量</xui-button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n        <div class="client-official-tip" s-if="!isOfficial && !isApplying">\n            <span>SDK的授权类型分为「试用版」和「正式版」，自您申请SDK完毕后，默认为试用版，试用版存在一定的授权有效期，供您测试使用。<br>您可以点击申请正式版，提交即将发布的产品信息，即可获得永久免费的SDK授权。</span>\n        </div>\n        <div class="client-apply-detail" s-if="isApplying">\n            <h4>我们已收到您的申请，正在审核中</h4>\n            <p>感谢您对我们产品的信任与支持，审核结果将在此页面更新显示，如有其他问题，可以 <a href="{{Url.ticket}}" target="_blank">[提交工单]</a> 进行咨询</p>\n            <p><br></p>\n            <p s-if="isApplyOfficial">申请免费正式版，我们将在2个工作日内完成审核，审核已等时间：{{officialDuration}}</p>\n            <p s-if="isApplyExtend">延长授权时长，我们将在1个工作日内完成审核，审核已等时间：{{extendDuration}}</p>\n            <p s-if="isApplyAppCount">增加授权数量，我们将在1个工作日内完成审核，审核已等时间：{{appCountDuration}}</p>\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-title">License 管理</div>\n        <div class="section-content">\n            <div class="client-card client-app" s-for="app, index in apps">\n                <div class="client-card-header">{{app.appName}}</div>\n                <div class="client-card-body">\n                    <div class="client-card-content">\n                        <template s-if="app.type === AuthType.OFFLINE">\n                            <p><span>License ID: </span>{{app.licenseId}}</p>\n                            <p s-if="app.deviceId"><span>设备指纹: </span>{{app.deviceId}}</p>\n                        </template>\n                        <template s-else>\n                            <p s-if="app.licenseId.ios"><span>iOS License ID: </span>{{app.licenseId.ios}}</p>\n                            <p s-if="app.licenseId.android"><span>安卓 License ID: </span>{{app.licenseId.android}}</p>\n                            <p s-if="app.licenseId.windows"><span>Windows License ID: </span>{{app.licenseId.windows}}</p>\n                            <p s-if="app.licenseId.linux"><span>Linux License ID: </span>{{app.licenseId.linux}}</p>\n                            <p s-if="app.bundleName.ios"><span>iOS 包名: </span>{{app.bundleName.ios}}</p>\n                            <p s-if="app.bundleName.android"><span>安卓包名: </span>{{app.bundleName.android}}</p>\n                            <p s-if="app.bundleName.windows"><span>Windows 产品名: </span>{{app.bundleName.windows}}</p>\n                            <p s-if="app.bundleName.linux"><span>Linux 产品名: </span>{{app.bundleName.linux}}</p>\n                            \x3c!-- <p s-if="app.bundleMD5.ios"><span>iOS MD5: </span>{{app.bundleMD5.ios}}</p> --\x3e\n                            <p s-if="app.bundleMD5.android"><span>安卓 MD5: </span>{{app.bundleMD5.android}}</p>\n                            <p s-if="app.bundleMD5.windows"><span>Windows EXE MD5: </span>{{app.bundleMD5.windows}}</p>\n                            <p s-if="app.bundleMD5.linux"><span>Linux 程序 MD5: </span>{{app.bundleMD5.linux}}</p>\n                        </template>\n                    </div>\n                </div>\n                <div class="client-card-footer">\n                    <template s-if="app.platform === Platform.MOBILE">\n                        <xui-button s-if="app.bundleName.ios" on-click="downloadLicense(app.appId, \'ios\')" skin="ok">iOS-License</xui-button>\n                        <xui-button s-else on-click="supplement(app, index)">补充 iOS 信息</xui-button>\n                        <xui-button s-if="app.bundleName.android" on-click="downloadLicense(app.appId, \'android\')" skin="ok">安卓-License</xui-button>\n                        <xui-button s-else on-click="supplement(app, index)">补充安卓信息</xui-button>\n                    </template>\n                    <template s-if="app.platform === Platform.DESKTOP">\n                        \x3c!-- 单机测试的时候bundleType也传一个windows吧 --\x3e\n                        <xui-button s-if="app.type === AuthType.OFFLINE" on-click="downloadLicense(app.appId, \'windows\')" skin="ok">License（{{authType[app.type]}}）</xui-button>\n                        <template s-else>\n                            <xui-button s-if="app.bundleName.windows" on-click="downloadLicense(app.appId, \'windows\')" skin="ok">Windows-License（{{authType[app.type]}}）</xui-button>\n                            <xui-button s-else on-click="supplement(app, index)">补充 Windows 信息</xui-button>\n                            <xui-button s-if="app.bundleName.linux" on-click="downloadLicense(app.appId, \'linux\')" skin="ok">Linux-License（{{authType[app.type]}}）</xui-button>\n                            <xui-button s-else on-click="supplement(app, index)">补充 Linux 信息</xui-button>\n                        </template>\n                    </template>\n                </div>\n            </div>\n            <new-app s-if="newAppShow" on-success="newApp($event)"></new-app>\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-title">开发资源下载</div>\n        <div class="section-content">\n            <xui-tab skin="sub">\n                <xui-tab-panel s-for="resource in resources" title="{{resource.title}}">\n                    <table class="client-resource-table">\n                        <tbody>\n                            <tr s-for="item in resource.items">\n                                <td><h5>{{item.title}}</h5></td>\n                                <td>\n                                    <p s-for="line in item.desc">{{line}}</p>\n                                </td>\n                                <td>\n                                    <a href="{{item.doc}}" target="_blank">文档帮助</a>\n                                </td>\n                                <td>\n                                    <xui-button skin="ok" on-click="downloadResource(item, resource.value)">下载</xui-button>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </xui-tab-panel>\n            </xui-tab>\n        </div>\n    </div>\n</div>\n'}),define("ai/page/offline/AppList/NewApp/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./NewAppDialog"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a);module.exports=n["default"]({template:r["default"],newAppDialog:function(){var e=this;i.showNewAppDialog.call(this).on("success",function(t){e.fire("success",t)})}})}),define("ai/page/offline/AppList/NewApp/index.tpl",[],function(){return'<div class="client-new-app" on-click="newAppDialog">\n    <span>新建授权</span>\n</div>\n'}),define("ai/page/offline/AppList/NewApp/NewAppDialog",["exports","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./NewAppDialog.tpl","ai/common/enums","async-validator","ai/common/util","lodash"],function(exports,e,t,a,i,n,r,s,o){exports.__esModule=!0,exports.showNewAppDialog=function(e){var t=new c({data:{data:e}});return this.$waitAction({title:"新建授权",width:528,content:t,needFoot:!0}),t};var l=a["default"](t),u=a["default"](i),d=a["default"](o),c=l["default"]({template:u["default"],initData:function(){return{data:{appId:"",appName:"",appType:"",platform:n.ClientPlatform.MOBILE,type:n.ClientAuthType.ONLINE,bundleType:n.ClientBundleType.toArray().filter(function(e){return"MOBILE"===e.type}).map(function(e){return e.value}),iosBundleName:"",androidBundleName:"",androidBundleMD5:"",windowsBundleName:"",windowsBundleMD5:"",linuxBundleName:"",linuxBundleMD5:"",deviceId:""},rules:new r["default"]({appName:[{required:!0,message:"请填写授权标识"},{max:20,message:"授权标识不能超过20个字符"},{pattern:/^[a-zA-Z0-9-]+$/,message:"授权标识仅支持英文、数字、横线"}],appType:[{required:!0,message:"请选择场景类型"}],platform:[{required:!0,message:"请选择平台类型"}],type:function(e,t,a,i){if(i.platform===n.ClientPlatform.DESKTOP&&(null==t||""===t))return a("请选择授权类型");a()},bundleType:function(e,t,a,i){if(!(i.platform===n.ClientPlatform.DESKTOP&&i.type===n.ClientAuthType.OFFLINE||t&&t.length))return a("请至少选择一个开发平台");a()},iosBundleName:function(e,t,a,i){if(i.platform===n.ClientPlatform.MOBILE&&d["default"].includes(i.bundleType,n.ClientBundleType.ios)){if(!t)return a("请填写iOS包名");if(t.length>s.BUNDLE_NAME_MAX_LENGTH)return a("包名不能超过"+s.BUNDLE_NAME_MAX_LENGTH+"个字符");if(!s.checkBundleName(t))return a("iOS包名格式不正确")}a()},androidBundleName:function(e,t,a,i){if(i.platform===n.ClientPlatform.MOBILE&&d["default"].includes(i.bundleType,n.ClientBundleType.android)){if(!t)return a("请填写安卓包名");if(t.length>s.BUNDLE_NAME_MAX_LENGTH)return a("包名不能超过"+s.BUNDLE_NAME_MAX_LENGTH+"个字符");if(!s.checkBundleName(t))return a("安卓包名格式不正确")}a()},androidBundleMD5:function(e,t,a,i){if(i.platform===n.ClientPlatform.MOBILE&&d["default"].includes(i.bundleType,n.ClientBundleType.android)){if(!t)return a("请填写安卓签名MD5");if(!s.checkBundleMD5(t))return a("安卓签名MD5格式不正确")}a()},windowsBundleName:function(e,t,a,i){if(i.platform===n.ClientPlatform.DESKTOP&&i.type===n.ClientAuthType.ONLINE&&d["default"].includes(i.bundleType,n.ClientBundleType.windows)){if(!t)return a("请填写EXE产品名");if(t.length>s.BUNDLE_NAME_MAX_LENGTH)return a("包名不能超过"+s.BUNDLE_NAME_MAX_LENGTH+"个字符");if(!s.checkBundleName(t))return a("EXE产品名格式不正确")}a()},windowsBundleMD5:function(e,t,a,i){if(i.platform===n.ClientPlatform.DESKTOP&&i.type===n.ClientAuthType.ONLINE&&d["default"].includes(i.bundleType,n.ClientBundleType.windows)){if(!t)return a("请填写EXE文件的MD5");if(!s.checkBundleMD5(t))return a("EXE文件的MD5格式不正确")}a()},linuxBundleName:function(e,t,a,i){if(i.platform===n.ClientPlatform.DESKTOP&&i.type===n.ClientAuthType.ONLINE&&d["default"].includes(i.bundleType,n.ClientBundleType.linux)){if(!t)return a("请填写Linux产品名");if(t.length>s.BUNDLE_NAME_MAX_LENGTH)return a("包名不能超过"+s.BUNDLE_NAME_MAX_LENGTH+"个字符");if(!s.checkBundleName(t))return a("Linux产品名格式不正确")}a()},linuxBundleMD5:function(e,t,a,i){if(i.platform===n.ClientPlatform.DESKTOP&&i.type===n.ClientAuthType.ONLINE&&d["default"].includes(i.bundleType,n.ClientBundleType.linux)){if(!t)return a("请填写程序文件的MD5");if(!s.checkBundleMD5(t))return a("程序文件的MD5格式不正确")}a()},deviceId:function(e,t,a,i){if(i.platform===n.ClientPlatform.DESKTOP&&i.type===n.ClientAuthType.OFFLINE){if(!t)return a("请填写设备指纹");if(!/^[0-9A-Z]{32}$/.test(t))return a("设备指纹格式不正确")}a()}}),errors:{},appTypeList:[],platformList:n.ClientPlatform.toArray(),authTypeList:n.ClientAuthType.toArray(),disables:{}}},computed:{$enableSubmit:function(){return!0},bundleTypeList:function(){var e=this;return d["default"].filter(n.ClientBundleType.toArray(),function(t){return t.type===n.ClientPlatform.getAliasFromValue(e.data.get("data.platform"))})},isMobile:function(){return this.data.get("data.platform")===n.ClientPlatform.MOBILE},isDesktop:function(){return this.data.get("data.platform")===n.ClientPlatform.DESKTOP},isOnline:function(){return this.data.get("data.type")===n.ClientAuthType.ONLINE},isOffline:function(){return this.data.get("data.type")===n.ClientAuthType.OFFLINE},iosShow:function(){return this.data.get("isMobile")&&d["default"].includes(this.data.get("data.bundleType"),n.ClientBundleType.ios)},androidShow:function(){return this.data.get("isMobile")&&d["default"].includes(this.data.get("data.bundleType"),n.ClientBundleType.android)},windowsShow:function(){return this.data.get("isDesktop")&&this.data.get("isOnline")&&d["default"].includes(this.data.get("data.bundleType"),n.ClientBundleType.windows)},linuxShow:function(){return this.data.get("isDesktop")&&this.data.get("isOnline")&&d["default"].includes(this.data.get("data.bundleType"),n.ClientBundleType.linux)},isEdit:function(){return!!this.data.get("data.appId")}},created:function(){var e=this;this.$get("isEdit")&&n.ClientBundleType.toArray().forEach(function(t){e.$get("data."+t.alias+"BundleName")&&e.$set("disables."+t.alias,!0)}),this.ajax.appTypeList().then(function(t){e.$set("appTypeList",t.map(function(e){var t=e.id;return{text:e.name,value:t}})),t.length&&e.$set("data.appType",t[0].id)})},changePlatform:function(){var e=this;this.nextTick(function(){e.$set("data.bundleType",e.$get("bundleTypeList").map(function(e){return e.value}))})},$submit:function(){var t=this;return new e["default"](function(e,a){t.ref("form").validateForm().then(function(){t.submit().then(e,a)},a)})},submit:function(){var t=this,a=this.$get("data"),i={appName:a.appName,appType:a.appType,platform:a.platform,bundleName:{},bundleMD5:{}};if(a.appId&&(i.appId=a.appId),a.platform===n.ClientPlatform.DESKTOP&&(i.type=a.type,a.type===n.ClientAuthType.OFFLINE&&(i.deviceId=a.deviceId)),n.ClientBundleType.toArray().forEach(function(e){t.$get(e.alias+"Show")&&(i.bundleName[e.value]=a[e.alias+"BundleName"],"ios"!==e.alias&&(i.bundleMD5[e.value]=(a[e.alias+"BundleMD5"]||"").replace(/:/g,"")))}),this.$get("isEdit")){var r=function(){var r={appId:a.appId};return n.ClientBundleType.toArray().filter(function(e){return e.type===n.ClientPlatform.getAliasFromValue(a.platform)}).forEach(function(e){t.$get("disables."+e.alias)||(r.bundleType=e.value,r.bundleName=a[e.alias+"BundleName"],"ios"!==e.alias&&(r.bundleMD5=a[e.alias+"BundleMD5"]))}),{v:new e["default"](function(e,a){t.ajax.cilentSdkInfo(r).then(function(){t.fire("success",i),e()},function(e){e.field&&t.$set("errors",e.field),a()})})}}();if("object"==typeof r)return r.v}return new e["default"](function(e,a){t.ajax.clientAppSave(i).then(function(a){var n=a.appId;i.appId=n,t.fire("success",i),e()},function(e){e.field&&t.$set("errors",e.field),a()})})}});exports["default"]=c}),define("ai/page/offline/AppList/NewApp/NewAppDialog.tpl",[],function(){return'<div class="client-dialog-content client-new-app-dialog-content">\n    <div class="client-dialog-content-tip">提示：授权创建后不可修改，请仔细阅读提示信息，并谨慎操作！</div>\n    <div class="client-form">\n        <xui-form s-ref="form" formData="{=data=}" rules="{{rules}}" errors="{=errors=}">\n            <xui-item required name="appName" label="授权标识：">\n                <xui-textbox type="text" value="{=data.appName=}" disabled="{{isEdit}}" placeholder="仅用于SDK授权的标识，自定义填写"></xui-textbox>\n                <div class="ui-form-item-comment">\n                    <a href="javascript:void(0)">如何填写</a>\n                    <xui-tip layer-width="200">用于标识您的license授权信息，每个授权只能有唯一的标识，支持英文、数字、横线，20个英文字符以内；iOS和Android会自动加后缀以区分，并在配置时作为License ID使用</xui-tip>\n                </div>\n            </xui-item>\n            <xui-item required name="appType" label="场景类型：">\n                <xui-select datasource="{{appTypeList}}" value="{=data.appType=}" disabled="{{isEdit}}"></xui-select>\n            </xui-item>\n            <xui-item required name="platform" label="平台类型：">\n                <xui-boxgroup box-type="radio" datasource="{{platformList}}" value="{=data.platform=}" disabled="{{isEdit}}" on-change="changePlatform"></xui-boxgroup>\n            </xui-item>\n            <xui-item required class="{{isDesktop ? \'\' : \'ui-form-item-hidden\'}}" name="type" label="授权类型：">\n                <xui-boxgroup box-type="radio" datasource="{{authTypeList}}" value="{=data.type=}" disabled="{{isEdit}}"></xui-boxgroup>\n                <div class="ui-form-item-comment">\n                    <a href="javascript:void(0)">如何选择</a>\n                    <xui-tip layer-width="200">单机测试：基于设备授权，可在设备上用于调试SDK使用；产品线发布用于实际的APP发布，如一个APP就是一条产品线，凡是这个APP则授权成功</xui-tip>\n                </div>\n            </xui-item>\n            <xui-item required class="{{!(isDesktop && isOffline) ? \'\' : \'ui-form-item-hidden\'}}"  name="bundleType" label="开发平台：">\n                <xui-boxgroup box-type="checkbox" datasource="{{bundleTypeList}}" value="{=data.bundleType=}" disabled="{{isEdit}}"></xui-boxgroup>\n            </xui-item>\n            <xui-item required class="{{iosShow ? \'\' : \'ui-form-item-hidden\'}}" name="iosBundleName" label="iOS包名：">\n                <xui-textbox type="text" value="{=data.iosBundleName=}" disabled="{{disables.ios}}" placeholder="Bundle ID"></xui-textbox>\n            </xui-item>\n            <xui-item required class="{{androidShow ? \'\' : \'ui-form-item-hidden\'}}" name="androidBundleName" label="安卓包名：">\n                <xui-textbox type="text" value="{=data.androidBundleName=}" disabled="{{disables.android}}" placeholder="Package Name"></xui-textbox>\n            </xui-item>\n            <xui-item required class="{{androidShow ? \'\' : \'ui-form-item-hidden\'}}" name="androidBundleMD5" label="安卓签名MD5：">\n                <xui-textbox type="text" value="{=data.androidBundleMD5=}" disabled="{{disables.android}}" placeholder="安卓包签名的keystore文件中私钥的数据摘要"></xui-textbox>\n                <div class="ui-form-item-comment"><a href=\'https://client-sdk.bj.bcebos.com/doc/face/安卓签名MD5文档.pdf?authorization=bce-auth-v1%2F529dc59c70314dbeabf86d3972c66238%2F2017-10-19T11%3A36%3A18Z%2F-1%2Fhost%2F6d75b25bc8ddfd3de745efadf25b6f2504d6cafe5aada6fcffad6bc8e651ab29\' target=\'_blank\'>什么是安卓签名MD5，如何获取 &gt;</a></div>\n            </xui-item>\n            <xui-item required class="{{isDesktop && isOffline ? \'\' : \'ui-form-item-hidden\'}}" name="deviceId" label="设备指纹：">\n                <xui-textbox type="text" value="{=data.deviceId=}" disabled="{{isEdit}}"></xui-textbox>\n                <div class="ui-form-item-comment">\n                    <a href="javascript:void(0)">什么是设备指纹</a>\n                    <xui-tip layer-width="200">设备指纹是基于设备信息生成的设备唯一标识码，是SDK按设备授权的主要依据。SDK内为您提供了一个硬件指纹小工具，可以直接输出指纹信息，具体请参考SDK文档说明</xui-tip>\n                </div>\n            </xui-item>\n            <div class="client-form-section" style="{{windowsShow ? \'\' : \'display:none;\'}}">\n                <p>Windows产品线配置&#8195;<a href="javascript:void(0)">如何配置</a><xui-tip layer-width="200">产品名：请填写exe可执行程序的具体名称，例如face.exe，则产品名为face.exe；EXE文件的md5：如face.exe，请填写此程序的md5值</xui-tip></p>\n                <xui-item name="windowsBundleName" label="EXE产品名：">\n                    <xui-textbox type="text" value="{=data.windowsBundleName=}" disabled="{{disables.windows}}"></xui-textbox>\n                </xui-item>\n                <xui-item name="windowsBundleMD5" label="EXE文件的MD5：">\n                    <xui-textbox type="text" value="{=data.windowsBundleMD5=}" disabled="{{disables.windows}}"></xui-textbox>\n                </xui-item>\n            </div>\n            <div class="client-form-section" style="{{linuxShow ? \'\' : \'display:none;\'}}">\n                <p>Linux产品线配置&#8195;<a href="javascript:void(0)">如何配置</a><xui-tip layer-width="200">产品名：请填写Linux可执行程序的具体名称，例如face，则产品名为face；程序文件的md5：如这个可执行文件叫做face，请填写此程序的md5值</xui-tip></p>\n                <xui-item name="linuxBundleName" label="Linux产品名：">\n                    <xui-textbox type="text" value="{=data.linuxBundleName=}" disabled="{{disables.linux}}"></xui-textbox>\n                </xui-item>\n                <xui-item name="linuxBundleMD5" label="程序文件的MD5：">\n                    <xui-textbox type="text" value="{=data.linuxBundleMD5=}" disabled="{{disables.linux}}"></xui-textbox>\n                </xui-item>\n            </div>\n        </xui-form>\n    </div>\n</div>\n'}),define("ai/page/offline/AppList/OfficialApply/ImageList/index",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","saber-cookie","lodash"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](r),d=a["default"](s);module.exports=o["default"]({template:l["default"],components:{"xui-webuploader":n.WebUploader},initData:function(){return{value:"",images:[],max:9,sizeLimit:Infinity,size:2097152,format:["png","jpg"],url:"/api/ai/s/client/image"}},computed:{showUploader:function(){return this.data.get("images").length<this.data.get("max")}},deleteItem:function(e){this.data.removeAt("images",e),this.onChange()},uploaderEvent:function(e){"function"==typeof this[e.eventType]&&this[e.eventType].apply(this,e.args)},ready:function(){var e=this;["uploadError"].forEach(function(t){return e.ref("uploader").uploader.on(t,e[t].bind(e))})},fileQueued:function(e){var t=this;this.data.push("images",{fileId:e.id,percentage:"0"}),this.ref("uploader").uploader.makeThumb(e,function(a,i){t.updateImage(e.id,{src:i})},200,200),e.size>this.$get("size")?this.updateImage(e.id,{error:"图片不能大于 2M"}):d["default"].includes(this.$get("format"),e.ext)?this.ref("uploader").uploader.upload(e):this.updateImage(e.id,{error:"格式错误"})},uploadBeforeSend:function(e,t,a){t.kind="clientOfficialImage";var i=u["default"].get("bce-user-info")||"";a.csrftoken=i.replace(/"/g,"")},uploadProgress:function(e,t){this.updateImage(e.id,{percentage:(100*t).toFixed(0)})},uploadSuccess:function(e,t){t&&t.success?(this.updateImage(e.id,{id:t.result.id,success:!0}),this.onChange()):t&&t.message&&t.message.global&&this.updateImage(e.id,{error:t.message.global})},uploadError:function(e){this.updateImage(e.id,{error:"上传失败"})},updateImage:function(t,a){var i=this;this.$get("images").forEach(function(n,r){n.fileId===t&&i.data.splice("images",[r,1,e["default"]({},n,a)])})},onChange:function(){var e=this,t=this.$get("images").filter(function(e){return e.success}).map(function(e){return e.id}).join(",");this.$set("value",t),this.fire("change",t),this.nextTick(function(){e.dispatch("input-comp-value-changed",{value:t})})}})}),define("ai/page/offline/AppList/OfficialApply/ImageList/index.tpl",[],function(){return'<div class="client-image-list">\n    <div class="client-image-list-item" s-for="image, index in images">\n        <img src="{{image.src}}" s-if="{{image.src}}" />\n        <div class="client-image-list-item-desc" s-if="!image.success">\n            <span s-if="image.error">{{image.error}}</span>\n            <span s-else>上传中 {{image.percentage}}%</span>\n        </div>\n        <div class="client-image-list-item-tool"><a href="javascript:void(0)" on-click="deleteItem(index)">删除</a></div>\n    </div>\n    <div class="client-image-list-add{{showUploader ? \'\' : \' client-image-list-add-hidden\'}}">\n        <xui-webuploader s-ref="uploader" url="{{url}}" size-limit="{{sizeLimit}}" auto-start="{{false}}" on-uploader-event="uploaderEvent"></xui-webuploader>\n        <xui-icon name="plus" />\n        <span>最多{{max}}张</span>\n    </div>\n</div>\n'}),define("ai/page/offline/AppList/OfficialApply/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","san-xui","./ImageList/index","async-validator"],function(exports,module,e,t,a,i,n,r,s,o){var l=i["default"](a),u=i["default"](n),d=i["default"](s);module.exports=l["default"]({template:u["default"],components:{"xui-calendar":r.Calendar,"image-list":d["default"]},initData:function(){return{data:{productName:"",contactName:"",contactMobile:"",contactEmail:"",business:"",target:"",imageIds:"",onlineTime:new Date(+new Date+864e5)},rules:new o["default"]({productName:[{required:!0,message:"请填写产品名称"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]{1,30}$/,message:"仅支持中英文、数字，30个字符以内"}],contactName:[{required:!0,message:"请填写联系人姓名"},{pattern:/^[A-Za-z\u4e00-\u9fa5]{1,20}$/,message:"仅支持中英文，20个字符以内"}],contactMobile:[{required:!0,message:"请填写联系手机"},{pattern:/^\d{5,11}$/,message:"请填写正确的手机号码格式"}],contactEmail:[{required:!0,message:"请填写联系邮箱"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确的邮箱格式"}],business:[{required:!0,message:"请填写产品业务流程"},{min:100,max:500,message:"产品业务流程必须在100到500个字之间"}],target:[{required:!0,message:"请填写目标用户"},{min:10,max:500,message:"目标用户必须在10到500个字之间"}],onlineTime:[{required:!0,message:"请选择计划产品上线时间"}]}),errors:{}}},computed:{$enableSubmit:function(){return!this.data.get("errors")}},$submit:function(){var a=this;return new t["default"](function(t,i){a.ref("form").validateForm().then(function(){var n=a.$get("data");a.ajax.applyOfficial(e["default"]({},n,{onlineTime:+n.onlineTime})).then(function(){t(),a.fire("success"),a.$plain({title:"提交成功",message:"感谢您的信任与支持！我们将在2个工作日内完成审核。届时可能会有业务人员回访您，审核通过后也会有短信通知，请您留意查看。",foot:{okBtn:{label:"我知道了"}}})},i)},i)})}})}),define("ai/page/offline/AppList/OfficialApply/index.tpl",[],function(){return'<div class="client-dialog-content clinet-official-apply-dialog-content">\n    <div class="client-dialog-content-tip">提示：此表单将作为审核永久授权的主要依据，请您尽可能详尽填写</div>\n    <div class="client-form">\n        <xui-form s-ref="form" formData="{{data}}" rules="{{rules}}" errors="{=errors=}">\n            <xui-item required name="productName" label="产品名称：">\n                <xui-textbox type="text" value="{=data.productName=}" placeholder="请输入产品名称"></xui-textbox>\n            </xui-item>\n            <xui-item required name="contactName" label="联系人姓名：">\n                <xui-textbox type="text" value="{=data.contactName=}" placeholder="请输入联系人姓名"></xui-textbox>\n            </xui-item>\n            <xui-item required name="contactMobile" label="联系手机：">\n                <xui-textbox type="text" value="{=data.contactMobile=}" placeholder="请输入联系手机"></xui-textbox>\n            </xui-item>\n            <xui-item required name="contactEmail" label="联系邮箱：">\n                <xui-textbox type="text" value="{=data.contactEmail=}" placeholder="请输入联系邮箱"></xui-textbox>\n            </xui-item>\n            <xui-item required name="business" label="产品业务流程：">\n                <xui-textbox type="text" value="{=data.business=}" multiline placeholder="请简述您的产品业务流程，不少于100字"></xui-textbox>\n            </xui-item>\n            <xui-item required name="target" label="目标用户：">\n                <xui-textbox type="text" value="{=data.target=}" multiline placeholder="请简述您的目标用户，不少于10字"></xui-textbox>\n            </xui-item>\n            <xui-item name="imageIds" label="产品图片：">\n                <image-list value="{=data.imageIds=}"></image-list>\n            </xui-item>\n            <xui-item required name="onlineTime" label="计划产品上线时间：">\n                <xui-calendar value="{=data.onlineTime=}" close-on-change="{{true}}" />\n            </xui-item>\n        </xui-form>\n    </div>\n</div>\n'}),define("ai/page/offline/BaseInfo/BaseInfo",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./BaseInfo.tpl","ai/common/enums","san-xui","./rules","../SimpleDialog/ExtendDialog","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](o);module.exports=d["default"]({template:c["default"],components:{"xui-form":s.Form,"xui-item":s.FormItem,"xui-textbox":s.TextBox,"xui-checkbox":s.CheckBox},initData:function(){return{BaseInfoStatus:r.BaseInfoStatus,formData:{name:"",phone:"",email:"",industry:"",post:"",business:"",reason:""},errors:{},createdTime:+new Date,timeStampNow:+new Date,originPhone:"",ifExtendReviewing:!1,elapsed:0}},computed:{rules:function(){return p["default"]({originPhone:this.data.get("originPhone")})},ifReviewing:function(){return+this.data.get("baseStatus.status")==+r.BaseInfoStatus.Reviewing},ifNotApply:function(){return+this.data.get("baseStatus.status")==+r.BaseInfoStatus.NotApply},ifFailed:function(){return+this.data.get("baseStatus.status")==+r.BaseInfoStatus.Failed},ifExpired:function(){return+this.data.get("applyStatus.status")==+r.ApplyStatus.EXPIRED},ifExpiredApplying:function(){return!!this.data.get("ifExpired")&&(this.data.get("ifExtendReviewing")||+this.data.get("applyStatus.extendApply.status")==+r.ApplyStatus.UNDER_REVIEW)},waitTime:function(){return u.duration(this.data.get("elapsed")+this.data.get("baseStatus.duration")/1e3)},expiredWaitTime:function(){return u.duration(this.data.get("elapsed")+this.data.get("applyStatus.extendApply.duration"))}},created:function(){this.$get("ifNotApply")?this.fetchBaseInfo():(this.$get("ifReviewing")||this.$get("ifExpiredApplying"))&&this.startWaitTimer()},startWaitTimer:function(){clearInterval(this.timer),this.timer=window.setInterval(this.tick.bind(this),1e3)},disposed:function(){this.timer&&window.clearInterval(this.timer)},showExtendDialog:function(){l.showExtendDialog.call(this).on("success",this.applySuccess.bind(this))},applySuccess:function(){this.$set("ifExtendReviewing",!0),this.startWaitTimer()},tick:function(){this.$set("elapsed",this.$get("elapsed")+1)},fetchBaseInfo:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.offLineBaseInfo({sdkType:this.$get("sdkType")}));case 2:e=a.sent,this.$set("formData",e),this.$set("originPhone",e.phone);case 5:case"end":return a.stop()}},null,this)},submit:function(){return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ref("form").validateForm());case 2:return a.prev=2,a.next=5,t["default"].awrap(this.ajax.offLineBaseSubmit(e["default"]({sdkType:this.$get("sdkType")},this.$get("formData"))));case 5:this.$toast("提交成功"),this.$reload(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),a.t0.field&&this.$set("errors",a.t0.field);case 12:case"end":return a.stop()}},null,this,[[2,9]])},cancel:function(){this.$aiRedirect("overview/index")},applyAgain:function(){this.$set("baseStatus.status",r.BaseInfoStatus.NotApply),this.created()}})}),define("ai/page/offline/BaseInfo/BaseInfo.tpl",[],function(){return'<div class="base-info">\n    \x3c!-- 未申请 --\x3e\n    <template s-if="ifNotApply">\n        <div class="base-info-tip">\n            <div class="icon-wrap">\n                <xui-icon name="ok-reverse"/>\n            </div>\n            <div class="tip-content-wrap">\n                <h4>恭喜您完成个人/企业认证，仅剩一步，即可使用全部离线SDK产品</h4>\n                <p>为了更好地服务您使用我们的产品，请您填写一些必要的基础联系信息</p>\n                <p>提交后1个工作日内，我们将通过短信的方式，通知您审批结果</p>\n            </div>\n        </div>\n        <xui-form s-ref="form" rules="{{rules}}" errors="{=errors=}" formData="{{formData}}">\n            <xui-item label="联系人姓名：" required name="name">\n                <xui-textbox value="{=formData.name=}" type="text" placeholder="请输入联系人姓名" />\n            </xui-item>\n            <xui-item label="联系电话：" required name="phone">\n                <xui-textbox value="{=formData.phone=}" type="text" placeholder="请输入联系电话" />\n            </xui-item>\n            <xui-item label="联系邮箱：" required name="email">\n                <xui-textbox value="{=formData.email=}" type="text" placeholder="请输入联系邮箱" />\n            </xui-item>\n            <xui-item label="所在行业：" required name="industry">\n                <xui-textbox value="{=formData.industry=}" type="text" placeholder="请输入所在行业" />\n            </xui-item>\n            <xui-item label="主要职务：" required name="post">\n                <xui-textbox value="{=formData.post=}" type="text" placeholder="请输入主要职务" />\n            </xui-item>\n            <xui-item label="主营业务：" required name="business">\n                <xui-textbox value="{=formData.business=}" multiline="{{true}}" placeholder="请简要介绍一些您所在公司现有的业务形态与内容，不少于10个汉字，感谢您的理解与配合。" />\n            </xui-item>\n            <xui-item label="申请理由：" required name="reason">\n                <xui-textbox value="{=formData.reason=}" multiline="{{true}}" placeholder="此处最少填写10个汉字，信息越完整，越能快速完成申请审核。" />\n            </xui-item>\n            <xui-item label=" ">\n                <xui-button on-click="submit" skin="primary">确定</xui-button>\n                <xui-button on-click="cancel">取消</xui-button>\n            </xui-item>\n        </xui-form>\n    </template>\n    \x3c!-- 基础信息/延期 审核中 --\x3e\n    <div class="base-info-tip-wrap" s-else-if="ifReviewing || ifExpiredApplying">\n        <p class="enter-prise-title">我们已收到您的申请，正在审核中</p>\n        <p>感谢您的申请，申请信息的审核一般在5个工作日内完成</p>\n        <p>申请审核结果将在此页面更新显示，请您保持关注</p>\n        <p>审核期间如有任何疑问，可以 <a target="_blank" href="{{Url.ticket}}">[提交工单]</a> 进行咨询</p>\n        <p class="enter-prise-time">审核已等待时间：{{ifReviewing ? waitTime : expiredWaitTime}}</p>\n    </div>\n    \x3c!-- 审核失败 --\x3e\n    <div class="base-info-tip-wrap" s-else-if="ifFailed">\n        <p class="enter-prise-title-error">很抱歉，您的申请未通过审核</p>\n        <p>您可以重新提交申请，并提交更加详细的申请信息，这很重要</p>\n        <p>申请信息可以进一步补充产品描述、应用场景、预期规模等</p>\n        <p>如果您对申请结果有任何疑问，可以 <a target="_blank" href="{{Url.ticket}}">[提交工单]</a> 进行咨询</p>\n        <p>\n            <xui-button on-click="applyAgain" skin="primary">重新申请</xui-button>\n        </p>\n    </div>\n    \x3c!-- 已过期 --\x3e\n    <div class="base-info-tip-wrap" s-else-if="ifExpired && !ifExpiredApplying">\n        <p class="enter-prise-title-error">很抱歉，您的授权已过期</p>\n        <p>您可以重新提交申请，此处需描述具体问题</p>\n        <p>如果您对申请结果有任何疑问，可以 <a target="_blank" href="{{Url.ticket}}">[提交工单]</a> 进行咨询</p>\n        <p>\n            <xui-button on-click="showExtendDialog" skin="primary">申请延期</xui-button>\n        </p>\n    </div>\n</div>\n'}),define("ai/page/offline/BaseInfo/index",["exports","module","./BaseInfo","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/BaseInfo/rules",["exports","module","async-validator","ai/common/util"],function(exports,module,e,t){module.exports=function(a){var i=a.originPhone;return i=i.replace(/\*/g,"\\*"),new e["default"]({name:[{required:!0,message:"请填写联系人姓名"},{max:10,message:"最多只能输入10个字"}],phone:[{required:!0,message:"请填写联系电话"},{pattern:RegExp("^(\\d{5,11}|"+i+")$"),message:"请输入正确格式的电话"}],email:[{required:!0,message:"请填写联系邮箱"},{type:"email",message:"邮箱格式不正确"},{max:50,message:"邮箱长度过长"}],industry:[{required:!0,message:"请填写所在行业"},{max:100,message:"所在行业不能超过100个字"}],post:[{required:!0,message:"请填写主要职务"},{max:20,message:"主要职务不能超过20个字"}],business:{validator:function(e,a,i,n){if(a){var r=t.realLength(a);r>500?i("不能超过500个汉字"):r<10?i("不能少于10个汉字"):i()}else i("请填写主营业务")}},reason:{validator:function(e,a,i,n){if(a){var r=t.realLength(a);r>500?i("不能超过500个汉字"):r<100?i("不能少于100个汉字"):i()}else i("请填写申请理由")}}})}}),define("ai/page/offline/Certification/certification",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/enums"],function(exports,module,e,t,a){var i=t["default"](e);module.exports=i["default"]({template:'\n<template>\n    <div class="ai-certification">\n        <div class="ai-certification-tips">\n            <p>温馨提示：</p>\n            <div>在您使用SDK之前，请选择一下两种方式之一，完成身份认证操作</div>\n            <div>个人实名认证即时生效，企业认证需要1-2个工作日审核</div>\n        </div>\n        <div class="ai-certification-contents">\n            <div class="ai-content-item ai-certification-contents-left">\n                <div class="title">\n                    <xui-icon name="myaccount"></xui-icon>\n                    <span>个人实名认证</span>\n                </div>\n                <div class="title-info">\n                    核验个人姓名、身份证信息，确保是您本人发起的业务操作\n                </div>\n                <div class="content-title">\n                    完成认证后，您将获得：\n                </div>\n                <div class="content-detail-info">\n                    <ul>\n                        <li s-for="item in info[pageType][aiAppType].individual">\n                            {{item}}\n                        </li>\n                    </ul>\n                </div>\n                <a class="ui-button certifi-button skin-primary-button" \n                    target="_blank" href="{{Url.individualQualify}}"\n                >\n                    立即认证\n                </a>\n            </div>\n            <div class="ai-content-item ai-certification-contents-right">\n                <div class="title">\n                    <xui-icon name="fin-bank"></xui-icon>\n                    <span>企业认证</span>\n                </div>\n                <div class="title-info">\n                    个人实名认证基础上，提交企业营业执照等经营许可信息，证明此账号为企业行为操作\n                </div>\n                <div class="content-title">\n                    完成认证后，您将获得：\n                </div>\n                <div class="content-detail-info">\n                    <ul>\n                        <li s-for="item in info[pageType][aiAppType].enterprise">\n                            {{item}}\n                        </li>\n                    </ul>\n                </div>\n                <a class="ui-button certifi-button \n                    skin-primary-button" target="_blank" href="{{Url.enterpriseQualify}}"\n                >\n                    立即认证\n                </a>\n            </div>\n        </div>\n    </div>\n</template>',initData:function(){var e,t;return{info:{offline:(e={},e[a.AppType.face]={individual:["获得2个测试序列号，每个有效期3个月","获得2个应用授权，每个有效期3个月","下载完整版的安卓、Win等SDK","正式授权购买","工单技术支持"],enterprise:["获得5个测试序列号，每个有效期3个月","获得5个应用授权，每个有效期3个月","下载完整版的安卓、Win等SDK","正式授权购买","专项的技术联调支持"]},e[a.AppType.speech]={individual:["获得2个测试序列号，每个有效期1个月","正式授权购买","工单技术支持"],enterprise:["获得5个测试序列号，每个有效期1个月","正式授权购买","工单技术支持","专项的技术联调支持"]},e),client:(t={},t[a.AppType.face]={individual:["获得2个应用产品线的授权，有效期6个月","下载完整版的安卓、Win等SDK","工单技术支持"],enterprise:["获得4个测试序列号，每个有效期6个月","可申请永久免费使用","可申请更多授权数量","下载完整版的安卓、Win等SDK","专项的技术联调支持"]},t)}}}})}),define("ai/page/offline/Certification/index",["exports","module","./certification","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/DownloadSdk/DownloadSdk",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./DownloadSdk.tpl","san-xui","ai/config/url","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i);module.exports=o["default"]({template:l["default"],components:{"xui-tab":n.Tab,"xui-tab-panel":n.TabPanel},initData:function(){return{link:r.faceOfflineSdk,open:!1,sdkVersion:3}},inited:function(){var e=this;this.watch("open",function(t){t&&setTimeout(function(){return e.ref("dialog").__resize()},10)})},computed:{platforms:function(){return function(e){var t=e.Url,a=e.sdkVersion,i=e.aiAppType,n=t.faceOfflineSdk.doc,r=function(e){return'以下SDK，并未完成授权，您需要完成激活后才可以使用，具体请参阅\n            <a \n                href="'+(e?t.speech.offline.activeDoc:n.active)+'"\n                target="_blank"\n            > SDK激活说明 &gt;&gt;</a>'};if(i===s.AppType.speech)return["Android","iOS"].reduce(function(e,a){var i=a.toLowerCase();return e.push({title:a,value:i,tips:["提示一："+r(i)],items:[{title:a+" 版本 SDK",value:i,description:"包含所有核心功能，提供所有原子接口，可高度自定义二次开发",link:t.speech.offline[i]}]}),e},[]);var o=n.android,l=[{title:"Windows",value:"windows",items:[{title:"C++ 版本 SDK",value:"cpp",description:"包含所有核心功能，提供所有原子接口，可高度自定义二次开发",link:n.windowsCpp},{title:"C# 版本 SDK",value:"csharp",description:"包含人脸注册、人脸库管理、1：N识别、活体检测及质量检测等设置功能",link:n.windowsCsharp},{title:"Java 版本 SDK",value:"java",description:"包含人脸注册、人脸库管理、1：N识别、活体检测及质量检测等设置功能",link:n.windowsJava}]},{title:"Linux",value:"linux",items:[{title:"Linux 版本 SDK",value:"cpp",description:"包含所有核心功能，提供所有原子接口，可高度自定义二次开发",link:n.linuxCpp}]}];return a===s.FaceSdkUserStatus.VERSION_TWO&&l.unshift({title:"Android 新",value:"android",tips:["提示一："+r(),"提示二：4.0版本的接口经过重新优化设计，性能有显著提升，但无法与之前的版本兼容使用。"],items:[{title:"FaceSDK",value:"sdk_3",description:"包含人脸检测、采集、活体识别、特征抽取与比对等所有业务能力",link:o}]},{title:"Android 旧",value:"android",items:[{title:"FaceSDK 2.0",value:"sdk_2",description:"包含所有核心功能，提供所有原子接口，可高度自定义二次开发",link:n.androidOld},{title:"人脸通行 Demo",value:"face_pass",description:"包含人脸注册、人脸库管理、1：N识别、活体检测及质量检测等设置功能",link:n.passageDemo},{title:"人证核验 Demo",value:"face_print",description:"包含人证对比（证件照模型）、活体检测及质量检测等设置功能",link:n.printDemo},{title:"人脸广告屏 Demo",value:"face_ad",description:"包含人脸检测与识别、属性分析、观看行为自定义等设置功能",link:n.adDemo}]}),a===s.FaceSdkUserStatus.VERSION_THREE&&l.unshift({title:"Android",value:"android",tips:["提示："+r()],items:[{title:"FaceSDK",value:"sdk_3",description:"包含人脸检测、采集、活体识别、特征抽取与比对等所有业务能力",link:o}]}),l}({Url:this.data.get("Url")||{faceOfflineSdk:{doc:{}},speech:{offline:{}}},sdkVersion:this.data.get("sdkVersion"),aiAppType:this.data.get("aiAppType")})}},downloadSdk:function(t,a){var i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=undefined,this.$get("aiAppType")!==s.AppType.face){r.next=5;break}return r.next=4,e["default"].awrap(this.ajax.offLineSdkDownUrl({sdkType:t+"_"+a}));case 4:i=r.sent;case 5:if(this.$get("aiAppType")!==s.AppType.speech){r.next=9;break}return r.next=8,e["default"].awrap(this.ajax.speechOffLineSdkDownUrl({sdkType:a}));case 8:i=r.sent;case 9:if(i){r.next=11;break}return r.abrupt("return");case 11:(n=document.createElement("iframe")).style.display="none",document.body.appendChild(n),n.src=i;case 15:case"end":return r.stop()}},null,this)}})}),define("ai/page/offline/DownloadSdk/DownloadSdk.tpl",[],function(){return'<template>\n    <xui-dialog s-ref="dialog" open="{=open=}" title="下载SDK" foot="{{false}}" width="640" class="ai-offlinesdk-download-dialog">\n        <div class="ai-offlinesdk-download-sdk">\n            <xui-tab>\n                <xui-tab-panel s-for="platform in platforms" title="{{platform.title}}">\n                    <p s-if="platform.tips" s-for="tip in platform.tips">{{tip | raw}}</p>\n                    <template s-if="!platform.tips">\n                        <p>提示一：以下SDK或示例工程，并未完成授权，您需要完成激活后才可使用，具体请参阅 <a href="{{Url.faceOfflineSdk.doc.active}}" target="_blank">SDK激活说明 &gt;&gt;</a></p>\n                        <p>提示二：SDK随着版本的升级，模型文件也会对应变化（SDK版本更新日志中会明确提示），不同模型版本之间，特征值无法共用，建议您保留业务侧收集到的人脸注册原图，以便更新使用新模型</p>\n                    </template>\n                    <div class="download-sdk-wrap">\n                        <template s-for="item in platform.items">\n                            <div class="download-sdk-item">\n                                <xui-button on-click="downloadSdk(platform.value, item.value)" size="large" skin="primary">{{item.title}}</xui-button>\n                                <div class="download-sdk-content">\n                                    <div>{{item.description}}</div>\n                                    <div>\n                                        <a target="_blank" href="{{item.link}}">查看SDK功能及接口说明 &gt;&gt;</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </template>\n                    </div>\n                </xui-tab-panel>\n            </xui-tab>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offline/DownloadSdk/index",["exports","module","./DownloadSdk","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/index",["exports","module","./OffLine","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/IndividualGuide/IndividualGuide",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/enums","ai/config/url"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](i);module.exports=n["default"]({template:'\n<div class="tutorial-wrap" s-if="isIndividual">\n    <div class="tutorial-header">\n        <template s-if="isQualifing">\n            企业认证中，我们将会在1-2个工作日内给您反馈信息，感谢您的耐心等待\n        </template>\n        <template s-if="!isQualifing">\n            完成企业认证，获取更多权益，\n            &nbsp;<a on-click="gotoCertiry" href="javascript:void(0)">立即认证</a>\n            <a class="open" on-click="toggleTutorial" href="javascript:void(0)">{{openGuide ? \'展开\' : \'收起\'}}</a>\n        </template>\n    </div>\n    <div s-if="!openGuide" class="tutorial-content">\n        <ul>\n            <li s-for="item in info[pageType]">\n                {{item}}\n            </li>\n        </ul>\n    </div>\n</div>\n',initData:function(){return{openGuide:!0,info:{offline:["获得5个测试授权，每个有效期3个月","下载完整版的安卓、Win、Linux SDK","不限阶梯的授权购买","专项的技术调试支持"],client:["获得4个测试应用授权，有效期6个月","可申请永久免费使用","可申请更多授权数量","下载完整版的安卓、Win、Linux SDK","专项的技术调试支持"]}}},computed:{isQualifing:function(){var e=this.data.get("qualification")||{},t=e.status;return e.type===a.AuthType.ENTERPRISE&&t===a.AuthStatus.CERTIFYING},isIndividual:function(){var e=this.data.get("qualification")||{},t=e.status;return e.type===a.AuthType.INDIVIDUAL||!(t===a.AuthStatus.CERTIFIED)}},toggleTutorial:function(){this.$set("openGuide",!this.$get("openGuide"))},gotoCertiry:function(){window.open(""+r["default"].enterpriseQualify)}})}),define("ai/page/offline/OffLine",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./OffLine.tpl","ai/common/enums","./BaseInfo/index","./SdkManage/index","./Certification/index","./AppList/index","./SpeechTestApply/index","./SpeechAppList/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c,p,f=a["default"](t),m=a["default"](i),h=a["default"](r),g=a["default"](s),v=a["default"](o),x=a["default"](l),b=a["default"](u),y=a["default"](d),k={BaseInfo:h["default"],SdkManage:g["default"],Certification:v["default"],AppList:x["default"],SpeechTestApply:b["default"],SpeechAppList:y["default"]},T={BaseInfo:"BaseInfo",SdkManage:"SdkManage",Certification:"Certification",AppList:"AppList",SpeechTestApply:"SpeechTestApply",SpeechAppList:"SpeechAppList"},w={client:(c={},c[n.AppType.face]={name:"采集",sdkType:2,detailPage:"AppList"},c),offline:(p={},p[n.AppType.face]={name:"识别",sdkType:1,detailPage:"SdkManage"},p[n.AppType.speech]={name:"合成",detailPage:"SpeechAppList"},p)};module.exports=f["default"]({template:m["default"],initData:function(){return{step:-1,pageLoaded:!1,applyStatus:{extendApply:{}}}},computed:{breadItem:function(){var e=w[this.data.get("pageType")][this.data.get("aiAppType")||n.AppType.face].name;return[{title:this.data.get("manageVisible")?"离线"+e+"SDK管理":"离线"+e+"SDK申请"}]},pageType:function(){var e=/^#\/ai\/([^\/]+)\/([^\/]+)\/.*/.exec(window.location.hash);return e&&e[2]||"offline"},baseInfoSuccess:function(){var e=this.data.get("baseStatus");return!!e&&+e.status==+n.BaseInfoStatus.Success},manageVisible:function(){return this.data.get("aiAppType")===n.AppType.speech||this.data.get("baseInfoSuccess")},stepList:function(){return[{text:"个人/企业认证"},{text:this.data.get("aiAppType")===n.AppType.speech?"试用申请":"基础信息认证"},{text:"应用管理"}]}},inited:function(){var e=this;this.watch("page",this.renderPage),this.on("getQulificationStatus",function(){return e.onGetQualificationStatus()})},renderPage:function(){var e=this,t=this.$get("page"),a=this.$get("pageType"),i=this.$get("aiAppType");switch(this.$set("pageLoaded",!0),t){case T.Certification:this.$$set({step:0,title:"个人/企业认证",pageType:this.$get("pageType")});break;case T.BaseInfo:this.$get("applyStatus.status")?this.$$set({step:1,title:"授权已过期"}):this.$$set({step:1,title:"基础信息认证",sdkType:w[a][i].sdkType});break;case T.SdkManage:this.$$set({title:"离线识别SDK管理",pageType:this.$get("pageType")});break;case T.AppList:this.$$set({title:"授权信息概览与管理",pageType:this.$get("pageType")});break;case T.SpeechTestApply:this.$$set({step:1,title:"语音合成离线SDK申请"})}this.page&&this.page.dispose(),this.page=new k[t]({data:this.data.get()}),this.nextTick(function(){return e.page.attach(e.ref("offlineWrap"))})},onGetQualificationStatus:function(){var t,a,i,r,s,o,l;return e["default"].async(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=this.$get("pageType"),a=this.$get("qualification"),i=a.certified,r=this.$get("aiAppType"),i){u.next=7;break}return this.$set("page",T.Certification),u.abrupt("return");case 7:if(r!==n.AppType.face){u.next=23;break}return u.next=10,e["default"].awrap(this.ajax.offLineBaseStatus({sdkType:w[t][r].sdkType}));case 10:if(s=u.sent,this.$set("baseStatus",s),this.$get("baseInfoSuccess")){u.next=15;break}return this.$set("page",T.BaseInfo),u.abrupt("return");case 15:if("client"!==this.$get("pageType")){u.next=23;break}return u.next=18,e["default"].awrap(this.ajax.applyStatus());case 18:if((o=u.sent).status!==n.ApplyStatus.EXPIRED){u.next=23;break}return this.$set("applyStatus",o),this.$set("page",T.BaseInfo),u.abrupt("return");case 23:if(r!==n.AppType.speech){u.next=31;break}return u.next=26,e["default"].awrap(this.ajax.speechOfflineApplyStatus());case 26:if(l=u.sent,l.status){u.next=31;break}return this.$set("page",T.SpeechTestApply),u.abrupt("return");case 31:this.$get("manageVisible")&&this.$set("page",T[w[t][r].detailPage]);case 32:case"end":return u.stop()}},null,this)}})}),define("ai/page/offline/OffLine.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        \x3c!-- 企业认证、基础信息认证、离线sdk管理页面 --\x3e\n        <app-content s-if="pageLoaded" class="offline-content">\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content">\n                <h2>{{title}}</h2>\n                <xui-viewstep s-if="!manageVisible" step-index=\'{{step}}\' steps="{{stepList}}" />\n                <div s-ref="offlineWrap" class="offline-wrapper"></div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/offline/SdkManage/ActiveDetail/ActiveDetail",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ActiveDetail.tpl","moment"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports=n["default"]({template:r["default"],initData:function(){return{nowTime:s["default"](Date.now()).format("YYYY.MM.DD HH:mm:ss"),open:!1,info:{}}},cancel:function(){this.$set("open",!1)},exCSV:function(){window.open("download/face/appauth/active?appId="+this.$get("info.id"))}})}),define("ai/page/offline/SdkManage/ActiveDetail/ActiveDetail.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="400" title="激活记录">\n        <div class="ai-offlinesdk-app-active">\n            <xui-form>\n                <xui-item label="总个数：">\n                    <div>{{info.allocateNum}}个</div>\n                </xui-item>\n                <xui-item label="已用次数：">\n                    <div>\n                        {{info.activeNum}}个\n                        <span>截止{{nowTime}}</span>\n                    </div>\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="exCSV" skin="primary">导出为CSV</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n    '}),define("ai/page/offline/SdkManage/ActiveDetail/index",["exports","module","./ActiveDetail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/ActiveOffline/ActiveOffline",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ActiveOffline.tpl","san-xui","ai/common/enums","ai/config/url"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u={DOWNLOAD_TOOL:1,FILL_DEVICEID:2,DOWNLOAD_AUTH_SDK:3,ACTIVE_READY:4};module.exports=o["default"]({template:l["default"],components:{"xui-form":n.Form,"xui-item":n.FormItem},initData:function(){return{link:s.faceOfflineSdk,FaceSdkActiveStatus:r.FaceSdkActiveStatus,page:u.DOWNLOAD_TOOL,PAGES:u,info:{},bindResult:{},errors:{},formData:{deviceId:""}}},computed:{foot:function(){return~[u.DOWNLOAD_TOOL,u.FILL_DEVICEID,u.DOWNLOAD_AUTH_SDK].indexOf(this.data.get("page"))},bindBtnDisabled:function(){return this.data.get("formData.deviceId").trim().length<=0}},created:function(){var e=this;this.watch("open",function(){e.reset()})},reset:function(){this.$$set({errors:{},page:u.DOWNLOAD_TOOL,"formData.deviceId":""})},cancel:function(){this.$set("open",!1)},goToFillDeviceId:function(){this.$set("page",u.FILL_DEVICEID)},bindDeviceId:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e["default"].awrap(this.ajax.offLineSdkBindDevice({authId:this.$get("info.authId"),deviceId:this.$get("formData.deviceId")}));case 3:t=i.sent,this.$$set({errors:{},page:u.DOWNLOAD_AUTH_SDK,bindResult:t}),this.fire("refresh"),i.next=12;break;case 8:i.prev=8,i.t0=i["catch"](0),a=i.t0.field,this.$set("errors",a);case 12:case"end":return i.stop()}},null,this,[[0,8]])},downloadSDK:function(){window.open("/ai/download/faceSdk/license?authId="+this.$get("info.authId")),this.$set("page",u.ACTIVE_READY)}})}),define("ai/page/offline/SdkManage/ActiveOffline/ActiveOffline.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="离线激活" width="700" foot="{{foot}}">\n        <div class="ai-offlinesdk-active-offline">\n            <div class="ao-step-wrap">\n                <div class="ao-item">\n                    运行采集工具<br>\n                    获取硬件指纹\n                </div>\n                <div class="ao-arrow">\n                    <xui-icon name="sort-ascending" />\n                </div>\n                <div class="ao-item {{ page >= PAGES.FILL_DEVICEID ? \'\' : \'isgray\' }}">\n                    填写硬件指纹<br>\n                    配置指纹\n                </div>\n                <div class="ao-arrow">\n                    <xui-icon name="sort-ascending" />\n                </div>\n                <div style="line-height: 36px;" class="ao-item {{ page >= PAGES.DOWNLOAD_AUTH_SDK? \'\' : \'isgray\' }}">\n                    下载授权文件\n                </div>\n                <div class="ao-arrow">\n                    <xui-icon name="sort-ascending" />\n                </div>\n                <div class="ao-item {{ page >= PAGES.ACTIVE_READY? \'\' : \'isgray\' }}">\n                    在设备上校验授权<br>\n                    激活完毕\n                </div>\n            </div>\n\n            \x3c!-- 采集工具 --\x3e\n            <div s-if="page === PAGES.DOWNLOAD_TOOL" class="tool-wrap">\n                \x3c!-- <p>采集工具下载（如之前已下载，请忽略此步）：<br>此工具用于在设备上一键获取硬件指纹，请对应系统下载。</p>\n                <div class="system-item-wrap">\n                    <a href="javascript:void(0)" class="system-item">Windows</a>\n                    <a href="javascript:void(0)" class="system-item">Linux</a>\n                    <a href="javascript:void(0)" class="system-item">Android</a>\n                    <a href="javascript:void(0)" class="system-item">IOS</a>\n                </div> --\x3e\n                <p style="text-align: center;"> SDK初始化时会自动读取硬件指纹 <br>请复制或记录完毕，进入下一步 </p>\n            </div>\n\n            \x3c!-- 填写硬件指纹 --\x3e\n            <div s-if="page === PAGES.FILL_DEVICEID" class="fill-deviceid">\n                <div class="fill-title">绑定硬件</div>\n                <div class="fill-tip">\n                    <p>\n                        <span class="tip-label">温馨提示：1、</span>\n                        您的授权即将绑定硬件指纹，绑定后将会生成对应指纹的授权文件；绑定后，只需将授权文件放到指定硬件上的SDK中运行即可；</p>\n                    <p>\n                        <span class="tip-label">2、</span>\n                        绑定前，请您仔细核对授权信息是否匹配，绑定后不允许撤销。</p>\n                </div>\n                <xui-form formData="{{formData}}" errors="{{errors}}">\n                    <xui-item label="授权标识：">\n                        <span>{{info.label}}</span>\n                    </xui-item>\n                    <xui-item label="序列号：">\n                        <span>{{info.serialNO}}</span>\n                    </xui-item>\n                    <xui-item name="deviceId" label="填写硬件指纹：">\n                        <xui-textbox value="{=formData.deviceId=}" />\n                    </xui-item>\n                </xui-form>\n            </div>\n\n            \x3c!-- 下载配置sdk ，成功 --\x3e\n            <div s-if="page === PAGES.DOWNLOAD_AUTH_SDK && bindResult.status === FaceSdkActiveStatus.ACTIVED" class="download-sdk">\n                <xui-icon name="ok-reverse" />\n                <div class="bind-tip">\n                    <h4>绑定硬件成功</h4>\n                    <p>请下载授权文件，将授权文件放到SDK指定位置即可，详情可查看SDK文档。</p>\n                </div>\n            </div>\n            \x3c!-- 下载配置sdk ，失败 --\x3e\n            <div s-if="page === PAGES.DOWNLOAD_AUTH_SDK && bindResult.status === FaceSdkActiveStatus.ACTIVE_FAILED" class="download-sdk">\n                <xui-icon class="active-failed" name="fail-reverse" />\n                <div class="bind-tip">\n                    <h4>绑定硬件失败！</h4>\n                    <p><a target="_blank" href="{{link.qa}}">查看原因>></a></p>\n                </div>\n            </div>\n\n            \x3c!-- 激活完毕 --\x3e\n            <div s-if="page === PAGES.ACTIVE_READY" class="sdk-actived">\n                <div class="tk-tip">\n                    感谢您的下载<br>\n                    SDK在设备上校验授权，校验成功则激活完毕！\n                </div>\n                <div class="link-tip">如下载失败，请尝试以下链接：</div>\n                <div class="link-wrap">\n                    <a on-click="downloadSDK" href="javascript:void(0)">下载授权文件</a>\n                </div>\n                <div class="work-order">\n                    如依然无法下载，请 <a href="//ticket.bce.baidu.com/#/ticket/create">提交工单>></a>\n                </div>\n            </div>\n\n        </div>\n\n        \x3c!-- 下载采集工具的页脚 --\x3e\n        <div s-if="page === PAGES.DOWNLOAD_TOOL" slot="foot">\n            <xui-button on-click="goToFillDeviceId" skin="primary">下一步</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n\n        \x3c!-- 填写硬件指纹 --\x3e\n        <div s-if="page === PAGES.FILL_DEVICEID" slot="foot">\n            <xui-button disabled="{{bindBtnDisabled}}" on-click="bindDeviceId" skin="primary">绑定</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n\n        \x3c!-- 绑定授权离线sdk --\x3e\n        <div s-if="page === PAGES.DOWNLOAD_AUTH_SDK" slot="foot">\n            <xui-button on-click="downloadSDK" skin="primary" s-if="bindResult.status === FaceSdkActiveStatus.ACTIVED">下载授权文件</xui-button>\n            <xui-button on-click="reset" skin="primary" s-if="bindResult.status === FaceSdkActiveStatus.ACTIVE_FAILED">再试一次</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offline/SdkManage/ActiveOffline/index",["exports","module","./ActiveOffline","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/ActiveOnline/ActiveOnline",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ActiveOnline.tpl","san-xui","ai/common/enums","ai/config/url"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i);module.exports=o["default"]({template:l["default"],components:{"xui-icon":n.Icon},initData:function(){return{link:s.faceOfflineSdk,FaceSdkActiveStatus:r.FaceSdkActiveStatus,status:null,open:!1,info:{}}},computed:{foot:function(){var e=this.data.get("status");return!e||e===r.FaceSdkActiveStatus.ACTIVE_FAILED}},created:function(){var e=this;this.watch("open",function(){e.resetStatus()})},resetStatus:function(){this.$set("status",null)},fetchSdkStatus:function(){var t,a;return e["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.offLineSdkStatus({authId:this.$get("info.authId")}));case 2:t=i.sent,a=t.status,this.$get("open")&&a===r.FaceSdkActiveStatus.NOT_ACTIVED?setTimeout(function(){n.fetchSdkStatus()},200):this.fire("refresh"),this.$set("status",a);case 6:case"end":return i.stop()}},null,this)},startPoll:function(){this.$set("status",r.FaceSdkActiveStatus.NOT_ACTIVED),this.fetchSdkStatus()},closeDialog:function(){this.$set("open",!1)}})}),define("ai/page/offline/SdkManage/ActiveOnline/ActiveOnline.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="联网激活" foot="{{foot}}">\n        <div class="ai-offlinesdk-active-online">\n            <div class="ao-step-wrap">\n                <div class="ao-item">\n                    在SDK配置界面<br>\n                    中填写序列号\n                </div>\n                <div class="ao-arrow">\n                    <xui-icon name="sort-ascending" />\n                </div>\n                <div class="ao-item {{ status? \'\' : \'isgray\' }}">\n                    点击激活按钮<br>\n                    启动激活\n                </div>\n                <div class="ao-arrow">\n                    <xui-icon name="sort-ascending" />\n                </div>\n                <div class="ao-item {{ (status === FaceSdkActiveStatus.ACTIVED || status === FaceSdkActiveStatus.ACTIVE_FAILED)? \'\' : \'isgray\' }}">\n                    SDK自动联网<br>\n                    激活完毕\n                </div>\n            </div>\n            \x3c!-- 填入序列号 --\x3e\n            <div s-if="!status" class="ao-step-1-2">\n                <p>请在SDK配置文件中输入以下序列号：</p>\n                <p><strong>{{info.serialNO}}</strong></p>\n            </div>\n            \x3c!-- 等待激活 --\x3e\n            <div s-if="status === FaceSdkActiveStatus.NOT_ACTIVED" class="ao-step-1-2" style="margin-bottom:20px;">\n                <p>将SDK安装到设备上，运行SDK内激活函数</p>\n                <p><strong>等待激活...</strong></p>\n            </div>\n            \x3c!-- 成功 --\x3e\n            <div s-if="status === FaceSdkActiveStatus.ACTIVED" class="ao-step-3">\n                <xui-icon name="ok-reverse" />\n                联网激活成功\n            </div>\n            \x3c!-- 失败 --\x3e\n            <div s-if="status === FaceSdkActiveStatus.ACTIVE_FAILED" class="ao-step-4">\n                <xui-icon name="fail-reverse" />\n                <div class="err-tip">\n                    联网激活失败！<br>\n                    <a target="_blank" href="{{link.qa}}">查看原因</a>\n                </div>\n            </div>\n        </div>\n        \x3c!-- 未知状态时页脚 --\x3e\n        <div s-if="!status" slot="foot">\n            <xui-button on-click="startPoll" skin="primary">下一步</xui-button>\n            <xui-button on-click="closeDialog">取消</xui-button>\n        </div>\n        \x3c!-- 失败状态时页脚 --\x3e\n        <div s-if="status === FaceSdkActiveStatus.ACTIVE_FAILED" slot="foot">\n            <xui-button on-click="resetStatus" skin="primary">再试一次</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offline/SdkManage/ActiveOnline/index",["exports","module","./ActiveOnline","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/AppApply/AppApply",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./AppApply.tpl","san-xui","ai/common/enums","./rules","../configEnum"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](s);module.exports=l["default"]({template:u["default"],components:{"xui-form":n.Form,"xui-item":n.FormItem,"xui-radiobox":n.RadioBox},computed:{rules:function(){return d["default"]({appTopInfo:this.data.get("appTopInfo"),type:this.data.get("form.type")})},allocateNum:function(){var e=this.data.get("form.type"),t=this.data.get("appTopInfo");return e===r.EasydlLicenseType.PROBATION?t[o.TOP_INFO_TYPE.TRAIL].allNum-t[o.TOP_INFO_TYPE.TRAIL].allocateNum:t[o.TOP_INFO_TYPE.OFFICIAL].allNum-t[o.TOP_INFO_TYPE.OFFICIAL].allocateNum}},initData:function(){return{errors:{},form:{type:r.EasydlLicenseType.PROBATION},open:!1}},created:function(){var e=this;this.watch("open",function(){e.$set("form",{type:r.EasydlLicenseType.PROBATION})})},cancel:function(){this.$set("open",!1)},chageType:function(e){var t=this;this.$set("form.type",e),this.nextTick(function(){return t.ref("form").validateFormItem("allocateNum")})},submit:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ref("form").validateForm());case 2:return t.prev=2,t.next=5,e["default"].awrap(this.ajax.offLineAuthCreate(this.$get("form")));case 5:this.$toast("提交成功"),this.fire("success"),this.cancel(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),t.t0.field&&this.$set("errors",t.t0.field);case 13:case"end":return t.stop()}},null,this,[[2,10]])}})}),define("ai/page/offline/SdkManage/AppApply/AppApply.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="400" title="新建离线SDK授权应用">\n        <div class="ai-offlinesdk-app-apply">\n            <xui-form errors="{=errors=}" formData="{{form}}" rules="{{rules}}" s-ref="form">\n                <xui-item label="应用名称：" name="name" required>\n                    <xui-textbox value="{=form.name=}" width="235" placeholder="用于管理应用的备注信息" />\n                    <xui-tip width="180" message="用来管理应用的备注信息，仅作为业务管理使用，可根据业务情况自定义填写" />\n                </xui-item>\n                <xui-item label="License ID：" name="licenseId" required>\n                    <xui-textbox value="{=form.licenseId=}" width="235" placeholder="用户标识授权文件的ID，自定义填写" />\n                    <xui-tip width="180" message="用于标识您应用的license授权信息，每个应用只能有唯一的标识，支持英文、数字、横线格式，50个英文字符以内，应用创建时系统会自动在后台增加后缀，具体以应用列表显示为准" />\n                </xui-item>\n                <xui-item label="包名：" name="packageName" required>\n                    <xui-textbox value="{=form.packageName=}" width="235" placeholder="安卓工程的 Package Name" />\n                    <xui-tip width="180" message="也称为Package Name，是安卓应用的唯一标识。有的软件在使用中会建立包名的文件夹，然后在里面存放数据" />\n                </xui-item>\n                <xui-item label="签名的md5：" name="sign" required>\n                    <xui-textbox value="{=form.sign=}" width="235" placeholder="安卓包签名的keystore文件中私钥的数据摘要" />\n                    <xui-tip width="180" message="安卓包签名的keystore文件中私钥的数据摘要，用于生成Android SDK生成对应License时的主要依据。<a href=\'{{Url.getMd5}}\' target=\'_blank\'>查看如何获取</a>" />\n                </xui-item>\n                <xui-item label="分配授权：" name="type" required>\n                    <xui-radiobox name="group1" on-change="chageType(0)" checked="{{form.type === 0}}" title="试用版" />\n                    <xui-tip width="180" message="试用版本的授权具备一定有效期，建议仅做本地测试开发使用，如需转为生产环境，请新建一个应用，并分配同样的应用信息，仅LicenseID不同即可" class="test-tip"/>\n                    <xui-radiobox name="group1" on-change="chageType(1)" checked="{{form.type === 1}}" title="正式版" />\n                    <xui-tip width="180" message="正式版本的授权会直接消耗现有分配的授权，后续无法修改为试用版本授权。暂不支持应用的删除，如果需要关闭应用，可在后续管理授权中，回收此应用所有的可分配授权数即可" />\n                </xui-item>\n                <xui-item label="" name="allocateNum" required>\n                    <xui-textbox value="{=form.allocateNum=}" width="50"/>\n                    <span class="unit">个</span>\n                    <div class="availa-num">\n                        剩余可分配个数：{{allocateNum}}\n                    </div>\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="submit" skin="primary">创建应用</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offline/SdkManage/AppApply/index",["exports","module","./AppApply","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/AppApply/rules",["exports","module","async-validator","ai/common/enums","../configEnum"],function(exports,module,e,t,a){module.exports=function(i){var n=i.type,r=i.appTopInfo,s={name:[{required:!0,message:"请填写应用名称"},{max:50,message:"仅支持中英文或数字，长度50个英文字符内"},{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]+$/,message:"应用名称仅支持中英文或数字"}],licenseId:[{required:!0,message:"请填写license ID"},{max:50,message:"仅支持英文、数字、横线，长度50个英文字符内"},{pattern:/^[a-zA-Z0-9-]+$/,message:"licenseId 仅支持英文、数字、横线"}],packageName:[{required:!0,message:"请填写包名"},{max:50,message:"仅支持英文、数字、横线和.，长度50个英文字符内"},{pattern:/^[a-zA-Z0-9-.]+$/,message:"包名仅支持英文、数字、横线和."}],sign:[{validator:function(e,t,a,i){t?/^[a-zA-Z0-9:]+$/.test(t)?32===(t=t.replace(/:/g,"")).length?a():a("请检查位数是否正确"):a("只支持数字、英文、冒号形式的输入"):a("请填写md5")}}],type:[{required:!0,message:"请选择授权类型"}],allocateNum:[{validator:function(e,i,s,o){if(i){var l=n===t.EasydlLicenseType.PROBATION?r[a.TOP_INFO_TYPE.TRAIL].allNum-r[a.TOP_INFO_TYPE.TRAIL].allocateNum:r[a.TOP_INFO_TYPE.OFFICIAL].allNum-r[a.TOP_INFO_TYPE.OFFICIAL].allocateNum;!/^[0-9]+$/.test(i)||i<1||i>l?s("请填正确的数量"):s()}else s("请填写分配数量")}}]};return new e["default"](s)}}),define("ai/page/offline/SdkManage/AppDetail/AppDetail",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./AppDetail.tpl","san-xui","ai/common/enums","./rules"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i),u=a["default"](s);module.exports=o["default"]({template:l["default"],components:{"xui-form":n.Form,"xui-item":n.FormItem,"xui-radiobox":n.RadioBox},filters:{getTypeName:function(e){return r.EasydlLicenseType.getTextFromValue(e)}},computed:{rules:function(){return u["default"]({activeNum:this.data.get("info.activeNum"),leftNum:this.data.get("info.leftNum")})}},initData:function(){return{errors:{},leftNum:null,info:{},open:!1}},created:function(){var e=this;this.watch("open",function(){e.$set("leftNum",null)})},cancel:function(){this.$set("open",!1)},submit:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ref("form").validateForm());case 2:return t.prev=2,t.next=5,e["default"].awrap(this.ajax.offLineAuthUpdate({allocateNum:this.$get("leftNum"),id:this.$get("info.id")}));case 5:this.$toast("提交成功"),this.fire("success"),this.cancel(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),t.t0.field&&this.$set("errors",t.t0.field);case 13:case"end":return t.stop()}},null,this,[[2,10]])}})}),define("ai/page/offline/SdkManage/AppDetail/AppDetail.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="455" title="应用详细信息">\n        <div class="ai-offlinesdk-app-detail">\n            <xui-form errors="{=errors=}" rules="{{rules}}" s-ref="form">\n                <xui-item label="应用名称：">\n                    <div>{{info.name}}</div>\n                </xui-item>\n                <xui-item label="License ID：">\n                    <div>{{info.licenseId}}</div>\n                </xui-item>\n                <xui-item label="包名：">\n                    <div>{{info.packageName}}</div>\n                </xui-item>\n                <xui-item label="签名的md5：" class="sign">\n                    <div>{{info.sign}}</div>\n                </xui-item>\n                <xui-item label="分配授权：">\n                    <div>{{info.type | getTypeName}}</div>\n                </xui-item>\n                <xui-item label="授权总数：">\n                    <div>{{info.allNum}}</div>\n                </xui-item>\n                <xui-item label="已激活次数：">\n                    <div>{{info.activeNum}}</div>\n                </xui-item>\n                <xui-item label="可分配:" name="leftNum" required>\n                    <xui-textbox value="{=leftNum=}" width="50"/>\n                    <span class="unit">个</span>\n                    <xui-tip message="暂不支持应用的删除，如果需要关闭应用，可回收此应用所有的可分配授权数即可" />\n                    <div class="availa-num">\n                        剩余可分配个数：{{info.activeNum}}-{{info.leftNum}}\n                    </div>\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="submit" skin="primary">保存</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offline/SdkManage/AppDetail/index",["exports","module","./AppDetail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/AppDetail/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=function(t){var a=t.leftNum,i=t.activeNum,n=i>1?i:1,r={leftNum:[{validator:function(e,t,i,r){t?!/^[0-9]+$/.test(t)||t<n||t>a?i("请填正确的数量"):i():i("请填写分配数量")}}]};return new e["default"](r)}}),define("ai/page/offline/SdkManage/ApplyTest/ApplyTest",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ApplyTest.tpl","san-xui","ai/common/util","../configEnum"],function(exports,module,e,t,a,i,n,r,s){var o=a["default"](t),l=a["default"](i);module.exports=o["default"]({template:l["default"],components:{"xui-form":n.Form,"xui-item":n.FormItem},initData:function(){return{open:!1,reason:"",loading:!1}},computed:{disabled:function(){var e=this.data.get("reason"),t=r.realLength(e);return this.data.get("info").currentType===s.AUTH_TYPE.SERIAL?this.data.get("loading")||e.length<15||e.length>500:this.data.get("loading")||t<200}},created:function(){var e=this;this.watch("open",function(){e.$set("reason","")})},cancel:function(){this.$set("open",!1)},submit:function(){var t,a,i,n,r,o,l,u;return e["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:return n=this.$get("reason"),r=this.$get("info"),o=r.currentType,l=r.type,this.$set("loading",!0),i={},i[s.AUTH_TYPE.APP]=(t={},t[s.APPLY_TYPE.APPLY]="offLineAuthApply",t[s.APPLY_TYPE.EXTEND]="offLineAuthExtend",t),i[s.AUTH_TYPE.SERIAL]=(a={},a[s.APPLY_TYPE.APPLY]="offLineTestSubmit",a),u=i,d.prev=6,d.next=9,e["default"].awrap(this.ajax[u[o][l]]({reason:n}));case 9:this.$toast("提交成功"),this.cancel(),this.fire("success"),d.next=26;break;case 14:if(d.prev=14,d.t0=d["catch"](6),!d.t0){d.next=25;break}if(!d.t0.global){d.next=22;break}return this.$toast(d.t0.global,{messageType:"error"}),d.abrupt("return");case 22:if(!d.t0.field||!d.t0.field.reason){d.next=25;break}return this.$toast(d.t0.field.reason,{messageType:"error"}),d.abrupt("return");case 25:this.$toast("发生错误",{messageType:"error"});case 26:return d.prev=26,this.$set("loading",!1),d.finish(26);case 29:case"end":return d.stop()}},null,this,[[6,14,26,29]])}})}),define("ai/page/offline/SdkManage/ApplyTest/ApplyTest.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="700" title="{{info.title}}">\n        <div class="ai-offlinesdk-apply-test">\n            <div class="extend-tip" s-if="info.currentType === \'app\'">\n                温馨提示：申请理由请认真填写，这将作为唯一的审核依据\n            </div>\n            <xui-form>\n                <xui-item label="申请理由：" required>\n                    <xui-textbox \n                        value="{=reason=}"\n                        multiline\n                        placeholder="{{info.currentType === \'app\' ? \'请至少填写100个汉字用来描述您的申请理由\' : \'请您详细描述申请更多测试序列号的理由，以及需要的序列号数量、对应有效期，限定15-500个字\'}}" />\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <xui-button on-click="submit" skin="primary" disabled="{{disabled}}">确定</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offline/SdkManage/ApplyTest/index",["exports","module","./ApplyTest","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/configEnum",["exports"],function(exports){exports.__esModule=!0;exports.AUTH_TYPE={SERIAL:"serial",APP:"app"};exports.TOP_INFO_TYPE={TRAIL:"trail",OFFICIAL:"official"};exports.APPLY_TYPE={APPLY:"apply",EXTEND:"extend"};exports.TYPE_TO_ID={serial:230,app:530}}),define("ai/page/offline/SdkManage/DetailDialog/DetailDialog",["exports","module","san-xui","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./DetailDialog.tpl","ai/common/enums"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i);module.exports=r["default"]({template:s["default"],components:{"xui-dialog":e.Dialog,"xui-form":e.Form,"xui-item":e.FormItem},initData:function(){return{open:!1,info:{},editing:!1,newLabel:""}},computed:{newLabel:function(){return this.data.get("info.label")}},filters:{typeFilter:function(e){var t=n.FaceSdkTypeStatus.valueIndex[e];return t?t.text:""},activeFilter:function(e){var t=n.FaceSdkActiveStatus.valueIndex[e];return t?t.text:""}},editeLabel:function(){var e=this;this.$set("editing",!0),this.nextTick(function(){e.ref("editInput").focus()})},onKeyUp:function(e){13===e.keyCode&&this.updateLabel()},updateLabel:function(){var t=this;this.$set("editing",!1);var a=this.$get("info"),i=a.authId,n=a.label,r=this.$get("newLabel").trim();r&&r!==n?this.ajax.offLineUpdateLabel({authId:i,label:r}).then(function(){t.fire("updateLabel"),t.$set("info.label",r)},function(a){t.$set("newLabel",n),a.field&&a.field.label&&e.notification.error(a.field.label)}):this.$set("newLabel",n)}})}),define("ai/page/offline/SdkManage/DetailDialog/DetailDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="详细信息" foot="{{false}}" class="ai-offline-sdk-detail-dialog-wrap">\n        <div class="ai-offline-sdk-detail-dialog">\n            \x3c!-- <div class="detail-tip">温馨提示：绑定后，只需下载已配置完毕的SDK，并在指定硬件上运行即可；</div> --\x3e\n            <xui-form>\n                <xui-item label="授权标识：" class="{{editing ? \'editing\' : \'\'}}">\n                    <span class="detail-cell">{{info.label}}<i class="iconfont icon-business-consult" on-click="editeLabel"></i></span>\n                    <div class="ui-textbox"><input s-ref="editInput" value="{=newLabel=}" maxlength="50" on-blur="updateLabel" on-keyup="onKeyUp($event)"></div>\n                </xui-item>\n                <xui-item label="序列号：">\n                    <span class="detail-cell">{{info.serialNO}}</span>\n                </xui-item>\n                <xui-item label="硬件指纹：">\n                    <span class="detail-cell">{{info.deviceId}}</span>\n                </xui-item>\n                <xui-item label="状态类型：">\n                    <span class="detail-cell">{{info.typeStatus | typeFilter}}</span>\n                </xui-item>\n                <xui-item label="AI市场订单号：" s-if="info.aiMarketOrderID">\n                    <span class="detail-cell">{{info.aiMarketOrderID}}</span>\n                </xui-item>\n                <xui-item label="有效期：">\n                    <span class="detail-cell">{{info.expiredTime}}</span>\n                </xui-item>\n                <xui-item label="激活状态：">\n                    <span class="detail-cell">{{info.activeStatus | activeFilter}}</span>\n                </xui-item>\n                <xui-item label="激活时间：">\n                    <span class="detail-cell">{{info.activeTime}}</span>\n                </xui-item>\n            </xui-form>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offline/SdkManage/DetailDialog/index",["exports","module","./DetailDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/Dialogs/index",["exports","../AppDetail/index","babel-runtime/helpers/interop-require-default","../ActiveDetail/index","../AppApply/index","../DetailDialog/index","../ActiveOnline/index","../ActiveOffline/index","../../DownloadSdk/index"],function(exports,e,t,a,i,n,r,s,o){exports.__esModule=!0;var l=t["default"](e),u=t["default"](a),d=t["default"](i),c=t["default"](n),p=t["default"](r),f=t["default"](s),m=t["default"](o),h={name:"AppDetail",dialog:l["default"]};exports.AppDetailDialog=h;var g={name:"ActiveDetail",dialog:u["default"]};exports.ActiveDetailDialog=g;var v={name:"AppApply",dialog:d["default"]};exports.AppApplyDialog=v;var x={name:"DetailDialog",dialog:c["default"]};exports.DetailDialog=x;var b={name:"ActiveOnline",dialog:p["default"]};exports.ActiveOnlineDialog=b;var y={name:"ActiveOffline",dialog:f["default"]};exports.ActiveOfflineDialog=y;var k={name:"DownLoadSDK",dialog:m["default"]};exports.DownLoadSDKDialog=k}),define("ai/page/offline/SdkManage/fields",["exports","ai/common/enums"],function(exports,e){exports.__esModule=!0;var t;exports.schema=[{name:"rowNumber",label:"序号"},{name:"label",label:"标识"},{name:"serialNO",label:"序列号",width:190},{name:"expiredTime",label:"有效期"},{name:"typeStatus",label:"状态类型"},{name:"activeStatus",label:"激活状态"},{name:"control",label:"操作",width:280}];exports.appSchema=[{name:"rowNumber",label:"序号"},{name:"name",label:"应用名称"},{name:"licenseId",label:"License Id"},{name:"packageName",label:"包名"},{name:"nums",label:"已分配/已激活"},{name:"type",label:"类型"},{name:"expiredTime",label:"有效期"},{name:"control",label:"操作",width:200}];var a=[["查看","SHOW_DETAIL"],["下载授权文件","DOWNLOAD_SDK"],["联网激活","ACTIVE_ONLINE"],["离线激活","ACTIVE_OFFLINE"]],i=function(t,a){return""+e.FaceSdkTypeStatus[t]+e.FaceSdkActiveStatus[a]},n=(t={},t[i("PROBATION","ACTIVED")]=[1,0],t[i("EXPIRED","ACTIVED")]=[1,0],t[i("RELEASE","NOT_ACTIVED")]=[2,3,0],t[i("RELEASE","ACTIVED")]=[1,0],t[i("TEST","NOT_ACTIVED")]=[2,3,0],t[i("AI_MARKET","NOT_ACTIVED")]=[2,3,0],t[i("AI_MARKET","ACTIVED")]=[1,0],t);exports.cellRenderer=function(t,i,r,s){if("label"===i)return'\n        <div class="sdk-lbl-tb-wrap '+(t.__editing?"editing":"")+'">\n            <div class="sdk-cell-lbl">'+t[i]+'\n                <a data-command="EDIT_CELL" href="javascript:void(0)">\n                    <i class="iconfont icon-business-consult"></i>\n                </a>\n            </div>\n            <div class="ui-textbox"><input value="'+t[i]+'" id="sdk_cell_input_'+s+'" maxlength="50"></div>\n        </div>\n        ';if("typeStatus"===i)return e.FaceSdkTypeStatus.valueIndex[t[i]].text;if("activeStatus"===i)return e.FaceSdkActiveStatus.valueIndex[t[i]].text;if("control"===i){var o=""+t.typeStatus+t.activeStatus;return n[o].map(function(e){var t=a[e];return t[1]?'<a class="ctl-item" data-command="'+t[1]+'" href="javascript:void(0)">'+t[0]+"</a>":'<span style="cursor: not-allowed;" class="ctl-item-gray">'+t[0]+"</span>"}).join("|")}return t[i]}}),define("ai/page/offline/SdkManage/index",["exports","module","./SdkManage","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SdkManage/SdkManage",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/object/keys","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./SdkManage.tpl","san-xui","ai/common/enums","./fields","lodash","./ApplyTest/index","ai/config/url","er/URL","moment","./configEnum","../IndividualGuide/IndividualGuide","./Dialogs/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g){var v=n["default"](i),x=n["default"](r),b=n["default"](u),y=n["default"](d),k=n["default"](p),T=n["default"](f),w=n["default"](h),I=function(e){return[{text:"全部",value:-1}].concat(e.toArray().filter(function(e){return"ACTIVE_FAILED"!==e.alias}))},D=function(e){var t=arguments.length<=1||arguments[1]===undefined?"":arguments[1];return e>0?""+T["default"](e).format("YYYY.MM.DD")+t:"永久有效"};module.exports=v["default"]({template:x["default"],components:{"detail-dialog":g.DetailDialog.dialog,"active-online":g.ActiveOnlineDialog.dialog,"active-offline":g.ActiveOfflineDialog.dialog,"app-apply":g.AppApplyDialog.dialog,"download-sdk":g.DownLoadSDKDialog.dialog,"apply-test":y["default"],"app-detail":g.AppDetailDialog.dialog,"active-detail":g.ActiveDetailDialog.dialog,"xui-searchbox":s.SearchBox,"xui-tab":s.Tab,"xui-tab-panel":s.TabPanel,"individual-guide":w["default"]},initData:function(){var e,t,a;return{link:c.faceOfflineSdk,pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]},pageInfo:(e={},e[m.AUTH_TYPE.SERIAL]={pageNo:1,pageSize:10,totalCount:0},e[m.AUTH_TYPE.APP]={pageNo:1,pageSize:10,totalCount:0},e),table:(t={},t[m.AUTH_TYPE.SERIAL]={schema:l.schema,cellRenderer:l.cellRenderer,datasource:[]},t[m.AUTH_TYPE.APP]={appSchema:l.appSchema,datasource:[]},t.loading=!1,t),unpaidDialog:{open:!1,unpaidId:""},testApply:{open:!1,status:o.BaseInfoStatus.NotApply},filters:{typeStatus:"",activeStatus:""},isOpenSearch:!1,FaceSdkTypeStatusList:I(o.FaceSdkTypeStatus),FaceSdkActiveStatusList:I(o.FaceSdkActiveStatus),selectedItems:[],currentType:m.AUTH_TYPE.SERIAL,appTopInfo:(a={},a[m.TOP_INFO_TYPE.TRAIL]={expireTime:-1,allNum:0,allocateNum:0,activeNum:0},a[m.TOP_INFO_TYPE.OFFICIAL]={expireTime:-1,allNum:0,allocateNum:0,activeNum:0},a),appTopList:[{key:m.TOP_INFO_TYPE.TRAIL,title:"试用版"},{key:m.TOP_INFO_TYPE.OFFICIAL,title:"正式版"}],testApplyInfo:{}}},filters:{handleTime:function(e){return D(e,"到期")},handleListTime:function(e){var t,a=this.data.get("appTopInfo"),i=(t={},t[o.EasydlLicenseType.PROBATION]=a[m.TOP_INFO_TYPE.TRAIL].expireTime,t[o.EasydlLicenseType.RELEASE]=a[m.TOP_INFO_TYPE.OFFICIAL].expireTime,t)[e];return D(i)},getTypeName:function(e){return o.EasydlLicenseType.getTextFromValue(e)}},computed:{applyReviewing:function(){return this.data.get("testApply.status")===o.BaseInfoStatus.Reviewing},filterParams:function(){var e=this.data.get("filters"),a={};return t["default"](e).map(function(t){""!==e[t]&&(a[t]=e[t])}),a},appTrialApplyVisible:function(){return this.data.get("appTopInfo.applyNumStatus")===o.BaseInfoStatus.Reviewing},appTrialExtendVisible:function(){return this.data.get("appTopInfo.applyExtendStatus")===o.BaseInfoStatus.Reviewing},ENTERPRISE_CERTIFIED:function(){return~this.data.get("qualification").state.indexOf(o.QualificationStatus.ENTERPRISE_CERTIFIED)}},toggleTutorial:function(){this.$set("baseStatus.actived",!this.$get("baseStatus.actived"))},changeTab:function(e){var t=0===e.value.selectedIndex?m.AUTH_TYPE.SERIAL:m.AUTH_TYPE.APP;this.$set("currentType",t),this.$get("table."+t+".datasource").length||this.fetchPage()},created:function(){var e=this;this.watch("filters.typeStatus",function(){return e.fetchPage()}),this.watch("filters.activeStatus",function(){return e.fetchPage()}),t["default"](m.AUTH_TYPE).forEach(function(t){e.watch("pageInfo."+m.AUTH_TYPE[t]+".pageNo",function(){return e.fetchPage()}),e.watch("pageInfo."+m.AUTH_TYPE[t]+".pageSize",function(){return e.fetchPage()})}),this.fetchPage(),this.getAppBaseInfo(),this.getTextApplyStatus()},fetchPage:b["default"].debounce(function(){var t,i,n,r,s,o,l,u;return a["default"].async(function(d){for(;;)switch(d.prev=d.next){case 0:if(i=this.$get(),n=i.pageInfo,r=i.currentType,s=n[r],o=s.pageNo,l=s.pageSize,this.$set("table.loading",!0),u={result:[]},r!==m.AUTH_TYPE.SERIAL){d.next=20;break}return d.prev=9,d.next=12,a["default"].awrap(this.ajax.offLineSdkList(e["default"]({pageNo:o,pageSize:l},this.$get("filterParams"))));case 12:u=d.sent,d.next=18;break;case 15:d.prev=15,d.t0=d["catch"](9),this.$set("table.loading",!1);case 18:d.next=23;break;case 20:return d.next=22,a["default"].awrap(this.ajax.offLineAuthList({pageNo:o,pageSize:l}));case 22:u=d.sent;case 23:u.result.forEach(function(e,t){e.rowNumber=(u.pageNo-1)*u.pageSize+t+1,e.control="control"}),this.$$set((t={},t["pageInfo."+r+".totalCount"]=u.totalCount,t["table."+r+".datasource"]=u.result,t["table.loading"]=!1,t));case 25:case"end":return d.stop()}},null,this,[[9,15]])},100),getAppBaseInfo:function(){var e;return a["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].awrap(this.ajax.offLineAuthBaseInfo());case 2:e=t.sent,this.$set("appTopInfo",e);case 4:case"end":return t.stop()}},null,this)},getTextApplyStatus:function(){var e;return a["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].awrap(this.ajax.offLineTestStatus());case 2:e=t.sent,this.$set("testApply.status",e.status);case 4:case"end":return t.stop()}},null,this)},onCommand:function(e){var t=e.type,a=e.payload,i=e.rowIndex-1;switch(t){case"EDIT_CELL":this.toggleCellInput(i,!0),this.bindBlurHandle(a,i);break;case"SHOW_DETAIL":this.showRowDialog(a,g.DetailDialog.name);break;case"ACTIVE_ONLINE":this.showRowDialog(a,g.ActiveOnlineDialog.name);break;case"ACTIVE_OFFLINE":this.showRowDialog(a,g.ActiveOfflineDialog.name);break;case"DOWNLOAD_SDK":window.open("/ai/download/faceSdk/license?authId="+a.authId)}},onPagerChange:function(e){var t=e.pageNo,a=this.$get("currentType");this.$set("pageInfo."+a+".pageNo",t)},toggleCellInput:function(e,t){this.$set("table."+m.AUTH_TYPE.SERIAL+".datasource["+e+"].__editing",t)},updateLabel:function(e,t){return a["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(t.trim().length<=0)){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,a["default"].awrap(this.ajax.offLineUpdateLabel({authId:e.authId,label:t}));case 5:this.fetchPage(),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](2),i.t0.field&&i.t0.field.label&&s.notification.error(i.t0.field.label);case 11:case"end":return i.stop()}},null,this,[[2,8]])},bindBlurHandle:function(e,t){var a=this;this.nextTick(function(){var i=document.getElementById("sdk_cell_input_"+t);i.onblur=function(){a.toggleCellInput(t,!1),i.value!==e.label&&a.updateLabel(e,i.value)},i.onkeyup=function(e){13===e.keyCode&&i.onblur()},i.focus();var n=i.value;i.value="",i.value=n})},searchHanlder:function(){1!==this.$get("pageInfo.page")?this.$set("pageInfo.page",1):this.fetchPage()},onTableRowSelected:function(e){this.$set("selectedItems",e.selectedItems)},exportNo:function(){if(this.$get("selectedItems").length){var e=this.$get("selectedItems").map(function(e){return e.authId}).join(",");this["export"](e)}else this.$toast("请选择序列号",{messageType:"error"})},"export":function(e){var t={id:e};window.open("/ai/download/face/serialKey?"+k["default"].serialize(t))},handleDialogs:function(t,a){this.ref(t).$$set(e["default"]({},a))},changeSearchArea:function(e){this.$set("isOpenSearch",e)},showRowDialog:function(e,t){this.handleDialogs(t,{open:!0,info:e})},showDownloadSdk:function(){var e,t;return a["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a["default"].awrap(this.ajax.offLineUserStatus());case 2:e=i.sent,t=e.sdkVersion,this.handleDialogs(g.DownLoadSDKDialog.name,{open:!0,sdkVersion:t});case 5:case"end":return i.stop()}},null,this)},openAppApply:function(){this.handleDialogs(g.AppApplyDialog.name,{open:!0})},handleApp:function(t){var a=this.data.get("appTopInfo"),i=t.type===o.EasydlLicenseType.PROBATION?a[m.TOP_INFO_TYPE.TRAIL]:a[m.TOP_INFO_TYPE.OFFICIAL];this.handleDialogs(g.AppDetailDialog.name,{info:e["default"]({},t,{allNum:i.allNum,leftNum:i.allNum-i.allocateNum+t.allocateNum}),open:!0})},goToShopCart:function(){var e;return a["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].awrap(this.ajax.getUnpaidId({type:"face",productType:"sdks"}));case 2:if(!(e=t.sent)){t.next=6;break}return this.$set("unpaidDialog",{open:!0,unpaidId:e}),t.abrupt("return");case 6:this.$aiRedirect("offline/shopCart",{type:this.$get("currentType")});case 7:case"end":return t.stop()}},null,this)},applyTest:function(){var e,t,a=arguments.length<=0||arguments[0]===undefined?"apply":arguments[0],i=this.$get("currentType"),n=(t={},t[m.AUTH_TYPE.SERIAL]="申请测试序列号",t[m.AUTH_TYPE.APP]=(e={},e[m.APPLY_TYPE.APPLY]="申请更多测试授权数",e[m.APPLY_TYPE.EXTEND]="申请延长有效期",e),t);this.$$set({testApplyInfo:{title:n[i][a]||n[i],currentType:i,type:a},"testApply.open":!0})},applyTestSuccess:function(){var e,t,a,i=this.$get("testApplyInfo"),n=i.currentType,r=i.type,s=(a={},a[m.AUTH_TYPE.SERIAL]=(e={},e[m.APPLY_TYPE.APPLY]="testApply.status",e),a[m.AUTH_TYPE.APP]=(t={},t[m.APPLY_TYPE.APPLY]="appTopInfo.applyNumStatus",t[m.APPLY_TYPE.EXTEND]="appTopInfo.applyExtendStatus",t),a);this.$set(""+s[n][r],o.BaseInfoStatus.Reviewing)},applyAppSuccess:function(){this.fetchPage(),this.getAppBaseInfo()}})}),define("ai/page/offline/SdkManage/SdkManage.tpl",[],function(){return'<div class="sdk-manage">\n    \x3c!-- 个人认证用户 --\x3e\n    <individual-guide qualification="{{qualification}}" pageType="{{pageType}}"/>\n    \x3c!-- 列表 --\x3e\n    <xui-tab skin="card" on-change="changeTab" class="tab-all-content">\n        <xui-tab-panel title="序列号授权">\n            <div class="sdk-list-wrap">\n                <div class="sdk-list-btn-wrap">\n                    <xui-button on-click="goToShopCart" skin="primary">\n                        <xui-icon name="plus" />\n                        购买授权\n                    </xui-button>\n                    <xui-button on-click="showDownloadSdk">下载SDK</xui-button>\n                    <xui-button on-click="changeSearchArea(true)">管理序列号</xui-button>\n                    <template s-if="{{ENTERPRISE_CERTIFIED}}">\n                        <xui-button s-if="!applyReviewing" on-click="applyTest()">申请测试序列号</xui-button>\n                        <xui-button s-else skin="primary" disabled>审核中</xui-button>\n                    </template>\n                    <div class="pull-right">\n                        <a class="ui-button" target="_blank" href="{{link.doc.dev}}">开发文档</a>\n                        <a class="ui-button" target="_blank" href="{{Url.ticket}}">工单支持</a>\n                    </div>\n                </div>\n                <div class="sdk-list-search" s-if="isOpenSearch">\n                    <xui-searchbox value="{=filters.serialNO=}" placeholder="请输入序列号或硬件指纹搜索" on-search="searchHanlder"/>\n                    <xui-select datasource="{{FaceSdkTypeStatusList}}" value="{=filters.typeStatus=}" default-label="类型"/>\n                    <xui-select datasource="{{FaceSdkActiveStatusList}}" value="{=filters.activeStatus=}" default-label="激活状态"/>\n                    <div class="pull-right">\n                        <xui-button on-click="exportNo" skin="primary">\n                            导出序列号\n                        </xui-button>\n                        <xui-button on-click="changeSearchArea(false)" class="sdk-search-close">\n                            收起\n                        </xui-button>\n                    </div>\n                </div>\n                <xui-table\n                    class="sdk-table"\n                    schema="{{table[currentType].schema}}"\n                    on-command="onCommand($event)"\n                    cell-builder="{{table[currentType].cellRenderer}}"\n                    datasource="{{table[currentType].datasource}}"\n                    loading="{{table.loading}}"\n                    on-selected-change="onTableRowSelected($event)"\n                    select="{{isOpenSearch ? \'multi\' : \'\'}}"\n                ></xui-table>\n            </div>\n        </xui-tab-panel>\n        <xui-tab-panel title="应用授权">\n            <div class="sdk-list-wrap">\n                <div class="app-top-info">\n                    <div s-for="item in appTopList" class="app-base-info {{item.key}}">\n                        <div class="title">\n                            <p>{{item.title}}</p>\n                            <div class="expireTime">{{appTopInfo[item.key].expireTime | handleTime}}</div>\n                        </div>\n                        <div class="numbers">\n                            <div class="num-item">\n                                <div class="num">{{appTopInfo[item.key].allNum}}</div>\n                                <div>授权总数</div>\n                            </div>\n                            <div class="num-item">\n                                <div class="num">{{appTopInfo[item.key].allocateNum}}/{{appTopInfo[item.key].activeNum}}</div>\n                                <div>已分配/激活</div>\n                            </div>\n                            <div class="num-item">\n                                <div class="num">{{appTopInfo[item.key].allNum - appTopInfo[item.key].allocateNum}}</div>\n                                <div>剩余可分配</div>\n                            </div>\n                        </div>\n                        <div class="buttons" s-if="{{item.key === \'trail\'}}">\n                            <template s-if="{{ENTERPRISE_CERTIFIED}}">\n                                <xui-button s-if="!appTrialApplyVisible" on-click="applyTest()" class="apply-serial">申请更多测试授权数</xui-button>\n                                <xui-button s-else class="apply-serial-disable" disabled>审核中</xui-button>\n                                <xui-button s-if="!appTrialExtendVisible" on-click="applyTest(\'extend\')" class="apply-extend">延长有效期</xui-button>\n                                <xui-button s-else class="apply-serial-disable" disabled>审核中</xui-button>\n                            </template>\n                        </div>\n                        <div class="buttons" s-else>\n                            <xui-button class="apply-official" skin="primary" on-click="goToShopCart">购买正式授权</xui-button>\n                        </div>\n                    </div>\n                </div>\n                <div class="sdk-list-btn-wrap">\n                    <xui-button on-click="openAppApply" skin="primary">\n                        <xui-icon name="plus" />\n                        新建应用\n                    </xui-button>\n                    <div class="pull-right">\n                        <xui-button on-click="showDownloadSdk">下载SDK</xui-button>\n                        <a class="ui-button" target="_blank" href="{{link.doc.dev}}">开发文档</a>\n                        <a class="ui-button" target="_blank" href="{{Url.ticket}}">工单支持</a>\n                    </div>\n                </div>\n                <xui-table\n                    class="sdk-table"\n                    schema="{{table[currentType].appSchema}}"\n                    on-command="onCommand($event)"\n                    datasource="{{table[currentType].datasource}}"\n                    loading="{{table.loading}}"\n                >\n                    <div slot="c-nums">\n                        <div>{{row.allocateNum}}/{{row.activeNum}}</div>\n                    </div>\n                    <div slot="c-type">\n                        <div>{{row.type | getTypeName}}</div>\n                    </div>\n                    <div slot="c-expiredTime">\n                        <div>{{row.type | handleListTime}}</div>\n                    </div>\n                    <div slot="c-control">\n                        <a on-click="handleApp(row)" href="javascript:void(0)">管理授权</a> | \n                        <a on-click="showRowDialog(row, \'ActiveDetail\')" href="javascript:void(0)">激活记录</a>\n                    </div>\n                </xui-table>\n            </div>\n        </xui-tab-panel>\n    </xui-tab>\n    <div class="pager-row">\n        <span class="pager-label">每页显示</span>\n        <xui-select datasource="{{pageSelect.datasource}}" value="{=pageInfo[currentType].pageSize=}" />\n        <xui-pager on-change="onPagerChange($event)" size="{{pageInfo[currentType].pageSize}}" page="{=pageInfo[currentType].pageNo=}" count="{{pageInfo[currentType].totalCount}}" />\n    </div>\n    \x3c!-- 详细信息弹框 --\x3e\n    <detail-dialog s-ref="DetailDialog" on-updateLabel="fetchPage" />\n    \x3c!-- 联网激活弹框 --\x3e\n    <active-online s-ref="ActiveOnline" on-refresh="fetchPage" />\n    \x3c!-- 离线激活弹框 --\x3e\n    <active-offline s-ref="ActiveOffline" on-refresh="fetchPage" />\n    \x3c!-- 下载SDK弹框 --\x3e\n    <download-sdk s-ref="DownLoadSDK" />\n    \x3c!-- 序列号测试，应用测试，应用延期申请弹窗 --\x3e\n    <apply-test open="{=testApply.open=}" info="{{testApplyInfo}}" on-success="applyTestSuccess" />\n    \x3c!-- 未支付订单弹框 --\x3e\n    <xui-dialog open="{=unpaidDialog.open=}" title="您还有未支付的订单" width="500">\n        <p>尊敬的用户您好，购买之前，请您先处理已建的未支付订单。</p>\n        <div slot="foot">\n            <a href="/billing/#/order/detail~uuid={{unpaidDialog.unpaidId}}&serviceType=FACE_SDK">\n                <xui-button skin="primary">查看订单</xui-button>\n            </a>\n            <a href="/billing/#/order/list">\n                <xui-button skin="danger">去支付</xui-button>\n            </a>\n        </div>\n    </xui-dialog>\n    \x3c!-- 应用授权新建应用弹框 --\x3e\n    <app-apply s-ref="AppApply" on-success="applyAppSuccess" appTopInfo="{{appTopInfo}}"/>\n    \x3c!-- 应用授权详情弹框--\x3e\n    <app-detail s-ref="AppDetail" on-success="applyAppSuccess" />\n    \x3c!-- 应用授权激活详情弹框--\x3e\n    <active-detail s-ref="ActiveDetail" />\n</div>\n'}),define("ai/page/offline/SdkManage/ShopCart/ShopCart",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ShopCart.tpl","san-xui","inf-ria/app/brpc","ai/config/url","../configEnum","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](r);module.exports=u["default"]({template:d["default"],components:{"xui-form":n.Form,"xui-item":n.FormItem,"xui-numbertextline":n.NumberTextline},initData:function(){return{steps:[{text:"购买授权"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],stepIndex:0,boughtCount:0,count:1,sectionId:"",sections:[],showOrder:!1,sectionIds:[]}},filters:{sectionRange:function(e){return-1!==e.max?"第"+e.min+"-"+e.max+e.costUnit:"第"+e.min+e.costUnit+"及以上"},sectionPrice:function(e){return e.cost+"元/"+e.costUnit}},computed:{priceTuple:function(){var e=+this.data.get("boughtCount"),t=+this.data.get("count"),a=this.data.get("sections"),i=0,n=[];if(a.length&&(e||0===e)){var r=l.calLadderPrcie(t,e,a);i=r.total,r.priceList.forEach(function(e){var t=e.showString;n.push(t)})}return{price:i,priceContent:n.join(" + ")}},buyTypeTips:function(){return this.data.get("sectionId")===o.TYPE_TO_ID.serial?"序列号授权：通过输入序列号进行在线联网激活，方便授权的管理和二次分发，更容易控制应用范围。适合随着项目少量交付的闸机、门禁设备。":"应用授权：基于应用维度授权，设备必须可首次联网，SDK初始化时自动联网激活，并统计设备数量计费。适合于单品的大批量商用，如人证核验机、考勤机。"}},created:function(){var e=this;this.fetchBoughtCount(),this.fetchPrice(),this.watch("count",function(t){if(!(t.length<=0)){var a=~~t;a<1&&(a=1),a!==+t&&e.$set("count",a)}})},backToManage:function(){this.$aiRedirect("offline/index")},fetchPrice:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e["default"].awrap(this.ajax.offLineSdkPrice({type:"face",productType:"sdks"}));case 2:t=n.sent,a=o.TYPE_TO_ID[this.$get("type")]||t[0].id,i=t.map(function(e){return{value:e.id,text:e.name}}),this.$$set({sections:t[0].price,sectionId:a,sectionIds:i});case 6:case"end":return n.stop()}},null,this)},fetchBoughtCount:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.offLineSdkBoughtApiCount({type:"face",productType:"sdks"}));case 2:t=i.sent,a=t.count,this.$set("boughtCount",a);case 5:case"end":return i.stop()}},null,this)},orderConfirm:function(){var e=this;if(!((+this.$get("count")||0)<1)){var t=this.ref("confirm").__getESUI();t.on("action@prevPage",function(){e.$$set({stepIndex:0,showOrder:!1})});var a={config:{type:this.aiAppType,productType:"sdks",items:{apiId:this.$get("sectionId"),timeUnit:"DAY",count:this.$get("count")}},order:{serviceType:"FACE",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/"+this.aiAppType+"/order/v2/confirm",price:this.$get("priceTuple.price"),items:[{serviceType:"FACE_SDK",productType:"prepay",count:this.$get("count"),time:"永久",price:this.$get("priceTuple.price"),unitPriceShow:"见人脸离线SDK价格",unitPriceUrl:s.faceOfflineSdk.sdkPrice,chargeType:["按量"],configuration:["全局"]}]}};c["default"].invokeService("billing://order_confirm",t,a).then(function(t){e.$$set({stepIndex:1,showOrder:!0})})}}})}),define("ai/page/offline/SdkManage/ShopCart/ShopCart.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content class="face-offline-content-shop-cart">\n            <div class="shop-cart-header">\n                <div on-click="backToManage" class="back-to-manage">\n                    <xui-icon name="arrow-left" />\n                    <span class="btm-text">返回离线SDK管理</span>\n                </div>\n                <h4>购买授权</h4>\n                <xui-viewstep step-index="{{stepIndex}}" steps="{{steps}}" />\n            </div>\n            <div s-ref="mainWrap" class="shop-cart-body">\n                <template s-if="!showOrder">\n                    <h4 class="sc-title">授权购买</h4>\n                    <div class="sc-content">\n                        <p class="sc-tip">该价格为阶梯计费，可根据您的累计购买数量，查看具体价格</p>\n                        <table class="sc-table">\n                            <tr>\n                                <td>累计购买授权数</td>\n                                <td>每个授权单价</td>\n                            </tr>\n                            <tr s-for="item in sections">\n                                <td>{{item | sectionRange}}</td>\n                                <td>{{item | sectionPrice}}</td>\n                            </tr>\n                        </table>\n                        <xui-form class="sc-form">\n                            <xui-item label="购买种类：">\n                                <xui-boxgroup\n                                    box-type="radio"\n                                    datasource="{{sectionIds}}"\n                                    value="{=sectionId=}"\n                                />\n                            </xui-item>\n                            <xui-item label="">\n                                {{buyTypeTips}}\n                            </xui-item>\n                            <xui-item label="已购买数量：">\n                                {{boughtCount}}个\n                            </xui-item>\n                            <xui-item label="本次购买数量：">\n                                <xui-numbertextline width="50" min="{{1}}" max="{{999999999}}" value="{=count=}" />\n                            </xui-item>\n                            <xui-item label="购买费用：">\n                                <strong class="sc-price">\n                                    ¥ {{priceTuple.price}}\n                                </strong>\n                                <br>\n                                <span>阶梯计费：{{priceTuple.priceContent}}</span>\n                            </xui-item>\n                        </xui-form>\n                        <div class="sc-des-wrap">\n                            <div class="sc-des">\n                                <p>购买说明：</p>\n                                <p>1. 正式版序列号有效期为永久。即指如果设备信息没有变化时，授权一直可用（如软件重装，原序列号或授权文件仍然有效，重试激活即可）。</p>\n                                <p>2. 序列号模式购买时请注意：序列号授权和应用授权为两种不同的授权模式，请勾选时注意下方文字提示。</p>\n                                <p>3. 授权不受应用平台的限制，无论是序列号模式还是应用授权模式。如序列号可以在安卓平台激活，也可以在Win平台激活。</p>\n                                <p>4. 序列号的购买是「累计阶梯计费」，例如您购买了900个授权，因为这900个是在0~1000的区间，所以付费299元/个*900个；当您继续购买200个时，累计购买量已经达到了1100个，则付费100*299+100*249，因为后100个已经在1000~5000的区间内。</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="pay-line-row">\n                        实付金额：\n                        <span class="sc-price">¥{{priceTuple.price}}</span>\n                    </div>\n                    <div class="pay-line-row">\n                        <a on-click="orderConfirm" href="javascript:void(0)" class="btn-to-pay">去支付</a>\n                    </div>\n                </template>\n                <ui-actionpanel san-ref="confirm" hidden="{{!showOrder}}"></ui-actionpanel>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/offline/SimpleDialog/AppCountDialog",["exports","./index","babel-runtime/helpers/interop-require-default","ai/config"],function(exports,e,t,a){exports.__esModule=!0,exports.showAppCountDialog=function(e){var t=new i({data:{data:e}});return this.$waitAction({title:"申请增加授权数量",width:528,content:t,needFoot:!0}),t};var i=t["default"](e)["default"]({api:a.api.applyAppCount});exports["default"]=i}),define("ai/page/offline/SimpleDialog/ExtendDialog",["exports","./index","babel-runtime/helpers/interop-require-default","ai/config"],function(exports,e,t,a){exports.__esModule=!0,exports.showExtendDialog=function(e){var t=new i({data:{data:e}});return this.$waitAction({title:"申请延长授权时长",width:528,content:t,needFoot:!0}),t};var i=t["default"](e)["default"]({api:a.api.applyExtend});exports["default"]=i}),define("ai/page/offline/SimpleDialog/index",["exports","module","babel-runtime/core-js/promise","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","async-validator"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i);module.exports=function(t){return r["default"]({template:s["default"],initData:function(){return{data:{reason:""},rules:new n["default"]({reason:[{required:!0,message:"请填写理由"},{min:100,max:500,message:"理由必须在100到500个字之间"}]}),errors:{}}},computed:{$enableSubmit:function(){return!this.data.get("errors")}},$submit:function(){var a=this;return new e["default"](function(e,i){t.api(a.$get("data")).then(function(){e(),a.fire("success"),a.$toast("提交成功")},i)})}})}}),define("ai/page/offline/SimpleDialog/index.tpl",[],function(){return'<div class="client-dialog-content">\n    <div class="client-dialog-content-tip">温馨提示：申请理由请认真填写，这将作为唯一的审核依据</div>\n    <div class="client-form">\n        <xui-form formData="{=data=}" rules="{{rules}}" errors="{=errors=}">\n            <xui-item required name="reason" label="申请理由：">\n                <xui-textbox type="text" value="{=data.reason=}" multiline placeholder="请至少填写100个汉字用来描述您的申请理由"></xui-textbox>\n            </xui-item>\n        </xui-form>\n    </div>\n</div>\n'}),define("ai/page/offline/SpeechAppList/Detail/Detail",["exports","module","babel-runtime/core-js/object/keys","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./Detail.tpl","ai/common/enums","lodash"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](i),l=a["default"](r);module.exports=s["default"]({template:o["default"],filters:{getTypeName:function(e){return n.PackageType.getTextFromValue(e)},getSoundName:function(t){var a="",i=l["default"].groupBy(t.map(function(e){return n.SoundLibrary.fromValue(e)}),function(e){return e.type});return e["default"](i).forEach(function(e){var t=[];i[e].forEach(function(e){t.push(e.text)}),a+=" <div>"+n.SoundLibraryType.getTextFromValue(e)+"（"+t.join("、")+"）</div>"}),a}},initData:function(){return{open:!1,info:{}}},downloadLicense:function(){this.fire("downloadLicense",this.$get("info.id"))},cancel:function(){this.$set("open",!1)}})}),define("ai/page/offline/SpeechAppList/Detail/Detail.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" foot="{{false}}" width="455" title="详细信息">\n        <div class="speech-offline-sdk-detail">\n            <xui-form s-ref="form">\n                <xui-item label="APP ID：">\n                    <div>{{info.appId}}</div>\n                </xui-item>\n                <xui-item label="应用包名：">\n                    <div>{{info.bundleName}}</div>\n                </xui-item>\n                <xui-item label="应用平台：">\n                    <div>{{info.platform}}</div>\n                </xui-item>\n                <xui-item label="版本类型：">\n                    <div>{{info.type | getTypeName}}</div>\n                </xui-item>\n                <xui-item label="音库类型：">\n                    <div>{{info.modelList | getSoundName | raw}}</div>\n                </xui-item>\n                <xui-item label="有效期：">\n                    <div>{{info.expiredTime}}</div>\n                </xui-item>\n                <xui-item label="激活时间：">\n                    <div>{{info.activeTime | dateFormat(\'YYYY-MM-DD\')}}</div>\n                </xui-item>\n                <xui-item label="序列号信息：">\n                    <xui-button skin="primary" on-click="downloadLicense">下载序列号列表</xui-button>\n                </xui-item>\n            </xui-form>\n        </div>\n    </xui-dialog>\n</template>'}),define("ai/page/offline/SpeechAppList/Detail/index",["exports","module","./Detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SpeechAppList/index",["exports","module","./SpeechAppList","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SpeechAppList/SpeechAppList",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./SpeechAppList.tpl","../DownloadSdk/index","lodash","ai/common/enums","er/URL","./Detail/index","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](r),m=a["default"](o),h=a["default"](l);module.exports=d["default"]({template:c["default"],components:{"download-sdk":p["default"],detail:h["default"]},filters:{getTypeName:function(e){return s.PackageType.getTextFromValue(e)}},initData:function(){return{pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]},pageInfo:{pageNo:1,pageSize:10,totalCount:0},table:{datasource:[],loading:!1,schema:[{name:"rowNumber",label:"序号"},{name:"appId",label:"APP ID"},{name:"bundleName",label:"应用包名"},{name:"platform",label:"应用平台"},{name:"expiredTime",label:"有效期"},{name:"type",label:"版本类型"},{name:"control",label:"操作",width:280}]}}},created:function(){var e=this;this.getSDKList(),this.watch("pageInfo.pageNo",function(){return e.getSDKList()}),this.watch("pageInfo.pageSize",function(){return e.getSDKList()})},toggleTutorial:function(){this.$set("baseStatus.actived",!this.$get("baseStatus.actived"))},getSDKList:f["default"].debounce(function(){var t,a,i;return e["default"].async(function(n){for(var r=this;;)switch(n.prev=n.next){case 0:return this.$set("table.loading",!0),t=this.$get("pageInfo"),a=t.pageNo,i=t.pageSize,n.prev=4,n.next=7,e["default"].awrap(function(){var t;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e["default"].awrap(this.ajax.speechOfflineSDKList({pageNo:a,pageSize:i}));case 2:(t=n.sent).result.forEach(function(e,a){e.rowNumber=(t.pageNo-1)*t.pageSize+a+1}),this.$$set({"pageInfo.totalCount":t.totalCount,"table.datasource":t.result,"table.loading":!1});case 5:case"end":return n.stop()}},null,r)}());case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](4),this.$set("table.loading",!1);case 12:case"end":return n.stop()}},null,this,[[4,9]])},100),onPagerChange:function(e){var t=e.pageNo;this.$set("pageInfo.pageNo",t)},showDownloadSdk:function(){this.ref("DownLoadSDK").$$set({open:!0})},goToShopCart:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.getUnpaidId({type:"speech",productType:"sdks"}));case 2:if(!(t=a.sent)){a.next=6;break}return this.$set("unpaidDialog",{open:!0,unpaidId:t}),a.abrupt("return");case 6:this.$aiRedirect("offline/shopCart");case 7:case"end":return a.stop()}},null,this)},showDetail:function(e){this.ref("Detail").$$set({open:!0,info:e})},downloadLicense:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.speechOffLineSdkDownStatus({id:t}));case 2:if(a.sent){a.next=6;break}return this.$toast("序列号生成中，请稍后",{messageType:"warning"}),a.abrupt("return");case 6:window.open("/ai/download/speech/serialkey?"+m["default"].serialize({id:t}));case 7:case"end":return a.stop()}},null,this)},downloadSound:function(){var t;return e["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(u.cacheValue("speech_sound_bank",function(){return i.ajax.speechOffLineSdkDownUrl({sdkType:"speaker"})}));case 2:t=a.sent,u.iframeDownload(t);case 4:case"end":return a.stop()}},null,this)}})}),define("ai/page/offline/SpeechAppList/SpeechAppList.tpl",[],function(){return'<div class="speech-offline-sdk-list">\n    \x3c!-- 教程 --\x3e\n    <div class="tutorial-wrap">\n        <div class="tutorial-header">\n            离线合成SDK采用联网激活方式进行授权激活\n            <a on-click="toggleTutorial" href="javascript:void(0)">{{baseStatus.actived ? \'展开教程\' : \'收起教程\'}}</a>\n        </div>\n        <div s-if="!baseStatus.actived" class="tutorial-content">\n            <div class="tutorial-content-title">\n                联网激活\n                <a target="_blank" href="{{Url.speech.offline.doc}}">查看详细文档</a>\n            </div>\n            <p>也称序列号激活方法。下载SDK后，只需要在SDK的配置文件中，填写已购买的序列号，在设备上运行SDK，即可联网激活。</p>\n            <div class="sdkstep-item-wrap">\n                <div class="sdkstep-item">购买授权获取序列号</div>\n                <div class="sdkstep-icon-item"><xui-icon name="sort-ascending" /></div>\n                <div class="sdkstep-item">将序列号等4个鉴权信息传入SDK中，并生成一个正确包名的app</div>\n                <div class="sdkstep-icon-item"><xui-icon name="sort-ascending" /></div>\n                <div class="sdkstep-item">运行app，初始化后SDK将自动联网激活</div>\n                <div class="sdkstep-icon-item"><xui-icon name="sort-ascending" /></div>\n                <div class="sdkstep-item">断网后，测试纯离线SDK</div>\n            </div>\n        </div>\n    </div>\n    \x3c!-- 列表 --\x3e\n    <div class="sdk-list-wrap">\n        <div class="sdk-list-btn-wrap">\n            <xui-button on-click="goToShopCart" skin="primary">\n                <xui-icon name="plus" />\n                购买授权\n            </xui-button>\n            <div class="pull-right">\n                <xui-button\n                    on-click="downloadSound"\n                    class="tooltipped tooltipped-n"\n                    aria-label="1、普通音库已在纯离线SDK的demo中。\n2、精品音库仅适用于纯离线SDK，不适用于在线离线SDK。\n3、纯离线SDK需要序列号激活。\n4、具体使用方式见压缩包内的README.txt文件。"\n                >\n                    下载精品音库资源\n                </xui-button>\n                <xui-button on-click="showDownloadSdk">下载SDK</xui-button>\n                <a class="ui-button" target="_blank" href="{{Url.speech.offline.doc}}">开发文档</a>\n                <a class="ui-button" target="_blank" href="{{Url.ticket}}">工单支持</a>\n            </div>\n        </div>\n        <xui-table\n            class="sdk-table"\n            schema="{{table.schema}}"\n            datasource="{{table.datasource}}"\n            loading="{{table.loading}}"\n        >\n            <div slot="c-type">\n                <div>{{row.type | getTypeName}}</div>\n            </div>\n            <div slot="c-control">\n                <a on-click="showDetail(row)" href="javascript:void(0)">查看详情</a> | \n                <a on-click="downloadLicense(row.id)" href="javascript:void(0)">下载序列号列表</a>\n            </div>\n        </xui-table>\n        <div class="pager-row">\n            <span class="pager-label">每页显示</span>\n            <xui-select datasource="{{pageSelect.datasource}}" value="{=pageInfo.pageSize=}" />\n            <xui-pager on-change="onPagerChange($event)" size="{{pageInfo.pageSize}}" page="{=pageInfo.pageNo=}" count="{{pageInfo.totalCount}}" />\n        </div>\n    </div>\n    \x3c!-- 下载SDK弹框 --\x3e\n    <download-sdk s-ref="DownLoadSDK" />\n    \x3c!-- 详情弹框 --\x3e\n    <detail s-ref="Detail" on-downloadLicense="downloadLicense" />\n    \x3c!-- 未支付订单弹框 --\x3e\n    <xui-dialog open="{=unpaidDialog.open=}" title="您还有未支付的订单" width="500">\n        <p>尊敬的用户您好，购买之前，请您先处理已建的未支付订单。</p>\n        <div slot="foot">\n            <a href="/billing/#/order/detail~uuid={{unpaidDialog.unpaidId}}&serviceType=SPEECH_SDK">\n                <xui-button skin="primary">查看订单</xui-button>\n            </a>\n            <a href="/billing/#/order/list">\n                <xui-button skin="danger">去支付</xui-button>\n            </a>\n        </div>\n    </xui-dialog>\n</div>\n'}),define("ai/page/offline/SpeechAppList/SpeechShopCart/SpeechShopCart",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./SpeechShopCart.tpl","lodash","inf-ria/app/brpc","ai/common/enums","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](n),c=a["default"](r);module.exports=l["default"]({template:u["default"],initData:function(){return{steps:[{text:"购买授权"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],stepIndex:0,count:100,sections:[],showOrder:!1,appList:[],appIds:[],appId:"",soundLibrarys:s.SoundLibrary.toArray().filter(function(e){return e.type===s.SoundLibraryType.Advanced}),sounds:"",soundPrice:{cost:2e3},soundId:"",errors:{}}},filters:{sectionRange:function(e){return-1!==e.max?"第"+e.min+"-"+e.max+e.costUnit:"第"+e.min+e.costUnit+"及以上"},sectionPrice:function(e){return e.cost+"元/"+e.costUnit}},computed:{formData:function(){var e={},t=this.data.get("appId"),a=this.data.get("appList");return t&&(e=d["default"].find(a,{id:t})),e},priceTuple:function(){var e=this.data.get("count"),t=this.data.get("sections"),a=this.data.get("sounds"),i=this.data.get("soundPrice"),n=0,r=[];if(t.length){var s=o.calLadderPrcie(e,0,t);n=s.total,s.priceList.forEach(function(e){var t=e.showString;r.push(t)})}return a.length&&(n+=i.cost*a.length,r.push(i.cost+"元/"+i.costUnit+"*"+a.length)),{price:n,priceContent:r.join(" + ")||0}}},created:function(){var e=this;this.fetchPrice(),this.getAppList(),this.watch("count",function(t){if(!(t.length<=0)){var a=~~t;a<1&&(a=1),a!==+t&&e.$set("count",a)}})},backToManage:function(){this.$aiRedirect("offline/index")},fetchPrice:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.offLineSdkPrice({type:s.AppType.speech,productType:"sdks"}));case 2:t=a.sent,this.$$set({sections:t.serialKey.price,sectionId:t.serialKey.id,soundPrice:t.person.price[0],soundId:t.person.id});case 4:case"end":return a.stop()}},null,this)},getAppList:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.speechOfflineAppList());case 2:t=i.sent,a=t.map(function(e){return{text:e.appName,value:e.id}}),this.$$set({appList:t,appIds:a});case 5:case"end":return i.stop()}},null,this)},orderConfirm:function(){var e=this,t=+this.$get("count")||0;if(!(t<1)){var a=this.$get("appId");if(a){var i=this.ref("confirm").__getESUI();i.on("action@prevPage",function(){e.$$set({stepIndex:0,showOrder:!1})});var n={config:{type:this.aiAppType,productType:"sdks",items:[{apiId:this.$get("sectionId"),count:t,appId:a},{apiId:this.$get("soundId"),sounds:this.$get("sounds")}]},order:{serviceType:"SPEECH",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/"+this.aiAppType+"/order/v2/confirm",price:this.$get("priceTuple.price"),items:[{serviceType:"AI_SE",productType:"prepay",count:this.$get("count"),time:"永久",price:this.$get("priceTuple.price"),unitPriceShow:"见语音离线SDK价格",unitPriceUrl:"https://www.baidu.com",chargeType:["按量"],configuration:["全局"]}]}};c["default"].invokeService("billing://order_confirm",i,n).then(function(t){e.$$set({stepIndex:1,showOrder:!0})})}else this.$set("errors",{appId:"请选择应用"})}}})}),define("ai/page/offline/SpeechAppList/SpeechShopCart/SpeechShopCart.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content class="speech-offline-content-shop-cart">\n            <div class="shop-cart-header">\n                <div on-click="backToManage" class="back-to-manage">\n                    <xui-icon name="arrow-left" />\n                    <span class="btm-text">返回离线合成SDK管理</span>\n                </div>\n                <h4>购买授权</h4>\n                <xui-viewstep step-index="{{stepIndex}}" steps="{{steps}}" />\n            </div>\n            <div s-ref="mainWrap" class="shop-cart-body">\n                <template s-if="!showOrder">\n                    <h4 class="sc-title">授权购买</h4>\n                    <div class="sc-content">\n                        <p class="sc-tip">该价格为分段阶梯计费，可参考右侧购买说明进行授权购买</p>\n                        <table class="sc-table" width="350">\n                            <tr>\n                                <td>购买授权数</td>\n                                <td>每个授权单价</td>\n                            </tr>\n                            <tr s-for="item in sections">\n                                <td>{{item | sectionRange}}</td>\n                                <td>{{item | sectionPrice}}</td>\n                            </tr>\n                            <tr>\n                                <td colspan="2">\n                                    <p>授权单价说明：</p>\n                                    <p>1、授权单价包含软件授权费用和默认音库授权费用</p>\n                                    <p>2、默认音库包括度小宇、度小美、度逍遥、度丫丫共4个基础音库，如需精品音库需额外购买</p>\n                                </td>\n                            </tr>\n                        </table>\n                        <xui-form class="sc-form" errors="{=errors=}">\n                            <xui-item label="应用名称：" required name="appName">\n                                <xui-select value="{=appId=}" datasource="{{appIds}}" default-label="请选择应用" />\n                            </xui-item>\n                            <xui-item label="APP ID：" required name="appId">\n                                <xui-textbox value="{=formData.devAppId=}" disabled type="text" placeholder="请输入APP ID" />\n                            </xui-item>\n                            <xui-item label="应用包名：" required name="bundleName">\n                                <xui-textbox value="{=formData.bundleName=}" disabled type="text" placeholder="请输入应用包名" />\n                            </xui-item>\n                            <xui-item label="应用平台：" required name="platform">\n                                <xui-textbox value="{=formData.platform=}" disabled type="text" placeholder="请输入应用平台" />\n                            </xui-item>\n                            <xui-item label="本次购买数量：">\n                                <xui-numbertextline width="50" min="{{100}}" max="{{50000}}" value="{=count=}" />\n                            </xui-item>\n                            <xui-item label="额外购买精品音库：">\n                                <xui-boxgroup\n                                    box-type="checkbox"\n                                    datasource="{{soundLibrarys}}"\n                                    value="{=sounds=}"\n                                    col-count="{{4}}"\n                                />\n                            </xui-item>\n                            <div class="sound-tips">\n                                <div>注：</div>\n                                <div>精品音库价格为固定价格，配合装机量使用，每个音库单价{{soundPrice.cost}}元，最多可授权50000台设备使用，如果您需要购买授权数量大于50000，请通过<a href="{{Url.speech.contact}}" target="_blank">合作咨询</a>联系我们。</div>\n                            </div>\n                            <xui-item label="购买费用：">\n                                <strong class="sc-price">\n                                    ¥ {{priceTuple.price}}\n                                </strong>\n                                <br>\n                                <span class="ladder-price">阶梯计费：{{priceTuple.priceContent}}</span>\n                            </xui-item>\n                        </xui-form>\n                        <div class="sc-des-wrap">\n                            <div class="sc-des">\n                                <p>购买说明：</p>\n                                <p>1. 语音合成离线SDK授权100起售。</p>\n                                <p>2. 授权购买是「累计阶梯计费」，例如您购买了900个授权，因为这900个是在0~1000的区间，所以付费5元/个*900个；当您继续购买200个时，累计购买量已经达到了1100个，则付费100*5+100*3，因为后100个已经在1001~5000的区间内。</p>\n                                <p>3. 如您需要购买的授权数量为3000，除默认音库外您还需要度博文、度米朵总计2个精品音库，则总费用为1000*5+2000*3+2000*2=15000元。</p>\n                                <p>4. 精品音库价格为固定价格，配合装机量使用，每个音库单价2000元，最多可授权50000台设备使用。</p>\n                                <p>5. 如您需要购买的授权数量大于500000，请通过<a href="{{Url.speech.contact}}" target="_blank">合作咨询</a>联系我们。</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="pay-line-row">\n                        实付金额：\n                        <span class="sc-price">¥{{priceTuple.price}}</span>\n                    </div>\n                    <div class="pay-line-row">\n                        <a on-click="orderConfirm" href="javascript:void(0)" class="btn-to-pay">去支付</a>\n                    </div>\n                </template>\n                <ui-actionpanel san-ref="confirm" hidden="{{!showOrder}}"></ui-actionpanel>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/offline/SpeechTestApply/index",["exports","module","./SpeechTestApply","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offline/SpeechTestApply/SpeechTestApply",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./SpeechTestApply.tpl","lodash"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i),o=a["default"](n);module.exports=r["default"]({template:s["default"],computed:{formData:function(){var e={},t=this.data.get("appId"),a=this.data.get("appList");return t&&(e=o["default"].find(a,{id:t})),e}},initData:function(){return{errors:{},appList:[],appIds:[],appId:"",ifFailed:!1}},created:function(){this.getAppList()},getAppList:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.speechOfflineAppList());case 2:t=i.sent,(a=t.map(function(e){return{text:e.appName,value:e.id}})).length||a.push({text:"暂无可申请离线SDK授权的应用",value:-1,disabled:!0,tip:'<div style="width: 200px">请通过【创建应用】进行iOS/Android应用创建</div>'}),this.$$set({appList:t,appIds:a});case 6:case"end":return i.stop()}},null,this)},submit:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=this.$get("appId")){a.next=4;break}return this.$set("errors",{appId:"请选择应用"}),a.abrupt("return");case 4:return a.next=6,e["default"].awrap(this.ajax.speechOfflineApply({appId:t}));case 6:if(a.sent){a.next=10;break}return this.$set("ifFailed",!0),a.abrupt("return");case 10:this.$reload();case 11:case"end":return a.stop()}},null,this)},applyAgain:function(){this.$set("ifFailed",!1)},onCreate:function(){this.$aiRedirect("app/create")}})}),define("ai/page/offline/SpeechTestApply/SpeechTestApply.tpl",[],function(){return'<div class="base-info">\n    \x3c!-- 未申请 --\x3e\n    <template s-if="!ifFailed">\n        <div class="base-info-tip">\n            <div class="icon-wrap">\n                <xui-icon name="ok-reverse"/>\n            </div>\n            <div class="tip-content-wrap">\n                <h4>恭喜您完成个人/企业认证，仅剩一步，即可使用全部离线SDK产品</h4>\n                <p>请您选择需要集成离线合成SDK的应用的APP ID，并确认对应的应用包名和应用平台信息，以便能获取到试用序列号</p>\n                <p>若您还没有APP ID等应用相关信息，请点击下面“创建应用”进行应用创建，以便获取APP ID</p>\n            </div>\n        </div>\n        <xui-form s-ref="form" errors="{=errors=}">\n            <xui-item label="应用名称：" required name="appName">\n                <xui-select value="{=appId=}" datasource="{{appIds}}" default-label="请选择应用" />\n                <xui-button icon="plus" class="create-app-button" skin="primary" on-click="onCreate">创建应用</xui-button>\n            </xui-item>\n            <xui-item label="APP ID" required name="appId">\n                <xui-textbox value="{=formData.devAppId=}" disabled type="text" placeholder="请输入APP ID" />\n            </xui-item>\n            <xui-item label="应用包名：" required name="bundleName">\n                <xui-textbox value="{=formData.bundleName=}" disabled type="text" placeholder="请输入应用包名" />\n            </xui-item>\n            <xui-item label="应用平台：" required name="platform">\n                <xui-textbox value="{=formData.platform=}" disabled type="text" placeholder="请输入应用平台" />\n            </xui-item>\n            <xui-item label="应用描述：" required name="appDesc">\n                <xui-textbox multiline value="{=formData.appDesc=}" disabled type="text" placeholder="请输入应用描述" />\n            </xui-item>\n            <xui-item label=" ">\n                <xui-button on-click="submit" skin="primary" disabled="{{!appId}}">确定</xui-button>\n            </xui-item>\n        </xui-form>\n    </template>\n    \x3c!-- 审核失败 --\x3e\n    <div class="base-info-tip-wrap" s-if="ifFailed">\n        <p class="enter-prise-title-error">很抱歉， 您的信息有误，无法生成试用版序列号，请核对信息后重新发起申请</p>\n        <p>如果您对申请信息填写有任何疑问，可以 <a target="_blank" href="{{Url.ticket}}">[提交工单]</a> 进行咨询</p>\n        <p>\n            <xui-button on-click="applyAgain" skin="primary">重新申请</xui-button>\n        </p>\n    </div>\n</div>\n'}),define("ai/page/offlineSDK/serial/config",["exports","ai/common/enums"],function(exports,e){exports.__esModule=!0;var t,a,i=[e.EasyEdgeActiveType.DEVICE,e.EasyEdgeActiveType.BUNDLE,e.EasyEdgeActiveType.BATCH];exports.TYPES=i;var n=(t={},t[e.EasyEdgeActiveType.DEVICE]=1,t[e.EasyEdgeActiveType.BUNDLE]=2,t[e.EasyEdgeActiveType.BATCH]=3,t);exports.typeNameToId=n;var r=(a={},a[e.EasyEdgeActiveType.BATCH]={text:"按多台设备激活",index:1},a[e.EasyEdgeActiveType.BUNDLE]={text:"按产品线激活",index:2},a[e.EasyEdgeActiveType.DEVICE]={text:"按单台设备激活",index:0},a);exports.TABS=r}),define("ai/page/offlineSDK/serial/list/download/download",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./download.tpl","lodash","ai/common/util","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=n["default"](i),d=n["default"](r),c=n["default"](s);module.exports=u["default"]({template:d["default"],computed:{isPro:function(){return this.data.get("aiAppType")===l.AppType.easydlPro},isIntegration:function(){return this.data.get("deployType")===l.EasydlSDKDeployType.INTEGRATION},versionList:function(){var e=this.data.get("sdkListAll"),t=this.data.get("deployType"),a=this.data.get("realId"),i=e.filter(function(e){return e.realId===a&&~e.deployType.indexOf(t)});return i.length?i.map(function(e){return{text:"V"+e.version,value:e.version}}):[{text:"暂无可用版本",value:-1,disabled:!0}]},supportTypeList:function(){return[{text:l.EasydlBundleType.getTextFromAlias("edgeboard"),value:"edgeboard"}].concat(this.data.get("isPro")?[]:[{text:l.EasydlBundleType.getTextFromAlias("xeye"),value:"xeye"}],[{text:l.EasydlBundleType.getTextFromAlias("ebvpu"),value:"ebvpu"}])}},initData:function(){return{EasydlSDKDeployType:l.EasydlSDKDeployType,modelProjectList:[],sdkListAll:[],open:!1,deployTypeList:l.EasydlSDKDeployType.toArray(),realId:"",deployType:"",supportType:"edgeboard",version:"",platforms:[],platform:"linux",downloadInfo:{},typeList:[],type:"",buttonList:"",downLoadUrl:""}},attached:function(){this.watchs()},watchs:function(){var i=this;["realId","deployType","supportType"].forEach(function(e){i.watch(e,function(){i.$set("version","")})}),this.watch("version",function(n){return t["default"].async(function(i){for(var r=this;;)switch(i.prev=i.next){case 0:if(this.$set("type",""),!n){i.next=4;break}return i.next=4,t["default"].awrap(function(){var i,s,u,d,c,p,f,m,h;return t["default"].async(function(r){for(var g=this;;)switch(r.prev=r.next){case 0:return this.$set("iterationId",this.getIterationId(n)),i=this.$get(),s=i.realId,u=i.iterationId,d=i.supportType,c=i.aiAppType,p=i.isPro,r.next=9,t["default"].awrap(o.cacheValue("easydl_"+c+"_download_model_id_"+s+"_"+u,function(){return g.ajax.easydlSdkDownload(e["default"]({type:g.$get("aiAppType"),iterationId:u},p?{projectId:s}:{modelId:s}))}));case 9:f=r.sent,this.$set("downloadInfo",f),this.$get("isIntegration")?(m=f[l.EasydlSDKDeployType.INTEGRATION][d]||[],this.$$set({platforms:a["default"](m).map(function(e){return{text:e.toUpperCase(),value:e}}),label:"下载"+l.EasydlBundleType.getTextFromAlias(d)+" SDK"})):(h=l.SDKTypes.toArray().filter(function(e){var t=e.value;return f[t]}),this.$$set({typeList:h,type:h[0].value}));case 12:case"end":return r.stop()}},null,r)}());case 4:case"end":return i.stop()}},null,i)}),this.watch("type",function(e){e&&function(){var t=i.$get("downloadInfo");i.$set("buttonList",a["default"](t[e]).map(function(a){return{label:"下载"+a+" SDK",datasource:t[e][a].map(function(e){var t=e.url;return{text:e.name,value:t}})}}))}()}),this.watch("downLoadUrl",function(e){i.$set("downLoadUrl",""),e&&i.downloadSDK(e)})},getIterationId:function(e){var t=this;return(c["default"].find(this.data.get("sdkListAll"),function(a){var i=a.realId,n=a.version,r=a.deployType;return i===t.data.get("realId")&&n===e&&~r.indexOf(t.data.get("deployType"))})||{}).iterationId},downloadSDK:function(e){var t=this.$get(),a=t.downloadInfo,i=t.supportType,n=t.platform,r=e;this.$get("isIntegration")&&(r=a[l.EasydlSDKDeployType.INTEGRATION][i][n][0].url),o.iframeDownload(r)}})}),define("ai/page/offlineSDK/serial/list/download/download.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="下载SDK" foot="{{false}}">\n        <div class="ai-easydl-all-sdk-download-dialog">\n            <xui-form>\n                <xui-item label="选择{{isPro ? \'项目\' : \'模型\'}}：">\n                    <xui-select datasource="{{modelProjectList}}" value="{=realId=}" />\n                </xui-item>\n                <xui-item label="部署方式：">\n                    <xui-select datasource="{{deployTypeList}}" value="{=deployType=}" />\n                </xui-item>\n                <xui-item label="选择方案：" s-if="{{isIntegration}}">\n                    <xui-boxgroup\n                        box-type="radio"\n                        item-width="{{160}}"\n                        datasource="{{supportTypeList}}"\n                        value="{=supportType=}"\n                    />\n                </xui-item>\n                <xui-item label="选择版本：">\n                    <xui-select datasource="{{versionList}}" value="{=version=}" />\n                </xui-item>\n                <template s-if="{{version}}">\n                    <template s-if="{{isIntegration}}">\n                        <template s-if="{{platforms.length}}">\n                            <xui-item label="选择系统：">\n                                <xui-boxgroup\n                                    box-type="radio"\n                                    item-width="{{100}}"\n                                    datasource="{{platforms}}"\n                                    value="{=platform=}"\n                                />\n                            </xui-item>\n                            <xui-item label="下载SDK：">\n                                <xui-button on-click="downloadSDK()" skin="primary" >\n                                    {{label}}\n                                </xui-button>\n                            </xui-item>\n                        </template>\n                        <div s-else class="download-tip">暂无可下载SDK</div>\n                    </template>\n                    <template s-if="{{!isIntegration}}">\n                        <xui-item label="下载SDK：">\n                            <xui-boxgroup\n                                box-type="radio"\n                                item-width="{{100}}"\n                                datasource="{{typeList}}"\n                                value="{=type=}"\n                            />\n                        </xui-item>\n                        <xui-item>\n                            <xui-select\n                                s-if="{{buttonList.length}}"\n                                s-for="item in buttonList"\n                                datasource="{{item.datasource}}"\n                                value="{=downLoadUrl=}"\n                                default-label="{{item.label}}"\n                                class="download-sdk"\n                            >\n                            </xui-select>\n                        </xui-item>\n                        <div s-if="{{!buttonList.length}}" class="download-tip">暂无可下载SDK</div>\n                    </template>\n                </template>\n            </xui-form>\n            <template s-if="version">\n                <div class="download-tip">\n                    <div>\n                        <p>提示：以上SDK为未授权SDK，需要激活后才能正式使用</p>\n                    </div>\n                </div>\n            </template>\n        </div>\n    </xui-dialog>\n</template>'}),define("ai/page/offlineSDK/serial/list/download/index",["exports","module","./download","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offlineSDK/serial/list/extendDialog/extendDialog",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./extendDialog.tpl","san-xui","./rules","ai/common/util","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](n),c=i["default"](s),p=i["default"](l);module.exports=u["default"]({template:d["default"],components:{"xui-dialog":r.Dialog,"xui-form":r.Form,"xui-item":r.FormItem,"xui-calendar":r.Calendar},computed:{rules:function(){return c["default"]({needVerifyCode:this.data.get("needVerifyCode"),oldPhone:this.data.get("data.oldPhone").replace(/\*/g,"\\*")})},reasonLength:function(){return this.data.get("data.reasonValue").length},verifyCodeBtnDisabled:function(){return this.data.get("verifyCodeLeft")>0||!this.data.get("data.contactPhone").match(/^\d{11}$/)},verifyCodeBtnText:function(){var e=this.data.get("verifyCodeLeft");return e>0?"重新发送（"+e+"）":"获取验证码"}},initData:function(){return{data:{onlineTime:new Date,industry:"",company:"",reasonValue:"",contactName:"",contactPhone:"",oldPhone:"",verifyCode:""},industryList:[],errors:{},serialNumID:"",isEdit:!0,open:!1,userInfo:{},needVerifyCode:!0,textValue:"获取验证码",range:{begin:new Date,end:new Date(+new Date+31536e6)},verifyCodeLeft:0}},attached:function(){var e=this;this.watch("open",function(a){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}if(this.reset(),!(this.$get("industryList").length<=0)){e.next=5;break}return e.next=5,t["default"].awrap(this.getIndustry());case 5:this.getUserInfo();case 6:case"end":return e.stop()}},null,e)})},detached:function(){window.clearInterval(this.timer)},submit:function(){var a,i,n,r,s;return t["default"].async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t["default"].awrap(o.getAsyncTuple(this.ref("form").validateForm()));case 2:if(a=l.sent,!(i=a[0])){l.next=6;break}return l.abrupt("return");case 6:if((n=this.$get("data")).verifyCode||!n.oldPhone||n.contactPhone===n.oldPhone){l.next=11;break}return this.$set("needVerifyCode",!0),this.$errorToast("修改手机号需重新获取验证码"),l.abrupt("return");case 11:return r=e["default"]({id:this.$get("serialNumID"),expireTime:new Date(n.onlineTime).getTime(),industry:p["default"].find(this.$get("industryList"),function(e){return e.value===n.industry}).code,company:n.company,reason:n.reasonValue,contactName:n.contactName,contactPhone:n.contactPhone},this.$get("needVerifyCode")?{verifyCode:this.$get("data.verifyCode")}:{}),l.next=14,t["default"].awrap(o.getAsyncTuple(this.ajax.easyEdgeSerialNumberExtend(r)));case 14:if(s=l.sent,!(i=s[0])){l.next=20;break}return i.global&&this.$errorToast(i.global),i.field&&this.$set("errors",i.field),l.abrupt("return");case 20:this.$set("isEdit",!1),this.dispatch("updateEasyEdgeSerialNumList");case 22:case"end":return l.stop()}},null,this)},close:function(){this.$set("open",!1)},reset:function(){this.$set("data",this.initData().data)},getIndustry:function(){var a,i,n,r;return t["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t["default"].awrap(o.getAsyncTuple(this.ajax.easyEdgeSerialNumberIndustryList()));case 2:if(a=s.sent,i=a[0],n=a[1],!i){s.next=8;break}return this.$errorToast(i.global),s.abrupt("return");case 8:r=n.map(function(t){return e["default"]({text:t.value},t)}),this.$set("industryList",r);case 10:case"end":return s.stop()}},null,this)},getUserInfo:function(){var e,a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(o.getAsyncTuple(this.ajax.easyEdgeSerialNumberExtendUserInfo()));case 2:if(e=r.sent,a=e[0],i=e[1],!a){r.next=8;break}return this.$errorToast(a.global),r.abrupt("return");case 8:p["default"].isEmpty(i)||(n=p["default"].assign({},this.$get("data"),{industry:p["default"].find(this.$get("industryList"),function(e){return e.code===i.industry}).value,company:i.company,contactName:i.contactName,contactPhone:i.contactPhone,oldPhone:i.contactPhone}),this.$$set({needVerifyCode:!1,data:n}));case 9:case"end":return r.stop()}},null,this)},sendVerifyCode:function(){var e,a;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:if(this.$get("verifyCodeBtnDisabled")){i.next=12;break}return i.next=3,t["default"].awrap(o.getAsyncTuple(this.ajax.easyEdgeSerialNumberVerifyCode({phone:this.$get("data.contactPhone")})));case 3:if(e=i.sent,!(a=e[0])){i.next=8;break}return this.$errorToast(a.global),i.abrupt("return");case 8:this.$toast("发送成功"),window.clearInterval(this.timer),this.$set("verifyCodeLeft",60),this.timer=window.setInterval(function(){var e=n.$get("verifyCodeLeft");e<=0&&window.clearInterval(n.timer),n.$set("verifyCodeLeft",e-1)},1e3);case 12:case"end":return i.stop()}},null,this)}})}),define("ai/page/offlineSDK/serial/list/extendDialog/extendDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="申请延期" foot="{{isEdit}}">\n        <template s-if="{{isEdit}}">\n            <xui-form s-ref="form" formData="{{data}}" rules="{{rules}}" errors="{=errors=}" id="extend-dialog">\n                <xui-item required name="onlineTime" label="申请到期时间">\n                    <xui-calendar value="{=data.onlineTime=}" close-on-change="{{true}}" range="{{range}}"/>\n                </xui-item>\n                <xui-item required name="industry" label="行业">\n                    <xui-select datasource="{=industryList=}" value="{=data.industry=}" default-label="请选择行业" class="extend-industry"></xui-select>\n                </xui-item>\n                <xui-item required name="company" label="公司">\n                    <xui-textbox type="text" value="{=data.company=}" placeholder="请输入公司名称"></xui-textbox>\n                </xui-item>\n                <xui-item required name="reason" label="申请原因" class="extend-reason">\n                    <xui-textbox type="text" multiline value="{=data.reasonValue=}" placeholder="请描述应用场景及延期理由，500字以内"></xui-textbox>\n                    <span class="page-num">{{reasonLength}}/500</span>\n                </xui-item>\n                <xui-item required name="contactName" label="联系人">\n                    <xui-textbox type="text" value="{=data.contactName=}" placeholder="请输入联系人"></xui-textbox>\n                </xui-item>\n                <xui-item required name="contactPhone" label="联系电话">\n                    <xui-textbox type="text" value="{=data.contactPhone=}" placeholder="请输入联系电话"></xui-textbox>\n                </xui-item>\n                <xui-item required name="verifyCode" label="验证码" s-if="{{needVerifyCode}}" class="extend-verify-code">\n                    <xui-textbox type="text" value="{=data.verifyCode=}" placeholder="请输入验证码"></xui-textbox>\n                    <span class="verify-code-link {{verifyCodeBtnDisabled ? \'not-link\' : \'\'}}" on-click="sendVerifyCode" disabled="{{verifyCodeBtnDisabled}}">{{verifyCodeBtnText}}</span>\n                </xui-item>\n            </xui-form>\n        </template>\n        <template s-if="{{!isEdit}}">\n            <div class="extend-dialog-success">\n                <xui-icon  style="color:#5FB333;font-size: 68px;margin-right: 20px;margin-top: 20px;" name="ok-reverse"/>\n                <div class="tip-content-wrap">\n                    <p>申请提交成功</p>\n                    <p class="extend-dialog-light-grey">工作人员会在3个工作日内审核</p>\n                </div>\n            </div>\n            <div class="new-serial-and-extend-extro-tips extend-dialog-light-grey">\n                <p>如需加急处理，可<a href="{{ticketUrl}}" target="_blank">提交工单</a>，在"人工智能-图像识别"类型下咨询</p>\n            </div>\n        </template>\n        <div slot="foot" s-if="{{isEdit}}">\n            <xui-button on-click="submit" skin="primary" data-track-id="ai-edge-serialnumber-extend" data-track-name="序列号管理页-序列号延期">确定</xui-button>\n            <xui-button on-click="close">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offlineSDK/serial/list/extendDialog/index",["exports","module","./extendDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offlineSDK/serial/list/extendDialog/rules",["exports","module","babel-runtime/helpers/extends","async-validator"],function(exports,module,e,t){module.exports=function(a){var i=e["default"]({industry:function(e,t,a,i){if(!i.industry)return a("请选择行业");a()},company:[{required:!0,message:"请输入公司名称"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]{1,20}$/,message:"仅支持中英文，数字，20个字符以内"}],reason:[{required:!0,message:"请输入应用场景及理由"},{type:"string",max:500,message:"500个字符以内"}],contactName:[{required:!0,message:"请填写联系人姓名"},{pattern:/^[A-Za-z\u4e00-\u9fa5]{1,20}$/,message:"仅支持中英文，20个字符以内"}],contactPhone:[{required:!0,message:"请填写联系手机"},{pattern:RegExp("^("+a.oldPhone+"|1[3-9]\\d{9})$"),message:"请填写正确的手机号码格式"}]},a.needVerifyCode?{verifyCode:[{required:!0,message:"请填写验证码"},{pattern:/^[0-9]{4}$/,message:"请正确填写验证码"}]}:{});return new t["default"](i)}}),define("ai/page/offlineSDK/serial/list/htmlConfig",["exports","module","ai/common/enums"],function(exports,module,e){module.exports=function(t){var a=t.ticketUrl,i=t.aiAppType,n=t.sdks,r=t.proText,s=t.isEasydl,o=t.getDetailUrl;return[{title:"按单台设备激活",easyedge:[{text:"1. 按单台设备获得授权激活SDK（如需开发APP，建议选择按产品线激活），每个序列号只可在一台设备上激活SDK"},{text:'2. 在\n                        <a href="'+n+'" target="_blank">SDK列表页</a>\n                        下载SDK后，需要按如下步骤激活后方能使用：'},{text:'① 在下方新增序列号 <xui-icon name="sort-ascending" /> ② 在设备端部署SDK并使用序列号联网激活 <xui-icon name="sort-ascending" /> ③ 可离线使用',className:"tutorial-child-item"},{text:"3. 每个序列号联网激活后有效期为15天，可申请延期"},{text:'如有疑问，可<a href="'+a+'" target="_blank">提交工单</a>，在"人工智能-图像识别"类型下咨询'}]}].concat(s?i===e.AppType.easydlPro?{title:"按多台设备激活",easydl:[{text:"1. 单个序列号可在多台设备上激活SDK，操作步骤："},{text:"① 下载所需模型已发布的离线SDK → ② 在下方申请新增序列号 → ③ 设备端部署离线SDK，并联网激活 → ④ 离线使用",className:"tutorial-child-item"},{text:"2. 联网激活后序列号有效期为3个月，可申请延期"},{text:'使用过程中如有其他问题，可以<a href="'+a+'" target="_blank">提交工单</a>或加入EasyDL官方QQ群（813291890）咨询'}]}:{title:"按多台设备激活",easydl:[{text:"1. 单个序列号可在多台设备上激活SDK，操作步骤："},{text:"① 下载所需模型已发布的设备端SDK → ② 在下方购买永久授权或申请新增测试序列号 → ③ 设备端部署SDK，并联网激活 → ④ 离线使用",className:"tutorial-child-item"},{text:'2. 授权序列号分为基础版、加速版两种，加速版SDK（仅支持Windows操作系统部分硬件）需用加速版序列号激活 \n                            <a href="'+o+'" target="_blank">了解详情</a>'},{text:"3. 测试序列号联网激活后有效期为3个月"},{text:'使用过程中如有其他问题，可以<a href="'+a+'" target="_blank">提交工单</a>或加入EasyDL官方QQ群（813291890）咨询'}]}:[],[{title:"按产品线激活",easyedge:[{text:"1. Android/iOS系统的SDK可按产品线获得授权激活，序列号与包名（Package Name/Bundle ID）绑定"},{text:'2. 在\n                        <a href="'+n+'" target="_blank">SDK列表页</a>\n                        下载SDK后，需要按如下步骤激活后方能使用：'},{text:'① 在下方新增序列号 <xui-icon name="sort-ascending" /> ② 在设备端部署SDK并使用序列号联网激活 <xui-icon name="sort-ascending" /> ③ 可离线使用',className:"tutorial-child-item"},{text:"3. 每个序列号联网激活后有效期为15天，可申请延期"},{text:'如有疑问，可<a href="'+a+'" target="_blank">提交工单</a>，在"人工智能-图像识别"类型下咨询'}],easydl:[{text:"1. Android/iOS操作系统的SDK可按产品线获得授权激活，序列号与包名（Package Name/Bundle ID）绑定，操作步骤："},{text:"① 下载所需模型已发布的设备端SDK → ② 在下方新增测试序列号 → ③设备端部署SDK，并联网激活 → ④离线使用",className:"tutorial-child-item"},{text:"2. "+r+"即可新增2个测试序列号，联网激活后有效期为3个月"},{text:'如需购买永久授权或使用过程中有任何问题，可以<a href="'+a+'" target="_blank">提交工单</a>或加入官方QQ群（813291890）咨询'}]}])}}),define("ai/page/offlineSDK/serial/list/index",["exports","module","./list","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offlineSDK/serial/list/list",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./list.tpl","ai/common/enums","san-xui","./newSerialNumDialog/index","./extendDialog/index","./download/index","ai/common/util","lodash","./htmlConfig","./tableDataConfig","./mutiNewSerialNumDialog/index","./mutiApplyTop/index","../config"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g,v){var x,b,y=n["default"](i),k=n["default"](r),T=n["default"](l),w=n["default"](u),I=n["default"](d),D=n["default"](p),S=n["default"](f),A=n["default"](m),$=n["default"](h),E=n["default"](g),L=(b={},b[s.AppType.easyedge]=(x={},x[s.EasyEdgeActiveType.DEVICE]=100,x[s.EasyEdgeActiveType.BUNDLE]=20,x),b);module.exports=y["default"]({template:k["default"],components:{"xui-tab":o.Tab,"xui-tab-panel":o.TabPanel,"newserialnum-dialog":T["default"],"extend-dialog":w["default"],"download-dialog":I["default"],"muti-newserialnum-dialog":$["default"],"muti-apply-top":E["default"]},filters:{productStatus:function(e){return 0===e.activateStatus?"未激活":s.SerialNumberStatus.getTextFromValue(e.status)},convertType:function(e){return s.EasydlBundleType.getTextFromAlias(e)||"基础版"}},initData:function(){var e;return{currentType:s.EasyEdgeActiveType.DEVICE,typeNameToId:v.typeNameToId,EasyEdgeActiveType:s.EasyEdgeActiveType,table:(e={},e[s.EasyEdgeActiveType.BUNDLE]=this.generateDataConfig(s.EasyEdgeActiveType.BUNDLE),e[s.EasyEdgeActiveType.DEVICE]=this.generateDataConfig(s.EasyEdgeActiveType.DEVICE),e[s.EasyEdgeActiveType.BATCH]=this.generateDataConfig(s.EasyEdgeActiveType.BATCH),e),pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]},mutiNewSerialNum:{open:!1,info:{}},mutiApplyTop:{open:!1,info:{}},breadItem:[],activationUrl:"",ticketUrl:"",productType:"",noSDKUrl:"",EasyApplyStatus:s.EasyApplyStatus,MAX_LIMIT:L,getDetailUrl:"//ai.baidu.com/ai-doc/EASYDL/ok38n2w9h#设备端sdk",unpaidDialog:{open:!1,unpaidId:""},sdkListAll:[],models:[]}},attached:function(){return t["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:this.initTypeConfig(),v.TYPES.forEach(function(e){t.watch("table."+e+".page",function(){return t.fetchListDebounce(e)}),t.watch("table."+e+".size",function(){1===t.$get("table."+e+".page")&&t.fetchListDebounce(e),t.$set("table."+e+".page",1)})}),this.handleType(),this.getSdkList();case 4:case"end":return e.stop()}},null,this)},computed:{newSerialNumDisable:function(){return this.data.get("applyStatus")===s.EasyApplyStatus.NOSDK},htmlConfig:function(){var e=this.data.get("Url");return S["default"]({ticketUrl:this.data.get("ticketUrl"),isEasydl:this.data.get("isEasydl"),aiAppType:this.data.get("aiAppType"),sdks:e?e.easyedge.sdks:"",proText:this.data.get("proText"),getDetailUrl:this.data.get("getDetailUrl")})},applyStatus:function(){var e=this.data.get("currentType");return this.data.get("table."+e+".applyStatus")},showMaxLimitTip:function(){var e=this.data.get("isEasydl")?s.AppType.easydl:this.data.get("aiAppType"),t=this.data.get("currentType");return e===s.AppType.easyedge&&this.data.get("table."+t+".reachLimit")},isPro:function(){return this.data.get("aiAppType")===s.AppType.easydlPro},proText:function(){return this.data.get("isEasydl")&&this.data.get("isPro")?"每部署一个项目":"每发布一个模型"},typeCanBuy:function(){return this.data.get("aiAppType")===s.AppType.easydlLite&&this.data.get("currentType")!==s.EasyEdgeActiveType.BUNDLE}},messages:{updateEasyEdgeSerialNumList:function(){this.fetchListDebounce(this.$get("currentType"))}},initTypeConfig:function(){var e=this,t=this.$get("isEasydl")?s.AppType.easydl:this.$get("aiAppType"),i=this.$get("Url"),n={breadItem:{easyedge:[{title:"序列号管理"}],easydl:[{title:"设备端服务管理"}]},activationUrl:{easyedge:i.easyedge.activation,easydl:i[this.$get("aiAppType")].activation},ticketUrl:{easyedge:i.ticket+"~productId=107&questionId=700",easydl:i.ticket+"~productId=171"},productType:{easyedge:"edge",easydl:this.$get("isPro")?"easydl-pro":"easydl"},noSDKUrl:{easyedge:i.easyedge.create,easydl:i[this.$get("aiAppType")].create}};a["default"](n).forEach(function(a){e.$set(a,n[a][t])})},generateDataConfig:function(e){return A["default"]({type:e})},changeTab:function(e){var t=e.item,a={"按单台设备激活":s.EasyEdgeActiveType.DEVICE,"按多台设备激活":s.EasyEdgeActiveType.BATCH,"按产品线激活":s.EasyEdgeActiveType.BUNDLE}[t.text];this.$set("currentType",a),this.$get("table."+a+".datasource").length||this.fetchList(a),this.handleOrder(a)},toTab:function(e){this.ref("tab").onTabClick({text:v.TABS[e].text},v.TABS[e].index),this.goToCreate()},handleOrder:function(e){if(this.$get("table."+e+".order")){var t=D["default"].findIndex(this.$get("table."+e+".schema"),{name:"expireTime"});this.$set("table."+e+".schema["+t+"].order",this.$get("table."+e+".order"))}},toggleTutorial:function(){var e="table."+this.$get("currentType")+".showTutorial";this.$set(e,!this.$get(e))},fetchListDebounce:D["default"].debounce(function(e){this.fetchList(e)},50),fetchList:function(e){var a,i,n,r,s,o,l;return t["default"].async(function(u){for(;;)switch(u.prev=u.next){case 0:return a=this.$get("table."+e),i=a.page,n=a.size,r=a.order,u.next=6,t["default"].awrap(c.getAsyncTuple(this.ajax.easyEdgeSerialNumberList({type:this.$get("typeNameToId")[e],pageNo:i,pageSize:n,order:r,productType:this.$get("productType")})));case 6:if(s=u.sent,o=s[0],l=s[1],!o){u.next=12;break}return this.$errorToast(o.global),u.abrupt("return");case 12:this.handleData(l,e);case 13:case"end":return u.stop()}},null,this)},handleData:function(e,t){var a;this.$set("table."+t+".applyStatus",e.applyStatus),e.applyStatus?this.$$set((a={},a["table."+t+".datasource"]=e.result,a["table."+t+".totalCount"]=e.totalCount,a["table."+t+".showTutorial"]=!e.hasActivate,a["table."+t+".xeye"]=e.xeye,a["table."+t+".edgeboard"]=e.edgeboard,a["table."+t+".ebvpu"]=e.ebvpu,a["table."+t+".reachLimit"]=e.reachLimit,a)):this.$set("table."+t+".showTutorial",!0)},clickEdit:function(e,t,a){this.toggleCellInput(a,!0),this.bindBlurHandle(e,t,a)},toggleCellInput:function(e,t){this.$set("table."+this.$get("currentType")+".datasource["+e+"].__editing",t)},bindBlurHandle:function(e,t,a){var i=this;this.nextTick(function(){var n=document.getElementById("serial_cell_input_"+a);n.onblur=function(){i.toggleCellInput(a,!1),n.value!==e&&n.value.trim().length>0&&i.updateLabel(t,n.value)},n.onkeyup=function(e){13===e.keyCode&&n.onblur()},n.focus();var r=n.value;n.value="",n.value=r})},updateLabel:function(e,t){var a=this;this.ajax.easyEdgeSerialNumberUpdateLabel({id:e,label:t}).then(function(){a.fetchList(s.EasyEdgeActiveType.DEVICE)})["catch"](function(e){e.field&&e.field.label&&o.notification.error(e.field.label)})},goToCreate:function(){var e=this.$get("currentType");e!==s.EasyEdgeActiveType.BATCH?this.ref("serialNumDialog").$$set({isEdit:!0,open:!0}):this.$set("mutiNewSerialNum",{open:!0,info:{edgeboard:this.$get("table."+e+".edgeboard"),xeye:this.$get("table."+e+".xeye"),ebvpu:this.$get("table."+e+".ebvpu")}})},creatExtend:function(e){this.$get("isEasydl")?this.$aiRedirect("serial/extend",{id:e.id,type:this.$get("currentType")}):this.ref("extendDialog").$$set({"range.begin":new Date(e.expireTime),serialNumID:e.id,isEdit:!0,open:!0,"data.onlineTime":new Date(e.expireTime+2592e6)})},onPagerChange:function(e){var t=e.pageNo;this.$set("table."+this.$get("currentType")+".page",t)},sort:function(e){var t=this.$get("currentType");this.$set("table."+t+".order",e.order),this.fetchList(t)},showDownloadDialog:function(){this.ref("downloadDialog").$$set({open:!0,sdkListAll:this.$get("sdkListAll"),modelProjectList:this.$get("models")})},improveTopLine:function(e){this.$set("mutiApplyTop",{open:!0,info:e})},handleType:function(){var e=this.$get(),t=e.type,a=e.currentType;this.watch("currentType",function(e){c.changeHash({type:e})}),t&&~v.TYPES.indexOf(t)&&t!==a?(this.changeTab({item:v.TABS[t]}),this.ref("tab").onTabClick({text:v.TABS[t].text},v.TABS[t].index)):this.fetchList(a)},buyOffical:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.getUnpaidId({type:this.$get("aiAppType"),productType:"sdks"}));case 2:if(!(e=a.sent)){a.next=6;break}return this.$set("unpaidDialog",{open:!0,unpaidId:e}),a.abrupt("return");case 6:this.$aiRedirect("serial/shopCart",{type:this.$get("currentType")});case 7:case"end":return a.stop()}},null,this)},getSdkList:function(){var a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(this.ajax.easydlLiteSdkList({type:this.$get("aiAppType")}));case 2:a=r.sent,i=a.map(function(t){return e["default"]({text:t.modelName||t.projectName,value:t.modelId||t.projectId,realId:t.modelId||t.projectId},t)}),n={},this.$set("sdkListAll",i),this.$set("models",i.filter(function(e){var t=e.realId;return!n[t]&&(n[t]=!0,!0)}));case 7:case"end":return r.stop()}},null,this)}})}),define("ai/page/offlineSDK/serial/list/list.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content easyedge-serial-list-content">\n                <h2>{{breadItem[0].title}}</h2>\n                <xui-tab skin="card" on-change="changeTab" s-ref="tab">\n                    <xui-tab-panel title="{{item.title}}" s-for="item in htmlConfig">\n                        <div class="tutorial-wrap">\n                            <div class="tutorial-header">\n                                使用说明<span s-if="!table[currentType].showTutorial">（展开查看授权方式、激活方法等）</span>\n                                <a s-if="!table[currentType].showTutorial" on-click="toggleTutorial" href="javascript:void(0)"><i class="iconfont icon-thin-arrow-top icon-transtorm"></i>展开</a>\n                                <a s-else on-click="toggleTutorial" href="javascript:void(0)"><i class="iconfont icon-thin-arrow-top"></i>收起</a>\n                            </div>\n                            <div s-if="table[currentType].showTutorial" class="tutorial-content">\n                                <template s-if="{{isEasydl}}">\n                                    <template s-if="{{currentType === EasyEdgeActiveType.DEVICE}}">\n                                        <template s-if="{{typeCanBuy}}">\n                                            <p class="tutorial-item">1. 按单台设备获得授权激活SDK，操作步骤：</p>\n                                            <p class="tutorial-item tutorial-child-item">① 下载所需模型已发布的设备端SDK  → ② 在下方购买永久授权或新增测试序列号 → ③ 设备端部署SDK，并联网激活  → ④ 离线使用</p>\n                                            <p class="tutorial-item">2. 授权序列号分为基础版、加速版两种，加速版SDK（仅支持Windows操作系统部分硬件）需用加速版序列号激活 \n                                                <a href="{{getDetailUrl}}" target="_blank">了解详情</a>\n                                            </p>\n                                            <p class="tutorial-item">3. 每发布一个模型即可新增2个基础版测试序列号和2个加速版测试序列号，联网激活后有效期为3个月</p>\n                                            <p class="tutorial-item">如需用同一序列号激活多台设备，请前往<a href="javascript:void(0)" on-click="toTab(EasyEdgeActiveType.BATCH)">按多台设备激活</a>页面申请；如需开发APP，建议选择<a href="javascript:void(0)" on-click="toTab(EasyEdgeActiveType.BUNDLE)">按产品线激活</a></p>\n                                            <p class="tutorial-item">使用过程中如有其他问题，可以<a href="{{ticketUrl}}" target="_blank">提交工单</a>或加入EasyDL官方QQ群（813291890）咨询</p>\n                                        </template>\n                                        <template s-else>\n                                            <p class="tutorial-item">1. 按单台设备获得授权激活SDK，操作步骤：</p>\n                                            <p class="tutorial-item tutorial-child-item">① 下载所需模型已发布的离线SDK → ② 在下方新增序列号 → ③ 设备端部署离线SDK，并联网激活 → ④ 离线使用</p>\n                                            <p class="tutorial-item">2. {{proText}}即可新增2个基础版序列号和2个加速版序列号，加速版SDK（仅支持Linux和Windows操作系统的部分硬件）需用加速版序列号激活</p>\n                                            <p class="tutorial-item">3. 序列号联网激活SDK后有效期为3个月，可申请延期</p>\n                                            <p class="tutorial-item">如需用同一序列号激活多台设备，请前往<a href="javascript:void(0)" on-click="toTab(EasyEdgeActiveType.BATCH)">按多台设备激活</a>页面申请；如需开发APP，建议选择<a href="javascript:void(0)" on-click="toTab(EasyEdgeActiveType.BUNDLE)">按产品线激活</a></p>\n                                            <p class="tutorial-item">使用过程中如有其他问题，可以<a href="{{ticketUrl}}" target="_blank">提交工单</a>或加入EasyDL官方QQ群（813291890）咨询</p>\n                                        </template>\n                                    </template>\n                                    <template s-else>\n                                        <p \n                                            class="tutorial-item {{pItem.className || \'\'}}"\n                                            s-for="pItem in item.easydl"\n                                        >\n                                            {{pItem.text | raw}}\n                                        </p>\n                                    </template>\n                                </template>\n                                <template s-else>\n                                    <p \n                                        class="tutorial-item {{pItem.className || \'\'}}"\n                                        s-for="pItem in item[aiAppType]"\n                                    >\n                                        {{pItem.text | raw}}\n                                    </p>\n                                </template>\n                            </div>\n                        </div>\n                    </xui-tab-panel>\n                </xui-tab>\n                <section>\n                    <xui-button s-if="{{typeCanBuy}}" skin="ok" icon="plus" on-click="buyOffical" class="buy-offical">\n                        购买永久授权\n                    </xui-button>\n                    <xui-button skin="{{typeCanBuy ? \'\' : \'ok\'}}" icon="{{typeCanBuy ? \'\' : \'plus\'}}" data-track-id="ai-easyedge-{{currentType}}-create-app" data-track-name="EasyEdge端计算平台-序列号管理" on-click="goToCreate" disabled="{{newSerialNumDisable}}">\n                        新增{{typeCanBuy ? \'测试\' : \'\'}}序列号\n                    </xui-button>\n                    <xui-tip s-if="{{showMaxLimitTip}}">每个账号最多只能新增{{MAX_LIMIT[aiAppType][currentType]}}个序列号，如需新增更多序列号，可提<a href="{{ticketUrl}}" target="_blank">提交工单</a>，在“人工智能-图像识别”类型下咨询</xui-tip>\n                    <template s-if="{{isEasydl}}">\n                        <a href="{{ticketUrl}}" target="_blank" class="ui-ctrl ui-button right-button">工单支持</a>\n                        <a href="{{Url[aiAppType].doc}}" target="_blank" class="ui-ctrl ui-button right-button">开发文档</a>\n                        <a on-click="showDownloadDialog" class="ui-ctrl ui-button right-button">下载SDK</a>\n                    </template>\n                </section>\n                <xui-table datasource="{{table[currentType].datasource}}" schema="{{table[currentType].schema}}" on-sort="sort">\n                    <template slot="c-serialKey">\n                        <p class="for-select">{{row.serialKey}}</p>\n                    </template>\n                    <template slot="c-deviceType">\n                        {{row.deviceType | convertType}}\n                    </template>\n                    <template slot="c-activateTime">\n                        {{row.activateTime | dateFormat(\'YYYY-MM-DD\', \'/\')}}\n                    </template>\n                    <template slot="c-expireTime">\n                        {{row.expireTime | dateFormat(\'YYYY-MM-DD\', \'/\')}}\n                    </template>\n                    <template slot="c-status">\n                        {{row | productStatus}}\n                    </template>\n                    <template slot="c-activateDeviceNum">\n                        {{row.curActivateDeviceNum}}/{{row.maxActivateDeviceNum}}\n                    </template>\n                    <template slot="c-name">\n                        <div class="bundle-name" s-if="{{currentType === \'bundle\'}}" title="{{row.name}}">{{row.name}}</div>\n                        <div s-else>\n                            <div class="serial-td-wrap {{row.__editing ? \'editing\' : \'\'}}">\n                                <div class="serial-cell">{{row.name}}\n                                    <a on-click="clickEdit(row.name, row.id, rowIndex)" href="javascript:void(0)">\n                                        <i class="iconfont icon-business-consult"></i>\n                                    </a>\n                                </div>\n                                <div class="ui-textbox"><input value="{{row.name}}" id="serial_cell_input_{{rowIndex}}" maxlength="10"></div>\n                            </div>\n                        </div>\n                    </template>\n                    <template slot="c-ctl">\n                        <a s-if="row.activateStatus === 0" href="{{activationUrl}}" target="_blank">如何激活</a>\n                        <span s-else-if="!row.canExtend" target="申请审核中" style="color: #999">申请审核中</span>\n                        <a s-else href="javascript:void(0)" on-click="creatExtend(row)">申请延期</a>\n                        <a s-if="row.orderId" href="#/ai/market/buyer/order/detail~orderId={{row.orderId}}">订单详情</a>\n                        <a s-if="row.canEnlarge && currentType === EasyEdgeActiveType.BATCH" href="javascript:void(0);" on-click="improveTopLine(row)">提高设备数上限</a>\n                    </template>\n                    <div slot="empty" class="ui-table-body-nodata">\n                        <div>\n                            <p s-if="{{applyStatus !== EasyApplyStatus.NOSDK}}">\n                                <div>还没有序列号</div>\n                                <a on-click="goToCreate" href="javascript:void(0)" class="create-btn" data-track-id="ai-easyedge-{{currentType}}-create-app" data-track-name="EasyEdge端计算平台-序列号管理">立即新增&gt;</a>\n                            </p>\n                            <p s-else>\n                                <div s-if="aiAppType === \'easyedge\'">您需要先生成<a href="{{noSDKUrl}}" target="_blank">端计算模型</a>，才能获取序列号</div>\n                                <div s-else>您需要先发布<a href="{{noSDKUrl}}" target="_blank">离线SDK</a>，才能获取序列号</div>\n                            </p>\n                        </div>\n                    </div>\n                </xui-table>\n                <div class="pager-row">\n                    <span class="pager-label">每页显示</span>\n                    <xui-select datasource="{{pageSelect.datasource}}" value="{=table[currentType].size=}" />\n                    <xui-pager on-change="onPagerChange($event)" size="{{table[currentType].size}}" page="{=table[currentType].page=}" count="{{table[currentType].totalCount}}" />\n                </div>\n                \x3c!-- 单台设备和产品线新增序列号--\x3e\n                <newserialnum-dialog san-ref="serialNumDialog" currentType="{{currentType}}" proText="{{proText}}" ticketUrl="{{ticketUrl}}" totalCount="{{table.device.totalCount}}" typeNameToId="{{typeNameToId}}" productType="{{productType}}"></newserialnum-dialog>\n                \x3c!--easyedge 申请延期弹框--\x3e\n                <extend-dialog san-ref="extendDialog" ticketUrl="{{ticketUrl}}"></extend-dialog>\n                <template s-if="{{isEasydl}}">\n                    \x3c!-- easydl 多台设备激活新增序列号--\x3e\n                    <muti-newserialnum-dialog models="{{models}}" open="{=mutiNewSerialNum.open=}" info="{{mutiNewSerialNum.info}}" productType="{{productType}}"/>\n                    \x3c!-- easydl 下载SDK--\x3e\n                    <download-dialog s-ref="downloadDialog" />\n                    \x3c!-- easydl 多台设备激活提高上限--\x3e\n                    <muti-apply-top models="{{models}}" open="{=mutiApplyTop.open=}" info="{{mutiApplyTop.info}}"/>\n                </template>\n            </div>\n            \x3c!-- 未支付订单弹框 --\x3e\n            <xui-dialog open="{=unpaidDialog.open=}" title="您还有未支付的订单" width="500">\n                <p>尊敬的用户您好，购买之前，请您先处理已建的未支付订单。</p>\n                <div slot="foot">\n                    <a target="_blank" href="/billing/#/order/detail~uuid={{unpaidDialog.unpaidId}}&serviceType=EASYDL">\n                        <xui-button skin="primary">查看订单</xui-button>\n                    </a>\n                    <a target="_blank" href="/billing/#/order/list">\n                        <xui-button skin="danger">去支付</xui-button>\n                    </a>\n                </div>\n            </xui-dialog>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/offlineSDK/serial/list/mutiApplyTop/index",["exports","module","./mutiApplyTop","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offlineSDK/serial/list/mutiApplyTop/mutiApplyTop",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./mutiApplyTop.tpl","./rules"],function(exports,module,e,t,a,i,n,r){var s=i["default"](a),o=i["default"](n),l=i["default"](r);module.exports=s["default"]({template:o["default"],initData:function(){return{errors:{},form:{maxActivateDeviceNum:"",reason:""}}},computed:{rules:function(){return l["default"]({maxActivateDeviceNum:this.data.get("info.maxActivateDeviceNum")})}},created:function(){return t["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:this.watch("open",function(){t.$set("form",{maxActivateDeviceNum:"",reason:""})});case 1:case"end":return e.stop()}},null,this)},cancel:function(){this.$set("open",!1)},submit:function(){var a,i;return t["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t["default"].awrap(this.ref("form").validateForm());case 2:return a=this.$get("info"),i=a.id,n.prev=4,n.next=7,t["default"].awrap(this.ajax.easyEdgeSerialNumberEnlarge(e["default"]({id:i},this.$get("form"))));case 7:this.dispatch("updateEasyEdgeSerialNumList"),this.cancel(),n.next=16;break;case 11:if(n.prev=11,n.t0=n["catch"](4),!n.t0.field){n.next=16;break}return this.$set("errors",n.t0.field),n.abrupt("return");case 16:case"end":return n.stop()}},null,this,[[4,11]])}})}),define("ai/page/offlineSDK/serial/list/mutiApplyTop/mutiApplyTop.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="提高可激活序列号上限" width="470">\n        <xui-form s-ref="form" formData="{{form}}" class="muti-apply-new-top-dialog" rules="{{rules}}" errors="{=errors=}">\n            <xui-item label="序列号：">\n                <div>{{info.serialKey}}</div>\n            </xui-item>\n            <xui-item label="已激活/可激活设备数：">\n                <div>{{info.curActivateDeviceNum}}/{{info.maxActivateDeviceNum}}</div>\n            </xui-item>\n            <xui-item label="申请上限数：" required name="maxActivateDeviceNum">\n                <xui-textbox width="222" placeholder="请填写上限" value="{=form.maxActivateDeviceNum=}"/>\n            </xui-item>\n            <xui-item label="申请理由：" required name="reason">\n                <xui-textbox width="242" value="{=form.reason=}" multiline placeholder="请填写不超过500个字来描述您的申请理由" />\n            </xui-item>\n        </xui-form>\n        <div slot="foot">\n            <xui-button on-click="submit" skin="primary">提交申请</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offlineSDK/serial/list/mutiApplyTop/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=function(t){var a=t.maxActivateDeviceNum,i={maxActivateDeviceNum:[{validator:function(e,t,i,n){t?/^\d+$/.test(t)?t<=a?i("需大于当前可激活数"):i():i("仅支持数字"):i("请填写上限")}}],reason:[{required:!0,message:"请填写申请理由"},{max:500,message:"限500字"}]};return new e["default"](i)}}),define("ai/page/offlineSDK/serial/list/mutiNewSerialNumDialog/index",["exports","module","./mutiNewSerialNumDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offlineSDK/serial/list/mutiNewSerialNumDialog/mutiNewSerialNumDialog",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/object/keys","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./mutiNewSerialNumDialog.tpl","lodash","ai/common/enums","./rules"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=n["default"](i),d=n["default"](r),c=n["default"](s),p=n["default"](l);module.exports=u["default"]({template:d["default"],initData:function(){return{errors:{},models:[],form:{modelId:"",version:"",deviceType:"",maxActivateDeviceNum:"",reason:""}}},computed:{model:function(){var e=this.data.get("form.modelId");return c["default"].find(this.data.get("models"),function(t){return t.modelId===e})},versions:function(){var e=this.data.get("model");if(e){var t=e.version;return[{text:"V"+t+"("+e.deployType+")",value:t}]}return[]},hasXeyeOrEageBoard:function(){var e=this.data.get("info");return t["default"](e).some(function(t){return e[t]})},typeSource:function(){var e=this.data.get("info"),a=[{text:"基础版",value:"basic"},{text:"加速版",value:"acceleration"}];return t["default"](e).map(function(t){e[t]&&a.push({text:o.EasydlBundleType.getTextFromAlias(t),value:t})}),a},rules:function(){return p["default"]()},isPro:function(){return this.data.get("aiAppType")===o.AppType.easydlPro}},created:function(){return a["default"].async(function(e){for(var t=this;;)switch(e.prev=e.next){case 0:this.watch("modelId",function(){return t.$set("version","")}),this.watch("open",function(){t.$set("form",{modelId:"",version:"",deviceType:"",maxActivateDeviceNum:"",reason:""})});case 2:case"end":return e.stop()}},null,this)},cancel:function(){this.$set("open",!1)},submit:function(){var t,i,n;return a["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a["default"].awrap(this.ref("form").validateForm());case 2:return t={productType:this.$get("productType"),type:3,num:1},i=this.$get(),n=i.form,i.hasXeyeOrEageBoard||(n.deviceType="basic"),this.$get("isPro")&&(n.projectId=n.modelId),r.prev=8,r.next=11,a["default"].awrap(this.ajax.easyEdgeMutiSerialNumberApply(e["default"]({},t,n)));case 11:this.dispatch("updateEasyEdgeSerialNumList"),this.cancel(),r.next=20;break;case 15:if(r.prev=15,r.t0=r["catch"](8),!r.t0.field){r.next=20;break}return this.$set("errors",r.t0.field),r.abrupt("return");case 20:case"end":return r.stop()}},null,this,[[8,15]])}})}),define("ai/page/offlineSDK/serial/list/mutiNewSerialNumDialog/mutiNewSerialNumDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="新增序列号" width="470">\n        <xui-form s-ref="form" formData="{{form}}" class="muti-apply-new-top-dialog new-serial-number-dialog" rules="{{rules}}" errors="{=errors=}">\n            <xui-item label="{{isPro ? \'选择项目\' : \'选择模型\'}}：" required name="modelId">\n                <xui-select datasource="{{models}}" value="{=form.modelId=}"/>\n            </xui-item>\n            <xui-item label="{{isPro ? \'选择任务版本\' : \'选择版本\'}}" required name="version">\n                <xui-select datasource="{{versions}}" value="{=form.version=}"/>\n            </xui-item>\n            <xui-item label="序列号类型：" required name="deviceType">\n                <xui-select datasource="{{typeSource}}" value="{=form.deviceType=}"/>\n            </xui-item>\n            <xui-item s-if="form.deviceType === \'acceleration\'">\n                <div class="acceleration-tip">\n                    可用于激活加速版SDK，仅支持Linux和Windows操作系统的部分硬件\n                </div>\n            </xui-item>\n            <xui-item label="可激活设备数上限：" required name="maxActivateDeviceNum">\n                <xui-textbox width="222" placeholder="请填写上限" value="{=form.maxActivateDeviceNum=}"/>\n            </xui-item>\n            <xui-item label="申请理由：" required name="reason">\n                <xui-textbox width="242" value="{=form.reason=}" multiline placeholder="请填写不超过500个字来描述您的申请理由" />\n            </xui-item>\n        </xui-form>\n        <div slot="foot">\n            <xui-button on-click="submit" skin="primary">提交申请</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offlineSDK/serial/list/mutiNewSerialNumDialog/rules",["exports","module","async-validator"],function(exports,module,e){module.exports=function(t){return new e["default"]({modelId:[{required:!0,message:"请选择"}],version:[{required:!0,message:"请选择"}],maxActivateDeviceNum:function(e,t,a,i){if(!/^\d+$/.test(t)||+t<1)return a("请填写正确的数量");a()},reason:[{required:!0,message:"请填写申请理由"},{max:500,message:"限500字"}],deviceType:[{required:!0,message:"请选择序列号类型"}]})}}),define("ai/page/offlineSDK/serial/list/newSerialNumDialog/index",["exports","module","./newSerialNumDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offlineSDK/serial/list/newSerialNumDialog/newSerialNumDialog",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","async-validator","bat-ria/tpl!./newSerialNumDialog.tpl","san-xui","ai/common/util","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=i["default"](a),d=i["default"](r);module.exports=u["default"]({template:d["default"],components:{"xui-dialog":s.Dialog,"xui-form":s.Form,"xui-item":s.FormItem},computed:{rules:function(){var t=e["default"]({bundleName:[{required:!0,message:"请检查包名是否填写正确"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5-.]{1,100}$/,message:"请检查包名是否填写正确"}]},"device"===this.data.get("currentType")?e["default"]({deviceNumber:function(e,t,a,i){return!/^\d+$/.test(t)||+t<1?a("请填写正确的数量"):+t>20?a("每个账号单次最多只能新增20个序列号"):void a()}},this.data.get("isEasydl")?{deviceType:[{required:!0,message:"请选择序列号类型"}]}:{},{bundleName:[]}):{});return new n["default"](t)}},initData:function(){return{data:{platform:"Android",bundleName:"",deviceNumber:"",deviceType:""},errors:{},isEdit:!0,open:!1,newSerialNumList:[],platformList:[{text:"Android",value:"Android"},{text:"iOS",value:"iOS"}],deviceTypeList:[{text:"基础版",value:"basic"},{text:"加速版",value:"acceleration"}]}},attached:function(){var e=this;this.watch("open",function(t){t&&e.reset()})},submit:function(){var a,i,n,r,s,l,u,d,c,p,f;return t["default"].async(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,t["default"].awrap(o.getAsyncTuple(this.ref("form").validateForm()));case 2:if(a=m.sent,!a[0]){m.next=6;break}return m.abrupt("return");case 6:return i=this.$get("data"),n=i.deviceNumber,r=i.deviceType,s=i.bundleName,l=i.platform,u=this.$get("currentType"),d=e["default"]({type:this.$get("typeNameToId")[u],deviceType:"basic",productType:this.$get("productType")},"device"===u?e["default"]({count:+n},this.$get("isEasydl")?{deviceType:r}:{}):{bundleName:s,platform:l}),m.next=15,t["default"].awrap(o.getAsyncTuple(this.ajax.easyEdgeSerialNumberApply(d)));case 15:if(c=m.sent,p=c[0],f=c[1],!p){m.next=22;break}return p.global&&this.$errorToast(p.global),p.field&&this.$set("errors",p.field),m.abrupt("return");case 22:this.$$set({newSerialNumList:f.serialKeys,isEdit:!1}),this.dispatch("updateEasyEdgeSerialNumList");case 24:case"end":return m.stop()}},null,this)},close:function(){this.$set("open",!1)},reset:function(){this.$set("data",this.initData().data)}})}),define("ai/page/offlineSDK/serial/list/newSerialNumDialog/newSerialNumDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" title="新增序列号" foot="{{isEdit}}" class="new-serial-number-dialog">\n        <template s-if="{{isEdit}}">\n            <xui-form s-ref="form" formData="{{data}}" rules="{{rules}}" errors="{=errors=}">\n                <template s-if="{{currentType === \'bundle\'}}">\n                    <xui-item required name="platform" label="操作系统：">\n                        <xui-select datasource="{{platformList}}" value="{=data.platform=}" class="new-serial-platform" />\n                    </xui-item>\n                    <xui-item required name="bundleName" label="包名">\n                        <xui-textbox type="text" multiline value="{=data.bundleName=}" placeholder="请输入包名"></xui-textbox>\n                    </xui-item>\n                </template>\n                <template s-if="{{currentType === \'device\'}}">\n                    <xui-item required name="deviceType" label="序列号类型" s-if="{{isEasydl}}">\n                        <xui-select datasource="{{deviceTypeList}}" value="{=data.deviceType=}"></xui-select>\n                    </xui-item>\n                    <xui-item s-if="data.deviceType === \'acceleration\'">\n                        <div class="acceleration-tip">\n                            可用于激活加速版SDK，仅支持Linux和Windows操作系统的部分硬件\n                        </div>\n                    </xui-item>\n                    <xui-item  required name="deviceNumber" label="新增设备数">\n                        <xui-textbox value="{=data.deviceNumber=}" placeholder="请输入新增数量"></xui-textbox>\n                    </xui-item>\n                </template>\n            </xui-form>\n            <div class="new-serial-number-tips">\n                <template s-if="aiAppType === \'easyedge\'">\n                    <p s-if="{{currentType === \'device\'}}">1. 每个序列号只可在一台设备上激活SDK</p>\n                    <p s-if="{{currentType === \'bundle\'}}">1. 此次新增的序列号将以上包名（Package Name/Bundle ID）绑定，请认真填写确保无误</p>\n                    <p>2. 每个账号最多只能新增{{currentType === \'device\' ? \'100个序列号（单次最多20个）\' : \'20个序列号\'}}，如需新增更多序列号，可<a href="{{ticketUrl}}" target="_blank">提交工单</a>，在"人工智能-图像识别"类型下咨询</p>\n                </template>\n                <template s-if="{{isEasydl}}">\n                    <template s-if="{{currentType === \'device\'}}">\n                        <p>1. 每个序列号只可在一台设备上激活SDK</p>\n                        <p>2. {{proText}}即可新增2个基础版序列号和2个加速版序列号，如有疑问，可<a href="{{ticketUrl}}" target="_blank">提交工单</a>咨询</p>\n                    </template>\n                    <template s-if="{{currentType === \'bundle\'}}">\n                        <p>1. 序列号将与包名绑定，请确保填写正确</p>\n                        <p>2. {{proText}}即可新增2个序列号，如需新增更多序列号，可<a href="{{ticketUrl}}" target="_blank">提交工单</a>咨询</p>\n                    </template>\n                </template>\n            </div>\n        </template>\n        <template s-if="{{!isEdit}}">\n            <div class="success-new-serial-number">\n                <xui-icon name="ok-reverse"/>\n                <div class="tip-content-wrap">\n                    <p>序列号新增成功</p>\n                    <p s-for="item in newSerialNumList">{{item}}</p>\n                </div>\n            </div>\n            <div class="new-serial-and-extend-extro-tips">\n                <p s-if="{{currentType === \'device\'}}">每个序列号只可在一台设备上激活SDK</p>\n                <p s-if="{{currentType === \'bundle\'}}">该序列号已与包名<span class="bundle-name">{{data.bundleName}}</span>绑定</p>\n                <p>首次激活后，序列号有效期为<span>{{isEasydl ? \'90\' : \'15\'}}</span>天，可申请延期</p>\n            </div>\n        </template>\n        <div slot="foot" s-if="{{isEdit}}">\n            <xui-button on-click="submit" skin="primary" data-track-id="ai-edge-serialnumber-ok" data-track-name="序列号管理页-新增序列号">确定</xui-button>\n            <xui-button on-click="close">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/offlineSDK/serial/list/tableDataConfig",["exports","module","ai/common/enums"],function(exports,module,e){module.exports=function(t){var a,i=t.type,n=(a={},a[e.EasyEdgeActiveType.BUNDLE]="包名",a[e.EasyEdgeActiveType.DEVICE]="设备名",a);return{schema:i===e.EasyEdgeActiveType.BATCH?[{name:"serialKey",label:"序列号"},{name:"deviceType",label:"序列号类型"},{name:"activateDeviceNum",label:"已激活/可激活设备数"},{name:"expireTime",label:"到期时间",sortable:!0},{name:"ctl",label:"操作"}]:[].concat(i===e.EasyEdgeActiveType.BUNDLE?[{name:"platform",label:"操作系统"}]:[],[{name:"name",label:n[i]},{name:"status",label:"激活状态"},{name:"serialKey",label:"序列号"}],i===e.EasyEdgeActiveType.DEVICE?[{name:"deviceType",label:"序列号类型"}]:[],[{name:"activateTime",label:"激活时间"},{name:"expireTime",label:"到期时间",sortable:!0},{name:"ctl",label:"操作"}]),datasource:[],totalCount:0,size:10,page:1,order:"",showTutorial:!1,xeye:!1,edgeboard:!1,ebvpu:!1,applyStatus:e.EasyApplyStatus.NOSDK,reachLimit:!1}}}),define("ai/page/offlineSDK/serial/ShopCart/index",["exports","module","./ShopCart","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/offlineSDK/serial/ShopCart/ShopCart",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./ShopCart.tpl","inf-ria/app/brpc","ai/config/url","ai/common/util","../config","ai/common/enums"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=n["default"](i),p=n["default"](r),f=n["default"](s);module.exports=c["default"]({template:p["default"],computed:{priceTuple:function(){var e=+this.data.get("boughtCount"),t=+this.data.get("count"),a=this.data.get("sections"),i=0,n=[];if(a.length&&(e||0===e)){var r=l.calLadderPrcie(t,e,a);i=r.total,r.priceList.forEach(function(e){var t=e.showString;n.push(t)})}return{price:i,priceContent:n.join(" + ")}},name:function(){var e,t=(e={},e[d.EasyEdgeActiveType.DEVICE]="按单台设备激活授权购买",e[d.EasyEdgeActiveType.BATCH]="按多台设备激活授权购买",e)[this.data.get("type")];return t||"购买授权"},sections:function(){var e=this.data.get("sectionsAll")[this.data.get("deviceType")];return e?e.price:[]},boughtCount:function(){return this.data.get("boughtCountAll")[this.data.get("deviceType")]},isBatch:function(){return this.data.get("type")===d.EasyEdgeActiveType.BATCH},serialKeyList:function(){return this.data.get("serialKeyListAll")[this.data.get("deviceType")]}},filters:{sectionRange:function(e){return-1!==e.max?"第"+e.min+"-"+e.max+e.costUnit:"第"+e.min+e.costUnit+"及以上"},sectionPrice:function(e){return e.cost+"元/"+e.costUnit}},initData:function(){return{steps:[{text:"购买授权"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],stepIndex:0,count:1,sectionsAll:{},boughtCountAll:{},showOrder:!1,deviceType:"basic",deviceTypeList:[{text:"基础版",value:"basic"},{text:"加速版",value:"acceleration"}],authId:-1,serialKeyListAll:{}}},created:function(){var e=this;this.fetchBoughtCount(),this.fetchPrice(),this.watch("count",function(t){if(!(t.length<=0)){var a=~~t;a<1&&(a=1),a!==+t&&e.$set("count",a)}}),this.watch("deviceType",function(){e.$set("authId",-1)}),~u.TYPES.indexOf(this.$get("type"))||this.$set("type",d.EasyEdgeActiveType.DEVICE),this.$get("isBatch")&&this.getserialKeyList()},backToManage:function(){this.$aiRedirect("serial/list")},fetchPrice:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.offLineSdkPrice({type:this.$get("aiAppType"),productType:"sdks",authType:u.typeNameToId[this.$get("type")]}));case 2:e=a.sent,this.$set("sectionsAll",e);case 4:case"end":return a.stop()}},null,this)},fetchBoughtCount:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.offLineSdkBoughtApiCount({type:this.$get("aiAppType"),productType:"sdks",authType:u.typeNameToId[this.$get("type")]}));case 2:e=a.sent,this.$set("boughtCountAll",e);case 4:case"end":return a.stop()}},null,this)},getserialKeyList:function(){var e;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.easydlSDKOfficialList({productType:this.$get("aiAppType")===d.AppType.easydlPro?"easydl-pro":"easydl",authType:u.typeNameToId[this.$get("type")]}));case 2:e=i.sent,a["default"](e).forEach(function(t){e[t]=e[t].map(function(e){var t=e.id;return{text:e.serialKey,value:t}}),e[t]=[{text:"新序列号",value:-1}].concat(e[t])}),this.$set("serialKeyListAll",e);case 5:case"end":return i.stop()}},null,this)},orderConfirm:function(){var t=this;if(!((+this.$get("count")||0)<1)){var a=this.ref("confirm").__getESUI();a.on("action@prevPage",function(){t.$$set({stepIndex:0,showOrder:!1})});var i={config:{type:this.aiAppType,productType:"sdks",items:e["default"]({timeUnit:"DAY",count:this.$get("count"),authType:u.typeNameToId[this.$get("type")],type:this.$get("aiAppType"),deviceType:this.$get("deviceType")},this.$get("isBatch")?{authId:this.$get("authId")}:{})},order:{serviceType:"EASYDL",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/easydl/order/v2/confirm",price:this.$get("priceTuple.price"),items:[{serviceType:"EASYDL",productType:"prepay",count:this.$get("count"),time:"永久",price:this.$get("priceTuple.price"),unitPriceShow:"见EASYDL SDK价格",unitPriceUrl:o.easydlSDKPrice.sdkPrice,chargeType:["按量"],configuration:["全局"]}]}};f["default"].invokeService("billing://order_confirm",a,i).then(function(e){t.$$set({stepIndex:1,showOrder:!0})})}}})}),define("ai/page/offlineSDK/serial/ShopCart/ShopCart.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content class="easydl-lite-shop-cart">\n            <div class="shop-cart-header">\n                <div on-click="backToManage" class="back-to-manage">\n                    <xui-icon name="arrow-left" />\n                    <span class="btm-text">返回设备端服务管理</span>\n                </div>\n                <h4>购买授权</h4>\n                <xui-viewstep step-index="{{stepIndex}}" steps="{{steps}}" />\n            </div>\n            <div s-ref="mainWrap" class="shop-cart-body">\n                <template s-if="!showOrder">\n                    <h4 class="sc-title">{{name}}</h4>\n                    <div class="sc-content">\n                        <xui-form class="buy-form">\n                            <xui-item label="授权序列号类型：">\n                                <xui-boxgroup\n                                    box-type="radio"\n                                    datasource="{{deviceTypeList}}"\n                                    value="{=deviceType=}"\n                                />\n                            </xui-item>\n                            <table class="sc-table">\n                                <tr>\n                                    <td>累计授权设备数量</td>\n                                    <td>单设备授权价</td>\n                                </tr>\n                                <tr s-for="item in sections">\n                                    <td>{{item | sectionRange}}</td>\n                                    <td>{{item | sectionPrice}}</td>\n                                </tr>\n                            </table>\n                            <xui-item label="已购买授权的设备数量：">\n                                {{boughtCount}}个\n                            </xui-item>\n                            <xui-item label="本次购买授权的设备数量：">\n                                <xui-numbertextline width="50" min="{{1}}" max="{{999999999}}" value="{=count=}" />\n                            </xui-item>\n                            <xui-item s-if="isBatch" label="本次购买的关联序列号：">\n                                <xui-select\n                                    filter\n                                    filter-placeholder="输入内容查询，多个搜索项以空格分隔"\n                                    value="{=authId=}"\n                                    datasource="{{serialKeyList}}" />\n                                    <p class="tip blue" s-if="authId === -1">购买成功后将获得唯一的新序列号，可激活设备数为本次购买授权的设备数量</p>\n                                    <p class="tip blue" s-else>购买成功后该序列号可激活设备数将按上方填写的「本次购买授权的设备数量」增加</p>\n                            </xui-item>\n                            <xui-item label="购买费用：">\n                                <strong class="sc-price">\n                                    ¥ {{priceTuple.price}}\n                                </strong>\n                                <br>\n                                <span>阶梯计费：{{priceTuple.priceContent}}</span>\n                            </xui-item>\n                        </xui-form>\n                        <div class="sc-des-wrap">\n                            <div class="sc-des">\n                                <p>购买说明：</p>\n                                <template s-if="{{isBatch}}">\n                                    <p>1. 购买成功后将增加指定序列号的可激活设备数，增加数量为「本次购买授权的设备数量」。激活后授权永久有效，但如果硬件信息发生变更（如拆卸网卡或后续增加网卡），或者硬件损坏，则授权不可恢复。</p>\n                                </template>\n                                <template s-else>\n                                    <p>1. 按单台设备授权（依据硬件指纹信息），每个序列号仅可激活一台设备，激活后授权永久有效，但如果硬件信息发生变更（如拆卸网卡或后续增加网卡），或者硬件损坏，则授权不可恢复。</p>\n                                </template>\n                                <p>2. 序列号不限制开发平台，仅绑定于指定的设备。例如RK3399开发板，无论是使用安卓还是 Ubuntu，序列号都可以激活。 </p>\n                                <p>3. 设备授权的购买是「累计阶梯计费」，例如您购买了9个授权，因为这9个是在0~10的区间，所以付费300元/个*9个；当您继续购买2个时，累计购买量已经达到了11个，则付费1*300+1*250，因为后1个已经在11~100的区间内。</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="pay-line-row">\n                        实付金额：\n                        <span class="sc-price">¥{{priceTuple.price}}</span>\n                    </div>\n                    <div class="pay-line-row">\n                        <a on-click="orderConfirm" href="javascript:void(0)" class="btn-to-pay">去支付</a>\n                    </div>\n                </template>\n                <ui-actionpanel san-ref="confirm" hidden="{{!showOrder}}"></ui-actionpanel>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/order/create",["exports","module","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./create.tpl","ai/config","inf-ria/ui/ViewStep","inf-ui/uiFactory","./OcrTable","lodash","promise","inf-ria/app/brpc","underscore","./FaceTable","./EasydlTable","ai/common/enums","ai/config/package","./subUserDialog/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g){var v=a["default"](t),x=a["default"](i),b=a["default"](r),y=a["default"](o),k=a["default"](l),T=a["default"](u),w=a["default"](d),I=a["default"](c),D=a["default"](p),S=a["default"](f),A=a["default"](g),$=["361","359"];module.exports=v["default"]({template:x["default"],components:{"view-step":s.createUi(b["default"]),"face-table":D["default"],"easydl-table":S["default"],"sub-user-dialog":A["default"]},initData:function(){var e,t=this,a=(e={},e[m.AppType.easydlLite]=m.EasydlModelType,e[m.AppType.easydlPro]=m.EasydlProjectType,e[m.AppType.easydlRetail]=m.EasydlRetailType,e)[this.aiAppType];return{breadItem:[{title:"概览",url:"#/ai/"+this.aiAppType+"/overview/index"},{title:"开通付费"}],ui:{show:{panel:!1,tablePlaceholder:!0},content:{tip:~h.hasNumPackage.indexOf(t.aiAppType)?"开通付费后，默认使用按量后付费形式进行阶梯计费":"免费调用量使用完，按照阶梯累计方式计费",tipContent:function(){var e=t.aiAppType,a={ocr:"文字识别",antiporn:"图像审核"},i={ocr:"调用",antiporn:"审核"};switch(e){case"speech":return"计费详情可参考<a href='"+n.Url[e].price+'\' target="_blank">产品定价文档</a>';case"ocr":return"计费详情可参考<a href='"+n.Url[e].price+"' target=\"_blank\">产品定价文档</a>，\n                        也可使用<a href='"+n.Url.cloudCalculator()+'\' target="_blank">价格计算器</a>计算按量后付费方式调用价格';case"antiporn":return"超出本阶梯部分按照下一阶梯单价计算，"+i[e]+"量越大，单价越低。\n                        您可在<a href='"+n.Url.cloudCalculator()+'\' target="_blank">'+a[e]+"价格计算器</a>中，\n                        预设"+i[e]+"量并查看相应价格。";default:return"超出本阶梯部分按照下一阶梯单价计算，调用量越大，单价越低。"}}(),desc:function(){var e=t.aiAppType,a="antiporn"===e;switch(e){case"ocr":case"speech":case"body":return'注：“w”表示万次，"调用量"指使用按量后付费形式产生的计费调用量';default:return"注：“w”代表万"+(a?"张":"次")+"，“n”代表月"+(a?"审核张数":"调用量")+"。"}}()}},faceFields:[{title:"API",render:function(e){return{content:I["default"].escape(e.name)}}},{title:"免费调用量",render:function(e){return{content:I["default"].escape(e.freeCallDaily)}}},{title:"调用单价",render:function(e){return{content:I["default"].escape(e.unitPrice)}}}],checkedApiList:"",tipTxt:"",btnDisabled:!0,apiListValidateStatus:{isValid:!0,msg:""},typeForEasydl:a}},computed:{faceTableData:function(){var e=this;if(this.data.get("aiAppType")===m.AppType.face){var t=function(){var t=e.data.get("apiPrice")||[],a=e.data.get("checkedApiList")||"",i={unit:[],stage:[]};return t.forEach(function(e){var t=e.filter(function(e){var t="0"===e.parentId||null==e.parentId?e.id:e.parentId;return~a.split(",").indexOf(t+"")});t[0]&&(t[0].price?i.stage.push(t):i.unit.push(t))}),{v:i}}();if("object"==typeof t)return t.v}},easydlTableData:function(){var e=this;if(this.data.get("isEasydl")){var t=function(){var t=e.data.get("apiPrice")||[],a=e.data.get("checkedApiList")||"",i=[];return t.forEach(function(e){var t=e.filter(function(e){return~a.split(",").indexOf(e.id+"")});t.length>0&&i.push(k["default"].sortBy(t,"modelType"))}),{v:i}}();if("object"==typeof t)return t.v}},apiPriceMaps:function(){var e=this;if(this.data.get("aiAppType")!==m.AppType.face){var t=function(){var t={chargeTypes:{},ids:{},chargeTypeList:[]};return(e.data.get("apiPrice")||[]).forEach(function(e,a){t.chargeTypeList.push(a),e.forEach(function(e){var i=e.id;t.chargeTypes[i]=a,t.ids[i]=e})}),{v:t}}();if("object"==typeof t)return t.v}},hasNoPriceApi:function(){return!!~[m.AppType.antiporn,m.AppType.ocr].indexOf(this.data.get("aiAppType"))&&k["default"].intersection(this.data.get("checkedApiList").split(","),$).length}},attached:function(){var e=this;this.createPriceTable(),this.getNotice(),this.getApiPrice().then(function(t){t.forEach(function(e){if(+e.version&&e.addVersionFlag){var t=e.name.split("-");t[0]+="V"+e.version,e.name=t.join("-")}}),e.$set("apiPrice",t)}),T["default"].all([this.getPaidApiList(),this.getCanPaidApiList(),this.getPurchaseStatus()]).then(function(){e.handleData()})},disposed:function(){var t=this.tables;t&&(e["default"](t).forEach(function(e){t[e].dispose(),t[e]=null}),this.tables=null)},getPriceTable:function(){return this.el.querySelector(".price-table")},createPriceTable:function(){var t=this,a=undefined,i=undefined,n=this.$get("aiAppType"),r=n===m.AppType.face,s=this.$get("isEasydl");r||s||(a=this.getPriceTable(),this.tables={},i=function(a,i){t.handleCheckedChange(a,i),t.$set("ui.show.tablePlaceholder",!e["default"](t.tables).length)},this.watch("checkedApiList",function(e){i(e,a)})),s&&this.watch("checkedApiList",function(e){t.$set("ui.show.tablePlaceholder",!e.length)}),this.on("backFromBilling",function(){t.nextTick(function(){r||s?t.ref(n+"Table").getComputedData():(a=t.getPriceTable(),i(t.$get("checkedApiList"),a))})})},handleCheckedChange:function(t,a){var i=this,n=k["default"].remove((t||"").split(","),function(e){return!~$.indexOf(e)}),r=this.$get("apiPriceMaps"),s=r.chargeTypes,o=r.ids,l=r.chargeTypeList,u={};n.forEach(function(e){if(e){var t=s[e];u[t]?u[t].push(o[e]):u[t]=[o[e]]}}),l.forEach(function(e){i.disposeTabel("priceTable"+e)}),e["default"](u).forEach(function(e){var t=u[e],n=t[0].price.map(function(e){return{label:e.range}});i.createTable(t,n,"priceTable"+e,a)})},disposeTabel:function(e){var t=this.tables;t[e]&&(t[e].dispose(),delete t[e])},createTable:function(e,t,a,i){this.tables[a]=new y["default"]({data:{data:e,fields:t}}),this.tables[a].attach(i)},getNotice:function(){var e=this;return n.api.getNotice({type:this.aiAppType}).then(function(t){e.$set("notice",t)})},handleApiList:function(e){var t=this;return e.map(function(e){var a=e.name,i=e.modelType;return+e.version&&e.addVersionFlag&&(a+="V"+e.version),null!=i&&(a="【"+t.$get("typeForEasydl").getTextFromValue(i)+"】"+a),{id:e.id,text:a,value:e.id,serviceType:e.serviceType,modelType:i}})},getPaidApiList:function(){var e=this;return n.api.paidApiList({type:this.aiAppType}).then(function(t){t=e.handleApiList(t),e.$set("paidApiList",t);var a=e.$get("apiId")||"",i=""===a?[]:a.split(",");return 0===k["default"].difference(i,t.map(function(e){return e.id})).length&&e.$redirect("/ai/"+e.aiAppType+"/overview/index"),t})},getPurchaseStatus:function(){var e=this;return n.api.purchaseStatus({type:this.aiAppType}).then(function(t){e.$set("purchaseStatus",t)})},getCanPaidApiList:function(){var e=this;return n.api.canPaidApiList({type:this.aiAppType}).then(function(t){return t=e.handleApiList(t),k["default"].isEmpty(t)&&e.$redirect("/ai/"+e.aiAppType+"/overview/index"),e.$set("canPaidApiList",t),t})},onApiListChange:function(){this.validateApiList()},validateForm:function(){return this.validateApiList()},validateApiList:function(){if(this.$get("firstOnchange"))return this.$get("checkedApiList")?(this.$set("apiListValidateStatus.isValid",!0),this.$set("apiListValidateStatus.msg",""),!0):(this.$set("apiListValidateStatus.isValid",!1),this.$set("apiListValidateStatus.msg","请至少选一个服务"),!1);this.$set("firstOnchange",!0)},orderConfirm:function(){this.$get("subUserInfo.isSubUser")?this.ref("subUserDialog").$$set({open:!0,mainAccountId:this.$get("subUserInfo.mainAccountId")}):this.orderConfirmSubmit()},orderConfirmSubmit:function(){var e=this;if(!this.validateForm())return!1;var t=this.ref("confirm").__getESUI();t.on("action@prevPage",function(){e.data.set("currentStep","1"),e.data.set("ui.show.panel",!1),e.fire("backFromBilling")});var a={config:this.getConfigData(),order:this.getOrderData()};w["default"].invokeService("billing://order_confirm",t,a).then(function(t){e.data.set("currentStep","2"),e.data.set("ui.show.panel",!0)})},getOrderData:function(){var e=this,t=(this.$get("isEasydl")?m.AppType.easydl:this.aiAppType).toUpperCase(),a=this.$get("Url"),i=m.AppType.aliasIndex[this.aiAppType].chargeServiceType||t,n=this.$get("checkedApiList").split(",").map(function(i){var n=k["default"].find(e.$get("canPaidApiList"),{value:i}),r="";n.modelType&&(r=e.$get("typeForEasydl").getTextFromValue(n.modelType));var s={serviceType:n.serviceType,productType:"postpay",count:1,configuration:["-"],chargeType:["cpc"],serviceName:r?"EasyDL定制化API服务（"+r+"）":n.text};if(e.aiAppType===m.AppType.face){var o=k["default"].find(e.$get("apiPrice"),{id:+i}),l=o&&o.unitPrice;k["default"].extend(s,{unitPriceShow:l})}else e.$get("isEasydl")?k["default"].extend(s,{unitPriceShow:r?"见EasyDL"+r+"价格":"见"+n.text+"价格",unitPriceUrl:"//ai.baidu.com/docs#/EasyDL_Price/38b8136e"}):k["default"].extend(s,{unitPriceShow:r?"见EasyDL"+r+"价格":"见"+n.text+"价格",unitPriceUrl:~$.indexOf(i)?a.noPriceApi[e.aiAppType]:"https://cloud.baidu.com/doc/"+t+"/index.html"});return s});return{serviceType:i,productType:"postpay",type:"NEW",confirmV2Url:"/api/ai/"+(this.$get("isEasydl")?m.AppType.easydl:this.$get("aiAppType"))+"/order/v2/confirm",items:n}},getConfigData:function(){var e=this,t=this.$get("checkedApiList");return this.$get("isEasydl")&&function(){t=[];var a=k["default"].flatten(e.$get("apiPrice"));e.$get("checkedApiList").split(",").forEach(function(e){var i=k["default"].find(a,{id:+e}).modelType;t.push(e+":"+i)}),t=t.join(",")}(),{type:this.$get("isEasydl")?m.AppType.easydl:this.$get("aiAppType"),apiId:t}},handleData:function(){this.setCheckApiList(),this.setBtnStatus()},setCheckApiList:function(){var e=this.$get("canPaidApiList"),t=this.$get("apiId"),a=this.$get("serviceType");if("all"===t)this.$set("checkedApiList",e.map(function(e){return e.value}).join(","));else if(a){var i=k["default"].find(e,{serviceType:a.toUpperCase()});i&&this.$set("checkedApiList",i.value)}else this.$set("checkedApiList",k["default"].intersection(t.split(","),e.map(function(e){return e.value})).join(","))},setBtnStatus:function(){var e=!0,t="";this.$get("purchaseStatus").debt?(e=!0,t='您的账户已欠费，请\n                <a data-track-id="order_debt_recharge"\n                    data-track-name="开通付费-欠费-立即充值"\n                    href="'+this.$get("Url").recharge+'">\n                        立即充值\n                </a>'):this.$get("qualification.certified")?(e=!1,t='为确保业务正常进行，请保证您的账户余额充足，可点击进行\n                    <a data-track-id="order_recharge"\n                        data-track-name="开通付费-立即充值"\n                        target="_blank"\n                        href="'+this.$get("Url").recharge+'">\n                            充值\n                    </a>'):(e=!0,t='开通付费需完成实名认证，立即<a target="_blank" href="/qualify/">进行实名认证</a>'),this.$set("btnDisabled",e),this.$set("tipTxt",t)},getApiPrice:function(){return n.api.apiPrice({type:this.aiAppType})}})}),define("ai/page/order/create.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap ai-buy-qps">\n    <app-view>\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content">\n                <h2>开通付费</h2>\n                <view-step currentStep="{{currentStep}}">\n                    <ul>\n                        <li>选择开通接口</li>\n                        <li>确认订单</li>\n                        <li>开通成功</li>\n                    </ul>\n                </view-step>\n                <div id="step1-page" s-if="{{!ui.show.panel}}">\n                    <form class="create-form" data-ui-type="Form" data-ui-id="createForm" data-ui-auto-validate="true">\n                        <div class="ui-form-row" s-if="paidApiList.length !== 0">\n                            <div class="ui-form-key" style="padding-top:3px">\n                                <label>已开通的服务：</label>\n                            </div>\n                            <div class="ui-form-value" style="font-size:0">\n                                <div class="api-item" s-for="api in paidApiList">\n                                    <ui-checkbox title="{{api.text}}"\n                                                    value="{{api.value}}"\n                                                    checked="checked"\n                                                    disabled></ui-checkbox>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="ui-form-row">\n                            <div class="ui-form-key ui-form-required" style="padding-top:3px">\n                                <label>选择服务：</label>\n                            </div>\n                            <div class="ui-form-value">\n                                <ui-boxGroup boxType="checkbox"\n                                                datasource="{{canPaidApiList}}"\n                                                value="{=checkedApiList=}"\n                                                on-change="onApiListChange"></ui-boxGroup>\n                                <div class="error" s-if="!apiListValidateStatus.isValid">\n                                    {{apiListValidateStatus.msg}}\n                                </div>\n                                <p class=\'speech-api-desc\' s-if="aiAppType === \'speech\'">\n                                    支持调用方式: REST API<br />\n                                    支持语音识别模型: 输入法模型\n                                </p>\n                            </div>\n                        </div>\n\n                        <div class="ui-form-row">\n                            <div class="ui-form-value">\n                                <div s-if="aiAppType !== \'face\'">\n                                    <div class="has-no-price-api" s-if="{{hasNoPriceApi}}">\n                                        <template s-if="{{aiAppType === \'antiporn\'}}">\n                                            <p>内容审核平台-图像的具体价格见<a href="{{Url.antiporn.price}}" target="_blank">《内容审核平台计费与价格》</a></p>\n                                            <p>* 计费规则：“内容审核平台-图像”调用的单价依据您在<a href="{{Url.antiporn.platform}}" target="_blank">内容审核平台</a>中的具体配置决定。具体为：基础服务（每次调用必选）+选择的审核模型 </p>\n                                            <p class="examples">【例如：您在图像审核规则中勾选了色情+暴恐+政治敏感，则单次调用的费用=色情单价+暴恐单价+政治敏感单价+基础服务费=0.00025+0.00038+0.00063+0.00025=0.00151元/张图】</p>\n                                            <p>* 审核策略中使用EasyDL的计费：如果您在内容审核平台中调用了EasyDL的模型，相关的计费和账单您都可以在<a href="{{Url.antiporn.easydl}}" target="_blank">EasyDL的控制台</a>中进行查询</p>\n                                            <p>组合服务接口中各模型价目表参见：<a target="_blank" href="{{Url.antiporn.combinPrice}}">组合服务接口价目表</a>（开通付费后，默认使用按量后付费形式进行阶梯计费 ）</p>\n                                        </template>\n                                        <template s-if="{{aiAppType === \'ocr\'}}">\n                                            iOCR财会版具体价格及计费规则见\n                                            <a target="_blank" href="{{Url.noPriceApi.ocr}}">《iOCR财会版产品价格》</a>\n                                        </template>\n                                    </div>\n                                    <div class="price-desc" s-if="{{!hasNoPriceApi}}">\n                                        <template>价目表参考如下（</template>\n                                        {{ui.content.tip}}\n                                        <ui-tip s-if="{{!hasNoPriceApi}}" skin="warning" content="{{ui.content.tipContent}}"></ui-tip>\n                                        ）\n                                    </div>\n                                    <div class="price-table"  s-if="{{!isEasydl}}">\n                                    </div>\n                                    <easydl-table s-else data="{{easydlTableData}}" s-ref="easydlTable"></easydl-table>\n                                    <div class="price-table-placeholder" s-if="{{ui.show.tablePlaceholder && !isEasydl}}">\n                                        <span>API</span>\n                                        <span s-if="aiAppType === \'antiporn\'">月审核量<br> (n)</span>\n                                        <span s-else>月调用量<br> (n)</span>\n                                    </div>\n                                    <div s-if="{{ui.show.tablePlaceholder && isEasydl}}">\n                                        <table class="easydl-charge-table">\n                                            <thead>\n                                                <tr>\n                                                    <th>产品名称</th>\n                                                    <th>模型名称</th>\n                                                </tr>\n                                            </thead>\n                                        </table>\n                                    </div>\n                                    <p class="desc" style="margin-top: 10px">\n                                        {{ui.content.desc}}\n                                    </p>\n                                </div>\n                                <div s-else>\n                                    <face-table data="{{faceTableData}}" width="800" fields="{{faceFields}}" s-ref="faceTable"></face-table>\n                                    <p class="desc" style="margin-top: 10px">\n                                        注：仅有部分调用失败会予以扣费，具体请查看\n                                        <a href="{{Url.face.price}}" target="_blank">\n                                            产品定价文档\n                                        </a>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="ui-form-row">\n                            <div class="ui-form-key"></div>\n                            <div class="ui-form-value">\n                                <xui-button data-track-id="order_confirm" data-track-name="开通付费-确认开通" skin="ok" disabled="{{btnDisabled}}" on-click="orderConfirm">\n                                    确认开通\n                                </xui-button>\n                                <span s-if="tipTxt" style="margin-left:20px">\n                                    <span class="desc">\n                                        温馨提示：{{tipTxt|raw}}\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <ui-actionpanel san-ref="confirm" hidden="{{!ui.show.panel}}"></ui-actionpanel>\n                <sub-user-dialog s-ref="subUserDialog" on-success="orderConfirmSubmit" />\n            </div>\n        </app-content>\n    </app-view>\n</div>\n    '}),define("ai/page/order/EasydlTable",["exports","module","babel-runtime/core-js/object/keys","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/enums"],function(exports,module,e,t,a,i){var n=a["default"](t);module.exports=n["default"]({template:'\n        <div>\n            <table class="easydl-charge-table" s-for="data, index in tableData">\n                <thead>\n                    <tr>\n                        <th>产品名称</th>\n                        <th>模型名称</th>\n                        <th s-for="item in fields[index]">{{ item.label }}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr s-for="row in data">\n                        <td s-for="td in row" rowSpan="{{td.rowSpan ? td.rowSpan : 1}}">\n                            {{td.content|raw}}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    ',initData:function(){var e;return{emptyHtml:"没有数据",data:[],tableData:[],fields:[],typeForEasydl:(e={},e[i.AppType.easydlLite]=i.EasydlModelType,e[i.AppType.easydlPro]=i.EasydlProjectType,e[i.AppType.easydlRetail]=i.EasydlRetailType,e)[this.aiAppType]}},inited:function(){var e=this;this.watch("data",function(){e.getComputedData()})},getComputedData:function(){for(var t=this,a=[],i=this.$get("data"),n=[],r=function(r,s){var o=i[r];n.push(o[0].price.map(function(e){return{label:e.range}})),a[r]=[];for(var l={},u=function(e,t){var i=[],n=o[e];l[n.modelType]?l[n.modelType].rowSpan+=1:l[n.modelType]={index:e,rowSpan:1},i[0]={content:n.name},n.price.forEach(function(e){i.push({content:e.cost})}),a[r][e]=i},d=0,c=o.length;d<c;d++)u(d);e["default"](l).forEach(function(e){var i=l[e];a[r][i.index].unshift({content:"EasyDL定制化API服务（"+t.$get("typeForEasydl").getTextFromValue(e)+")",rowSpan:i.rowSpan})})},s=0,o=i.length;s<o;s++)r(s);this.$set("tableData",a),this.$set("fields",n)}})}),define("ai/page/order/FaceTable",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","lodash"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:'\n        <div>\n            <table s-for="value in tableData" class="face-charge-table" style="width:{{width ? width + \'px\' : \'auto\'}}">\n                <thead>\n                    <tr>\n                        <th s-for="item in fields">{{ item.title }}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr s-for="row in value">\n                        <td s-for="td in row" colSpan="{{td.colSpan ? td.colSpan : 1}}" \n                            rowSpan="{{td.rowSpan ? td.rowSpan : 1}}"\n                        >\n                            {{td.content|raw}}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\n            <table s-for="value, index in stageData.lists" class="face-charge-table">\n                <thead>\n                    <tr>\n                        <th>\n                            月调用量\n                        </th>\n                        <th s-for="field in stageData.fields[index]">{{field.label}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr s-for="row in value">\n                        <td colSpan="{{item.colSpan || 1}}" s-for="item in row">{{item.label}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    ',initData:function(){return{emptyHtml:"没有数据",data:{unit:[],stage:[]},tableData:[],fields:[],stageData:{lists:[],fields:[]}}},inited:function(){var e=this;this.watch("data.unit",function(){e.getComputedData()}),this.watch("fields",function(){e.getComputedData()}),this.watch("data.stage",function(){e.getStageData()})},getComputedData:function(){var e=[],t=this.$get("fields");this.$get("data").unit.map(function(a,i){for(var r=0,s=a.length;r<s;r++){var o=a[r];e[i]||(e[i]=[]),e[i][r]=[];for(var l=0,u=t.length;l<u;l++){var d=t[l].render(o,r);null==d.props&&(d.props={}),0!==d.props.colSpan&&0!==d.props.rowSpan&&e[i][r].push(n["default"].extend({content:d.content},d.props))}}}),this.$set("tableData",e)},getStageData:function(){var e=[],t=[];this.$get("data").stage.map(function(a,i){e[i]=a[0].price.map(function(e){return{label:e.range}}),a.map(function(e){for(var a=[{label:e.name,colSpan:1}],n=0,r=e.price.length;n<r;n++){for(var s=1;n<r-1&&e.price[n].cost===e.price[n+1].cost;)n++,s++;a.push({label:~e.price[n].cost.indexOf("-1")?"联系商务":e.price[n].cost,colSpan:s})}t[i]||(t[i]=[]),t[i].push(a)})}),this.$$set({"stageData.lists":t,"stageData.fields":e})}})}),define("ai/page/order/OcrTable",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n        <div>\n            <table class="ocr-charge-table">\n                <thead>\n                    <tr>\n                        <th>\n                            <span class="left-bottom">API</span>\n                            <span class="right-top" s-if="aiAppType === \'antiporn\'">月审核量<br> (n)</span>\n                            <span class="right-top" s-else>月调用量<br> (n)</span>\n                        </th>\n                        <th s-for="field in fields">{{field.label}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr s-for="row in rows">\n                        <td colSpan="{{item.colSpan || 1}}" s-for="item in row">{{item.label}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    ',computed:{rows:function(){var e=[];return(this.data.get("data")||[]).forEach(function(t){for(var a=[{label:t.name}],i=0,n=t.price.length;i<n;i++){for(var r=1;i<n-1&&t.price[i].cost==t.price[i+1].cost;)i++,r++;a.push({label:t.price[i].cost,colSpan:r})}e.push(a)}),e}},initData:function(){return{fields:[],data:[]}}})}),define("ai/page/order/subUserDialog/index",["exports","module","./subUserDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/order/subUserDialog/subUserDialog",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./subUserDialog.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{open:!1,mainAccountId:""}},agree:function(){this.fire("success"),this.cancel()},cancel:function(){this.$set("open",!1)}})}),define("ai/page/order/subUserDialog/subUserDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=open=}" width="{{800}}" head="{{false}}" s-ref="sub-user-dialog">\n        <div>\n            您在使用子用户身份开通付费，费用将消耗关联主账户（AcccountID:{{mainAccountId}}）的余额，您确认要开通付费吗？ \n        </div>\n        <div slot="foot">\n            <xui-button on-click="agree" skin="primary">确认</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/page/overview/apiListFields",["exports","module","lodash","babel-runtime/helpers/interop-require-default","ai/common/enums","ai/config/charge","ai/common/util","./configGenerate","ai/config/package","ai/config/qpsOverlay"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e);module.exports=function(e){var t=[{title:"API",content:function(e){var t='<span class="api-name">';return e.apiSrc?t+='<a href="'+e.apiSrc+'" target="_blank">'+l["default"].escape(e.name)+"</a>":t+=l["default"].escape(e.name),e.apiTip&&(t+='<span\n                        data-ui-type="Tip"\n                        data-ui-arrow="true"\n                        data-ui-content=\''+e.apiTip+"'></span>"),t+"</span>"}}];return e===a.AppType.easydl&&t.push({title:"模型ID",content:function(e){return e.modelId}},{title:"模型类型",content:function(e){return a.EasydlModelType.getTextFromValue(e.modelType)}},{title:"模型名称",content:function(e){return l["default"].escape(e.modelName)}},{title:"模型版本",content:function(e){return"V"+e.modelVersion}}),e!==a.AppType.unit&&t.push({title:"状态",content:function(t){return e!==a.AppType.easydl||t.authStatus?n.getApiStatus(t):'<span class="status warning">暂未配置权限</span>\n                            <span\n                                data-ui-type="Tip"\n                                data-ui-arrow="true"\n                                data-ui-content="请在<a href=\'#/ai/easydl/service/list\'>云服务管理</a>中配置权限"></span>'}}),t.push({title:e===a.AppType.antiporn?"审核量限制":"调用量限制",content:function(e){return l["default"].escape(e.limit)}},{title:"QPS限制",content:function(e){return n.handleQpsTips(e.maxQps,e.qpsTip)}}),"roboticvision"===e&&t.push({title:"开通按量后付费",content:function(e){return'<a href="#/ai/'+e.type+'/overview/index">查看详情</a>'}}),~i.chargeTypes.indexOf(e)&&t.push(n.getChargeField(e)),~s.hasNumPackage.indexOf(e)&&t.push({title:"购买次数包",tip:"购买次数包后，计费调用优先抵扣次数包额度，额度耗尽自动切换为按量后付费形式，具体计费标准请查看\n                <a href="+s.numPackagePrice[e]+" target='_blank'>产品定价文档</a>",content:function(t){return r.numPackage(t,e)}}),~o.hasQPSOverlay.indexOf(e)&&t.push({title:"购买QPS叠加包",tip:"已开通付费（或购买次数包）后，若您有临时性的QPS高并发要求，可选择在某个时间段内叠加购买QPS，未开通付费的用户无法购买QPS叠加包",content:function(t){return r.qpsGenerate(t,e)}}),t}}),define("ai/page/overview/BiccApiListTable/BiccApiListTable",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","lodash","bat-ria/tpl!./BiccApiListTable.tpl","san-xui","ai/common/enums","moment","ai/common/util","ai/config/url"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=a["default"](t),c=a["default"](i),p=a["default"](n),f=a["default"](o);module.exports=d["default"]({template:p["default"],components:{"xui-table":r.Table},initData:function(){return{data:[]}},computed:{tableList:function(){var e=this;return this.data.get("data").map(function(t){return"realtime"===t.key?{schema:[{name:"name",label:"API"},{name:"status",label:"状态"},{name:"concurrency",label:"并发通路限制"},{name:"payType",label:"计费方式"}].concat(t.expireTime?[{name:"expireTime",label:"购买到期时间"}]:[],[{name:"operation",label:"操作"}],t.isSmartAsrApi?[{name:"smartAsrEntrance",label:"模型训练优化"}]:[]),cellRenderer:function(t,a,i,n){if("status"===a)return l.getApiStatus(t);if("operation"===a){if(t.order.status===s.OrderStatus.unpaid)return'<a href="/billing/#/order/list">订单待支付</a>';switch(t.chargeStatus){case s.ChargeStatus.paid:return t.payType===s.BiccPayType.PREPAY?'<a data-command="realtime_renew" href="javascript:void(0)">续费</a><a data-command="realtime_upgrade" href="javascript:void(0)">升级</a>':t.payType===s.BiccPayType.POSTPAY?'<a data-command href="'+e.data.get("Url").ticket+'" target="_blank">提升并发</a><a data-command="realtime_stop" href="javascript:void(0)">停止付费</a>':"";case s.ChargeStatus.free:case s.ChargeStatus.configFailed:return'<a data-command="realtime_new"\n                                            data-track-id="overview_buy_service"\n                                            data-track-name="概览-立即购买"\n                                            href="javascript:void(0)">\n                                                立即购买\n                                        </a>';case s.ChargeStatus.configing:return"等待配置"}}else{if("concurrency"===a)return t.isExhausted?'<span style="color:#999">'+t.concurrency+"</span>":t.concurrency;if("payType"===a)return null==t[a]?"--":s.BiccPayType.getTextFromValue(t[a]);if("expireTime"===a)return f["default"](t[a]).format("YYYY.MM.DD HH:mm:ss");if("smartAsrEntrance"===a)return'<a href="'+u.smartAsr+'" target="_blank">立即训练</a>'}return t[a]},datasource:[t]}:"audiofile"===t.key?{key:"audiofile",schema:[{name:"name",label:"API"},{name:"status",label:"状态"},{name:"arDuration",label:"转写时长限制"},{name:"returnTime",label:"返回时间"}].concat(t.expireTime?[{name:"expireTime",label:"购买到期时间"}]:[],[{name:"operation",label:"操作"}]),cellRenderer:function(e,t,a,i){if("status"===t)return l.getApiStatus(e);if("operation"===t){if(e.order.status===s.OrderStatus.unpaid)return'<a href="/billing/#/order/list">订单待支付</a>';switch(e.chargeStatus){case s.ChargeStatus.paid:return'<a data-command="audiofile_renew" href="javascript:void(0)">续费</a>\n                                            <a data-command="audiofile_upgrade" href="javascript:void(0)">升级</a>';case s.ChargeStatus.free:return'<a data-command="audiofile_new" href="javascript:void(0)">立即购买</a>';case s.ChargeStatus.configing:return"等待配置";case s.ChargeStatus.configFailed:return e.order.type===s.OrderType.resize?'<a data-command="audiofile_renew" href="javascript:void(0)">续费</a>\n                                                <a data-command="audiofile_upgrade" href="javascript:void(0)">升级</a>':'<a data-command="audiofile_new" href="javascript:void(0)">立即购买</a>'}}else{if("arDuration"===t)return e.isExhausted?'<span style="color:#999">'+e.arDuration+"</span>":e.arDuration;if("returnTime"===t)return e.isExhausted?'<span style="color:#999">'+e.returnTime+"</span>":e.returnTime;if("expireTime"===t)return f["default"](e[t]).format("YYYY.MM.DD HH:mm:ss")}return e[t]},datasource:[t]}:"itma"===t.key?{key:"itma",schema:[{name:"name",label:"API"},{name:"status",label:"状态"},{name:"concurrency",label:"并发通数"},{name:"callCnt",label:"调用通数"},{name:"callDuration",label:"调用通时"}],cellRenderer:function(e,t,a,i){return"status"===t?l.getApiStatus(e):e[t]},datasource:[t]}:{}})}},realtimeNew:function(e){var t=e.id;this.$aiRedirect("realtime/buy",{apiId:t,payType:s.BiccPayType.POSTPAY})},realtimeRenew:function(e){var t=e.id;this.$aiRedirect("realtime/renew",{apiId:t})},realtimeUpgrade:function(e){var t=e.id;this.$aiRedirect("realtime/upgrade",{apiId:t})},realtimeStop:function(t){var a=t.id;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.$confirm({title:"删除提示",content:"确认要停止付费模式，并切换至免费试用状态（并发通路限制为2）吗？"}));case 2:return t.next=4,e["default"].awrap(this.ajax.chargeStop({apiId:a,type:this.aiAppType}));case 4:this.fire("update");case 5:case"end":return t.stop()}},null,this)},audiofileNew:function(e){var t=e.id;this.$aiRedirect("audiofile/buy",{apiId:t})},audiofileRenew:function(e){var t=e.id;this.$aiRedirect("audiofile/renew",{apiId:t})},audiofileUpgrade:function(e){var t=e.id;this.$aiRedirect("audiofile/upgrade",{apiId:t})},onCommand:function(e){var t=e.type,a=e.payload;"function"==typeof this[c["default"].camelCase(t)]&&this[c["default"].camelCase(t)](a)}})}),define("ai/page/overview/BiccApiListTable/BiccApiListTable.tpl",[],function(){return'<div class="bicc-api-list-table">\n    <xui-table\n        s-for="item in tableList"\n        datasource="{{item.datasource}}"\n        schema="{{item.schema}}"\n        cell-builder="{{item.cellRenderer}}"\n        loading="{{loading}}"\n        on-command="onCommand($event)"\n    >\n    </xui-table>\n</div>\n'}),define("ai/page/overview/BiccApiListTable/index",["exports","module","./BiccApiListTable","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/overview/BiccUsageTable/BiccUsageTable",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","lodash","bat-ria/tpl!./BiccUsageTable.tpl","san-xui"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=[{key:"realtime",schema:[{name:"api",label:"API"},{name:"maxConcurrency",label:"最大并发通路数"},{name:"callCnt",label:"通话数"},{name:"callDuration",label:"通话时长（小时）"},{name:"operation",label:"详细统计"}]},{key:"audiofile",schema:[{name:"api",label:"API"},{name:"arDuration",label:"识别总时长（小时）"},{name:"arFileNums",label:"识别文件总数"},{name:"operation",label:"详细统计"}]},{key:"itma",schema:[{name:"api",label:"API"},{name:"maxConcurrency",label:"最高并发数"},{name:"callCnt",label:"调用通数"},{name:"callDuration",label:"调用通时（分钟）"},{name:"operation",label:"详细统计"}]}];module.exports=r["default"]({template:o["default"],components:{"xui-table":n.Table},computed:{tableList:function(){return this.data.get("data").map(function(e){return{schema:s["default"].find(l,"key",e.key).schema,datasource:[e]}})}}})}),define("ai/page/overview/BiccUsageTable/BiccUsageTable.tpl",[],function(){return'<div class="bicc-usage-table">\n    <xui-table\n        s-for="item in tableList"\n        datasource="{{item.datasource}}"\n        schema="{{item.schema}}"\n        loading="{{loading}}"\n    >\n        <div slot="c-operation">\n            <a href="#/ai/{{aiAppType}}/report/index~apiId={{row.id}}">查看</a>\n        </div>\n    </xui-table>\n</div>\n'}),define("ai/page/overview/BiccUsageTable/index",["exports","module","./BiccUsageTable","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/overview/configGenerate",["exports","babel-runtime/helpers/extends","ai/common/enums"],function(exports,e,t){exports.__esModule=!0;exports.numPackage=function(a,i){var n,r=a.packagePurchaseApplyStatus,s=a.id,o=a.packageStatus,l=a.tip,u=a.name,d=a.purchasedDomainId,c=encodeURIComponent(JSON.stringify(e["default"]({canBuy:!0},a)));if(!o)return t.NumPackageType.getTextFromValue(t.NumPackageType.NOT_OPEN);var p=t.NumPackageType.getTextFromValue(o);if(i===t.AppType.speech&&t.NumPackageType.BUY===o)return'<a\n            href="javascript:void(0)"\n            data-command="speechBonusNeedRecycle"\n             data-command-args="'+s+","+a.bonusNeedRecycle+",num,"+o+'">'+p+"\n        </a>";var f=function(e,t){return"<a href='#/ai/"+i+"/buyPackage/index~apiId="+s+"&status="+o+(t?"&purchasedDomainId="+t:"")+"'>\n            "+e+"\n        </a>"},m=l?'<span\n            data-ui-type="Tip"\n            data-ui-arrow="true"\n            data-ui-content=\''+l+"'\n            >\n        </span>":"";if(o===t.NumPackageType.BOUGHT&&null!=r&&r!==t.PackagePurchaseApplyStatus.SUCCESS){if(r===t.PackagePurchaseApplyStatus.APPLYING)return'\n                申请审核中\n                <span\n                    data-ui-type="Tip"\n                    data-ui-arrow="true"\n                    data-ui-content="温馨提示：您已提交更高调用次数包申请，我们会在1-2工作日内审核完毕"\n                    >\n                </span>\n            ';var h=r===t.PackagePurchaseApplyStatus.FAILED?"温馨提示：您提交的更多次数包申请未被审核通过，感谢您的支持":"温馨提示：您购买的单个接口次数包已达账户总限制，若需要更多调用次数，请申请继续购买";return'<a href="javascript:void(0)"\n            data-command="pacakgeApply"\n            data-command-args="'+s+","+u+'"\n            style="margin-right: 0"\n            >\n                申请继续购买</a>\n            <span\n                data-ui-type="Tip"\n                data-ui-arrow="true"\n                data-ui-content="'+h+'"\n                >\n            </span> \n            | <a href="javascript:void(0)"\n                data-command="pacakgeDetail"\n                data-command-args="'+encodeURIComponent(JSON.stringify(e["default"]({canBuy:!1},a)))+'">\n                详情\n            </a>'+m+"\n            "}return(n={},n[t.NumPackageType.NOT_OPEN]=p,n[t.NumPackageType.BUY]=""+f(p),n[t.NumPackageType.CAN_NOT_BUY]=f("购买",d)+'| \n        <a href="javascript:void(0)" data-command="pacakgeDetail" data-command-args="'+c+'">详情</a>'+m,n[t.NumPackageType.BOUGHT]=f(p)+' | \n        <a href="javascript:void(0)" data-command="pacakgeDetail" data-command-args="'+c+'">详情</a>'+m,n)[o]};exports.qpsGenerate=function(e,a){if(e.canBuyQpsPackage===t.CanBuyQps.UNABLE)return"暂不支持购买";var i="";return e.canBuyQpsPackage===t.CanBuyQps.DIRECT?i+='<a href="#/ai/'+a+"/buyQps/index~apiId="+e.id+'">购买</a>':i+="购买",i+='  |\n        <a href="javascript:void(0);"\n        style="white-space: nowrap"\n        data-command="qpsDetail"\n        data-command-args="'+e.id+","+e.name+'">配额详情</a>'}}),define("ai/page/overview/faceApiFields",["exports","module","./faceHelper","ai/common/enums","./configGenerate","ai/config/url","babel-runtime/helpers/interop-require-default","ai/common/util"],function(exports,module,e,t,a,i,n,r){var s=n["default"](i);module.exports=function(i,n){return function(o){var l=e.getStatus(o);return[{title:o.name+" "+l,width:245,stable:!0,content:function(e,t){return 0===t?"API":e.name+(e.addVersionFlag&&+e.version?"V"+e.version:"")}},{title:"",content:function(e,t){return t?r.getApiStatus(e):"状态"}},{title:"",content:function(e,t){return t?e.limit:"调用量限制"}},{title:"",content:function(e,t){return t?i&&n?r.handleQpsTips(e.maxQps,e.qpsTip):e.maxQps:"QPS限制"}},{title:"",content:function(t,a){return e.getOperation(t,a)}}].concat(i?[{title:"",content:function(e,i){return i?a.numPackage(e,t.AppType.face):'购买次数包<span\n                        data-ui-type="Tip"\n                        data-ui-arrow="true"\n                        data-ui-content=\'购买次数包后，计费调用优先抵扣次数包额度，额度耗尽自动切换为按量后付费形式，具体计费标准请查看\n                        <a href="'+s["default"][t.AppType.face].price+'" target="_blank">产品定价文档</a>\'\n                    >\n                    </span>'}}].concat(n?[{title:"",content:function(e,i){return i?a.qpsGenerate(e,t.AppType.face):"QPS购买"}}]:[]):[{title:"",content:function(t,a){return a?e.getQps(t,a):"QPS购买"}}])}}}),define("ai/page/overview/faceHelper",["exports","lodash","babel-runtime/helpers/interop-require-default","ai/common/enums","ai/config/url"],function(exports,e,t,a,i){exports.__esModule=!0;var n=t["default"](e),r=t["default"](i);exports.getStatus=function(e){var t="";if(!e.canOpen)return t;switch(e.chargeStatus){case a.ChargeStatus.unpaid:e.chargeType===a.ChargeType.hasFree?t="（免费使用）":e.chargeType===a.ChargeType.noFree&&(t="（待开通付费）");break;case a.ChargeStatus.paid:t="（付费使用中）";break;case a.ChargeStatus.paying:t="（付费开通中）";break;case a.ChargeStatus.arrear:t='<span style="color:red">（已欠费）</span>'}return t};exports.getOperation=function(e,t){if(!t)return'开通按量后付费<span\n            data-ui-type="Tip"\n            data-ui-arrow="true"\n            data-ui-content=\'开通付费后，默认采用按量后付费形式，总调用量不受限制，具体计费标准请查看\n            <a href="'+r["default"][a.AppType.face].price+'" target="_blank">产品定价文档</a>\'\n        >\n        </span>';if(!e.canOpen)return"暂不支持按调用量计费";var i=undefined,s=e.chargeStatus,o=e.chargeTip;switch(s){case a.ChargeStatus.unpaid:i='<a href="#/ai/face/order/create~apiId='+e.id+'">付费开通</a>';break;case a.ChargeStatus.paid:i='<a href="javascript:void(0);"\n                style="white-space: nowrap"\n                data-command="orderDestroy"\n                data-command-args="'+e.id+'">\n                终止付费\n            </a>';break;case a.ChargeStatus.paying:i="等待开通";break;case a.ChargeStatus.arrear:i='<a href="/finance/#/finance/account/recharge">充值</a>';break;default:i="--"}return o&&(i+='\n            <span\n                data-ui-type="Tip"\n                data-ui-arrow="true"\n                data-ui-content=\''+n["default"].escape(o)+"'\n            >\n            </span>"),i};exports.getQps=function(e,t){var i=undefined;if(e.canBuyQps===a.CanBuyQps.UNABLE?i="不支持购买":e.canBuyQps===a.CanBuyQps.INDIRECT?i=e.chargeStatus===a.ChargeStatus.unpaid||e.chargeStatus===a.ChargeStatus.paying?"开通付费后可购买":e.chargeStatus===a.ChargeStatus.arrear?'<span style="color:#999">'+(e.hasBoughtQps?"继续购买":"立即购买")+"</span>":'<a\n                data-track-id="'+(e.hasBoughtQps?"":"overview_face_indirect_buy_qps")+'"\n                data-track-name="'+(e.hasBoughtQps?"":"概览-人脸-间接-立即购买")+'"\n                href="#/ai/face/buyQps/index~apiId='+e.id+'">\n                '+(e.hasBoughtQps?"继续购买":"立即购买")+"\n            </a>":e.canBuyQps===a.CanBuyQps.DIRECT&&(i='<a data-track-id="'+(e.hasBoughtQps?"":"overview_face_direct_buy_qps")+'"\n            data-track-name="'+(e.hasBoughtQps?"":"概览-人脸-直接-立即购买")+'"\n            href="#/ai/face/buyQps/index~apiId='+e.id+'">\n                '+(e.hasBoughtQps?"继续购买":"立即购买")+"\n            </a>"),e.qpsTip){var r=e.qpsTip;n["default"].isArray(e.qpsTip)&&(r=e.qpsTip.map(function(e){return"<div>"+e+"</div>"}).join("")),i+='<span\n                data-ui-type="Tip"\n                data-ui-skin="warning"\n                data-ui-arrow="true"\n                data-ui-position-opt=\'{"center":"top"}\'\n                data-ui-content=\''+n["default"].escape(r)+"'></span>"}return i+='  |\n        <a href="javascript:;"\n        style="white-space: nowrap"\n        data-command="qpsDetail"\n        data-command-args="'+e.id+","+e.name+'">配额详情</a>'}}),define("ai/page/overview/ImportantLabel/ImportantLabel",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","ai/common/enums","bat-ria/tpl!./index.tpl","ai/config/package"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](n);module.exports=s["default"]({template:o["default"],initData:function(){return{packageTip:[],packageTipVisible:!1,packageDialogVisible:!1,packageTipInfo:"",faceV3TipVisible:this.aiAppType===i.AppType.face&&!window.localStorage.getItem("AI_FACE_V3_TIP"),faceV3DialogVisible:!1}},inited:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!~r.hasNumPackage.indexOf(this.aiAppType)){n.next=11;break}return n.next=3,e["default"].awrap(this.ajax.numPackageTips({type:this.$get("aiAppType")}));case 3:if(t=n.sent,a=t.tip,i=a===undefined?[]:a,this.$set("packageTip",i),i.length){n.next=9;break}return n.abrupt("return");case 9:this.$set("packageTipVisible",!0),this.$set("packageTipInfo",i.join("。"));case 11:case"end":return n.stop()}},null,this)},showDialog:function(e){this.$set(e,!0)},hideDialog:function(e){this.$set(e,!1)},handleDialog:function(e){var t=this.$get(e);this.$set(e,!t)},hideFaceV3Tip:function(){window.localStorage.setItem("AI_FACE_V3_TIP","1"),this.$set("faceV3TipVisible",!1)},hidePackageTip:function(){this.$set("packageTipVisible",!1)}})}),define("ai/page/overview/ImportantLabel/index",["exports","module","./ImportantLabel","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/overview/ImportantLabel/index.tpl",[],function(){return'<div>\n    <xui-toastlabel class="face-v3-tip" level="error" s-if="{{faceV3TipVisible}}">\n        <div class="face-v3-tip-content">重要通知：即日起，人脸识别的API接口全面升级到V3版本，并开放测试。V3版本增加了人脸库管理功能、支持图片URL上传、并进行很多易用性的提升，欢迎大家使用。V2版本的接口将持续提供服务，无需担心服务稳定性和付费额度清零的问题。</div>\n        <div class="face-v3-tip-buttons">\n            <a href="javascript: void(0)" on-click="handleDialog(\'faceV3DialogVisible\')">查看详情</a>\n            <a href="javascript: void(0)" on-click="hideFaceV3Tip">不再提醒</a>\n        </div>\n    </xui-toastlabel>\n    <xui-dialog open="{=faceV3DialogVisible=}" mask="{{true}}" title="重要通知" class="face-v3-dialog">\n        <div class="face-v3-dialog-important">即日起，人脸识别的API接口全面升级到V3版本，并开放测试。V3版本增加了人脸库管理功能、支持图片URL上传、并进行很多易用性的提升，欢迎大家使用。V2版本的接口将持续提供服务，无需担心服务稳定性和付费额度清零的问题。</div>\n        <div>如果不知道您当前使用的接口版本，可以查看接口地址中的版本标识，例如：rest/2.0/face/<span class="face-v3-dialog-important">v2</span>/identify是v2版本接口。</div>\n        <div>\n            <p>升级点汇总：</p>\n            <ol>\n                <li>增加创建用户组、删除用户组、更新人脸图片、删除人脸图片接口，提高对用户人脸库管理的易用性和可操控性；</li>\n                <li>增加图片上传方式，以图片的URL地址作为输入参数，降低图片传输的带宽成本;</li>\n                <li>在人脸注册、人脸比对、人脸更新接口中增加活体检测、图片质量控制参数，无需重复调用活体检测、图片质量检测功能，降低接口调用成本；</li>\n                <li>增加face_token概念，可以对用户的某一张人脸图片进行更新、删除操作，提高接口灵活性；</li>\n                <li>更新公安验证接口数据源，提高数据覆盖率；</li>\n            </ol>\n        </div>\n        <div><a href="https://ai.baidu.com/docs#/Face-Detect-V3/top" target="_blank">查看V3版本接口文档</a></div>\n        <div slot="foot">\n            <xui-button on-click="handleDialog(\'faceV3DialogVisible\')" skin="primary">知道了</xui-button>\n        </div>\n    </xui-dialog>\n    \n    <xui-toastlabel class="face-v3-tip" level="error" s-if="{{packageTipVisible}}">\n        <div class="face-v3-tip-content">{{packageTipInfo | raw}}</div>\n        <div class="face-v3-tip-buttons">\n            <a href="javascript: void(0)" on-click="handleDialog(\'packageDialogVisible\')">查看详情</a>\n            <a href="javascript: void(0)" on-click="hidePackageTip">不再提醒</a>\n        </div>\n    </xui-toastlabel>\n    <xui-dialog open="{=packageDialogVisible=}" mask="{{true}}" title="重要通知" class="face-v3-dialog">\n        <p class="package-tip-item" s-for=\'item in packageTip\'>{{item | raw}}</p>\n        <div slot="foot">\n            <xui-button on-click="handleDialog(\'packageDialogVisible\')" skin="primary">知道了</xui-button>\n        </div>\n    </xui-dialog>\n</div>'}),define("ai/page/overview/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/config","moment","./usageFields","./apiListFields","inf-ria/ui/ToastLabel","inf-ui/uiFactory","./qualifiLabel","./ImportantLabel/index","./faceApiFields","./speechApiFields","./BiccUsageTable/index","./BiccApiListTable/index","./SpeechQpsQuotaTable/index","lodash","san-xui","./Modals/index","ai/common/enums","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f,m,h,g,v,x,b,y,k,T){var w=i["default"](a),I=i["default"](n),D=i["default"](s),S=i["default"](o),A=i["default"](l),E=i["default"](u),L=i["default"](c),C=i["default"](p),P=i["default"](f),N=i["default"](m),U=i["default"](h),_=i["default"](g),M=i["default"](v),F=i["default"](x),q=[k.AppType.speech,k.AppType.face];module.exports=w["default"]({template:I["default"],filters:{handleApiFild:function(e){var t,a=this.data.get("aiAppType");if(a===k.AppType.speech){var i=e.children.some(function(e){return e.canBuyQps&&e.canBuyQps!==k.CanBuyQps.UNABLE}),n=e.children.some(function(e){return e.isSmartAsrApi}),r=e.children.some(function(e){return e.packageStatus}),s=e.children.some(function(e){return e.canBuyQpsPackage&&e.canBuyQpsPackage!==k.CanBuyQps.UNABLE});return N["default"](i,n,r,s)(e)}if(a===k.AppType.face){r=e.children.some(function(e){return e.packageStatus});var o=e.children.some(function(e){return e.canBuyQpsPackage===k.CanBuyQps.DIRECT||e.canBuyQpsPackage===k.CanBuyQps.INDIRECT});return P["default"](r,o)(e)}return(t={},t[k.AppType.face]=P["default"],t)[a](e)}},components:{"toast-label":d.createUi(E["default"]),"bicc-usage-table":U["default"],"bicc-api-list-table":_["default"],"xui-radioselect":b.RadioSelect,"speech-qps-quota-table":M["default"],"qualifi-label":L["default"],"number-package":y.numberPackage,"important-label":C["default"],"package-apply":y.packageApply},initData:function(){var t=this.aiAppType,a=D["default"]().format("YYYY-MM-DD"),i=a,n='<div class="ai-no-data">'+(t===k.AppType.kg?"敬请期待":"暂无数据")+"</div>";return{breadItem:[{title:"概览"}],timeRange:a+","+i,usageTable:e["default"]({loading:!1,data:[]},t===k.AppType.bicc?{}:S["default"](t)),api:{fields:A["default"](t),tableData:[],noDataHtml:n},biccApiListTable:[],unitVersions:{value:2,datasource:[{text:"UNIT 2.0服务列表",value:2},{text:"UNIT 1.0服务列表",value:1}]},isOverdue:!1,speechQpsQuotaDialogVisible:!1,numPackage:{total:0,currentId:0,datasource:[],pageNo:1,pageSize:10},hasAppTypeCategory:!1}},computed:{qualificationStatus:function(){var e=this.data.get("qualification")||{},t=e.status;return e.certified?e.type===k.AuthType.ENTERPRISE&&t===k.AuthStatus.CERTIFIED?3:2:1},hasCategory:function(){return!!~q.indexOf(this.data.get("aiAppType"))},cateGories:function(){var e={value:0,datasource:[]};return this.data.get("hasCategory")&&(e.datasource=this.data.get("api.tableData").map(function(t,a){t.labelId=a;var i=F["default"].escape(t.label);return~i.indexOf("V2")&&(e.value=a),{text:i,value:a}})),e},cateGoriesApiTableData:function(){return function(e,t){return(F["default"].filter(e,function(e){return e.labelId===t})[0]||{}).children||[]}(this.data.get("api.tableData"),this.data.get("cateGories.value"))},unitApiTableData:function(){var e=this.data.get("api.tableData"),t=this.data.get("aiAppType"),a=this.data.get("unitVersions.value");return t===k.AppType.unit&&this.data.get("hasUnitVersion")?F["default"].filter(e,function(e){return e.edition===a}):e},hasUnitVersion:function(){return this.data.get("aiAppType")===k.AppType.unit&&F["default"].some(this.data.get("api.tableData"),function(e){return null!=e.edition})},topTipText:function(){var e=this.data.get("cheatingUser"),t=this.data.get("isOverdue");return e?'<i tip="" data-track-id="" data-track-name="" class="iconfont icon-warning-new"></i>\n                    <span>抱歉，您的账户存在异常，需要实名认证才可创建应用，</span>\n                    <a target="_blank" href="/qualify/">立即认证</a>':t?'您已欠费，为了不影响您正常使用，请尽快充值 <a href="/finance/#/finance/account/recharge">立即充值</a>':void 0}},inited:function(){var e=this;this.getUsage(),this.getAppCount(),this.getApiList(),this.watch("api.tableData",function(t){e.$set("hasAppTypeCategory",t.length>1)}),this.getChargeStatus()},sendUsageAjax:function(){return r.api.usage({type:this.$get("aiAppType"),timeRange:this.$get("timeRange").split(",").map(function(e){return D["default"](e).valueOf()}).join(",")})},getUsage:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.$set("usageTable.loading",!0),a.next=3,t["default"].awrap(this.sendUsageAjax());case 3:e=a.sent,this.$$set({"usageTable.loading":!1,"usageTable.data":e});case 5:case"end":return a.stop()}},null,this)},sendUsageAjaxSucc:function(e){if("bicc"===this.aiAppType)this.$set("biccUsage.loading",!1),this.$set("biccUsage.data",e);else{this.$set("usage.tableData",e);this.ref("usageTable").__getESUI().removeState("loading")}},getAppCount:function(){var e=this;r.api.appInfo({type:this.$get("aiAppType")}).then(function(t){e.$set("appCount",t.count)})},getApiList:function(){var e,a;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return e=this.$get("aiAppType"),i.next=3,t["default"].awrap(r.api.overviewApiList({type:e}));case 3:a=i.sent,~[k.AppType.face,k.AppType.speech].indexOf(e)?function(){var t=$("body").css("overflow");$("body").css("overflow","hidden"),n.$set("api.tableData",n["format"+e.replace(/^./,function(e){return e.toUpperCase()})+"ApiData"](a)),setTimeout(function(){$("body").css("overflow",t)},0)}():e===k.AppType.roboticvision?this.$set("api.tableData",this.formatRobotApiData(a)):e===k.AppType.bicc?this.$set("biccApiListTable",a):this.$set("api.tableData",a);case 5:case"end":return i.stop()}},null,this)},getChargeStatus:function(){var e,a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(r.api.chargeStatus({type:this.$get("aiAppType")}));case 2:e=i.sent,a=e.status,this.$set("isOverdue",a);case 5:case"end":return i.stop()}},null,this)},noMoreNotice:function(){var e=this;r.api.tipClose({type:this.$get("aiAppType")},{"X-silence":!0}).then(function(){e.$set("showTip",!1)})},gotoApp:function(e){this.$redirect("#/ai/"+this.$get("aiAppType")+"/app/"+e)},formatSpeechApiData:function(e){return T.formatGerData(e)},formatFaceApiData:function(e){return e.forEach(function(e){e.children.forEach(function(e){e.children?(e.children=e.children.map(function(t){return F["default"].extend({},e,t)}),e.children[0]&&e.children[0].canBuyQps&&(e.canBuyQps=!0)):e.children=[F["default"].extend({},e)],e.children.unshift({})})}),e},formatRobotApiData:function(e){return F["default"].values(F["default"].groupBy(e,"type"))},onCommand:function(e){var t=e.name,a=e.args;"function"==typeof this[t]&&this[t](a)},disposed:function(){this.disposeQpsDetailDialog(),this.disposeDestroyDialog()},disposeQpsDetailDialog:function(){this.qpsDetailDialog&&(this.qpsDetailDialog.dispose(),this.qpsDetailDialog=null)},disposeDestroyDialog:function(){this.destroyDialog&&(this.destroyDialog.dispose(),this.destroyDialog=null)},qpsDetail:function(e){this.disposeQpsDetailDialog();var t=e.split(","),a=t[0],i=t[1];this.qpsDetailDialog=new y.QpsDetail({data:{open:!0,name:i,apiId:a}}),this.qpsDetailDialog.attach(document.body)},orderDestroy:function(e){var a;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return this.disposeDestroyDialog(),i.next=3,t["default"].awrap(T.cacheValue(this.$get("aiAppType")+"_"+e,function(){return n.ajax.runningResourceType({resourceType:[k.ResourceType["package"],k.ResourceType.qpsPackage],apiId:e})}));case 3:a=i.sent,this.destroyDialog=new y.Destroy({data:{open:!0,resourceTypes:a,apiId:e}}),this.destroyDialog.on("destroySuccess",function(){n.getApiList()}),this.destroyDialog.attach(document.body);case 7:case"end":return i.stop()}},null,this)},showSpeechQpsQuota:function(){this.$set("speechQpsQuotaDialogVisible",!0)},pacakgeDetail:function(e){var a;return t["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:a=JSON.parse(decodeURIComponent(e)),this.ref("number-package").$$set({apiId:a.id,canBuy:a.canBuy,packageStatus:a.packageStatus,purchasedDomainId:a.purchasedDomainId,open:!0});case 2:case"end":return t.stop()}},null,this)},pacakgeApply:function(e){var t=e.split(",");this.ref("packageApply").$$set({open:!0,apiName:t[1],consoleApiId:t[0]})},packageApplySuccess:function(){this.getApiList()},speechBonusNeedRecycle:function(e){var a,i,n,r,s,o;return t["default"].async(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=e.split(",")[0],i=+e.split(",")[1],n=e.split(",")[2],r={create:"<p>尊敬的用户，您好：</p>开通付费可享受更精准的识别效果和更稳定的线上服务，可自助进行QPS扩容，灵活应对业务高峰。原有不限量调用方式将被替换，请您确认是否继续。",num:"<p>尊敬的用户，您好：</p>购买次数包可享受更精准的识别效果和更稳定的线上服务，可自助进行QPS扩容，灵活应对业务高峰。原有不限量调用方式将被替换，请您确认是否继续。"}[n],s={url:"",params:{}},"create"===n?(s.url="order/create",s.params={apiId:a}):(o=e.split(",")[3],s.url="buyPackage/index",s.params={apiId:a,status:o}),!i){l.next=9;break}return l.next=9,t["default"].awrap(this.$confirm({title:"提示",width:600,content:r}));case 9:this.$aiRedirect(s.url,s.params);case 10:case"end":return l.stop()}},null,this)}})}),define("ai/page/overview/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content overview-content">\n                <h2>概览</h2>\n                <important-label />\n                <div class="section-wrap">\n                    <div class="section app-section">\n                        <div class="section-header">应用</div>\n                        <div class="section-body">\n                            <div class="section-inner">\n                                <div class="app-center">\n                                    <span>已建应用: </span>\n                                    <span class="app-count">{{appCount}}</span>\n                                    <span>个</span>\n                                </div>\n                                <div class="button-wrap">\n                                    <xui-button skin="ok" width="95" on-click="gotoApp(\'list\')">\n                                        管理应用\n                                    </xui-button>\n                                    <xui-button skin="ok" width="95" on-click="gotoApp(\'create\')" disabled="{{disableCreateButton}}" data-track-id="overview_create_app" data-track-name="概览-创建应用">\n                                        创建应用\n                                    </xui-button>\n                                    <xui-tip\n                                        class="risklevel-btn-tip"\n                                        s-if="cheatingUser"\n                                        position="tc">\n                                        <div class="risklevel-btn-tip-content">抱歉，您的账户存在异常，需要实名认证才可创建应用，<a target="_blank" href="/qualify/">立即认证</a></div>\n                                    </xui-tip>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="section usage-section">\n                        <div class="section-header">用量</div>\n                        <div class="section-filter">\n                            <span>请选择时间段</span>\n                            <ui-rangecalendar value="{=timeRange=}" on-change="getUsage"></ui-rangecalendar>\n                        </div>\n                        <div class="section-body">\n                            <bicc-usage-table\n                                s-if="aiAppType === \'bicc\'"\n                                loading="{{usageTable.loading}}"\n                                data="{{usageTable.data}}"\n                            />\n                            <div s-else>\n                                <xui-table\n                                    class="show-head"\n                                    schema="{{usageTable.schema}}">\n                                </xui-table>\n                                <xui-table\n                                    class="show-body"\n                                    cell-builder="{{usageTable.cellRenderer}}"\n                                    schema="{{usageTable.schema}}"\n                                    loading="{{usageTable.loading}}"\n                                    datasource="{{usageTable.data}}">\n                                </xui-table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="section service-list-section">\n                    <div class="section-header">\n                        可用服务列表\n                    </div>\n                    <xui-toastlabel s-if="aiAppType === \'antiporn\'">\n                        所有使用组合服务接口、头像审核等老接口的用户,请尽快迁移至内容审核平台-图像接口,老接口的调用量仍可以在监控报表中查看.\n                    </xui-toastlabel>\n                    <qualifi-label qualificationStatus=\'{{qualificationStatus}}\' on-showSpeechQpsQuota=\'showSpeechQpsQuota\'></qualifi-label>\n                    \x3c!-- face speech--\x3e\n                    <div class="{{aiAppType+\'-api-table\'}}" s-if="hasCategory">\n                        <div class="category-tabs" s-if="{{cateGories.datasource.length > 1}}">\n                            <xui-radioselect value="{=cateGories.value=}" datasource="{{cateGories.datasource}}"></xui-radioselect>\n                        </div>\n                        \x3c!-- easydl tab 第一个时 表格需单独处理--\x3e\n                        <ui-table\n                            s-for="item,index in cateGoriesApiTableData"\n                            datasource="{{item.children}}"\n                            fields="{{item|handleApiFild}}"\n                            extensions="Command"\n                            on-command="onCommand($event)"\n                            s-ref="faceApiTable{{index}}"\n                        >\n                        </ui-table>\n                    </div>\n                    \x3c!-- roboticvision --\x3e\n                    <div s-elif="aiAppType === \'roboticvision\'">\n                        <ui-table\n                            s-for="item in api.tableData"\n                            datasource="{{item}}"\n                            fields="{{api.fields}}"></ui-table>\n                    </div>\n                    \x3c!-- bicc --\x3e\n                    <bicc-api-list-table s-elif="aiAppType === \'bicc\'" data="{{biccApiListTable}}" on-update="getApiList" />\n                    \x3c!-- unit --\x3e\n                    <div s-elif="aiAppType === \'unit\'">\n                        <div class="unit-version-tabs" s-if="{{hasUnitVersion}}">\n                            <xui-radioselect value="{=unitVersions.value=}" datasource="{{unitVersions.datasource}}"></xui-radioselect>\n                        </div>\n                        <ui-table\n                            datasource="{{unitApiTableData}}"\n                            fields="{{api.fields}}"\n                            on-command="onCommand($event)"\n                            extensions="Command"\n                            noDataHtml="{{api.noDataHtml}}">\n                        </ui-table>\n                    </div>\n                    \x3c!-- 其他 --\x3e\n                    <div s-else>\n                        <ui-table\n                            datasource="{{api.tableData}}"\n                            fields="{{api.fields}}"\n                            on-command="onCommand($event)"\n                            extensions="Command"\n                            noDataHtml="{{api.noDataHtml}}">\n                        </ui-table>\n                    </div>\n                </div>\n                <toast-label messageType="alert" class="toast-label-risk" s-if="topTipText">\n                    {{topTipText | raw}}\n                </toast-label>\n            </div>\n            <xui-dialog open="{=speechQpsQuotaDialogVisible=}" mask="{{true}}" title="QPS默认配额详情" width="960" foot="{{false}}">\n                <speech-qps-quota-table />\n                <a s-if="qualificationStatus < 3" target="_blank" href="/qualify/">立即认证</a>\n            </xui-dialog>\n            \x3c!-- 次数包详情弹窗 --\x3e\n            <number-package s-ref="number-package" />\n            <package-apply s-ref=\'packageApply\' on-applySuccess=\'packageApplySuccess\'>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/overview/Modals/Destroy/destroy",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./destroy.tpl","ai/common/enums"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i);module.exports=r["default"]({template:s["default"],computed:{hasQpsPackage:function(){return this.data.get("resourceTypes").filter(function(e){return e.resourceType===n.ResourceType.qpsPackage}).length},tip:function(){if(this.data.get("resourceTypes").length){return"该接口下的"+this.data.get("resourceTypes").map(function(e){var t=e.resourceType;return n.ResourceType.getTextFromValue(t)}).join("、")+"还未使用完，您需使用完才可终止付费。如需退款，请提交工单与我们联系\n                    "+(this.data.get("hasQpsPackage")?"（抱歉，按天购买的QPS包暂不支持退款）":"")+"。"}return"您确定要终止付费吗？终止付费后，您的资源将回归至免费状态，超过免费资源的调用将不再响应。后续如需使用付费资源，可再次开通付费。"}},initData:function(){return{apiId:"",resourceTypes:[]}},destroy:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e["default"].awrap(this.ajax.orderDestroy({type:this.$get("aiAppType"),apiId:this.$get("apiId")}));case 3:this.fire("destroySuccess"),this.cancel(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.cancel();case 10:case"end":return t.stop()}},null,this,[[0,7]])},cancel:function(){this.$set("open",!1)}})}),define("ai/page/overview/Modals/Destroy/destroy.tpl",[],function(){return'<div>\n    <xui-dialog\n        open="{=open=}"\n        class="destroy-tip-dialog"\n        title="终止付费"\n    >\n        <div class="qps-detail-dialog-content">\n            <p>{{tip}}</p>\n        </div>\n        <div slot="foot">\n            <template s-if="{{resourceTypes.length}}">\n                <a\n                    href="{{Url.ticket}}"\n                    target="_blank"\n                    class="ui-button ui-button-x skin-primary skin-primary-button ui-button-with-label"\n                >\n                    提交工单\n                </a>\n                <xui-button on-click="cancel">取消</xui-button>\n            </template>\n            <template s-else>\n                <xui-button skin="primary" on-click="destroy">确认</xui-button>\n                <xui-button on-click="cancel">取消</xui-button>\n            </template>\n        </div>\n    </xui-dialog>\n</div>'}),define("ai/page/overview/Modals/Destroy/index",["exports","module","./destroy","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/overview/Modals/index",["exports","module","./PackageApply/index","babel-runtime/helpers/interop-require-default","./NumberPackage/index","./QpsDetail","./Destroy/index"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a),o=t["default"](i),l=t["default"](n);module.exports={packageApply:r["default"],numberPackage:s["default"],QpsDetail:o["default"],Destroy:l["default"]}}),define("ai/page/overview/Modals/NumberPackage/index",["exports","module","./NumberPackage","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/overview/Modals/NumberPackage/NumberPackage",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","lodash","ai/common/enums"],function(exports,module,e,t,a,i,n,r){var s=i["default"](a),o=i["default"](n);module.exports=s["default"]({template:'\n<div>\n    <xui-dialog open="{=open=}" mask="{{true}}" title="次数包使用情况" width="840" foot="{{false}}">\n        <div class="number-package-dialog">\n            <xui-button\n                on-click="buyPackage"\n                icon="plus"\n                skin="primary"\n                s-if="{{canBuy}}"\n            >\n                购买次数包\n            </xui-button>\n            <xui-toastlabel class="package-tip">\n                次数包按照购买时间顺序依次抵扣，全部使用完毕后自动切换为按量后付费模式。\n            </xui-toastlabel>\n            <xui-table\n                datasource="{{datasource}}"\n                schema="{{schema}}"\n                on-command="onCommand($event)"\n                loading="{{loading}}"\n            >\n                <template slot="c-status">\n                    {{row.status | statusText}}\n                </template>\n                <template slot="c-used">\n                    <div class="proportion">\n                        <div class="title">{{row.used | currency(0)}}/{{row.total | formatUnit}}</div>\n                        <div class="progress">\n                            <div class="selected-bar" style="left: 0; width: {{row | proportion}};"></div>\n                        </div>\n                    </div>\n                </template>\n                <template slot="c-buyTime">\n                    {{row.buyTime | dateFormat(\'YYYY-MM-DD\')}}\n                </template>\n                <template slot="c-expiredTime">\n                    {{row.expiredTime | dateFormat(\'YYYY-MM-DD\')}}\n                </template>\n            </xui-table>\n            <xui-pager on-change="onPagerChange($event)"\n                class="table-pager"\n                count="{{total}}"\n                size="{{pageSize}}"\n                page="{=pageNo=}"\n            />\n        </div>\n    </xui-dialog>\n</div>\n',initData:function(){return{schema:[{name:"id",label:"ID"},{name:"status",label:"状态"},{name:"used",label:"使用量",width:250},{name:"buyTime",label:"购买时间"},{name:"expiredTime",label:"失效时间"}],pageSize:10,pageNo:1,apiId:"",datasource:[],total:0,loading:!1,open:!1,canBuy:!0,packageStatus:"",purchasedDomainId:""}},filters:{statusText:function(e){return r.NumPackageStatus.getTextFromValue(e)},proportion:function(e){return o["default"].round(e.used/e.total*100,0)+"px"},formatUnit:function(e){return e>=1e8?e/1e8+"亿":e>=1e7?e/1e7+"千万":e>=1e4?e/1e4+"万":e}},attached:function(){var e=this;this.watch("open",function(t){t?e.handleNumPackageList():e.reset()})},onPagerChange:function(e){var t=e.pageNo;this.$set("pageNo",t),this.handleNumPackageList()},reset:function(){var e=this.initData(),t=e.datasource,a=e.apiId,i=e.pageNo,n=e.canBuy,r=e.type;this.$$set({datasource:t,apiId:a,pageNo:i,type:r,canBuy:n})},buyPackage:function(){var t=this.$get(),a=t.apiId,i=t.packageStatus,n=t.purchasedDomainId;this.$aiRedirect("buyPackage/index",e["default"]({apiId:a,status:i},n?{purchasedDomainId:n}:{}))},handleNumPackageList:function(){var e,a,i,n,r,s;return t["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:return this.$set("loading",!0),e=this.$get(),a=e.pageNo,i=e.pageSize,n=e.apiId,r=e.aiAppType,o.prev=6,o.next=9,t["default"].awrap(this.ajax.numPackageList({pageNo:a,pageSize:i,apiId:n,type:r}));case 9:s=o.sent,this.$$set({datasource:s.result,total:s.totalCount,loading:!1}),o.next=16;break;case 13:o.prev=13,o.t0=o["catch"](6),this.$set("loading",!1);case 16:case"end":return o.stop()}},null,this,[[6,13]])}})}),define("ai/page/overview/Modals/PackageApply/index",["exports","module","./packageApply","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/overview/Modals/PackageApply/packageApply",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./packageApply.tpl","ai/components/SimpleImgUploadList/index","async-validator"],function(exports,module,e,t,a,i,n,r,s){var o=i["default"](a),l=i["default"](n),u=i["default"](r),d=s["default"];module.exports=o["default"]({template:l["default"],components:{"simple-img-upload-list":u["default"]},initData:function(){return{open:!1,rules:new d({companyName:[{required:!0,message:"请输入公司名称"},{max:20,message:"公司名称最长20个字"}],name:[{required:!0,message:"请输入姓名"},{max:20,message:"姓名最长20个字"}],phone:[{required:!0,message:"请输入联系电话"},{pattern:/^\d{5,11}$/,message:"请输入正确格式的电话"}],scene:[{required:!0,message:"请输入需求场景"},{max:500,message:"不能超过500字"}],reason:[{required:!0,message:"请输入申请理由"},{max:500,message:"不能超过500字"}],imageList:[{required:!0,message:"请上传产品截图"}]}),errors:null,apiName:"",consoleApiId:"",formData:{},url:"/api/ai/s/packageApply/fileUpload",options:{accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/gif,image/jpeg,image/bmp,image/png"}},sizeLimit:10485760,max:5}},handleImg:function(e){this.$set("formData.imageList",e)},submit:function(){var a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(this.ref("form").validateForm());case 2:return a=this.$get(),i=a.formData,n=a.consoleApiId,r.prev=5,r.next=8,t["default"].awrap(this.ajax.packagePurchaseApply(e["default"]({consoleApiId:n},i)));case 8:this.$toast("申请成功，请等待审核"),this.fire("applySuccess"),this.onCloseDialog(),r.next=17;break;case 13:return r.prev=13,r.t0=r["catch"](5),r.t0.field&&this.$set("errors",r.t0.field),r.abrupt("return");case 17:case"end":return r.stop()}},null,this,[[5,13]])},onCloseDialog:function(){this.$set("open",!1)}})}),define("ai/page/overview/Modals/PackageApply/packageApply.tpl",[],function(){return'<div>\n    <xui-dialog on-confirm="handleConfirm"  open="{=open=}" title="次数包购买申请" class="number-package-apply-dialog">\n        <xui-form s-ref="form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}">\n            <p>请填写以下信息，获得更多次数包购买权限</p>\n            <div class="api-name">\n                申请服务接口：{{apiName}}\n            </div>\n            <xui-item required name="companyName" label="公司名称：">\n                <xui-textbox value="{=formData.companyName=}" placeholder="请输入公司名称"></xui-textbox>\n            </xui-item>\n            <xui-item required name="name" label="姓名：">\n                <xui-textbox value="{=formData.name=}" placeholder="请输姓名"></xui-textbox>\n            </xui-item>\n            <xui-item required name="phone" label="电话：">\n                <xui-textbox value="{=formData.phone=}" placeholder="请输入联系电话"></xui-textbox>\n            </xui-item>\n            <xui-item required name="scene" label="需求场景：">\n                <xui-textbox multiline value="{=formData.scene=}" placeholder="请填写您的需求场景" width="350"></xui-textbox>\n            </xui-item>\n            <xui-item required name="reason" label="申请理由：">\n                <xui-textbox multiline value="{=formData.reason=}" placeholder="请填写您的申请理由" width="350"></xui-textbox>\n            </xui-item>\n            <xui-item required name="imageList" label="应用产品截图：">\n                <simple-img-upload-list on-change="handleImg" url="{{url}}" options="{{options}}" sizeLimit="{{sizeLimit}}" max="{{max}}"/>\n            </xui-item>\n        </xui-form>\n        <div slot="foot">\n            <xui-button on-click="submit" skin="primary">确认</xui-button>\n            <xui-button on-click="onCloseDialog">取消</xui-button>\n        </div>\n    </xui-dialog>\n</div>'}),define("ai/page/overview/Modals/QpsDetail",["exports","module","inf-ui/x/components/Dialog","babel-runtime/helpers/interop-require-default","ai/common/component","inf-ria/ui/echarts/EChart","inf-ui/uiFactory","ai/config","moment","underscore"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](i),c=t["default"](s),p=t["default"](o);module.exports=u["default"]({template:'\n    <div>\n        <xui-dialog open="{=open=}" class="error-detail-dialog" foot="{{false}}" height="350" width="800">\n            <div slot="head">QPS额度配置详情—{{name}}API</div>\n            <div class="qps-detail-dialog">\n                <div class="timeRange-container">\n                    <label>请选择时间段</label>\n                    <ui-rangecalendar value="{=timeRange=}"\n                        range="{{range}}"\n                        on-change="getData"\n                        hideShortCut="true">\n                    </ui-rangecalendar>\n                </div>\n                <echart chartType="line" s-ref="echart" style="width:100%;height:300px">\n                </echart>\n            </div>\n        </xui-dialog>\n    </div>\n',components:{echart:n.createUi(d["default"]),"xui-dialog":l["default"]},initData:function(){var e=c["default"]().format("YYYY-MM-DD"),t=c["default"]().add(1,"week").format("YYYY-MM-DD");return{range:{begin:c["default"]().subtract(1,"day").toDate(),end:new Date(2046,10,4)},timeRange:e+","+t,name:"",apiId:"",open:!1}},attached:function(){this.getData()},setEchartOption:function(e){this.ref("echart").__getESUI().setOption({grid:{top:20},color:["#108cee","#5fb333"],tooltip:{trigger:"axis",borderColor:"#1494EA",borderRadius:0,borderWidth:1,padding:0,backgroundColor:"rgba(255, 255, 255, 0.7)",textStyle:{color:"#666"},formatter:function(e){return'<div class="echarts-tooltip-title">'+String(e[0].name).replace(/\//g,"-")+"</div>"+e.map(function(e){return'<p class="echarts-tooltip-content">'+e.seriesName+"："+e.value+"</p>"}).join("")}},xAxis:[{type:"category",axisLabel:{textStyle:{color:"#999"}},data:p["default"].pluck(e,"name")}],yAxis:[{type:"value",min:0,axisLabel:{textStyle:{color:"#999"}}}],series:[{type:"line",symbol:"none",name:"QPS",data:p["default"].pluck(e,"value")}]})},getData:function(){var e=this,t=this.$get("timeRange").split(","),a=t[0],i=t[1];this.showLoading(),r.api.getQpsDetail({apiId:this.$get("apiId"),st:new Date(a).valueOf(),et:new Date(i).valueOf()}).then(function(t){e.setEchartOption(t),e.hideLoading()})},showLoading:function(){this.ref("echart").__getESUI().echartsInstance.showLoading()},hideLoading:function(){this.ref("echart").__getESUI().echartsInstance.hideLoading()}})}),define("ai/page/overview/qualifiLabel",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","ai/config","ai/common/enums"],function(exports,module,e,t,a,i,n){var r=a["default"](t);module.exports=r["default"]({template:'\n    <div>\n        <xui-toastlabel s-if="showTip" class="tip-content">\n            {{tipText|raw}}\n            <a style="float:right;" href="javascript:void(0)" on-click="noMoreNotice" s-if="noMoreShow">不再提醒</a>\n            <a class=\'speech-qualification-tip\' s-if="aiAppType === \'speech\'" on-click="showSpeechQpsQuota ">查看QPS详情</a>\n        </xui-toastlabel>\n    </div>\n',initData:function(){return{AppType:n.AppType,showTip:!1,tipText:"",noMoreShow:!1}},inited:function(){this.getTipStatus()},getTipStatus:function(){var e=this,t=this.$get("aiAppType");~[n.AppType.face,n.AppType.body].indexOf(t)&&this.handleTips(t),~[n.AppType.speech,n.AppType.nlp].indexOf(t)&&this.watch("qualificationStatus",function(a){e.qualificationTip(t,a)})},handleTips:function(t){var a,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e["default"].awrap(i.api.tipStatus({type:t}));case 2:if(a=s.sent,this.$set("showTip",a.showTip),a.showTip){s.next=6;break}return s.abrupt("return");case 6:r=t===n.AppType.face?"完成企业认证，即可获得以下权益：":"完成企业认证，人体分析支持付费购买QPS的接口免费QPS由“2”扩充至“5”。",+a.status===n.AuthStatus.CERTIFYING?r+='<span style="color:#999">[ 企业认证审核中 ]</span>':+a.status===n.AuthStatus.NOT_CERTIFIED?r+='<a href="'+this.$get("Url").enterpriseQualify+'" target="_blank">立即认证</a>':+a.status===n.AuthStatus.CERTIFIED?(r+='<span style="color:#999">[ 您已完成企业认证 ]</span>',this.$set("noMoreShow",!0)):+a.status===n.AuthStatus.FAILED&&(r+='<span style="color:#999">[ 企业认证失败，\n                <a href="'+this.$get("Url").enterpriseQualify+'" target="_blank">重新认证</a> ]</span>'),t===n.AppType.face&&+a.status!==n.AuthStatus.CERTIFYING&&+a.status!==n.AuthStatus.CERTIFIED&&(r+="<p>(1) 人脸检测、人脸对比、人脸搜索、人脸库管理接口的免费QPS由“2”扩充至“10”。</p>\n            <p>(2) 获得公安验证接口、身份证与名字比对接口、H5视频活体接口的权限，并赠送免费调用量。</p>\n            <p>备注：企业认证完成后，将在您重新登录人脸识别控制台30分钟后下发权益到您的账户。</p>"),this.$set("tipText",r);case 10:case"end":return s.stop()}},null,this)},qualificationTip:function(e,t){var a='&nbsp;&nbsp;<a href="/qualify/" target="_blank">立即认证</a>',i="福利：完成企业认证，每个接口的并发限制由2QPS提升至5QPS，并可获得更多的免费调用量"+a,n={speech1:"完成实名认证，可提升语音免费QPS和免费测试调用量 "+a,speech2:"完成企业认证，可提升语音免费QPS和免费测试调用量 "+a,speech3:"已完成企业认证",nlp1:i,nlp2:i,nlp3:"恭喜您已完成企业认证，每个接口的并发限制由2QPS提升至5QPS"};this.$$set({showTip:!0,tipText:n[""+e+t]})},noMoreNotice:function(){var e=this;i.api.tipClose({type:this.$get("aiAppType")},{"X-silence":!0}).then(function(){e.$set("showTip",!1)})},showSpeechQpsQuota:function(){this.fire("showSpeechQpsQuota")}})}),define("ai/page/overview/speechApiFields",["exports","module","ai/common/util","ai/common/enums","ai/config","./configGenerate","ai/config/url","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a,i,n,r,s){var o=s["default"](r);module.exports=function(r,s,l,u){return function(d){return[{title:d.name,content:function(e,t){return t?o["default"].escape(e.name):"API"}},{title:"",content:function(t,a){return a?e.getApiStatus(t):"状态"}},{title:"",content:function(e,t){return t?o["default"].escape(e.limit):"调用量限制"}},{title:"",content:function(e,t){return t?o["default"].escape(e.maxQps):"QPS限制"}},{title:"",content:function(e,i){if(!i){var n='<span\n                        data-ui-type="Tip"\n                        data-ui-arrow="true"\n                        data-ui-content=\'开通付费后，默认采用按量后付费形式，总调用量不受限制，QPS提升至50，具体计费标准请查看\n                        <a href="'+a.Url.speech.price+'" target="_blank">产品定价文档</a>\'\n                    >\n                    </span>';return"开通按量后付费"+(l?n:"")}switch(e.chargeStatus){case t.ChargeStatus.unpaid:return e.canOpen?'<a\n                                href="javascript: void(0);"\n                                data-command="speechBonusNeedRecycle"\n                                data-track-id="overview_speech_pay_service"\n                                data-command-args="'+e.id+","+e.bonusNeedRecycle+',create"\n                                data-track-name="概览-语音-开通付费">\n                                '+(l?"开通":"开通付费")+"\n                                </a>":"免费试用";case t.ChargeStatus.paid:case t.ChargeStatus.arrear:return'<a href="javascript:void(0);"\n                            style="white-space: nowrap"\n                            data-command="orderDestroy"\n                            data-command-args="'+e.id+'">\n                            终止付费\n                        </a>';case t.ChargeStatus.paying:return"等待开通";default:return"--"}}}].concat(r&&[{title:"",content:function(e,a){return a?e.canBuyQps===t.CanBuyQps.UNABLE?"--":'<a data-track-id="overview_speech_buy_qps"\n                    data-track-name="概览-语音-立即购买"\n                    href="#/ai/speech/buyQps/index~apiId='+e.id+'">\n                        立即购买\n                    </a> | <a href="javascript: void(0);"\n                        style="white-space: nowrap"\n                        data-command="qpsDetail"\n                        data-command-args="'+e.id+","+e.name+'">\n                            配额详情\n                    </a>':"QPS购买"}}],l&&[{title:"",content:function(e,t){return t?i.numPackage(e,"speech"):'购买次数包\n                    <span\n                        data-ui-type="Tip"\n                        data-ui-arrow="true"\n                        data-ui-content=\'购买次数包后，计费调用优先抵扣次数包额度，额度耗尽自动切换为按量后付费形式，具体计费标准请查看\n                        <a href="'+a.Url.speech.price+'" target="_blank">产品定价文档</a>\'\n                    >\n                    </span>'}}],u&&[{title:"",content:function(e,t){return t?i.qpsGenerate(e,"speech"):'购买QPS叠加包\n                    <span\n                        data-ui-type="Tip"\n                        data-ui-arrow="true"\n                        data-ui-content=\'已开通付费（或购买次数包）后，若您有临时性的QPS高并发要求，可选择在某个时间段内叠加购买QPS，未开通付费的用户无法购买QPS叠加包\'\n                    >\n                    </span>'}}],s&&[{title:"",content:function(e,t){return t?e.isSmartAsrApi?'<a href="'+n.smartAsr+'" target="_blank">立即训练</a>':"--":"模型训练优化"}}])}}}),define("ai/page/overview/SpeechQpsQuotaTable/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n        <table class="speech-qps-quota-table">\n            <thead>\n                <tr>\n                    <th>语音能力</th>\n                    <th>API</th>\n                    <th>未认证账户</th>\n                    <th>个人认证</th>\n                    <th>企业认证</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr>\n                    <td rowspan="5">语音识别-标准版</td>\n                    <td>语音识别-中文普通话</td>\n                    <td>2QPS，5万次免费测试调用量</td>\n                    <td>5QPS，15万次免费测试调用量</td>\n                    <td>10QPS，200万次免费测试调用量</td>\n                </tr>\n                <tr>\n                    <td>语音识别-英语</td>\n                    <td>2QPS，2万次免费测试调用量</td>\n                    <td>3QPS，3万次免费测试调用量</td>\n                    <td>5QPS，5万次免费测试调用量</td>\n                </tr>\n                <tr>\n                    <td>语音识别-粤语</td>\n                    <td>2QPS，2万次免费测试调用量</td>\n                    <td>3QPS，3万次免费测试调用量</td>\n                    <td>5QPS，5万次免费测试调用量</td>\n                </tr>\n                <tr>\n                    <td>语音识别-四川话</td>\n                    <td>2QPS，2万次免费测试调用量</td>\n                    <td>3QPS，3万次免费测试调用量</td>\n                    <td>5QPS，5万次免费测试调用量</td>\n                </tr>\n                <tr>\n                    <td>语音识别-远场</td>\n                    <td>2QPS，2万次免费测试调用量</td>\n                    <td>3QPS，3万次免费测试调用量</td>\n                    <td>5QPS，5万次免费测试调用量</td>\n                </tr>\n                <tr>\n                    <td>语音识别-极速版</td>\n                    <td>语音识别-极速版</td>\n                    <td colspan="3">未开通付费：5qps； 开通付费：50qps。<br />每个账号有5万次免费测试调用量</td>\n                </tr>\n                <tr>\n                    <td rowspan="2">语音合成</td>\n                    <td>语音合成-基础音库</td>\n                    <td>5</td>\n                    <td>10</td>\n                    <td>100</td>\n                </tr>\n                <tr>\n                    <td>语音合成-精品音库</td>\n                    <td>2</td>\n                    <td>3</td>\n                    <td>5</td>\n                </tr>\n                <tr>\n                    <td>语音搜索解决方案</td>\n                    <td>语音搜索解决方案</td>\n                    <td>2</td>\n                    <td>3</td>\n                    <td>5</td>\n                </tr>\n                <tr>\n                    <td rowspan="2">呼叫中心语音解决方案</td>\n                    <td>呼叫中心语音解决方案-语音识别</td>\n                    <td>2</td>\n                    <td>3</td>\n                    <td>5</td>\n                </tr>\n                <tr>\n                    <td>呼叫中心语音解决方案-语音合成</td>\n                    <td>2</td>\n                    <td>3</td>\n                    <td>5</td>\n                </tr>\n                <tr>\n                    <td colspan="5">\n                        <p>短语音识别-中文普通话、英语、粤语、四川话、远场接口，开通付费后每个接口有免费50QPS</p>\n                        <p>呼叫中心语音解决方案每天可免费测试调用500次</p>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    '})}),define("ai/page/overview/usageFields",["exports","module","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=function(e){return{schema:[{name:"api",label:"API"},{name:"total",label:"调用量"},{name:"failed",label:"调用失败"},{name:"failureRate",label:"失败率"},{name:"statistics",label:"详细统计"}],cellRenderer:function(t,i){return function(e,t,i){return{api:'<span class="api-name">\n                    '+a["default"].escape(e.api)+(e.addVersionFlag&&+e.version?"V"+e.version:"")+"\n                </span>",total:a["default"].escape(e.total),failed:-1===e.failed?"--":a["default"].escape(e.failed),failureRate:-1===e.failed?"--":0===e.failed?"0%":(100*e.failed/e.total).toFixed(2)+"%",statistics:'<a href="#/ai/'+i+"/report/index~apiId="+a["default"].escape(e.id)+'">查看</a>'}[t]}(t,i,e)}}}}),define("ai/page/package/appList/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","moment","ai/common/enums","../mixin","er/URL","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u){function d(e,t,a){return e[t]&&"string"!=typeof e[t]?e[t][a]:e[t]}var c=i["default"](a),p=i["default"](n),f=i["default"](r),m=i["default"](o),h=i["default"](l),g=i["default"](u),v="AI_PACKAGE_TUTORIAL_HIDDEN",x=[{key:"downloadLink",label:"下载部署包"},{key:"extensionDownloadLink",label:"下载延期授权文件"},{key:"authorizeDownloadLink",label:"下载正式版授权文件"}];module.exports=c["default"]({template:p["default"],mixin:m["default"],computed:{tutorialToggleLabel:function(){return this.data.get("tutorialVisible")?"收起教程":"展开教程"},breadItem:function(){return[{title:"私有部署服务管理"}]}},filters:{convert:function(e,t){var a="class"===t?"tips":t,i={};if(e.packageType===s.PackageType.test){var n=s.PackageApplyStatusTest.fromValue(e.status);i.text=n.text,i.color=n.color,i.tips=n.tips}else{n=s.PackageApplyStatus.fromValue(e.status);i.color=n.color,i.text=d(n,a,e.operationType),i.tips=d(n,a,e.operationType)}return i["class"]=i.tips?"":"hidden",i[t]}},initData:function(){return{tutorialVisible:!window.localStorage.getItem(v),table:{datasource:[],schema:[{name:"index",label:"序号",width:100},{name:"applyId",label:"申请编号"},{name:"contactName",label:"联系人姓名"},{name:"modelList",label:"申请模型"},{name:"applyTime",label:"申请日期"},{name:"endTime",label:"有效日期"},{name:"packageType",label:"部署包版本"},{name:"status",label:"状态"},{name:"operation",label:"操作"}],cellRenderer:function(e,t,a,i){var n=function(e,t,a,i){var n=function(e){return e?f["default"](e).format("YYYY-MM-DD"):"-"};return{index:function(){return i+1},modelList:function(){return e.modelList.join(", ")},applyTime:function(){return n(e.applyTime)},endTime:function(){return n(e.endTime)},packageType:function(){return s.PackageType.getTextFromValue(e.packageType)},operation:function(){var t='<a class="download-link" href="javascript:void(0)" data-command="SeeDetail">查看详情</a>';return x.forEach(function(a){e[a.key]&&(t+='<a class="download-link" href="'+e[a.key]+'"\n                    target="_blank">'+a.label+"</a>")}),t}}}(e,0,0,i);return n[t]?n[t].call(this):e[t]}},pager:{pageNo:1,pageSize:10,totalCount:0}}},attached:function(){this.$get("pageNo")&&this.$set("pager.pageNo",+this.$get("pageNo")),this.getPackageList(),this.privateCanBuy()},getPackageList:function(){var a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t["default"].awrap(this.ajax.packageApplyList(e["default"]({type:this.$get("aiAppType")},g["default"].omit(this.$get("pager"),"totalCount"))));case 2:a=r.sent,i=a.result,n=a.totalCount,this.$set("table.datasource",i),this.$set("pager.totalCount",n);case 7:case"end":return r.stop()}},null,this)},onPagerChange:function(e){var t=e.pageNo,a=this.$route(),i=a.query,n=a.path;this.$redirect({url:"#"+n+"~"+h["default"].serialize(g["default"].extend({},i,{pageNo:t})),options:{silent:!0}}),this.$set("pager.pageNo",t),this.getPackageList()},toggleTutorial:function(){var e=this.$get("tutorialVisible");e&&window.localStorage.setItem(v,"1"),this.$set("tutorialVisible",!e)},apply:function(){this.$aiRedirect("package/apply/index")},onCommand:function(e){var t=e.type,a=e.payload;"SeeDetail"===t&&this.$aiRedirect("package/apply/detail",{applyId:a.applyId})},buyOffical:function(){this.$aiRedirect("package/buy")},privateCanBuy:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.privateCanBuy({type:this.$get("aiAppType")}));case 2:e=a.sent,this.$set("canBuyOffical",e);case 4:case"end":return a.stop()}},null,this)}})}),define("ai/page/package/appList/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content package-content">\n                <h2 s-if="aiAppType === \'face\'">人脸私有部署包</h2>\n                <h2 s-else>私有部署服务管理</h2>\n                <div class="app-list-page">\n                    <div s-if="aiAppType === \'face\'" class="tutorial">\n                        <ol class="tutorial-detail">\n                            <li>部署到开发者本地服务器上，支持百万级人脸库，毫秒级输出搜索结果，提供分布式高并发部署方案，适用于安防、监控等场景</li>\n                            <li>与离线识别SDK的区别：SDK部署到门禁、闸机等独立硬件上，单并发，支持万级别人脸库，适用于门禁、闸机、考勤机等场景</li>\n                        </ol>\n                        <p>了解人脸私有化部署包详情，请<a href="https://ai.baidu.com/docs#/Face_Private/top" target="_blank">查看介绍</a>。</p>\n                    </div>\n                    <div class="tutorial">\n                        <div class="tutorial-title">\n                            申请流程\n                            <a href="javascript:void(0)" on-click="toggleTutorial">{{ tutorialToggleLabel }}</a>\n                        </div>\n                        <div s-if="tutorialVisible" class="tutorial-detail-wrapper">\n                            <ol class="tutorial-detail">\n                                <li>私有部署包为部署在企业内部服务器端的AI模型部署包，可部署在本地CPU、GPU服务器，支持主流Linux操作系统。</li>\n                                <li>私有部署包为付费项目，可自用或集成为客户使用，需具备IT能力进行部署使用。</li>\n                                <li>请提前使用公有云接口验证能力及估算所需并发数（QPS），提交申请后工作人员将与您联系。</li>\n                                <li>如您需要手机端、设备端可用的人脸、OCR、图像等离线SDK能力，请<a href="https://ai.baidu.com/event/visionsdk" target="_blank">查看介绍</a>。</li>\n                            </ol>\n                            <div class="step">\n                                <div class="step-title">发起申请</div>\n                                <div class="step-detail">\n                                    <ol>\n                                        <li>选择适用的模型</li>\n                                        <li>提交申请</li>\n                                    </ol>\n                                </div>\n                            </div>\n                            <div class="step">\n                                <div class="step-title">业务审批及沟通</div>\n                                <div class="step-detail">\n                                    <ol>\n                                        <li>百度工作人员与您沟通需求并签订合同</li>\n                                        <li>百度制作部署包</li>\n                                    </ol>\n                                </div>\n                            </div>\n                            <div class="step">\n                                <div class="step-title">下载使用</div>\n                                <div class="step-detail">\n                                    <ol>\n                                        <li>下载安装部署包</li>\n                                        <li>在本地服务器上安装部署及使用</li>\n                                    </ol>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="package-list">\n                        <div class="package-title">管理列表</div>\n                        <div class="table-full-wrap">\n                            <div class="operation-wrap">\n                                <xui-button skin="primary" on-click="apply" width="80">发起申请</xui-button>\n                                <xui-button class="offical" s-if="{{canBuyOffical}}" on-click="buyOffical" width="80">购买正式版</xui-button>\n                            </div>\n                            <xui-table datasource="{{table.datasource}}"\n                                schema="{{table.schema}}"\n                                on-command="onCommand($event)"\n                                cell-builder="{{table.cellRenderer}}">\n                                <div slot="empty">\n                                    <div class="ui-table-body-nodata">\n                                        <div>\n                                            <p>\n                                                <span>还没有申请私有部署包</span>\n                                                <a href="#/ai/{{aiAppType}}/package/apply/index">发起申请></a>\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <template slot="c-status">\n                                    <span class="status {{row | convert(\'color\')}}">\n                                        {{row | convert(\'text\')}}\n                                    </span>\n                                    <span class="tips {{row | convert(\'class\')}}">\n                                        <xui-tip skin="warning" message="{{row | convert(\'tips\')}}"/>\n                                    </span>\n                                </template>\n                            </xui-table>\n                            <xui-pager size="{{pager.pageSize}}"\n                                page="{{pager.pageNo}}"\n                                count="{{pager.totalCount}}"\n                                back-text="<"\n                                forward-text=">"\n                                on-change="onPagerChange($event)" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/package/apply/config",["exports","babel-runtime/core-js/object/keys"],function(exports,e){exports.__esModule=!0;exports.disableConfig=function(t){var a={1:["device"],2:["activateTime"],3:["contractNumber","contract"]},i=t.jumpType,n=t.applyId;t.packageType&&a[2].push("contractNumber","contract");var r={contactName:!1,contactPhone:!1,contactEmail:!1,contactPosition:!1,use:!1,packageType:!1,isTestToFormal:!1,activateTime:!1,industry:!1,customerName:!1,businessScene:!1,businessScale:!1,contractNumber:!1,contract:!1,device:!1,file:!1,returnButton:!1};return n&&i&&e["default"](r).forEach(function(e){~a[i].indexOf(e)||(r[e]=!0)}),r};exports.statusToParams=function(e){var t={1:["deviceId"],2:["startTime","endTime"],3:["contractNumber","contractId"]};return e.packageType&&t[2].push("contractNumber","contractId"),t};var t="注：变更申请适用于测试环境发生变更的场景",a={0:{1:[{label:"变更申请",tip:t,id:1}],2:[{label:"变更申请",tip:t,id:1},{label:"延期申请",tip:"注：延期申请适用于授权文件即将到期，需要延期测试",id:2}]},1:{1:[{label:"延期申请",tip:"注：延期申请适用于授权文件即将到期，需要延期授权文件",id:2}],2:[{label:"填写合同信息",tip:"注：请根据格式要求填写已签署的商务合同编号",id:3}]}};exports.buttonListConfig=a}),define("ai/page/package/apply/detail/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","ai/components/UploadItem","san-xui","lodash","../config"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](s),f=i["default"](l);module.exports=d["default"]({template:c["default"],components:{"upload-item":p["default"],"xui-button":o.Button},computed:{breadItem:function(){return[{title:"私有部署服务管理",url:"#/ai/"+this.data.get("aiAppType")+"/package/index"},{title:"查看详情"}]},status:function(){var e=this.data.get("detail");return r.PackageApplyStatus.getAliasFromValue(e.status)},device:function(){var e=this.data.get("detail");if(e)return{name:f["default"].get(e,"device.fileName",""),url:f["default"].get(e,"device.fileUrl","")}},contract:function(){var e=this.data.get("detail");if(e)return{name:f["default"].get(e,"contract.fileName",""),url:f["default"].get(e,"contract.fileUrl","")}},buttonList:function(){var e=this.data.get("detail"),t=u.buttonListConfig[e.packageType];return t?t[e.status]:[]}},filters:{use:function(e){return r.PackageUse.getTextFromValue(e)},join:function(e){return e&&e.join&&e.join(", ")},packageType:function(e){return r.PackageType.getTextFromValue(e)}},initData:function(){return{detail:{}}},attached:function(){this.getDetail()},getDetail:function(){var e,a,i,n;return t["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.$get(),a=e.aiAppType,i=e.applyId,r.next=5,t["default"].awrap(this.ajax.packageApplyDetail({type:a,applyId:i}));case 5:n=r.sent,this.$set("detail",n);case 7:case"end":return r.stop()}},null,this)},reApply:function(t){var a=e["default"]({},t?{type:t,applyId:this.$get("applyId")}:{});this.$aiRedirect("package/apply/index",a)},returnList:function(){this.$aiRedirect("package/index")}})}),define("ai/page/package/apply/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content package-apply-detail-page">\n                <div class="review-status reviewing" s-if="status === \'Reviewing\'">\n                    <div class="review-tip"></div>\n                    <div class="review-detail">\n                        <div class="review-title">正在审批中</div>\n                        <div class="review-content">{{detail.tips}}</div>\n                    </div>\n                </div>\n                <div class="review-status reject" s-elif="status === \'Failed\'">\n                    <div class="review-tip"></div>\n                    <div class="review-detail">\n                        <div class="review-title">已退回</div>\n                        <div class="review-content">退回原因：{{ detail.comment }}</div>\n                        <div class="button-wrap">\n                            <xui-button skin="primary" on-click="reApply()">发起新申请</xui-button>\n                            <xui-button skin="primary" on-click="returnList">返回申请列表</xui-button>\n                        </div>\n                    </div>\n                </div>\n                <div class="section" s-else>\n                    <div class="section-title">管理员反馈</div>\n                    <template s-if="status === \'Completed\'">\n                        <div class="completed">\n                            <p>流程已关闭，请重新发起私有化部署申请</p>\n                            <xui-button skin="primary" on-click="reApply()">重新申请</xui-button>\n                        </div>\n                    </template>\n                    <template s-else>\n                        <xui-form>\n                            <xui-item s-if="{{detail.authorizeDownloadLink || detail.downloadLink}}" label="{{detail.authorizeDownloadLink ? \'正式版授权下载地址:\' : \'部署包下载地址:\'}}">\n                                <a href="{{detail.authorizeDownloadLink || detail.downloadLink}}" target="_blank">{{detail.authorizeDownloadLink || detail.downloadLink}}</a>\n                            </xui-item>\n                            <xui-item label="有效期:">{{ detail.startTime | dateFormat(\'YYYY-MM-DD\') }}至{{ detail.endTime | dateFormat(\'YYYY-MM-DD\') }}</xui-item>\n                            <xui-item s-if="detail.extensionDownloadLink" label="延期授权下载地址">\n                                <a href="{{detail.extensionDownloadLink}}" target="_blank">{{detail.extensionDownloadLink}}</a>\n                            </xui-item>\n                            <xui-item label="备注:">{{ detail.comment}}</xui-item>\n                        </xui-form>\n                        <template s-for="item in buttonList">\n                            <div class="button-list">\n                                <xui-button skin="primary" on-click="reApply(item.id)">{{item.label}}</xui-button>\n                                <span>{{item.tip}}</span>\n                            </div>\n                        </template>\n                    </template>\n                </div>\n                <div class="section package-detail">\n                    <div class="section-title">私有部署包查看详情</div>\n                    <xui-form>\n                        <xui-item label="申请时间:">{{ detail.applyTime | dateFormat(\'YYYY-MM-DD\') }}</xui-item>\n                        <xui-item label="公司名称:">{{ detail.company }}</xui-item>\n                        <xui-item label="联系人姓名:">{{ detail.contactName }}</xui-item>\n                        <xui-item label="联系电话:">{{ detail.contactPhone }}</xui-item>\n                        <xui-item label="联系邮箱:">{{ detail.contactEmail }}</xui-item>\n                        <xui-item label="工作职务:">{{ detail.contactPosition }}</xui-item>\n                        <xui-item label="申请模型:">{{ detail.modelList | join }}</xui-item>\n                        <xui-item label="申请用途:">{{ detail.use | use }}</xui-item>\n                        <xui-item label="部署包版本:">{{ detail.packageType | packageType }}</xui-item>\n                        <xui-item label="客户所在行业:" s-if="detail.industry">{{ detail.industry }}</xui-item>\n                        <xui-item label="合同编号:" s-if="detail.contractNumber">{{ detail.contractNumber}}</xui-item>\n                        <xui-item label="客户名称:" s-if="detail.customerName">{{ detail.customerName }}</xui-item>\n                        <xui-item label="应用场景:" class="xui-item-long">{{ detail.businessScene }}</xui-item>\n                        <xui-item label="业务量级:" class="xui-item-long">{{ detail.businessScale }}</xui-item>\n                        <xui-item label="合同文件:" s-if="detail.contract">\n                            <upload-item data="{{contract}}" show="{{true}}"></upload-item>\n                        </xui-item>\n                        <xui-item label="指纹文件:">\n                            <upload-item data="{{device}}" show="{{true}}"></upload-item>\n                        </xui-item>\n                    </xui-form>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/package/apply/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./step1/index","./step2/index","./step3/index","inf-ui/x/components/ViewStep"],function(exports,module,e,t,a,i,n,r,s){var o=t["default"](e),l=t["default"](a),u=t["default"](i),d=t["default"](n),c=t["default"](r),p=t["default"](s),f={step1:u["default"],step2:d["default"],step3:c["default"]};module.exports=o["default"]({template:l["default"],components:{"xui-viewstep":p["default"]},computed:{title:function(){return this.data.get("titleList")[this.data.get("step")]},breadItem:function(){return[{title:"私有部署服务管理",url:"#/ai/"+this.data.get("aiAppType")+"/package/index"},{title:"发起申请"}]}},initData:function(){return{stepList:[{text:"选择模型"},{text:"填写申请"},{text:"提交审批"}],titleList:["发起申请：请选择所需的模型","发起申请：请填写申请信息"],step:null,page:"",data:{modelList:[]}}},created:function(){var e=this;this.watch("step",function(t){e.$set("page","step"+ ++t),e.renderPage()})},attached:function(){this.$get("applyId")?this.$set("step",1):this.$set("step",0)},disposed:function(){this.page&&this.page.dispose()},renderPage:function(){var e=this;this.page&&this.page.dispose(),this.page=new(f[this.$get("page")])({data:this.$get("data")}),this.page.on("nextStep",function(t){e.$set("data",t),e.$set("step",e.$get("step")+1)}),this.page.on("prevStep",function(){e.$set("step",e.$get("step")-1)}),this.page.on("firstStep",function(){e.$set("step",0)}),this.page.attach(this.el.querySelector(".package-apply-wrapper"))}})}),define("ai/page/package/apply/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content package-content">\n                <h2 s-if="step !== 2">{{ title }}</h2>\n                <xui-viewstep step-index=\'{{step}}\' steps="{{stepList}}" s-if="step !== 2"></xui-viewstep>\n                <div class="package-apply-wrapper"></div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/package/apply/step1/index",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","async-validator"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i),o=a["default"](n)["default"]["default"];module.exports=r["default"]({template:s["default"],computed:{btnDisabled:function(){return!!this.data.get("errors")}},initData:function(){return{formData:{},errors:null,rules:new o({model:[{required:!0,message:"请选择一个模型"}]}),modelList:[]}},attached:function(){this.getModelList()},getModelList:function(){var t,a;return e["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e["default"].awrap(this.ajax.packageModelList({type:this.$get("aiAppType")}));case 2:t=i.sent,a=t.map(function(e){return{text:e.modelName+(e.modelDesc?"："+e.modelDesc:"")+(e.modelDescLink?'&emsp;<a href="'+e.modelDescLink+'" target="_blank">了解详情>></a>':""),value:e.modelId}}),this.$set("modelList",a);case 5:case"end":return i.stop()}},null,this)},submit:function(){var e=this;this.ref("form").validateForm().then(function(){e.fire("nextStep",{modelList:e.$get("formData.model")})})}})}),define("ai/page/package/apply/step1/index.tpl",[],function(){return'<div class="package-apply-step1">\n    <xui-form s-ref="form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}">\n        <xui-item label="选择模型" name="model">\n            <xui-boxgroup\n                box-type="checkbox"\n                datasource="{{modelList}}"\n                value="{=formData.model=}"\n                col-count="{{1}}"\n            />\n        </xui-item>\n        <xui-item label=" ">\n            <xui-button skin="primary" on-click="submit" disabled="{{btnDisabled}}">下一步</xui-button>\n        </xui-item>\n    </xui-form>\n</div>\n'}),define("ai/page/package/apply/step2/index",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","ai/components/index","san-xui","lodash","./rules","../config"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=i["default"](a),p=i["default"](n),f=i["default"](l),m=i["default"](u);module.exports=c["default"]({template:p["default"],components:{"upload-item":s.UploadItem,"xui-calendar":o.Calendar,"xui-webuploader":o.WebUploader},computed:{btnDisabled:function(){return!!this.data.get("errors")},isSelfUse:function(){return this.data.get("formData.use")===r.PackageUse.self},customerAttr:function(){return this.data.get("isSelfUse")?{}:{required:!0}},rules:function(){return m["default"]({isSelfUse:this.data.get("isSelfUse"),packageType:this.data.get("formData.packageType")})},disableConfig:function(){return d.disableConfig({applyId:this.data.get("applyId"),jumpType:this.data.get("jumpType"),packageType:this.data.get("formData.packageType")})},activateTimeUnit:function(){var e=this.data.get("formData.packageType");return e===undefined?"":e?"年":"月"},statusToParams:function(){return d.statusToParams({packageType:this.data.get("formData.packageType")})}},initData:function(){return{formData:{use:r.PackageUse.toArray()[0].value,startTime:new Date,isTestToFormal:!0,activateTime:""},errors:null,modelList:[],datasource:{use:r.PackageUse.toArray().map(function(e){return e.value===r.PackageUse.customer?{value:e.value,text:e.text+"（为多个客户可享优惠价格）"}:e}),industry:[],packageType:[{text:"测试版",value:0},{text:"正式版",value:1}],calendar:{begin:new Date(Date.now()-864e5),end:new Date(Date.now()+63072e7)},isTestToFormal:[{value:!0,text:"是，测试环境和正式部署环境相同"},{value:!1,text:"否，测试环境和正式部署环境不同"}]},fileUpload:{url:"/api/ai/s/package/fileUpload",deviceExtraData:{kind:"packageDevice"},contractExtraData:{kind:"packageContract"}},applyId:"",detail:{}}},attached:function(){this.getInfo()},getIndustryList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.packageIndustryList());case 2:e=a.sent,this.$set("datasource.industry",e.map(function(e){var t=e.id;return{text:e.name,value:t}}));case 4:case"end":return a.stop()}},null,this)},getInfo:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.$route().query.applyId,a.next=3,t["default"].awrap(this.getIndustryList());case 3:if(!e){a.next=10;break}return this.$set("applyId",e),this.$set("jumpType",this.$route().query.type),a.next=8,t["default"].awrap(this.getDetail(e));case 8:a.next=11;break;case 10:this.getUserInfo();case 11:case"end":return a.stop()}},null,this)},getUserInfo:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.packageApplyUserInfo({type:this.$get("aiAppType")}));case 2:e=a.sent,this.$set("formData",f["default"].assign({},this.$get("formData"),e));case 4:case"end":return a.stop()}},null,this)},getDetail:function(e){var a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.packageApplyDetail({type:this.$get("aiAppType"),applyId:e}));case 2:a=i.sent,a=this.handleDetailData(a),this.$$set({detail:a,formData:f["default"].assign({},this.$get("formData"),a)});case 5:case"end":return i.stop()}},null,this)},handleDetailData:function(e){["contract","device"].forEach(function(t){if(e[t]){var a=e[t],i=a.fileName,n=a.fileUrl,r=a.id;e[t]={name:i,url:n,id:r}}});var t=f["default"].find(this.$get("datasource.industry"),{text:e.industry});e.industry="",t&&(e.industry=t.value);var a=e.packageType?31536e6:2592e6;return e.activateTime=Math.ceil((e.endTime-e.startTime)/a),e.startTime=new Date(e.startTime),e},onUseChange:function(e){var t=this;e.value===r.PackageUse.self&&this.nextTick(function(){t.ref("form").validateFormItem("industry"),t.ref("form").validateFormItem("customerName")})},onTypeChange:function(){var e=this;this.nextTick(function(){e.ref("form").validateFormItem("activateTime")})},getParams:function(){var t=this.$get("formData"),a=e["default"]({type:this.$get("aiAppType")},f["default"].omit(t,["device","startTime","contract"]),{modelList:this.$get("modelList")});return t.contract&&(a.contractId=t.contract.id),a.deviceId=t.device.id,a.startTime=t.startTime.getTime(),a.endTime=a.startTime+t.activateTime*(t.packageType?31536e6:2592e6),a},submit:function(){return t["default"].async(function(e){for(var a=this;;)switch(e.prev=e.next){case 0:return e.next=2,t["default"].awrap(this.ref("form").validateForm());case 2:return e.prev=2,e.next=5,t["default"].awrap(function(){var e,i,n,r;return t["default"].async(function(a){for(var s=this;;)switch(a.prev=a.next){case 0:if(e=this.getParams(),i=this.$get(),n=i.applyId,r=i.jumpType,n){a.next=9;break}return a.next=7,t["default"].awrap(this.ajax.packageApplySave(e));case 7:a.next=11;break;case 9:return a.next=11,t["default"].awrap(function(){var a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return a={applyId:n,type:r},this.$get("statusToParams")[r].forEach(function(t){a[t]=e[t]}),i.next=4,t["default"].awrap(this.ajax.packageApplyChange(a));case 4:case"end":return i.stop()}},null,s)}());case 11:this.fire("nextStep");case 12:case"end":return a.stop()}},null,a)}());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),e.t0.field&&this.$set("errors",e.t0.field);case 10:case"end":return e.stop()}},null,this,[[2,7]])},cancel:function(){this.fire("prevStep")}})}),define("ai/page/package/apply/step2/index.tpl",[],function(){return'<div class="package-apply-step2">\n    <xui-form s-ref="form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}" labelWidth="150">\n        <xui-item label="联系人姓名" name="contactName" required>\n            <xui-textbox value="{=formData.contactName=}" placeholder="请输入联系人姓名" disabled="{{disableConfig.contactName}}"></xui-textbox>\n        </xui-item>\n        <xui-item label="联系电话" name="contactPhone" required>\n            <xui-textbox value="{=formData.contactPhone=}" placeholder="请输入联系电话" disabled="{{disableConfig.contactPhone}}"></xui-textbox>\n        </xui-item>\n        <xui-item label="联系邮箱" name="contactEmail" required>\n            <xui-textbox value="{=formData.contactEmail=}" placeholder="请输入联系邮箱" disabled="{{disableConfig.contactEmail}}"></xui-textbox>\n        </xui-item>\n        <xui-item label="工作职务" name="contactPosition" required>\n            <xui-textbox value="{=formData.contactPosition=}" placeholder="请输入工作职务" disabled="{{disableConfig.contactPosition}}"></xui-textbox>\n        </xui-item>\n        <xui-item label="申请用途" name="use" required>\n            <xui-boxgroup\n                datasource="{{datasource.use}}"\n                value="{=formData.use=}"\n                on-change="onUseChange"\n                disabled="{{disableConfig.use}}"\n            />\n        </xui-item>\n        <xui-item label="部署包版本" name="packageType" required>\n            <xui-select\n                datasource="{{datasource.packageType}}"\n                value="{=formData.packageType=}"\n                disabled="{{disableConfig.packageType}}"\n                on-change="onTypeChange"\n            />\n        </xui-item>\n        <xui-item s-if="{{formData.packageType}}" label="是否为测试版转正式版" name="isTestToFormal" required="{{formData.packageType}}">\n            <xui-boxgroup\n                datasource="{{datasource.isTestToFormal}}"\n                value="{=formData.isTestToFormal=}"\n                disabled="{{disableConfig.isTestToFormal}}"\n            />\n        </xui-item>\n        <xui-item label="证书起始日期" name="startTime" required>\n            <xui-calendar value="{=formData.startTime=}" range="{=datasource.calendar=}" disabled="{{disableConfig.activateTime}}"/>\n        </xui-item>\n        <xui-item label="证书有效时间" name="activateTime" required>\n            <xui-textbox value="{=formData.activateTime=}" placeholder="测试版1~3月，正式版1年以上" disabled="{{disableConfig.activateTime}}" type="number"></xui-textbox>\n            <span>{{activateTimeUnit}}</span>\n        </xui-item>\n        <xui-item label="客户所在行业" name="industry" required="{{!isSelfUse}}">\n            <xui-select\n                datasource="{{datasource.industry}}"\n                value="{=formData.industry=}"\n                disabled="{{disableConfig.industry}}"\n            />\n        </xui-item>\n        <xui-item label="客户名称" name="customerName" required="{{!isSelfUse}}">\n            <xui-textbox value="{=formData.customerName=}" placeholder="请输入客户名称" disabled="{{disableConfig.customerName}}"></xui-textbox>\n        </xui-item>\n        <xui-item label="应用场景" name="businessScene" required>\n            <xui-textbox multiline value="{=formData.businessScene=}" placeholder="请您简要描述应用AI能力的业务场景、期望达到的效果等" width="385" height="165" disabled="{{disableConfig.businessScene}}"></xui-textbox>\n        </xui-item>\n        <xui-item label="业务量级" name="businessScale" required>\n            <xui-textbox multiline value="{=formData.businessScale=}" placeholder="请您简要描述，每天处理的数据量级和所需的并发数" width="385" height="81" disabled="{{disableConfig.businessScale}}"></xui-textbox>\n        </xui-item>\n        <xui-item s-if="{{formData.packageType}}" label="合同编号(13位数字和字母)" name="contractNumber" required="{{formData.packageType}}">\n            <xui-textbox placeholder="请填写合同编号" value="{=formData.contractNumber=}" disabled="{{disableConfig.contractNumber}}"/>\n        </xui-item>\n        <xui-item s-if="{{formData.packageType}}" label="合同附件" name="contract" required="{{formData.packageType}}">\n            <upload-item url="{{fileUpload.url}}" extraData="{{fileUpload.contractExtraData}}" title="合同信息复印件" data="{=formData.contract=}" show="{{disableConfig.contractNumber}}"/>\n        </xui-item>\n        <xui-item label="指纹文件上传" name="device" required>\n            <upload-item url="{{fileUpload.url}}" extraData="{{fileUpload.deviceExtraData}}" data="{=formData.device=}" show="{{disableConfig.device}}"/>\n            <div class="device-tool-tips" s-if="{{aiAppType === \'face\'}}">\n                <div class="device-tool-tips-content">2019年5月29日前发起申请并进行过测试版/正式版部署的用户，请使用已下载到本地的指纹提取工具进行指纹提取，无需重新下载。</div>\n                <div class="device-tool-tips-content">2019年5月29日后发起申请的新用户，请通过下面链接下载指纹提取工具进行指纹提取。</div>\n            </div>\n        </xui-item>\n        <xui-item class="device-tips" name="tips">\n            <a target="_blank" href="{{Url.easypack.deviceTool}}">指纹提取工具下载</a> |\n            <a target="_blank" href="{{Url.easypack.doc}}">指纹提取工具使用说明</a>\n            <template s-if="{{!formData.packageType}}" ><span>| </span> <a target="_blank" href="{{Url.easypack.doc}}">指纹提取工具常见问题说明</a></template>\n        </xui-item>\n        <xui-item label=" ">\n            <xui-button skin="primary" on-click="submit" disabled="{{btnDisabled}}">提交申请</xui-button>\n            <xui-button on-click="cancel" disabled="{{disableConfig.returnButton}}">返回修改</xui-button>\n        </xui-item>\n    </xui-form>\n</div>\n\n'}),define("ai/page/package/apply/step2/rules",["exports","module","async-validator","lodash","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t,a){var i=a["default"](t);module.exports=function(t){var a={contactName:[{required:!0,message:"联系人姓名必填"},{max:10,message:"联系人姓名不能超过10个汉字"}],contactPhone:[{required:!0,message:"联系电话必填"},{pattern:/^\d{7,14}$/,message:"联系电话格式不正确"}],contactEmail:[{required:!0,message:"联系邮箱必填"},{type:"email",message:"联系邮箱格式错误"}],contactPosition:[{required:!0,message:"工作职务必填"},{max:20,message:"工作职务不能超过20个汉字"}],use:[{required:!0,message:"申请用途必填"}],businessScene:[{required:!0,message:"应用场景必填"},{max:500,message:"应用场景不能超过500个汉字"}],businessScale:[{required:!0,message:"业务量级必填"},{max:200,message:"业务量级不能超过200个汉字"}],packageType:[{required:!0,message:"必须选择部署包版本"}],device:[{required:!0,message:"请上传指纹文件"}],startTime:[{required:!0,message:"请选择起始时间"}],activateTime:[{validator:function(e,a,i,n){""===a||a<1||!t.packageType&&a>3?i("请填写正确的有效期"):i()}}]};return t.isSelfUse?i["default"].extend(a,{customerName:[{max:20,message:"客户名称不能超过20个汉字"}]}):i["default"].extend(a,{industry:[{required:!0,message:"客户所在行业必填"}],customerName:[{required:!0,message:"客户名称必填"},{max:20,message:"客户名称不能超过20个汉字"}]}),t.packageType&&i["default"].extend(a,{contractNumber:[{required:!0,message:"合同编号必填"},{pattern:/^[\dA-Za-z]{13}$/,message:"合同编号格式不正确"}],contract:[{required:!0,message:"请上传合同文件"}]}),new e["default"](a)}}),define("ai/page/package/apply/step3/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],reApply:function(){this.fire("firstStep")},returnList:function(){this.$aiRedirect("package/index")}})}),define("ai/page/package/apply/step3/index.tpl",[],function(){return'<div class="package-apply-step3">\n    <div class="success-icon"></div>\n    <div class="step3-right-block">\n        <h3>申请提交成功</h3>\n        <div class="sub-title">您的申请已成功提交，3个工作日内将有百度工作人员与您电话联系</div>\n        <div class="step3-detail">\n            <p>接下来的流程如下，预计需要5-15个工作日：</p>\n            <p>1）百度人员与您沟通需求及商务情况，达成一致后签订合同</p>\n            <p>2）百度人员制作部署包，完成后您可以在申请列表中下载部署包并使用</p>\n        </div>\n        <div class="step3-buttons">\n            <a href="javascript:void(0)" on-click="reApply">发起新申请</a>\n            <a href="javascript:void(0)" on-click="returnList">返回申请列表</a>\n        </div>\n    </div>\n</div>\n'}),define("ai/page/package/body/apply/apply",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./apply.tpl","inf-ria/app/brpc","lodash","moment","san-xui","ai/components/index","ai/common/enums","ai/config/constants","../../common/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=n["default"](i),h=n["default"](r),g=n["default"](s),v=n["default"](o),x=n["default"](l),b=[{},{ref:"baseInfos"},{ref:"fingerprint"}];module.exports=m["default"]({template:h["default"],components:{"xui-radioselect":u.RadioSelect,"no-side-head":d.NoSideHead,"fingerprint-section":f.fingerprintSection,"icon-section":f.iconSection,"base-infos":f.baseInfos},filters:{getLabelByValue:function(e,t){return null==e?"-":t.getTextFromValue(e)}},computed:{breadItem:function(){return[{title:"私有部署包管理",url:"#/ai/"+this.data.get("aiAppType")+"/package/index~type="+this.data.get("type")},{title:"发起申请"}]},isFormal:function(){return+this.data.get("type")===c.PackageType.formal},title:function(){return this.data.get("isFormal")?"购买正式部署包":"申请测试部署包"},expireTime:function(){return this.data.get("isAdd")&&this.data.get("detail")||this.data.get("isFormal")?[p.SDK_FORMAL_END_TIME]:[x["default"]().format("YYYY.MM.DD"),x["default"]().add(2,"month").format("YYYY.MM.DD")]},isEdit:function(){return!!this.data.get("id")&&!this.data.get("add")},isAdd:function(){return!!this.data.get("add")&&!!this.data.get("id")},selectedModels:function(){var t=this.data.get("selectInfos"),a=this.data.get("selectKeyList"),i=this.data.get("addInfos"),n=this.data.get("isAdd"),r=[];return a.forEach(function(a){var s=n?i[a].count:t[a].count;t[a].checked&&s&&r.push(e["default"]({},t[a],{count:s}))}),r},isSelectedModel:function(){var e=this.data.get("gpuType");return!!this.data.get("selectedModels").length&&e},totalPrice:function(){if(!this.data.get("isFormal"))return 0;var e=this.data.get("gpuType"),t=this.data.get("selectedModels").reduce(function(t,a){return t+=a.count*a.cost[e]},0);return t}},initData:function(){return{PrivatePerfomance:c.PrivatePerfomance,maxNum:50,detail:"",steps:[{text:"购买授权"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],stepIndex:0,currentStep:0,priceList:[],showOrder:!1,addCount:1,gpuType:"",gpuTypeList:[],modelList:[],modelConfig:{open:!0,saved:!1},canBuy:!1,selectInfos:{},addInfos:{},selectKeyList:[]}},attached:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return~[c.PackageType.formal,c.PackageType.test].indexOf(+this.$get("type"))||this.$set("type",c.PackageType.test),e.next=3,t["default"].awrap(this.getApiPrice());case 3:return e.next=5,t["default"].awrap(this.getModelList());case 5:if(this.generateSelectList(),!this.$get("isEdit")&&!this.$get("isAdd")){e.next=11;break}return this.$set("applyId",+this.$get("id")),e.next=10,t["default"].awrap(this.getApplyDetail());case 10:this.$get("isAdd")&&this.$set("canBuy",!0);case 11:case"end":return e.stop()}},null,this)},getModelList:function(){var a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.privateModelList({type:this.$get("aiAppType")}));case 2:a=i.sent,this.$$set({modelList:a.map(function(t){return e["default"]({},t,{text:t.modelName,value:t.modelId})}),gpuTypeList:a[0].gpuList.map(function(t){return e["default"]({},t,{value:t.gpuType,text:c.PrivateGraphicsType.getTextFromValue(t.gpuType)})}),gpuType:a[0].gpuList[0].gpuType});case 4:case"end":return i.stop()}},null,this)},getApiPrice:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.apiPrice({type:this.$get("aiAppType"),productType:"private"}));case 2:e=a.sent,this.$set("priceList",e);case 4:case"end":return a.stop()}},null,this)},generateSelectList:function(){var t=this.$get(),i=t.modelList,n=t.priceList,r=t.isAdd,s=[],o={},l={};i.forEach(function(t){s.push(t.modelId);var i={},u={};t.gpuList.forEach(function(e){var t=e.gpuType,r=e.qps,s=r[a["default"](r)[0]];i[t]=s,u[t]=v["default"].find(n,{id:s}).price[0].cost}),o[t.modelId]=e["default"]({},t,{count:1,checked:!1,apiId:i,cost:u}),r&&(l[t.modelId]={count:0})}),this.$$set({addInfos:l,selectInfos:o,selectKeyList:s})},getApplyDetail:function(){var e;return t["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.privateApplyDetail({id:this.$get("applyId"),type:this.$get("aiAppType")}));case 2:if(e=a.sent,this.$set("detail",e),!this.$get("isEdit")){a.next=8;break}if(e.licenseType===+this.$get("type")&&e.status===c.PrivateApplyStatus.draft){a.next=8;break}return this.jumpToList(),a.abrupt("return");case 8:if(!this.$get("isAdd")){a.next=12;break}if(e.licenseType===+this.$get("type")&&+this.$get("type")===c.PackageType.formal&&e.status===c.PrivateApplyStatus.bought){a.next=12;break}return this.jumpToList(),a.abrupt("return");case 12:e.modelList.forEach(function(e){var t,a=e.id,n=e.count;i.$$set((t={},t["selectInfos."+a+".count"]=n,t["selectInfos."+a+".checked"]=!0,t))}),this.$set("gpuType",e.gpuType);case 14:case"end":return a.stop()}},null,this)},handleInput:function(e,t){var a=e.value;a&&v["default"].isNumber(+a)&&(a=Math.floor(a),this.ref("numbertextline"+t).data.set("value",a))},handleInputAdd:function(e,t){var a=e.value;a&&v["default"].isNumber(+a)&&(a=Math.floor(a),this.ref("numbertextlineAdd"+t).data.set("value",a))},next:v["default"].debounce(function(){var e,a,i,n,r,s,o,l,u,d,c;return t["default"].async(function(p){for(;;)switch(p.prev=p.next){case 0:if(e=this.$get(),a=e.applyId,i=e.type,n=e.currentStep,r=e.gpuType,s=e.aiAppType,o=e.isFormal,l=e.isSelectedModel,u=e.selectedModels,0!==n){p.next=25;break}if(l){p.next=12;break}return p.abrupt("return");case 12:return d={id:a||0,licenseType:+i,modelList:u.map(function(e){return{id:e.modelId,qps:-1,count:e.count}}),gpuType:r,type:s},p.prev=13,p.next=16,t["default"].awrap(this.ajax.privateApplySaveModel(d));case 16:c=p.sent,this.$$set({applyId:c,"modelConfig.saved":!0,"modelConfig.open":!1,currentStep:n+1}),this.ref(b[1].ref).$set("config.open",!0),p.next=24;break;case 21:p.prev=21,p.t0=p["catch"](13),this.$toast("保存失败",{messageType:"error"});case 24:return p.abrupt("return");case 25:if(n!==b.length-1){p.next=33;break}if(!o){p.next=29;break}return this.$set("canBuy",!0),p.abrupt("return");case 29:return p.next=31,t["default"].awrap(this.ajax.privateSubmit({id:a,type:s}));case 31:return this.$aiRedirect("package/detail",{id:a,type:i}),p.abrupt("return");case 33:this.ref(b[n+1].ref).$set("config.open",!0),this.$set("currentStep",n+1);case 35:case"end":return p.stop()}},null,this,[[13,21]])},500),back:function(){var e=this.$get("currentStep");1===e?this.$set("modelConfig.open",!0):this.ref(b[e-1].ref).$set("config.open",!0),this.$set("currentStep",e-1)},backToManage:function(){this.$aiRedirect("package/index",{type:this.$get("type")})},buy:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$get("isSelectedModel")){e.next=2;break}return e.abrupt("return");case 2:if(this.$get("isAdd")){e.next=13;break}return e.prev=3,e.next=6,t["default"].awrap(this.ajax.privateApplyComplete({id:this.$get("applyId"),type:this.$get("aiAppType")}));case 6:this.orderConfirm(),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](3);case 11:e.next=14;break;case 13:this.orderConfirm();case 14:case"end":return e.stop()}},null,this,[[3,9]])},getOrderConfig:function(){var e=this.$get(),t=e.applyId,a=e.expireTime,i=e.gpuType,n=[],r=[];return e.selectedModels.forEach(function(e){var s=e.apiId,o=e.count,l=e.modelId,u=e.cost;n.push({apiId:s[i],applyId:t,timeUnit:"DAY",count:o,gpuType:i,modelId:l,modelCount:o,modelQps:-1}),r.push({serviceType:"HUMAN_BODY",productType:"prepay",count:o,time:"有效期至"+a[0],price:u[i]*o,unitPriceShow:u[i]/1e4+"万/授权",chargeType:["按量"],configuration:[c.PrivateGraphicsType.getTextFromValue(i)]})}),{configItems:n,orderItems:r}},orderConfirm:function(){var e=this,t=this.$get(),a=t.aiAppType,i=t.totalPrice;if(!(i<0)){var n=this.ref("confirm").__getESUI();n.on("action@prevPage",function(){e.$$set({stepIndex:0,showOrder:!1})});var r=this.getOrderConfig(),s={config:{type:a,productType:"private",items:r.configItems},order:{serviceType:"BODY",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/"+a+"/order/v2/confirm",price:i,items:r.orderItems}};g["default"].invokeService("billing://order_confirm",n,s).then(function(t){e.$$set({stepIndex:1,showOrder:!0})})}},jumpToList:function(){this.$aiRedirect("package/index",{type:this.$get("type")})},changeVisible:function(){this.$get("isAdd")&&this.$set("modelConfig.open",!this.$get("modelConfig.open"))},changeCanBuy:function(e){this.$set("canBuy",e)}})}),define("ai/page/package/body/apply/apply.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <no-side-head\n            s-if="showOrder"\n            on-backToManage="backToManage"\n            stepIndex="{{stepIndex}}"\n            steps="{{steps}}"\n        >\n            <span slot="back-title">返回私有部署包管理</span>\n            <span slot="title">购买授权</span>\n        </no-side-head>\n        <app-sidebar s-if="{{!isFormal}}"/>\n        <app-content class="body-package-apply-all">\n            <breadcrumb items="{{breadItem}}" s-if="!showOrder"></breadcrumb>\n            <div class="list-content body-package-apply" s-if="!showOrder">\n                <h2>{{title}}</h2>\n                <section>\n                    <h2 class="section-title">\n                        <span class="{{isAdd ? \'hover\' : \'\'}}" on-click="changeVisible">\n                            <icon-section config="{{modelConfig}}" />\n                            选择模型配置\n                        </span>\n                    </h2>\n                    <div s-if="modelConfig.open" class="section-content">\n                        <h3 class="sec-title">\n                            选择模型\n                        </h3>\n                        <xui-form class="form">\n                            <xui-item label="模型" required>\n                                <div s-for="key in selectKeyList" class="select-item">\n                                    <xui-checkbox checked="{=selectInfos[key].checked=}" title="{{selectInfos[key].modelName}}" disabled="{{isAdd}}" />\n                                    <xui-tip width="200" message="{{selectInfos[key].modelDesc}}" />\n                                    <div s-if="selectInfos[key].checked" class="line">\n                                        <div class="row" s-if="{{isFormal}}">\n                                            <div class="row-title">单价</div>\n                                            <div class="row-content">￥ {{selectInfos[key].cost[gpuType]}}</div>\n                                        </div>\n                                        <template s-if="{{!isAdd}}">\n                                            <div class="row num">\n                                                <div class="row-title">授权数量</div>\n                                                <xui-numbertextline\n                                                    s-ref="numbertextline{{key}}"\n                                                    class="row-content"\n                                                    min="{{1}}"\n                                                    max="{{maxNum}}"\n                                                    value="{=selectInfos[key].count=}"\n                                                    on-input="handleInput($event, key)"\n                                                >\n                                            </div>\n                                            <div class="row" s-if="{{isFormal}}">\n                                                <div class="row-title">购买费用小计</div>\n                                                <div class="row-content">{{selectInfos[key].count * selectInfos[key].cost[gpuType]}}</div>\n                                            </div>\n                                        </template>\n                                        <template s-else>\n                                            <div class="row">\n                                                <div class="row-title">已授权数量</div>\n                                                <div class="row-content">{{selectInfos[key].count}}</div>\n                                            </div>\n                                            <div class="row">\n                                                <div class="row-title">追加授权数量</div>\n                                                <xui-numbertextline\n                                                    s-ref="numbertextlineAdd{{key}}"\n                                                    class="row-content"\n                                                    min="{{0}}"\n                                                    max="{{maxNum}}"\n                                                    value="{=addInfos[key].count=}"\n                                                    on-input="handleInputAdd($event, key)"\n                                                >\n                                            </div>\n                                            <div class="row">\n                                                <div class="row-title">追加购买费用小计</div>\n                                                <div class="row-content">{{addInfos[key].count * selectInfos[key].cost[gpuType]}}</div>\n                                            </div>\n                                        </template>\n                                    </div>\n                                </div>\n                            </xui-item>\n                            <xui-item s-if="{{isFormal}}" label="{{isAdd ? \'追加\' : \'\'}}购买费用">\n                                <div class="price">{{totalPrice}}</div>\n                            </xui-item>\n                            <xui-item label="显卡类型" required>\n                                <xui-radioselect\n                                    disabled="{{isAdd}}"\n                                    value="{=gpuType=}"\n                                    datasource="{{gpuTypeList}}" />\n                                <p class="tips">\n                                    注：如果使用其他型号显卡或使用CPU，请<a target="_blank" href="{{Url.ticket}}~productId=158&questionId=346">提交工单</a>咨询\n                                </p>\n                            </xui-item>\n                        </xui-form>\n                        <h3 class="sec-title">\n                            申请信息\n                        </h3>\n                        <xui-form class="form">\n                            <xui-item label="申请类型">\n                                {{isFormal ? \'正式\' : \'测试\'}}部署包\n                            </xui-item>\n                            <xui-item label="证书有效期">\n                                {{expireTime[0]}}{{expireTime.length > 1 ? \' - \' + expireTime[1] : \'\'}}\n                            </xui-item>\n                        </xui-form>\n                        <template s-if="{{!isAdd}}">\n                            <xui-item>\n                                <xui-button skin="primary" disabled="{{!isSelectedModel}}" on-click="next">保存并继续</xui-button>\n                            </xui-item>\n                        </template>\n                    </div>\n                </section>\n                <section>\n                    <base-infos\n                        isAdd="{{isAdd}}"\n                        isEdit="{{isEdit}}"\n                        detail="{{detail}}"\n                        applyId="{{applyId}}"\n                        on-next="next"\n                        on-back="back"\n                        s-ref="baseInfos"\n                    />\n                </section>\n                <section>\n                    <fingerprint-section\n                        isAdd="{{isAdd}}"\n                        isFormal="{{isFormal}}"\n                        detail="{{detail}}"\n                        applyId="{{applyId}}"\n                        on-next="next"\n                        on-back="back"\n                        on-changeCanBuy = "changeCanBuy"\n                        s-ref="fingerprint"\n                    />\n                </section>\n                <section s-if="isFormal" class="buy">\n                    <div>\n                        <span>实付金额：</span>\n                        <span class="price">￥{{totalPrice}}</span>\n                    </div>\n                    <xui-button on-click="buy" skin="primary" disabled="{{!canBuy}}">立即购买</xui-button>\n                </section>\n            </div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!showOrder}}"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/body/apply/index",["exports","module","./apply","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/body/index",["exports","module","./package","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/body/package",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./package.tpl","san-xui","ai/config","../common/mixin","ai/common/enums","../common/tutorial/tutorial","../common/options"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=i["default"](a),p=i["default"](n),f=i["default"](o),m=i["default"](u),h=i["default"](d);module.exports=c["default"](e["default"]({template:p["default"],mixin:f["default"],components:{"xui-tab":r.Tab,"xui-tab-panel":r.TabPanel,tutorial:m["default"]},filters:h["default"].filters,initData:function(){var e;return{PackageType:l.PackageType,PrivateGraphicsType:l.PrivateGraphicsType,PrivateApplyStatus:l.PrivateApplyStatus,PrivateTestApplyStatus:l.PrivateTestApplyStatus,breadItem:[{title:"私有部署包管理"}],stepInfo:[{title:["提取指纹文件"],content:['请提前准备鉴权物理机，具体要求请参考<a target="_blank" href="'+s.Url.easypack.doc+'">这里</a>']},{title:["申请测试","正式购买"],content:["1. 选择模型配置","2. 填写基本项目信息","3. 提交指纹文件"]},{title:["提交申请","进行支付"],"class":"no-arrow"},{title:["下载部署包"],content:["1. 下载部署包",'2. 本地安装使用，请参考<a target="_blank" href="'+s.Url.body["package"].install+'">这里</a>进行安装']}],tips:["本地部署包为付费产品，可自用或集成为终端客户提供服务，需具备IT能力进行部署使用。","请提前使用公有云接口验证模型能力，并估算项目并发需求（QPS），提交测试申请后工作人员将在3个工作日内审批。",'测试完毕后，请<a target="_blank" href="'+s.Url.ticket+'~productId=158&questionId=346">提交工单</a>\n                联系百度工作人员，发起正式购买流程。'],canBuy:!1,currentType:l.PackageType.test,typeConfig:l.PackageType.toArray(),table:(e={},e[l.PackageType.test]=this.generateDataConfig(),e[l.PackageType.formal]=this.generateDataConfig(),e),pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]}}},generateDataConfig:function(){return{schema:[{name:"rowNumber",label:"序号"},{name:"id",label:"申请编号"},{name:"modelType",label:"申请模型"},{name:"gpuType",label:"显卡类型"},{name:"applyTime",label:"申请日期"},{name:"expireTime",label:"到期日期"},{name:"status",label:"状态",width:145},{name:"control",label:"操作"}],datasource:[],totalCount:0,pageSize:10,pageNo:1}},attached:function(){this.privateCanBuy(),this.handleType()},privateCanBuy:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.privateCanBuy({type:this.$get("aiAppType")}));case 2:(e=a.sent)||this.$set("currentType",l.PackageType.test),this.$set("canBuy",e);case 5:case"end":return a.stop()}},null,this)},toApply:function(t,a){var i=this.$get("currentType");this.$aiRedirect("package/"+(i===l.PackageType.test?"apply":"buy"),e["default"]({},t?{id:t}:{},a?{add:a}:{},{type:i}))}},h["default"].functions))}),define("ai/page/package/body/package.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content body-package-content">\n                <h2>私有部署包管理</h2>\n                <div class="app-list-page">\n                    <div class="tutorial">\n                        <div class="tips">\n                            可以部署到本地GPU服务器的「纯软件」人体识别模型包，支持主流Linux系统，适配最新NVIDIA GPU显卡；提供分布式高并发部署方案，适用于安防监控、园区管理等场景。\n                            <a target="_blank" href="{{Url[aiAppType].package.intro}}">查看详细介绍 ></a>\n                        </div>\n                        <tutorial stepInfo="{{stepInfo}}" tips="{{tips}}" />\n                    </div>\n                    <div class="package-list">\n                        <div class="package-title">人体私有化部署包授权列表</div>\n                        <xui-tab skin="card" on-change="changeTab" s-ref="tab" class="{{canBuy ? \'\' : \'can-not-buy\'}}">\n                            <xui-tab-panel title="{{item.text}}" s-for="item in typeConfig">\n                                <div class="apply-infos">\n                                    <div>\n                                        <xui-button skin="primary" on-click="toApply()">发起申请</xui-button>\n                                    </div>\n                                    <div>\n                                        <a target="_blank" href="{{Url[aiAppType].package.productIntro}}">产品介绍</a> | \n                                        <a target="_blank" href="{{Url[aiAppType].package.deploy}}">部署说明</a> | \n                                        <a target="_blank" href="{{Url[aiAppType].package.api}}">接口调用</a>\n                                    </div>\n                                </div>\n                                <xui-table\n                                    datasource="{{table[currentType].datasource}}"\n                                    schema="{{table[currentType].schema}}"\n                                    class="package-table"\n                                >\n                                    <template slot="c-modelType">\n                                        <div s-for="item in row.modelList">{{item.name}}({{item.count || \'-\'}})</div>\n                                    </template>\n                                    <template slot="c-gpuType">\n                                        {{row.gpuType | getLabelByValue(PrivateGraphicsType)}}\n                                    </template>\n                                    <template slot="c-applyTime">\n                                        {{row.applyTime | dateFormat(\'YYYY-MM-DD\')}}\n                                    </template>\n                                    <template slot="c-expireTime">\n                                        {{row.expireTime | dateFormat(\'YYYY-MM-DD\')}}\n                                    </template>\n                                    <template slot="c-status">\n                                        <span class="status {{row | convert(\'color\')}}" s-if="row.licenseType === PackageType.test">\n                                            {{row.status | getLabelByValue(PrivateTestApplyStatus)}}\n                                        </span>\n                                        <span class="status {{row | convert(\'color\')}}" s-if="row.licenseType === PackageType.formal">\n                                            {{row.status | getLabelByValue(PrivateApplyStatus)}}\n                                        </span>\n                                        <span class="tips {{row | convert(\'class\')}}">\n                                            <xui-tip skin="warning" message="{{row | convert(\'tips\')}}"/>\n                                        </span>\n                                    </template>\n                                    <template slot="c-control">\n                                        \x3c!-- 部署包生成中 --\x3e\n                                        <template s-if="row.status === PrivateApplyStatus.generating">--</template>\n                                        \x3c!-- 草稿 --\x3e\n                                        <a s-if="row.status === PrivateApplyStatus.draft" href="javascript:void(0);" on-click="toApply(row.id)">继续编辑</a>\n                                        \x3c!-- 查看详情（申请成功，审核中，审核通过，审核失败，购买成功，已过期 部署包生成失败）--\x3e\n                                        <div\n                                            s-if="row.status !== PrivateApplyStatus.draft && row.status !== PrivateApplyStatus.to_be_paid && row.status !== PrivateApplyStatus.generating"\n                                        >\n                                            <a href="javascript:void(0);" on-click="toDetail(row.id)">查看详情</a>\n                                        </div>\n                                        \x3c!-- 追加购买 --\x3e\n                                        <a href="javascript:void(0);" s-if="row.status === PrivateApplyStatus.bought" on-click="toApply(row.id, \'add\')">追加购买</a>\n                                        \x3c!-- 追加购买 需置灰--\x3e\n                                        <div class="gray" s-if="row.status === PrivateApplyStatus.review_success && row.licenseType === PackageType.formal">追加购买</div>\n                                        \x3c!-- 立即支付 --\x3e\n                                        <a s-if="row.status === PrivateApplyStatus.to_be_paid" target="_blank" href="/billing/#/order/list">立即支付</a>\n                                        \x3c!-- 下载部署包（申请成功，审核通过，购买成功）--\x3e\n                                        <div\n                                            s-if="row.status === PrivateApplyStatus.apply_success || row.status === PrivateApplyStatus.review_success || row.status === PrivateApplyStatus.bought"\n                                        >\n                                            <a href="{{row.downloadLink}}" target="_blank">下载部署包</a>\n                                        </div>\n                                        \x3c!-- 下载部署包（已过期 置灰）--\x3e\n                                        <div s-if="row.status === PrivateApplyStatus.expired" class="gray">\n                                            下载部署包\n                                        </div>\n                                    </template>\n                                </xui-table>\n                            </xui-tab-panel>\n                        </xui-tab>\n                        <div class="pager-row">\n                            <span class="pager-label">每页显示</span>\n                            <xui-select s-ref="select" on-change="onSizeChange($event)" datasource="{{pageSelect.datasource}}" value="{=table[currentType].pageSize=}" />\n                            <xui-pager on-change="onPagerChange($event)" size="{{table[currentType].pageSize}}" page="{=table[currentType].pageNo=}" count="{{table[currentType].totalCount}}" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/buyOffical/mixin",["exports","module","babel-runtime/regenerator"],function(exports,module,e){module.exports={inited:function(){this.privateCanBuy()},privateCanBuy:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ajax.privateCanBuy({type:this.$get("aiAppType")}));case 2:t.sent||this.$aiRedirect("package/index");case 4:case"end":return t.stop()}},null,this)}}}),define("ai/page/package/buyOffical/ocr/buyOffical",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./buyOffical.tpl","inf-ria/app/brpc","lodash","ai/components/index","../mixin"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](n),c=a["default"](r),p=a["default"](o);module.exports=l["default"]({template:u["default"],mixin:p["default"],components:{"no-side-head":s.NoSideHead},computed:{totalPrice:function(){return this.data.get("count")*this.data.get("unitPrice")}},initData:function(){return{breadItem:[{title:"私有部署包管理",url:"#/ai/"+this.aiAppType+"/package/index"},{title:"购买正式版"}],stepIndex:0,steps:[{text:"购买授权"},{text:"确认订单"},{text:"在线支付"}],showOrder:!1,count:1,unitPrice:0,modelName:"通用文字CPU-10QPS"}},attached:function(){this.getApiPrice()},handleInput:function(e,t){var a=e.value;a&&c["default"].isNumber(+a)&&(a=Math.floor(a),this.ref("numbertextline").data.set("value",a))},backToManage:function(){this.$aiRedirect("package/index")},getApiPrice:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.apiPrice({type:this.$get("aiAppType"),productType:"private"}));case 2:t=a.sent,this.$set("unitPrice",c["default"].find(t,{id:575}).price[0].cost);case 4:case"end":return a.stop()}},null,this)},getConfig:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.$get(),a=t.aiAppType,i=t.count,s.next=5,e["default"].awrap(this.ajax.privateApplyComplete({type:a}));case 5:return n=s.sent,r={type:a,productType:"private",items:[{applyId:n,apiId:575,count:i,timeUnit:"DAY"}]},s.abrupt("return",r);case 8:case"end":return s.stop()}},null,this)},getOrder:function(){var e=this.$get(),t=e.aiAppType,a=e.totalPrice,i=e.count,n=e.modelName;return{serviceType:"OCR",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/"+t+"/order/v2/confirm",price:a,items:[{serviceType:"AI_OCR",productType:"prepay",count:1,time:i+"年",price:a,unitPriceShow:e.unitPrice/1e4+"万/年",chargeType:["按量"],configuration:[n]}]}},orderConfirm:function(){var t,a,i;return e["default"].async(function(n){for(var r=this;;)switch(n.prev=n.next){case 0:if(!((+this.$get("totalPrice")||0)<=0)){n.next=3;break}return n.abrupt("return");case 3:return t=this.ref("confirm").__getESUI(),n.next=6,e["default"].awrap(this.getConfig());case 6:a=n.sent,t.on("action@prevPage",function(){r.$$set({stepIndex:0,showOrder:!1})}),i={config:a,order:this.getOrder()},d["default"].invokeService("billing://order_confirm",t,i).then(function(e){r.$$set({stepIndex:1,showOrder:!0})});case 10:case"end":return n.stop()}},null,this)}})}),define("ai/page/package/buyOffical/ocr/buyOffical.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <no-side-head\n            s-if="showOrder"\n            on-backToManage="backToManage"\n            stepIndex="{{stepIndex}}"\n            steps="{{steps}}"\n        >\n            <span slot="back-title">返回私有部署包管理</span>\n            <span slot="title">购买授权</span>\n        </no-side-head>\n        <app-content class="private-package-apply-all {{showOrder ? \'private-package-shop-cart\' : \'\'}}">\n            <breadcrumb items="{{breadItem}}" s-if="!showOrder"></breadcrumb>\n            <div class="list-content private-package-buy-ocr" s-if="!showOrder">\n                <h2>正式版授权购买</h2>\n                <section class="bottom-border">\n                    <xui-form>\n                        <xui-item label="模型：">\n                            {{modelName}}\n                        </xui-item>\n                        <xui-item label="申请类型：">\n                            正式部署包\n                        </xui-item>\n                        <xui-item label="授权有效期：">\n                            <xui-numbertextline\n                                s-ref="numbertextline"\n                                min="{{1}}"\n                                max="{{20}}"\n                                value="{=count=}"\n                                on-input="handleInput($event)" />\n                            年\n                        </xui-item>\n                        <xui-item label="购买费用：">\n                            {{totalPrice}}\n                        </xui-item>\n                    </xui-form>\n                </section>\n                <section>\n                    <div class="row right">\n                        <div class="row-title">实付金额：</div>\n                        <div class="row-content price sec-price">￥{{totalPrice}}</div>\n                    </div>\n                    <div class="row right">\n                        <a on-click="orderConfirm" href="javascript:void(0)" class="btn-to-pay">去支付</a>\n                    </div>\n                </section>\n            </div>\n            <ui-actionpanel s-ref="confirm" hidden="{{!showOrder}}"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/buyOffical/ocr/index",["exports","module","./buyOffical","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/package/common/baseInfos/baseInfos",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./baseInfos.tpl","ai/common/enums","./rules","../iconSection/index"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=n["default"](i),d=n["default"](r),c=n["default"](o),p=n["default"](l);module.exports=u["default"]({template:d["default"],components:{"icon-section":p["default"]},computed:{isSelfUse:function(){return this.data.get("formData.use")===s.PackageUse.self},rules:function(){return c["default"]({oldPhone:this.data.get("formData.oldPhone").replace(/\*/g,"\\*"),oldEmail:this.data.get("formData.oldEmail").replace(/\*/g,"\\*"),isSelfUse:this.data.get("isSelfUse")})}},initData:function(){return{config:{open:!1,save:!1},error:{},industryList:[],detail:"",applyId:"",useList:s.PackageUse.toArray().map(function(e){return e.value===s.PackageUse.customer?{value:e.value,text:e.text+"（为多个客户可享优惠价格）"}:e}),formData:{use:s.PackageUse.toArray()[0].value,oldPhone:"",oldEmail:"",contactName:"",contactPhone:"",contactEmail:"",contactPosition:"",customerIndustryId:"",customerName:"",businessScene:"",businessScale:""}}},attached:function(){var e=this;this.getIndustryList(),this.$get("isEdit")||this.$get("isAdd")||this.getApplyUserInfo(),this.watch("detail",function(t){e.handleDetail(t)})},onUseChange:function(e){var t=this;e.value===s.PackageUse.self&&this.nextTick(function(){t.ref("baseinfo-form").validateFormItem("customerIndustryId"),t.ref("baseinfo-form").validateFormItem("customerName")})},getApplyUserInfo:function(){var e;return t["default"].async(function(i){for(var n=this;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.privateUserInfo({type:this.$get("aiAppType")}));case 2:e=i.sent,a["default"](e).forEach(function(t){n.$set("formData."+t,e[t])}),this.$$set({"formData.oldPhone":e.contactPhone,"formData.oldEmail":e.contactEmail});case 5:case"end":return i.stop()}},null,this)},getIndustryList:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.privateIndustryList());case 2:e=a.sent,this.$set("industryList",e.map(function(e){var t=e.id;return{text:e.name,value:t}}));case 4:case"end":return a.stop()}},null,this)},handleDetail:function(e){var t=this;e&&(a["default"](this.$get("formData")).forEach(function(a){(e[a]||0===e[a])&&t.$set("formData."+a,e[a])}),["contactPhone","contactEmail"].forEach(function(a){e[a]&&t.$set("formData."+a.replace("contact","old"),t.$get("formData."+a))}),e.contactPhone&&this.$set("config.saved",!0))},next:function(){var a,i,n,r;return t["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t["default"].awrap(this.ref("baseinfo-form").validateForm());case 2:return a=this.$get(),i=a.formData,n=a.applyId,r=a.aiAppType,s.prev=6,s.next=9,t["default"].awrap(this.ajax.privateApplySaveProject(e["default"]({id:n,type:r},i)));case 9:this.$set("config",{open:!1,saved:!0}),this.fire("next"),s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](6),this.$toast("保存失败",{messageType:"error"}),s.t0.field&&this.$set("errors",s.t0.field);case 17:case"end":return s.stop()}},null,this,[[6,13]])},back:function(){this.$set("config.open",!1),this.fire("back")},changeVisible:function(){this.$get("isAdd")&&this.$set("config.open",!this.$get("config.open"))}})}),define("ai/page/package/common/baseInfos/baseInfos.tpl",[],function(){return'<template>\n    <h2 class="section-title">\n        <span class="{{isAdd ? \'hover\' : \'\'}}" on-click="changeVisible">\n            <icon-section config="{{config}}" />\n            填写项目信息\n        </span>\n    </h2>\n    <div s-if="config.open" class="section-content package-base-info">\n        <xui-form class="form" s-ref="baseinfo-form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}">\n            <h3 class="sec-title">\n                基本信息\n            </h3>\n            <xui-item label="联系人姓名" name="contactName" required>\n                <xui-textbox value="{=formData.contactName=}" placeholder="请输入联系人姓名" disabled="{{isAdd}}" />\n            </xui-item>\n            <xui-item label="联系电话" name="contactPhone" required>\n                <xui-textbox value="{=formData.contactPhone=}" placeholder="请输入联系电话" disabled="{{isAdd}}" />\n            </xui-item>\n            <xui-item label="联系邮箱" name="contactEmail" required>\n                <xui-textbox value="{=formData.contactEmail=}" placeholder="请输入联系邮箱" disabled="{{isAdd}}" />\n            </xui-item>\n            <xui-item label="工作职务" name="contactPosition" required>\n                <xui-textbox value="{=formData.contactPosition=}" placeholder="请输入工作职务" disabled="{{isAdd}}" />\n            </xui-item>\n            <xui-item label="申请用途" name="use" required>\n                <xui-boxgroup\n                    datasource="{{useList}}"\n                    value="{=formData.use=}"\n                    on-change="onUseChange"\n                    disabled="{{isAdd}}" \n                />\n            </xui-item>\n            <xui-item label="客户所在行业" name="customerIndustryId" required="{{!isSelfUse}}">\n                <xui-select\n                    datasource="{{industryList}}"\n                    value="{=formData.customerIndustryId=}"\n                    disabled="{{isAdd}}" \n                />\n            </xui-item>\n            <xui-item label="客户名称" name="customerName" required="{{!isSelfUse}}">\n                <xui-textbox value="{=formData.customerName=}" placeholder="请输入客户名称" disabled="{{isAdd}}" />\n            </xui-item>\n            <h3 class="sec-title">\n                场景信息\n            </h3>\n            <xui-item label="应用场景" name="businessScene" required>\n                <xui-textbox multiline value="{=formData.businessScene=}" placeholder="请您简要描述应用AI能力的业务场景、期望达到的效果等" width="385" height="165" disabled="{{isAdd}}" />\n            </xui-item>\n            <xui-item label="业务量级" name="businessScale" required>\n                <xui-textbox multiline value="{=formData.businessScale=}" placeholder="请您简要描述，每天处理的数据量级和所需的并发数" width="385" height="81" disabled="{{isAdd}}" />\n            </xui-item>\n            <xui-item s-if="{{!isAdd}}">\n                <xui-button skin="primary" on-click="next">保存并继续</xui-button>\n                <xui-button on-click="back">上一步</xui-button>\n            </xui-item>\n        </xui-form>\n    </div>\n</template>'}),define("ai/page/package/common/baseInfos/index",["exports","module","./baseInfos","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/common/baseInfos/rules",["exports","module","babel-runtime/helpers/extends","async-validator"],function(exports,module,e,t){module.exports=function(a){var i=a.oldPhone,n=a.oldEmail,r=a.isSelfUse,s=e["default"]({contactName:[{required:!0,message:"联系人姓名必填"},{max:10,message:"联系人姓名不能超过10个汉字"}],contactPhone:[{required:!0,message:"联系电话必填"},{pattern:RegExp("^("+i+"|\\d{7,14})$"),message:"请填写正确的手机号码格式"}],contactEmail:[{required:!0,message:"联系邮箱必填"},{pattern:RegExp("^("+n+'|(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))$'),message:"联系邮箱格式错误"}],contactPosition:[{required:!0,message:"工作职务必填"},{max:20,message:"工作职务不能超过20个汉字"}],use:[{required:!0,message:"申请用途必填"}],businessScene:[{required:!0,message:"应用场景必填"},{max:500,message:"应用场景不能超过500个汉字"}],businessScale:[{required:!0,message:"业务量级必填"},{max:200,message:"业务量级不能超过200个汉字"}]},r?{customerName:[{max:20,message:"客户名称不能超过20个汉字"}]}:{customerIndustryId:[{required:!0,message:"客户所在行业必填"}],customerName:[{required:!0,message:"客户名称必填"},{max:20,message:"客户名称不能超过20个汉字"}]});return new t["default"](s)}}),define("ai/page/package/common/detail/detail",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./detail.tpl","lodash","moment","ai/components/index","ai/common/enums","../faceDocs"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=a["default"](t),d=a["default"](i),c=a["default"](n),p=a["default"](r),f=a["default"](l);module.exports=u["default"]({template:d["default"],components:{"upload-item":s.UploadItem},filters:{getLabelByValue:function(e,t){return null==e?"-":t.getTextFromValue(e)},getCount:function(e){return 0===e?0:e||"--"},handleName:function(e){var t=this;if(e){return e.map(function(e){var a=e.name,i=e.count;return t.data.get("aiAppType")===o.AppType.face?a:a+"("+i+")"}).join("、")}return""}},computed:{breadItem:function(){return[{title:"私有部署包管理",url:"#/ai/"+this.data.get("aiAppType")+"/package/index~type="+this.data.get("type")},{title:"查看详情"}]},industryName:function(){var e=this.data.get("industryList"),t=this.data.get("detail");if(e.length&&t&&t.customerIndustryId){var a=c["default"].find(e,{id:t.customerIndustryId});return a?a.name:""}return""},canExtend:function(){var e=this.data.get("detail");return!!e&&e.extendCount<2},isFace:function(){return this.data.get("aiAppType")===o.AppType.face}},initData:function(){return{AppType:o.AppType,PrivateApplyStatus:o.PrivateApplyStatus,PrivateGraphicsType:o.PrivateGraphicsType,PrivatePerfomance:o.PrivatePerfomance,PackageType:o.PackageType,PackageUse:o.PackageUse,detail:"",industryList:"",docs:f["default"],showExtend:!1,extendExpireTime:""}},attached:function(){this.$get("id")||this.$aiRedirect("package/index",{type:this.$get("type")}),this.getIndustryList(),this.getApplyDetail()},getApplyDetail:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.privateApplyDetail({id:this.$get("id"),type:this.$get("aiAppType")}));case 2:t=a.sent,this.$set("detail",t);case 4:case"end":return a.stop()}},null,this)},getIndustryList:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.privateIndustryList({type:this.$get("aiAppType"),id:this.$get("id")}));case 2:t=a.sent,this.$set("industryList",t);case 4:case"end":return a.stop()}},null,this)},extend:function(){var t;return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.privateApplyExtend({type:this.$get("aiAppType"),id:this.$get("id")}));case 2:t=a.sent,this.$$set({showExtend:!0,extendExpireTime:p["default"](t).format("YYYY.MM.DD")});case 4:case"end":return a.stop()}},null,this)},cancel:function(){this.$set("showExtend",!1),this.getApplyDetail()},add:function(){this.$aiRedirect("package/buy",{id:this.$get("id"),add:"add",type:this.$get("type")})}})}),define("ai/page/package/common/detail/detail.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content private-package-detail">\n                <section>\n                    <h3 class="title">\n                        私有部署包查看详情\n                    </h3>\n                    <div class="apply-status">\n                        \x3c!-- 审核中 --\x3e\n                        <div s-if="PrivateApplyStatus.under_review === detail.status || (PrivateApplyStatus.generating === detail.status && PackageType.test === detail.licenseType)" class="review">\n                            <div class="review-icon"></div>\n                            <div class="status-text">正在审核中</div>\n                        </div>\n                        \x3c!-- 未通过 --\x3e\n                        <div s-if="PrivateApplyStatus.review_failed === detail.status || (PrivateApplyStatus.failed === detail.status && PackageType.test === detail.licenseType)">\n                            <div class="status-text">\n                                很抱歉，您的审核未通过，请重新提交申请或<a href="{{Url.ticket}}~productId=95&questionId=671" target="_blank">提交工单</a>联系百度工作人员\n                            </div>\n                        </div>\n                        \x3c!-- 部署包生成失败 --\x3e\n                        <div s-if="PrivateApplyStatus.failed === detail.status && PackageType.formal === detail.licenseType">\n                            <div class="status-text">\n                                很抱歉，您的部署包生成失败，请重新提交申请或<a href="{{Url.ticket}}~productId=95&questionId=671" target="_blank">提交工单</a>联系百度工作人员\n                            </div>\n                        </div>\n                        \x3c!-- 打包中 --\x3e\n                        <div s-if="PrivateApplyStatus.generating === detail.status && PackageType.formal === detail.licenseType">\n                            <div class="status-text">打包中，预计需要1min，请刷新页面后重试</div>\n                        </div>\n                        \x3c!-- 部署包下载 申请成功 购买成功 审核成功 --\x3e\n                        <div s-if="PrivateApplyStatus.review_success === detail.status || PrivateApplyStatus.apply_success === detail.status || PrivateApplyStatus.bought === detail.status">\n                            <div class="text-title">下载地址: </div><a target="_blank" href="{{detail.downloadLink}}">{{detail.downloadLink}}</a>\n                        </div>\n                        <div class="row first">\n                            <div class="text-title">参考文档：</div>\n                            <template s-if="{{isFace}}">\n                                <a target="_blank" href="{{docs[type].start}}">快速开始</a> | \n                                <a target="_blank" href="{{docs[type].doc}}">技术文档</a> | \n                                <a target="_blank" href="{{docs[type].problem}}">常见问题</a>\n                            </template>\n                            <template s-else>\n                                <a target="_blank" href="{{Url[aiAppType].package.productIntro}}">产品介绍</a> | \n                                <a target="_blank" href="{{Url[aiAppType].package.deploy}}">部署说明</a> | \n                                <a target="_blank" href="{{Url[aiAppType].package.api}}">接口调用</a>\n                            </template>\n                        </d>\n                        <div class="row" s-if="detail.applyTime && detail.expireTime">\n                            <div class="text-title">有效期：</div>\n                            {{detail.applyTime | dateFormat(\'YYYY-MM-DD\')}} 至 {{detail.expireTime | dateFormat(\'YYYY-MM-DD\')}}\n                        </div>\n                        <div s-if="detail.comment" class="row">\n                            <div class="text-title">备注：</div>\n                            {{detail.comment}}\n                        </div>\n                        \x3c!-- 延期申请 --\x3e\n                        <div s-if="{{type == PackageType.test && (PrivateApplyStatus.apply_success === detail.status || PrivateApplyStatus.expired === detail.status)}}" class="extend has-button">\n                            <xui-button on-click="extend" disabled="{{!canExtend}}" skin="primary">延期申请</xui-button>\n                            <p class="tip gray">注：延期申请适用于授权文件即将到期，需要延期申请。您还有<span class="{{canExtend ? \'blue\' : \'red\'}}">{{2 - detail.extendCount}}</span>次延期申请的次数，延期成功后更新鉴权物理机的License文件，即可延长有效期限</p>\n                        </div>\n                        \x3c!-- 追加购买 --\x3e\n                        <div s-if="{{type == PackageType.test && PrivateApplyStatus.review_success === detail.status}}" class="add has-button">\n                            <xui-button disabled="{{true}}" skin="primary">追加购买</xui-button>\n                            <p class="tip gray">注：若您需要对已购买的鉴权物理机追加显卡授权数量，请<a href="{{Url.ticket}}~productId=95&questionId=671" target="_blank">提交工单</a>联系百度工作人员</p>\n                        </div>\n                        <div s-if="{{PrivateApplyStatus.bought === detail.status}}" class="add has-button">\n                            <xui-button on-click="add" skin="primary">追加购买</xui-button>\n                            <p class="tip gray">注：若您需要对已购买的鉴权物理机追加显卡授权数量，请在这里追加购买</p>\n                        </div>\n                    </div>\n                </section>\n                <section>\n                    <xui-form class="form">\n                        <xui-item label="模型：" class="{{aiAppType === AppType.face ? \'\' : \'xui-item-long\'}}">{{detail.modelList | handleName}}</xui-item>\n                        <xui-item label="显卡类型：">{{detail.gpuType | getLabelByValue(PrivateGraphicsType)}}</xui-item>\n                        <xui-item label="性能规格：" s-if="{{aiAppType === AppType.face}}">{{detail.modelList[0].qps | getLabelByValue(PrivatePerfomance)}}</xui-item>\n                        <xui-item label="申请类型：">{{type | getLabelByValue(PackageType)}}部署包</xui-item>\n                        <xui-item label="申请时间：">{{detail.applyTime | dateFormat(\'YYYY.MM.DD\')}}</xui-item>\n                        <xui-item label="证书有效期：">{{detail.expireTime | dateFormat(\'YYYY.MM.DD\')}}</xui-item>\n                        <xui-item label="授权数量：" s-if="{{aiAppType === AppType.face}}">{{detail.modelList[0].count | getCount}}</xui-item>\n                        <xui-item label="联系人姓名：">{{detail.contactName}}</xui-item>\n                        <xui-item label="公司名称：" s-if="detail.company">{{detail.company}}</xui-item>\n                        <xui-item label="联系电话：">{{detail.contactPhone}}</xui-item>\n                        <xui-item label="联系邮箱：">{{detail.contactEmail}}</xui-item>\n                        <xui-item label="工作职务：">{{detail.contactPosition}}</xui-item>\n                        <xui-item label="申请用途：">{{detail.use | getLabelByValue(PackageUse)}}</xui-item>\n                        <xui-item label="客户所在行业：" s-if="detail.customerIndustryId">{{industryName}}</xui-item>\n                        <xui-item label="客户名称：" s-if="detail.customerName">{{detail.customerName}}</xui-item>\n                        <xui-item label="应用场景：" class="xui-item-long">{{detail.businessScene}}</xui-item>\n                        <xui-item label="业务量级：" class="xui-item-long">{{detail.businessScale}}</xui-item>\n                        <xui-item label="指纹文件：">\n                            <upload-item data="{{detail.fingerprint}}" show="{{true}}"></upload-item>\n                        </xui-item>\n                    </xui-form>\n                </section>\n            </div>\n            <xui-dialog open="{=showExtend=}" title="延期申请" s-ref="dialog" class="fack-package-extend-dialog">\n                <div class="content">\n                    <div class="success-icon"></div>\n                    <div>\n                        <p>延期成功，有效期延长至{{extendExpireTime}}</p>\n                        <p>请重新下载部署包并更新鉴权机License文件</p>\n                    </div>\n                </div>\n                <div slot="foot">\n                    <xui-button on-click="cancel" skin="primary">知道了</xui-button>\n                </div>\n            </xui-dialog>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/common/detail/index",["exports","module","./detail","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/common/faceDocs",["exports","module","ai/common/enums"],function(exports,module,e){var t;module.exports=(t={},t[e.PackageType.test]={start:"//cloud.baidu.com/doc/FACE/s/8k25rd0yj",doc:"//cloud.baidu.com/doc/FACE/s/bk25rd1ur",problem:"//cloud.baidu.com/doc/FACE/s/uk25rd1dz"},t[e.PackageType.formal]={start:"//cloud.baidu.com/doc/FACE/s/Yk2lol1rc",doc:"//cloud.baidu.com/doc/FACE/s/bk25rd1ur",problem:"//cloud.baidu.com/doc/FACE/s/uk25rd1dz"},t)}),define("ai/page/package/common/fingerprint/fingerprint",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./fingerprint.tpl","async-validator","ai/components/index","lodash","../iconSection/index"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](i),d=a["default"](n),c=a["default"](s),p=a["default"](o),f=d["default"]["default"];module.exports=l["default"]({template:u["default"],components:{"upload-item":r.UploadItem,"icon-section":p["default"]},messages:{"input-comp-success":function(e){var t=e.value;t&&this.saveFile(t)}},initData:function(){return{canApply:!1,errors:{},rules:new f({device:[{required:!0,message:"请上传指纹文件"}]}),isAdd:!1,isFormal:!1,detail:"",config:{open:!1,saved:!1},formData:{device:null},fileUpload:{url:"/api/ai/s/package/fileUpload",fingerprintExtraData:{kind:"packageDevice"}}}},attached:function(){var e=this;this.watch("detail",function(t){e.handleDetail(t)}),this.$get("isAdd")?this.fire("changeCanBuy",!0):(this.watch("formData.device",function(t){e.$set("canApply",!!t),e.fire("changeCanBuy",!!t&&e.$get("config.open"))}),this.watch("config.open",function(t){e.fire("changeCanBuy",!!e.$get("formData.device")&&!!t)}))},handleDetail:function(e){e&&(c["default"].isEmpty(e.fingerprint)||this.$$set({"formData.device":e.fingerprint,"config.saved":!0,canApply:!0}))},saveFile:function(t){var a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=this.$get(),i=a.applyId,n=a.aiAppType,r.prev=3,r.next=6,e["default"].awrap(this.ajax.privateApplySaveFingerprint({id:i,type:n,fileId:t.id}));case 6:return this.$set("canApply",!0),r.abrupt("return",!0);case 10:return r.prev=10,r.t0=r["catch"](3),this.$set("canApply",!1),this.$toast("保存失败",{messageType:"error"}),r.t0.field&&this.$set("errors",r.t0.field),r.abrupt("return",!1);case 16:case"end":return r.stop()}},null,this,[[3,10]])},next:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ref("fingerprint-form").validateForm());case 2:this.$set("config",{open:!1,saved:!0}),this.fire("next");case 4:case"end":return t.stop()}},null,this)},back:function(){this.$set("config.open",!1),this.fire("back")},changeVisible:function(){this.$get("isAdd")&&this.$set("config.open",!this.$get("config.open"))}})}),define("ai/page/package/common/fingerprint/fingerprint.tpl",[],function(){return'<template>\n    <h2 class="section-title">\n        <span class="{{isAdd ? \'hover\' : \'\'}}" on-click="changeVisible">\n            <icon-section config="{{config}}" />\n            上传指纹文件\n        </span>\n    </h2>\n    <div s-if="config.open" class="section-content package-fingerprint">\n        <xui-form class="form"  s-ref="fingerprint-form" formData="{{formData}}" rules="{{rules}}" errors="{=errors=}">\n            <xui-item label="上传指纹文件：" name="device" required>\n                <p>如果您有多个鉴权物理机需要分开授权，请为每个授权物理机发起单独申请</p>\n                <upload-item\n                    url="{{fileUpload.url}}"\n                    extraData="{{fileUpload.fingerprintExtraData}}"\n                    data="{=formData.device=}"\n                    show="{{isAdd}}"\n                />\n            </xui-item>\n            <xui-item class="device-tips" name="tips">\n                <span>指纹提取工具</span>\n                <a target="_blank" href="{{Url.easypack.deviceTool}}">下载</a> |\n                <a target="_blank" href="{{Url.easypack.doc}}">使用说明</a> |\n                <a target="_blank" href="{{Url.easypack.doc}}">常见问题说明</a>\n            </xui-item>\n            <xui-item s-if="!isFormal">\n                <xui-button skin="primary" on-click="next" disabled="{{!canApply}}">提交申请</xui-button>\n                <xui-button on-click="back">上一步</xui-button>\n            </xui-item>\n        </xui-form>\n    </div>\n</template>'}),define("ai/page/package/common/fingerprint/index",["exports","module","./fingerprint","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/common/iconSection/iconSection",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n<template>\n    <xui-icon s-if="!config.open && !config.saved" name="arrow-right" />\n    <xui-icon s-if="!config.open && config.saved" name="closed" />\n    <xui-icon s-if="config.open" name="down-arrow" />\n</template>\n',initData:function(){return{config:{open:!1,saved:!1}}}})}),define("ai/page/package/common/iconSection/index",["exports","module","./iconSection","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/common/index",["exports","module","./fingerprint/index","babel-runtime/helpers/interop-require-default","./iconSection/index","./baseInfos/index"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports={fingerprintSection:n["default"],iconSection:r["default"],baseInfos:s["default"]}}),define("ai/page/package/common/mixin",["exports","module","ai/common/enums"],function(exports,module,e){module.exports={inited:function(){var e=this;this.on("getQulificationStatus",function(){return e.checkQualificationStatus()})},checkQualificationStatus:function(){~this.$get("qualification").state.indexOf(e.QualificationStatus.ENTERPRISE_CERTIFIED)||this.$aiRedirect("package/qualification/index")}}}),define("ai/page/package/common/options",["exports","module","babel-runtime/regenerator","lodash","babel-runtime/helpers/interop-require-default","ai/common/enums","ai/common/util"],function(exports,module,e,t,a,i,n){var r=a["default"](t);module.exports={filters:{getLabelByValue:function(e,t){return null==e?"-":t.getTextFromValue(e)},convert:function(e,t){var a=e.licenseType===i.PackageType.test?i.PrivateTestApplyStatus.toArray():i.PrivateApplyStatus.toArray(),n=r["default"].find(a,{value:e.status});return"color"===t?n.color||"":"tips"===t?n.tips||"":"class"===t?n.tips?"":"hidden":void 0}},functions:{changeTab:function(e){var t=this,a=e.item,n=i.PackageType.getValueFromText(a.text);this.$set("currentType",n),this.$get("table."+n+".datasource").length||this.fetchList(),this.nextTick(function(){var e=t.$get("table."+n+".pageSize");t.ref("select").selectItem("",{value:e})})},onPagerChange:function(e){var t=e.pageNo;this.$set("table."+this.$get("currentType")+".pageNo",t),this.fetchListDebounce()},onSizeChange:function(e){var t=e.value;this.$set("table."+this.$get("currentType")+".pageSize",t),this.$set("table."+this.$get("currentType")+".pageNo",1),this.fetchListDebounce()},handleType:function(){var e=this.$get(),t=e.type,a=e.currentType,s=e.typeConfig;if(this.watch("currentType",function(e){n.changeHash({type:e})}),t&&s.some(function(e){return e.value===+t})&&+t!==a){var o=i.PackageType.getTextFromValue(+t);this.changeTab({item:{text:o}}),this.ref("tab").onTabClick({text:o},r["default"].findIndex(s,{value:+t}))}else this.fetchList()},fetchListDebounce:r["default"].debounce(function(){this.fetchList()},50),fetchList:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.$get("currentType"),a=this.$get("table."+t),i=a.pageNo,n=a.pageSize,s.next=6,e["default"].awrap(this.ajax.privatePackageList({licenseType:t,type:this.$get("aiAppType"),pageNo:i,pageSize:n}));case 6:r=s.sent,this.handleData(r);case 8:case"end":return s.stop()}},null,this)},handleData:function(e){var t,a=this.$get("currentType");e.items.forEach(function(t,a){t.rowNumber=(e.pageNo-1)*e.pageSize+a+1}),this.$$set((t={},t["table."+a+".datasource"]=e.items,t["table."+a+".totalCount"]=e.total,t))},toDetail:function(e){this.$aiRedirect("package/detail",{id:e,type:this.$get("currentType")})},reApply:function(t){return e["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e["default"].awrap(this.ajax.privateSubmit({id:t,type:this.$get("aiAppType")}));case 2:this.fetchListDebounce();case 3:case"end":return a.stop()}},null,this)}}}}),define("ai/page/package/common/tutorial/tutorial",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./tutorial.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],computed:{tutorialToggleLabel:function(){return this.data.get("tutorialVisible")?"收起教程":"展开教程"}},initData:function(){return{tutorialVisible:"1"===window.localStorage.getItem(this.aiAppType.toUpperCase()+"_PACKAGE_TUTORIAL_HIDDEN"),stepInfo:[],tips:[]}},toggleTutorial:function(){var e=this.$get("tutorialVisible"),t=this.$get("aiAppType").toUpperCase()+"_PACKAGE_TUTORIAL_HIDDEN";e?window.localStorage.setItem(t,"0"):window.localStorage.setItem(t,"1"),this.$set("tutorialVisible",!e)}})}),define("ai/page/package/common/tutorial/tutorial.tpl",[],function(){return'<div class="private-package-tutorial">\n    <div class="tutorial-title">\n        申请流程\n        <a href="javascript:void(0)" on-click="toggleTutorial">{{ tutorialToggleLabel }}</a>\n    </div>\n    <div s-if="tutorialVisible" class="tutorial-detail-wrapper">\n        <ol class="tutorial-detail">\n            <li s-for="item in tips">\n                {{item | raw}}\n            </li>\n        </ol>\n        <div class="steps">\n            <div class="step" s-for="step in stepInfo">\n                <div class="title">\n                    <div class="step-title {{step.title.length === 1 ? \'has-top\' : \'\'}} {{step.class}}" s-for="title in step.title">\n                        {{title}}\n                    </div>\n                </div>\n                <div class="step-detail" s-if="step.content">\n                    <ul>\n                        <li s-for="content in step.content">\n                            {{content | raw}}\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),define("ai/page/package/face/apply/apply",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/object/keys","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./apply.tpl","inf-ria/app/brpc","lodash","moment","san-xui","ai/components/index","ai/common/enums","ai/config/constants","../../common/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=n["default"](i),h=n["default"](r),g=n["default"](s),v=n["default"](o),x=n["default"](l),b=[{},{ref:"baseInfos"},{ref:"fingerprint"}];module.exports=m["default"]({template:h["default"],components:{"xui-radioselect":u.RadioSelect,"no-side-head":d.NoSideHead,"fingerprint-section":f.fingerprintSection,"icon-section":f.iconSection,"base-infos":f.baseInfos},filters:{getLabelByValue:function(e,t){return null==e?"-":t.getTextFromValue(e)}},computed:{breadItem:function(){return[{title:"私有部署包管理",url:"#/ai/"+this.data.get("aiAppType")+"/package/index~type="+this.data.get("type")},{title:"发起申请"}]},isFormal:function(){return+this.data.get("type")===c.PackageType.formal},title:function(){return this.data.get("isFormal")?"购买正式部署包":"申请测试部署包"},apiId:function(){var e=this.data.get("qpsList"),t=this.data.get("qps");if(e.length&&t){var a=v["default"].find(e,{value:t});return a?a.apiId:""}return""},expireTime:function(){return this.data.get("isAdd")&&this.data.get("detail")||this.data.get("isFormal")?[p.SDK_FORMAL_END_TIME]:[x["default"]().format("YYYY.MM.DD"),x["default"]().add(2,"month").format("YYYY.MM.DD")]},isEdit:function(){return!!this.data.get("id")&&!this.data.get("add")},isAdd:function(){return!!this.data.get("add")&&!!this.data.get("id")},totalPrice:function(){return this.data.get("unitPrice")*this.data.get("realCount")},realCount:function(){return this.data.get("isAdd")?this.data.get("addCount"):this.data.get("modelData.count")},unitPrice:function(){var e=this.data.get("priceList"),t=this.data.get("apiId");return e.length&&t?v["default"].find(e,{id:+t}).price[0].cost:0},gpuList:function(){var t=this.data.get("modelList"),a=this.data.get("modelData.model");return a?v["default"].find(t,{modelId:a}).gpuList.map(function(t){return e["default"]({},t,{text:t.gpuName,value:t.gpuType})}):[]},qpsList:function(){var e=this.data.get("gpu"),a=this.data.get("gpuList"),i=v["default"].find(a,{gpuType:e});return a.length&&e&&i?t["default"](i.qps).map(function(e){return{text:c.PrivatePerfomance.getTextFromValue(e),value:+e,apiId:i.qps[e]}}):[]}},initData:function(){return{PrivatePerfomance:c.PrivatePerfomance,detail:"",gpu:"",qps:"",steps:[{text:"购买授权"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],stepIndex:0,currentStep:0,priceList:[],showOrder:!1,addCount:1,modelList:[],modelData:{model:"",count:1},modelConfig:{open:!0,saved:!1},canBuy:!1}},attached:function(){return a["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return~[c.PackageType.formal,c.PackageType.test].indexOf(+this.$get("type"))||this.$set("type",c.PackageType.test),this.getApiPrice(),e.next=4,a["default"].awrap(this.getModelList());case 4:if(!this.$get("isEdit")&&!this.$get("isAdd")){e.next=9;break}return this.$set("applyId",+this.$get("id")),e.next=8,a["default"].awrap(this.getApplyDetail());case 8:this.$get("isAdd")&&this.$set("canBuy",!0);case 9:this.initModelInfo(),this.watchs();case 11:case"end":return e.stop()}},null,this)},initModelInfo:function(){var e=this.$get("gpuList")[0].gpuType;this.$get("isEdit")||this.$get("isAdd")?e=this.$get("gpu"):this.$set("gpu",e);var t=this.$get("qpsList");this.$get("isEdit")||this.$get("isAdd")||this.$set("qps",t[0].value)},watchs:function(){var e=this;this.watch("gpuList",function(t){e.$set("gpu",t.length?t[0].gpuType:"")}),this.watch("qpsList",function(t){e.$set("qps",t.length?t[0].value:"")})},getModelList:function(){var t;return a["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a["default"].awrap(this.ajax.privateModelList({type:this.$get("aiAppType")}));case 2:t=i.sent,this.$$set({modelList:t.map(function(t){return e["default"]({},t,{text:t.modelName,value:t.modelId})}),"modelData.model":t[0].modelId});case 4:case"end":return i.stop()}},null,this)},getApiPrice:function(){var e;return a["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].awrap(this.ajax.apiPrice({type:this.$get("aiAppType"),productType:"private"}));case 2:e=t.sent,this.$set("priceList",e);case 4:case"end":return t.stop()}},null,this)},getApplyDetail:function(){var e;return a["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a["default"].awrap(this.ajax.privateApplyDetail({id:this.$get("applyId"),type:this.$get("aiAppType")}));case 2:if(e=t.sent,this.$set("detail",e),!this.$get("isEdit")){t.next=8;break}if(e.licenseType===+this.$get("type")&&e.status===c.PrivateApplyStatus.draft){t.next=8;break}return this.jumpToList(),t.abrupt("return");case 8:if(!this.$get("isAdd")){t.next=12;break}if(e.licenseType===+this.$get("type")&&+this.$get("type")===c.PackageType.formal&&e.status===c.PrivateApplyStatus.bought){t.next=12;break}return this.jumpToList(),t.abrupt("return");case 12:this.$$set({qps:e.modelList[0].qps,gpu:e.gpuType,"modelData.model":e.modelList[0].id,"modelData.count":e.modelList[0].count});case 13:case"end":return t.stop()}},null,this)},handleInput:function(e){var t=e.value;t&&v["default"].isNumber(+t)&&(t=Math.floor(t),this.ref("number-text-line").data.set("value",t),this.$set("modelData.count",t))},handleInputAdd:function(e){var t=e.value;t&&v["default"].isNumber(+t)&&(t=Math.floor(t),this.ref("number-text-line-add").data.set("value",t),this.$set("addCount",t))},next:v["default"].debounce(function(){var e,t,i,n,r,s,o,l,u,d,c;return a["default"].async(function(p){for(;;)switch(p.prev=p.next){case 0:if(e=this.$get(),t=e.applyId,i=e.type,n=e.modelData,r=e.qps,s=e.currentStep,o=e.gpu,l=e.aiAppType,u=e.isFormal,0!==s){p.next=23;break}return d={id:t||0,licenseType:+i,modelList:[{id:n.model,qps:r,count:n.count}],gpuType:o,type:l},p.prev=11,p.next=14,a["default"].awrap(this.ajax.privateApplySaveModel(d));case 14:c=p.sent,this.$$set({applyId:c,"modelConfig.saved":!0,"modelConfig.open":!1,currentStep:s+1}),this.ref(b[1].ref).$set("config.open",!0),p.next=22;break;case 19:p.prev=19,p.t0=p["catch"](11),this.$toast("保存失败",{messageType:"error"});case 22:return p.abrupt("return");case 23:if(s!==b.length-1){p.next=31;break}if(!u){p.next=27;break}return this.$set("canBuy",!0),p.abrupt("return");case 27:return p.next=29,a["default"].awrap(this.ajax.privateSubmit({id:t,type:l}));case 29:return this.$aiRedirect("package/detail",{id:t,type:i}),p.abrupt("return");case 31:this.ref(b[s+1].ref).$set("config.open",!0),this.$set("currentStep",s+1);case 33:case"end":return p.stop()}},null,this,[[11,19]])},500),back:function(){var e=this.$get("currentStep");1===e?this.$set("modelConfig.open",!0):this.ref(b[e-1].ref).$set("config.open",!0),this.$set("currentStep",e-1)},backToManage:function(){this.$aiRedirect("package/index",{type:this.$get("type")})},buy:function(){return a["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$get("isAdd")){e.next=11;break}return e.prev=1,e.next=4,a["default"].awrap(this.ajax.privateApplyComplete({id:this.$get("applyId"),type:this.$get("aiAppType")}));case 4:this.orderConfirm(),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:e.next=12;break;case 11:this.orderConfirm();case 12:case"end":return e.stop()}},null,this,[[1,7]])},orderConfirm:function(){var e=this,t=this.$get(),a=t.aiAppType,i=t.qps,n=t.applyId,r=t.expireTime,s=t.totalPrice,o=t.Url,l=t.realCount,u=t.gpu,d=t.modelData,p=t.apiId;if(!(s<0||l<1)){var f=this.ref("confirm").__getESUI();f.on("action@prevPage",function(){e.$$set({stepIndex:0,showOrder:!1})});var m={config:{type:a,productType:"private",items:[{apiId:p,applyId:n,timeUnit:"DAY",count:l,gpuType:u,modelId:d.model,modelCount:l,modelQps:i}]},order:{serviceType:"FACE",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/"+a+"/order/v2/confirm",price:s,items:[{serviceType:"AI_FACE",productType:"prepay",count:l,time:"有效期至"+r[0],price:s,unitPriceShow:"见人脸私有化价格",unitPriceUrl:o.face["private"],chargeType:["按量"],configuration:[c.PrivatePerfomance.getTextFromValue(i)]}]}};g["default"].invokeService("billing://order_confirm",f,m).then(function(t){e.$$set({stepIndex:1,showOrder:!0})})}},jumpToList:function(){this.$aiRedirect("package/index",{type:this.$get("type")})},changeVisible:function(){this.$get("isAdd")&&this.$set("modelConfig.open",!this.$get("modelConfig.open"))},changeCanBuy:function(e){this.$set("canBuy",e)}})}),define("ai/page/package/face/apply/apply.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <no-side-head\n            s-if="showOrder"\n            on-backToManage="backToManage"\n            stepIndex="{{stepIndex}}"\n            steps="{{steps}}"\n        >\n            <span slot="back-title">返回私有部署包管理</span>\n            <span slot="title">购买授权</span>\n        </no-side-head>\n        <app-sidebar s-if="{{!isFormal}}"/>\n        <app-content class="face-package-apply-all">\n            <breadcrumb items="{{breadItem}}" s-if="!showOrder"></breadcrumb>\n            <div class="list-content face-package-apply" s-if="!showOrder">\n                <h2>{{title}}</h2>\n                <section>\n                    <h2 class="section-title">\n                        <span class="{{isAdd ? \'hover\' : \'\'}}" on-click="changeVisible">\n                            <icon-section config="{{modelConfig}}" />\n                            选择模型配置\n                        </span>\n                    </h2>\n                    <div s-if="modelConfig.open" class="section-content">\n                        <h3 class="sec-title">\n                            选择模型\n                        </h3>\n                        <xui-form class="form">\n                            <xui-item required label="模型：">\n                                <xui-radioselect\n                                    disabled="{{isAdd}}"\n                                    value="{=modelData.model=}"\n                                    datasource="{{modelList}}" />\n                                <p class="tip gray">\n                                    通用版适用于人脸私有化通用场景，提供人脸检测、人脸比对、人脸搜索、活体检测等基础功能，支持百万级超大型人脸库\n                                </p>              \n                                <p class="tip gray">\n                                    安防版针对用摄像头大角度俯拍等场景进行了优化，适用于安防监控等场景\n                                </p>              \n                            </xui-item>\n                            <xui-item required label="显卡类型：">\n                                <xui-radioselect\n                                    disabled="{{isAdd}}"\n                                    value="{=gpu=}"\n                                    datasource="{{gpuList}}" />\n                            </xui-item>\n                            <xui-item required label="性能规格：">\n                                <xui-boxgroup\n                                    disabled="{{isAdd}}"\n                                    s-if="{{qpsList.length > 1}}"\n                                    box-type="radio"\n                                    value="{=qps=}"\n                                    datasource="{{qpsList}}" />\n                                <div s-else>\n                                    {{qps | getLabelByValue(PrivatePerfomance)}}\n                                </div>\n                                <p class="tip gray">\n                                    注：选型及配置请参考<a target="_blank" href="{{Url.face.package.device}}">硬件配置及推荐文档</a>，\n                                    如果使用其他他型号显卡或使用CPU，请<a href="{{Url.ticket}}~productId=95&questionId=671" target="_blank">提交工单</a>咨询\n                                </p>\n                            </xui-item>\n                            <xui-item label="单价：" s-if="{{isFormal}}">\n                                ￥{{unitPrice}}\n                                <p class="tip grey">\n                                    若想了解价格整体信息请参考<a target="_blank" href="{{Url.face.private}}">价格说明文档</a>\n                                </p>\n                            </xui-item>\n                        </xui-form>\n                        <h3 class="sec-title">\n                            授权信息\n                        </h3>\n                        <xui-form class="form">\n                            <xui-item label="申请类型：">           \n                                {{isFormal ? \'正式\' : \'测试\'}}部署包\n                            </xui-item>\n                            <xui-item label="证书有效期：">           \n                                {{expireTime[0]}}{{expireTime.length > 1 ? \' - \' + expireTime[1] : \'\'}}\n                            </xui-item>\n                            <template s-if="{{!isAdd}}">\n                                <xui-item label="授权数量" required>\n                                    <xui-numbertextline s-ref="number-text-line" value="{=modelData.count=}" min="{{1}}" max="{{50}}" on-input="handleInput"/>\n                                </xui-item>\n                                <xui-item>\n                                    <xui-button skin="primary" on-click="next">保存并继续</xui-button>\n                                </xui-item>\n                            </template>\n                            <template s-else>\n                                <xui-item label="已授权数量">\n                                    {{modelData.count}}\n                                </xui-item>\n                                <xui-item label="追加购买数量" required>\n                                    <xui-numbertextline s-ref="number-text-line-add" value="{=addCount=}" min="{{1}}" max="{{50}}" on-input="handleInputAdd"/>\n                                </xui-item>\n                            </template>\n                        </xui-form>\n                    </div>\n                </section>\n                <section>\n                    <base-infos\n                        isAdd="{{isAdd}}"\n                        isEdit="{{isEdit}}"\n                        detail="{{detail}}"\n                        applyId="{{applyId}}"\n                        on-next="next"\n                        on-back="back"\n                        s-ref="baseInfos"\n                    />\n                </section>\n                <section>\n                    <fingerprint-section\n                        isAdd="{{isAdd}}"\n                        isFormal="{{isFormal}}"\n                        detail="{{detail}}"\n                        applyId="{{applyId}}"\n                        on-next="next"\n                        on-back="back"\n                        on-changeCanBuy = "changeCanBuy"\n                        s-ref="fingerprint"\n                    />\n                </section>\n                <section s-if="isFormal" class="buy">\n                    <div>\n                        <span>实付金额：</span>\n                        <span class="price">￥{{totalPrice}}</span>\n                    </div>\n                    <xui-button on-click="buy" skin="primary" disabled="{{!canBuy}}">立即购买</xui-button>\n                </section>\n            </div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!showOrder}}"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/face/apply/index",["exports","module","./apply","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/face/dialogs/index",["exports","module","./notice/index","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports={notice:a["default"]}}),define("ai/page/package/face/dialogs/notice/index",["exports","module","./notice","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/face/dialogs/notice/notice",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./notice.tpl","ai/config/constants","ai/common/enums"],function(exports,module,e,t,a,i,n){var r=t["default"](e),s=t["default"](a);module.exports=r["default"]({template:s["default"],initData:function(){return{open:!1,checked:!1,type:n.PackageType.test}},setNotice:function(){this.$get("checked")&&window.localStorage.setItem(i.FACE_PACKAGE_TEST_APPLY_NOTICE,"1"),this.$aiRedirect("package/"+(this.$get("type")===n.PackageType.test?"apply":"buy"),{type:this.$get("type")})}})}),define("ai/page/package/face/dialogs/notice/notice.tpl",[],function(){return'<div>\n    <xui-dialog open="{=open=}" width="890" title="申请前需知" class="face-package-test-apply-notice">\n        <p>提交申请前请提前准备好鉴权物理机，提取好指纹文件后再进行申请</p>\n        <p class="red">不同鉴权物理机的授权请分开申请</p>\n        <ul>\n            <li>1.若您所有的GPU显卡都关联在同一个鉴权物理机上，只需提交一个物理机指纹文件即可（参考图一）</li>\n            <li>2.若您的GPU显卡关联在不同鉴权物理机上，则需对每个鉴权物理机进行单独申请（参考图二）</li>\n        </ul>\n        <p class="grey">注意:指纹文件不要压缩，名称不要带有中文</p>\n        <div class="images">\n            <div class="img-all">\n                <div class="img one"></div>\n                <p class="grey img-name">\n                    图一：提交一个申请，上传一个指纹文件\n                </p>\n            </div>\n            <div class="img-all">\n                <div class="img two"></div>\n                <p class="grey img-name">\n                    图二：提交两个申请，指纹文件单独提交\n                </p>\n            </div>\n        </div>\n        <div slot="foot">\n            <div class="foot">\n                <xui-checkbox checked="{=checked=}" title="不再提示" />\n                <xui-button skin="primary" on-click="setNotice">知道了</xui-button>\n            </div>\n        </div>\n    </xui-dialog>\n</div>'}),define("ai/page/package/face/index",["exports","module","./package","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/face/package",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./package.tpl","ai/config/constants","../common/mixin","ai/config","san-xui","ai/common/enums","./dialogs/index","../common/faceDocs","../common/tutorial/tutorial","../common/options"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=i["default"](a),h=i["default"](n),g=i["default"](s),v=i["default"](c),x=i["default"](p),b=i["default"](f);module.exports=m["default"](e["default"]({template:h["default"],mixin:g["default"],components:{"xui-tab":l.Tab,"xui-tab-panel":l.TabPanel,"notice-dialog":d.notice,tutorial:x["default"]},filters:b["default"].filters,computed:{canApply:function(){if(this.data.get("currentType")===u.PackageType.formal)return!0;var e=this.data.get("testApplyInfo"),t=e.testTotalCount,a=e.testUsedCount;return!!t&&t-a>0},needNoticd:function(){return!window.localStorage.getItem(r.FACE_PACKAGE_TEST_APPLY_NOTICE)}},initData:function(){var e;return{PackageType:u.PackageType,PrivateGraphicsType:u.PrivateGraphicsType,PrivatePerfomance:u.PrivatePerfomance,PrivateApplyStatus:u.PrivateApplyStatus,PrivateTestApplyStatus:u.PrivateTestApplyStatus,breadItem:[{title:"私有部署包管理"}],stepInfo:[{title:["提取指纹文件"],content:['请提前准备鉴权物理机，具体要求请参考<a target="_blank" href="'+o.Url.easypack.doc+'">这里</a>']},{title:["申请测试","正式购买"],content:["1. 选择模型配置","2. 填写基本项目信息","3. 提交指纹文件"]},{title:["提交申请","进行支付"],"class":"no-arrow"},{title:["下载部署包"],content:["1. 下载部署包",'2. 本地安装使用，请参考<a target="_blank" href="'+o.Url.face["package"].install+'">这里</a>进行安装']}],tips:["本地部署包为部署在企业内部服务器端的AI模型部署包，可部署在本地CPU、GPU服务器，支持主流Linux操作系统。","本地部署包为付费项目，可自用或集成为客户使用，需具备IT能力进行部署使用。","请提前使用公有云接口验证能力及估算所需并发数（QPS）。"],currentType:u.PackageType.test,typeConfig:u.PackageType.toArray(),table:(e={},e[u.PackageType.test]=this.generateDataConfig(),e[u.PackageType.formal]=this.generateDataConfig(),e),pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]},testApplyInfo:{},docs:v["default"]}},generateDataConfig:function(){return{schema:[{name:"rowNumber",label:"序号"},{name:"id",label:"申请编号"},{name:"modelType",label:"申请模型"},{name:"modelNum",label:"授权数量"},{name:"gpuType",label:"显卡类型"},{name:"qps",label:"性能规格"},{name:"applyTime",label:"申请日期"},{name:"expireTime",label:"到期日期"},{name:"status",label:"状态",width:145},{name:"control",label:"操作"}],datasource:[],totalCount:0,pageSize:10,pageNo:1}},attached:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:this.getPrivateApplyInfo(),this.handleType();case 2:case"end":return e.stop()}},null,this)},getPrivateApplyInfo:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.privateApplyInfo({type:this.$get("aiAppType"),licenseType:u.PackageType.test}));case 2:e=a.sent,this.$set("testApplyInfo",e);case 4:case"end":return a.stop()}},null,this)},toApply:function(t,a){if(t||a||!this.$get("needNoticd")){var i=this.$get("currentType");this.$aiRedirect("package/"+(i===u.PackageType.test?"apply":"buy"),e["default"]({},t?{id:t}:{},a?{add:a}:{},{type:i}))}else this.ref("notice-dialog").$$set({open:!0,type:this.$get("currentType")})}},b["default"].functions))}),define("ai/page/package/face/package.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content face-package-content">\n                <h2>私有部署包管理</h2>\n                <div class="app-list-page">\n                    <div class="tutorial">\n                        <tutorial stepInfo="{{stepInfo}}" tips="{{tips}}" />\n                    </div>\n                    <div class="package-list">\n                        <div class="package-title">人脸私有化部署包授权列表</div>\n                        <xui-tab skin="card" on-change="changeTab" s-ref="tab">\n                            <xui-tab-panel title="{{item.text}}" s-for="item in typeConfig">\n                                <div class="apply-infos">\n                                    <div>\n                                        <xui-button disabled="{{!canApply}}" skin="primary" on-click="toApply()">发起申请</xui-button>\n                                        <template s-if="currentType === PackageType.test">\n                                            <template s-if="canApply">\n                                                <span>\n                                                    可申请次数：{{testApplyInfo.testTotalCount}}\n                                                </span>\n                                                <span>\n                                                    已申请次数：{{testApplyInfo.testUsedCount}}\n                                                </span>\n                                            </template>\n                                            <span s-else>\n                                                若您需要更多的测试申请数量，请<a href="{{Url.ticket}}" target="_blank">提交工单</a>联系百度工作人员\n                                            </span>\n                                        </template>\n                                    </div>\n                                    <div>\n                                        参考文档：\n                                        <a target="_blank" href="{{docs[currentType].start}}">快速开始</a> | \n                                        <a target="_blank" href="{{docs[currentType].doc}}">技术文档</a> | \n                                        <a target="_blank" href="{{docs[currentType].problem}}">常见问题</a>\n                                    </div>\n                                </div>\n                                <xui-table\n                                    datasource="{{table[currentType].datasource}}"\n                                    schema="{{table[currentType].schema}}"\n                                    class="package-table"\n                                >\n                                    <template slot="c-modelType">\n                                        <div s-for="item in row.modelList">{{item.name}}</div>\n                                    </template>\n                                    <template slot="c-modelNum">\n                                        <div s-for="item in row.modelList">{{item.count || \'-\'}}</div>\n                                    </template>\n                                    <template slot="c-qps">\n                                        <div s-for="item in row.modelList">\n                                            {{item.qps | getLabelByValue(PrivatePerfomance)}}\n                                        </div>\n                                    </template>\n                                    <template slot="c-gpuType">\n                                        {{row.gpuType | getLabelByValue(PrivateGraphicsType)}}\n                                    </template>\n                                    <template slot="c-applyTime">\n                                        {{row.applyTime | dateFormat(\'YYYY-MM-DD\')}}\n                                    </template>\n                                    <template slot="c-expireTime">\n                                        {{row.expireTime | dateFormat(\'YYYY-MM-DD\')}}\n                                    </template>\n                                    <template slot="c-status">\n                                        <span class="status {{row | convert(\'color\')}}" s-if="row.licenseType === PackageType.test">\n                                            {{row.status | getLabelByValue(PrivateTestApplyStatus)}}\n                                        </span>\n                                        <span class="status {{row | convert(\'color\')}}" s-if="row.licenseType === PackageType.formal">\n                                            {{row.status | getLabelByValue(PrivateApplyStatus)}}\n                                        </span>\n                                        <span class="tips {{row | convert(\'class\')}}">\n                                            <xui-tip skin="warning" message="{{row | convert(\'tips\')}}"/>\n                                        </span>\n                                    </template>\n                                    <template slot="c-control">\n                                        \x3c!-- 部署包生成中 --\x3e\n                                        <template s-if="row.status === PrivateApplyStatus.generating">--</template>\n                                        \x3c!-- 草稿 --\x3e\n                                        <a s-if="row.status === PrivateApplyStatus.draft" href="javascript:void(0);" on-click="toApply(row.id)">继续编辑</a>\n                                        \x3c!-- 部署包生成失败 --\x3e\n                                        <a s-if="row.status === PrivateApplyStatus.failed" href="javascript:void(0);" on-click="reApply(row.id)">重新提交</a>\n                                        \x3c!-- 查看详情（申请成功，审核中，审核通过，审核失败，购买成功，已过期）--\x3e\n                                        <div\n                                            s-if="row.status !== PrivateApplyStatus.draft && row.status !== PrivateApplyStatus.to_be_paid && row.status !== PrivateApplyStatus.generating && row.status !== PrivateApplyStatus.failed"\n                                        >\n                                            <a href="javascript:void(0);" on-click="toDetail(row.id)">查看详情</a>\n                                        </div>\n                                        \x3c!-- 追加购买 --\x3e\n                                        <a href="javascript:void(0);" s-if="row.status === PrivateApplyStatus.bought" on-click="toApply(row.id, \'add\')">追加购买</a>\n                                        \x3c!-- 追加购买 需置灰--\x3e\n                                        <div class="gray" s-if="row.status === PrivateApplyStatus.review_success && row.licenseType === PackageType.formal">追加购买</div>\n                                        \x3c!-- 立即支付 --\x3e\n                                        <a s-if="row.status === PrivateApplyStatus.to_be_paid" target="_blank" href="/billing/#/order/list">立即支付</a>\n                                        \x3c!-- 下载部署包（申请成功，审核通过，购买成功）--\x3e\n                                        <div\n                                            s-if="row.status === PrivateApplyStatus.apply_success || row.status === PrivateApplyStatus.review_success || row.status === PrivateApplyStatus.bought"\n                                        >\n                                            <a href="{{row.downloadLink}}" target="_blank">下载部署包</a>\n                                        </div>\n                                        \x3c!-- 下载部署包（已过期 置灰）--\x3e\n                                        <div s-if="row.status === PrivateApplyStatus.expired" class="gray">\n                                            下载部署包\n                                        </div>\n                                    </template>\n                                </xui-table>\n                            </xui-tab-panel>\n                        </xui-tab>\n                        <div class="pager-row">\n                            <span class="pager-label">每页显示</span>\n                            <xui-select s-ref="select" on-change="onSizeChange($event)" datasource="{{pageSelect.datasource}}" value="{=table[currentType].pageSize=}" />\n                            <xui-pager on-change="onPagerChange($event)" size="{{table[currentType].pageSize}}" page="{=table[currentType].pageNo=}" count="{{table[currentType].totalCount}}" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <notice-dialog s-ref="notice-dialog"/>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/imagerecognition/apply/apply",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","babel-runtime/core-js/object/keys","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./apply.tpl","inf-ria/app/brpc","lodash","moment","san-xui","ai/components/index","ai/common/enums","ai/config/constants","../../common/index"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=n["default"](i),h=n["default"](r),g=n["default"](s),v=n["default"](o),x=n["default"](l),b=[{},{ref:"baseInfos"},{ref:"fingerprint"}];module.exports=m["default"]({template:h["default"],components:{"xui-radioselect":u.RadioSelect,"no-side-head":d.NoSideHead,"fingerprint-section":f.fingerprintSection,"icon-section":f.iconSection,"base-infos":f.baseInfos},filters:{getLabelByValue:function(e,t){return null==e?"-":t.getTextFromValue(e)}},computed:{breadItem:function(){return[{title:"私有部署包管理",url:"#/ai/"+this.data.get("aiAppType")+"/package/index~type="+this.data.get("type")},{title:"发起申请"}]},isFormal:function(){return+this.data.get("type")===c.PackageType.formal},title:function(){return this.data.get("isFormal")?"购买正式部署包":"申请测试部署包"},expireTime:function(){return this.data.get("isAdd")&&this.data.get("detail")||this.data.get("isFormal")?[p.SDK_FORMAL_END_TIME]:[x["default"]().format("YYYY.MM.DD"),x["default"]().add(2,"month").format("YYYY.MM.DD")]},isEdit:function(){return!!this.data.get("id")&&!this.data.get("add")},isAdd:function(){return!!this.data.get("add")&&!!this.data.get("id")},selectedModels:function(){var t=this.data.get("selectInfos"),a=this.data.get("selectKeyList"),i=this.data.get("addInfos"),n=this.data.get("isAdd"),r=[];return a.forEach(function(a){var s=n?i[a].count:t[a].count;t[a].checked&&s&&r.push(e["default"]({},t[a],{count:s}))}),r},isSelectedModel:function(){var e=this.data.get("gpuType");return!!this.data.get("selectedModels").length&&e},totalPrice:function(){if(!this.data.get("isFormal"))return 0;var e=this.data.get("gpuType"),t=this.data.get("selectedModels").reduce(function(t,a){return t+=a.count*a.cost[e]},0);return t}},initData:function(){return{PrivatePerfomance:c.PrivatePerfomance,maxNum:50,detail:"",steps:[{text:"购买授权"},{text:"确认订单"},{text:"在线支付"},{text:"支付成功"}],stepIndex:0,currentStep:0,priceList:[],showOrder:!1,addCount:1,gpuType:"",gpuTypeList:[],modelList:[],modelConfig:{open:!0,saved:!1},canBuy:!1,selectInfos:{},addInfos:{},selectKeyList:[]}},attached:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return~[c.PackageType.formal,c.PackageType.test].indexOf(+this.$get("type"))||this.$set("type",c.PackageType.test),e.next=3,t["default"].awrap(this.getApiPrice());case 3:return e.next=5,t["default"].awrap(this.getModelList());case 5:if(this.generateSelectList(),this.watchs(),!this.$get("isEdit")&&!this.$get("isAdd")){e.next=12;break}return this.$set("applyId",+this.$get("id")),e.next=11,t["default"].awrap(this.getApplyDetail());case 11:this.$get("isAdd")&&this.$set("canBuy",!0);case 12:case"end":return e.stop()}},null,this)},watchs:function(){var t=this;this.watch("selectInfos",function(i){var n=a["default"](i).filter(function(e){return i[e].checked}).map(function(e){return i[e]});if(1===n.length&&2===n[0].gpuList.length){var r=n[0].gpuList.map(function(t){return e["default"]({},t,{value:t.gpuType,text:c.PrivateGraphicsType.getTextFromValue(t.gpuType)})});v["default"].isEqual(r,t.$get("gpuTypeList"))||t.$$set({gpuTypeList:r,gpuType:n[0].gpuList[0].gpuType})}else t.$$set({gpuTypeList:t.$get("initGpuTypeList"),gpuType:t.$get("initGpuType")})})},getModelList:function(){var a;return t["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t["default"].awrap(this.ajax.privateModelList({type:this.$get("aiAppType")}));case 2:a=i.sent,this.$$set({modelList:a.map(function(t){return e["default"]({},t,{text:t.modelName,value:t.modelId})}),gpuTypeList:a[0].gpuList.map(function(t){return e["default"]({},t,{value:t.gpuType,text:c.PrivateGraphicsType.getTextFromValue(t.gpuType)})}),gpuType:a[0].gpuList[0].gpuType,initGpuTypeList:a[0].gpuList.map(function(t){return e["default"]({},t,{value:t.gpuType,text:c.PrivateGraphicsType.getTextFromValue(t.gpuType)})}),initGpuType:a[0].gpuList[0].gpuType});case 4:case"end":return i.stop()}},null,this)},getApiPrice:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.apiPrice({type:this.$get("aiAppType"),productType:"private"}));case 2:e=a.sent,this.$set("priceList",e);case 4:case"end":return a.stop()}},null,this)},generateSelectList:function(){var t=this.$get(),i=t.modelList,n=t.priceList,r=t.isAdd,s=[],o={},l={};i.forEach(function(t){s.push(t.modelId);var i={},u={};t.gpuList.forEach(function(e){var t=e.gpuType,r=e.qps,s=r[a["default"](r)[0]];i[t]=s,u[t]=v["default"].find(n,{id:s}).price[0].cost}),o[t.modelId]=e["default"]({},t,{count:1,checked:!1,apiId:i,cost:u}),r&&(l[t.modelId]={count:0})}),this.$$set({addInfos:l,selectInfos:o,selectKeyList:s})},getApplyDetail:function(){var e;return t["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.privateApplyDetail({id:this.$get("applyId"),type:this.$get("aiAppType")}));case 2:if(e=a.sent,this.$set("detail",e),!this.$get("isEdit")){a.next=8;break}if(e.licenseType===+this.$get("type")&&e.status===c.PrivateApplyStatus.draft){a.next=8;break}return this.jumpToList(),a.abrupt("return");case 8:if(!this.$get("isAdd")){a.next=12;break}if(e.licenseType===+this.$get("type")&&+this.$get("type")===c.PackageType.formal&&e.status===c.PrivateApplyStatus.bought){a.next=12;break}return this.jumpToList(),a.abrupt("return");case 12:e.modelList.forEach(function(e){var t,a=e.id,n=e.count;i.$$set((t={},t["selectInfos."+a+".count"]=n,t["selectInfos."+a+".checked"]=!0,t))}),this.$set("gpuType",e.gpuType);case 14:case"end":return a.stop()}},null,this)},handleInput:function(e,t){var a=e.value;a&&v["default"].isNumber(+a)&&(a=Math.floor(a),this.ref("numbertextline"+t).data.set("value",a))},handleInputAdd:function(e,t){var a=e.value;a&&v["default"].isNumber(+a)&&(a=Math.floor(a),this.ref("numbertextlineAdd"+t).data.set("value",a))},next:v["default"].debounce(function(){var e,a,i,n,r,s,o,l,u,d,c;return t["default"].async(function(p){for(;;)switch(p.prev=p.next){case 0:if(e=this.$get(),a=e.applyId,i=e.type,n=e.currentStep,r=e.gpuType,s=e.aiAppType,o=e.isFormal,l=e.isSelectedModel,u=e.selectedModels,0!==n){p.next=25;break}if(l){p.next=12;break}return p.abrupt("return");case 12:return d={id:a||0,licenseType:+i,modelList:u.map(function(e){return{id:e.modelId,qps:-1,count:e.count}}),gpuType:r,type:s},p.prev=13,p.next=16,t["default"].awrap(this.ajax.privateApplySaveModel(d));case 16:c=p.sent,this.$$set({applyId:c,"modelConfig.saved":!0,"modelConfig.open":!1,currentStep:n+1}),this.ref(b[1].ref).$set("config.open",!0),p.next=24;break;case 21:p.prev=21,p.t0=p["catch"](13),this.$toast("保存失败",{messageType:"error"});case 24:return p.abrupt("return");case 25:if(n!==b.length-1){p.next=33;break}if(!o){p.next=29;break}return this.$set("canBuy",!0),p.abrupt("return");case 29:return p.next=31,t["default"].awrap(this.ajax.privateSubmit({id:a,type:s}));case 31:return this.$aiRedirect("package/detail",{id:a,type:i}),p.abrupt("return");case 33:this.ref(b[n+1].ref).$set("config.open",!0),this.$set("currentStep",n+1);case 35:case"end":return p.stop()}},null,this,[[13,21]])},500),back:function(){var e=this.$get("currentStep");1===e?this.$set("modelConfig.open",!0):this.ref(b[e-1].ref).$set("config.open",!0),this.$set("currentStep",e-1)},backToManage:function(){this.$aiRedirect("package/index",{type:this.$get("type")})},buy:function(){return t["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$get("isSelectedModel")){e.next=2;break}return e.abrupt("return");case 2:if(this.$get("isAdd")){e.next=13;break}return e.prev=3,e.next=6,t["default"].awrap(this.ajax.privateApplyComplete({id:this.$get("applyId"),type:this.$get("aiAppType")}));case 6:this.orderConfirm(),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](3);case 11:e.next=14;break;case 13:this.orderConfirm();case 14:case"end":return e.stop()}},null,this,[[3,9]])},getOrderConfig:function(){var e=this.$get(),t=e.applyId,a=e.expireTime,i=e.gpuType,n=[],r=[];return e.selectedModels.forEach(function(e){var s=e.apiId,o=e.count,l=e.modelId,u=e.cost;n.push({apiId:s[i],applyId:t,timeUnit:"DAY",count:o,gpuType:i,modelId:l,modelCount:o,modelQps:-1}),r.push({serviceType:"IMAGERECOGNITION",productType:"prepay",count:o,time:"有效期至"+a[0],price:u[i]*o,unitPriceShow:u[i]/1e4+"万/授权",chargeType:["按量"],configuration:[c.PrivateGraphicsType.getTextFromValue(i)]})}),{configItems:n,orderItems:r}},orderConfirm:function(){var e=this,t=this.$get(),a=t.aiAppType,i=t.totalPrice;if(!(i<0)){var n=this.ref("confirm").__getESUI();n.on("action@prevPage",function(){e.$$set({stepIndex:0,showOrder:!1})});var r=this.getOrderConfig(),s={config:{type:a,productType:"private",items:r.configItems},order:{serviceType:"IMAGERECOGNITION",productType:"prepay",type:"NEW",confirmV2Url:"/api/ai/"+a+"/order/v2/confirm",price:i,items:r.orderItems}};g["default"].invokeService("billing://order_confirm",n,s).then(function(t){e.$$set({stepIndex:1,showOrder:!0})})}},jumpToList:function(){this.$aiRedirect("package/index",{type:this.$get("type")})},changeVisible:function(){this.$get("isAdd")&&this.$set("modelConfig.open",!this.$get("modelConfig.open"))},changeCanBuy:function(e){this.$set("canBuy",e)}})}),define("ai/page/package/imagerecognition/apply/apply.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <no-side-head\n            s-if="showOrder"\n            on-backToManage="backToManage"\n            stepIndex="{{stepIndex}}"\n            steps="{{steps}}"\n        >\n            <span slot="back-title">返回私有部署包管理</span>\n            <span slot="title">购买授权</span>\n        </no-side-head>\n        <app-sidebar s-if="{{!isFormal}}"/>\n        <app-content class="imagerecognition-package-apply-all">\n            <breadcrumb items="{{breadItem}}" s-if="!showOrder"></breadcrumb>\n            <div class="list-content imagerecognition-package-apply" s-if="!showOrder">\n                <h2>{{title}}</h2>\n                <section>\n                    <h2 class="section-title">\n                        <span class="{{isAdd ? \'hover\' : \'\'}}" on-click="changeVisible">\n                            <icon-section config="{{modelConfig}}" />\n                            选择模型配置\n                        </span>\n                    </h2>\n                    <div s-if="modelConfig.open" class="section-content">\n                        <h3 class="sec-title">\n                            选择模型\n                        </h3>\n                        <xui-form class="form">\n                            <xui-item label="模型" required>\n                                <div s-for="key in selectKeyList" class="select-item">\n                                    <xui-checkbox checked="{=selectInfos[key].checked=}" title="{{selectInfos[key].modelName}}" disabled="{{isAdd}}" />\n                                    <xui-tip width="200" message="{{selectInfos[key].modelDesc}}" />\n                                    <div s-if="selectInfos[key].checked" class="line">\n                                        <div class="row" s-if="{{isFormal}}">\n                                            <div class="row-title">单价</div>\n                                            <div class="row-content">￥ {{selectInfos[key].cost[gpuType]}}</div>\n                                        </div>\n                                        <template s-if="{{!isAdd}}">\n                                            <div class="row num">\n                                                <div class="row-title">授权数量</div>\n                                                <xui-numbertextline\n                                                    s-ref="numbertextline{{key}}"\n                                                    class="row-content"\n                                                    min="{{1}}"\n                                                    max="{{maxNum}}"\n                                                    value="{=selectInfos[key].count=}"\n                                                    on-input="handleInput($event, key)"\n                                                >\n                                            </div>\n                                            <div class="row" s-if="{{isFormal}}">\n                                                <div class="row-title">购买费用小计</div>\n                                                <div class="row-content">{{selectInfos[key].count * selectInfos[key].cost[gpuType]}}</div>\n                                            </div>\n                                        </template>\n                                        <template s-else>\n                                            <div class="row">\n                                                <div class="row-title">已授权数量</div>\n                                                <div class="row-content">{{selectInfos[key].count}}</div>\n                                            </div>\n                                            <div class="row">\n                                                <div class="row-title">追加授权数量</div>\n                                                <xui-numbertextline\n                                                    s-ref="numbertextlineAdd{{key}}"\n                                                    class="row-content"\n                                                    min="{{0}}"\n                                                    max="{{maxNum}}"\n                                                    value="{=addInfos[key].count=}"\n                                                    on-input="handleInputAdd($event, key)"\n                                                >\n                                            </div>\n                                            <div class="row">\n                                                <div class="row-title">追加购买费用小计</div>\n                                                <div class="row-content">{{addInfos[key].count * selectInfos[key].cost[gpuType]}}</div>\n                                            </div>\n                                        </template>\n                                    </div>\n                                </div>\n                            </xui-item>\n                            <xui-item s-if="{{isFormal}}" label="{{isAdd ? \'追加\' : \'\'}}购买费用">\n                                <div class="price">{{totalPrice}}</div>\n                            </xui-item>\n                            <xui-item label="显卡类型" required>\n                                <xui-radioselect\n                                    disabled="{{isAdd}}"\n                                    value="{=gpuType=}"\n                                    datasource="{{gpuTypeList}}" />\n                                <p class="tips">\n                                    注：如果使用其他型号显卡或使用CPU，请<a target="_blank" href="{{Url.ticket}}~productId=107">提交工单</a>咨询\n                                </p>\n                            </xui-item>\n                        </xui-form>\n                        <h3 class="sec-title">\n                            申请信息\n                        </h3>\n                        <xui-form class="form">\n                            <xui-item label="申请类型">\n                                {{isFormal ? \'正式\' : \'测试\'}}部署包\n                            </xui-item>\n                            <xui-item label="证书有效期">\n                                {{expireTime[0]}}{{expireTime.length > 1 ? \' - \' + expireTime[1] : \'\'}}\n                            </xui-item>\n                        </xui-form>\n                        <template s-if="{{!isAdd}}">\n                            <xui-item>\n                                <xui-button skin="primary" disabled="{{!isSelectedModel}}" on-click="next">保存并继续</xui-button>\n                            </xui-item>\n                        </template>\n                    </div>\n                </section>\n                <section>\n                    <base-infos\n                        isAdd="{{isAdd}}"\n                        isEdit="{{isEdit}}"\n                        detail="{{detail}}"\n                        applyId="{{applyId}}"\n                        on-next="next"\n                        on-back="back"\n                        s-ref="baseInfos"\n                    />\n                </section>\n                <section>\n                    <fingerprint-section\n                        isAdd="{{isAdd}}"\n                        isFormal="{{isFormal}}"\n                        detail="{{detail}}"\n                        applyId="{{applyId}}"\n                        on-next="next"\n                        on-back="back"\n                        on-changeCanBuy = "changeCanBuy"\n                        s-ref="fingerprint"\n                    />\n                </section>\n                <section s-if="isFormal" class="buy">\n                    <div>\n                        <span>实付金额：</span>\n                        <span class="price">￥{{totalPrice}}</span>\n                    </div>\n                    <xui-button on-click="buy" skin="primary" disabled="{{!canBuy}}">立即购买</xui-button>\n                </section>\n            </div>\n            <ui-actionpanel san-ref="confirm" hidden="{{!showOrder}}"></ui-actionpanel>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/imagerecognition/apply/index",["exports","module","./apply","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/imagerecognition/index",["exports","module","./package","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/package/imagerecognition/package",["exports","module","babel-runtime/helpers/extends","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./package.tpl","san-xui","ai/config","../common/mixin","ai/common/enums","../common/tutorial/tutorial","../common/options"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=i["default"](a),p=i["default"](n),f=i["default"](o),m=i["default"](u),h=i["default"](d);module.exports=c["default"](e["default"]({template:p["default"],mixin:f["default"],components:{"xui-tab":r.Tab,"xui-tab-panel":r.TabPanel,tutorial:m["default"]},filters:h["default"].filters,initData:function(){var e;return{PackageType:l.PackageType,PrivateGraphicsType:l.PrivateGraphicsType,PrivateApplyStatus:l.PrivateApplyStatus,PrivateTestApplyStatus:l.PrivateTestApplyStatus,breadItem:[{title:"私有部署包管理"}],stepInfo:[{title:["提取指纹文件"],content:['请提前准备鉴权物理机，具体要求请参考<a target="_blank" href="'+s.Url.imagerecognition["package"].fingerprint+'">这里</a>']},{title:["申请测试","正式购买"],content:["1. 选择模型配置","2. 填写基本项目信息","3. 提交指纹文件"]},{title:["提交申请","进行支付"],"class":"no-arrow"},{title:["下载部署包"],content:["1. 下载部署包",'2. 本地安装使用，请参考<a target="_blank" href="'+s.Url.imagerecognition["package"].install+'">这里</a>进行安装']}],tips:["本地部署包为付费产品，可自用或集成为终端客户提供服务，需具备IT能力进行部署使用。","请提前使用公有云接口验证模型能力，并估算项目并发需求（QPS），提交测试申请后工作人员将在3个工作日内审批。",'测试完毕后，请<a target="_blank" href="'+s.Url.ticket+'~productId=107">提交工单</a>联系百度工作人员，发起正式购买流程。'],canBuy:!1,currentType:l.PackageType.test,typeConfig:l.PackageType.toArray(),table:(e={},e[l.PackageType.test]=this.generateDataConfig(),e[l.PackageType.formal]=this.generateDataConfig(),e),pageSelect:{datasource:[{text:10,value:10},{text:20,value:20},{text:30,value:30}]}}},generateDataConfig:function(){return{schema:[{name:"rowNumber",label:"序号"},{name:"id",label:"申请编号"},{name:"modelType",label:"申请模型"},{name:"gpuType",label:"显卡类型"},{name:"applyTime",label:"申请日期"},{name:"expireTime",label:"到期日期"},{name:"status",label:"状态",width:145},{name:"control",label:"操作"}],datasource:[],totalCount:0,pageSize:10,pageNo:1}},attached:function(){this.privateCanBuy(),this.handleType()}},h["default"].functions,{privateCanBuy:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(this.ajax.privateCanBuy({type:this.$get("aiAppType")}));case 2:(e=a.sent)||this.$set("currentType",l.PackageType.test),this.$set("canBuy",e);case 5:case"end":return a.stop()}},null,this)},toApply:function(t,a){var i=this.$get("currentType");this.$aiRedirect("package/"+(i===l.PackageType.test?"apply":"buy"),e["default"]({},t?{id:t}:{},a?{add:a}:{},{type:i}))}}))}),define("ai/page/package/imagerecognition/package.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content imagerecognition-package-content">\n                <h2>私有部署包管理</h2>\n                <div class="app-list-page">\n                    <div class="tutorial">\n                        <div class="tips">\n                            可以部署到本地GPU服务器的「纯软件」图像识别模型包，支持主流Linux系统，适配最新NVIDIA GPU显卡；若您有车辆分析相关新需求，\n                            <a target="_blank" href="{{Url[aiAppType].package.productIntro}}">请查看详细介绍 ></a>\n                        </div>\n                        <tutorial stepInfo="{{stepInfo}}" tips="{{tips}}" />\n                    </div>\n                    <div class="package-list">\n                        <div class="package-title">图像识别私有化部署包授权列表</div>\n                        <xui-tab skin="card" on-change="changeTab" s-ref="tab" class="{{canBuy ? \'\' : \'can-not-buy\'}}">\n                            <xui-tab-panel title="{{item.text}}" s-for="item in typeConfig">\n                                <div class="apply-infos">\n                                    <div>\n                                        <xui-button skin="primary" on-click="toApply()">发起申请</xui-button>\n                                    </div>\n                                    <div>\n                                        <a target="_blank" href="{{Url[aiAppType].package.productIntro}}">产品介绍</a> | \n                                        <a target="_blank" href="{{Url[aiAppType].package.deploy}}">部署说明</a> | \n                                        <a target="_blank" href="{{Url[aiAppType].package.api}}">接口调用</a>\n                                    </div>\n                                </div>\n                                <xui-table\n                                    datasource="{{table[currentType].datasource}}"\n                                    schema="{{table[currentType].schema}}"\n                                    class="package-table"\n                                >\n                                    <template slot="c-modelType">\n                                        <div s-for="item in row.modelList">{{item.name}}({{item.count || \'-\'}})</div>\n                                    </template>\n                                    <template slot="c-gpuType">\n                                        {{row.gpuType | getLabelByValue(PrivateGraphicsType)}}\n                                    </template>\n                                    <template slot="c-applyTime">\n                                        {{row.applyTime | dateFormat(\'YYYY-MM-DD\')}}\n                                    </template>\n                                    <template slot="c-expireTime">\n                                        {{row.expireTime | dateFormat(\'YYYY-MM-DD\')}}\n                                    </template>\n                                    <template slot="c-status">\n                                        <span class="status {{row | convert(\'color\')}}" s-if="row.licenseType === PackageType.test">\n                                            {{row.status | getLabelByValue(PrivateTestApplyStatus)}}\n                                        </span>\n                                        <span class="status {{row | convert(\'color\')}}" s-if="row.licenseType === PackageType.formal">\n                                            {{row.status | getLabelByValue(PrivateApplyStatus)}}\n                                        </span>\n                                        <span class="tips {{row | convert(\'class\')}}">\n                                            <xui-tip skin="warning" message="{{row | convert(\'tips\')}}"/>\n                                        </span>\n                                    </template>\n                                    <template slot="c-control">\n                                        \x3c!-- 部署包生成中 --\x3e\n                                        <template s-if="row.status === PrivateApplyStatus.generating">--</template>\n                                        \x3c!-- 草稿 --\x3e\n                                        <a s-if="row.status === PrivateApplyStatus.draft" href="javascript:void(0);" on-click="toApply(row.id)">继续编辑</a>\n                                        \x3c!-- 查看详情（申请成功，审核中，审核通过，审核失败，购买成功，已过期 部署包生成失败）--\x3e\n                                        <div\n                                        s-if="row.status !== PrivateApplyStatus.draft && row.status !== PrivateApplyStatus.to_be_paid && row.status !== PrivateApplyStatus.generating"\n                                        >\n                                            <a href="javascript:void(0);" on-click="toDetail(row.id)">查看详情</a>\n                                        </div>\n                                        \x3c!-- 追加购买 --\x3e\n                                        <a href="javascript:void(0);" s-if="row.status === PrivateApplyStatus.bought" on-click="toApply(row.id, \'add\')">追加购买</a>\n                                        \x3c!-- 追加购买 需置灰--\x3e\n                                        <div class="gray" s-if="row.status === PrivateApplyStatus.review_success && row.licenseType === PackageType.formal">追加购买</div>\n                                        \x3c!-- 立即支付 --\x3e\n                                        <a s-if="row.status === PrivateApplyStatus.to_be_paid" target="_blank" href="/billing/#/order/list">立即支付</a>\n                                        \x3c!-- 下载部署包（申请成功，审核通过，购买成功）--\x3e\n                                        <div\n                                            s-if="row.status === PrivateApplyStatus.apply_success || row.status === PrivateApplyStatus.review_success || row.status === PrivateApplyStatus.bought"\n                                        >\n                                            <a href="{{row.downloadLink}}" target="_blank">下载部署包</a>\n                                        </div>\n                                        \x3c!-- 下载部署包（已过期 置灰）--\x3e\n                                        <div s-if="row.status === PrivateApplyStatus.expired" class="gray">\n                                            下载部署包\n                                        </div>\n                                    </template>\n                                </xui-table>\n                            </xui-tab-panel>\n                        </xui-tab>\n                        <div class="pager-row">\n                            <span class="pager-label">每页显示</span>\n                            <xui-select s-ref="select" on-change="onSizeChange($event)" datasource="{{pageSelect.datasource}}" value="{=table[currentType].pageSize=}" />\n                            <xui-pager on-change="onPagerChange($event)" size="{{table[currentType].pageSize}}" page="{=table[currentType].pageNo=}" count="{{table[currentType].totalCount}}" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>'}),define("ai/page/package/mixin",["exports","module","ai/common/enums"],function(exports,module,e){module.exports={inited:function(){var e=this;this.on("getQulificationStatus",function(){return e.checkQualificationStatus()})},checkQualificationStatus:function(){~this.$get("qualification").state.indexOf(e.QualificationStatus.ENTERPRISE_CERTIFIED)||this.$aiRedirect("package/qualification/index")}}}),define("ai/page/package/qualification/Certifying/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"]})}),define("ai/page/package/qualification/Certifying/index.tpl",[],function(){return'<div class="certifying-page">\n    <p class="title">企业信息认证中</p>\n    <p>我们已经收到您的企业认证申请，请耐心等待认证结果</p>\n    <p>审核时间不会很长，一般1-2个工作日，但往往会比这个要快</p>\n    <p>审核期间如有任何疑问，可以随时 <a href="{{Url.ticket}}" target="_blank">[提交工单]</a> 进行咨询</p>\n</div>\n'}),define("ai/page/package/qualification/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/common/enums","./NotCertified/index","./Certifying/index","inf-ui/x/components/ViewStep"],function(exports,module,e,t,a,i,n,r,s){var o=t["default"](e),l=t["default"](a),u=t["default"](n),d=t["default"](r),c=t["default"](s),p={NotCertified:u["default"],Certifying:d["default"]},f="NotCertified",m="Certifying";module.exports=o["default"]({template:l["default"],components:{"xui-viewstep":c["default"]},initData:function(){return{step:0,page:-1,stepList:[{text:"企业认证"},{text:"私有部署包管理"}],breadItem:[{title:"私有部署包管理"}]}},computed:{title:function(){return this.data.get("stepList")[this.data.get("step")].text}},inited:function(){var e=this;this.watch("page",this.renderPage),this.on("getQulificationStatus",function(){return e.checkQualificationStatus()})},disposed:function(){this.page&&this.page.dispose()},checkQualificationStatus:function(){var e=this.$get("qualification");if(e.type===i.AuthType.ENTERPRISE){if(e.status===i.AuthStatus.CERTIFYING)return void this.$set("page",m);e.status===i.AuthStatus.CERTIFIED&&this.$aiRedirect("package/index")}this.$set("page",f)},renderPage:function(){this.page&&this.page.dispose(),this.page=new(p[this.$get("page")]),this.page.attach(this.el.querySelector(".package-wrapper"))}})}),define("ai/page/package/qualification/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content package-content">\n                <h2>{{title}}</h2>\n                <xui-viewstep step-index=\'{{step}}\' steps="{{stepList}}"></xui-viewstep>\n                <div class="package-wrapper"></div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/package/qualification/NotCertified/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","esui/Dialog"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a),s=t["default"](i);module.exports=n["default"]({template:r["default"],qualify:function(){var e=this,t=s["default"].confirm({title:"认证提交",width:400,content:'<p class="auth-dialog-content">如已提交认证信息请等待结果通知</p>',closeButton:!0,needFoot:!0,encode:!1,draggable:!0,okText:"已提交信息",cancelText:"重新提交"});t.on("ok",function(){window.location.reload()}),t.on("cancel",function(){window.open(e.$get("Url").enterpriseQualify),e.qualify()}),t.resize()}})}),define("ai/page/package/qualification/NotCertified/index.tpl",[],function(){return'<div class="not-certified-page">\n    <p class="title">开发者您好，如需使用私有部署包，请先完成企业认证</p>\n    <p>开始申请前，我们首先需要确保您已经完成了企业认证</p>\n    <p>企业认证自提交信息后，审核时间一般为1-2个工作日，感谢您的配合</p>\n    <div class="buttons">\n        <a href="{{Url.enterpriseQualify}}" target="_blank" class="ui-ctrl ui-button skin-ok skin-ok-button" on-click="qualify">去认证</a>\n    </div>\n</div>\n'}),define("ai/page/report/index",["exports","module","./report","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/report/relationMenu",["exports","lodash","babel-runtime/helpers/interop-require-default","ai/common/enums"],function(exports,e,t,a){function i(e){var t={};return r["default"].keys(e).forEach(function(a){var n=e[a];r["default"].isObject(n)?t=r["default"].assign({},t,i(n)):r["default"].isString(n)&&(t[n]=a)}),t}function n(e){for(var t=arguments.length<=1||arguments[1]===undefined?[]:arguments[1],a=arguments.length<=2||arguments[2]===undefined||arguments[2],i=0,r=t.length;i<r;i++){var s=t[i];if(!a&&s.value+""==e+"")return s.key;if(s.children){var o=n(e,s.children,!1);if(o)return o}}return null}exports.__esModule=!0,exports.getCountDatasource=function(e,t,i){return t===a.AppType.bicc?s[e]?r["default"].keys(s[e]).map(function(e){return{text:e,value:e}}):[]:c(i,t)?r["default"].keys(l).map(function(e){return{text:e,value:e}}):[]},exports.getMonitorDatasource=function(e,t,i,n){var p=undefined;return p=i===a.AppType.bicc?s[e]?s[e][t]:o[e]:c(n,i)?l[t]:i===a.AppType.unit?u:d,r["default"].keys(p).map(function(e){return{text:e,value:p[e]}})},exports.getServiceTypeByValue=function(e,t){for(var a=0,i=t.length;a<i;a++){var n=t[a];if(n.value+""==e+"")return n.type}return null},exports.getSelectApiKeyByValue=n,exports.getAiAppTypeById=function(e){var t=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];return r["default"].get(r["default"].find(t,{value:e}),"type")};var r=t["default"](e),s={realtime:{"时长统计":{"通话时长（小时）":"asrDuration","单轨通话时长（小时）":"singleAsrDuration","双轨通话时长（小时）":"dualAsrDuration"},"并发统计":{"最大并发路数":"maxConcurrency"},"通路数统计":{"通话数":"asrCalls","单轨通话路数":"singleAsrCalls","双轨通话通路":"dualAsrCalls"}},audiofile:{"上传文件数量统计":{"上传文件数":"uploadFileNums","获取成功文件数":"uploadSuccFileNums","双轨文件数":"uploadDualFileNums","单轨文件数":"uploadSingleFileNums","非法文件数":"uploadIllegalFileNums"},"上传文件时间统计":{"上传文件时长（小时）":"uploadFileTime"},"识别文件数量统计":{"单轨文件数":"arSingleFileNums","双轨文件数":"arDualFileNums","错误文件数":"arErrFileNums","识别文件数":"arFileNums"},"识别文件时间统计":{"单轨文件时长（小时）":"arSingleFileTime","双轨文件时长（小时）":"arDualFileTime","识别总时长（小时）":"arFileTime"}}};exports.ctlStruct=s;var o={itma:{"最高并发通数":"maxConcurrency","调用通数":"callCnt","调用通时（分钟）":"callDuration"}},l={"调用量":{"调用成功":"success","调用失败":"failed"},QPS:{"QPS峰值":"qps"}},u={"调用总量":"total"},d={"调用成功":"success","调用失败":"failed"},c=function(e,t){return r["default"].includes(e,t)},p=r["default"].assign({},i(s),i(o),i(d),i(u),i(l));exports.monitorMap=p}),define("ai/page/report/report",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/promise","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./report.tpl","san-xui","ai/common/enums","moment","lodash","./relationMenu"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=i["default"](a),c=i["default"](n),p=i["default"](o),f=i["default"](l);module.exports=d["default"]({template:c["default"],components:{"xui-multipicker":r.MultiPicker,"xui-boxgroup":r.BoxGroup,"xui-rangecalendar":r.RangeCalendar,"xui-chart":r.Chart,"xui-table":r.Table},initData:function(){var e=s.ReportDimension.toArray();return{breadItem:[{title:"监控报表"}],failDetail:{datasource:[],schema:[{name:"errorCode",label:"错误码"},{name:"message",label:"失败详情"},{name:"time",label:"失败次数"},{name:"description",label:"描述"},{name:"apiName",label:"API"},{name:"suggestion",label:"处理意见"}]},reportApp:{value:"0",datasource:[]},reportApi:{value:["0"],datasource:[]},countValue:null,monitorValue:[],calendar:{value:{begin:new Date,end:new Date},range:{begin:p["default"]().subtract(1,"y").toDate(),end:new Date}},dimension:e[0].value,chartLabels:[],chartOptions:{tooltip:{trigger:"axis"},color:["#108cee","#5fb333","#F7BA2A","#62d1de","#54d6b6","#a6db69","#ffd454","#ffa361"],legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisPointer:{label:{formatter:function(e){var t=e.value;if(/^\d{1,2}$/.test(t)){var a=("00"+t).slice(-2);return a+":00-"+a+":59"}return t}}}},yAxis:{type:"value"},series:[]}}},computed:{showErrList:function(){var e={serviceIds:[],serviceTypes:[],apiIds:[]};return this.data.get("reportApi.datasource").forEach(function(t){var a=t.children,i=t.value,n=t.type;if(a&&a.length){var r=function s(e){return e.reduce(function(e,t){var a=t.showErrorDetail,i=t.children,n=t.value;if(i&&i.length){var r=s(i);r.length&&(e=e.concat(r,""+n))}else a&&e.push(n);return e},[])}(a);r.length&&(e.serviceIds.push(i),e.serviceTypes.push(n),e.apiIds=e.apiIds.concat(r))}}),e},showQpsTip:function(){var e=f["default"].last(this.data.get("countDatasource"));return!!e&&"QPS"===e.value},countDatasource:function(){var e=u.getSelectApiKeyByValue(this.data.get("reportApi.value").slice(-1)[0],this.data.get("reportApi.datasource")),t=u.getAiAppTypeById(f["default"].first(this.data.get("reportApi.value")),this.data.get("reportApi.datasource")),a=this.data.get("showErrList.serviceTypes");return u.getCountDatasource(e,t,a)},monitorDatasource:function(){var e=u.getSelectApiKeyByValue(this.data.get("reportApi.value").slice(-1)[0],this.data.get("reportApi.datasource")),t=u.getAiAppTypeById(f["default"].first(this.data.get("reportApi.value")),this.data.get("reportApi.datasource")),a=this.data.get("countValue"),i=this.data.get("showErrList.serviceTypes");return u.getMonitorDatasource(e,a,t,i)},dimensionDatasource:function(){var e=s.ReportDimension.toArray(),t=u.getSelectApiKeyByValue(this.data.get("reportApi.value").slice(-1)[0],this.data.get("reportApi.datasource"));return~["realtime","audiofile","itma"].indexOf(t)||(e=e.filter(function(e){return e.value!==s.ReportDimension.MONTH})),"audiofile"===t&&(e=e.filter(function(e){return e.value!==s.ReportDimension.HOUR})),e},showErrDetail:function(){if(!f["default"].includes(this.data.get("monitorValue"),"failed"))return!1;for(var e=this.data.get("reportApi.value"),t=this.data.get("showErrList"),a=t.serviceIds,i=t.apiIds,n=e.length-1;n>=0;n--){var r=e[n];if("0"!==r)return!!(!n&&f["default"].includes(a,r)||f["default"].includes(i,r))}},errDetailEmptyContent:function(){if(!this.data.get("showErrDetail")||this.data.get("failDetail.datasource").length)return"";var e=p["default"]("2018-07-27").toDate();return+this.data.get("calendar.value.begin")<+e?"暂未查询到数据，调用失败详情数据从"+p["default"](e).format("YYYY/MM/DD")+"开始统计":"查询时间内没有发生错误"}},created:function(){return e["default"].async(function(a){for(var i=this;;)switch(a.prev=a.next){case 0:return this.watch("reportApi.value",function(){i.choseFirstCount(),i.choseDefaultMonitor();var e=i.$get("dimensionDatasource");i.data.set("dimension",e[0].value)}),this.watch("countValue",function(){i.choseDefaultMonitor()}),this.watch("dimension",function(){var e=i.data.get(),t=e.countValue,a=e.dimension;if("QPS"===t&&a===s.ReportDimension.HOUR){var n=i.$get("calendar.value"),r=n.begin,o=n.end,l=p["default"](r).add(7,"days").toDate();+o>+l&&i.$set("calendar.value.end",l)}i.search()}),a.next=5,e["default"].awrap(t["default"].all([this.getAppList(),this.getApiList()]));case 5:this.search();case 6:case"end":return a.stop()}},null,this)},choseFirstApi:function(){var e=this.$get("reportApi.datasource");e.length||this.$set("reportApi.value",null),this.$set("reportApi.value",e[0].children?[e[0].value,e[0].children[0].value]:[e[0].value])},choseFirstCount:function(){var e=this.$get("countDatasource");e.length?this.$set("countValue",e[0].value):this.$set("countValue",null)},choseDefaultMonitor:function(){var e=u.getServiceTypeByValue(this.data.get("reportApi.value")[0],this.data.get("reportApi.datasource")),t=this.$get("monitorDatasource");if(t.length){var a=[t[0].value];"bicc"===e&&(a=t.map(function(e){return e.value})),this.$set("monitorValue",a)}else this.$set("monitorValue",[])},getAppList:function(){var t,a,i;return e["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.$get("isEasydl")?s.AppType.easydl:this.$get("aiAppType"),n.next=3,e["default"].awrap(this.ajax.reportAppList({type:t}));case 3:if(a=n.sent,a=[{text:"全部应用",value:0}].concat(a.map(function(e){var t=e.id;return{text:e.name,value:t}})),this.$set("reportApp.datasource",a),!(i=this.$get("appId"))){n.next=10;break}return this.$set("reportApp.value",i),n.abrupt("return");case 10:this.$set("reportApp.value",a[0].value);case 11:case"end":return n.stop()}},null,this)},getApiList:function(){var t,a,i,n;return e["default"].async(function(r){for(var o=this;;)switch(r.prev=r.next){case 0:return t=this.$get("isEasydl")?s.AppType.easydl:this.$get("aiAppType"),r.next=3,e["default"].awrap(this.ajax.reportApiList({type:t}).then(function(e){return o.handleSelectData(e)}));case 3:a=r.sent,this.$set("reportApi.datasource",a),a.length&&(this.choseFirstApi(),(i=this.$get("apiId"))&&"0"!==i&&(n=this.bfsApiTree(a,i))&&this.$set("reportApi.value",n));case 6:case"end":return r.stop()}},null,this)},handleSelectData:function(e,t){var a=this;if(!e)return[];var i=e.filter(function(e){return!e.ineffective}).map(function(e,i){t&&e.id||!e.children||e.children.forEach(function(e){+e.version&&e.addVersionFlag&&(e.name+="V"+e.version)});var n=undefined;n=e.id?{text:e.name,type:e.type,key:e.key,value:e.id,showErrorDetail:e.showErrorDetail,parentApiId:e.parentApiId}:{text:e.label,value:""+i+1};var r=e.children;if(r&&r.length){var o=!!e.id&&!f["default"].includes([s.AppType.bicc,s.AppType.easydl],n.type);n.children=a.handleSelectData(r,o)}return n});return t&&(i=[{text:"全部",value:"0"}].concat(i)),i},bfsApiTree:function(e,t){for(var a=0,i=e.length;a<i;a++){if((n=e[a]).value===t)return[t]}for(a=0,i=e.length;a<i;a++){var n;if((n=e[a]).children){var r=this.bfsApiTree(n.children,t);if(r)return[n.value].concat(r)}}return null},search:f["default"].debounce(function(){var t,a,i,n,r,o,l,d,c;return e["default"].async(function(f){for(;;)switch(f.prev=f.next){case 0:t=this.$get("reportApp.value"),a=this.$get("dimension"),i=[p["default"](this.$get("calendar.value.begin")).startOf("day").valueOf(),p["default"](this.$get("calendar.value.end")).startOf("day").valueOf()].join(","),n=this.$get("isEasydl")?s.AppType.easydl:this.$get("aiAppType"),r=this.$get("reportApi.value").slice(),o=u.getServiceTypeByValue(r[0],this.$get("reportApi.datasource")),l=undefined;do{l=r.pop()}while("0"===l&&r.length>1);return d={appId:t,apiId:l,dimension:a,serviceType:o,timeRange:i,type:n},f.next=11,e["default"].awrap(this.ajax.reportData(d));case 11:c=f.sent,this.serializeChartData(c);case 13:case"end":return f.stop()}},null,this)},120),serializeChartData:function(e){this.$set("failDetail.datasource",e.failDetails||[]);var t=f["default"].keys(e.items[0]),a=this.$get("monitorValue"),i=(t=t.filter(function(e){return~a.indexOf(e)})).map(function(e){return u.monitorMap[e]});this.$set("chartOptions.legend.data",i),this.$set("chartLabels",t.map(function(t){return{text:u.monitorMap[t],value:e[t]}}));var n=p["default"](this.$get("calendar.value.begin")),r=p["default"](this.$get("calendar.value.end")),o=this.$get("dimension"),l=[];if(o===s.ReportDimension.HOUR){l=[];for(var d=r.endOf("day").diff(n.startOf("day"),"days")+1,c=0;c<24*d;c++)l.push(n.clone().add(c,"hours").format("YYYY/MM/DD HH:mm"))}else if(o===s.ReportDimension.DAY){d=r.diff(n,"days");l=[n.format("YYYY/MM/DD")];for(c=1;c<=d;c++)l.push(n.clone().add(c,"days").format("YYYY/MM/DD"))}else{var m=r.endOf("month").diff(n.startOf("month"),"months")+1;l=[n.format("YYYY/MM")];for(c=1;c<m;c++)l.push(n.clone().add(c,"months").format("YYYY/MM"))}this.$set("chartOptions.xAxis.data",l);var h=e.items,g=t.map(function(e){return{name:u.monitorMap[e],type:"line",data:h.map(function(t){return t[e]})}});this.$set("chartOptions.series",g)}})}),define("ai/page/report/report.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content ai-report-content">\n                <h2>监控报表</h2>\n                <div class="section-wrap">\n                    <xui-form>\n                        <xui-item label="选择应用">\n                            <xui-select datasource="{{reportApp.datasource}}" value="{= reportApp.value =}" />\n                        </xui-item>\n                        <xui-item label="选择API">\n                            <xui-multipicker datasource="{{reportApi.datasource}}" value="{= reportApi.value =}" />\n                        </xui-item>\n                        <xui-item s-if="countDatasource.length" label="统计项">\n                            <xui-boxgroup box-type="radio" value="{= countValue =}" datasource="{{countDatasource}}" />\n                            <div s-if="showQpsTip" class="qps-tip-wrap" style="position: relative;">\n                                <div style="position:absolute;top: -28px;left:140px;">\n                                    <xui-tip>\n                                        <div style="width:250px;">QPS（query per second）指每秒向服务发送的请求数量峰值，相当于每个API接口每秒可以允许请求的并发上限量</div>\n                                    </xui-tip>\n                                </div>\n                            </div>\n                        </xui-item>\n                        <xui-item label="监控项">\n                            <xui-boxgroup box-type="checkbox" value="{= monitorValue =}" datasource="{{monitorDatasource}}" />\n                        </xui-item>\n                        <xui-item label="时间段">\n                            <xui-rangecalendar value="{= calendar.value =}" range="{{calendar.range}}" />\n                        </xui-item>\n                        <xui-item label=" ">\n                            <xui-button on-click="search" style="width: 60px;" skin="primary">查询</xui-button>\n                        </xui-item>\n                    </xui-form>\n                    <div class="chart-wrap">\n                        <div class="chart-ctl-bar">\n                            <span s-for="item,index in chartLabels" class="invoke-item">\n                                {{item.text}}\n                                <span style="color:{{chartOptions.color[index]}}">{{item.value}}</span>\n                            </span>\n                            <xui-boxgroup class="dimension-radio" box-type="radio" value="{= dimension =}" datasource="{{dimensionDatasource}}" />\n                        </div>\n                        <xui-chart auto-resize="{{true}}" option="{{chartOptions}}" not-merge="{{true}}" />\n                    </div>\n                    <div s-if="showErrDetail" class="fail-wrap">\n                        <h2>调用失败详情</h2>\n                        <div s-if="failDetail.datasource.length<=0">{{errDetailEmptyContent}}</div>\n                        <xui-table s-else schema="{{failDetail.schema}}" datasource="{{failDetail.datasource}}"></xui-table>\n                    </div>\n                </div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/sentiment/dict/CreateModelDialog/CreateModelDialog",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","async-validator","bat-ria/tpl!./CreateModelDialog.tpl","ai/page/sentiment/dict/Upload/index","ai/components/FileErrorDetailDialog","../sampleFileList"],function(exports,module,e,t,a,i,n,r,s,o){var l=a["default"](t),u=a["default"](n),d=a["default"](s),c=a["default"](o),p=i["default"];module.exports=l["default"]({template:u["default"],components:{"txt-upload":r.TxtUpload,"error-detail-dialog":d["default"]},initData:function(){return{appId:0,visible:!1,btnDisabled:!0,btnText:"开始训练",fileUploadTipVisible:!1,formData:{modelName:"",situation:"",positiveFile:null,negativeFile:null},rules:new p({modelName:[{required:!0,message:"模型名称不能为空"},{max:10,message:"模型名称不能超过10个字"}],situation:[{required:!0,message:"应用场景不能为空"},{max:50,message:"应用场景不能超过50个字"}]}),errors:null,fileErrorDialog:{open:!1,detail:[]},sample:c["default"]}},attached:function(){var e=this;this.watch("formData",function(t){var a=t.modelName,i=t.situation,n=t.positiveFile,r=t.negativeFile;setTimeout(function(){if(e.$get("errors"))e.$get("btnDisabled")||e.$$set({btnDisabled:!0,btnText:"立即创建",fileUploadTipVisible:!1});else if(a&&i&&(n||r)){var t=!!n&&!!r;e.$$set({btnDisabled:!1,btnText:t?"立即创建":"继续",fileUploadTipVisible:!t})}else e.$$set({btnDisabled:!0,btnText:"立即创建",fileUploadTipVisible:!1})},0)})},messages:{showErrorDetail:function(e){var t=e.value;this.$set("fileErrorDialog",{open:!0,detail:t})}},getParams:function(){var e=this.$get(),t=e.formData,a={appId:e.appId,modelName:t.modelName,situation:t.situation};return t.positiveFile&&(a.positiveFileId=t.positiveFile.id),t.negativeFile&&(a.negativeFileId=t.negativeFile.id),a},submit:function(){return e["default"].async(function(t){for(var a=this;;)switch(t.prev=t.next){case 0:return t.next=2,e["default"].awrap(this.ref("form").validateForm());case 2:this.ajax.sentimentSaveModel(this.getParams()).then(function(){a.fire("finish")},function(e){a.$set("errors",e.field)});case 3:case"end":return t.stop()}},null,this)},cancel:function(){this.fire("cancel")}})}),define("ai/page/sentiment/dict/CreateModelDialog/CreateModelDialog.tpl",[],function(){return'<template>\n    <xui-dialog open="{=visible=}" width="800" foot="{{true}}" title="创建模型" closeOnClickMask="{{true}}" class="create-model-dialog-wrap">\n        <div class="create-model-dialog">\n            <xui-form s-ref="form" formData="{=formData=}" rules="{{rules}}" errors="{=errors=}" labelWidth="91">\n                <xui-item label="模型名称：" required name="modelName">\n                    <xui-textbox  width="240"\n                        value="{=formData.modelName=}"\n                        placeholder="请输入10字以内名称"></xui-textbox>\n                </xui-item>\n                <xui-item label="应用场景：" required name="situation">\n                    <xui-textbox width="240"\n                        height="58"\n                        multiline\n                        value="{=formData.situation=}"\n                        placeholder="请输入20字以内场景描述"></xui-textbox>\n                </xui-item>\n                <xui-item label="数据导入：" required name="positiveFile">\n                    <txt-upload label="上传正向语料" file="{=formData.positiveFile=}" kind="positive"></txt-upload>\n                </xui-item>\n                <xui-item name="negativeFile">\n                    <txt-upload label="上传负向语料" file="{=formData.negativeFile=}" kind="negative"></txt-upload>\n                </xui-item>\n                <xui-item>\n                    <p class="file-demand">文件要求：限TXT格式，最大30M，编码仅支持UTF-8</p>\n                    <p class="file-demand">内容要求：每行一条数据，至少100条才可开启训练，为保证更好的效果，建议正向和负向训练语料均大于1000条</p>\n                    <a class="download-file" href="{{sample.positive}}">下载正向语料示例</a>\n                    <a class="download-file" href="{{sample.negative}}">下载负向语料示例</a>\n                </xui-item>\n            </xui-form>\n        </div>\n        <div slot="foot">\n            <span s-if="fileUploadTipVisible" class="file-upload-tip">仅上传正向或负向语料，可能会影响训练的准确率，您确认要继续？</span>\n            <xui-button on-click="submit" skin="primary" disabled="{{btnDisabled}}">{{btnText}}</xui-button>\n            <xui-button on-click="cancel">取消</xui-button>\n        </div>\n    </xui-dialog>\n    <error-detail-dialog open="{{fileErrorDialog.open}}" detail="{{fileErrorDialog.detail}}" title="文件校验结果"></error-detail-dialog>\n</template>\n'}),define("ai/page/sentiment/dict/CreateModelDialog/index",["exports","module","./CreateModelDialog","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/sentiment/dict/detail/Card/Card",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/object/keys","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./Card.tpl","ai/common/enums","ai/page/sentiment/dict/Upload/index","../../sampleFileList","./LtCommonTip"],function(exports,module,e,t,a,i,n,r,s,o,l,u){var d=n["default"](i),c=n["default"](r),p=n["default"](l),f=n["default"](u);module.exports=d["default"]({template:c["default"],components:{"txt-reupload":o.TxtReupload,"lt-common-tip":f["default"]},initData:function(){return{model:{},trainingModelName:"",effectedModelName:"",effectingModelName:"",reachMaxEffectNum:!1,uploadError:{},sample:p["default"]}},computed:{showUploadDemand:function(){var e=this.data.get("model"),a=e.positiveFile,i=e.negativeFile;return!t["default"](a).length||!t["default"](i).length},uploadErrorKeys:function(){var e=this.data.get("uploadError")||{};return t["default"](e).filter(function(t){return e[t]})},showCustomLtCommonTip:function(){var e=this.data.get("model"),t=e.trainResult,a=e.positiveFile,i=e.negativeFile;if(t&&!(t.accuracy>t.rawAccuracy)){var n=a.lineNum+i.lineNum;if(n<1e3)return"您训练的正负语料总数量为"+n+"，训练数据量少会影响模型评估效果，建议整理至少1000+的数据后，重新训练";if(!a.lineNum||!i.lineNum)return"您训练的语料全部为"+(a.lineNum?"正向":"负向")+"语料，训练比例不均衡会影响模型评估效果，建议调整比例至1:1-1:4之间，重新训练";var r=Math.round(i.lineNum/a.lineNum*10)/10;return r<1||r>4?"您训练的正负语料数量比例为1:"+r+"，训练比例不均衡会影响模型评估效果，建议调整比例至1:1-1:4之间，重新训练":'如您训练中遇到效果评估问题，可<a href="'+this.data.get("Url.ticket")+'" target="_blank">提交工单咨询寻求技术支持'}}},uploadError:function(t){this.$set("uploadError",e["default"]({},this.$get("uploadError"),t))},showErrorDetail:function(e){this.fire("showErrorDetail",this.$get("uploadError")[e].detail)},trainModel:function(){this.operate("sentimentTrainModel")},deleteModel:function(){var e,t,i;return a["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=this.$get("model.status"),!~[s.ModelStatus.TRAINING,s.ModelStatus.EFFECTING].indexOf(e)){n.next=6;break}(t={})[s.ModelStatus.TRAINING]="模型训练中，暂时不能删除模型，请结束训练后再试",t[s.ModelStatus.EFFECTING]="模型生效中，暂时不能删除模型，请生效后再试",i=t,this.$alert({needFoot:!0,title:"不能删除",content:i[e]}),n.next=11;break;case 6:return i="删除后无法恢复，您是否要删除当前模型？",s.ModelStatus.EFFECT_SUCCESS===e&&(i="模型删除后，已生效应用也会失效，您是否删除模型？"),n.next=10,a["default"].awrap(this.$confirm({title:"确认删除模型",needFoot:!0,content:i}));case 10:this.operate("sentimentDeleteModel");case 11:case"end":return n.stop()}},null,this)},effectModel:function(){var e,t;return a["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:return e="每个应用仅支持生效一个模型，您确定生效当前模型？",(t=this.$get("effectedModelName"))&&(e="检测到当前应用已生效【"+t+"】模型，每个应用仅支持生效一个模型， 您确定生效当前模型？"),e+='<br /><span class="effect-tip">备注：每个用户仅支持生效总计10个模型。</span>',i.next=6,a["default"].awrap(this.$confirm({title:"确认生效模型",needFoot:!0,content:e}));case 6:this.operate("sentimentEffectModel");case 7:case"end":return i.stop()}},null,this)},operate:function(e){var t=this,a=this.$get("model.modelId");this.ajax[e]({modelId:a}).then(function(){t.reload()})},reload:function(){this.fire("reloadPage")}})}),define("ai/page/sentiment/dict/detail/Card/Card.tpl",[],function(){return'<template>\n    <div class="card-content">\n        <div class="model-info">\n            <div>\n                <h5>{{model.name}}</h5>\n                <p class="time">{{model.lastModifiedTime | dateFormat(\'YYYY/MM/DD\')}}</p>\n                <txt-reupload kind="positive" title="正向语料" model="{{model}}" on-reloadPage="reload" on-uploadError="uploadError($event)"></txt-reupload>\n                <txt-reupload kind="negative" title="负向语料" model="{{model}}" on-reloadPage="reload" on-uploadError="uploadError($event)"></txt-reupload>\n                <ul s-if="uploadErrorKeys.length">\n                    <li s-for="item in uploadErrorKeys" class="{{uploadError[item].detail ? \'hasDetail\' : \'\'}}">\n                        <span class="upload-global-error">{{uploadError[item]}}</span>\n                        \x3c!-- <a s-if="uploadError[item].detail" href="javascript:;" on-click="showErrorDetail(item)">校验详情</a> --\x3e\n                    </li>\n                </ul>\n                <div s-if="showUploadDemand" class="upload-demand">\n                    文件上传要求,\n                    <xui-button disabled\n                        class="button-tip"\n                        tipPosition="lt"\n                        tip="<div style=\'width: 500px\'>文件要求：限TXT格式，最大30M，编码仅支持UTF8<br/>内容要求：每行一条数据，至少100条才可开启训练，为保证更好的效果，建议正向和负向训练语料均大于1000条<br/><a href=\'{{sample.positive}}\' style=\'margin-right: 10px;\'>下载正向语料示例</a><a href=\'{{sample.negative}}\'>下载负向语料示例</a></div>">\n                            查看具体要求\n                    </xui-button>\n                </div>\n            </div>\n        </div>\n        <div class="model-status">\n            <div>\n                <template s-if="!model.status">\n                    <h6>模型未训练</h6>\n                    <p s-if="trainingModelName">已有模型正在训练,需待该模型训练完成后再开启当前模型训练</p>\n                    <p s-else>您可以检查语料后开始训练</p>\n                    <xui-button disabled="{{trainingModelName}}" on-click="trainModel">立即训练</xui-button>\n                </template>\n                <template s-if="model.status === 1">\n                    <h6>模型训练中</h6>\n                    <p>您可以关闭页面,训练不会中断,稍后查看即可</p>\n                </template>\n                <template s-if="model.status === 2">\n                    <h6>模型训练成功</h6>\n                    <p>\n                        当前模型准确率<b>{{model.trainResult.accuracy}}%</b> (通用模型准确率<b>{{model.trainResult.rawAccuracy}}%</b>)\n                        <a href="{{model.trainResult.url}}">查看评估详情</a>\n                    </p>\n                    <lt-common-tip tip="{{showCustomLtCommonTip}}"/>\n                    <p s-if="effectingModelName">\n                        已有模型正在生效,需待该模型生效完成后再生效模型\n                    </p>\n                    <p s-elif="reachMaxEffectNum">\n                        抱歉，您生效的模型已达单用户上限10个，有疑问请联系我们\n                    </p>\n                    <xui-button on-click="effectModel" disabled="{{effectingModelName || reachMaxEffectNum}}">立即生效</xui-button>\n                </template>\n                <template s-if="model.status === 3">\n                    <h6>模型训练失败</h6>\n                    <p s-if="trainingModelName">已有模型正在训练,需待该模型训练完成后再开启当前模型训练</p>\n                    <p s-else>请您稍后尝试重新训练</p>\n                    <xui-button disabled="{{trainingModelName}}" on-click="trainModel">立即训练</xui-button>\n                </template>\n                <template s-if="model.status === 4">\n                    <h6>模型生效中</h6>\n                    <p>预计耗费5-10分钟,请您耐心等待</p>\n                </template>\n                <template s-if="model.status === 5">\n                    <h6>模型已生效</h6>\n                    <p>每个应用仅支持生效一个模型,您可生效其它模型进行替换</p>\n                </template>\n                <template s-if="model.status === 6">\n                    <h6>模型生效失败</h6>\n                    <p>\n                        当前模型准确率<b>{{model.trainResult.accuracy}}%</b> (通用模型准确率<b>{{model.trainResult.rawAccuracy}}%</b>)\n                        <a href="{{model.trainResult.url}}">查看评估详情</a>\n                    </p>\n                    <lt-common-tip tip="{{showCustomLtCommonTip}}"/>\n                    <p s-if="effectingModelName">\n                        已有模型正在生效,需待该模型生效完成后再生效模型\n                    </p>\n                    <p s-elif="reachMaxEffectNum">\n                        抱歉，您生效的模型已达单用户上限10个，有疑问请联系我们\n                    </p>\n                    <p s-else="!effectingModelName">请您尝试重新生效，若仍有问题请联系我们</p>\n                    <xui-button on-click="effectModel" disabled="{{effectingModelName || reachMaxEffectNum}}">立即生效</xui-button>\n                </template>\n            </div>\n        </div>\n        <div class="model-delete">\n            <span on-click="deleteModel">删除</span>\n        </div>\n    </div>\n</template>'}),define("ai/page/sentiment/dict/detail/Card/index",["exports","module","./Card","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/sentiment/dict/detail/Card/LtCommonTip",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","san-xui"],function(exports,module,e,t,a){var i=t["default"](e);module.exports=i["default"]({template:'\n        <p style="display: {{tip ? \'block\' : \'none\'}}" class="lt-common-tip">\n            <xiu-icon name="information" />\n            <b>您当前定制模型评估集的准确率<=通用模型的准确率</b>\n            <xui-button disabled\n                class="button-tip"\n                tipPosition="lt"\n                tip="<div style=\'width: 300px\'>{{tip}}</div>"\n            >\n                查看原因与建议\n            </xui-button>\n        </p>\n    ',components:{"xiu-icon":a.Icon},initData:function(){return{tip:""}}})}),define("ai/page/sentiment/dict/detail/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","lodash","moment","ai/common/enums","../UseFlow/index","./SupportContent","../CreateModelDialog/index","./Card/index","ai/components/FileErrorDetailDialog"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d){var c=t["default"](e),p=t["default"](a),f=t["default"](i),m=t["default"](n),h=t["default"](s),g=t["default"](o),v=t["default"](l),x=t["default"](u),b=t["default"](d),y=function(e,t){return e===undefined&&(e=[]),(f["default"].filter(e||[],function(e){return e.status===t})[0]||{}).name};module.exports=c["default"]({template:p["default"],components:{"use-flow":h["default"],"support-content":g["default"],"create-model-dialog":v["default"],card:x["default"],"error-detail-dialog":b["default"]},initData:function(){return{detail:{},createModelDialogVisible:!1,fileErrorDialog:{open:!1,detail:[]}}},computed:{breadItem:function(){return[{title:"情感倾向分析定制",url:"#/ai/"+this.data.get("aiAppType")+"/sentiment/dict/list"},{title:this.data.get("detail").appName}]},btnDisabled:function(){return(this.data.get("detail").items||[]).length>=5},trainingModelName:function(){return y(this.data.get("detail.items"),r.ModelStatus.TRAINING)},effectingModelName:function(){return y(this.data.get("detail.items"),r.ModelStatus.EFFECTING)},effectedModelName:function(){return y(this.data.get("detail.items"),r.ModelStatus.EFFECT_SUCCESS)}},filters:{dateFormat:function(e,t){return e?m["default"](e).format(t):"--"}},attached:function(){var e=this;this.ajax.getSentimentModelList({appId:this.$get("appId")}).then(function(t){e.$set("detail",t)})},showErrorDetail:function(e){this.$set("fileErrorDialog",{open:!0,detail:e})},toggleCreateModelDialog:function(){this.$set("createModelDialogVisible",!this.$get("createModelDialogVisible"))},reload:function(){this.$reload()}})}),define("ai/page/sentiment/dict/detail/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-content class="sentiment-detail-content">\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="sentiment-detail-content">\n                <div class="page-title">\n                    <h2>{{detail.appName}} - 定制模型</h2>\n                    <p>应用生效时间:{{detail.effectTime | dateFormat(\'YYYY/MM/DD\')}}</p>\n                </div>\n                <use-flow toggle="{{true}}" visible="{{false}}"></use-flow>\n                <h3 class="section-title">定制模型</h3>\n                <xui-button disabled="{{btnDisabled}}" skin="primary" on-click="toggleCreateModelDialog">新建模型</xui-button>\n                <xui-tip s-if="{{btnDisabled}}"><p style="width: 220px;">每个应用仅能创建5个模型，您可删除不必要模型或在其他应用中创建</p></xui-tip>\n                <div class="main-wrap">\n                    <div class="card-list-content">\n                        <card s-for="item in detail.items"\n                            model="{{item}}"\n                            on-reloadPage="reload"\n                            reachMaxEffectNum="{{detail.reachMaxEffectNum}}"\n                            on-showErrorDetail="showErrorDetail($event)"\n                            effectingModelName="{{effectingModelName}}"\n                            trainingModelName="{{trainingModelName}}"\n                            effectedModelName="{{effectedModelName}}">\n                        </card>\n                    </div>\n                    <support-content></support-content>\n                </div>\n            </div>\n            <create-model-dialog visible="{{createModelDialogVisible}}"\n                on-finish="reload"\n                on-cancel="toggleCreateModelDialog"\n                appId="{{appId}}">\n            </create-model-dialog>\n            <error-detail-dialog open="{{fileErrorDialog.open}}" detail="{{fileErrorDialog.detail}}" title="文件校验结果"></error-detail-dialog>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/sentiment/dict/detail/SupportContent",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","../questions"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:'\n        <div class="support-content">\n            <dl>\n                <dt>用户指南</dt>\n                <dd>\n                    <a href="//ai.baidu.com/forum/topic/show/942825" target="_blank">详细使用教程</a>\n                </dd>\n                <dt>常见问题</dt>\n                <dd s-for="item in questions" class="question">\n                    <h6 on-click="toggle(item)" class="{{selectedQuestionId === item.id ? \'seleted\' : \'\'}}">\n                        {{item.title | raw}}\n                    </h6>\n                    <div s-if="item.content">\n                        {{item.content | raw}}\n                    </div>\n                </dd>\n                <dt>联系我们</dt>\n                <dd><a href="{{Url.ticket}}" target="_blank">提交工单</dd>\n            </dl>\n        </div>\n    ',initData:function(){return{selectedQuestionId:0,questions:n["default"]}},toggle:function(e){var t=e.id;e.content&&(this.$get("selectedQuestionId")===t?this.$set("selectedQuestionId",0):this.$set("selectedQuestionId",t))}})}),define("ai/page/sentiment/dict/list/Card",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","moment","ai/common/enums"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a);module.exports=n["default"]({template:'\n        <div class="card">\n            <div class="card-head">\n                <div class="app-name">{{data.appName}}</div>\n                <div class="app-id">APP ID: {{data.devAppId}}</div>\n            </div>\n            <div class="card-body">\n                <div s-if="!data.modelCount">\n                    您尚未创建情感倾向分析定制模型\n                </div>\n                <div s-else>\n                    <div class="card-item">\n                        <span class="card-item-title">模型数量：</span>\n                        <div class="card-item-value">{{data.modelCount}}个</div>\n                    </div>\n                    <template s-if="data.latestModelStatus === ModelStatus.EFFECT_SUCCESS">\n                        <div class="card-item">\n                            <span class="card-item-title">生效模型名称:</span>\n                            <div class="word-list card-item-value">{{data.latestModelName}}</div>\n                        </div>\n                        <div class="card-item">\n                            <span class="card-item-title">模型生效时间:</span>\n                            <div class="word-list card-item-value">\n                                {{data.latestModelEffectTime | dateFormat(\'YYYY/MM/DD\')}} 模型生效\n                            </div>\n                        </div>\n                    </template>\n                    <template s-else>\n                        <div class="card-item">\n                            <span class="card-item-title">最新模型名称:</span>\n                            <div class="word-list card-item-value">{{data.latestModelName}}</div>\n                        </div>\n                        <div class="card-item">\n                            <span class="card-item-title">最新模型状态:</span>\n                            <div class="word-list card-item-value">{{data.latestModelStatus | getText}}</div>\n                        </div>\n                    </template>\n                </div>\n            </div>\n            <div class="card-foot">\n                <a s-if="data.modelCount" href="#/ai/{{aiAppType}}/sentiment/dict/detail~appId={{data.appId}}">\n                    查看详情\n                </a>\n                <span s-else on-click="createModel">创建模型</span>\n            </div>\n        </div>\n    ',filters:{getText:function(e){return i.ModelStatus.fromValue(e).text},dateFormat:function(e,t){return r["default"](e).format(t)}},initData:function(){return{ModelStatus:i.ModelStatus,data:{}}},createModel:function(){this.fire("createModel",this.$get("data.appId"))}})}),define("ai/page/sentiment/dict/list/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","inf-ui/x/components/Pager","inf-ui/x/components/Loading","./Card","../CreateModelDialog/index","../UseFlow/index","../questions"],function(exports,module,e,t,a,i,n,r,s,o,l){var u=t["default"](e),d=t["default"](a),c=t["default"](i),p=t["default"](n),f=t["default"](r),m=t["default"](s),h=t["default"](o),g=t["default"](l);module.exports=u["default"]({template:d["default"],components:{card:f["default"],"xui-pager":c["default"],"xui-loading":p["default"],"use-flow":h["default"],"create-model-dialog":m["default"]},initData:function(){return{page:{pageNo:1,pageSize:9,count:0},isLoading:!0,appList:[],breadItem:[{title:"情感倾向分析定制"}],createModelDialog:{visible:!1,appId:0},questions:[{title:'<a href="//ai.baidu.com/forum/topic/show/942825" target="_blank">详细使用教程</a>'}].concat(g["default"])}},attached:function(){this.getData()},getData:function(){var e=this;this.$set("isLoading",!0),this.ajax.getSentimentAppList(this.getParams()).then(function(t){e.$$set({appList:t.items,"page.count":t.totalCount,isLoading:!1})})},getParams:function(){var e=this.$get("page");return{pageNo:e.pageNo,pageSize:e.pageSize}},toggleCreateModelDialog:function(){var e=arguments.length<=0||arguments[0]===undefined?0:arguments[0];this.$set("createModelDialog",{visible:!this.$get("createModelDialog.visible"),appId:e})},reload:function(){this.$reload()},onPagerChange:function(e){var t=e.pageNo;this.$set("page.pageNo",t),this.getData()}})}),define("ai/page/sentiment/dict/list/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n        <app-view>\n            <app-content>\n                <breadcrumb items="{{breadItem}}"></breadcrumb>\n                <div class="list-content dict-list-content sentiment-dict-list-content">\n                    <h2>\n                        情感倾向分析定制\n                        <ui-tip content="您可以通过上传适量的正向（positive）和负向（negative）语料，通过一键训练来得到一个自定义深度学习模型，快速提升不同业务场景的识别/分类准确率"></ui-tip>\n                    </h2>\n                    <use-flow></use-flow>\n                        <div class="questions">\n                            <h3 class="section-title">\n                                常见问题\n                            </h3>\n                            <ul>\n                                <li s-for="item in questions">\n                                    <template s-if="!item.content">\n                                        {{item.title | raw}}\n                                    </template>\n                                    <xui-button s-else disabled tip="<div style=\'width: 450px\'>{{item.content}}</div>" tipPosition="tc" class="button-tip">\n                                        {{item.title}}\n                                    </xui-button>\n                                </li>\n                            </ul>\n                        </div>\n                    <h3 class="section-title">我的应用</h3>\n                    <div>\n                        <xui-loading s-if="isLoading"/>\n                        <div s-elif="appList.length">\n                            <div class="card-list">\n                                <card s-for="item in appList" data="{{item}}" on-createModel="toggleCreateModelDialog($event)"></card>\n                            </div>\n                            <xui-pager size="{{page.pageSize}}"\n                                page="{{page.pageNo}}"\n                                count="{{page.count}}"\n                                back-text="<"\n                                forward-text=">"\n                                on-change="onPagerChange($event)" />\n                        </div>\n                        <div s-else class="card-list-emtpy">\n                            <div class="app-list-no-data">\n                                <div class="no-data-helper">您还没有创建任何应用！</div>\n                                <a href="#/ai/{{aiAppType}}/app/create~service=sentiment">马上创建></a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <create-model-dialog visible="{{createModelDialog.visible}}"\n                    on-finish="reload"\n                    on-cancel="toggleCreateModelDialog"\n                    appId="{{createModelDialog.appId}}">\n                </create-model-dialog>\n            </app-content>\n        </app-view>\n    </div>\n'}),define("ai/page/sentiment/dict/questions",["exports","module"],function(exports,module){module.exports=[{id:1,title:"怎么标注训练数据？",content:'\n        <p>您需要把您要训练的数据分为正向的和负向的，标注的标准可以按照实际业务场景来判断。</p>\n        <p>以手机领域的用户评论数据为例：</p>\n        <p>正向语料：对所描述事物表达肯定、满意、喜欢等态度。如：手机的功能强大，国产机的春天到了！</p>\n        <p>负向语料：对所描述事物表达否定、不满、不喜欢等态度。如：超级不耐用，系统也烂，怎么说呢，反正我是不会再买了！</p>\n        <p class="comment">\n            注：如果您没有数据标注的人力精力，您可以在『\n            <a target="_blank" href="//zhongbao.baidu.com/mark/home/index">百度数据众包平台</a>\n            』上申请，会有专业团队根据您的需求来标注数据\n        </p>\n    '},{id:2,title:"训练需要上传多少数据？",content:'\n        <p class="comment">\n            需自定义的语料分为正向语料（Positive）和负向语料（Negative），分别上传即可。\n            每行一条数据，每种语料的数量需大于100条，才可开始训练。\n            为保证定制化效果，每种训练语料最好大于1000条。当然，语料越多，模型的精度会越高。\n        </p>\n        <p>注：建议您上传的正负语料的数量比例尽量均衡（1：1）</p>\n    '},{id:3,title:"为什么不需要上传中性语料？",content:"\n        <p>\n            只上传正负语料可以让模型把分类边界更加明确 。\n            目前来说，中性的标准很难界定，且目前二分类和三分类效果持平，为了不增加用户标注负担，暂时不支持三分类定制。\n            我们也在持续迭代更新后端算法，如果三分类有明显的增益会另外再开放中性语料训练，给予用户更多场景选择。\n        </p>\n    "},{id:4,title:"模型是怎么进行自动评估的？",content:"\n        <p>情感倾向分析的定制化在技术上的步骤包括4个阶段：</p>\n        <p>1. 数据预处理；</p>\n        <p>2. 数据切分；</p>\n        <p>3. 特征提取及格式转换;</p>\n        <p>4. 训练、验证及测试等阶段。</p>\n        <p>\n            自动评估就是在第2步的时候自动从训练数据里选取十分之一的数据，并在模型训练完成后自动对模型进行评估，分别评估出模型训练前后的准确率。\n        </p>\n    "},{id:5,title:"模型训练失败的常见原因有哪些？",content:"\n        <p>1．编码错误：编码仅支持UTF8，请您确认编码形式</p>\n        <p>2．数据行为空：如果数据行为空，则不能成功训练模型</p>\n        <p>3．网络错误：其他常见网络问题</p>\n    "},{id:6,title:'<a href="//ai.baidu.com/forum/topic/show/943362" target="_blank">查看更多常见问题</a>'}]}),define("ai/page/sentiment/dict/sampleFileList",["exports","module"],function(exports,module){module.exports={positive:"https://nlp-test.bj.bcebos.com/sentiment-test/demo/sentiment_positive.txt",negative:"https://nlp-test.bj.bcebos.com/sentiment-test/demo/sentiment_negitive.txt"}}),define("ai/page/sentiment/dict/Upload/BceBosUploader",["exports","module","babel-runtime/helpers/inherits","babel-runtime/helpers/class-call-check","babel-runtime/regenerator","ai/components/BosUploader","babel-runtime/helpers/interop-require-default","ai/config"],function(exports,module,e,t,a,i,n,r){var s=function(i){function n(){t["default"](this,n),i.apply(this,arguments)}return e["default"](n,i),n.prototype._getSts=function(e){var t,i,n,s,o,l;return a["default"].async(function(u){for(var d=this;;)switch(u.prev=u.next){case 0:return u.next=2,a["default"].awrap(r.api[this.opt.stsApiKey]());case 2:t=u.sent,i=t.tempAK,n=t.tempSK,s=t.sessionToken,o=t.endpoint,l=t.protocol,this.uploader.setOptions({bos_ak:i,bos_sk:n,uptoken:s,bos_endpoint:l+"://"+o}),e.forEach(function(e){return e.deferred.resolve({key:d.renameFile(e)})});case 10:case"end":return u.stop()}},null,this)},n.prototype.renameFile=function(e){var t=e.uuid;e.name;return"upload/"+t+"-0000-"+(Math.random()*Math.pow(2,32)).toString(36)},n.prototype.remove=function(){this.files=[]},n.prototype.setError=function(e,t,a){this.files=this.files.map(function(e){return e.uuid!==a.uuid?e:(e.error=t,e)})},n}(n["default"](i)["default"]);module.exports=s}),define("ai/page/sentiment/dict/Upload/index",["exports","./TxtUpload","babel-runtime/helpers/interop-require-default","./TxtReupload"],function(exports,e,t,a){exports.__esModule=!0;var i=t["default"](e),n=t["default"](a);exports.TxtUpload=i["default"],exports.TxtReupload=n["default"]}),define("ai/page/sentiment/dict/Upload/mixin",["exports","module","babel-runtime/regenerator","san-xui","lodash","babel-runtime/helpers/interop-require-default","./BceBosUploader"],function(exports,module,e,t,a,i,n){var r=i["default"](a),s=i["default"](n);module.exports={initData:function(){return{kind:"",label:"",file:null,loading:!1,error:""}},components:{"xiu-loading":t.Loading},attached:function(){var e=this,t=this.methods;r["default"].keys(t).forEach(function(a){e[a]=t[a].bind(e)}),this.uploader=new s["default"]({autoStart:!0,stsApiKey:"getBosUploadKey",bosEndpoint:window.location.protocol+"//bj.bcebos.com",bucket:"nlpsentiment",maxFileSize:"30mb",multiple:!1,accept:".txt,text/plain",onFilesAdded:this.addFile,onComplete:this.uploadComplete,postInit:this.postInit})},methods:{postInit:function(e){var t=this;document.querySelector("#"+e+' input[type="file"]').addEventListener("change",function(e){var a="";e.target.value&&!t.uploader.files.length&&(a="请检查文件类型及大小"),t.$$set({file:null,error:a})},!1)},addFile:function(){this.$set("loading",!0)},uploadComplete:function(e){var t=this;e.forEach(function(e){if(!e||e.error)return t.$set("loading",!1),void t.$set("error","服务异常,请稍后重试");var a=t.$get("kind");t.ajax.sentimentVerifyFile({bosId:e.key,fileName:e.name,kind:"nlpSentiment"+a.slice(0,1).toUpperCase()+a.slice(1)}).then(function(e){t.verifySuccessed(e)},function(e){var a=e.field;a&&a.file&&t.verifyFailed(a.file)}).then(function(){t.$set("loading",!1)})})},verifySuccessed:function(e){this.uploadSuccessed?this.uploadSuccessed(e):this.$set("file",e)},verifyFailed:function(e){this.$set("error",e)},start:function(){return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.beforeUpload){t.next=6;break}return t.next=3,e["default"].awrap(this.beforeUpload());case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:this.uploader.remove(),this.uploader.open();case 8:case"end":return t.stop()}},null,this)},clearFile:function(){this.uploader.remove(),this.$$set({file:null,error:""})}}}}),define("ai/page/sentiment/dict/Upload/TxtReupload",["exports","module","babel-runtime/helpers/extends","babel-runtime/core-js/object/keys","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./TxtReupload.tpl","ai/common/enums","./mixin"],function(exports,module,e,t,a,i,n,r,s,o){var l=n["default"](i),u=n["default"](r),d=n["default"](o);module.exports=l["default"](e["default"]({template:u["default"]},d["default"],{initData:function(){return e["default"]({},d["default"].initData(),{label:"上传语料",title:"",model:""})},created:function(){var e=this;this.setFile(),this.watch("error",function(t){var a;t&&e.setFile(),e.fire("uploadError",(a={},a[e.$get("kind")]=t,a))})},setFile:function(){var e=this.$get("model")[this.$get("kind")+"File"];t["default"](e).length||(e=null),this.$set("file",e)},uploadSuccessed:function(e){var t,a=this,i=this.$get(),n=i.model,r=i.kind,s=(t={modelId:n.modelId},t[r+"FileId"]=e.id,t);"positive"===r&&n.negativeFile?s.negativeFileId=n.negativeFile.id:"negative"===r&&n.positiveFile&&(s.positiveFileId=n.positiveFile.id),this.ajax.sentimentModifyModel(s).then(function(){a.fire("reloadPage")},function(){a.setFile()})},beforeUpload:function(){var e,t,i;return a["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=this.$get("model.status"),!~[s.ModelStatus.EFFECT_SUCCESS,s.ModelStatus.TRAINING,s.ModelStatus.EFFECTING].indexOf(e)){n.next=5;break}return t={},t[s.ModelStatus.EFFECT_SUCCESS]="已生效模型暂不支持修改语料，如有需要，建议您重新创建模型，方便比对效果",t[s.ModelStatus.TRAINING]="模型训练中，暂时不能上传语料，请结束训练后再试",t[s.ModelStatus.EFFECTING]="模型生效中，暂时不能上传语料，请生效后再试",i=t,this.$alert({title:"无法修改",needFoot:!0,content:i[e]}),n.abrupt("return");case 5:if(e!==s.ModelStatus.TRAIN_SUCCESS){n.next=9;break}return n.next=8,a["default"].awrap(this.$confirm({title:"确认修改",content:"修改语料后需要重新训练模型，您确定继续修改？",needFoot:!0}));case 8:case 9:return n.abrupt("return",!0);case 10:case"end":return n.stop()}},null,this)}}))}),define("ai/page/sentiment/dict/Upload/TxtReupload.tpl",[],function(){return'<template>\n    <div class="text-upload-content text-reupload-content">\n        <span>{{title}}:</span>\n        <span class="uploaded-wrap" s-if="file">\n            <a class="file-name" href="{{file.url}}" target="_blank">{{file.name}}</a><i on-click="start">重传</i>\n        </span>\n        <span s-else on-click="start" class="label">{{label}}</span>\n        <xiu-loading s-if="loading" size="small" />\n    </div>\n</template>'}),define("ai/page/sentiment/dict/Upload/TxtUpload",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./TxtUpload.tpl","./mixin"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i),o=a["default"](n);module.exports=r["default"](e["default"]({template:s["default"]},o["default"]))}),define("ai/page/sentiment/dict/Upload/TxtUpload.tpl",[],function(){return'<template>\n    <div class="text-upload-content">\n        <xui-button s-if="!file" on-click="start">{{label}}</xui-button>\n        <div s-else class="uploaded">\n            <p class="item-name">{{file.name}}</p>\n            <span class="clear-file" on-click="clearFile">删除</span>\n        </div>\n        <xiu-loading s-if="loading" size="small" />\n        <div s-if="error" class="error">\n            {{error}}\n        </div>\n</template>'}),define("ai/page/sentiment/dict/UseFlow/index",["exports","module","./UseFlow","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/sentiment/dict/UseFlow/UseFlow",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n        <div class="use-flow-content">\n            <h3 class="section-title">\n                使用流程\n                <span s-if="toggle" class="toggle" on-click="toggle">{{visible ? "收起" : "展开"}}教程</span>\n            </h3>\n            <ul class="flow{{visible ? \'\' : \' hide\'}}">\n                <li>\n                    <div>\n                        <h6>创建模型</h6>\n                        上传正/负向语料\n                    </div>\n                </li>\n                <li>\n                    <div>\n                        <h6>训练模型</h6>\n                        训练并自动评估\n                    </div>\n                </li>\n                <li>\n                    <div>\n                        <h6>生效模型</h6>\n                        确认应用该模型\n                    </div>\n                </li>\n            </ul>\n        </div>\n    ',initData:function(){return{toggle:!1,visible:!0}},toggle:function(){this.$set("visible",!this.$get("visible"))}})}),define("ai/page/tuku/create/Certifying/index",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","../mixin"],function(exports,module,e,t,a,i,n){var r=a["default"](t),s=a["default"](i),o=a["default"](n);module.exports=r["default"](e["default"]({template:s["default"]},o["default"]))}),define("ai/page/tuku/create/Certifying/index.tpl",[],function(){return'<div class="tuku-details certifying">\n    <p class="tuku-title">{{qualifyTitle}}信息认证中</p>\n    <p>我们已经收到您的{{qualifyTitle}}认证申请，请耐心等待认证结果</p>\n    <p>审核时间不会很长，一般1-2个工作日，但往往会比这个要快</p>\n    <p>审核期间如有任何疑问，可以随时 <a href="{{Url.ticket}}" target="_blank">[提交工单]</a> 进行咨询</p>\n</div>\n'}),define("ai/page/tuku/create/Failed/index",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],reApply:function(){this.fire("redirect","NOT_APPLIED")}})}),define("ai/page/tuku/create/Failed/index.tpl",[],function(){return'<div class="ai-transfer-page">\n    <div class="ai-transfer-inner">\n        <div class="fail-tip">\n            <h2>建库失败</h2>\n            <p>失败原因可能是您的信息未通过审核或由于网络原因导致建库失败。<p>\n            <p>\n                <a href="javascript:void(0)" on-click="reApply" data-ui-type="Button" data-ui-skin="stringfy">重新申请</a>\n                &nbsp;\n                <a href="#/ai/{{aiAppType}}/app/detail~appId={{appId}}" data-ui-type="Button" data-ui-skin="stringfy">返回应用详情</a>\n            </p>\n        </div>\n        <div class="additional-tips">\n            <h3>温馨提示：</h3>\n            <p>1、如您后续操作遇到困难，您可以点击导航栏的“工单”提交问题。</p>\n        </div>\n    </div>\n</div>\n'}),define("ai/page/tuku/create/index",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/config","ai/common/enums","./NotCertified/index","./Certifying/index","./NotApplied/index","./Failed/index","./Success/index","inf-ui/x/components/ViewStep"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=a["default"](t),f=a["default"](i),m=a["default"](s),h=a["default"](o),g=a["default"](l),v=a["default"](u),x=a["default"](d),b=a["default"](c),y={NotCertified:m["default"],Certifying:h["default"],NotApplied:g["default"],Failed:v["default"],Success:x["default"]},k={NOT_CERTIFIED:"NotCertified",CERTIFYING:"Certifying",NOT_APPLIED:"NotApplied",SUCCESS:"Success",FAILED:"Failed"};module.exports=p["default"]({template:f["default"],components:{"xui-viewstep":b["default"]},initData:function(){return{stepList:[{text:"实名认证"},{text:"提交建库申请信息"},{text:"申请结果"}],step:0,page:-1}},computed:{title:function(){return this.data.get("stepList")[this.data.get("step")].text},breadItem:function(){return[{title:"应用列表",url:"#/ai/"+this.data.get("aiAppType")+"/app/list"},{title:"应用详情",url:"#/ai/"+this.data.get("aiAppType")+"/app/detail~appId="+this.data.get("appId")},{title:this.data.get("apiName")+"申请建库"}]}},inited:function(){var e=this;this.watch("page",this.renderPage),this.on("getQulificationStatus",function(){return e.onGetQualificationStatus()})},disposed:function(){this.page&&this.page.dispose()},onGetQualificationStatus:function(){var e=this;n.api.tukuDetail({appId:this.$get("appId"),apiId:this.$get("apiId")}).then(function(t){e.$set("tukuDetail",t),e.checkStatus()})},checkStatus:function(){var t,a,i,s;return e["default"].async(function(o){for(;;)switch(o.prev=o.next){case 0:if((t=this.$get("tukuDetail").status)!==r.TukuStatus.CREATE_TUKU_SUCCESS&&t!==r.TukuStatus.ENLARGE_TUKU_ING&&t!==r.TukuStatus.ENLARGE_TUKU_SUCCESS&&t!==r.TukuStatus.ENLARGE_TUKU_FAILED){o.next=6;break}return this.$set("page",k.SUCCESS),o.abrupt("return");case 6:if(t!==r.TukuStatus.CREATE_TUKU_FAILED){o.next=9;break}return this.$set("page",k.FAILED),o.abrupt("return");case 9:return a=this.$get("qualification.state"),o.next=12,e["default"].awrap(n.api.settingList());case 12:if(i=o.sent,s=+this.$get("apiId")!==i.logo,this.$$set({logo:!s,stepList:[{text:(s?"实名":"企业")+"认证"}].concat(this.$get("stepList").slice(1))}),!(~a.indexOf(r.QualificationStatus.ENTERPRISE_CERTIFIED)||s&&~a.indexOf(r.QualificationStatus.INDIVIDUAL_CERTIFIED))){o.next=18;break}return this.$set("page",k.NOT_APPLIED),o.abrupt("return");case 18:if(!(~a.indexOf(r.QualificationStatus.ENTERPRISE_CERTIFYING)||s&&~a.indexOf(r.QualificationStatus.INDIVIDUAL_CERTIFYING))){o.next=21;break}return this.$set("page",k.CERTIFYING),o.abrupt("return");case 21:this.$set("page",k.NOT_CERTIFIED);case 22:case"end":return o.stop()}},null,this)},renderPage:function(){var e=this;switch(this.$get("page")){case k.NOT_CERTIFIED:case k.CERTIFYING:this.$set("step",0);break;case k.NOT_APPLIED:this.$set("step",1);break;case k.SUCCESS:case k.FAILED:this.$set("step",2)}this.page&&this.page.dispose(),this.page=new(y[this.$get("page")])({data:{appId:this.$get("appId"),apiId:this.$get("apiId"),logo:this.$get("logo")}}),this.page.on("redirect",function(t){e.$set("page",k[t]),e.renderPage()}),this.page.on("newApp",function(t){e.data.push("data.appList",t)}),this.page.attach(this.el.querySelector(".tuku-wrapper"))}})}),define("ai/page/tuku/create/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content tuku-content">\n                <h2>{{title}}</h2>\n                <xui-viewstep step-index=\'{{step}}\' steps="{{stepList}}"></xui-viewstep>\n                <div class="tuku-wrapper"></div>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/tuku/create/mixin",["exports","module"],function(exports,module){module.exports={computed:{qualifyTitle:function(){return this.data.get("logo")?"企业":"实名"}}}}),define("ai/page/tuku/create/NotApplied/index",["exports","module","babel-runtime/core-js/object/keys","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","async-validator","inf-ui/x/forms/Form","inf-ui/x/forms/FormItem","inf-ui/x/components/TextBox","inf-ui/x/components/Button","ai/config","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=i["default"](a),f=i["default"](n),m=i["default"](s),h=i["default"](o),g=i["default"](l),v=i["default"](u),x=i["default"](c);module.exports=p["default"]({template:f["default"],components:{"xui-textbox":g["default"],"xui-button":v["default"],"xui-form":m["default"],"xui-item":h["default"]},computed:{disabled:function(){return!!this.data.get("errors")},isWan:function(){return this.data.get("apiId")!=this.data.get("settingList.logo")},imgToplimit:function(){var t=this.data.get("settingList")||{};if(e["default"](t).length)switch(+this.data.get("apiId")){case t.searchSame:case t.searchSimilar:case t.product:return 50;case t.logo:return 5e3;case t.dishes:return 10;case t.poi:return 800}},rules:function(){var e=this;return new r["default"]({capacity:function(t,a,i){var n=e.data.get("imgToplimit");return a?isNaN(a)?i("申请图片量必须是数字"):parseInt(a,10)>n?i("申请图片量必须小于"+n+(e.data.get("isWan")?"w":"")):i():i("请填写申请图片量")},intro:[{required:!0,message:"请填写业务场景"},{max:500,message:"业务场景不能超过500个字"}],phone:[{required:!0,message:"请填写联系电话"},{pattern:/^\d{5,11}$/,message:"联系电话格式不正确"}]})},qualifyTitle:function(){return this.data.get("logo")?"企业":"实名"},fixedNumber:function(){return+this.data.get("apiId")==+this.data.get("settingList.poi")}},attached:function(){var e;return t["default"].async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t["default"].awrap(d.api.settingList());case 2:e=a.sent,this.$set("settingList",e),this.$get("fixedNumber")&&this.$set("formData.capacity",800);case 5:case"end":return a.stop()}},null,this)},initData:function(){return{formData:{capacity:null,intro:null,phone:null},errors:null}},submit:function(){var e=this;this.ref("form").validateForm().then(function(){d.api.tukuCreate(x["default"].extend({apiId:e.$get("apiId"),appId:e.$get("appId")},e.$get("formData"),{capacity:e.$get("isWan")?1e4*e.$get("formData.capacity"):+e.$get("formData.capacity")})).then(function(t){e.fire("redirect",t?"SUCCESS":"FAILED")},function(t){t.field&&e.$set("errors",t.field)})})}})}),define("ai/page/tuku/create/NotApplied/index.tpl",[],function(){return'<div class="not-applied">\n    <div class="tuku-details tuku-details-success">\n        <p class="tuku-title">恭喜您完成{{qualifyTitle}}认证，辛苦您继续填写基础申请信息</p>\n        <p><br></p>\n    </div>\n    <div class="tuku-form tuku-sep-top">\n        <div class="tuku-section tuku-form">\n            <div class="tuku-section-title">建库申请信息</div>\n            <xui-form s-ref="form" formData="{=formData=}" rules="{{rules}}" errors="{=errors=}">\n                <xui-item class="ui-form-item-required" name="capacity" label="申请图片量：">\n                    <xui-textbox disabled="{{fixedNumber}}" type="text" value="{=formData.capacity=}" width="180" placeholder="请填写申请图片数量"></xui-textbox>\n                    <span s-if="isWan">万</span>\n                </xui-item>\n                <xui-item class="ui-form-item-required" name="intro" label="业务场景：">\n                    <xui-textbox multiline type="text" value="{=formData.intro=}" placeholder="请填写少于500字的业务场景"></xui-textbox>\n                </xui-item>\n                <xui-item class="ui-form-item-required" name="phone" label="联系电话：">\n                    <xui-textbox type="text" value="{=formData.phone=}" placeholder="请填写联系电话"></xui-textbox>\n                </xui-item>\n                <xui-item label=" ">\n                    <xui-button on-click="submit" disabled="{{disabled}}" skin="ok">确定</xui-button>\n                </xui-item>\n            </xui-form>\n        </div>\n\n    </div>\n</div>\n'}),define("ai/page/tuku/create/NotCertified/index",["exports","module","babel-runtime/helpers/extends","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","esui/Dialog","../mixin"],function(exports,module,e,t,a,i,n,r){var s=a["default"](t),o=a["default"](i),l=a["default"](n),u=a["default"](r);module.exports=s["default"](e["default"]({template:o["default"]},u["default"],{qualify:function(){var e=this,t=l["default"].confirm({title:"认证提交",width:400,content:'<p class="auth-dialog-content">如已提交认证信息请等待结果通知</p>',closeButton:!0,needFoot:!0,encode:!1,draggable:!0,okText:"已提交信息",cancelText:"重新提交"});t.on("ok",function(){window.location.reload()}),t.on("cancel",function(){window.open(e.$get("Url").personalQualify),e.qualify()}),t.resize()}}))}),define("ai/page/tuku/create/NotCertified/index.tpl",[],function(){return'<div class="tuku-details not-certified">\n    <p class="tuku-title">开发者您好，如需申请建库，请先完成{{qualifyTitle}}认证</p>\n    <p>开始申请前，我们首先需要确保您已经完成了{{qualifyTitle}}认证</p>\n    <p>{{qualifyTitle}}认证自提交信息后，审核时间一般为1-2个工作日，感谢您的配合</p>\n    <div class="buttons">\n        <a href="{{Url.personalQualify}}" target="_blank" class="ui-ctrl ui-button skin-ok skin-ok-button" on-click="qualify">去认证</a>\n    </div>\n</div>\n'}),define("ai/page/tuku/create/Success/index",["exports","module","babel-runtime/regenerator","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl"],function(exports,module,e,t,a,i){var n=a["default"](t),r=a["default"](i);module.exports=n["default"]({template:r["default"],initData:function(){return{showManage:!1}},created:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e["default"].awrap(this.ajax.settingList());case 2:t=s.sent,a=t.searchSame,i=t.searchSimilar,n=t.product,r=this.$get("apiId"),this.$set("showManage",!!~[+a,+i,+n].indexOf(+r));case 8:case"end":return s.stop()}},null,this)}})}),define("ai/page/tuku/create/Success/index.tpl",[],function(){return'<div class="ai-transfer-page">\n    <div class="ai-transfer-inner">\n        <div class="success-tip">\n            <h2>建库成功</h2>\n            <p>您可以通过使用入库接口完成图片入库。<p>\n            <p>\n                <a href="#/ai/{{aiAppType}}/app/detail~appId={{appId}}" data-ui-type="Button" data-ui-skin="stringfy">返回应用详情</a>\n                <a s-if="showManage" class="sec-link" href="#/ai/{{aiAppType}}/app/tuku/manage/index~appId={{appId}}&apiId={{apiId}}" data-ui-type="Button" data-ui-skin="stringfy">管理图库</a>\n            </p>\n        </div>\n        <div class="additional-tips">\n            <h3>温馨提示：</h3>\n            <p>1、如您后续操作遇到困难，您可以点击导航栏的“工单”提交问题。</p>\n        </div>\n    </div>\n</div>\n'}),define("ai/page/tuku/enlarge/auditing",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n        <div class="ai-wrapper ai-main-wrap">\n            <app-view>\n                <app-content>\n                    <div class="ai-transfer-page">\n                        <div class="ai-transfer-inner">\n                            <div class="auditing-tip">\n                                <h2>扩容审核中</h2>\n                                <p>扩容审核预计需要3个工作日，请耐心等待，感谢您的配合。<p>\n                                <p>\n                                    <a href="#/ai/{{aiAppType}}/app/detail~appId={{appId}}" data-ui-type="Button" data-ui-skin="stringfy">返回应用详情</a>\n                                </p>\n                            </div>\n                            <div class="additional-tips">\n                                <h3>温馨提示：</h3>\n                                <p>1、如您后续操作遇到困难，您可以点击导航栏的“工单”提交问题。</p>\n                            </div>\n                        </div>\n                    </div>\n                </app-content>\n            </app-view>\n        </div>\n    '})}),define("ai/page/tuku/enlarge/failed",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]({template:'\n        <div class="ai-wrapper ai-main-wrap">\n            <app-view>\n                <app-content>\n                    <div class="ai-transfer-page">\n                        <div class="ai-transfer-inner">\n                            <div class="fail-tip">\n                                <h2>扩容失败</h2>\n                                <p>失败原因可能是您的信息未通过审核，如有疑问可提交 <a href="{{Url.ticket}}" target="_blank">提交工单</a> 进行咨询。<p>\n                                <p>\n                                    <a href="#/ai/{{aiAppType}}/app/detail~appId={{appId}}" data-ui-type="Button" data-ui-skin="stringfy">返回应用详情</a>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </app-content>\n            </app-view>\n        </div>\n    '})}),define("ai/page/tuku/enlarge/index",["exports","module","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","ai/config","inf-ui/x/forms/Form","inf-ui/x/forms/FormItem","inf-ui/x/components/TextBox","inf-ui/x/components/Button","inf-ui/x/components/BoxGroup","async-validator","ai/common/enums","lodash"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c){var p=t["default"](e),f=t["default"](a),m=t["default"](n),h=t["default"](r),g=t["default"](s),v=t["default"](o),x=t["default"](l),b=t["default"](c);module.exports=p["default"]({template:f["default"],components:{"xui-boxgroup":x["default"],"xui-textbox":g["default"],"xui-button":v["default"],"xui-form":m["default"],"xui-item":h["default"]},computed:{btnDisabled:function(){return!!this.data.get("errors")},breadItem:function(){return[{title:"应用列表",url:"#/ai/"+this.data.get("aiAppType")+"/app/list"},{title:"应用详情",url:"#/ai/"+this.data.get("aiAppType")+"/app/detail~appId="+this.data.get("appId")},{title:this.data.get("apiName")+"申请扩容"}]},imgToplimit:function(){var e=this.data.get("settingList")||{};if(e)switch(+this.data.get("apiId")){case e.searchSame:case e.searchSimilar:case e.product:return 50;case e.logo:return 1;case e.dishes:return 10}},rules:function(){var e=this;return new u["default"]({capacity:function(t,a,i){var n=e.data.get("imgToplimit");return a?isNaN(a)?i("申请图片量必须是数字"):parseInt(a,10)>n?i("申请图片量必须小于"+n+"w"):i():i("请填写申请图片量")},intro:[{required:!0,message:"请填写业务场景"},{max:500,message:"业务场景不能超过500个字"}],phone:[{required:!0,message:"请填写联系电话"},{pattern:/^\d{5,11}$/,message:"联系电话格式不正确"}]})}},attached:function(){var e=this;i.api.settingList().then(function(t){e.$set("settingList",t)})},initData:function(){return{data:{capacity:null,intro:null,phone:null},errors:null,limitDatasource:d.TukuLimit.toArray()}},submit:function(){var e=this;this.ref("form").validateForm().then(function(){e.save()})},cancel:function(){this.$redirect("/ai/"+this.aiAppType+"/app/detail~appId="+this.$get("appId"))},save:function(){var e=this;i.api.tukuEnlarge(this.getParams()).then(function(){e.$redirect("#/ai/"+e.aiAppType+"/app/tuku/enlarge/auditing~appId="+e.$get("appId"))},function(t){t.field&&e.$set("errors",t.field)})},getParams:function(){return b["default"].extend({appId:this.$get("appId"),apiId:this.$get("apiId")},this.$get("data"),{capacity:1e4*this.$get("data.capacity")})}})}),define("ai/page/tuku/enlarge/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content">\n                <h2>申请扩容</h2>\n                <xui-form formData="{=data=}" rules="{{rules}}" errors="{=errors=}" s-ref="form">\n                    <xui-item class="ui-form-item-required" name="capacity" label="申请图片量：">\n                        <xui-textbox type="text" value="{=data.capacity=}" width="180" placeholder="请填写申请图片数量"></xui-textbox>\n                        <span>万</span>\n                    </xui-item>\n                    <xui-item class="ui-form-item-required" name="intro" label="业务场景：">\n                        <xui-textbox multiline type="text" value="{=data.intro=}" placeholder="请填写少于500字的业务场景"></xui-textbox>\n                    </xui-item>\n                    <xui-item class="ui-form-item-required" name="phone" label="联系电话：">\n                        <xui-textbox type="text" value="{=data.phone=}" placeholder="请填写联系电话"></xui-textbox>\n                    </xui-item>\n                    <xui-item label=" ">\n                        注：若有其他诉求，请提交工单咨询\n                    </xui-item>\n                    <xui-item label=" ">\n                        <xui-button on-click="submit" disabled="{{btnDisabled}}" skin="ok">申请</xui-button>\n                        <xui-button on-click="cancel">取消</xui-button>\n                    </xui-item>\n                </xui-form>\n            </div>\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/tuku/manage/bosUploaderConfig",["exports","module"],function(exports,module){module.exports={bucket:"tuku-tmp",bosEndpoint:window.location.protocol+"//bj.bcebos.com",stsApiKey:"getTukuManageSts"}}),define("ai/page/tuku/manage/config",["exports","module"],function(exports,module){module.exports={classLimit:65535}}),define("ai/page/tuku/manage/EditLabel/EditLabel",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./EditLabel.tpl","../config"],function(exports,module,e,t,a,i){var n=t["default"](e),r=t["default"](a);module.exports=n["default"]({template:r["default"],initData:function(){return{width:20,editting:!1,classLimit:i.classLimit,text:"",payload:{},ifClass:!1,classIndex:0}},showInput:function(){var e=this;this.$set("editting",!0),this.nextTick(function(){e.el.querySelector("input").focus()})},handleBlur:function(){if(this.validateText()){var e=this.data.get(),t=e.ifClass,a=e.classIndex,i=e.text,n=e.payload;if(n=JSON.parse(JSON.stringify(n)),i=i.trim(),t){if(n.classList[a]===i)return void this.$set("editting",!1);n.classList[a]=i}else{if(n.brief===i)return void this.$set("editting",!1);n.brief=i}n.classList=n.classList.map(function(e){return e||0}).join(","),this.fire("update",n),this.$set("editting",!1)}else this.showInput()},validateText:function(){var e=this.data.get(),t=e.ifClass,a=e.text,i=e.classLimit;if(a=a.trim(),!t)return!(a.length<=0)||(this.$toast("摘要不能为空",{messageType:"error"}),!1);if(a.length<=0)return!0;var n=+a;return!(!/^\d+$/.test(a)||n<1||n>i)||(this.$toast("分类只能输入 1-"+i+" 之间的整数",{messageType:"error"}),!1)}})}),define("ai/page/tuku/manage/EditLabel/EditLabel.tpl",[],function(){return'<div class="edit-label" style="width:{{width}}px">\n    \x3c!-- 非编辑状态显示普通文字 --\x3e\n    <span s-if="!editting" on-click="showInput" style="width:{{width}}px;" class="text-label{{text?\'\':\' text-label-empty\'}}">{{text? text : \'无\'}}</span>\n    \x3c!-- 编辑状态显示输入框 --\x3e\n    <div s-else class="ui-textbox ui-textbox-x">\n        <input on-blur="handleBlur" type="text" value="{=text=}" style="width: 100%; height: 20px;">\n    </div>\n</div>\n'}),define("ai/page/tuku/manage/EditLabel/index",["exports","module","./EditLabel","babel-runtime/helpers/interop-require"],function(exports,module,e,t){exports["default"]=t["default"](e),module.exports=exports["default"]}),define("ai/page/tuku/manage/index",["exports","module","babel-runtime/regenerator","ai/common/page","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./index.tpl","./UploadDialog/index","./PreviewSlider/index","./SearchBox/index","inf-ui/x/biz/helper","lodash","san-xui","./EditLabel/index","./config","ai/config/constants"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p){var f=a["default"](t),m=a["default"](i),h=a["default"](n),g=a["default"](r),v=a["default"](s),x=a["default"](l),b=a["default"](d);module.exports=f["default"]({template:m["default"],components:{"xui-select":u.Select,"xui-dialog":u.Dialog,"upload-dialog":h["default"],"preview-slider":g["default"],"xui-tip":u.Tip,"xui-textbox":u.TextBox,"xui-pager":u.Pager,"search-box":v["default"],"edit-label":b["default"]},initData:function(){return{loading:!1,previewOptions:{open:!1,activeIndex:0},wrapWidth:1200,itemWidth:200,appName:"",appType:0,title:"",classNum:1,classLimit:c.classLimit,volumeLabel:"-",volume:0,leftVolume:{totalLabel:"-",total:"-",day:0,uploadNum:-1},pageInfo:{page:1,pageSize:10,total:1,list:[]},searchOptions:{type:"class",value:"",bosId:""}}},computed:{breadItem:function(){return[{title:"应用列表",url:"#/ai/"+this.data.get("aiAppType")+"/app/list"},{title:"应用详情",url:"#/ai/"+this.data.get("aiAppType")+"/app/detail~appId="+this.data.get("appId")},{title:"管理图库"}]},unused:function(){return 0===this.data.get("leftVolume.uploadNum")},checkedNum:function(){return this.data.get("pageInfo.list").filter(function(e){return e.checked}).length},numsInRow:function(){return~~((this.data.get("wrapWidth")-20)/220)},itemWidth:function(){var e=this.data.get("wrapWidth"),t=this.data.get("numsInRow");return~~((e-20-20*t)/t)},itemHeight:function(){return this.data.get("itemWidth")+78},wrapHeight:function(){return 4*(this.data.get("itemHeight")+20)},itemStyles:function(){var e=this.data.get("numsInRow"),t=this.data.get("itemWidth"),a=this.data.get("itemHeight"),i=this.data.get("pageInfo.list"),n=Math.max(4*e,i.length);return Array.apply(null,Array(n)).map(function(i,n){var r=0,s=n;s>=e&&(s%=e,r=Math.floor(n/e));var o=["width:"+(t+25)+"px","height:"+(a+25)+"px","left:"+((20+t)*s+10)+"px","top:"+((20+a)*r+10)+"px"];return n>=4*e&&o.push("display:none"),o.join(";")})},isImageSearch:function(){return~p.IMAGE_SEARCH_TUKU_APIIDS_NAMES.ids.indexOf(+this.data.get("apiId"))}},attached:function(){var e=this;this.inovkeUpdateWrapWidth(),this.funcUpdateWrapWidth=x["default"].debounce(function(){return e.inovkeUpdateWrapWidth()},200),window.addEventListener("resize",this.funcUpdateWrapWidth),this.fetchDetail(),this.fetchLeftVolume(),this.fetchCurrentPage(),this.watch("pageInfo.pageSize",function(){return e.fetchCurrentPage()}),this.watch("pageInfo.page",function(){return e.fetchCurrentPage()})},disposed:function(){window.removeEventListener("resize",this.funcUpdateWrapWidth)},inovkeUpdateWrapWidth:function(){this.ref("tuku_page")&&(this.$set("wrapWidth",document.querySelector(".create-main").clientWidth),this.$set("pageInfo.pageSize",4*this.$get("numsInRow")))},showUploadDialog:function(){var e=this.$get("leftVolume"),t=e.day;e.total<=0?o.alert("图库容量已用完，请扩容。"):t<=0?o.alert("今日上传图片额度已用完，更多图片请调用API入库。"):this.ref("uploaddialog").show()},toggleAllChecked:function(){var e=this.$get("pageInfo.list");if(this.$get("checkedNum")!==e.length)for(t=0,a=e.length;t<a;t++)this.$set("pageInfo.list["+t+"].checked",!0);else for(var t=0,a=e.length;t<a;t++)this.$set("pageInfo.list["+t+"].checked",!1)},handlePageChange:function(e){var t=e.pageNo;this.$set("pageInfo.page",t)},showPreviewSlider:function(e){this.$$set({"previewOptions.activeIndex":e,"previewOptions.open":!0})},handlePrePage:function(){var e=this.$get("pageInfo.page");e<=1||this.$$set({"pageInfo.page":e-1,"previewOptions.activeIndex":0})},handleNextPage:function(){this.$$set({"pageInfo.page":this.$get("pageInfo.page")+1,"previewOptions.activeIndex":0})},fetchDetail:function(){var t,a,i,n,r,s,o,l,u,d,c;return e["default"].async(function(p){for(;;)switch(p.prev=p.next){case 0:return t=this.data.get(),a=t.apiId,i=t.appId,p.next=5,e["default"].awrap(this.ajax.getTukuManageDetail({apiId:a,appId:i}));case 5:n=p.sent,r=n.title,s=n.appName,o=n.appType,l=n.classNum,u=n.volume,d=n.volumeLabel,c=n.classLimit,this.$$set({title:r,appName:s,appType:o,classNum:l,volume:u,volumeLabel:d,classLimit:c});case 14:case"end":return p.stop()}},null,this)},fetchLeftVolume:function(){var t,a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.data.get(),a=t.apiId,i=t.appId,r.next=5,e["default"].awrap(this.ajax.getTukuManageLeftVolume({appId:i,apiId:a}));case 5:n=r.sent,this.$set("leftVolume",n);case 7:case"end":return r.stop()}},null,this)},fetchCurrentPage:x["default"].debounce(function(){var t,a,i,n,r,s,o,l,u,d;return e["default"].async(function(c){for(;;)switch(c.prev=c.next){case 0:return this.fetchLeftVolume(),t=this.data.get(),a=t.apiId,i=t.appId,n=t.pageInfo,r=t.searchOptions,s=r.type,o=r.value,l=r.bosId,u={apiId:a,appId:i,page:n.page,pageSize:n.pageSize},l?u.bosId=l:u[s]=o,c.next=13,e["default"].awrap(this.ajax.getTukuManageList(u));case 13:(d=c.sent).list.forEach(function(e){e.classList=e.classList.split(",").map(function(e){return"0"===e.trim()?"":e})}),this.$$set({"pageInfo.total":d.total,"pageInfo.list":d.list,"pageInfo.page":d.page});case 16:case"end":return c.stop()}},null,this)},200),fetchFirstPage:function(){this.$set("pageInfo.page",1),this.fetchCurrentPage()},gotoExt:function(){var e=this.data.get(),t=e.appId,a=e.apiId,i=e.title;this.$aiRedirect("app/tuku/enlarge/index",{appId:t,apiId:a,apiName:i})},deleteImgs:function(t){var a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=[t],t||(a=this.$get("pageInfo.list").filter(function(e){return e.checked}).map(function(e){return e.fileId})),a.length){s.next=4;break}return s.abrupt("return");case 4:return s.next=6,e["default"].awrap(o.confirm({message:"图片删除后无法修复，确认删除选中的"+a.length+"张图片么？",width:500}));case 6:return i=this.data.get(),n=i.apiId,r=i.appId,s.next=11,e["default"].awrap(this.ajax.delTukuManageImg({apiId:n,appId:r,fileIds:a.join(",")}));case 11:this.$toast("图片删除成功"),this.fetchCurrentPage();case 13:case"end":return s.stop()}},null,this)},updateClassAndBrief:function(t){var a,i,n;return e["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=this.data.get(),i=a.appId,n=a.apiId,r.next=5,e["default"].awrap(this.ajax.updateTukuClassAndBrief(x["default"].assign({},t,{appId:i,apiId:n})));case 5:this.$toast("修改成功"),this.fetchCurrentPage();case 7:case"end":return r.stop()}},null,this)}})}),define("ai/page/tuku/manage/index.tpl",[],function(){return'<div class="ai-wrapper ai-main-wrap">\n    <app-view>\n        <app-sidebar />\n        <app-content>\n            <breadcrumb items="{{breadItem}}"></breadcrumb>\n            <div class="list-content tuku-manage-content">\n                <h2 class="tuku-title">\n                    [{{appName}}] {{title}}\n                    <xui-tip>\n                        <div style="width:300px;">图库管理后台支持预览2018/6/5之后入库的图片，历史图片仅存储特征，无法可视化管理。</div>\n                    </xui-tip>\n                    <div class="right-wrap">\n                        <span class="tuku-tip">图库容量：{{volumeLabel}}</span>\n                        <span class="tuku-tip">可入库余量：{{leftVolume.totalLabel}}</span>\n                        <a on-click="gotoExt" class="tuku-ext-link" href="javascript:void(0);">申请扩容</a>\n                    </div>\n                </h2>\n                <div class="tuku-wrapper">\n                    <div class="tool-bar">\n                        <upload-dialog classNum="{{classNum}}" classLimit="{{classLimit}}" isImageSearch="{{isImageSearch}}" on-update="fetchCurrentPage" s-ref="uploaddialog"/>\n                        <xui-button s-ref="uploadBtn" on-click="showUploadDialog" icon="plus" skin="primary" label="上传图片" />\n                        <div class="search-wrap">\n                            <search-box isImageSearch="{{isImageSearch}}" on-search="fetchFirstPage" type="{=searchOptions.type=}" value="{=searchOptions.value=}" bosId="{=searchOptions.bosId=}" appType="{{appType}}" />\n                        </div>\n                    </div>\n                    \x3c!-- 图库为空 --\x3e\n                    <div class="tuku-unused" s-if="unused">\n                        <div class="unused-image"></div>\n                        <div class="unused-btn-wrap">\n                            <xui-button on-click="showUploadDialog" size="large" skin="primary">点击添加图片</xui-button>\n                        </div>\n                        <div class="unused-tip">单次最多可上传10张，仅支持3M以内PNG、JPG、JPEG、BMP格式的图片</div>\n                        <div class="unused-tip">建议长宽比3：1 ，其中宽度在4096px和30px之间</div>\n                    </div>\n                    \x3c!-- 图库搜索出来有结果 --\x3e\n                    <div class="tuku-page-wrap" s-elif="pageInfo.total > 0">\n                        <div class="tuku-ctl-bar">\n                            <xui-checkbox on-change="toggleAllChecked" checked="{{checkedNum === pageInfo.list.length && pageInfo.list.length > 0}}" title="本页全选" />\n                            <span class="checked-num">已选择{{checkedNum}}张</span>\n                            <a on-click="deleteImgs()" class="del-checked" href="javascript:void(0)">\n                                <xui-icon name="trash-alt" />\n                                <span>删除所选</span>\n                            </a>\n                            <p s-if="{{isImageSearch}}">注：图库管理仅供测试体验，实际业务中对图片库的管理操作（入库、删除、更新），请以API接口调用结果为准。</p>\n                        </div>\n                        <div s-ref="tuku_page" class="tuku-page" style="height:{{wrapHeight}}px">\n                            <div s-for="item,index in pageInfo.list" class="tuku-page-item" style="{{itemStyles[index]}}">\n                                <div class="item-img-wrap" style="width:{{itemWidth}}px;height:{{itemWidth}}px">\n                                    <img src="/ai/s/tuku/manage/image?appId={{appId}}&apiId={{apiId}}&fileId={{item.fileId}}&width=240&height=240" class="item-img">\n                                    <xui-checkbox class="img-ctl-checkbox" checked="{=item.checked=}" />\n                                    \x3c!-- 操作框 --\x3e\n                                    <div class="img-ctl-wrap">\n                                        <div on-click="showPreviewSlider(index)" class="img-ctl-bar">\n                                            <xui-icon name="eye" />\n                                        </div>\n                                        <div class="img-ctl-bar" on-click="deleteImgs(item.fileId)">\n                                            <xui-icon name="trash-alt" />\n                                        </div>\n                                    </div>\n                                </div>\n                                <div\n                                    class="item-class-row"\n                                    s-if="{{item.contSign}}"\n                                >\n                                    <span class="tooltipped tooltipped-e" aria-label="{{item.contSign}}">图片签名:</span>\n                                    <div style="width:{{itemWidth - 55}}px" class="too-long">{{item.contSign}}</div>\n                                </div>\n                                <div class="item-class-row">\n                                    <div class="item-class">\n                                        <span class="item-class-lbl">分类：</span>\n                                        <edit-label on-update="updateClassAndBrief" width="{{itemWidth/2-50}}" payload="{{item}}" text="{{item.classList[0]}}" if-class="{{true}}" class-index="{{0}}" class-limit="{{classLimit}}"/>\n                                    </div>\n                                    <div class="item-class">\n                                        <span class="item-class-lbl">分类：</span>\n                                        <edit-label on-update="updateClassAndBrief" width="{{itemWidth/2-50}}" payload="{{item}}" text="{{item.classList[1]}}" if-class="{{true}}" class-index="{{1}}" class-limit="{{classLimit}}"/>\n                                    </div>\n                                </div>\n                                <div class="item-brief">\n                                    摘要：\n                                    <edit-label on-update="updateClassAndBrief" width="{{itemWidth-50}}" payload="{{item}}" text="{{item.brief}}" if-class="{{false}}" class-limit="{{classLimit}}"/>\n                                </div>\n                                <div class="item-class-row" s-if="{{item.score}}">\n                                    相关性得分: {{item.score}}\n                                </div>\n                            </div>\n                        </div>\n                        <xui-pager on-change="handlePageChange" count="{{pageInfo.total}}" page="{=pageInfo.page=}" size="{{pageInfo.pageSize}}" />\n                    </div>\n                    \x3c!-- 未搜索到结果 --\x3e\n                    <div class="tuku-empty ui-table-body-nodata" s-else>\n                        <div class="app-list-no-data">\n                            <div class="no-data-content">未检索出相关图片</div>\n                         </div>\n                    </div>\n                </div>\n                <xui-dialog open="{=loading=}" foot="{{false}}" head="{{false}}" width="110">\n                    <xui-loading />\n                </xui-dialog>\n            </div>\n            <preview-slider on-prePage="handlePrePage" on-nextPage="handleNextPage" open="{=previewOptions.open=}" active-index="{=previewOptions.activeIndex=}" list="{{pageInfo.list}}" />\n        </app-content>\n    </app-view>\n</div>\n'}),define("ai/page/tuku/manage/PreviewSlider/index",["exports","module","./PreviewSlider","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/tuku/manage/PreviewSlider/PreviewSlider",["exports","module","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./PreviewSlider.tpl"],function(exports,module,e,t,a){var i=t["default"](e),n=t["default"](a);module.exports=i["default"]({template:n["default"],initData:function(){return{open:!1,activeIndex:0,list:[]}},computed:{barHeight:function(){return(66*Math.ceil(this.data.get("list").length/14)||66)+10+"px"}},attached:function(){var e=this.el;e.parentNode!==document.body&&document.body.appendChild(e);var t=this.$route().query,a=t.appId,i=t.apiId;this.$$set({appId:a,apiId:i})},handleClose:function(){this.$set("open",!1)},preImg:function(){var e=this.$get("activeIndex");e>0&&this.$set("activeIndex",e-1)},nextImg:function(){var e=this.$get("activeIndex");e<this.$get("list").length-1&&this.$set("activeIndex",e+1)},setImg:function(e){this.$set("activeIndex",e)},prePage:function(){this.fire("prePage")},nextPage:function(){this.fire("nextPage")}})}),define("ai/page/tuku/manage/PreviewSlider/PreviewSlider.tpl",[],function(){return'<template>\n    <div s-if="open" class="tuku-manage-preview-slider">\n        <div class="tuku-image-ps-wrap">\n            <xui-icon class="tuku-image-ps-close" on-click="native:handleClose" name="close" />\n            <div class="slider-wrap">\n                <xui-icon s-if="activeIndex > 0" on-click="native:preImg" class="arrow-left" name="thin-arrow-left" />\n                <xui-icon s-if="activeIndex < list.length - 1" on-click="native:nextImg" class="arrow-right" name="thin-arrow" />\n                <img src="/ai/s/tuku/manage/image?appId={{appId}}&apiId={{apiId}}&fileId={{list[activeIndex].fileId}}" >\n            </div>\n            <div class="ctl-bar" style="height: {{barHeight}}">\n                <div on-click="prePage" class="left-wrap">\n                    <xui-icon class="arrow-left" name="arrow-left" />\n                </div>\n                <div on-click="nextPage" class="right-wrap">\n                    <xui-icon class="arrow-right" name="arrow-right" />\n                </div>   \n                <img on-click="setImg(index)" s-for="item,index in list" src="/ai/s/tuku/manage/image?appId={{appId}}&apiId={{apiId}}&fileId={{item.fileId}}&width=54&height=54" class="ctl-pre-item{{index === activeIndex? \' active\':\'\'}}">\n            </div>\n        </div>\n    </div>\n</template>\n'}),define("ai/page/tuku/manage/SearchBox/index",["exports","module","./SearchBox","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/tuku/manage/SearchBox/SearchBox",["exports","module","inf-ria/EnumX","babel-runtime/helpers/interop-require-default","ai/common/component","bat-ria/tpl!./SearchBox.tpl","san-xui","ai/components/BosUploader","lodash","../bosUploaderConfig"],function(exports,module,e,t,a,i,n,r,s,o){var l=t["default"](e),u=t["default"](a),d=t["default"](i),c=t["default"](r),p=t["default"](s),f=t["default"](o),m=["jpeg","jpg","bmp","png"],h=new l["default"]({alias:"SAME",value:1},{alias:"SIMILAR",value:2},{alias:"GOODS",value:3},{alias:"PICBOOK",value:4});module.exports=u["default"]({template:d["default"],components:{"xui-select":n.Select,"xui-textbox":n.TextBox},initData:function(){var e;return{type:"class",value:"",bosId:"",imgUrl:"",searchTip:(e={},e[h.SAME]="上传图片，测试相同图检索效果，返回结果按相关性（score分值）倒序排列",e[h.SIMILAR]="上传图片，测试相似图检索效果，默认返回相关性（score分值）Top 50的结果，如图库不满50张图，则全部返回",e[h.GOODS]="上传图片，测试商品图检索效果，默认返回相关性（score分值）Top 50的结果，如图库不满50张图，则全部返回",e[h.PICBOOK]="上传图片，测试绘本图检索效果，默认返回相关性（score分值）Top 50的结果，如图库不满50张图，则全部返回",e)}},computed:{placeholder:function(){if(this.data.get("textboxDisabled"))return"";return"请输入"+{"class":"分类",brief:"摘要",contSign:"图片签名"}[this.data.get("type")]+"名称"},textboxDisabled:function(){return!!this.data.get("bosId")},selectOptions:function(){return[{text:"分类",value:"class"},{text:"摘要",value:"brief"}].concat(this.data.get("isImageSearch")?[{text:"图片签名",value:"contSign"}]:[])}},attached:function(){var e=this,t=this.$route().query,a=t.appId,i=t.apiId;this.$$set({appId:a,apiId:i});var n={autoStart:!0,multiple:!1,maxFileSize:"3mb",accept:[].concat(m.map(function(e){return"image/"+e}),m.map(function(e){return"."+e})).join(","),onComplete:function(t){var a=t[0];e.$$set({bosId:a.key,imgUrl:a.url})}};p["default"].extend(n,f["default"]),this.uploader=new c["default"](n)},openFileDialog:function(){this.uploader.open()},clearFile:function(){this.$$set({bosId:"",imgUrl:""})},search:function(){this.fire("search")}})}),define("ai/page/tuku/manage/SearchBox/SearchBox.tpl",[],function(){return'<div class="search-box">\n    <xui-select class="search-select" datasource="{{selectOptions}}" value="{=type=}" layer-width="90" width="90" />\n    <xui-textbox disabled="{{textboxDisabled}}" class="search-tb" value="{=value=}" placeholder="{{placeholder}}" />\n    <xui-button on-click="search" icon="search" />\n    <xui-icon on-click="native:openFileDialog" class="search-file" name="camera" />\n    <p class="search-tip">{{searchTip[appType]}}</p>\n    <div s-if="imgUrl" class="search-img" on-click="clearFile">\n            <img src="{{imgUrl}}" >\n    </div>\n</div>\n'}),define("ai/page/tuku/manage/UploadDialog/index",["exports","module","./UploadDialog","babel-runtime/helpers/interop-require-default"],function(exports,module,e,t){var a=t["default"](e);module.exports=a["default"]}),define("ai/page/tuku/manage/UploadDialog/UploadDialog",["exports","module","babel-runtime/regenerator","babel-runtime/core-js/promise","san","ai/common/component","babel-runtime/helpers/interop-require-default","bat-ria/tpl!./UploadDialog.tpl","inf-ui/x/components/Button","inf-ui/x/components/TextBox","inf-ui/x/components/Dialog","ai/components/BosUploader","lodash","../bosUploaderConfig","../config","ai/common/util"],function(exports,module,e,t,a,i,n,r,s,o,l,u,d,c,p,f){var m=n["default"](i),h=n["default"](r),g=n["default"](s),v=n["default"](o),x=n["default"](l),b=n["default"](u),y=n["default"](d),k=n["default"](c),T=["jpeg","jpg","bmp","png"];module.exports=m["default"]({template:h["default"],components:{"xui-button":g["default"],"xui-textbox":v["default"],"xui-dialog":x["default"]},initData:function(){return{step:0,open:!1,classNum:2,classLimit:p.classLimit,files:[],errorFiles:[]}},computed:{errFiles:function(){return this.data.get("files").filter(function(e){return!!e.message})},fillPercent:function(){var e=this.data.get("files");return(100*e.filter(function(e){return e.filled}).length/e.length).toFixed(2)+"%"},infoTitle:function(){var e=this.data.get("files"),t=this.data.get("errFiles");return t.length?e.length-t.length+"张图片上传成功！"+t.length+"张图片上传失败！":"图片上传成功！"},infoDes:function(){var e=this.data.get("files"),t=this.data.get("errFiles");return t.length?"失败原因："+t[0].message:"成功上传"+e.length+"张图片，3秒后自动跳转"}},dataTypes:{classNum:a.DataTypes.number,classLimit:a.DataTypes.number},attached:function(){var t=this,a={autoStart:!0,multiple:!0,maxFileSize:"1Gb",accept:[].concat(T.map(function(e){return"image/"+e}),T.map(function(e){return"."+e})).join(","),onFilesAdded:function(e){e.splice(10),e.forEach(function(e){e.progress="等待中",e.classList=Array.apply(null,Array(t.$get("classNum")).map(function(){return""})),e.brief="",e.error={classList:e.classList.map(function(){return!1}),brief:!1}}),t.$$set({step:1,files:e.slice(),open:!0})},onProgress:function(e){e.forEach(function(e,a){return t.data.splice("files",[a,1,e])})},onComplete:function(a){var i,n,r,s,o;return e["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:i=[],n=[],r=0;case 3:if(!(r<a.length)){t.next=12;break}return s=a[r],t.next=7,e["default"].awrap(f.loadImage(s.url));case 7:(o=t.sent).width<30||o.height<30?i.push({name:s.name,reason:"最短边小于30px"}):o.width>4096||o.height>4096?i.push({name:s.name,reason:"最长边大于4096px"}):n.push(s);case 9:r++,t.next=3;break;case 12:n.length&&this.$set("step",2),this.$$set({files:n.slice(),errorFiles:[].concat(i,this.$get("errorFiles"))});case 14:case"end":return t.stop()}},null,t)},onFilesFilter:function(e){t.$$set({errorFiles:[],files:[]});var a=[],i=[];return e.forEach(function(e){e.size>3145728?i.push({name:e.name,reason:"大小超过3M"}):a.push(e)}),i.length&&t.$$set({errorFiles:i,open:!0,step:1}),a}};y["default"].extend(a,k["default"]),this.uploader=new b["default"](a),this.watch("open",function(e){e||(t.stop(),3===t.$get("step")&&t.$toast("将在后台继续入库"))})},show:function(){this.uploader.open()},stop:function(){this.uploader.stop()},validateField:function(e,a,i){var n=this,r={"class":function(){var e=n.$get("files["+a+"].classList["+i+"]")||"",t=+e,r=!e.length||t>=1&&t<=n.$get("classLimit");return n.$set("files["+a+"].error.classList["+i+"]",!r),r},brief:function(){var e=!!(n.$get("files["+a+"].brief")||"").trim().length;return n.$set("files["+a+"].error.brief",!e),e}};return new t["default"](function(t){n.nextTick(function(){t(r[e]&&r[e]())})})},validateAll:function(){var t,a,i,n,r;return e["default"].async(function(s){for(;;)switch(s.prev=s.next){case 0:t=this.$get("classNum"),a=this.$get("files"),i=0,n=a.length;case 3:if(!(i<n)){s.next=22;break}r=0;case 5:if(!(r<t)){s.next=14;break}return s.next=8,e["default"].awrap(this.validateField("class",i,r));case 8:if(s.sent){s.next=11;break}return this.ref("clinput_"+i+"_"+r).focus(),s.abrupt("return",!1);case 11:r++,s.next=5;break;case 14:return s.next=16,e["default"].awrap(this.validateField("brief",i));case 16:if(s.sent){s.next=19;break}return this.ref("bfinput_"+i).focus(),s.abrupt("return",!1);case 19:i++,s.next=3;break;case 22:return s.abrupt("return",!0);case 23:case"end":return s.stop()}},null,this)},fillIn:function(){var t,a,i,n,r,s;return e["default"].async(function(o){for(var l=this;;)switch(o.prev=o.next){case 0:if(3!==this.$get("step")){o.next=2;break}return o.abrupt("return");case 2:return o.next=4,e["default"].awrap(this.validateAll());case 4:if(o.sent){o.next=6;break}return o.abrupt("return");case 6:this.$set("step",3),t=this.$route().query,a=t.appId,i=t.apiId,n=this.$get("files"),r=function(t){var r,s,o,u;return e["default"].async(function(l){for(var d=this;;)switch(l.prev=l.next){case 0:return r=n[t],s=r.key,o=r.classList,u=r.brief,o=o.map(function(e){return e||"0"}).join(","),l.next=7,e["default"].awrap(this.ajax.saveTukuManageImg({apiId:i,appId:a,bosId:s,classList:o,brief:u},{"x-silent":!0}).then(function(){return d.$set("files["+t+"].filled",!0)},function(e){var a=e.global;return d.$set("files["+t+"].message",a)}));case 7:case"end":return l.stop()}},null,l)},s=0;case 13:if(!(s<n.length)){o.next=19;break}return o.next=16,e["default"].awrap(r(s));case 16:s++,o.next=13;break;case 19:this.$set("step",4),this.fire("update"),this.$get("errFiles").length<=0&&setTimeout(function(){l.$set("open",!1)},3e3);case 22:case"end":return o.stop()}},null,this)}})}),define("ai/page/tuku/manage/UploadDialog/UploadDialog.tpl",[],function(){return'<template>\n    <xui-dialog class="tuku-upload-dialog" open="{=open=}" width="{{740}}" title="上传图片">\n        \x3c!-- 上传图片,s-if 会影响高度 --\x3e\n        <div class="tuku-upload-tip">温馨提示：每天可上传500张图片，更多图片请调用API入库。</div>\n        <div class="tuku-upload-img-wrap">\n            <div class="tuku-upload-item" s-for="file,index in files">\n                <div class="item-img-wrap">\n                    <img s-if="file.url" src="{{file.url}}" class="item-img">\n                    <xui-loading s-else style="vertical-align:middle;"/>\n                </div>\n                <div class="progress-row">\n                    上传进度\n                    <span class="percent">{{file.progress}}</span>\n                </div>\n                <div class="textbox-row" s-for="cl,clIndex in file.classList">\n                    <span class="textbox-label">分类：</span>\n                    <xui-textbox s-ref="clinput_{{index}}_{{clIndex}}" on-input="validateField(\'class\',index,clIndex)" class="{{file.error.classList[clIndex] ? \'error\' : \'\'}}" type="number" disabled="{{file.progress !== \'100.00%\'}}" width="{{75}}" height="{{20}}" value="{=cl=}" placeholder="1-{{classLimit}}" />\n                </div>\n                <div class="textbox-row">\n                    <span class="textbox-label">摘要：</span>\n                    <xui-textbox s-ref="bfinput_{{index}}" on-input="validateField(\'brief\',index)" class="{{file.error.brief ? \'error\' : \'\'}}" type="text" disabled="{{file.progress !== \'100.00%\'}}" width="{{75}}" height="{{20}}" value="{=file.brief=}" placeholder="请输入摘要" />\n                </div>\n            </div>\n            <div class="filter-files" s-if="{{errorFiles.length}}">\n                <table>\n                    <thead>\n                        <tr>\n                            <th>图片</th>\n                            <th>失败原因</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr s-for="item in errorFiles">\n                            <td>{{item.name}}</td>\n                            <td>{{item.reason}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div slot="foot">\n            <div class="foot-section" s-if="{{isImageSearch}}">\n                <p>\n                    注：请上传3M以内PNG、JPG、JPEG、BMP格式的图片，长宽比3：1 ，其中宽度在4096px和30px之间，\n                    <span>更多要求请参考<a target="_blank" href="{{Url.tuku.doc}}"> 产品技术文档</a></span>\n                </p>\n                <xui-button on-click="fillIn" disabled="{{step !== 2}}" skin="primary">入库</xui-button>\n            </div>\n            <xui-button s-else on-click="fillIn" disabled="{{step !== 2}}" skin="primary">入库</xui-button>\n        </div>\n        \x3c!-- 入库阶段的蒙层 --\x3e\n        <div s-if="step===3 || step===4" class="cover-wrap">\n            <div s-if="step === 3" class="percent-wrap">\n                <div class="percent-icon"></div>\n                <div class="percent-content">正在上传中，上传总进度{{fillPercent}}</div>\n            </div>\n            <div s-if="step === 4" class="complete-wrap">\n                <div s-if="errFiles.length === 0" class="success-logo"></div>\n                <div s-if="errFiles.length > 0" class="info-logo"></div>\n                <div class="info-title">{{infoTitle}}</div>\n                <div class="info-des">{{infoDes}}</div>\n            </div>\n        </div>\n    </xui-dialog>\n</template>\n'}),define("ai/startup",["exports","module","bat-ria/tpl!./common.tpl","common/startup","babel-runtime/helpers/interop-require-default","./config"],function(exports,module,e,t,a,i){var n=a["default"](t);module.exports={start:function(){n["default"].start(i.config)},stop:function(){}}});
//# sourceMappingURL=startup.js.map